/* =============================================
_navbar-glass-bubble.scss
Animated "glowing glass bubble" highlight that
tracks the active/hovered nav item (Bootstrap).
Works with your existing glass variables.
============================================= */

/* ---------- Theme knobs (matches your toned-down buttons) ---------- */
:root, [data-bs-theme="light"], [data-theme="light"] {
  --nav-bubble-glow: .85;
}

[data-bs-theme="dark"], [data-theme="dark"] {
  --nav-bubble-glow: .78;
}

/* ---------- Layout hooks (no background here to avoid double glass) ---------- */
.navbar .navbar-nav {
  position: relative;
}

.navbar.fixed-top {
  position: fixed;
}

/* The moving glass bubble */
.nav-bubble {
  position: absolute;
  top: 0;
  left: 0;
  width: var(--_w, 0px);
  height: var(--_h, 0px);
  transform: translate3d(var(--_x, 0px), var(--_y, 0px), 0);
  pointer-events: none;
  z-index: 0; /* below links */
  opacity: 0; /* hidden until placed */

  transition: transform .36s cubic-bezier(.22, .61, .36, 1), width .26s ease, height .26s ease, opacity .2s ease;
  will-change: transform, width, height;
}

/* The glow effect */
.nav-bubble::before {
  content: "";
  position: absolute;
  inset: -150% 5%; /* Tall and narrow */
  background: conic-gradient(from 90deg at 50% 50%,
  color-mix(in hsl, var(--bs-primary) 50%, transparent) 0deg,
  color-mix(in hsl, var(--bs-success) 50%, transparent) 180deg,
  color-mix(in hsl, var(--bs-primary) 50%, transparent) 360deg);
  filter: blur(20px);
  opacity: .7;
  transition: opacity .3s ease;
  z-index: -1;
  transform: translateY(25%); /* Start the gradient lower */
}

/* Keep links above the bubble */
.navbar .nav-link {
  display: flex;
  align-items: center;
  height: var(--app-navbar-h); /* Fill the navbar height */
  position: relative;
  z-index: 1;
  margin: 0 1rem;
}

.navbar .nav-link.active {
  font-weight: 600;
}

/* A11y: respect user prefs */
@media (prefers-reduced-motion: reduce) {
  .nav-bubble {
    transition: none;
  }
}

@media (prefers-reduced-transparency: reduce) {
  .nav-bubble {
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
  }
}