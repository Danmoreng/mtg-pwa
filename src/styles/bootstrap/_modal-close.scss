/* src/styles/bootstrap/_modal-close.scss */

/* Ensure the glass overlay sits behind the content */
.modal-content.glass { overflow: clip; } /* or hidden */
.modal-content.glass::after { z-index: 0; }
.modal-content.glass > * { position: relative; z-index: 1; }

/* Close button base – no glow, bigger hit area, currentColor icon */
.modal .btn-close {
  /* Size / layout */
  --btn-close-size: 1.25rem;
  width: var(--btn-close-size);
  height: var(--btn-close-size);
  border-radius: 999px;
  margin: -0.25rem -0.25rem -0.25rem auto; /* typical alignment */
  position: relative; z-index: 1;          /* above glass overlay */

  /* Kill Bootstrap’s glow and opacity fades */
  box-shadow: none !important;
  outline: none;
  opacity: .7;

  /* Icon color (BS 5.3+) */
  --bs-btn-close-color: var(--color-text);

  /* Fallback icon for ≤5.2 using currentColor */
  --_x: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='currentColor' viewBox='0 0 16 16'%3E%3Cpath d='M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 1 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z'/%3E%3C/svg%3E");
  background-image: var(--bs-btn-close-bg, var(--_x));
  background-color: transparent;
  background-repeat: no-repeat;
  background-position: center;
  background-size: 60% 60%;

  color: var(--color-text); /* drives currentColor if fallback kicks in */
  transition: opacity .18s ease;
}

.modal .btn-close::before {
  content: "";
  position: absolute;
  z-index: -1;
  inset: -40%; /* Reduced size */
  border-radius: 50%;
  background: conic-gradient(from 90deg at 50% 50%,
    color-mix(in hsl, var(--bs-primary) 40%, transparent) 0deg,
    color-mix(in hsl, var(--bs-success) 40%, transparent) 180deg,
    color-mix(in hsl, var(--bs-primary) 40%, transparent) 360deg);
  filter: blur(10px); /* Slightly reduced blur */
  opacity: 0;
  transform: scale(0.5);
  transition: opacity .2s ease, transform .2s ease;
}

/* Dark theme: use more subtle colors for the glow */
[data-theme="dark"] .modal .btn-close::before,
[data-bs-theme="dark"] .modal .btn-close::before {
  background: conic-gradient(from 90deg at 50% 50%,
    color-mix(in hsl, var(--bs-primary) 25%, transparent) 0deg,
    color-mix(in hsl, var(--bs-success) 25%, transparent) 180deg,
    color-mix(in hsl, var(--bs-primary) 25%, transparent) 360deg);
}

/* Hover: subtle glow */
.modal .btn-close:hover {
  opacity: 1;
}

.modal .btn-close:hover::before {
  opacity: 1;
  transform: scale(1);
}

/* Remove glow but keep accessible keyboard focus (no mouse focus ring) */
.modal .btn-close:focus,
.modal .btn-close:focus-visible { box-shadow: none !important; }
.modal .btn-close:focus-visible {
  outline: 2px solid color-mix(in hsl, var(--color-text) 70%, transparent);
  outline-offset: 2px;
}
