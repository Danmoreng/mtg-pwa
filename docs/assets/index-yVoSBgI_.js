(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();/**
* @vue/shared v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function ia(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const at={},$r=[],vn=()=>{},vl=()=>!1,Eo=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),aa=e=>e.startsWith("onUpdate:"),Bt=Object.assign,ca=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Pd=Object.prototype.hasOwnProperty,et=(e,t)=>Pd.call(e,t),Te=Array.isArray,Tr=e=>Cs(e)==="[object Map]",So=e=>Cs(e)==="[object Set]",fc=e=>Cs(e)==="[object Date]",Ne=e=>typeof e=="function",yt=e=>typeof e=="string",on=e=>typeof e=="symbol",lt=e=>e!==null&&typeof e=="object",bl=e=>(lt(e)||Ne(e))&&Ne(e.then)&&Ne(e.catch),_l=Object.prototype.toString,Cs=e=>_l.call(e),Od=e=>Cs(e).slice(8,-1),wl=e=>Cs(e)==="[object Object]",la=e=>yt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,ss=ia(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Io=e=>{const t=Object.create(null);return(n=>t[n]||(t[n]=e(n)))},Rd=/-(\w)/g,en=Io(e=>e.replace(Rd,(t,n)=>n?n.toUpperCase():"")),Dd=/\B([A-Z])/g,yr=Io(e=>e.replace(Dd,"-$1").toLowerCase()),Po=Io(e=>e.charAt(0).toUpperCase()+e.slice(1)),ao=Io(e=>e?`on${Po(e)}`:""),Gn=(e,t)=>!Object.is(e,t),co=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},xl=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},ho=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let pc;const Oo=()=>pc||(pc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ur(e){if(Te(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],i=yt(r)?Fd(r):Ur(r);if(i)for(const a in i)t[a]=i[a]}return t}else if(yt(e)||lt(e))return e}const $d=/;(?![^(]*\))/g,Td=/:([^]+)/,Md=/\/\*[^]*?\*\//g;function Fd(e){const t={};return e.replace(Md,"").split($d).forEach(n=>{if(n){const r=n.split(Td);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function Et(e){let t="";if(yt(e))t=e;else if(Te(e))for(let n=0;n<e.length;n++){const r=Et(e[n]);r&&(t+=r+" ")}else if(lt(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function Bd(e){if(!e)return null;let{class:t,style:n}=e;return t&&!yt(t)&&(e.class=Et(t)),n&&(e.style=Ur(n)),e}const Nd="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",jd=ia(Nd);function kl(e){return!!e||e===""}function Ld(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=Ro(e[r],t[r]);return n}function Ro(e,t){if(e===t)return!0;let n=fc(e),r=fc(t);if(n||r)return n&&r?e.getTime()===t.getTime():!1;if(n=on(e),r=on(t),n||r)return e===t;if(n=Te(e),r=Te(t),n||r)return n&&r?Ld(e,t):!1;if(n=lt(e),r=lt(t),n||r){if(!n||!r)return!1;const i=Object.keys(e).length,a=Object.keys(t).length;if(i!==a)return!1;for(const l in e){const d=e.hasOwnProperty(l),f=t.hasOwnProperty(l);if(d&&!f||!d&&f||!Ro(e[l],t[l]))return!1}}return String(e)===String(t)}function qd(e,t){return e.findIndex(n=>Ro(n,t))}const Cl=e=>!!(e&&e.__v_isRef===!0),ie=e=>yt(e)?e:e==null?"":Te(e)||lt(e)&&(e.toString===_l||!Ne(e.toString))?Cl(e)?ie(e.value):JSON.stringify(e,Al,2):String(e),Al=(e,t)=>Cl(t)?Al(e,t.value):Tr(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,i],a)=>(n[xi(r,a)+" =>"]=i,n),{})}:So(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>xi(n))}:on(t)?xi(t):lt(t)&&!Te(t)&&!wl(t)?String(t):t,xi=(e,t="")=>{var n;return on(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Tt;class El{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Tt,!t&&Tt&&(this.index=(Tt.scopes||(Tt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=Tt;try{return Tt=this,t()}finally{Tt=n}}}on(){++this._on===1&&(this.prevScope=Tt,Tt=this)}off(){this._on>0&&--this._on===0&&(Tt=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function Do(e){return new El(e)}function ua(){return Tt}function Sl(e,t=!1){Tt&&Tt.cleanups.push(e)}let ct;const ki=new WeakSet;class Il{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Tt&&Tt.active&&Tt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,ki.has(this)&&(ki.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Ol(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,hc(this),Rl(this);const t=ct,n=sn;ct=this,sn=!0;try{return this.fn()}finally{Dl(this),ct=t,sn=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)pa(t);this.deps=this.depsTail=void 0,hc(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?ki.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){qi(this)&&this.run()}get dirty(){return qi(this)}}let Pl=0,os,is;function Ol(e,t=!1){if(e.flags|=8,t){e.next=is,is=e;return}e.next=os,os=e}function da(){Pl++}function fa(){if(--Pl>0)return;if(is){let t=is;for(is=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;os;){let t=os;for(os=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=n}}if(e)throw e}function Rl(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Dl(e){let t,n=e.depsTail,r=n;for(;r;){const i=r.prevDep;r.version===-1?(r===n&&(n=i),pa(r),Kd(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}e.deps=t,e.depsTail=n}function qi(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&($l(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function $l(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===ms)||(e.globalVersion=ms,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!qi(e))))return;e.flags|=2;const t=e.dep,n=ct,r=sn;ct=e,sn=!0;try{Rl(e);const i=e.fn(e._value);(t.version===0||Gn(i,e._value))&&(e.flags|=128,e._value=i,t.version++)}catch(i){throw t.version++,i}finally{ct=n,sn=r,Dl(e),e.flags&=-3}}function pa(e,t=!1){const{dep:n,prevSub:r,nextSub:i}=e;if(r&&(r.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=r,e.nextSub=void 0),n.subs===e&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let a=n.computed.deps;a;a=a.nextDep)pa(a,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function Kd(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let sn=!0;const Tl=[];function Dn(){Tl.push(sn),sn=!1}function $n(){const e=Tl.pop();sn=e===void 0?!0:e}function hc(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=ct;ct=void 0;try{t()}finally{ct=n}}}let ms=0;class Ud{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ha{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!ct||!sn||ct===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==ct)n=this.activeLink=new Ud(ct,this),ct.deps?(n.prevDep=ct.depsTail,ct.depsTail.nextDep=n,ct.depsTail=n):ct.deps=ct.depsTail=n,Ml(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=ct.depsTail,n.nextDep=void 0,ct.depsTail.nextDep=n,ct.depsTail=n,ct.deps===n&&(ct.deps=r)}return n}trigger(t){this.version++,ms++,this.notify(t)}notify(t){da();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{fa()}}}function Ml(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)Ml(r)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const mo=new WeakMap,pr=Symbol(""),Ki=Symbol(""),ys=Symbol("");function Mt(e,t,n){if(sn&&ct){let r=mo.get(e);r||mo.set(e,r=new Map);let i=r.get(n);i||(r.set(n,i=new ha),i.map=r,i.key=n),i.track()}}function On(e,t,n,r,i,a){const l=mo.get(e);if(!l){ms++;return}const d=f=>{f&&f.trigger()};if(da(),t==="clear")l.forEach(d);else{const f=Te(e),m=f&&la(n);if(f&&n==="length"){const h=Number(r);l.forEach((g,v)=>{(v==="length"||v===ys||!on(v)&&v>=h)&&d(g)})}else switch((n!==void 0||l.has(void 0))&&d(l.get(n)),m&&d(l.get(ys)),t){case"add":f?m&&d(l.get("length")):(d(l.get(pr)),Tr(e)&&d(l.get(Ki)));break;case"delete":f||(d(l.get(pr)),Tr(e)&&d(l.get(Ki)));break;case"set":Tr(e)&&d(l.get(pr));break}}fa()}function Vd(e,t){const n=mo.get(e);return n&&n.get(t)}function Ir(e){const t=Je(e);return t===e?t:(Mt(t,"iterate",ys),nn(e)?t:t.map(Pt))}function $o(e){return Mt(e=Je(e),"iterate",ys),e}const Hd={__proto__:null,[Symbol.iterator](){return Ci(this,Symbol.iterator,Pt)},concat(...e){return Ir(this).concat(...e.map(t=>Te(t)?Ir(t):t))},entries(){return Ci(this,"entries",e=>(e[1]=Pt(e[1]),e))},every(e,t){return En(this,"every",e,t,void 0,arguments)},filter(e,t){return En(this,"filter",e,t,n=>n.map(Pt),arguments)},find(e,t){return En(this,"find",e,t,Pt,arguments)},findIndex(e,t){return En(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return En(this,"findLast",e,t,Pt,arguments)},findLastIndex(e,t){return En(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return En(this,"forEach",e,t,void 0,arguments)},includes(...e){return Ai(this,"includes",e)},indexOf(...e){return Ai(this,"indexOf",e)},join(e){return Ir(this).join(e)},lastIndexOf(...e){return Ai(this,"lastIndexOf",e)},map(e,t){return En(this,"map",e,t,void 0,arguments)},pop(){return Zr(this,"pop")},push(...e){return Zr(this,"push",e)},reduce(e,...t){return mc(this,"reduce",e,t)},reduceRight(e,...t){return mc(this,"reduceRight",e,t)},shift(){return Zr(this,"shift")},some(e,t){return En(this,"some",e,t,void 0,arguments)},splice(...e){return Zr(this,"splice",e)},toReversed(){return Ir(this).toReversed()},toSorted(e){return Ir(this).toSorted(e)},toSpliced(...e){return Ir(this).toSpliced(...e)},unshift(...e){return Zr(this,"unshift",e)},values(){return Ci(this,"values",Pt)}};function Ci(e,t,n){const r=$o(e),i=r[t]();return r!==e&&!nn(e)&&(i._next=i.next,i.next=()=>{const a=i._next();return a.value&&(a.value=n(a.value)),a}),i}const Wd=Array.prototype;function En(e,t,n,r,i,a){const l=$o(e),d=l!==e&&!nn(e),f=l[t];if(f!==Wd[t]){const g=f.apply(e,a);return d?Pt(g):g}let m=n;l!==e&&(d?m=function(g,v){return n.call(this,Pt(g),v,e)}:n.length>2&&(m=function(g,v){return n.call(this,g,v,e)}));const h=f.call(l,m,r);return d&&i?i(h):h}function mc(e,t,n,r){const i=$o(e);let a=n;return i!==e&&(nn(e)?n.length>3&&(a=function(l,d,f){return n.call(this,l,d,f,e)}):a=function(l,d,f){return n.call(this,l,Pt(d),f,e)}),i[t](a,...r)}function Ai(e,t,n){const r=Je(e);Mt(r,"iterate",ys);const i=r[t](...n);return(i===-1||i===!1)&&ga(n[0])?(n[0]=Je(n[0]),r[t](...n)):i}function Zr(e,t,n=[]){Dn(),da();const r=Je(e)[t].apply(e,n);return fa(),$n(),r}const zd=ia("__proto__,__v_isRef,__isVue"),Fl=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(on));function Qd(e){on(e)||(e=String(e));const t=Je(this);return Mt(t,"has",e),t.hasOwnProperty(e)}class Bl{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,r){if(n==="__v_skip")return t.__v_skip;const i=this._isReadonly,a=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return a;if(n==="__v_raw")return r===(i?a?sf:ql:a?Ll:jl).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const l=Te(t);if(!i){let f;if(l&&(f=Hd[n]))return f;if(n==="hasOwnProperty")return Qd}const d=Reflect.get(t,n,bt(t)?t:r);return(on(n)?Fl.has(n):zd(n))||(i||Mt(t,"get",n),a)?d:bt(d)?l&&la(n)?d:d.value:lt(d)?i?Ul(d):gr(d):d}}class Nl extends Bl{constructor(t=!1){super(!1,t)}set(t,n,r,i){let a=t[n];if(!this._isShallow){const f=Zn(a);if(!nn(r)&&!Zn(r)&&(a=Je(a),r=Je(r)),!Te(t)&&bt(a)&&!bt(r))return f||(a.value=r),!0}const l=Te(t)&&la(n)?Number(n)<t.length:et(t,n),d=Reflect.set(t,n,r,bt(t)?t:i);return t===Je(i)&&(l?Gn(r,a)&&On(t,"set",n,r):On(t,"add",n,r)),d}deleteProperty(t,n){const r=et(t,n);t[n];const i=Reflect.deleteProperty(t,n);return i&&r&&On(t,"delete",n,void 0),i}has(t,n){const r=Reflect.has(t,n);return(!on(n)||!Fl.has(n))&&Mt(t,"has",n),r}ownKeys(t){return Mt(t,"iterate",Te(t)?"length":pr),Reflect.ownKeys(t)}}class Yd extends Bl{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const Gd=new Nl,Jd=new Yd,Xd=new Nl(!0);const Ui=e=>e,Xs=e=>Reflect.getPrototypeOf(e);function Zd(e,t,n){return function(...r){const i=this.__v_raw,a=Je(i),l=Tr(a),d=e==="entries"||e===Symbol.iterator&&l,f=e==="keys"&&l,m=i[e](...r),h=n?Ui:t?yo:Pt;return!t&&Mt(a,"iterate",f?Ki:pr),{next(){const{value:g,done:v}=m.next();return v?{value:g,done:v}:{value:d?[h(g[0]),h(g[1])]:h(g),done:v}},[Symbol.iterator](){return this}}}}function Zs(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function ef(e,t){const n={get(i){const a=this.__v_raw,l=Je(a),d=Je(i);e||(Gn(i,d)&&Mt(l,"get",i),Mt(l,"get",d));const{has:f}=Xs(l),m=t?Ui:e?yo:Pt;if(f.call(l,i))return m(a.get(i));if(f.call(l,d))return m(a.get(d));a!==l&&a.get(i)},get size(){const i=this.__v_raw;return!e&&Mt(Je(i),"iterate",pr),i.size},has(i){const a=this.__v_raw,l=Je(a),d=Je(i);return e||(Gn(i,d)&&Mt(l,"has",i),Mt(l,"has",d)),i===d?a.has(i):a.has(i)||a.has(d)},forEach(i,a){const l=this,d=l.__v_raw,f=Je(d),m=t?Ui:e?yo:Pt;return!e&&Mt(f,"iterate",pr),d.forEach((h,g)=>i.call(a,m(h),m(g),l))}};return Bt(n,e?{add:Zs("add"),set:Zs("set"),delete:Zs("delete"),clear:Zs("clear")}:{add(i){!t&&!nn(i)&&!Zn(i)&&(i=Je(i));const a=Je(this);return Xs(a).has.call(a,i)||(a.add(i),On(a,"add",i,i)),this},set(i,a){!t&&!nn(a)&&!Zn(a)&&(a=Je(a));const l=Je(this),{has:d,get:f}=Xs(l);let m=d.call(l,i);m||(i=Je(i),m=d.call(l,i));const h=f.call(l,i);return l.set(i,a),m?Gn(a,h)&&On(l,"set",i,a):On(l,"add",i,a),this},delete(i){const a=Je(this),{has:l,get:d}=Xs(a);let f=l.call(a,i);f||(i=Je(i),f=l.call(a,i)),d&&d.call(a,i);const m=a.delete(i);return f&&On(a,"delete",i,void 0),m},clear(){const i=Je(this),a=i.size!==0,l=i.clear();return a&&On(i,"clear",void 0,void 0),l}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=Zd(i,e,t)}),n}function ma(e,t){const n=ef(e,t);return(r,i,a)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?r:Reflect.get(et(n,i)&&i in r?n:r,i,a)}const tf={get:ma(!1,!1)},nf={get:ma(!1,!0)},rf={get:ma(!0,!1)};const jl=new WeakMap,Ll=new WeakMap,ql=new WeakMap,sf=new WeakMap;function of(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function af(e){return e.__v_skip||!Object.isExtensible(e)?0:of(Od(e))}function gr(e){return Zn(e)?e:ya(e,!1,Gd,tf,jl)}function Kl(e){return ya(e,!1,Xd,nf,Ll)}function Ul(e){return ya(e,!0,Jd,rf,ql)}function ya(e,t,n,r,i){if(!lt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const a=af(e);if(a===0)return e;const l=i.get(e);if(l)return l;const d=new Proxy(e,a===2?r:n);return i.set(e,d),d}function Jn(e){return Zn(e)?Jn(e.__v_raw):!!(e&&e.__v_isReactive)}function Zn(e){return!!(e&&e.__v_isReadonly)}function nn(e){return!!(e&&e.__v_isShallow)}function ga(e){return e?!!e.__v_raw:!1}function Je(e){const t=e&&e.__v_raw;return t?Je(t):e}function va(e){return!et(e,"__v_skip")&&Object.isExtensible(e)&&xl(e,"__v_skip",!0),e}const Pt=e=>lt(e)?gr(e):e,yo=e=>lt(e)?Ul(e):e;function bt(e){return e?e.__v_isRef===!0:!1}function Ae(e){return Hl(e,!1)}function Vl(e){return Hl(e,!0)}function Hl(e,t){return bt(e)?e:new cf(e,t)}class cf{constructor(t,n){this.dep=new ha,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:Je(t),this._value=n?t:Pt(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,r=this.__v_isShallow||nn(t)||Zn(t);t=r?t:Je(t),Gn(t,n)&&(this._rawValue=t,this._value=r?t:Pt(t),this.dep.trigger())}}function ke(e){return bt(e)?e.value:e}function bn(e){return Ne(e)?e():ke(e)}const lf={get:(e,t,n)=>t==="__v_raw"?e:ke(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const i=e[t];return bt(i)&&!bt(n)?(i.value=n,!0):Reflect.set(e,t,n,r)}};function Wl(e){return Jn(e)?e:new Proxy(e,lf)}function ba(e){const t=Te(e)?new Array(e.length):{};for(const n in e)t[n]=df(e,n);return t}class uf{constructor(t,n,r){this._object=t,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return Vd(Je(this._object),this._key)}}function df(e,t,n){const r=e[t];return bt(r)?r:new uf(e,t,n)}class ff{constructor(t,n,r){this.fn=t,this.setter=n,this._value=void 0,this.dep=new ha(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=ms-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&ct!==this)return Ol(this,!0),!0}get value(){const t=this.dep.track();return $l(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function pf(e,t,n=!1){let r,i;return Ne(e)?r=e:(r=e.get,i=e.set),new ff(r,i,n)}const eo={},go=new WeakMap;let ur;function hf(e,t=!1,n=ur){if(n){let r=go.get(n);r||go.set(n,r=[]),r.push(e)}}function mf(e,t,n=at){const{immediate:r,deep:i,once:a,scheduler:l,augmentJob:d,call:f}=n,m=F=>i?F:nn(F)||i===!1||i===0?Rn(F,1):Rn(F);let h,g,v,x,P=!1,L=!1;if(bt(e)?(g=()=>e.value,P=nn(e)):Jn(e)?(g=()=>m(e),P=!0):Te(e)?(L=!0,P=e.some(F=>Jn(F)||nn(F)),g=()=>e.map(F=>{if(bt(F))return F.value;if(Jn(F))return m(F);if(Ne(F))return f?f(F,2):F()})):Ne(e)?t?g=f?()=>f(e,2):e:g=()=>{if(v){Dn();try{v()}finally{$n()}}const F=ur;ur=h;try{return f?f(e,3,[x]):e(x)}finally{ur=F}}:g=vn,t&&i){const F=g,se=i===!0?1/0:i;g=()=>Rn(F(),se)}const Q=ua(),G=()=>{h.stop(),Q&&Q.active&&ca(Q.effects,h)};if(a&&t){const F=t;t=(...se)=>{F(...se),G()}}let ne=L?new Array(e.length).fill(eo):eo;const j=F=>{if(!(!(h.flags&1)||!h.dirty&&!F))if(t){const se=h.run();if(i||P||(L?se.some((ge,Ce)=>Gn(ge,ne[Ce])):Gn(se,ne))){v&&v();const ge=ur;ur=h;try{const Ce=[se,ne===eo?void 0:L&&ne[0]===eo?[]:ne,x];ne=se,f?f(t,3,Ce):t(...Ce)}finally{ur=ge}}}else h.run()};return d&&d(j),h=new Il(g),h.scheduler=l?()=>l(j,!1):j,x=F=>hf(F,!1,h),v=h.onStop=()=>{const F=go.get(h);if(F){if(f)f(F,4);else for(const se of F)se();go.delete(h)}},t?r?j(!0):ne=h.run():l?l(j.bind(null,!0),!0):h.run(),G.pause=h.pause.bind(h),G.resume=h.resume.bind(h),G.stop=G,G}function Rn(e,t=1/0,n){if(t<=0||!lt(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,bt(e))Rn(e.value,t,n);else if(Te(e))for(let r=0;r<e.length;r++)Rn(e[r],t,n);else if(So(e)||Tr(e))e.forEach(r=>{Rn(r,t,n)});else if(wl(e)){for(const r in e)Rn(e[r],t,n);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&Rn(e[r],t,n)}return e}/**
* @vue/runtime-core v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function As(e,t,n,r){try{return r?e(...r):e()}catch(i){To(i,t,n)}}function _n(e,t,n,r){if(Ne(e)){const i=As(e,t,n,r);return i&&bl(i)&&i.catch(a=>{To(a,t,n)}),i}if(Te(e)){const i=[];for(let a=0;a<e.length;a++)i.push(_n(e[a],t,n,r));return i}}function To(e,t,n,r=!0){const i=t?t.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:l}=t&&t.appContext.config||at;if(t){let d=t.parent;const f=t.proxy,m=`https://vuejs.org/error-reference/#runtime-${n}`;for(;d;){const h=d.ec;if(h){for(let g=0;g<h.length;g++)if(h[g](e,f,m)===!1)return}d=d.parent}if(a){Dn(),As(a,null,10,[e,f,m]),$n();return}}yf(e,n,i,r,l)}function yf(e,t,n,r=!0,i=!1){if(i)throw e;console.error(e)}const Vt=[];let hn=-1;const Mr=[];let zn=null,Rr=0;const zl=Promise.resolve();let vo=null;function an(e){const t=vo||zl;return e?t.then(this?e.bind(this):e):t}function gf(e){let t=hn+1,n=Vt.length;for(;t<n;){const r=t+n>>>1,i=Vt[r],a=gs(i);a<e||a===e&&i.flags&2?t=r+1:n=r}return t}function _a(e){if(!(e.flags&1)){const t=gs(e),n=Vt[Vt.length-1];!n||!(e.flags&2)&&t>=gs(n)?Vt.push(e):Vt.splice(gf(t),0,e),e.flags|=1,Ql()}}function Ql(){vo||(vo=zl.then(Gl))}function vf(e){Te(e)?Mr.push(...e):zn&&e.id===-1?zn.splice(Rr+1,0,e):e.flags&1||(Mr.push(e),e.flags|=1),Ql()}function yc(e,t,n=hn+1){for(;n<Vt.length;n++){const r=Vt[n];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;Vt.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Yl(e){if(Mr.length){const t=[...new Set(Mr)].sort((n,r)=>gs(n)-gs(r));if(Mr.length=0,zn){zn.push(...t);return}for(zn=t,Rr=0;Rr<zn.length;Rr++){const n=zn[Rr];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}zn=null,Rr=0}}const gs=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Gl(e){try{for(hn=0;hn<Vt.length;hn++){const t=Vt[hn];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),As(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;hn<Vt.length;hn++){const t=Vt[hn];t&&(t.flags&=-2)}hn=-1,Vt.length=0,Yl(),vo=null,(Vt.length||Mr.length)&&Gl()}}let Ot=null,Jl=null;function bo(e){const t=Ot;return Ot=e,Jl=e&&e.type.__scopeId||null,t}function rt(e,t=Ot,n){if(!t||e._n)return e;const r=(...i)=>{r._d&&Pc(-1);const a=bo(t);let l;try{l=e(...i)}finally{bo(a),r._d&&Pc(1)}return l};return r._n=!0,r._c=!0,r._d=!0,r}function vs(e,t){if(Ot===null)return e;const n=Lo(Ot),r=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[a,l,d,f=at]=t[i];a&&(Ne(a)&&(a={mounted:a,updated:a}),a.deep&&Rn(l),r.push({dir:a,instance:n,value:l,oldValue:void 0,arg:d,modifiers:f}))}return e}function cr(e,t,n,r){const i=e.dirs,a=t&&t.dirs;for(let l=0;l<i.length;l++){const d=i[l];a&&(d.oldValue=a[l].value);let f=d.dir[r];f&&(Dn(),_n(f,n,8,[e.el,d,e,t]),$n())}}const Xl=Symbol("_vte"),bf=e=>e.__isTeleport,as=e=>e&&(e.disabled||e.disabled===""),gc=e=>e&&(e.defer||e.defer===""),vc=e=>typeof SVGElement<"u"&&e instanceof SVGElement,bc=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,Vi=(e,t)=>{const n=e&&e.to;return yt(n)?t?t(n):null:n},Zl={name:"Teleport",__isTeleport:!0,process(e,t,n,r,i,a,l,d,f,m){const{mc:h,pc:g,pbc:v,o:{insert:x,querySelector:P,createText:L,createComment:Q}}=m,G=as(t.props);let{shapeFlag:ne,children:j,dynamicChildren:F}=t;if(e==null){const se=t.el=L(""),ge=t.anchor=L("");x(se,n,r),x(ge,n,r);const Ce=(Ee,qe)=>{ne&16&&(i&&i.isCE&&(i.ce._teleportTarget=Ee),h(j,Ee,qe,i,a,l,d,f))},Se=()=>{const Ee=t.target=Vi(t.props,P),qe=eu(Ee,t,L,x);Ee&&(l!=="svg"&&vc(Ee)?l="svg":l!=="mathml"&&bc(Ee)&&(l="mathml"),G||(Ce(Ee,qe),lo(t,!1)))};G&&(Ce(n,ge),lo(t,!0)),gc(t.props)?(t.el.__isMounted=!1,Kt(()=>{Se(),delete t.el.__isMounted},a)):Se()}else{if(gc(t.props)&&e.el.__isMounted===!1){Kt(()=>{Zl.process(e,t,n,r,i,a,l,d,f,m)},a);return}t.el=e.el,t.targetStart=e.targetStart;const se=t.anchor=e.anchor,ge=t.target=e.target,Ce=t.targetAnchor=e.targetAnchor,Se=as(e.props),Ee=Se?n:ge,qe=Se?se:Ce;if(l==="svg"||vc(ge)?l="svg":(l==="mathml"||bc(ge))&&(l="mathml"),F?(v(e.dynamicChildren,F,Ee,i,a,l,d),Ca(e,t,!0)):f||g(e,t,Ee,qe,i,a,l,d,!1),G)Se?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):to(t,n,se,m,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const ut=t.target=Vi(t.props,P);ut&&to(t,ut,null,m,0)}else Se&&to(t,ge,Ce,m,1);lo(t,G)}},remove(e,t,n,{um:r,o:{remove:i}},a){const{shapeFlag:l,children:d,anchor:f,targetStart:m,targetAnchor:h,target:g,props:v}=e;if(g&&(i(m),i(h)),a&&i(f),l&16){const x=a||!as(v);for(let P=0;P<d.length;P++){const L=d[P];r(L,t,n,x,!!L.dynamicChildren)}}},move:to,hydrate:_f};function to(e,t,n,{o:{insert:r},m:i},a=2){a===0&&r(e.targetAnchor,t,n);const{el:l,anchor:d,shapeFlag:f,children:m,props:h}=e,g=a===2;if(g&&r(l,t,n),(!g||as(h))&&f&16)for(let v=0;v<m.length;v++)i(m[v],t,n,2);g&&r(d,t,n)}function _f(e,t,n,r,i,a,{o:{nextSibling:l,parentNode:d,querySelector:f,insert:m,createText:h}},g){const v=t.target=Vi(t.props,f);if(v){const x=as(t.props),P=v._lpa||v.firstChild;if(t.shapeFlag&16)if(x)t.anchor=g(l(e),t,d(e),n,r,i,a),t.targetStart=P,t.targetAnchor=P&&l(P);else{t.anchor=l(e);let L=P;for(;L;){if(L&&L.nodeType===8){if(L.data==="teleport start anchor")t.targetStart=L;else if(L.data==="teleport anchor"){t.targetAnchor=L,v._lpa=t.targetAnchor&&l(t.targetAnchor);break}}L=l(L)}t.targetAnchor||eu(v,t,h,m),g(P&&l(P),t,v,n,r,i,a)}lo(t,x)}return t.anchor&&l(t.anchor)}const wf=Zl;function lo(e,t){const n=e.ctx;if(n&&n.ut){let r,i;for(t?(r=e.el,i=e.anchor):(r=e.targetStart,i=e.targetAnchor);r&&r!==i;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function eu(e,t,n,r){const i=t.targetStart=n(""),a=t.targetAnchor=n("");return i[Xl]=a,e&&(r(i,e),r(a,e)),a}const xf=Symbol("_leaveCb");function wa(e,t){e.shapeFlag&6&&e.component?(e.transition=t,wa(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}/*! #__NO_SIDE_EFFECTS__ */function ot(e,t){return Ne(e)?Bt({name:e.name},t,{setup:e}):e}function kf(){const e=Mn();return e?(e.appContext.config.idPrefix||"v")+"-"+e.ids[0]+e.ids[1]++:""}function tu(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function cs(e,t,n,r,i=!1){if(Te(e)){e.forEach((P,L)=>cs(P,t&&(Te(t)?t[L]:t),n,r,i));return}if(Fr(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&cs(e,t,n,r.component.subTree);return}const a=r.shapeFlag&4?Lo(r.component):r.el,l=i?null:a,{i:d,r:f}=e,m=t&&t.r,h=d.refs===at?d.refs={}:d.refs,g=d.setupState,v=Je(g),x=g===at?vl:P=>et(v,P);if(m!=null&&m!==f){if(yt(m))h[m]=null,x(m)&&(g[m]=null);else if(bt(m)){m.value=null;const P=t;P.k&&(h[P.k]=null)}}if(Ne(f))As(f,d,12,[l,h]);else{const P=yt(f),L=bt(f);if(P||L){const Q=()=>{if(e.f){const G=P?x(f)?g[f]:h[f]:f.value;if(i)Te(G)&&ca(G,a);else if(Te(G))G.includes(a)||G.push(a);else if(P)h[f]=[a],x(f)&&(g[f]=h[f]);else{const ne=[a];f.value=ne,e.k&&(h[e.k]=ne)}}else P?(h[f]=l,x(f)&&(g[f]=l)):L&&(f.value=l,e.k&&(h[e.k]=l))};l?(Q.id=-1,Kt(Q,n)):Q()}}}Oo().requestIdleCallback;Oo().cancelIdleCallback;const Fr=e=>!!e.type.__asyncLoader,nu=e=>e.type.__isKeepAlive;function Cf(e,t){ru(e,"a",t)}function Af(e,t){ru(e,"da",t)}function ru(e,t,n=Ft){const r=e.__wdc||(e.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(Mo(t,r,n),n){let i=n.parent;for(;i&&i.parent;)nu(i.parent.vnode)&&Ef(r,t,n,i),i=i.parent}}function Ef(e,t,n,r){const i=Mo(t,e,r,!0);Fo(()=>{ca(r[t],i)},n)}function Mo(e,t,n=Ft,r=!1){if(n){const i=n[e]||(n[e]=[]),a=t.__weh||(t.__weh=(...l)=>{Dn();const d=Es(n),f=_n(t,n,e,l);return d(),$n(),f});return r?i.unshift(a):i.push(a),a}}const Tn=e=>(t,n=Ft)=>{(!ws||e==="sp")&&Mo(e,(...r)=>t(...r),n)},Sf=Tn("bm"),er=Tn("m"),If=Tn("bu"),Pf=Tn("u"),su=Tn("bum"),Fo=Tn("um"),Of=Tn("sp"),Rf=Tn("rtg"),Df=Tn("rtc");function $f(e,t=Ft){Mo("ec",e,t)}const Tf="components";function Bo(e,t){return Ff(Tf,e,!0,t)||e}const Mf=Symbol.for("v-ndc");function Ff(e,t,n=!0,r=!1){const i=Ot||Ft;if(i){const a=i.type;{const d=wp(a,!1);if(d&&(d===t||d===en(t)||d===Po(en(t))))return a}const l=_c(i[e]||a[e],t)||_c(i.appContext[e],t);return!l&&r?a:l}}function _c(e,t){return e&&(e[t]||e[en(t)]||e[Po(en(t))])}function Ut(e,t,n,r){let i;const a=n,l=Te(e);if(l||yt(e)){const d=l&&Jn(e);let f=!1,m=!1;d&&(f=!nn(e),m=Zn(e),e=$o(e)),i=new Array(e.length);for(let h=0,g=e.length;h<g;h++)i[h]=t(f?m?yo(Pt(e[h])):Pt(e[h]):e[h],h,void 0,a)}else if(typeof e=="number"){i=new Array(e);for(let d=0;d<e;d++)i[d]=t(d+1,d,void 0,a)}else if(lt(e))if(e[Symbol.iterator])i=Array.from(e,(d,f)=>t(d,f,void 0,a));else{const d=Object.keys(e);i=new Array(d.length);for(let f=0,m=d.length;f<m;f++){const h=d[f];i[f]=t(e[h],h,f,a)}}else i=[];return i}function Qt(e,t,n={},r,i){if(Ot.ce||Ot.parent&&Fr(Ot.parent)&&Ot.parent.ce)return K(),St(nt,null,[Ue("slot",n,r)],64);let a=e[t];a&&a._c&&(a._d=!1),K();const l=a&&ou(a(n)),d=n.key||l&&l.key,f=St(nt,{key:(d&&!on(d)?d:`_${t}`)+(!l&&r?"_fb":"")},l||[],l&&e._===1?64:-2);return f.scopeId&&(f.slotScopeIds=[f.scopeId+"-s"]),a&&a._c&&(a._d=!0),f}function ou(e){return e.some(t=>_s(t)?!(t.type===wn||t.type===nt&&!ou(t.children)):!0)?e:null}const Hi=e=>e?Cu(e)?Lo(e):Hi(e.parent):null,ls=Bt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Hi(e.parent),$root:e=>Hi(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>au(e),$forceUpdate:e=>e.f||(e.f=()=>{_a(e.update)}),$nextTick:e=>e.n||(e.n=an.bind(e.proxy)),$watch:e=>sp.bind(e)}),Ei=(e,t)=>e!==at&&!e.__isScriptSetup&&et(e,t),Bf={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:r,data:i,props:a,accessCache:l,type:d,appContext:f}=e;let m;if(t[0]!=="$"){const x=l[t];if(x!==void 0)switch(x){case 1:return r[t];case 2:return i[t];case 4:return n[t];case 3:return a[t]}else{if(Ei(r,t))return l[t]=1,r[t];if(i!==at&&et(i,t))return l[t]=2,i[t];if((m=e.propsOptions[0])&&et(m,t))return l[t]=3,a[t];if(n!==at&&et(n,t))return l[t]=4,n[t];Wi&&(l[t]=0)}}const h=ls[t];let g,v;if(h)return t==="$attrs"&&Mt(e.attrs,"get",""),h(e);if((g=d.__cssModules)&&(g=g[t]))return g;if(n!==at&&et(n,t))return l[t]=4,n[t];if(v=f.config.globalProperties,et(v,t))return v[t]},set({_:e},t,n){const{data:r,setupState:i,ctx:a}=e;return Ei(i,t)?(i[t]=n,!0):r!==at&&et(r,t)?(r[t]=n,!0):et(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(a[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:i,propsOptions:a,type:l}},d){let f,m;return!!(n[d]||e!==at&&d[0]!=="$"&&et(e,d)||Ei(t,d)||(f=a[0])&&et(f,d)||et(r,d)||et(ls,d)||et(i.config.globalProperties,d)||(m=l.__cssModules)&&m[d])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:et(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function wc(e){return Te(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Wi=!0;function Nf(e){const t=au(e),n=e.proxy,r=e.ctx;Wi=!1,t.beforeCreate&&xc(t.beforeCreate,e,"bc");const{data:i,computed:a,methods:l,watch:d,provide:f,inject:m,created:h,beforeMount:g,mounted:v,beforeUpdate:x,updated:P,activated:L,deactivated:Q,beforeDestroy:G,beforeUnmount:ne,destroyed:j,unmounted:F,render:se,renderTracked:ge,renderTriggered:Ce,errorCaptured:Se,serverPrefetch:Ee,expose:qe,inheritAttrs:ut,components:Xe,directives:ze,filters:wt}=t;if(m&&jf(m,r,null),l)for(const Oe in l){const z=l[Oe];Ne(z)&&(r[Oe]=z.bind(n))}if(i){const Oe=i.call(n,n);lt(Oe)&&(e.data=gr(Oe))}if(Wi=!0,a)for(const Oe in a){const z=a[Oe],V=Ne(z)?z.bind(n,n):Ne(z.get)?z.get.bind(n,n):vn,N=!Ne(z)&&Ne(z.set)?z.set.bind(n):vn,Ie=st({get:V,set:N});Object.defineProperty(r,Oe,{enumerable:!0,configurable:!0,get:()=>Ie.value,set:ve=>Ie.value=ve})}if(d)for(const Oe in d)iu(d[Oe],r,n,Oe);if(f){const Oe=Ne(f)?f.call(n):f;Reflect.ownKeys(Oe).forEach(z=>{us(z,Oe[z])})}h&&xc(h,e,"c");function Me(Oe,z){Te(z)?z.forEach(V=>Oe(V.bind(n))):z&&Oe(z.bind(n))}if(Me(Sf,g),Me(er,v),Me(If,x),Me(Pf,P),Me(Cf,L),Me(Af,Q),Me($f,Se),Me(Df,ge),Me(Rf,Ce),Me(su,ne),Me(Fo,F),Me(Of,Ee),Te(qe))if(qe.length){const Oe=e.exposed||(e.exposed={});qe.forEach(z=>{Object.defineProperty(Oe,z,{get:()=>n[z],set:V=>n[z]=V,enumerable:!0})})}else e.exposed||(e.exposed={});se&&e.render===vn&&(e.render=se),ut!=null&&(e.inheritAttrs=ut),Xe&&(e.components=Xe),ze&&(e.directives=ze),Ee&&tu(e)}function jf(e,t,n=vn){Te(e)&&(e=zi(e));for(const r in e){const i=e[r];let a;lt(i)?"default"in i?a=Xt(i.from||r,i.default,!0):a=Xt(i.from||r):a=Xt(i),bt(a)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>a.value,set:l=>a.value=l}):t[r]=a}}function xc(e,t,n){_n(Te(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function iu(e,t,n,r){let i=r.includes(".")?vu(n,r):()=>n[r];if(yt(e)){const a=t[e];Ne(a)&&Zt(i,a)}else if(Ne(e))Zt(i,e.bind(n));else if(lt(e))if(Te(e))e.forEach(a=>iu(a,t,n,r));else{const a=Ne(e.handler)?e.handler.bind(n):t[e.handler];Ne(a)&&Zt(i,a,e)}}function au(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:i,optionsCache:a,config:{optionMergeStrategies:l}}=e.appContext,d=a.get(t);let f;return d?f=d:!i.length&&!n&&!r?f=t:(f={},i.length&&i.forEach(m=>_o(f,m,l,!0)),_o(f,t,l)),lt(t)&&a.set(t,f),f}function _o(e,t,n,r=!1){const{mixins:i,extends:a}=t;a&&_o(e,a,n,!0),i&&i.forEach(l=>_o(e,l,n,!0));for(const l in t)if(!(r&&l==="expose")){const d=Lf[l]||n&&n[l];e[l]=d?d(e[l],t[l]):t[l]}return e}const Lf={data:kc,props:Cc,emits:Cc,methods:rs,computed:rs,beforeCreate:qt,created:qt,beforeMount:qt,mounted:qt,beforeUpdate:qt,updated:qt,beforeDestroy:qt,beforeUnmount:qt,destroyed:qt,unmounted:qt,activated:qt,deactivated:qt,errorCaptured:qt,serverPrefetch:qt,components:rs,directives:rs,watch:Kf,provide:kc,inject:qf};function kc(e,t){return t?e?function(){return Bt(Ne(e)?e.call(this,this):e,Ne(t)?t.call(this,this):t)}:t:e}function qf(e,t){return rs(zi(e),zi(t))}function zi(e){if(Te(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function qt(e,t){return e?[...new Set([].concat(e,t))]:t}function rs(e,t){return e?Bt(Object.create(null),e,t):t}function Cc(e,t){return e?Te(e)&&Te(t)?[...new Set([...e,...t])]:Bt(Object.create(null),wc(e),wc(t??{})):t}function Kf(e,t){if(!e)return t;if(!t)return e;const n=Bt(Object.create(null),e);for(const r in t)n[r]=qt(e[r],t[r]);return n}function cu(){return{app:null,config:{isNativeTag:vl,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Uf=0;function Vf(e,t){return function(r,i=null){Ne(r)||(r=Bt({},r)),i!=null&&!lt(i)&&(i=null);const a=cu(),l=new WeakSet,d=[];let f=!1;const m=a.app={_uid:Uf++,_component:r,_props:i,_container:null,_context:a,_instance:null,version:kp,get config(){return a.config},set config(h){},use(h,...g){return l.has(h)||(h&&Ne(h.install)?(l.add(h),h.install(m,...g)):Ne(h)&&(l.add(h),h(m,...g))),m},mixin(h){return a.mixins.includes(h)||a.mixins.push(h),m},component(h,g){return g?(a.components[h]=g,m):a.components[h]},directive(h,g){return g?(a.directives[h]=g,m):a.directives[h]},mount(h,g,v){if(!f){const x=m._ceVNode||Ue(r,i);return x.appContext=a,v===!0?v="svg":v===!1&&(v=void 0),e(x,h,v),f=!0,m._container=h,h.__vue_app__=m,Lo(x.component)}},onUnmount(h){d.push(h)},unmount(){f&&(_n(d,m._instance,16),e(null,m._container),delete m._container.__vue_app__)},provide(h,g){return a.provides[h]=g,m},runWithContext(h){const g=hr;hr=m;try{return h()}finally{hr=g}}};return m}}let hr=null;function us(e,t){if(Ft){let n=Ft.provides;const r=Ft.parent&&Ft.parent.provides;r===n&&(n=Ft.provides=Object.create(r)),n[e]=t}}function Xt(e,t,n=!1){const r=Mn();if(r||hr){let i=hr?hr._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return n&&Ne(t)?t.call(r&&r.proxy):t}}function Hf(){return!!(Mn()||hr)}const lu={},uu=()=>Object.create(lu),du=e=>Object.getPrototypeOf(e)===lu;function Wf(e,t,n,r=!1){const i={},a=uu();e.propsDefaults=Object.create(null),fu(e,t,i,a);for(const l in e.propsOptions[0])l in i||(i[l]=void 0);n?e.props=r?i:Kl(i):e.type.props?e.props=i:e.props=a,e.attrs=a}function zf(e,t,n,r){const{props:i,attrs:a,vnode:{patchFlag:l}}=e,d=Je(i),[f]=e.propsOptions;let m=!1;if((r||l>0)&&!(l&16)){if(l&8){const h=e.vnode.dynamicProps;for(let g=0;g<h.length;g++){let v=h[g];if(No(e.emitsOptions,v))continue;const x=t[v];if(f)if(et(a,v))x!==a[v]&&(a[v]=x,m=!0);else{const P=en(v);i[P]=Qi(f,d,P,x,e,!1)}else x!==a[v]&&(a[v]=x,m=!0)}}}else{fu(e,t,i,a)&&(m=!0);let h;for(const g in d)(!t||!et(t,g)&&((h=yr(g))===g||!et(t,h)))&&(f?n&&(n[g]!==void 0||n[h]!==void 0)&&(i[g]=Qi(f,d,g,void 0,e,!0)):delete i[g]);if(a!==d)for(const g in a)(!t||!et(t,g))&&(delete a[g],m=!0)}m&&On(e.attrs,"set","")}function fu(e,t,n,r){const[i,a]=e.propsOptions;let l=!1,d;if(t)for(let f in t){if(ss(f))continue;const m=t[f];let h;i&&et(i,h=en(f))?!a||!a.includes(h)?n[h]=m:(d||(d={}))[h]=m:No(e.emitsOptions,f)||(!(f in r)||m!==r[f])&&(r[f]=m,l=!0)}if(a){const f=Je(n),m=d||at;for(let h=0;h<a.length;h++){const g=a[h];n[g]=Qi(i,f,g,m[g],e,!et(m,g))}}return l}function Qi(e,t,n,r,i,a){const l=e[n];if(l!=null){const d=et(l,"default");if(d&&r===void 0){const f=l.default;if(l.type!==Function&&!l.skipFactory&&Ne(f)){const{propsDefaults:m}=i;if(n in m)r=m[n];else{const h=Es(i);r=m[n]=f.call(null,t),h()}}else r=f;i.ce&&i.ce._setProp(n,r)}l[0]&&(a&&!d?r=!1:l[1]&&(r===""||r===yr(n))&&(r=!0))}return r}const Qf=new WeakMap;function pu(e,t,n=!1){const r=n?Qf:t.propsCache,i=r.get(e);if(i)return i;const a=e.props,l={},d=[];let f=!1;if(!Ne(e)){const h=g=>{f=!0;const[v,x]=pu(g,t,!0);Bt(l,v),x&&d.push(...x)};!n&&t.mixins.length&&t.mixins.forEach(h),e.extends&&h(e.extends),e.mixins&&e.mixins.forEach(h)}if(!a&&!f)return lt(e)&&r.set(e,$r),$r;if(Te(a))for(let h=0;h<a.length;h++){const g=en(a[h]);Ac(g)&&(l[g]=at)}else if(a)for(const h in a){const g=en(h);if(Ac(g)){const v=a[h],x=l[g]=Te(v)||Ne(v)?{type:v}:Bt({},v),P=x.type;let L=!1,Q=!0;if(Te(P))for(let G=0;G<P.length;++G){const ne=P[G],j=Ne(ne)&&ne.name;if(j==="Boolean"){L=!0;break}else j==="String"&&(Q=!1)}else L=Ne(P)&&P.name==="Boolean";x[0]=L,x[1]=Q,(L||et(x,"default"))&&d.push(g)}}const m=[l,d];return lt(e)&&r.set(e,m),m}function Ac(e){return e[0]!=="$"&&!ss(e)}const xa=e=>e==="_"||e==="_ctx"||e==="$stable",ka=e=>Te(e)?e.map(mn):[mn(e)],Yf=(e,t,n)=>{if(t._n)return t;const r=rt((...i)=>ka(t(...i)),n);return r._c=!1,r},hu=(e,t,n)=>{const r=e._ctx;for(const i in e){if(xa(i))continue;const a=e[i];if(Ne(a))t[i]=Yf(i,a,r);else if(a!=null){const l=ka(a);t[i]=()=>l}}},mu=(e,t)=>{const n=ka(t);e.slots.default=()=>n},yu=(e,t,n)=>{for(const r in t)(n||!xa(r))&&(e[r]=t[r])},Gf=(e,t,n)=>{const r=e.slots=uu();if(e.vnode.shapeFlag&32){const i=t._;i?(yu(r,t,n),n&&xl(r,"_",i,!0)):hu(t,r)}else t&&mu(e,t)},Jf=(e,t,n)=>{const{vnode:r,slots:i}=e;let a=!0,l=at;if(r.shapeFlag&32){const d=t._;d?n&&d===1?a=!1:yu(i,t,n):(a=!t.$stable,hu(t,i)),l=t}else t&&(mu(e,t),l={default:1});if(a)for(const d in i)!xa(d)&&l[d]==null&&delete i[d]},Kt=dp;function Xf(e){return Zf(e)}function Zf(e,t){const n=Oo();n.__VUE__=!0;const{insert:r,remove:i,patchProp:a,createElement:l,createText:d,createComment:f,setText:m,setElementText:h,parentNode:g,nextSibling:v,setScopeId:x=vn,insertStaticContent:P}=e,L=(_,A,B,Y=null,ee=null,X=null,fe=void 0,ue=null,ce=!!A.dynamicChildren)=>{if(_===A)return;_&&!es(_,A)&&(Y=J(_),ve(_,ee,X,!0),_=null),A.patchFlag===-2&&(ce=!1,A.dynamicChildren=null);const{type:te,ref:Re,shapeFlag:pe}=A;switch(te){case jo:Q(_,A,B,Y);break;case wn:G(_,A,B,Y);break;case Ii:_==null&&ne(A,B,Y,fe);break;case nt:Xe(_,A,B,Y,ee,X,fe,ue,ce);break;default:pe&1?se(_,A,B,Y,ee,X,fe,ue,ce):pe&6?ze(_,A,B,Y,ee,X,fe,ue,ce):(pe&64||pe&128)&&te.process(_,A,B,Y,ee,X,fe,ue,ce,we)}Re!=null&&ee?cs(Re,_&&_.ref,X,A||_,!A):Re==null&&_&&_.ref!=null&&cs(_.ref,null,X,_,!0)},Q=(_,A,B,Y)=>{if(_==null)r(A.el=d(A.children),B,Y);else{const ee=A.el=_.el;A.children!==_.children&&m(ee,A.children)}},G=(_,A,B,Y)=>{_==null?r(A.el=f(A.children||""),B,Y):A.el=_.el},ne=(_,A,B,Y)=>{[_.el,_.anchor]=P(_.children,A,B,Y,_.el,_.anchor)},j=({el:_,anchor:A},B,Y)=>{let ee;for(;_&&_!==A;)ee=v(_),r(_,B,Y),_=ee;r(A,B,Y)},F=({el:_,anchor:A})=>{let B;for(;_&&_!==A;)B=v(_),i(_),_=B;i(A)},se=(_,A,B,Y,ee,X,fe,ue,ce)=>{A.type==="svg"?fe="svg":A.type==="math"&&(fe="mathml"),_==null?ge(A,B,Y,ee,X,fe,ue,ce):Ee(_,A,ee,X,fe,ue,ce)},ge=(_,A,B,Y,ee,X,fe,ue)=>{let ce,te;const{props:Re,shapeFlag:pe,transition:Pe,dirs:De}=_;if(ce=_.el=l(_.type,X,Re&&Re.is,Re),pe&8?h(ce,_.children):pe&16&&Se(_.children,ce,null,Y,ee,Si(_,X),fe,ue),De&&cr(_,null,Y,"created"),Ce(ce,_,_.scopeId,fe,Y),Re){for(const He in Re)He!=="value"&&!ss(He)&&a(ce,He,null,Re[He],X,Y);"value"in Re&&a(ce,"value",null,Re.value,X),(te=Re.onVnodeBeforeMount)&&pn(te,Y,_)}De&&cr(_,null,Y,"beforeMount");const je=ep(ee,Pe);je&&Pe.beforeEnter(ce),r(ce,A,B),((te=Re&&Re.onVnodeMounted)||je||De)&&Kt(()=>{te&&pn(te,Y,_),je&&Pe.enter(ce),De&&cr(_,null,Y,"mounted")},ee)},Ce=(_,A,B,Y,ee)=>{if(B&&x(_,B),Y)for(let X=0;X<Y.length;X++)x(_,Y[X]);if(ee){let X=ee.subTree;if(A===X||_u(X.type)&&(X.ssContent===A||X.ssFallback===A)){const fe=ee.vnode;Ce(_,fe,fe.scopeId,fe.slotScopeIds,ee.parent)}}},Se=(_,A,B,Y,ee,X,fe,ue,ce=0)=>{for(let te=ce;te<_.length;te++){const Re=_[te]=ue?Qn(_[te]):mn(_[te]);L(null,Re,A,B,Y,ee,X,fe,ue)}},Ee=(_,A,B,Y,ee,X,fe)=>{const ue=A.el=_.el;let{patchFlag:ce,dynamicChildren:te,dirs:Re}=A;ce|=_.patchFlag&16;const pe=_.props||at,Pe=A.props||at;let De;if(B&&lr(B,!1),(De=Pe.onVnodeBeforeUpdate)&&pn(De,B,A,_),Re&&cr(A,_,B,"beforeUpdate"),B&&lr(B,!0),(pe.innerHTML&&Pe.innerHTML==null||pe.textContent&&Pe.textContent==null)&&h(ue,""),te?qe(_.dynamicChildren,te,ue,B,Y,Si(A,ee),X):fe||z(_,A,ue,null,B,Y,Si(A,ee),X,!1),ce>0){if(ce&16)ut(ue,pe,Pe,B,ee);else if(ce&2&&pe.class!==Pe.class&&a(ue,"class",null,Pe.class,ee),ce&4&&a(ue,"style",pe.style,Pe.style,ee),ce&8){const je=A.dynamicProps;for(let He=0;He<je.length;He++){const Qe=je[He],_t=pe[Qe],xt=Pe[Qe];(xt!==_t||Qe==="value")&&a(ue,Qe,_t,xt,ee,B)}}ce&1&&_.children!==A.children&&h(ue,A.children)}else!fe&&te==null&&ut(ue,pe,Pe,B,ee);((De=Pe.onVnodeUpdated)||Re)&&Kt(()=>{De&&pn(De,B,A,_),Re&&cr(A,_,B,"updated")},Y)},qe=(_,A,B,Y,ee,X,fe)=>{for(let ue=0;ue<A.length;ue++){const ce=_[ue],te=A[ue],Re=ce.el&&(ce.type===nt||!es(ce,te)||ce.shapeFlag&198)?g(ce.el):B;L(ce,te,Re,null,Y,ee,X,fe,!0)}},ut=(_,A,B,Y,ee)=>{if(A!==B){if(A!==at)for(const X in A)!ss(X)&&!(X in B)&&a(_,X,A[X],null,ee,Y);for(const X in B){if(ss(X))continue;const fe=B[X],ue=A[X];fe!==ue&&X!=="value"&&a(_,X,ue,fe,ee,Y)}"value"in B&&a(_,"value",A.value,B.value,ee)}},Xe=(_,A,B,Y,ee,X,fe,ue,ce)=>{const te=A.el=_?_.el:d(""),Re=A.anchor=_?_.anchor:d("");let{patchFlag:pe,dynamicChildren:Pe,slotScopeIds:De}=A;De&&(ue=ue?ue.concat(De):De),_==null?(r(te,B,Y),r(Re,B,Y),Se(A.children||[],B,Re,ee,X,fe,ue,ce)):pe>0&&pe&64&&Pe&&_.dynamicChildren?(qe(_.dynamicChildren,Pe,B,ee,X,fe,ue),(A.key!=null||ee&&A===ee.subTree)&&Ca(_,A,!0)):z(_,A,B,Re,ee,X,fe,ue,ce)},ze=(_,A,B,Y,ee,X,fe,ue,ce)=>{A.slotScopeIds=ue,_==null?A.shapeFlag&512?ee.ctx.activate(A,B,Y,fe,ce):wt(A,B,Y,ee,X,fe,ce):it(_,A,ce)},wt=(_,A,B,Y,ee,X,fe)=>{const ue=_.component=yp(_,Y,ee);if(nu(_)&&(ue.ctx.renderer=we),gp(ue,!1,fe),ue.asyncDep){if(ee&&ee.registerDep(ue,Me,fe),!_.el){const ce=ue.subTree=Ue(wn);G(null,ce,A,B),_.placeholder=ce.el}}else Me(ue,_,A,B,ee,X,fe)},it=(_,A,B)=>{const Y=A.component=_.component;if(lp(_,A,B))if(Y.asyncDep&&!Y.asyncResolved){Oe(Y,A,B);return}else Y.next=A,Y.update();else A.el=_.el,Y.vnode=A},Me=(_,A,B,Y,ee,X,fe)=>{const ue=()=>{if(_.isMounted){let{next:pe,bu:Pe,u:De,parent:je,vnode:He}=_;{const kt=gu(_);if(kt){pe&&(pe.el=He.el,Oe(_,pe,fe)),kt.asyncDep.then(()=>{_.isUnmounted||ue()});return}}let Qe=pe,_t;lr(_,!1),pe?(pe.el=He.el,Oe(_,pe,fe)):pe=He,Pe&&co(Pe),(_t=pe.props&&pe.props.onVnodeBeforeUpdate)&&pn(_t,je,pe,He),lr(_,!0);const xt=Sc(_),jt=_.subTree;_.subTree=xt,L(jt,xt,g(jt.el),J(jt),_,ee,X),pe.el=xt.el,Qe===null&&up(_,xt.el),De&&Kt(De,ee),(_t=pe.props&&pe.props.onVnodeUpdated)&&Kt(()=>pn(_t,je,pe,He),ee)}else{let pe;const{el:Pe,props:De}=A,{bm:je,m:He,parent:Qe,root:_t,type:xt}=_,jt=Fr(A);lr(_,!1),je&&co(je),!jt&&(pe=De&&De.onVnodeBeforeMount)&&pn(pe,Qe,A),lr(_,!0);{_t.ce&&_t.ce._def.shadowRoot!==!1&&_t.ce._injectChildStyle(xt);const kt=_.subTree=Sc(_);L(null,kt,B,Y,_,ee,X),A.el=kt.el}if(He&&Kt(He,ee),!jt&&(pe=De&&De.onVnodeMounted)){const kt=A;Kt(()=>pn(pe,Qe,kt),ee)}(A.shapeFlag&256||Qe&&Fr(Qe.vnode)&&Qe.vnode.shapeFlag&256)&&_.a&&Kt(_.a,ee),_.isMounted=!0,A=B=Y=null}};_.scope.on();const ce=_.effect=new Il(ue);_.scope.off();const te=_.update=ce.run.bind(ce),Re=_.job=ce.runIfDirty.bind(ce);Re.i=_,Re.id=_.uid,ce.scheduler=()=>_a(Re),lr(_,!0),te()},Oe=(_,A,B)=>{A.component=_;const Y=_.vnode.props;_.vnode=A,_.next=null,zf(_,A.props,Y,B),Jf(_,A.children,B),Dn(),yc(_),$n()},z=(_,A,B,Y,ee,X,fe,ue,ce=!1)=>{const te=_&&_.children,Re=_?_.shapeFlag:0,pe=A.children,{patchFlag:Pe,shapeFlag:De}=A;if(Pe>0){if(Pe&128){N(te,pe,B,Y,ee,X,fe,ue,ce);return}else if(Pe&256){V(te,pe,B,Y,ee,X,fe,ue,ce);return}}De&8?(Re&16&&pt(te,ee,X),pe!==te&&h(B,pe)):Re&16?De&16?N(te,pe,B,Y,ee,X,fe,ue,ce):pt(te,ee,X,!0):(Re&8&&h(B,""),De&16&&Se(pe,B,Y,ee,X,fe,ue,ce))},V=(_,A,B,Y,ee,X,fe,ue,ce)=>{_=_||$r,A=A||$r;const te=_.length,Re=A.length,pe=Math.min(te,Re);let Pe;for(Pe=0;Pe<pe;Pe++){const De=A[Pe]=ce?Qn(A[Pe]):mn(A[Pe]);L(_[Pe],De,B,null,ee,X,fe,ue,ce)}te>Re?pt(_,ee,X,!0,!1,pe):Se(A,B,Y,ee,X,fe,ue,ce,pe)},N=(_,A,B,Y,ee,X,fe,ue,ce)=>{let te=0;const Re=A.length;let pe=_.length-1,Pe=Re-1;for(;te<=pe&&te<=Pe;){const De=_[te],je=A[te]=ce?Qn(A[te]):mn(A[te]);if(es(De,je))L(De,je,B,null,ee,X,fe,ue,ce);else break;te++}for(;te<=pe&&te<=Pe;){const De=_[pe],je=A[Pe]=ce?Qn(A[Pe]):mn(A[Pe]);if(es(De,je))L(De,je,B,null,ee,X,fe,ue,ce);else break;pe--,Pe--}if(te>pe){if(te<=Pe){const De=Pe+1,je=De<Re?A[De].el:Y;for(;te<=Pe;)L(null,A[te]=ce?Qn(A[te]):mn(A[te]),B,je,ee,X,fe,ue,ce),te++}}else if(te>Pe)for(;te<=pe;)ve(_[te],ee,X,!0),te++;else{const De=te,je=te,He=new Map;for(te=je;te<=Pe;te++){const ht=A[te]=ce?Qn(A[te]):mn(A[te]);ht.key!=null&&He.set(ht.key,te)}let Qe,_t=0;const xt=Pe-je+1;let jt=!1,kt=0;const ln=new Array(xt);for(te=0;te<xt;te++)ln[te]=0;for(te=De;te<=pe;te++){const ht=_[te];if(_t>=xt){ve(ht,ee,X,!0);continue}let _e;if(ht.key!=null)_e=He.get(ht.key);else for(Qe=je;Qe<=Pe;Qe++)if(ln[Qe-je]===0&&es(ht,A[Qe])){_e=Qe;break}_e===void 0?ve(ht,ee,X,!0):(ln[_e-je]=te+1,_e>=kt?kt=_e:jt=!0,L(ht,A[_e],B,null,ee,X,fe,ue,ce),_t++)}const br=jt?tp(ln):$r;for(Qe=br.length-1,te=xt-1;te>=0;te--){const ht=je+te,_e=A[ht],Bn=A[ht+1],un=ht+1<Re?Bn.el||Bn.placeholder:Y;ln[te]===0?L(null,_e,B,un,ee,X,fe,ue,ce):jt&&(Qe<0||te!==br[Qe]?Ie(_e,B,un,2):Qe--)}}},Ie=(_,A,B,Y,ee=null)=>{const{el:X,type:fe,transition:ue,children:ce,shapeFlag:te}=_;if(te&6){Ie(_.component.subTree,A,B,Y);return}if(te&128){_.suspense.move(A,B,Y);return}if(te&64){fe.move(_,A,B,we);return}if(fe===nt){r(X,A,B);for(let pe=0;pe<ce.length;pe++)Ie(ce[pe],A,B,Y);r(_.anchor,A,B);return}if(fe===Ii){j(_,A,B);return}if(Y!==2&&te&1&&ue)if(Y===0)ue.beforeEnter(X),r(X,A,B),Kt(()=>ue.enter(X),ee);else{const{leave:pe,delayLeave:Pe,afterLeave:De}=ue,je=()=>{_.ctx.isUnmounted?i(X):r(X,A,B)},He=()=>{X._isLeaving&&X[xf](!0),pe(X,()=>{je(),De&&De()})};Pe?Pe(X,je,He):He()}else r(X,A,B)},ve=(_,A,B,Y=!1,ee=!1)=>{const{type:X,props:fe,ref:ue,children:ce,dynamicChildren:te,shapeFlag:Re,patchFlag:pe,dirs:Pe,cacheIndex:De}=_;if(pe===-2&&(ee=!1),ue!=null&&(Dn(),cs(ue,null,B,_,!0),$n()),De!=null&&(A.renderCache[De]=void 0),Re&256){A.ctx.deactivate(_);return}const je=Re&1&&Pe,He=!Fr(_);let Qe;if(He&&(Qe=fe&&fe.onVnodeBeforeUnmount)&&pn(Qe,A,_),Re&6)Nt(_.component,B,Y);else{if(Re&128){_.suspense.unmount(B,Y);return}je&&cr(_,null,A,"beforeUnmount"),Re&64?_.type.remove(_,A,B,we,Y):te&&!te.hasOnce&&(X!==nt||pe>0&&pe&64)?pt(te,A,B,!1,!0):(X===nt&&pe&384||!ee&&Re&16)&&pt(ce,A,B),Y&&Ve(_)}(He&&(Qe=fe&&fe.onVnodeUnmounted)||je)&&Kt(()=>{Qe&&pn(Qe,A,_),je&&cr(_,null,A,"unmounted")},B)},Ve=_=>{const{type:A,el:B,anchor:Y,transition:ee}=_;if(A===nt){Ht(B,Y);return}if(A===Ii){F(_);return}const X=()=>{i(B),ee&&!ee.persisted&&ee.afterLeave&&ee.afterLeave()};if(_.shapeFlag&1&&ee&&!ee.persisted){const{leave:fe,delayLeave:ue}=ee,ce=()=>fe(B,X);ue?ue(_.el,X,ce):ce()}else X()},Ht=(_,A)=>{let B;for(;_!==A;)B=v(_),i(_),_=B;i(A)},Nt=(_,A,B)=>{const{bum:Y,scope:ee,job:X,subTree:fe,um:ue,m:ce,a:te}=_;Ec(ce),Ec(te),Y&&co(Y),ee.stop(),X&&(X.flags|=8,ve(fe,_,A,B)),ue&&Kt(ue,A),Kt(()=>{_.isUnmounted=!0},A)},pt=(_,A,B,Y=!1,ee=!1,X=0)=>{for(let fe=X;fe<_.length;fe++)ve(_[fe],A,B,Y,ee)},J=_=>{if(_.shapeFlag&6)return J(_.component.subTree);if(_.shapeFlag&128)return _.suspense.next();const A=v(_.anchor||_.el),B=A&&A[Xl];return B?v(B):A};let be=!1;const H=(_,A,B)=>{_==null?A._vnode&&ve(A._vnode,null,null,!0):L(A._vnode||null,_,A,null,null,null,B),A._vnode=_,be||(be=!0,yc(),Yl(),be=!1)},we={p:L,um:ve,m:Ie,r:Ve,mt:wt,mc:Se,pc:z,pbc:qe,n:J,o:e};return{render:H,hydrate:void 0,createApp:Vf(H)}}function Si({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function lr({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function ep(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Ca(e,t,n=!1){const r=e.children,i=t.children;if(Te(r)&&Te(i))for(let a=0;a<r.length;a++){const l=r[a];let d=i[a];d.shapeFlag&1&&!d.dynamicChildren&&((d.patchFlag<=0||d.patchFlag===32)&&(d=i[a]=Qn(i[a]),d.el=l.el),!n&&d.patchFlag!==-2&&Ca(l,d)),d.type===jo&&d.patchFlag!==-1&&(d.el=l.el),d.type===wn&&!d.el&&(d.el=l.el)}}function tp(e){const t=e.slice(),n=[0];let r,i,a,l,d;const f=e.length;for(r=0;r<f;r++){const m=e[r];if(m!==0){if(i=n[n.length-1],e[i]<m){t[r]=i,n.push(r);continue}for(a=0,l=n.length-1;a<l;)d=a+l>>1,e[n[d]]<m?a=d+1:l=d;m<e[n[a]]&&(a>0&&(t[r]=n[a-1]),n[a]=r)}}for(a=n.length,l=n[a-1];a-- >0;)n[a]=l,l=t[l];return n}function gu(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:gu(t)}function Ec(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const np=Symbol.for("v-scx"),rp=()=>Xt(np);function Lr(e,t){return Aa(e,null,t)}function Zt(e,t,n){return Aa(e,t,n)}function Aa(e,t,n=at){const{immediate:r,deep:i,flush:a,once:l}=n,d=Bt({},n),f=t&&r||!t&&a!=="post";let m;if(ws){if(a==="sync"){const x=rp();m=x.__watcherHandles||(x.__watcherHandles=[])}else if(!f){const x=()=>{};return x.stop=vn,x.resume=vn,x.pause=vn,x}}const h=Ft;d.call=(x,P,L)=>_n(x,h,P,L);let g=!1;a==="post"?d.scheduler=x=>{Kt(x,h&&h.suspense)}:a!=="sync"&&(g=!0,d.scheduler=(x,P)=>{P?x():_a(x)}),d.augmentJob=x=>{t&&(x.flags|=4),g&&(x.flags|=2,h&&(x.id=h.uid,x.i=h))};const v=mf(e,t,d);return ws&&(m?m.push(v):f&&v()),v}function sp(e,t,n){const r=this.proxy,i=yt(e)?e.includes(".")?vu(r,e):()=>r[e]:e.bind(r,r);let a;Ne(t)?a=t:(a=t.handler,n=t);const l=Es(this),d=Aa(i,a.bind(r),n);return l(),d}function vu(e,t){const n=t.split(".");return()=>{let r=e;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}const op=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${en(t)}Modifiers`]||e[`${yr(t)}Modifiers`];function ip(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||at;let i=n;const a=t.startsWith("update:"),l=a&&op(r,t.slice(7));l&&(l.trim&&(i=n.map(h=>yt(h)?h.trim():h)),l.number&&(i=n.map(ho)));let d,f=r[d=ao(t)]||r[d=ao(en(t))];!f&&a&&(f=r[d=ao(yr(t))]),f&&_n(f,e,6,i);const m=r[d+"Once"];if(m){if(!e.emitted)e.emitted={};else if(e.emitted[d])return;e.emitted[d]=!0,_n(m,e,6,i)}}function bu(e,t,n=!1){const r=t.emitsCache,i=r.get(e);if(i!==void 0)return i;const a=e.emits;let l={},d=!1;if(!Ne(e)){const f=m=>{const h=bu(m,t,!0);h&&(d=!0,Bt(l,h))};!n&&t.mixins.length&&t.mixins.forEach(f),e.extends&&f(e.extends),e.mixins&&e.mixins.forEach(f)}return!a&&!d?(lt(e)&&r.set(e,null),null):(Te(a)?a.forEach(f=>l[f]=null):Bt(l,a),lt(e)&&r.set(e,l),l)}function No(e,t){return!e||!Eo(t)?!1:(t=t.slice(2).replace(/Once$/,""),et(e,t[0].toLowerCase()+t.slice(1))||et(e,yr(t))||et(e,t))}function Sc(e){const{type:t,vnode:n,proxy:r,withProxy:i,propsOptions:[a],slots:l,attrs:d,emit:f,render:m,renderCache:h,props:g,data:v,setupState:x,ctx:P,inheritAttrs:L}=e,Q=bo(e);let G,ne;try{if(n.shapeFlag&4){const F=i||r,se=F;G=mn(m.call(se,F,h,g,x,v,P)),ne=d}else{const F=t;G=mn(F.length>1?F(g,{attrs:d,slots:l,emit:f}):F(g,null)),ne=t.props?d:ap(d)}}catch(F){ds.length=0,To(F,e,1),G=Ue(wn)}let j=G;if(ne&&L!==!1){const F=Object.keys(ne),{shapeFlag:se}=j;F.length&&se&7&&(a&&F.some(aa)&&(ne=cp(ne,a)),j=mr(j,ne,!1,!0))}return n.dirs&&(j=mr(j,null,!1,!0),j.dirs=j.dirs?j.dirs.concat(n.dirs):n.dirs),n.transition&&wa(j,n.transition),G=j,bo(Q),G}const ap=e=>{let t;for(const n in e)(n==="class"||n==="style"||Eo(n))&&((t||(t={}))[n]=e[n]);return t},cp=(e,t)=>{const n={};for(const r in e)(!aa(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function lp(e,t,n){const{props:r,children:i,component:a}=e,{props:l,children:d,patchFlag:f}=t,m=a.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&f>=0){if(f&1024)return!0;if(f&16)return r?Ic(r,l,m):!!l;if(f&8){const h=t.dynamicProps;for(let g=0;g<h.length;g++){const v=h[g];if(l[v]!==r[v]&&!No(m,v))return!0}}}else return(i||d)&&(!d||!d.$stable)?!0:r===l?!1:r?l?Ic(r,l,m):!0:!!l;return!1}function Ic(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let i=0;i<r.length;i++){const a=r[i];if(t[a]!==e[a]&&!No(n,a))return!0}return!1}function up({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const _u=e=>e.__isSuspense;function dp(e,t){t&&t.pendingBranch?Te(e)?t.effects.push(...e):t.effects.push(e):vf(e)}const nt=Symbol.for("v-fgt"),jo=Symbol.for("v-txt"),wn=Symbol.for("v-cmt"),Ii=Symbol.for("v-stc"),ds=[];let Jt=null;function K(e=!1){ds.push(Jt=e?null:[])}function fp(){ds.pop(),Jt=ds[ds.length-1]||null}let bs=1;function Pc(e,t=!1){bs+=e,e<0&&Jt&&t&&(Jt.hasOnce=!0)}function wu(e){return e.dynamicChildren=bs>0?Jt||$r:null,fp(),bs>0&&Jt&&Jt.push(e),e}function Z(e,t,n,r,i,a){return wu(w(e,t,n,r,i,a,!0))}function St(e,t,n,r,i){return wu(Ue(e,t,n,r,i,!0))}function _s(e){return e?e.__v_isVNode===!0:!1}function es(e,t){return e.type===t.type&&e.key===t.key}const xu=({key:e})=>e??null,uo=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?yt(e)||bt(e)||Ne(e)?{i:Ot,r:e,k:t,f:!!n}:e:null);function w(e,t=null,n=null,r=0,i=null,a=e===nt?0:1,l=!1,d=!1){const f={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&xu(t),ref:t&&uo(t),scopeId:Jl,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:Ot};return d?(Ea(f,n),a&128&&e.normalize(f)):n&&(f.shapeFlag|=yt(n)?8:16),bs>0&&!l&&Jt&&(f.patchFlag>0||a&6)&&f.patchFlag!==32&&Jt.push(f),f}const Ue=pp;function pp(e,t=null,n=null,r=0,i=null,a=!1){if((!e||e===Mf)&&(e=wn),_s(e)){const d=mr(e,t,!0);return n&&Ea(d,n),bs>0&&!a&&Jt&&(d.shapeFlag&6?Jt[Jt.indexOf(e)]=d:Jt.push(d)),d.patchFlag=-2,d}if(xp(e)&&(e=e.__vccOpts),t){t=ku(t);let{class:d,style:f}=t;d&&!yt(d)&&(t.class=Et(d)),lt(f)&&(ga(f)&&!Te(f)&&(f=Bt({},f)),t.style=Ur(f))}const l=yt(e)?1:_u(e)?128:bf(e)?64:lt(e)?4:Ne(e)?2:0;return w(e,t,n,r,i,l,a,!0)}function ku(e){return e?ga(e)||du(e)?Bt({},e):e:null}function mr(e,t,n=!1,r=!1){const{props:i,ref:a,patchFlag:l,children:d,transition:f}=e,m=t?xn(i||{},t):i,h={__v_isVNode:!0,__v_skip:!0,type:e.type,props:m,key:m&&xu(m),ref:t&&t.ref?n&&a?Te(a)?a.concat(uo(t)):[a,uo(t)]:uo(t):a,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:d,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==nt?l===-1?16:l|16:l,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:f,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&mr(e.ssContent),ssFallback:e.ssFallback&&mr(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return f&&r&&wa(h,f.clone(h)),h}function zt(e=" ",t=0){return Ue(jo,null,e,t)}function $e(e="",t=!1){return t?(K(),St(wn,null,e)):Ue(wn,null,e)}function mn(e){return e==null||typeof e=="boolean"?Ue(wn):Te(e)?Ue(nt,null,e.slice()):_s(e)?Qn(e):Ue(jo,null,String(e))}function Qn(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:mr(e)}function Ea(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(Te(t))n=16;else if(typeof t=="object")if(r&65){const i=t.default;i&&(i._c&&(i._d=!1),Ea(e,i()),i._c&&(i._d=!0));return}else{n=32;const i=t._;!i&&!du(t)?t._ctx=Ot:i===3&&Ot&&(Ot.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Ne(t)?(t={default:t,_ctx:Ot},n=32):(t=String(t),r&64?(n=16,t=[zt(t)]):n=8);e.children=t,e.shapeFlag|=n}function xn(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const i in r)if(i==="class")t.class!==r.class&&(t.class=Et([t.class,r.class]));else if(i==="style")t.style=Ur([t.style,r.style]);else if(Eo(i)){const a=t[i],l=r[i];l&&a!==l&&!(Te(a)&&a.includes(l))&&(t[i]=a?[].concat(a,l):l)}else i!==""&&(t[i]=r[i])}return t}function pn(e,t,n,r=null){_n(e,t,7,[n,r])}const hp=cu();let mp=0;function yp(e,t,n){const r=e.type,i=(t?t.appContext:e.appContext)||hp,a={uid:mp++,vnode:e,type:r,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new El(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:pu(r,i),emitsOptions:bu(r,i),emit:null,emitted:null,propsDefaults:at,inheritAttrs:r.inheritAttrs,ctx:at,data:at,props:at,attrs:at,slots:at,refs:at,setupState:at,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=ip.bind(null,a),e.ce&&e.ce(a),a}let Ft=null;const Mn=()=>Ft||Ot;let wo,Yi;{const e=Oo(),t=(n,r)=>{let i;return(i=e[n])||(i=e[n]=[]),i.push(r),a=>{i.length>1?i.forEach(l=>l(a)):i[0](a)}};wo=t("__VUE_INSTANCE_SETTERS__",n=>Ft=n),Yi=t("__VUE_SSR_SETTERS__",n=>ws=n)}const Es=e=>{const t=Ft;return wo(e),e.scope.on(),()=>{e.scope.off(),wo(t)}},Oc=()=>{Ft&&Ft.scope.off(),wo(null)};function Cu(e){return e.vnode.shapeFlag&4}let ws=!1;function gp(e,t=!1,n=!1){t&&Yi(t);const{props:r,children:i}=e.vnode,a=Cu(e);Wf(e,r,a,t),Gf(e,i,n||t);const l=a?vp(e,t):void 0;return t&&Yi(!1),l}function vp(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Bf);const{setup:r}=n;if(r){Dn();const i=e.setupContext=r.length>1?_p(e):null,a=Es(e),l=As(r,e,0,[e.props,i]),d=bl(l);if($n(),a(),(d||e.sp)&&!Fr(e)&&tu(e),d){if(l.then(Oc,Oc),t)return l.then(f=>{Rc(e,f)}).catch(f=>{To(f,e,0)});e.asyncDep=l}else Rc(e,l)}else Au(e)}function Rc(e,t,n){Ne(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:lt(t)&&(e.setupState=Wl(t)),Au(e)}function Au(e,t,n){const r=e.type;e.render||(e.render=r.render||vn);{const i=Es(e);Dn();try{Nf(e)}finally{$n(),i()}}}const bp={get(e,t){return Mt(e,"get",""),e[t]}};function _p(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,bp),slots:e.slots,emit:e.emit,expose:t}}function Lo(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Wl(va(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in ls)return ls[n](e)},has(t,n){return n in t||n in ls}})):e.proxy}function wp(e,t=!0){return Ne(e)?e.displayName||e.name:e.name||t&&e.__name}function xp(e){return Ne(e)&&"__vccOpts"in e}const st=(e,t)=>pf(e,t,ws);function Br(e,t,n){const r=arguments.length;return r===2?lt(t)&&!Te(t)?_s(t)?Ue(e,null,[t]):Ue(e,t):Ue(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&_s(n)&&(n=[n]),Ue(e,t,n))}const kp="3.5.20";/**
* @vue/runtime-dom v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Gi;const Dc=typeof window<"u"&&window.trustedTypes;if(Dc)try{Gi=Dc.createPolicy("vue",{createHTML:e=>e})}catch{}const Eu=Gi?e=>Gi.createHTML(e):e=>e,Cp="http://www.w3.org/2000/svg",Ap="http://www.w3.org/1998/Math/MathML",Pn=typeof document<"u"?document:null,$c=Pn&&Pn.createElement("template"),Ep={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const i=t==="svg"?Pn.createElementNS(Cp,e):t==="mathml"?Pn.createElementNS(Ap,e):n?Pn.createElement(e,{is:n}):Pn.createElement(e);return e==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:e=>Pn.createTextNode(e),createComment:e=>Pn.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Pn.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,i,a){const l=n?n.previousSibling:t.lastChild;if(i&&(i===a||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),!(i===a||!(i=i.nextSibling)););else{$c.innerHTML=Eu(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const d=$c.content;if(r==="svg"||r==="mathml"){const f=d.firstChild;for(;f.firstChild;)d.appendChild(f.firstChild);d.removeChild(f)}t.insertBefore(d,n)}return[l?l.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},Sp=Symbol("_vtc");function Ip(e,t,n){const r=e[Sp];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const xo=Symbol("_vod"),Su=Symbol("_vsh"),Pp={name:"show",beforeMount(e,{value:t},{transition:n}){e[xo]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):ts(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:r}){!t!=!n&&(r?t?(r.beforeEnter(e),ts(e,!0),r.enter(e)):r.leave(e,()=>{ts(e,!1)}):ts(e,t))},beforeUnmount(e,{value:t}){ts(e,t)}};function ts(e,t){e.style.display=t?e[xo]:"none",e[Su]=!t}const Op=Symbol(""),Rp=/(^|;)\s*display\s*:/;function Dp(e,t,n){const r=e.style,i=yt(n);let a=!1;if(n&&!i){if(t)if(yt(t))for(const l of t.split(";")){const d=l.slice(0,l.indexOf(":")).trim();n[d]==null&&fo(r,d,"")}else for(const l in t)n[l]==null&&fo(r,l,"");for(const l in n)l==="display"&&(a=!0),fo(r,l,n[l])}else if(i){if(t!==n){const l=r[Op];l&&(n+=";"+l),r.cssText=n,a=Rp.test(n)}}else t&&e.removeAttribute("style");xo in e&&(e[xo]=a?r.display:"",e[Su]&&(r.display="none"))}const Tc=/\s*!important$/;function fo(e,t,n){if(Te(n))n.forEach(r=>fo(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=$p(e,t);Tc.test(n)?e.setProperty(yr(r),n.replace(Tc,""),"important"):e[r]=n}}const Mc=["Webkit","Moz","ms"],Pi={};function $p(e,t){const n=Pi[t];if(n)return n;let r=en(t);if(r!=="filter"&&r in e)return Pi[t]=r;r=Po(r);for(let i=0;i<Mc.length;i++){const a=Mc[i]+r;if(a in e)return Pi[t]=a}return t}const Fc="http://www.w3.org/1999/xlink";function Bc(e,t,n,r,i,a=jd(t)){r&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(Fc,t.slice(6,t.length)):e.setAttributeNS(Fc,t,n):n==null||a&&!kl(n)?e.removeAttribute(t):e.setAttribute(t,a?"":on(n)?String(n):n)}function Nc(e,t,n,r,i){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Eu(n):n);return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){const d=a==="OPTION"?e.getAttribute("value")||"":e.value,f=n==null?e.type==="checkbox"?"on":"":String(n);(d!==f||!("_value"in e))&&(e.value=f),n==null&&e.removeAttribute(t),e._value=n;return}let l=!1;if(n===""||n==null){const d=typeof e[t];d==="boolean"?n=kl(n):n==null&&d==="string"?(n="",l=!0):d==="number"&&(n=0,l=!0)}try{e[t]=n}catch{}l&&e.removeAttribute(i||t)}function dr(e,t,n,r){e.addEventListener(t,n,r)}function Tp(e,t,n,r){e.removeEventListener(t,n,r)}const jc=Symbol("_vei");function Mp(e,t,n,r,i=null){const a=e[jc]||(e[jc]={}),l=a[t];if(r&&l)l.value=r;else{const[d,f]=Fp(t);if(r){const m=a[t]=jp(r,i);dr(e,d,m,f)}else l&&(Tp(e,d,l,f),a[t]=void 0)}}const Lc=/(?:Once|Passive|Capture)$/;function Fp(e){let t;if(Lc.test(e)){t={};let r;for(;r=e.match(Lc);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):yr(e.slice(2)),t]}let Oi=0;const Bp=Promise.resolve(),Np=()=>Oi||(Bp.then(()=>Oi=0),Oi=Date.now());function jp(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;_n(Lp(r,n.value),t,5,[r])};return n.value=e,n.attached=Np(),n}function Lp(e,t){if(Te(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>i=>!i._stopped&&r&&r(i))}else return t}const qc=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,qp=(e,t,n,r,i,a)=>{const l=i==="svg";t==="class"?Ip(e,r,l):t==="style"?Dp(e,n,r):Eo(t)?aa(t)||Mp(e,t,n,r,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Kp(e,t,r,l))?(Nc(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Bc(e,t,r,l,a,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!yt(r))?Nc(e,en(t),r,a,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),Bc(e,t,r,l))};function Kp(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&qc(t)&&Ne(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return qc(t)&&yt(n)?!1:t in e}const ko=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Te(t)?n=>co(t,n):t};function Up(e){e.target.composing=!0}function Kc(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Nr=Symbol("_assign"),Ji={created(e,{modifiers:{lazy:t,trim:n,number:r}},i){e[Nr]=ko(i);const a=r||i.props&&i.props.type==="number";dr(e,t?"change":"input",l=>{if(l.target.composing)return;let d=e.value;n&&(d=d.trim()),a&&(d=ho(d)),e[Nr](d)}),n&&dr(e,"change",()=>{e.value=e.value.trim()}),t||(dr(e,"compositionstart",Up),dr(e,"compositionend",Kc),dr(e,"change",Kc))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:r,trim:i,number:a}},l){if(e[Nr]=ko(l),e.composing)return;const d=(a||e.type==="number")&&!/^0\d/.test(e.value)?ho(e.value):e.value,f=t??"";d!==f&&(document.activeElement===e&&e.type!=="range"&&(r&&t===n||i&&e.value.trim()===f)||(e.value=f))}},Vp={deep:!0,created(e,{value:t,modifiers:{number:n}},r){const i=So(t);dr(e,"change",()=>{const a=Array.prototype.filter.call(e.options,l=>l.selected).map(l=>n?ho(Co(l)):Co(l));e[Nr](e.multiple?i?new Set(a):a:a[0]),e._assigning=!0,an(()=>{e._assigning=!1})}),e[Nr]=ko(r)},mounted(e,{value:t}){Uc(e,t)},beforeUpdate(e,t,n){e[Nr]=ko(n)},updated(e,{value:t}){e._assigning||Uc(e,t)}};function Uc(e,t){const n=e.multiple,r=Te(t);if(!(n&&!r&&!So(t))){for(let i=0,a=e.options.length;i<a;i++){const l=e.options[i],d=Co(l);if(n)if(r){const f=typeof d;f==="string"||f==="number"?l.selected=t.some(m=>String(m)===String(d)):l.selected=qd(t,d)>-1}else l.selected=t.has(d);else if(Ro(Co(l),t)){e.selectedIndex!==i&&(e.selectedIndex=i);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Co(e){return"_value"in e?e._value:e.value}const Hp=Bt({patchProp:qp},Ep);let Vc;function Wp(){return Vc||(Vc=Xf(Hp))}const zp=((...e)=>{const t=Wp().createApp(...e),{mount:n}=t;return t.mount=r=>{const i=Yp(r);if(!i)return;const a=t._component;!Ne(a)&&!a.render&&!a.template&&(a.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const l=n(i,!1,Qp(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),l},t});function Qp(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Yp(e){return yt(e)?document.querySelector(e):e}/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const Dr=typeof document<"u";function Iu(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Gp(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&Iu(e.default)}const Ze=Object.assign;function Ri(e,t){const n={};for(const r in t){const i=t[r];n[r]=cn(i)?i.map(e):e(i)}return n}const fs=()=>{},cn=Array.isArray,Pu=/#/g,Jp=/&/g,Xp=/\//g,Zp=/=/g,eh=/\?/g,Ou=/\+/g,th=/%5B/g,nh=/%5D/g,Ru=/%5E/g,rh=/%60/g,Du=/%7B/g,sh=/%7C/g,$u=/%7D/g,oh=/%20/g;function Sa(e){return encodeURI(""+e).replace(sh,"|").replace(th,"[").replace(nh,"]")}function ih(e){return Sa(e).replace(Du,"{").replace($u,"}").replace(Ru,"^")}function Xi(e){return Sa(e).replace(Ou,"%2B").replace(oh,"+").replace(Pu,"%23").replace(Jp,"%26").replace(rh,"`").replace(Du,"{").replace($u,"}").replace(Ru,"^")}function ah(e){return Xi(e).replace(Zp,"%3D")}function ch(e){return Sa(e).replace(Pu,"%23").replace(eh,"%3F")}function lh(e){return e==null?"":ch(e).replace(Xp,"%2F")}function xs(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const uh=/\/$/,dh=e=>e.replace(uh,"");function Di(e,t,n="/"){let r,i={},a="",l="";const d=t.indexOf("#");let f=t.indexOf("?");return d<f&&d>=0&&(f=-1),f>-1&&(r=t.slice(0,f),a=t.slice(f+1,d>-1?d:t.length),i=e(a)),d>-1&&(r=r||t.slice(0,d),l=t.slice(d,t.length)),r=mh(r??t,n),{fullPath:r+(a&&"?")+a+l,path:r,query:i,hash:xs(l)}}function fh(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function Hc(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function ph(e,t,n){const r=t.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&qr(t.matched[r],n.matched[i])&&Tu(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function qr(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Tu(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!hh(e[n],t[n]))return!1;return!0}function hh(e,t){return cn(e)?Wc(e,t):cn(t)?Wc(t,e):e===t}function Wc(e,t){return cn(t)?e.length===t.length&&e.every((n,r)=>n===t[r]):e.length===1&&e[0]===t}function mh(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let a=n.length-1,l,d;for(l=0;l<r.length;l++)if(d=r[l],d!==".")if(d==="..")a>1&&a--;else break;return n.slice(0,a).join("/")+"/"+r.slice(l).join("/")}const Vn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var ks;(function(e){e.pop="pop",e.push="push"})(ks||(ks={}));var ps;(function(e){e.back="back",e.forward="forward",e.unknown=""})(ps||(ps={}));function yh(e){if(!e)if(Dr){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),dh(e)}const gh=/^[^#]+#/;function vh(e,t){return e.replace(gh,"#")+t}function bh(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const qo=()=>({left:window.scrollX,top:window.scrollY});function _h(e){let t;if("el"in e){const n=e.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;t=bh(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function zc(e,t){return(history.state?history.state.position-t:-1)+e}const Zi=new Map;function wh(e,t){Zi.set(e,t)}function xh(e){const t=Zi.get(e);return Zi.delete(e),t}let kh=()=>location.protocol+"//"+location.host;function Mu(e,t){const{pathname:n,search:r,hash:i}=t,a=e.indexOf("#");if(a>-1){let d=i.includes(e.slice(a))?e.slice(a).length:1,f=i.slice(d);return f[0]!=="/"&&(f="/"+f),Hc(f,"")}return Hc(n,e)+r+i}function Ch(e,t,n,r){let i=[],a=[],l=null;const d=({state:v})=>{const x=Mu(e,location),P=n.value,L=t.value;let Q=0;if(v){if(n.value=x,t.value=v,l&&l===P){l=null;return}Q=L?v.position-L.position:0}else r(x);i.forEach(G=>{G(n.value,P,{delta:Q,type:ks.pop,direction:Q?Q>0?ps.forward:ps.back:ps.unknown})})};function f(){l=n.value}function m(v){i.push(v);const x=()=>{const P=i.indexOf(v);P>-1&&i.splice(P,1)};return a.push(x),x}function h(){const{history:v}=window;v.state&&v.replaceState(Ze({},v.state,{scroll:qo()}),"")}function g(){for(const v of a)v();a=[],window.removeEventListener("popstate",d),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",d),window.addEventListener("beforeunload",h,{passive:!0}),{pauseListeners:f,listen:m,destroy:g}}function Qc(e,t,n,r=!1,i=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:i?qo():null}}function Ah(e){const{history:t,location:n}=window,r={value:Mu(e,n)},i={value:t.state};i.value||a(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function a(f,m,h){const g=e.indexOf("#"),v=g>-1?(n.host&&document.querySelector("base")?e:e.slice(g))+f:kh()+e+f;try{t[h?"replaceState":"pushState"](m,"",v),i.value=m}catch(x){console.error(x),n[h?"replace":"assign"](v)}}function l(f,m){const h=Ze({},t.state,Qc(i.value.back,f,i.value.forward,!0),m,{position:i.value.position});a(f,h,!0),r.value=f}function d(f,m){const h=Ze({},i.value,t.state,{forward:f,scroll:qo()});a(h.current,h,!0);const g=Ze({},Qc(r.value,f,null),{position:h.position+1},m);a(f,g,!1),r.value=f}return{location:r,state:i,push:d,replace:l}}function Eh(e){e=yh(e);const t=Ah(e),n=Ch(e,t.state,t.location,t.replace);function r(a,l=!0){l||n.pauseListeners(),history.go(a)}const i=Ze({location:"",base:e,go:r,createHref:vh.bind(null,e)},t,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function Sh(e){return typeof e=="string"||e&&typeof e=="object"}function Fu(e){return typeof e=="string"||typeof e=="symbol"}const Bu=Symbol("");var Yc;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(Yc||(Yc={}));function Kr(e,t){return Ze(new Error,{type:e,[Bu]:!0},t)}function Sn(e,t){return e instanceof Error&&Bu in e&&(t==null||!!(e.type&t))}const Gc="[^/]+?",Ih={sensitive:!1,strict:!1,start:!0,end:!0},Ph=/[.+*?^${}()[\]/\\]/g;function Oh(e,t){const n=Ze({},Ih,t),r=[];let i=n.start?"^":"";const a=[];for(const m of e){const h=m.length?[]:[90];n.strict&&!m.length&&(i+="/");for(let g=0;g<m.length;g++){const v=m[g];let x=40+(n.sensitive?.25:0);if(v.type===0)g||(i+="/"),i+=v.value.replace(Ph,"\\$&"),x+=40;else if(v.type===1){const{value:P,repeatable:L,optional:Q,regexp:G}=v;a.push({name:P,repeatable:L,optional:Q});const ne=G||Gc;if(ne!==Gc){x+=10;try{new RegExp(`(${ne})`)}catch(F){throw new Error(`Invalid custom RegExp for param "${P}" (${ne}): `+F.message)}}let j=L?`((?:${ne})(?:/(?:${ne}))*)`:`(${ne})`;g||(j=Q&&m.length<2?`(?:/${j})`:"/"+j),Q&&(j+="?"),i+=j,x+=20,Q&&(x+=-8),L&&(x+=-20),ne===".*"&&(x+=-50)}h.push(x)}r.push(h)}if(n.strict&&n.end){const m=r.length-1;r[m][r[m].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const l=new RegExp(i,n.sensitive?"":"i");function d(m){const h=m.match(l),g={};if(!h)return null;for(let v=1;v<h.length;v++){const x=h[v]||"",P=a[v-1];g[P.name]=x&&P.repeatable?x.split("/"):x}return g}function f(m){let h="",g=!1;for(const v of e){(!g||!h.endsWith("/"))&&(h+="/"),g=!1;for(const x of v)if(x.type===0)h+=x.value;else if(x.type===1){const{value:P,repeatable:L,optional:Q}=x,G=P in m?m[P]:"";if(cn(G)&&!L)throw new Error(`Provided param "${P}" is an array but it is not repeatable (* or + modifiers)`);const ne=cn(G)?G.join("/"):G;if(!ne)if(Q)v.length<2&&(h.endsWith("/")?h=h.slice(0,-1):g=!0);else throw new Error(`Missing required param "${P}"`);h+=ne}}return h||"/"}return{re:l,score:r,keys:a,parse:d,stringify:f}}function Rh(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function Nu(e,t){let n=0;const r=e.score,i=t.score;for(;n<r.length&&n<i.length;){const a=Rh(r[n],i[n]);if(a)return a;n++}if(Math.abs(i.length-r.length)===1){if(Jc(r))return 1;if(Jc(i))return-1}return i.length-r.length}function Jc(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const Dh={type:0,value:""},$h=/[a-zA-Z0-9_]/;function Th(e){if(!e)return[[]];if(e==="/")return[[Dh]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(x){throw new Error(`ERR (${n})/"${m}": ${x}`)}let n=0,r=n;const i=[];let a;function l(){a&&i.push(a),a=[]}let d=0,f,m="",h="";function g(){m&&(n===0?a.push({type:0,value:m}):n===1||n===2||n===3?(a.length>1&&(f==="*"||f==="+")&&t(`A repeatable param (${m}) must be alone in its segment. eg: '/:ids+.`),a.push({type:1,value:m,regexp:h,repeatable:f==="*"||f==="+",optional:f==="*"||f==="?"})):t("Invalid state to consume buffer"),m="")}function v(){m+=f}for(;d<e.length;){if(f=e[d++],f==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:f==="/"?(m&&g(),l()):f===":"?(g(),n=1):v();break;case 4:v(),n=r;break;case 1:f==="("?n=2:$h.test(f)?v():(g(),n=0,f!=="*"&&f!=="?"&&f!=="+"&&d--);break;case 2:f===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+f:n=3:h+=f;break;case 3:g(),n=0,f!=="*"&&f!=="?"&&f!=="+"&&d--,h="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${m}"`),g(),l(),i}function Mh(e,t,n){const r=Oh(Th(e.path),n),i=Ze(r,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function Fh(e,t){const n=[],r=new Map;t=tl({strict:!1,end:!0,sensitive:!1},t);function i(g){return r.get(g)}function a(g,v,x){const P=!x,L=Zc(g);L.aliasOf=x&&x.record;const Q=tl(t,g),G=[L];if("alias"in g){const F=typeof g.alias=="string"?[g.alias]:g.alias;for(const se of F)G.push(Zc(Ze({},L,{components:x?x.record.components:L.components,path:se,aliasOf:x?x.record:L})))}let ne,j;for(const F of G){const{path:se}=F;if(v&&se[0]!=="/"){const ge=v.record.path,Ce=ge[ge.length-1]==="/"?"":"/";F.path=v.record.path+(se&&Ce+se)}if(ne=Mh(F,v,Q),x?x.alias.push(ne):(j=j||ne,j!==ne&&j.alias.push(ne),P&&g.name&&!el(ne)&&l(g.name)),ju(ne)&&f(ne),L.children){const ge=L.children;for(let Ce=0;Ce<ge.length;Ce++)a(ge[Ce],ne,x&&x.children[Ce])}x=x||ne}return j?()=>{l(j)}:fs}function l(g){if(Fu(g)){const v=r.get(g);v&&(r.delete(g),n.splice(n.indexOf(v),1),v.children.forEach(l),v.alias.forEach(l))}else{const v=n.indexOf(g);v>-1&&(n.splice(v,1),g.record.name&&r.delete(g.record.name),g.children.forEach(l),g.alias.forEach(l))}}function d(){return n}function f(g){const v=jh(g,n);n.splice(v,0,g),g.record.name&&!el(g)&&r.set(g.record.name,g)}function m(g,v){let x,P={},L,Q;if("name"in g&&g.name){if(x=r.get(g.name),!x)throw Kr(1,{location:g});Q=x.record.name,P=Ze(Xc(v.params,x.keys.filter(j=>!j.optional).concat(x.parent?x.parent.keys.filter(j=>j.optional):[]).map(j=>j.name)),g.params&&Xc(g.params,x.keys.map(j=>j.name))),L=x.stringify(P)}else if(g.path!=null)L=g.path,x=n.find(j=>j.re.test(L)),x&&(P=x.parse(L),Q=x.record.name);else{if(x=v.name?r.get(v.name):n.find(j=>j.re.test(v.path)),!x)throw Kr(1,{location:g,currentLocation:v});Q=x.record.name,P=Ze({},v.params,g.params),L=x.stringify(P)}const G=[];let ne=x;for(;ne;)G.unshift(ne.record),ne=ne.parent;return{name:Q,path:L,params:P,matched:G,meta:Nh(G)}}e.forEach(g=>a(g));function h(){n.length=0,r.clear()}return{addRoute:a,resolve:m,removeRoute:l,clearRoutes:h,getRoutes:d,getRecordMatcher:i}}function Xc(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function Zc(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:Bh(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function Bh(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]=typeof n=="object"?n[r]:n;return t}function el(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Nh(e){return e.reduce((t,n)=>Ze(t,n.meta),{})}function tl(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function jh(e,t){let n=0,r=t.length;for(;n!==r;){const a=n+r>>1;Nu(e,t[a])<0?r=a:n=a+1}const i=Lh(e);return i&&(r=t.lastIndexOf(i,r-1)),r}function Lh(e){let t=e;for(;t=t.parent;)if(ju(t)&&Nu(e,t)===0)return t}function ju({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function qh(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<r.length;++i){const a=r[i].replace(Ou," "),l=a.indexOf("="),d=xs(l<0?a:a.slice(0,l)),f=l<0?null:xs(a.slice(l+1));if(d in t){let m=t[d];cn(m)||(m=t[d]=[m]),m.push(f)}else t[d]=f}return t}function nl(e){let t="";for(let n in e){const r=e[n];if(n=ah(n),r==null){r!==void 0&&(t+=(t.length?"&":"")+n);continue}(cn(r)?r.map(a=>a&&Xi(a)):[r&&Xi(r)]).forEach(a=>{a!==void 0&&(t+=(t.length?"&":"")+n,a!=null&&(t+="="+a))})}return t}function Kh(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=cn(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return t}const Uh=Symbol(""),rl=Symbol(""),Ko=Symbol(""),Ia=Symbol(""),ea=Symbol("");function ns(){let e=[];function t(r){return e.push(r),()=>{const i=e.indexOf(r);i>-1&&e.splice(i,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function Yn(e,t,n,r,i,a=l=>l()){const l=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((d,f)=>{const m=v=>{v===!1?f(Kr(4,{from:n,to:t})):v instanceof Error?f(v):Sh(v)?f(Kr(2,{from:t,to:v})):(l&&r.enterCallbacks[i]===l&&typeof v=="function"&&l.push(v),d())},h=a(()=>e.call(r&&r.instances[i],t,n,m));let g=Promise.resolve(h);e.length<3&&(g=g.then(m)),g.catch(v=>f(v))})}function $i(e,t,n,r,i=a=>a()){const a=[];for(const l of e)for(const d in l.components){let f=l.components[d];if(!(t!=="beforeRouteEnter"&&!l.instances[d]))if(Iu(f)){const h=(f.__vccOpts||f)[t];h&&a.push(Yn(h,n,r,l,d,i))}else{let m=f();a.push(()=>m.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${d}" at "${l.path}"`);const g=Gp(h)?h.default:h;l.mods[d]=h,l.components[d]=g;const x=(g.__vccOpts||g)[t];return x&&Yn(x,n,r,l,d,i)()}))}}return a}function sl(e){const t=Xt(Ko),n=Xt(Ia),r=st(()=>{const f=ke(e.to);return t.resolve(f)}),i=st(()=>{const{matched:f}=r.value,{length:m}=f,h=f[m-1],g=n.matched;if(!h||!g.length)return-1;const v=g.findIndex(qr.bind(null,h));if(v>-1)return v;const x=ol(f[m-2]);return m>1&&ol(h)===x&&g[g.length-1].path!==x?g.findIndex(qr.bind(null,f[m-2])):v}),a=st(()=>i.value>-1&&Qh(n.params,r.value.params)),l=st(()=>i.value>-1&&i.value===n.matched.length-1&&Tu(n.params,r.value.params));function d(f={}){if(zh(f)){const m=t[ke(e.replace)?"replace":"push"](ke(e.to)).catch(fs);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>m),m}return Promise.resolve()}return{route:r,href:st(()=>r.value.href),isActive:a,isExactActive:l,navigate:d}}function Vh(e){return e.length===1?e[0]:e}const Hh=ot({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:sl,setup(e,{slots:t}){const n=gr(sl(e)),{options:r}=Xt(Ko),i=st(()=>({[il(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[il(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const a=t.default&&Vh(t.default(n));return e.custom?a:Br("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},a)}}}),Wh=Hh;function zh(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Qh(e,t){for(const n in t){const r=t[n],i=e[n];if(typeof r=="string"){if(r!==i)return!1}else if(!cn(i)||i.length!==r.length||r.some((a,l)=>a!==i[l]))return!1}return!0}function ol(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const il=(e,t,n)=>e??t??n,Yh=ot({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const r=Xt(ea),i=st(()=>e.route||r.value),a=Xt(rl,0),l=st(()=>{let m=ke(a);const{matched:h}=i.value;let g;for(;(g=h[m])&&!g.components;)m++;return m}),d=st(()=>i.value.matched[l.value]);us(rl,st(()=>l.value+1)),us(Uh,d),us(ea,i);const f=Ae();return Zt(()=>[f.value,d.value,e.name],([m,h,g],[v,x,P])=>{h&&(h.instances[g]=m,x&&x!==h&&m&&m===v&&(h.leaveGuards.size||(h.leaveGuards=x.leaveGuards),h.updateGuards.size||(h.updateGuards=x.updateGuards))),m&&h&&(!x||!qr(h,x)||!v)&&(h.enterCallbacks[g]||[]).forEach(L=>L(m))},{flush:"post"}),()=>{const m=i.value,h=e.name,g=d.value,v=g&&g.components[h];if(!v)return al(n.default,{Component:v,route:m});const x=g.props[h],P=x?x===!0?m.params:typeof x=="function"?x(m):x:null,Q=Br(v,Ze({},P,t,{onVnodeUnmounted:G=>{G.component.isUnmounted&&(g.instances[h]=null)},ref:f}));return al(n.default,{Component:Q,route:m})||Q}}});function al(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const Gh=Yh;function Jh(e){const t=Fh(e.routes,e),n=e.parseQuery||qh,r=e.stringifyQuery||nl,i=e.history,a=ns(),l=ns(),d=ns(),f=Vl(Vn);let m=Vn;Dr&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=Ri.bind(null,J=>""+J),g=Ri.bind(null,lh),v=Ri.bind(null,xs);function x(J,be){let H,we;return Fu(J)?(H=t.getRecordMatcher(J),we=be):we=J,t.addRoute(we,H)}function P(J){const be=t.getRecordMatcher(J);be&&t.removeRoute(be)}function L(){return t.getRoutes().map(J=>J.record)}function Q(J){return!!t.getRecordMatcher(J)}function G(J,be){if(be=Ze({},be||f.value),typeof J=="string"){const B=Di(n,J,be.path),Y=t.resolve({path:B.path},be),ee=i.createHref(B.fullPath);return Ze(B,Y,{params:v(Y.params),hash:xs(B.hash),redirectedFrom:void 0,href:ee})}let H;if(J.path!=null)H=Ze({},J,{path:Di(n,J.path,be.path).path});else{const B=Ze({},J.params);for(const Y in B)B[Y]==null&&delete B[Y];H=Ze({},J,{params:g(B)}),be.params=g(be.params)}const we=t.resolve(H,be),Ye=J.hash||"";we.params=h(v(we.params));const _=fh(r,Ze({},J,{hash:ih(Ye),path:we.path})),A=i.createHref(_);return Ze({fullPath:_,hash:Ye,query:r===nl?Kh(J.query):J.query||{}},we,{redirectedFrom:void 0,href:A})}function ne(J){return typeof J=="string"?Di(n,J,f.value.path):Ze({},J)}function j(J,be){if(m!==J)return Kr(8,{from:be,to:J})}function F(J){return Ce(J)}function se(J){return F(Ze(ne(J),{replace:!0}))}function ge(J){const be=J.matched[J.matched.length-1];if(be&&be.redirect){const{redirect:H}=be;let we=typeof H=="function"?H(J):H;return typeof we=="string"&&(we=we.includes("?")||we.includes("#")?we=ne(we):{path:we},we.params={}),Ze({query:J.query,hash:J.hash,params:we.path!=null?{}:J.params},we)}}function Ce(J,be){const H=m=G(J),we=f.value,Ye=J.state,_=J.force,A=J.replace===!0,B=ge(H);if(B)return Ce(Ze(ne(B),{state:typeof B=="object"?Ze({},Ye,B.state):Ye,force:_,replace:A}),be||H);const Y=H;Y.redirectedFrom=be;let ee;return!_&&ph(r,we,H)&&(ee=Kr(16,{to:Y,from:we}),Ie(we,we,!0,!1)),(ee?Promise.resolve(ee):qe(Y,we)).catch(X=>Sn(X)?Sn(X,2)?X:N(X):z(X,Y,we)).then(X=>{if(X){if(Sn(X,2))return Ce(Ze({replace:A},ne(X.to),{state:typeof X.to=="object"?Ze({},Ye,X.to.state):Ye,force:_}),be||Y)}else X=Xe(Y,we,!0,A,Ye);return ut(Y,we,X),X})}function Se(J,be){const H=j(J,be);return H?Promise.reject(H):Promise.resolve()}function Ee(J){const be=Ht.values().next().value;return be&&typeof be.runWithContext=="function"?be.runWithContext(J):J()}function qe(J,be){let H;const[we,Ye,_]=Xh(J,be);H=$i(we.reverse(),"beforeRouteLeave",J,be);for(const B of we)B.leaveGuards.forEach(Y=>{H.push(Yn(Y,J,be))});const A=Se.bind(null,J,be);return H.push(A),pt(H).then(()=>{H=[];for(const B of a.list())H.push(Yn(B,J,be));return H.push(A),pt(H)}).then(()=>{H=$i(Ye,"beforeRouteUpdate",J,be);for(const B of Ye)B.updateGuards.forEach(Y=>{H.push(Yn(Y,J,be))});return H.push(A),pt(H)}).then(()=>{H=[];for(const B of _)if(B.beforeEnter)if(cn(B.beforeEnter))for(const Y of B.beforeEnter)H.push(Yn(Y,J,be));else H.push(Yn(B.beforeEnter,J,be));return H.push(A),pt(H)}).then(()=>(J.matched.forEach(B=>B.enterCallbacks={}),H=$i(_,"beforeRouteEnter",J,be,Ee),H.push(A),pt(H))).then(()=>{H=[];for(const B of l.list())H.push(Yn(B,J,be));return H.push(A),pt(H)}).catch(B=>Sn(B,8)?B:Promise.reject(B))}function ut(J,be,H){d.list().forEach(we=>Ee(()=>we(J,be,H)))}function Xe(J,be,H,we,Ye){const _=j(J,be);if(_)return _;const A=be===Vn,B=Dr?history.state:{};H&&(we||A?i.replace(J.fullPath,Ze({scroll:A&&B&&B.scroll},Ye)):i.push(J.fullPath,Ye)),f.value=J,Ie(J,be,H,A),N()}let ze;function wt(){ze||(ze=i.listen((J,be,H)=>{if(!Nt.listening)return;const we=G(J),Ye=ge(we);if(Ye){Ce(Ze(Ye,{replace:!0,force:!0}),we).catch(fs);return}m=we;const _=f.value;Dr&&wh(zc(_.fullPath,H.delta),qo()),qe(we,_).catch(A=>Sn(A,12)?A:Sn(A,2)?(Ce(Ze(ne(A.to),{force:!0}),we).then(B=>{Sn(B,20)&&!H.delta&&H.type===ks.pop&&i.go(-1,!1)}).catch(fs),Promise.reject()):(H.delta&&i.go(-H.delta,!1),z(A,we,_))).then(A=>{A=A||Xe(we,_,!1),A&&(H.delta&&!Sn(A,8)?i.go(-H.delta,!1):H.type===ks.pop&&Sn(A,20)&&i.go(-1,!1)),ut(we,_,A)}).catch(fs)}))}let it=ns(),Me=ns(),Oe;function z(J,be,H){N(J);const we=Me.list();return we.length?we.forEach(Ye=>Ye(J,be,H)):console.error(J),Promise.reject(J)}function V(){return Oe&&f.value!==Vn?Promise.resolve():new Promise((J,be)=>{it.add([J,be])})}function N(J){return Oe||(Oe=!J,wt(),it.list().forEach(([be,H])=>J?H(J):be()),it.reset()),J}function Ie(J,be,H,we){const{scrollBehavior:Ye}=e;if(!Dr||!Ye)return Promise.resolve();const _=!H&&xh(zc(J.fullPath,0))||(we||!H)&&history.state&&history.state.scroll||null;return an().then(()=>Ye(J,be,_)).then(A=>A&&_h(A)).catch(A=>z(A,J,be))}const ve=J=>i.go(J);let Ve;const Ht=new Set,Nt={currentRoute:f,listening:!0,addRoute:x,removeRoute:P,clearRoutes:t.clearRoutes,hasRoute:Q,getRoutes:L,resolve:G,options:e,push:F,replace:se,go:ve,back:()=>ve(-1),forward:()=>ve(1),beforeEach:a.add,beforeResolve:l.add,afterEach:d.add,onError:Me.add,isReady:V,install(J){const be=this;J.component("RouterLink",Wh),J.component("RouterView",Gh),J.config.globalProperties.$router=be,Object.defineProperty(J.config.globalProperties,"$route",{enumerable:!0,get:()=>ke(f)}),Dr&&!Ve&&f.value===Vn&&(Ve=!0,F(i.location).catch(Ye=>{}));const H={};for(const Ye in Vn)Object.defineProperty(H,Ye,{get:()=>f.value[Ye],enumerable:!0});J.provide(Ko,be),J.provide(Ia,Kl(H)),J.provide(ea,f);const we=J.unmount;Ht.add(J),J.unmount=function(){Ht.delete(J),Ht.size<1&&(m=Vn,ze&&ze(),ze=null,f.value=Vn,Ve=!1,Oe=!1),we()}}};function pt(J){return J.reduce((be,H)=>be.then(()=>Ee(H)),Promise.resolve())}return Nt}function Xh(e,t){const n=[],r=[],i=[],a=Math.max(t.matched.length,e.matched.length);for(let l=0;l<a;l++){const d=t.matched[l];d&&(e.matched.find(m=>qr(m,d))?r.push(d):n.push(d));const f=e.matched[l];f&&(t.matched.find(m=>qr(m,f))||i.push(f))}return[n,r,i]}function Zh(){return Xt(Ko)}function Lu(e){return Xt(Ia)}const em=["aria-label"],tm={key:0},nm={key:1},rm=ot({__name:"ThemeSwitcher",setup(e){const t=Ae("light"),n=()=>{const r=t.value==="light"?"dark":"light";t.value=r,document.documentElement.setAttribute("data-theme",r),document.documentElement.setAttribute("data-bs-theme",r),localStorage.setItem("theme",r)};return er(()=>{const r=localStorage.getItem("theme"),i=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;let a="light";r?a=r:i&&(a="dark"),t.value=a,document.documentElement.setAttribute("data-theme",a),document.documentElement.setAttribute("data-bs-theme",a)}),(r,i)=>(K(),Z("button",{type:"button",class:"btn btn-outline-primary",onClick:n,"aria-label":`Switch to ${t.value==="light"?"dark":"light"} mode`},[t.value==="light"?(K(),Z("span",tm,"  Dark ")):(K(),Z("span",nm,"  Light "))],8,em))}}),Fn=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n},sm=Fn(rm,[["__scopeId","data-v-c333c158"]]),om={class:"navbar navbar-expand-md navbar-light bg-body fixed-top border-bottom"},im={class:"container-fluid"},am=["aria-expanded"],cm={class:"navbar-nav me-auto"},lm={class:"nav-item"},um={class:"nav-item"},dm={class:"nav-item"},fm={class:"nav-item"},pm={class:"d-flex"},hm=ot({__name:"Navigation",setup(e){const t=Lu(),n=st(()=>t.name==="decks"||t.name==="deck-detail"||t.name==="deck-import"),r=Ae(!1);return(i,a)=>{const l=Bo("router-link");return K(),Z("nav",om,[w("div",im,[Ue(l,{to:"/",class:"navbar-brand"},{default:rt(()=>[...a[1]||(a[1]=[zt(" MTG Tracker ",-1)])]),_:1}),w("button",{class:"navbar-toggler",type:"button",onClick:a[0]||(a[0]=d=>r.value=!r.value),"aria-controls":"navbarNav","aria-expanded":r.value,"aria-label":"Toggle navigation"},[...a[2]||(a[2]=[w("span",{class:"navbar-toggler-icon"},null,-1)])],8,am),w("div",{id:"navbarNav",class:Et(["collapse navbar-collapse",{show:r.value}])},[w("ul",cm,[w("li",lm,[Ue(l,{to:"/",class:Et(["nav-link",{active:ke(t).name==="home"}])},{default:rt(()=>[...a[3]||(a[3]=[zt(" Dashboard ",-1)])]),_:1},8,["class"])]),w("li",um,[Ue(l,{to:"/decks",class:Et(["nav-link",{active:n.value}])},{default:rt(()=>[...a[4]||(a[4]=[zt(" Decks ",-1)])]),_:1},8,["class"])]),w("li",dm,[Ue(l,{to:"/cards",class:Et(["nav-link",{active:ke(t).name==="cards"}])},{default:rt(()=>[...a[5]||(a[5]=[zt(" Cards ",-1)])]),_:1},8,["class"])]),w("li",fm,[Ue(l,{to:"/import/cardmarket",class:Et(["nav-link",{active:ke(t).name==="cardmarket-import"}])},{default:rt(()=>[...a[6]||(a[6]=[zt(" Cardmarket Import ",-1)])]),_:1},8,["class"])])]),w("div",pm,[Ue(sm)])],2)])])}}}),mm=Fn(hm,[["__scopeId","data-v-6a06b723"]]),ym={class:"container-lg",style:{"padding-top":"calc(var(--app-navbar-h) + 1.5rem)","padding-bottom":"1.5rem"}},gm=ot({__name:"App",setup(e){return(t,n)=>{const r=Bo("router-view");return K(),Z(nt,null,[Ue(mm),w("main",ym,[Ue(r)])],64)}}});/*!
 * pinia v3.0.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let qu;const Uo=e=>qu=e,Ku=Symbol();function ta(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var hs;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(hs||(hs={}));function vm(){const e=Do(!0),t=e.run(()=>Ae({}));let n=[],r=[];const i=va({install(a){Uo(i),i._a=a,a.provide(Ku,i),a.config.globalProperties.$pinia=i,r.forEach(l=>n.push(l)),r=[]},use(a){return this._a?n.push(a):r.push(a),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return i}const Uu=()=>{};function cl(e,t,n,r=Uu){e.push(t);const i=()=>{const a=e.indexOf(t);a>-1&&(e.splice(a,1),r())};return!n&&ua()&&Sl(i),i}function Pr(e,...t){e.slice().forEach(n=>{n(...t)})}const bm=e=>e(),ll=Symbol(),Ti=Symbol();function na(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,r)=>e.set(r,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n],i=e[n];ta(i)&&ta(r)&&e.hasOwnProperty(n)&&!bt(r)&&!Jn(r)?e[n]=na(i,r):e[n]=r}return e}const _m=Symbol();function wm(e){return!ta(e)||!Object.prototype.hasOwnProperty.call(e,_m)}const{assign:Hn}=Object;function xm(e){return!!(bt(e)&&e.effect)}function km(e,t,n,r){const{state:i,actions:a,getters:l}=t,d=n.state.value[e];let f;function m(){d||(n.state.value[e]=i?i():{});const h=ba(n.state.value[e]);return Hn(h,a,Object.keys(l||{}).reduce((g,v)=>(g[v]=va(st(()=>{Uo(n);const x=n._s.get(e);return l[v].call(x,x)})),g),{}))}return f=Vu(e,m,t,n,r,!0),f}function Vu(e,t,n={},r,i,a){let l;const d=Hn({actions:{}},n),f={deep:!0};let m,h,g=[],v=[],x;const P=r.state.value[e];!a&&!P&&(r.state.value[e]={}),Ae({});let L;function Q(Se){let Ee;m=h=!1,typeof Se=="function"?(Se(r.state.value[e]),Ee={type:hs.patchFunction,storeId:e,events:x}):(na(r.state.value[e],Se),Ee={type:hs.patchObject,payload:Se,storeId:e,events:x});const qe=L=Symbol();an().then(()=>{L===qe&&(m=!0)}),h=!0,Pr(g,Ee,r.state.value[e])}const G=a?function(){const{state:Ee}=n,qe=Ee?Ee():{};this.$patch(ut=>{Hn(ut,qe)})}:Uu;function ne(){l.stop(),g=[],v=[],r._s.delete(e)}const j=(Se,Ee="")=>{if(ll in Se)return Se[Ti]=Ee,Se;const qe=function(){Uo(r);const ut=Array.from(arguments),Xe=[],ze=[];function wt(Oe){Xe.push(Oe)}function it(Oe){ze.push(Oe)}Pr(v,{args:ut,name:qe[Ti],store:se,after:wt,onError:it});let Me;try{Me=Se.apply(this&&this.$id===e?this:se,ut)}catch(Oe){throw Pr(ze,Oe),Oe}return Me instanceof Promise?Me.then(Oe=>(Pr(Xe,Oe),Oe)).catch(Oe=>(Pr(ze,Oe),Promise.reject(Oe))):(Pr(Xe,Me),Me)};return qe[ll]=!0,qe[Ti]=Ee,qe},F={_p:r,$id:e,$onAction:cl.bind(null,v),$patch:Q,$reset:G,$subscribe(Se,Ee={}){const qe=cl(g,Se,Ee.detached,()=>ut()),ut=l.run(()=>Zt(()=>r.state.value[e],Xe=>{(Ee.flush==="sync"?h:m)&&Se({storeId:e,type:hs.direct,events:x},Xe)},Hn({},f,Ee)));return qe},$dispose:ne},se=gr(F);r._s.set(e,se);const Ce=(r._a&&r._a.runWithContext||bm)(()=>r._e.run(()=>(l=Do()).run(()=>t({action:j}))));for(const Se in Ce){const Ee=Ce[Se];if(bt(Ee)&&!xm(Ee)||Jn(Ee))a||(P&&wm(Ee)&&(bt(Ee)?Ee.value=P[Se]:na(Ee,P[Se])),r.state.value[e][Se]=Ee);else if(typeof Ee=="function"){const qe=j(Ee,Se);Ce[Se]=qe,d.actions[Se]=Ee}}return Hn(se,Ce),Hn(Je(se),Ce),Object.defineProperty(se,"$state",{get:()=>r.state.value[e],set:Se=>{Q(Ee=>{Hn(Ee,Se)})}}),r._p.forEach(Se=>{Hn(se,l.run(()=>Se({store:se,app:r._a,pinia:r,options:d})))}),P&&a&&n.hydrate&&n.hydrate(se.$state,P),m=!0,h=!0,se}/*! #__NO_SIDE_EFFECTS__ */function Pa(e,t,n){let r;const i=typeof t=="function";r=i?n:t;function a(l,d){const f=Hf();return l=l||(f?Xt(Ku,null):null),l&&Uo(l),l=qu,l._s.has(e)||(i?Vu(e,t,r,l):km(e,r,l)),l._s.get(e)}return a.$id=e,a}var Cm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Am(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var po={exports:{}},Em=po.exports,ul;function Sm(){return ul||(ul=1,(function(e,t){(function(n,r){e.exports=r()})(Em,function(){var n=function(s,o){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var p in u)Object.prototype.hasOwnProperty.call(u,p)&&(c[p]=u[p])})(s,o)},r=function(){return(r=Object.assign||function(s){for(var o,c=1,u=arguments.length;c<u;c++)for(var p in o=arguments[c])Object.prototype.hasOwnProperty.call(o,p)&&(s[p]=o[p]);return s}).apply(this,arguments)};function i(s,o,c){for(var u,p=0,y=o.length;p<y;p++)!u&&p in o||((u=u||Array.prototype.slice.call(o,0,p))[p]=o[p]);return s.concat(u||Array.prototype.slice.call(o))}var a=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Cm,l=Object.keys,d=Array.isArray;function f(s,o){return typeof o!="object"||l(o).forEach(function(c){s[c]=o[c]}),s}typeof Promise>"u"||a.Promise||(a.Promise=Promise);var m=Object.getPrototypeOf,h={}.hasOwnProperty;function g(s,o){return h.call(s,o)}function v(s,o){typeof o=="function"&&(o=o(m(s))),(typeof Reflect>"u"?l:Reflect.ownKeys)(o).forEach(function(c){P(s,c,o[c])})}var x=Object.defineProperty;function P(s,o,c,u){x(s,o,f(c&&g(c,"get")&&typeof c.get=="function"?{get:c.get,set:c.set,configurable:!0}:{value:c,configurable:!0,writable:!0},u))}function L(s){return{from:function(o){return s.prototype=Object.create(o.prototype),P(s.prototype,"constructor",s),{extend:v.bind(null,s.prototype)}}}}var Q=Object.getOwnPropertyDescriptor,G=[].slice;function ne(s,o,c){return G.call(s,o,c)}function j(s,o){return o(s)}function F(s){if(!s)throw new Error("Assertion Failed")}function se(s){a.setImmediate?setImmediate(s):setTimeout(s,0)}function ge(s,o){if(typeof o=="string"&&g(s,o))return s[o];if(!o)return s;if(typeof o!="string"){for(var c=[],u=0,p=o.length;u<p;++u){var y=ge(s,o[u]);c.push(y)}return c}var b=o.indexOf(".");if(b!==-1){var k=s[o.substr(0,b)];return k==null?void 0:ge(k,o.substr(b+1))}}function Ce(s,o,c){if(s&&o!==void 0&&!("isFrozen"in Object&&Object.isFrozen(s)))if(typeof o!="string"&&"length"in o){F(typeof c!="string"&&"length"in c);for(var u=0,p=o.length;u<p;++u)Ce(s,o[u],c[u])}else{var y,b,k=o.indexOf(".");k!==-1?(y=o.substr(0,k),(b=o.substr(k+1))===""?c===void 0?d(s)&&!isNaN(parseInt(y))?s.splice(y,1):delete s[y]:s[y]=c:Ce(k=!(k=s[y])||!g(s,y)?s[y]={}:k,b,c)):c===void 0?d(s)&&!isNaN(parseInt(o))?s.splice(o,1):delete s[o]:s[o]=c}}function Se(s){var o,c={};for(o in s)g(s,o)&&(c[o]=s[o]);return c}var Ee=[].concat;function qe(s){return Ee.apply([],s)}var je="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(qe([8,16,32,64].map(function(s){return["Int","Uint","Float"].map(function(o){return o+s+"Array"})}))).filter(function(s){return a[s]}),ut=new Set(je.map(function(s){return a[s]})),Xe=null;function ze(s){return Xe=new WeakMap,s=(function o(c){if(!c||typeof c!="object")return c;var u=Xe.get(c);if(u)return u;if(d(c)){u=[],Xe.set(c,u);for(var p=0,y=c.length;p<y;++p)u.push(o(c[p]))}else if(ut.has(c.constructor))u=c;else{var b,k=m(c);for(b in u=k===Object.prototype?{}:Object.create(k),Xe.set(c,u),c)g(c,b)&&(u[b]=o(c[b]))}return u})(s),Xe=null,s}var wt={}.toString;function it(s){return wt.call(s).slice(8,-1)}var Me=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Oe=typeof Me=="symbol"?function(s){var o;return s!=null&&(o=s[Me])&&o.apply(s)}:function(){return null};function z(s,o){return o=s.indexOf(o),0<=o&&s.splice(o,1),0<=o}var V={};function N(s){var o,c,u,p;if(arguments.length===1){if(d(s))return s.slice();if(this===V&&typeof s=="string")return[s];if(p=Oe(s)){for(c=[];!(u=p.next()).done;)c.push(u.value);return c}if(s==null)return[s];if(typeof(o=s.length)!="number")return[s];for(c=new Array(o);o--;)c[o]=s[o];return c}for(o=arguments.length,c=new Array(o);o--;)c[o]=arguments[o];return c}var Ie=typeof Symbol<"u"?function(s){return s[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},De=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],tn=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(De),ve={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ve(s,o){this.name=s,this.message=o}function Ht(s,o){return s+". Errors: "+Object.keys(o).map(function(c){return o[c].toString()}).filter(function(c,u,p){return p.indexOf(c)===u}).join(`
`)}function Nt(s,o,c,u){this.failures=o,this.failedKeys=u,this.successCount=c,this.message=Ht(s,o)}function pt(s,o){this.name="BulkError",this.failures=Object.keys(o).map(function(c){return o[c]}),this.failuresByPos=o,this.message=Ht(s,this.failures)}L(Ve).from(Error).extend({toString:function(){return this.name+": "+this.message}}),L(Nt).from(Ve),L(pt).from(Ve);var J=tn.reduce(function(s,o){return s[o]=o+"Error",s},{}),be=Ve,H=tn.reduce(function(s,o){var c=o+"Error";function u(p,y){this.name=c,p?typeof p=="string"?(this.message="".concat(p).concat(y?`
 `+y:""),this.inner=y||null):typeof p=="object"&&(this.message="".concat(p.name," ").concat(p.message),this.inner=p):(this.message=ve[o]||c,this.inner=null)}return L(u).from(be),s[o]=u,s},{});H.Syntax=SyntaxError,H.Type=TypeError,H.Range=RangeError;var we=De.reduce(function(s,o){return s[o+"Error"]=H[o],s},{}),Ye=tn.reduce(function(s,o){return["Syntax","Type","Range"].indexOf(o)===-1&&(s[o+"Error"]=H[o]),s},{});function _(){}function A(s){return s}function B(s,o){return s==null||s===A?o:function(c){return o(s(c))}}function Y(s,o){return function(){s.apply(this,arguments),o.apply(this,arguments)}}function ee(s,o){return s===_?o:function(){var c=s.apply(this,arguments);c!==void 0&&(arguments[0]=c);var u=this.onsuccess,p=this.onerror;this.onsuccess=null,this.onerror=null;var y=o.apply(this,arguments);return u&&(this.onsuccess=this.onsuccess?Y(u,this.onsuccess):u),p&&(this.onerror=this.onerror?Y(p,this.onerror):p),y!==void 0?y:c}}function X(s,o){return s===_?o:function(){s.apply(this,arguments);var c=this.onsuccess,u=this.onerror;this.onsuccess=this.onerror=null,o.apply(this,arguments),c&&(this.onsuccess=this.onsuccess?Y(c,this.onsuccess):c),u&&(this.onerror=this.onerror?Y(u,this.onerror):u)}}function fe(s,o){return s===_?o:function(c){var u=s.apply(this,arguments);f(c,u);var p=this.onsuccess,y=this.onerror;return this.onsuccess=null,this.onerror=null,c=o.apply(this,arguments),p&&(this.onsuccess=this.onsuccess?Y(p,this.onsuccess):p),y&&(this.onerror=this.onerror?Y(y,this.onerror):y),u===void 0?c===void 0?void 0:c:f(u,c)}}function ue(s,o){return s===_?o:function(){return o.apply(this,arguments)!==!1&&s.apply(this,arguments)}}function ce(s,o){return s===_?o:function(){var c=s.apply(this,arguments);if(c&&typeof c.then=="function"){for(var u=this,p=arguments.length,y=new Array(p);p--;)y[p]=arguments[p];return c.then(function(){return o.apply(u,y)})}return o.apply(this,arguments)}}Ye.ModifyError=Nt,Ye.DexieError=Ve,Ye.BulkError=pt;var te=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Re(s){te=s}var pe={},Pe=100,je=typeof Promise>"u"?[]:(function(){var s=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[s,m(s),s];var o=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[o,m(o),s]})(),De=je[0],tn=je[1],je=je[2],tn=tn&&tn.then,He=De&&De.constructor,Qe=!!je,_t=function(s,o){Bn.push([s,o]),jt&&(queueMicrotask(od),jt=!1)},xt=!0,jt=!0,kt=[],ln=[],br=A,ht={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:_,pgp:!1,env:{},finalize:_},_e=ht,Bn=[],un=0,Is=[];function me(s){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var o=this._PSD=_e;if(typeof s!="function"){if(s!==pe)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Wo(this,this._value))}this._state=null,this._value=null,++o.ref,(function c(u,p){try{p(function(y){if(u._state===null){if(y===u)throw new TypeError("A promise cannot be resolved with itself.");var b=u._lib&&_r();y&&typeof y.then=="function"?c(u,function(k,E){y instanceof me?y._then(k,E):y.then(k,E)}):(u._state=!0,u._value=y,Ma(u)),b&&wr()}},Wo.bind(null,u))}catch(y){Wo(u,y)}})(this,s)}var Ho={get:function(){var s=_e,o=Ds;function c(u,p){var y=this,b=!s.global&&(s!==_e||o!==Ds),k=b&&!jn(),E=new me(function(I,R){zo(y,new Ta(Ba(u,s,b,k),Ba(p,s,b,k),I,R,s))});return this._consoleTask&&(E._consoleTask=this._consoleTask),E}return c.prototype=pe,c},set:function(s){P(this,"then",s&&s.prototype===pe?Ho:{get:function(){return s},set:Ho.set})}};function Ta(s,o,c,u,p){this.onFulfilled=typeof s=="function"?s:null,this.onRejected=typeof o=="function"?o:null,this.resolve=c,this.reject=u,this.psd=p}function Wo(s,o){var c,u;ln.push(o),s._state===null&&(c=s._lib&&_r(),o=br(o),s._state=!1,s._value=o,u=s,kt.some(function(p){return p._value===u._value})||kt.push(u),Ma(s),c&&wr())}function Ma(s){var o=s._listeners;s._listeners=[];for(var c=0,u=o.length;c<u;++c)zo(s,o[c]);var p=s._PSD;--p.ref||p.finalize(),un===0&&(++un,_t(function(){--un==0&&Qo()},[]))}function zo(s,o){if(s._state!==null){var c=s._state?o.onFulfilled:o.onRejected;if(c===null)return(s._state?o.resolve:o.reject)(s._value);++o.psd.ref,++un,_t(sd,[c,s,o])}else s._listeners.push(o)}function sd(s,o,c){try{var u,p=o._value;!o._state&&ln.length&&(ln=[]),u=te&&o._consoleTask?o._consoleTask.run(function(){return s(p)}):s(p),o._state||ln.indexOf(p)!==-1||(function(y){for(var b=kt.length;b;)if(kt[--b]._value===y._value)return kt.splice(b,1)})(o),c.resolve(u)}catch(y){c.reject(y)}finally{--un==0&&Qo(),--c.psd.ref||c.psd.finalize()}}function od(){nr(ht,function(){_r()&&wr()})}function _r(){var s=xt;return jt=xt=!1,s}function wr(){var s,o,c;do for(;0<Bn.length;)for(s=Bn,Bn=[],c=s.length,o=0;o<c;++o){var u=s[o];u[0].apply(null,u[1])}while(0<Bn.length);jt=xt=!0}function Qo(){var s=kt;kt=[],s.forEach(function(u){u._PSD.onunhandled.call(null,u._value,u)});for(var o=Is.slice(0),c=o.length;c;)o[--c]()}function Ps(s){return new me(pe,!1,s)}function ft(s,o){var c=_e;return function(){var u=_r(),p=_e;try{return Ln(c,!0),s.apply(this,arguments)}catch(y){o&&o(y)}finally{Ln(p,!1),u&&wr()}}}v(me.prototype,{then:Ho,_then:function(s,o){zo(this,new Ta(null,null,s,o,_e))},catch:function(s){if(arguments.length===1)return this.then(null,s);var o=s,c=arguments[1];return typeof o=="function"?this.then(null,function(u){return(u instanceof o?c:Ps)(u)}):this.then(null,function(u){return(u&&u.name===o?c:Ps)(u)})},finally:function(s){return this.then(function(o){return me.resolve(s()).then(function(){return o})},function(o){return me.resolve(s()).then(function(){return Ps(o)})})},timeout:function(s,o){var c=this;return s<1/0?new me(function(u,p){var y=setTimeout(function(){return p(new H.Timeout(o))},s);c.then(u,p).finally(clearTimeout.bind(null,y))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&P(me.prototype,Symbol.toStringTag,"Dexie.Promise"),ht.env=Fa(),v(me,{all:function(){var s=N.apply(null,arguments).map($s);return new me(function(o,c){s.length===0&&o([]);var u=s.length;s.forEach(function(p,y){return me.resolve(p).then(function(b){s[y]=b,--u||o(s)},c)})})},resolve:function(s){return s instanceof me?s:s&&typeof s.then=="function"?new me(function(o,c){s.then(o,c)}):new me(pe,!0,s)},reject:Ps,race:function(){var s=N.apply(null,arguments).map($s);return new me(function(o,c){s.map(function(u){return me.resolve(u).then(o,c)})})},PSD:{get:function(){return _e},set:function(s){return _e=s}},totalEchoes:{get:function(){return Ds}},newPSD:Nn,usePSD:nr,scheduler:{get:function(){return _t},set:function(s){_t=s}},rejectionMapper:{get:function(){return br},set:function(s){br=s}},follow:function(s,o){return new me(function(c,u){return Nn(function(p,y){var b=_e;b.unhandleds=[],b.onunhandled=y,b.finalize=Y(function(){var k,E=this;k=function(){E.unhandleds.length===0?p():y(E.unhandleds[0])},Is.push(function I(){k(),Is.splice(Is.indexOf(I),1)}),++un,_t(function(){--un==0&&Qo()},[])},b.finalize),s()},o,c,u)})}}),He&&(He.allSettled&&P(me,"allSettled",function(){var s=N.apply(null,arguments).map($s);return new me(function(o){s.length===0&&o([]);var c=s.length,u=new Array(c);s.forEach(function(p,y){return me.resolve(p).then(function(b){return u[y]={status:"fulfilled",value:b}},function(b){return u[y]={status:"rejected",reason:b}}).then(function(){return--c||o(u)})})})}),He.any&&typeof AggregateError<"u"&&P(me,"any",function(){var s=N.apply(null,arguments).map($s);return new me(function(o,c){s.length===0&&c(new AggregateError([]));var u=s.length,p=new Array(u);s.forEach(function(y,b){return me.resolve(y).then(function(k){return o(k)},function(k){p[b]=k,--u||c(new AggregateError(p))})})})}),He.withResolvers&&(me.withResolvers=He.withResolvers));var Ct={awaits:0,echoes:0,id:0},id=0,Os=[],Rs=0,Ds=0,ad=0;function Nn(s,o,c,u){var p=_e,y=Object.create(p);return y.parent=p,y.ref=0,y.global=!1,y.id=++ad,ht.env,y.env=Qe?{Promise:me,PromiseProp:{value:me,configurable:!0,writable:!0},all:me.all,race:me.race,allSettled:me.allSettled,any:me.any,resolve:me.resolve,reject:me.reject}:{},o&&f(y,o),++p.ref,y.finalize=function(){--this.parent.ref||this.parent.finalize()},u=nr(y,s,c,u),y.ref===0&&y.finalize(),u}function xr(){return Ct.id||(Ct.id=++id),++Ct.awaits,Ct.echoes+=Pe,Ct.id}function jn(){return!!Ct.awaits&&(--Ct.awaits==0&&(Ct.id=0),Ct.echoes=Ct.awaits*Pe,!0)}function $s(s){return Ct.echoes&&s&&s.constructor===He?(xr(),s.then(function(o){return jn(),o},function(o){return jn(),gt(o)})):s}function cd(){var s=Os[Os.length-1];Os.pop(),Ln(s,!1)}function Ln(s,o){var c,u=_e;(o?!Ct.echoes||Rs++&&s===_e:!Rs||--Rs&&s===_e)||queueMicrotask(o?(function(p){++Ds,Ct.echoes&&--Ct.echoes!=0||(Ct.echoes=Ct.awaits=Ct.id=0),Os.push(_e),Ln(p,!0)}).bind(null,s):cd),s!==_e&&(_e=s,u===ht&&(ht.env=Fa()),Qe&&(c=ht.env.Promise,o=s.env,(u.global||s.global)&&(Object.defineProperty(a,"Promise",o.PromiseProp),c.all=o.all,c.race=o.race,c.resolve=o.resolve,c.reject=o.reject,o.allSettled&&(c.allSettled=o.allSettled),o.any&&(c.any=o.any))))}function Fa(){var s=a.Promise;return Qe?{Promise:s,PromiseProp:Object.getOwnPropertyDescriptor(a,"Promise"),all:s.all,race:s.race,allSettled:s.allSettled,any:s.any,resolve:s.resolve,reject:s.reject}:{}}function nr(s,o,c,u,p){var y=_e;try{return Ln(s,!0),o(c,u,p)}finally{Ln(y,!1)}}function Ba(s,o,c,u){return typeof s!="function"?s:function(){var p=_e;c&&xr(),Ln(o,!0);try{return s.apply(this,arguments)}finally{Ln(p,!1),u&&queueMicrotask(jn)}}}function Yo(s){Promise===He&&Ct.echoes===0?Rs===0?s():enqueueNativeMicroTask(s):setTimeout(s,0)}(""+tn).indexOf("[native code]")===-1&&(xr=jn=_);var gt=me.reject,rr="",Cn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Na="String expected.",kr=[],Ts="__dbnames",Go="readonly",Jo="readwrite";function sr(s,o){return s?o?function(){return s.apply(this,arguments)&&o.apply(this,arguments)}:s:o}var ja={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Ms(s){return typeof s!="string"||/\./.test(s)?function(o){return o}:function(o){return o[s]===void 0&&s in o&&delete(o=ze(o))[s],o}}function La(){throw H.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function Ke(s,o){try{var c=qa(s),u=qa(o);if(c!==u)return c==="Array"?1:u==="Array"?-1:c==="binary"?1:u==="binary"?-1:c==="string"?1:u==="string"?-1:c==="Date"?1:u!=="Date"?NaN:-1;switch(c){case"number":case"Date":case"string":return o<s?1:s<o?-1:0;case"binary":return(function(p,y){for(var b=p.length,k=y.length,E=b<k?b:k,I=0;I<E;++I)if(p[I]!==y[I])return p[I]<y[I]?-1:1;return b===k?0:b<k?-1:1})(Ka(s),Ka(o));case"Array":return(function(p,y){for(var b=p.length,k=y.length,E=b<k?b:k,I=0;I<E;++I){var R=Ke(p[I],y[I]);if(R!==0)return R}return b===k?0:b<k?-1:1})(s,o)}}catch{}return NaN}function qa(s){var o=typeof s;return o!="object"?o:ArrayBuffer.isView(s)?"binary":(s=it(s),s==="ArrayBuffer"?"binary":s)}function Ka(s){return s instanceof Uint8Array?s:ArrayBuffer.isView(s)?new Uint8Array(s.buffer,s.byteOffset,s.byteLength):new Uint8Array(s)}function Fs(s,o,c){var u=s.schema.yProps;return u?(o&&0<c.numFailures&&(o=o.filter(function(p,y){return!c.failures[y]})),Promise.all(u.map(function(p){return p=p.updatesTable,o?s.db.table(p).where("k").anyOf(o).delete():s.db.table(p).clear()})).then(function(){return c})):c}var Ua=(dt.prototype._trans=function(s,o,c){var u=this._tx||_e.trans,p=this.name,y=te&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(s==="readonly"?"read":"write"," ").concat(this.name));function b(I,R,C){if(!C.schema[p])throw new H.NotFound("Table "+p+" not part of transaction");return o(C.idbtrans,C)}var k=_r();try{var E=u&&u.db._novip===this.db._novip?u===_e.trans?u._promise(s,b,c):Nn(function(){return u._promise(s,b,c)},{trans:u,transless:_e.transless||_e}):(function I(R,C,T,S){if(R.idbdb&&(R._state.openComplete||_e.letThrough||R._vip)){var O=R._createTransaction(C,T,R._dbSchema);try{O.create(),R._state.PR1398_maxLoop=3}catch($){return $.name===J.InvalidState&&R.isOpen()&&0<--R._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),R.close({disableAutoOpen:!1}),R.open().then(function(){return I(R,C,T,S)})):gt($)}return O._promise(C,function($,D){return Nn(function(){return _e.trans=O,S($,D,O)})}).then(function($){if(C==="readwrite")try{O.idbtrans.commit()}catch{}return C==="readonly"?$:O._completion.then(function(){return $})})}if(R._state.openComplete)return gt(new H.DatabaseClosed(R._state.dbOpenError));if(!R._state.isBeingOpened){if(!R._state.autoOpen)return gt(new H.DatabaseClosed);R.open().catch(_)}return R._state.dbReadyPromise.then(function(){return I(R,C,T,S)})})(this.db,s,[this.name],b);return y&&(E._consoleTask=y,E=E.catch(function(I){return console.trace(I),gt(I)})),E}finally{k&&wr()}},dt.prototype.get=function(s,o){var c=this;return s&&s.constructor===Object?this.where(s).first(o):s==null?gt(new H.Type("Invalid argument to Table.get()")):this._trans("readonly",function(u){return c.core.get({trans:u,key:s}).then(function(p){return c.hook.reading.fire(p)})}).then(o)},dt.prototype.where=function(s){if(typeof s=="string")return new this.db.WhereClause(this,s);if(d(s))return new this.db.WhereClause(this,"[".concat(s.join("+"),"]"));var o=l(s);if(o.length===1)return this.where(o[0]).equals(s[o[0]]);var c=this.schema.indexes.concat(this.schema.primKey).filter(function(k){if(k.compound&&o.every(function(I){return 0<=k.keyPath.indexOf(I)})){for(var E=0;E<o.length;++E)if(o.indexOf(k.keyPath[E])===-1)return!1;return!0}return!1}).sort(function(k,E){return k.keyPath.length-E.keyPath.length})[0];if(c&&this.db._maxKey!==rr){var y=c.keyPath.slice(0,o.length);return this.where(y).equals(y.map(function(E){return s[E]}))}!c&&te&&console.warn("The query ".concat(JSON.stringify(s)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(o.join("+"),"]"));var u=this.schema.idxByName;function p(k,E){return Ke(k,E)===0}var b=o.reduce(function(C,E){var I=C[0],R=C[1],C=u[E],T=s[E];return[I||C,I||!C?sr(R,C&&C.multi?function(S){return S=ge(S,E),d(S)&&S.some(function(O){return p(T,O)})}:function(S){return p(T,ge(S,E))}):R]},[null,null]),y=b[0],b=b[1];return y?this.where(y.name).equals(s[y.keyPath]).filter(b):c?this.filter(b):this.where(o).equals("")},dt.prototype.filter=function(s){return this.toCollection().and(s)},dt.prototype.count=function(s){return this.toCollection().count(s)},dt.prototype.offset=function(s){return this.toCollection().offset(s)},dt.prototype.limit=function(s){return this.toCollection().limit(s)},dt.prototype.each=function(s){return this.toCollection().each(s)},dt.prototype.toArray=function(s){return this.toCollection().toArray(s)},dt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},dt.prototype.orderBy=function(s){return new this.db.Collection(new this.db.WhereClause(this,d(s)?"[".concat(s.join("+"),"]"):s))},dt.prototype.reverse=function(){return this.toCollection().reverse()},dt.prototype.mapToClass=function(s){var o,c=this.db,u=this.name;function p(){return o!==null&&o.apply(this,arguments)||this}(this.schema.mappedClass=s).prototype instanceof La&&((function(E,I){if(typeof I!="function"&&I!==null)throw new TypeError("Class extends value "+String(I)+" is not a constructor or null");function R(){this.constructor=E}n(E,I),E.prototype=I===null?Object.create(I):(R.prototype=I.prototype,new R)})(p,o=s),Object.defineProperty(p.prototype,"db",{get:function(){return c},enumerable:!1,configurable:!0}),p.prototype.table=function(){return u},s=p);for(var y=new Set,b=s.prototype;b;b=m(b))Object.getOwnPropertyNames(b).forEach(function(E){return y.add(E)});function k(E){if(!E)return E;var I,R=Object.create(s.prototype);for(I in E)if(!y.has(I))try{R[I]=E[I]}catch{}return R}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=k,this.hook("reading",k),s},dt.prototype.defineClass=function(){return this.mapToClass(function(s){f(this,s)})},dt.prototype.add=function(s,o){var c=this,u=this.schema.primKey,p=u.auto,y=u.keyPath,b=s;return y&&p&&(b=Ms(y)(s)),this._trans("readwrite",function(k){return c.core.mutate({trans:k,type:"add",keys:o!=null?[o]:null,values:[b]})}).then(function(k){return k.numFailures?me.reject(k.failures[0]):k.lastResult}).then(function(k){if(y)try{Ce(s,y,k)}catch{}return k})},dt.prototype.update=function(s,o){return typeof s!="object"||d(s)?this.where(":id").equals(s).modify(o):(s=ge(s,this.schema.primKey.keyPath),s===void 0?gt(new H.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(s).modify(o))},dt.prototype.put=function(s,o){var c=this,u=this.schema.primKey,p=u.auto,y=u.keyPath,b=s;return y&&p&&(b=Ms(y)(s)),this._trans("readwrite",function(k){return c.core.mutate({trans:k,type:"put",values:[b],keys:o!=null?[o]:null})}).then(function(k){return k.numFailures?me.reject(k.failures[0]):k.lastResult}).then(function(k){if(y)try{Ce(s,y,k)}catch{}return k})},dt.prototype.delete=function(s){var o=this;return this._trans("readwrite",function(c){return o.core.mutate({trans:c,type:"delete",keys:[s]}).then(function(u){return Fs(o,[s],u)}).then(function(u){return u.numFailures?me.reject(u.failures[0]):void 0})})},dt.prototype.clear=function(){var s=this;return this._trans("readwrite",function(o){return s.core.mutate({trans:o,type:"deleteRange",range:ja}).then(function(c){return Fs(s,null,c)})}).then(function(o){return o.numFailures?me.reject(o.failures[0]):void 0})},dt.prototype.bulkGet=function(s){var o=this;return this._trans("readonly",function(c){return o.core.getMany({keys:s,trans:c}).then(function(u){return u.map(function(p){return o.hook.reading.fire(p)})})})},dt.prototype.bulkAdd=function(s,o,c){var u=this,p=Array.isArray(o)?o:void 0,y=(c=c||(p?void 0:o))?c.allKeys:void 0;return this._trans("readwrite",function(b){var I=u.schema.primKey,k=I.auto,I=I.keyPath;if(I&&p)throw new H.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(p&&p.length!==s.length)throw new H.InvalidArgument("Arguments objects and keys must have the same length");var E=s.length,I=I&&k?s.map(Ms(I)):s;return u.core.mutate({trans:b,type:"add",keys:p,values:I,wantResults:y}).then(function(O){var C=O.numFailures,T=O.results,S=O.lastResult,O=O.failures;if(C===0)return y?T:S;throw new pt("".concat(u.name,".bulkAdd(): ").concat(C," of ").concat(E," operations failed"),O)})})},dt.prototype.bulkPut=function(s,o,c){var u=this,p=Array.isArray(o)?o:void 0,y=(c=c||(p?void 0:o))?c.allKeys:void 0;return this._trans("readwrite",function(b){var I=u.schema.primKey,k=I.auto,I=I.keyPath;if(I&&p)throw new H.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(p&&p.length!==s.length)throw new H.InvalidArgument("Arguments objects and keys must have the same length");var E=s.length,I=I&&k?s.map(Ms(I)):s;return u.core.mutate({trans:b,type:"put",keys:p,values:I,wantResults:y}).then(function(O){var C=O.numFailures,T=O.results,S=O.lastResult,O=O.failures;if(C===0)return y?T:S;throw new pt("".concat(u.name,".bulkPut(): ").concat(C," of ").concat(E," operations failed"),O)})})},dt.prototype.bulkUpdate=function(s){var o=this,c=this.core,u=s.map(function(b){return b.key}),p=s.map(function(b){return b.changes}),y=[];return this._trans("readwrite",function(b){return c.getMany({trans:b,keys:u,cache:"clone"}).then(function(k){var E=[],I=[];s.forEach(function(C,T){var S=C.key,O=C.changes,$=k[T];if($){for(var D=0,M=Object.keys(O);D<M.length;D++){var q=M[D],U=O[q];if(q===o.schema.primKey.keyPath){if(Ke(U,S)!==0)throw new H.Constraint("Cannot update primary key in bulkUpdate()")}else Ce($,q,U)}y.push(T),E.push(S),I.push($)}});var R=E.length;return c.mutate({trans:b,type:"put",keys:E,values:I,updates:{keys:u,changeSpecs:p}}).then(function(C){var T=C.numFailures,S=C.failures;if(T===0)return R;for(var O=0,$=Object.keys(S);O<$.length;O++){var D,M=$[O],q=y[Number(M)];q!=null&&(D=S[M],delete S[M],S[q]=D)}throw new pt("".concat(o.name,".bulkUpdate(): ").concat(T," of ").concat(R," operations failed"),S)})})})},dt.prototype.bulkDelete=function(s){var o=this,c=s.length;return this._trans("readwrite",function(u){return o.core.mutate({trans:u,type:"delete",keys:s}).then(function(p){return Fs(o,s,p)})}).then(function(b){var p=b.numFailures,y=b.lastResult,b=b.failures;if(p===0)return y;throw new pt("".concat(o.name,".bulkDelete(): ").concat(p," of ").concat(c," operations failed"),b)})},dt);function dt(){}function Vr(s){function o(b,k){if(k){for(var E=arguments.length,I=new Array(E-1);--E;)I[E-1]=arguments[E];return c[b].subscribe.apply(null,I),s}if(typeof b=="string")return c[b]}var c={};o.addEventType=y;for(var u=1,p=arguments.length;u<p;++u)y(arguments[u]);return o;function y(b,k,E){if(typeof b!="object"){var I;k=k||ue;var R={subscribers:[],fire:E=E||_,subscribe:function(C){R.subscribers.indexOf(C)===-1&&(R.subscribers.push(C),R.fire=k(R.fire,C))},unsubscribe:function(C){R.subscribers=R.subscribers.filter(function(T){return T!==C}),R.fire=R.subscribers.reduce(k,E)}};return c[b]=o[b]=R}l(I=b).forEach(function(C){var T=I[C];if(d(T))y(C,I[C][0],I[C][1]);else{if(T!=="asap")throw new H.InvalidArgument("Invalid event config");var S=y(C,A,function(){for(var O=arguments.length,$=new Array(O);O--;)$[O]=arguments[O];S.subscribers.forEach(function(D){se(function(){D.apply(null,$)})})})}})}}function Hr(s,o){return L(o).from({prototype:s}),o}function Cr(s,o){return!(s.filter||s.algorithm||s.or)&&(o?s.justLimit:!s.replayFilter)}function Xo(s,o){s.filter=sr(s.filter,o)}function Zo(s,o,c){var u=s.replayFilter;s.replayFilter=u?function(){return sr(u(),o())}:o,s.justLimit=c&&!u}function Bs(s,o){if(s.isPrimKey)return o.primaryKey;var c=o.getIndexByKeyPath(s.index);if(!c)throw new H.Schema("KeyPath "+s.index+" on object store "+o.name+" is not indexed");return c}function Va(s,o,c){var u=Bs(s,o.schema);return o.openCursor({trans:c,values:!s.keysOnly,reverse:s.dir==="prev",unique:!!s.unique,query:{index:u,range:s.range}})}function Ns(s,o,c,u){var p=s.replayFilter?sr(s.filter,s.replayFilter()):s.filter;if(s.or){var y={},b=function(k,E,I){var R,C;p&&!p(E,I,function(T){return E.stop(T)},function(T){return E.fail(T)})||((C=""+(R=E.primaryKey))=="[object ArrayBuffer]"&&(C=""+new Uint8Array(R)),g(y,C)||(y[C]=!0,o(k,E,I)))};return Promise.all([s.or._iterate(b,c),Ha(Va(s,u,c),s.algorithm,b,!s.keysOnly&&s.valueMapper)])}return Ha(Va(s,u,c),sr(s.algorithm,p),o,!s.keysOnly&&s.valueMapper)}function Ha(s,o,c,u){var p=ft(u?function(y,b,k){return c(u(y),b,k)}:c);return s.then(function(y){if(y)return y.start(function(){var b=function(){return y.continue()};o&&!o(y,function(k){return b=k},function(k){y.stop(k),b=_},function(k){y.fail(k),b=_})||p(y.value,y,function(k){return b=k}),b()})})}var Wr=(Wa.prototype.execute=function(s){var o=this["@@propmod"];if(o.add!==void 0){var c=o.add;if(d(c))return i(i([],d(s)?s:[],!0),c).sort();if(typeof c=="number")return(Number(s)||0)+c;if(typeof c=="bigint")try{return BigInt(s)+c}catch{return BigInt(0)+c}throw new TypeError("Invalid term ".concat(c))}if(o.remove!==void 0){var u=o.remove;if(d(u))return d(s)?s.filter(function(p){return!u.includes(p)}).sort():[];if(typeof u=="number")return Number(s)-u;if(typeof u=="bigint")try{return BigInt(s)-u}catch{return BigInt(0)-u}throw new TypeError("Invalid subtrahend ".concat(u))}return c=(c=o.replacePrefix)===null||c===void 0?void 0:c[0],c&&typeof s=="string"&&s.startsWith(c)?o.replacePrefix[1]+s.substring(c.length):s},Wa);function Wa(s){this["@@propmod"]=s}var ld=(Ge.prototype._read=function(s,o){var c=this._ctx;return c.error?c.table._trans(null,gt.bind(null,c.error)):c.table._trans("readonly",s).then(o)},Ge.prototype._write=function(s){var o=this._ctx;return o.error?o.table._trans(null,gt.bind(null,o.error)):o.table._trans("readwrite",s,"locked")},Ge.prototype._addAlgorithm=function(s){var o=this._ctx;o.algorithm=sr(o.algorithm,s)},Ge.prototype._iterate=function(s,o){return Ns(this._ctx,s,o,this._ctx.table.core)},Ge.prototype.clone=function(s){var o=Object.create(this.constructor.prototype),c=Object.create(this._ctx);return s&&f(c,s),o._ctx=c,o},Ge.prototype.raw=function(){return this._ctx.valueMapper=null,this},Ge.prototype.each=function(s){var o=this._ctx;return this._read(function(c){return Ns(o,s,c,o.table.core)})},Ge.prototype.count=function(s){var o=this;return this._read(function(c){var u=o._ctx,p=u.table.core;if(Cr(u,!0))return p.count({trans:c,query:{index:Bs(u,p.schema),range:u.range}}).then(function(b){return Math.min(b,u.limit)});var y=0;return Ns(u,function(){return++y,!1},c,p).then(function(){return y})}).then(s)},Ge.prototype.sortBy=function(s,o){var c=s.split(".").reverse(),u=c[0],p=c.length-1;function y(E,I){return I?y(E[c[I]],I-1):E[u]}var b=this._ctx.dir==="next"?1:-1;function k(E,I){return Ke(y(E,p),y(I,p))*b}return this.toArray(function(E){return E.sort(k)}).then(o)},Ge.prototype.toArray=function(s){var o=this;return this._read(function(c){var u=o._ctx;if(u.dir==="next"&&Cr(u,!0)&&0<u.limit){var p=u.valueMapper,y=Bs(u,u.table.core.schema);return u.table.core.query({trans:c,limit:u.limit,values:!0,query:{index:y,range:u.range}}).then(function(k){return k=k.result,p?k.map(p):k})}var b=[];return Ns(u,function(k){return b.push(k)},c,u.table.core).then(function(){return b})},s)},Ge.prototype.offset=function(s){var o=this._ctx;return s<=0||(o.offset+=s,Cr(o)?Zo(o,function(){var c=s;return function(u,p){return c===0||(c===1?--c:p(function(){u.advance(c),c=0}),!1)}}):Zo(o,function(){var c=s;return function(){return--c<0}})),this},Ge.prototype.limit=function(s){return this._ctx.limit=Math.min(this._ctx.limit,s),Zo(this._ctx,function(){var o=s;return function(c,u,p){return--o<=0&&u(p),0<=o}},!0),this},Ge.prototype.until=function(s,o){return Xo(this._ctx,function(c,u,p){return!s(c.value)||(u(p),o)}),this},Ge.prototype.first=function(s){return this.limit(1).toArray(function(o){return o[0]}).then(s)},Ge.prototype.last=function(s){return this.reverse().first(s)},Ge.prototype.filter=function(s){var o;return Xo(this._ctx,function(c){return s(c.value)}),(o=this._ctx).isMatch=sr(o.isMatch,s),this},Ge.prototype.and=function(s){return this.filter(s)},Ge.prototype.or=function(s){return new this.db.WhereClause(this._ctx.table,s,this)},Ge.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Ge.prototype.desc=function(){return this.reverse()},Ge.prototype.eachKey=function(s){var o=this._ctx;return o.keysOnly=!o.isMatch,this.each(function(c,u){s(u.key,u)})},Ge.prototype.eachUniqueKey=function(s){return this._ctx.unique="unique",this.eachKey(s)},Ge.prototype.eachPrimaryKey=function(s){var o=this._ctx;return o.keysOnly=!o.isMatch,this.each(function(c,u){s(u.primaryKey,u)})},Ge.prototype.keys=function(s){var o=this._ctx;o.keysOnly=!o.isMatch;var c=[];return this.each(function(u,p){c.push(p.key)}).then(function(){return c}).then(s)},Ge.prototype.primaryKeys=function(s){var o=this._ctx;if(o.dir==="next"&&Cr(o,!0)&&0<o.limit)return this._read(function(u){var p=Bs(o,o.table.core.schema);return o.table.core.query({trans:u,values:!1,limit:o.limit,query:{index:p,range:o.range}})}).then(function(u){return u.result}).then(s);o.keysOnly=!o.isMatch;var c=[];return this.each(function(u,p){c.push(p.primaryKey)}).then(function(){return c}).then(s)},Ge.prototype.uniqueKeys=function(s){return this._ctx.unique="unique",this.keys(s)},Ge.prototype.firstKey=function(s){return this.limit(1).keys(function(o){return o[0]}).then(s)},Ge.prototype.lastKey=function(s){return this.reverse().firstKey(s)},Ge.prototype.distinct=function(){var s=this._ctx,s=s.index&&s.table.schema.idxByName[s.index];if(!s||!s.multi)return this;var o={};return Xo(this._ctx,function(p){var u=p.primaryKey.toString(),p=g(o,u);return o[u]=!0,!p}),this},Ge.prototype.modify=function(s){var o=this,c=this._ctx;return this._write(function(u){var p,y,b;b=typeof s=="function"?s:(p=l(s),y=p.length,function(M){for(var q=!1,U=0;U<y;++U){var W=p[U],re=s[W],le=ge(M,W);re instanceof Wr?(Ce(M,W,re.execute(le)),q=!0):le!==re&&(Ce(M,W,re),q=!0)}return q});var k=c.table.core,C=k.schema.primaryKey,E=C.outbound,I=C.extractKey,R=200,C=o.db._options.modifyChunkSize;C&&(R=typeof C=="object"?C[k.name]||C["*"]||200:C);function T(M,W){var U=W.failures,W=W.numFailures;O+=M-W;for(var re=0,le=l(U);re<le.length;re++){var oe=le[re];S.push(U[oe])}}var S=[],O=0,$=[],D=s===za;return o.clone().primaryKeys().then(function(M){function q(W){var re=Math.min(R,M.length-W),le=M.slice(W,W+re);return(D?Promise.resolve([]):k.getMany({trans:u,keys:le,cache:"immutable"})).then(function(oe){var ae=[],he=[],de=E?[]:null,ye=D?le:[];if(!D)for(var Le=0;Le<re;++Le){var We=oe[Le],Be={value:ze(We),primKey:M[W+Le]};b.call(Be,Be.value,Be)!==!1&&(Be.value==null?ye.push(M[W+Le]):E||Ke(I(We),I(Be.value))===0?(he.push(Be.value),E&&de.push(M[W+Le])):(ye.push(M[W+Le]),ae.push(Be.value)))}return Promise.resolve(0<ae.length&&k.mutate({trans:u,type:"add",values:ae}).then(function(mt){for(var Fe in mt.failures)ye.splice(parseInt(Fe),1);T(ae.length,mt)})).then(function(){return(0<he.length||U&&typeof s=="object")&&k.mutate({trans:u,type:"put",keys:de,values:he,criteria:U,changeSpec:typeof s!="function"&&s,isAdditionalChunk:0<W}).then(function(mt){return T(he.length,mt)})}).then(function(){return(0<ye.length||U&&D)&&k.mutate({trans:u,type:"delete",keys:ye,criteria:U,isAdditionalChunk:0<W}).then(function(mt){return Fs(c.table,ye,mt)}).then(function(mt){return T(ye.length,mt)})}).then(function(){return M.length>W+re&&q(W+R)})})}var U=Cr(c)&&c.limit===1/0&&(typeof s!="function"||D)&&{index:c.index,range:c.range};return q(0).then(function(){if(0<S.length)throw new Nt("Error modifying one or more objects",S,O,$);return M.length})})})},Ge.prototype.delete=function(){var s=this._ctx,o=s.range;return!Cr(s)||s.table.schema.yProps||!s.isPrimKey&&o.type!==3?this.modify(za):this._write(function(c){var u=s.table.core.schema.primaryKey,p=o;return s.table.core.count({trans:c,query:{index:u,range:p}}).then(function(y){return s.table.core.mutate({trans:c,type:"deleteRange",range:p}).then(function(E){var k=E.failures,E=E.numFailures;if(E)throw new Nt("Could not delete some values",Object.keys(k).map(function(I){return k[I]}),y-E);return y-E})})})},Ge);function Ge(){}var za=function(s,o){return o.value=null};function ud(s,o){return s<o?-1:s===o?0:1}function dd(s,o){return o<s?-1:s===o?0:1}function Yt(s,o,c){return s=s instanceof Ya?new s.Collection(s):s,s._ctx.error=new(c||TypeError)(o),s}function Ar(s){return new s.Collection(s,function(){return Qa("")}).limit(0)}function js(s,o,c,u){var p,y,b,k,E,I,R,C=c.length;if(!c.every(function(O){return typeof O=="string"}))return Yt(s,Na);function T(O){p=O==="next"?function(D){return D.toUpperCase()}:function(D){return D.toLowerCase()},y=O==="next"?function(D){return D.toLowerCase()}:function(D){return D.toUpperCase()},b=O==="next"?ud:dd;var $=c.map(function(D){return{lower:y(D),upper:p(D)}}).sort(function(D,M){return b(D.lower,M.lower)});k=$.map(function(D){return D.upper}),E=$.map(function(D){return D.lower}),R=(I=O)==="next"?"":u}T("next"),s=new s.Collection(s,function(){return qn(k[0],E[C-1]+u)}),s._ondirectionchange=function(O){T(O)};var S=0;return s._addAlgorithm(function(O,$,D){var M=O.key;if(typeof M!="string")return!1;var q=y(M);if(o(q,E,S))return!0;for(var U=null,W=S;W<C;++W){var re=(function(le,oe,ae,he,de,ye){for(var Le=Math.min(le.length,he.length),We=-1,Be=0;Be<Le;++Be){var mt=oe[Be];if(mt!==he[Be])return de(le[Be],ae[Be])<0?le.substr(0,Be)+ae[Be]+ae.substr(Be+1):de(le[Be],he[Be])<0?le.substr(0,Be)+he[Be]+ae.substr(Be+1):0<=We?le.substr(0,We)+oe[We]+ae.substr(We+1):null;de(le[Be],mt)<0&&(We=Be)}return Le<he.length&&ye==="next"?le+ae.substr(le.length):Le<le.length&&ye==="prev"?le.substr(0,ae.length):We<0?null:le.substr(0,We)+he[We]+ae.substr(We+1)})(M,q,k[W],E[W],b,I);re===null&&U===null?S=W+1:(U===null||0<b(U,re))&&(U=re)}return $(U!==null?function(){O.continue(U+R)}:D),!1}),s}function qn(s,o,c,u){return{type:2,lower:s,upper:o,lowerOpen:c,upperOpen:u}}function Qa(s){return{type:1,lower:s,upper:s}}var Ya=(Object.defineProperty(At.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),At.prototype.between=function(s,o,c,u){c=c!==!1,u=u===!0;try{return 0<this._cmp(s,o)||this._cmp(s,o)===0&&(c||u)&&(!c||!u)?Ar(this):new this.Collection(this,function(){return qn(s,o,!c,!u)})}catch{return Yt(this,Cn)}},At.prototype.equals=function(s){return s==null?Yt(this,Cn):new this.Collection(this,function(){return Qa(s)})},At.prototype.above=function(s){return s==null?Yt(this,Cn):new this.Collection(this,function(){return qn(s,void 0,!0)})},At.prototype.aboveOrEqual=function(s){return s==null?Yt(this,Cn):new this.Collection(this,function(){return qn(s,void 0,!1)})},At.prototype.below=function(s){return s==null?Yt(this,Cn):new this.Collection(this,function(){return qn(void 0,s,!1,!0)})},At.prototype.belowOrEqual=function(s){return s==null?Yt(this,Cn):new this.Collection(this,function(){return qn(void 0,s)})},At.prototype.startsWith=function(s){return typeof s!="string"?Yt(this,Na):this.between(s,s+rr,!0,!0)},At.prototype.startsWithIgnoreCase=function(s){return s===""?this.startsWith(s):js(this,function(o,c){return o.indexOf(c[0])===0},[s],rr)},At.prototype.equalsIgnoreCase=function(s){return js(this,function(o,c){return o===c[0]},[s],"")},At.prototype.anyOfIgnoreCase=function(){var s=N.apply(V,arguments);return s.length===0?Ar(this):js(this,function(o,c){return c.indexOf(o)!==-1},s,"")},At.prototype.startsWithAnyOfIgnoreCase=function(){var s=N.apply(V,arguments);return s.length===0?Ar(this):js(this,function(o,c){return c.some(function(u){return o.indexOf(u)===0})},s,rr)},At.prototype.anyOf=function(){var s=this,o=N.apply(V,arguments),c=this._cmp;try{o.sort(c)}catch{return Yt(this,Cn)}if(o.length===0)return Ar(this);var u=new this.Collection(this,function(){return qn(o[0],o[o.length-1])});u._ondirectionchange=function(y){c=y==="next"?s._ascending:s._descending,o.sort(c)};var p=0;return u._addAlgorithm(function(y,b,k){for(var E=y.key;0<c(E,o[p]);)if(++p===o.length)return b(k),!1;return c(E,o[p])===0||(b(function(){y.continue(o[p])}),!1)}),u},At.prototype.notEqual=function(s){return this.inAnyRange([[-1/0,s],[s,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},At.prototype.noneOf=function(){var s=N.apply(V,arguments);if(s.length===0)return new this.Collection(this);try{s.sort(this._ascending)}catch{return Yt(this,Cn)}var o=s.reduce(function(c,u){return c?c.concat([[c[c.length-1][1],u]]):[[-1/0,u]]},null);return o.push([s[s.length-1],this.db._maxKey]),this.inAnyRange(o,{includeLowers:!1,includeUppers:!1})},At.prototype.inAnyRange=function(M,o){var c=this,u=this._cmp,p=this._ascending,y=this._descending,b=this._min,k=this._max;if(M.length===0)return Ar(this);if(!M.every(function(q){return q[0]!==void 0&&q[1]!==void 0&&p(q[0],q[1])<=0}))return Yt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",H.InvalidArgument);var E=!o||o.includeLowers!==!1,I=o&&o.includeUppers===!0,R,C=p;function T(q,U){return C(q[0],U[0])}try{(R=M.reduce(function(q,U){for(var W=0,re=q.length;W<re;++W){var le=q[W];if(u(U[0],le[1])<0&&0<u(U[1],le[0])){le[0]=b(le[0],U[0]),le[1]=k(le[1],U[1]);break}}return W===re&&q.push(U),q},[])).sort(T)}catch{return Yt(this,Cn)}var S=0,O=I?function(q){return 0<p(q,R[S][1])}:function(q){return 0<=p(q,R[S][1])},$=E?function(q){return 0<y(q,R[S][0])}:function(q){return 0<=y(q,R[S][0])},D=O,M=new this.Collection(this,function(){return qn(R[0][0],R[R.length-1][1],!E,!I)});return M._ondirectionchange=function(q){C=q==="next"?(D=O,p):(D=$,y),R.sort(T)},M._addAlgorithm(function(q,U,W){for(var re,le=q.key;D(le);)if(++S===R.length)return U(W),!1;return!O(re=le)&&!$(re)||(c._cmp(le,R[S][1])===0||c._cmp(le,R[S][0])===0||U(function(){C===p?q.continue(R[S][0]):q.continue(R[S][1])}),!1)}),M},At.prototype.startsWithAnyOf=function(){var s=N.apply(V,arguments);return s.every(function(o){return typeof o=="string"})?s.length===0?Ar(this):this.inAnyRange(s.map(function(o){return[o,o+rr]})):Yt(this,"startsWithAnyOf() only works with strings")},At);function At(){}function dn(s){return ft(function(o){return zr(o),s(o.target.error),!1})}function zr(s){s.stopPropagation&&s.stopPropagation(),s.preventDefault&&s.preventDefault()}var Qr="storagemutated",ei="x-storagemutated-1",Kn=Vr(null,Qr),fd=(fn.prototype._lock=function(){return F(!_e.global),++this._reculock,this._reculock!==1||_e.global||(_e.lockOwnerFor=this),this},fn.prototype._unlock=function(){if(F(!_e.global),--this._reculock==0)for(_e.global||(_e.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var s=this._blockedFuncs.shift();try{nr(s[1],s[0])}catch{}}return this},fn.prototype._locked=function(){return this._reculock&&_e.lockOwnerFor!==this},fn.prototype.create=function(s){var o=this;if(!this.mode)return this;var c=this.db.idbdb,u=this.db._state.dbOpenError;if(F(!this.idbtrans),!s&&!c)switch(u&&u.name){case"DatabaseClosedError":throw new H.DatabaseClosed(u);case"MissingAPIError":throw new H.MissingAPI(u.message,u);default:throw new H.OpenFailed(u)}if(!this.active)throw new H.TransactionInactive;return F(this._completion._state===null),(s=this.idbtrans=s||(this.db.core||c).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=ft(function(p){zr(p),o._reject(s.error)}),s.onabort=ft(function(p){zr(p),o.active&&o._reject(new H.Abort(s.error)),o.active=!1,o.on("abort").fire(p)}),s.oncomplete=ft(function(){o.active=!1,o._resolve(),"mutatedParts"in s&&Kn.storagemutated.fire(s.mutatedParts)}),this},fn.prototype._promise=function(s,o,c){var u=this;if(s==="readwrite"&&this.mode!=="readwrite")return gt(new H.ReadOnly("Transaction is readonly"));if(!this.active)return gt(new H.TransactionInactive);if(this._locked())return new me(function(y,b){u._blockedFuncs.push([function(){u._promise(s,o,c).then(y,b)},_e])});if(c)return Nn(function(){var y=new me(function(b,k){u._lock();var E=o(b,k,u);E&&E.then&&E.then(b,k)});return y.finally(function(){return u._unlock()}),y._lib=!0,y});var p=new me(function(y,b){var k=o(y,b,u);k&&k.then&&k.then(y,b)});return p._lib=!0,p},fn.prototype._root=function(){return this.parent?this.parent._root():this},fn.prototype.waitFor=function(s){var o,c=this._root(),u=me.resolve(s);c._waitingFor?c._waitingFor=c._waitingFor.then(function(){return u}):(c._waitingFor=u,c._waitingQueue=[],o=c.idbtrans.objectStore(c.storeNames[0]),(function y(){for(++c._spinCount;c._waitingQueue.length;)c._waitingQueue.shift()();c._waitingFor&&(o.get(-1/0).onsuccess=y)})());var p=c._waitingFor;return new me(function(y,b){u.then(function(k){return c._waitingQueue.push(ft(y.bind(null,k)))},function(k){return c._waitingQueue.push(ft(b.bind(null,k)))}).finally(function(){c._waitingFor===p&&(c._waitingFor=null)})})},fn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new H.Abort))},fn.prototype.table=function(s){var o=this._memoizedTables||(this._memoizedTables={});if(g(o,s))return o[s];var c=this.schema[s];if(!c)throw new H.NotFound("Table "+s+" not part of transaction");return c=new this.db.Table(s,c,this),c.core=this.db.core.table(s),o[s]=c},fn);function fn(){}function ti(s,o,c,u,p,y,b,k){return{name:s,keyPath:o,unique:c,multi:u,auto:p,compound:y,src:(c&&!b?"&":"")+(u?"*":"")+(p?"++":"")+Ga(o),type:k}}function Ga(s){return typeof s=="string"?s:s?"["+[].join.call(s,"+")+"]":""}function ni(s,o,c){return{name:s,primKey:o,indexes:c,mappedClass:null,idxByName:(u=function(p){return[p.name,p]},c.reduce(function(p,y,b){return b=u(y,b),b&&(p[b[0]]=b[1]),p},{}))};var u}var Yr=function(s){try{return s.only([[]]),Yr=function(){return[[]]},[[]]}catch{return Yr=function(){return rr},rr}};function ri(s){return s==null?function(){}:typeof s=="string"?(o=s).split(".").length===1?function(c){return c[o]}:function(c){return ge(c,o)}:function(c){return ge(c,s)};var o}function Ja(s){return[].slice.call(s)}var pd=0;function Gr(s){return s==null?":id":typeof s=="string"?s:"[".concat(s.join("+"),"]")}function hd(s,o,E){function u(D){if(D.type===3)return null;if(D.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var S=D.lower,O=D.upper,$=D.lowerOpen,D=D.upperOpen;return S===void 0?O===void 0?null:o.upperBound(O,!!D):O===void 0?o.lowerBound(S,!!$):o.bound(S,O,!!$,!!D)}function p(T){var S,O=T.name;return{name:O,schema:T,mutate:function($){var D=$.trans,M=$.type,q=$.keys,U=$.values,W=$.range;return new Promise(function(re,le){re=ft(re);var oe=D.objectStore(O),ae=oe.keyPath==null,he=M==="put"||M==="add";if(!he&&M!=="delete"&&M!=="deleteRange")throw new Error("Invalid operation type: "+M);var de,ye=(q||U||{length:1}).length;if(q&&U&&q.length!==U.length)throw new Error("Given keys array must have same length as given values array.");if(ye===0)return re({numFailures:0,failures:{},results:[],lastResult:void 0});function Le(Lt){++mt,zr(Lt)}var We=[],Be=[],mt=0;if(M==="deleteRange"){if(W.type===4)return re({numFailures:mt,failures:Be,results:[],lastResult:void 0});W.type===3?We.push(de=oe.clear()):We.push(de=oe.delete(u(W)))}else{var ae=he?ae?[U,q]:[U,null]:[q,null],Fe=ae[0],Dt=ae[1];if(he)for(var $t=0;$t<ye;++$t)We.push(de=Dt&&Dt[$t]!==void 0?oe[M](Fe[$t],Dt[$t]):oe[M](Fe[$t])),de.onerror=Le;else for($t=0;$t<ye;++$t)We.push(de=oe[M](Fe[$t])),de.onerror=Le}function Js(Lt){Lt=Lt.target.result,We.forEach(function(ar,wi){return ar.error!=null&&(Be[wi]=ar.error)}),re({numFailures:mt,failures:Be,results:M==="delete"?q:We.map(function(ar){return ar.result}),lastResult:Lt})}de.onerror=function(Lt){Le(Lt),Js(Lt)},de.onsuccess=Js})},getMany:function($){var D=$.trans,M=$.keys;return new Promise(function(q,U){q=ft(q);for(var W,re=D.objectStore(O),le=M.length,oe=new Array(le),ae=0,he=0,de=function(We){We=We.target,oe[We._pos]=We.result,++he===ae&&q(oe)},ye=dn(U),Le=0;Le<le;++Le)M[Le]!=null&&((W=re.get(M[Le]))._pos=Le,W.onsuccess=de,W.onerror=ye,++ae);ae===0&&q(oe)})},get:function($){var D=$.trans,M=$.key;return new Promise(function(q,U){q=ft(q);var W=D.objectStore(O).get(M);W.onsuccess=function(re){return q(re.target.result)},W.onerror=dn(U)})},query:(S=I,function($){return new Promise(function(D,M){D=ft(D);var q,U,W,ae=$.trans,re=$.values,le=$.limit,de=$.query,oe=le===1/0?void 0:le,he=de.index,de=de.range,ae=ae.objectStore(O),he=he.isPrimaryKey?ae:ae.index(he.name),de=u(de);if(le===0)return D({result:[]});S?((oe=re?he.getAll(de,oe):he.getAllKeys(de,oe)).onsuccess=function(ye){return D({result:ye.target.result})},oe.onerror=dn(M)):(q=0,U=!re&&"openKeyCursor"in he?he.openKeyCursor(de):he.openCursor(de),W=[],U.onsuccess=function(ye){var Le=U.result;return Le?(W.push(re?Le.value:Le.primaryKey),++q===le?D({result:W}):void Le.continue()):D({result:W})},U.onerror=dn(M))})}),openCursor:function($){var D=$.trans,M=$.values,q=$.query,U=$.reverse,W=$.unique;return new Promise(function(re,le){re=ft(re);var he=q.index,oe=q.range,ae=D.objectStore(O),ae=he.isPrimaryKey?ae:ae.index(he.name),he=U?W?"prevunique":"prev":W?"nextunique":"next",de=!M&&"openKeyCursor"in ae?ae.openKeyCursor(u(oe),he):ae.openCursor(u(oe),he);de.onerror=dn(le),de.onsuccess=ft(function(ye){var Le,We,Be,mt,Fe=de.result;Fe?(Fe.___id=++pd,Fe.done=!1,Le=Fe.continue.bind(Fe),We=(We=Fe.continuePrimaryKey)&&We.bind(Fe),Be=Fe.advance.bind(Fe),mt=function(){throw new Error("Cursor not stopped")},Fe.trans=D,Fe.stop=Fe.continue=Fe.continuePrimaryKey=Fe.advance=function(){throw new Error("Cursor not started")},Fe.fail=ft(le),Fe.next=function(){var Dt=this,$t=1;return this.start(function(){return $t--?Dt.continue():Dt.stop()}).then(function(){return Dt})},Fe.start=function(Dt){function $t(){if(de.result)try{Dt()}catch(Lt){Fe.fail(Lt)}else Fe.done=!0,Fe.start=function(){throw new Error("Cursor behind last entry")},Fe.stop()}var Js=new Promise(function(Lt,ar){Lt=ft(Lt),de.onerror=dn(ar),Fe.fail=ar,Fe.stop=function(wi){Fe.stop=Fe.continue=Fe.continuePrimaryKey=Fe.advance=mt,Lt(wi)}});return de.onsuccess=ft(function(Lt){de.onsuccess=$t,$t()}),Fe.continue=Le,Fe.continuePrimaryKey=We,Fe.advance=Be,$t(),Js},re(Fe)):re(null)},le)})},count:function($){var D=$.query,M=$.trans,q=D.index,U=D.range;return new Promise(function(W,re){var le=M.objectStore(O),oe=q.isPrimaryKey?le:le.index(q.name),le=u(U),oe=le?oe.count(le):oe.count();oe.onsuccess=ft(function(ae){return W(ae.target.result)}),oe.onerror=dn(re)})}}}var y,b,k,R=(b=E,k=Ja((y=s).objectStoreNames),{schema:{name:y.name,tables:k.map(function(T){return b.objectStore(T)}).map(function(T){var S=T.keyPath,D=T.autoIncrement,O=d(S),$={},D={name:T.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:S==null,compound:O,keyPath:S,autoIncrement:D,unique:!0,extractKey:ri(S)},indexes:Ja(T.indexNames).map(function(M){return T.index(M)}).map(function(W){var q=W.name,U=W.unique,re=W.multiEntry,W=W.keyPath,re={name:q,compound:d(W),keyPath:W,unique:U,multiEntry:re,extractKey:ri(W)};return $[Gr(W)]=re}),getIndexByKeyPath:function(M){return $[Gr(M)]}};return $[":id"]=D.primaryKey,S!=null&&($[Gr(S)]=D.primaryKey),D})},hasGetAll:0<k.length&&"getAll"in b.objectStore(k[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),E=R.schema,I=R.hasGetAll,R=E.tables.map(p),C={};return R.forEach(function(T){return C[T.name]=T}),{stack:"dbcore",transaction:s.transaction.bind(s),table:function(T){if(!C[T])throw new Error("Table '".concat(T,"' not found"));return C[T]},MIN_KEY:-1/0,MAX_KEY:Yr(o),schema:E}}function md(s,o,c,u){var p=c.IDBKeyRange;return c.indexedDB,{dbcore:(u=hd(o,p,u),s.dbcore.reduce(function(y,b){return b=b.create,r(r({},y),b(y))},u))}}function Ls(s,u){var c=u.db,u=md(s._middlewares,c,s._deps,u);s.core=u.dbcore,s.tables.forEach(function(p){var y=p.name;s.core.schema.tables.some(function(b){return b.name===y})&&(p.core=s.core.table(y),s[y]instanceof s.Table&&(s[y].core=p.core))})}function qs(s,o,c,u){c.forEach(function(p){var y=u[p];o.forEach(function(b){var k=(function E(I,R){return Q(I,R)||(I=m(I))&&E(I,R)})(b,p);(!k||"value"in k&&k.value===void 0)&&(b===s.Transaction.prototype||b instanceof s.Transaction?P(b,p,{get:function(){return this.table(p)},set:function(E){x(this,p,{value:E,writable:!0,configurable:!0,enumerable:!0})}}):b[p]=new s.Table(p,y))})})}function si(s,o){o.forEach(function(c){for(var u in c)c[u]instanceof s.Table&&delete c[u]})}function yd(s,o){return s._cfg.version-o._cfg.version}function gd(s,o,c,u){var p=s._dbSchema;c.objectStoreNames.contains("$meta")&&!p.$meta&&(p.$meta=ni("$meta",Za("")[0],[]),s._storeNames.push("$meta"));var y=s._createTransaction("readwrite",s._storeNames,p);y.create(c),y._completion.catch(u);var b=y._reject.bind(y),k=_e.transless||_e;Nn(function(){return _e.trans=y,_e.transless=k,o!==0?(Ls(s,c),I=o,((E=y).storeNames.includes("$meta")?E.table("$meta").get("version").then(function(R){return R??I}):me.resolve(I)).then(function(R){return T=R,S=y,O=c,$=[],R=(C=s)._versions,D=C._dbSchema=Us(0,C.idbdb,O),(R=R.filter(function(M){return M._cfg.version>=T})).length!==0?(R.forEach(function(M){$.push(function(){var q=D,U=M._cfg.dbschema;Vs(C,q,O),Vs(C,U,O),D=C._dbSchema=U;var W=oi(q,U);W.add.forEach(function(he){ii(O,he[0],he[1].primKey,he[1].indexes)}),W.change.forEach(function(he){if(he.recreate)throw new H.Upgrade("Not yet support for changing primary key");var de=O.objectStore(he.name);he.add.forEach(function(ye){return Ks(de,ye)}),he.change.forEach(function(ye){de.deleteIndex(ye.name),Ks(de,ye)}),he.del.forEach(function(ye){return de.deleteIndex(ye)})});var re=M._cfg.contentUpgrade;if(re&&M._cfg.version>T){Ls(C,O),S._memoizedTables={};var le=Se(U);W.del.forEach(function(he){le[he]=q[he]}),si(C,[C.Transaction.prototype]),qs(C,[C.Transaction.prototype],l(le),le),S.schema=le;var oe,ae=Ie(re);return ae&&xr(),W=me.follow(function(){var he;(oe=re(S))&&ae&&(he=jn.bind(null,null),oe.then(he,he))}),oe&&typeof oe.then=="function"?me.resolve(oe):W.then(function(){return oe})}}),$.push(function(q){var U,W,re=M._cfg.dbschema;U=re,W=q,[].slice.call(W.db.objectStoreNames).forEach(function(le){return U[le]==null&&W.db.deleteObjectStore(le)}),si(C,[C.Transaction.prototype]),qs(C,[C.Transaction.prototype],C._storeNames,C._dbSchema),S.schema=C._dbSchema}),$.push(function(q){C.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(C.idbdb.version/10)===M._cfg.version?(C.idbdb.deleteObjectStore("$meta"),delete C._dbSchema.$meta,C._storeNames=C._storeNames.filter(function(U){return U!=="$meta"})):q.objectStore("$meta").put(M._cfg.version,"version"))})}),(function M(){return $.length?me.resolve($.shift()(S.idbtrans)).then(M):me.resolve()})().then(function(){Xa(D,O)})):me.resolve();var C,T,S,O,$,D}).catch(b)):(l(p).forEach(function(R){ii(c,R,p[R].primKey,p[R].indexes)}),Ls(s,c),void me.follow(function(){return s.on.populate.fire(y)}).catch(b));var E,I})}function vd(s,o){Xa(s._dbSchema,o),o.db.version%10!=0||o.objectStoreNames.contains("$meta")||o.db.createObjectStore("$meta").add(Math.ceil(o.db.version/10-1),"version");var c=Us(0,s.idbdb,o);Vs(s,s._dbSchema,o);for(var u=0,p=oi(c,s._dbSchema).change;u<p.length;u++){var y=(function(b){if(b.change.length||b.recreate)return console.warn("Unable to patch indexes of table ".concat(b.name," because it has changes on the type of index or primary key.")),{value:void 0};var k=o.objectStore(b.name);b.add.forEach(function(E){te&&console.debug("Dexie upgrade patch: Creating missing index ".concat(b.name,".").concat(E.src)),Ks(k,E)})})(p[u]);if(typeof y=="object")return y.value}}function oi(s,o){var c,u={del:[],add:[],change:[]};for(c in s)o[c]||u.del.push(c);for(c in o){var p=s[c],y=o[c];if(p){var b={name:c,def:y,recreate:!1,del:[],add:[],change:[]};if(""+(p.primKey.keyPath||"")!=""+(y.primKey.keyPath||"")||p.primKey.auto!==y.primKey.auto)b.recreate=!0,u.change.push(b);else{var k=p.idxByName,E=y.idxByName,I=void 0;for(I in k)E[I]||b.del.push(I);for(I in E){var R=k[I],C=E[I];R?R.src!==C.src&&b.change.push(C):b.add.push(C)}(0<b.del.length||0<b.add.length||0<b.change.length)&&u.change.push(b)}}else u.add.push([c,y])}return u}function ii(s,o,c,u){var p=s.db.createObjectStore(o,c.keyPath?{keyPath:c.keyPath,autoIncrement:c.auto}:{autoIncrement:c.auto});return u.forEach(function(y){return Ks(p,y)}),p}function Xa(s,o){l(s).forEach(function(c){o.db.objectStoreNames.contains(c)||(te&&console.debug("Dexie: Creating missing table",c),ii(o,c,s[c].primKey,s[c].indexes))})}function Ks(s,o){s.createIndex(o.name,o.keyPath,{unique:o.unique,multiEntry:o.multi})}function Us(s,o,c){var u={};return ne(o.objectStoreNames,0).forEach(function(p){for(var y=c.objectStore(p),b=ti(Ga(I=y.keyPath),I||"",!0,!1,!!y.autoIncrement,I&&typeof I!="string",!0),k=[],E=0;E<y.indexNames.length;++E){var R=y.index(y.indexNames[E]),I=R.keyPath,R=ti(R.name,I,!!R.unique,!!R.multiEntry,!1,I&&typeof I!="string",!1);k.push(R)}u[p]=ni(p,b,k)}),u}function Vs(s,o,c){for(var u=c.db.objectStoreNames,p=0;p<u.length;++p){var y=u[p],b=c.objectStore(y);s._hasGetAll="getAll"in b;for(var k=0;k<b.indexNames.length;++k){var E=b.indexNames[k],I=b.index(E).keyPath,R=typeof I=="string"?I:"["+ne(I).join("+")+"]";!o[y]||(I=o[y].idxByName[R])&&(I.name=E,delete o[y].idxByName[R],o[y].idxByName[E]=I)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&a.WorkerGlobalScope&&a instanceof a.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(s._hasGetAll=!1)}function Za(s){return s.split(",").map(function(o,c){var y=o.split(":"),u=(p=y[1])===null||p===void 0?void 0:p.trim(),p=(o=y[0].trim()).replace(/([&*]|\+\+)/g,""),y=/^\[/.test(p)?p.match(/^\[(.*)\]$/)[1].split("+"):p;return ti(p,y||null,/\&/.test(o),/\*/.test(o),/\+\+/.test(o),d(y),c===0,u)})}var bd=(Er.prototype._createTableSchema=ni,Er.prototype._parseIndexSyntax=Za,Er.prototype._parseStoresSpec=function(s,o){var c=this;l(s).forEach(function(u){if(s[u]!==null){var p=c._parseIndexSyntax(s[u]),y=p.shift();if(!y)throw new H.Schema("Invalid schema for table "+u+": "+s[u]);if(y.unique=!0,y.multi)throw new H.Schema("Primary key cannot be multiEntry*");p.forEach(function(b){if(b.auto)throw new H.Schema("Only primary key can be marked as autoIncrement (++)");if(!b.keyPath)throw new H.Schema("Index must have a name and cannot be an empty string")}),p=c._createTableSchema(u,y,p),o[u]=p}})},Er.prototype.stores=function(c){var o=this.db;this._cfg.storesSource=this._cfg.storesSource?f(this._cfg.storesSource,c):c;var c=o._versions,u={},p={};return c.forEach(function(y){f(u,y._cfg.storesSource),p=y._cfg.dbschema={},y._parseStoresSpec(u,p)}),o._dbSchema=p,si(o,[o._allTables,o,o.Transaction.prototype]),qs(o,[o._allTables,o,o.Transaction.prototype,this._cfg.tables],l(p),p),o._storeNames=l(p),this},Er.prototype.upgrade=function(s){return this._cfg.contentUpgrade=ce(this._cfg.contentUpgrade||_,s),this},Er);function Er(){}function ai(s,o){var c=s._dbNamesDB;return c||(c=s._dbNamesDB=new An(Ts,{addons:[],indexedDB:s,IDBKeyRange:o})).version(1).stores({dbnames:"name"}),c.table("dbnames")}function ci(s){return s&&typeof s.databases=="function"}function li(s){return Nn(function(){return _e.letThrough=!0,s()})}function ui(s){return!("from"in s)}var Rt=function(s,o){if(!this){var c=new Rt;return s&&"d"in s&&f(c,s),c}f(this,arguments.length?{d:1,from:s,to:1<arguments.length?o:s}:{d:0})};function Jr(s,o,c){var u=Ke(o,c);if(!isNaN(u)){if(0<u)throw RangeError();if(ui(s))return f(s,{from:o,to:c,d:1});var p=s.l,u=s.r;if(Ke(c,s.from)<0)return p?Jr(p,o,c):s.l={from:o,to:c,d:1,l:null,r:null},tc(s);if(0<Ke(o,s.to))return u?Jr(u,o,c):s.r={from:o,to:c,d:1,l:null,r:null},tc(s);Ke(o,s.from)<0&&(s.from=o,s.l=null,s.d=u?u.d+1:1),0<Ke(c,s.to)&&(s.to=c,s.r=null,s.d=s.l?s.l.d+1:1),c=!s.r,p&&!s.l&&Xr(s,p),u&&c&&Xr(s,u)}}function Xr(s,o){ui(o)||(function c(u,E){var y=E.from,b=E.to,k=E.l,E=E.r;Jr(u,y,b),k&&c(u,k),E&&c(u,E)})(s,o)}function ec(s,o){var c=Hs(o),u=c.next();if(u.done)return!1;for(var p=u.value,y=Hs(s),b=y.next(p.from),k=b.value;!u.done&&!b.done;){if(Ke(k.from,p.to)<=0&&0<=Ke(k.to,p.from))return!0;Ke(p.from,k.from)<0?p=(u=c.next(k.from)).value:k=(b=y.next(p.from)).value}return!1}function Hs(s){var o=ui(s)?null:{s:0,n:s};return{next:function(c){for(var u=0<arguments.length;o;)switch(o.s){case 0:if(o.s=1,u)for(;o.n.l&&Ke(c,o.n.from)<0;)o={up:o,n:o.n.l,s:1};else for(;o.n.l;)o={up:o,n:o.n.l,s:1};case 1:if(o.s=2,!u||Ke(c,o.n.to)<=0)return{value:o.n,done:!1};case 2:if(o.n.r){o.s=3,o={up:o,n:o.n.r,s:0};continue}case 3:o=o.up}return{done:!0}}}}function tc(s){var o,c,u=(((o=s.r)===null||o===void 0?void 0:o.d)||0)-(((c=s.l)===null||c===void 0?void 0:c.d)||0),p=1<u?"r":u<-1?"l":"";p&&(o=p=="r"?"l":"r",c=r({},s),u=s[p],s.from=u.from,s.to=u.to,s[p]=u[p],c[p]=u[o],(s[o]=c).d=nc(c)),s.d=nc(s)}function nc(c){var o=c.r,c=c.l;return(o?c?Math.max(o.d,c.d):o.d:c?c.d:0)+1}function Ws(s,o){return l(o).forEach(function(c){s[c]?Xr(s[c],o[c]):s[c]=(function u(p){var y,b,k={};for(y in p)g(p,y)&&(b=p[y],k[y]=!b||typeof b!="object"||ut.has(b.constructor)?b:u(b));return k})(o[c])}),s}function di(s,o){return s.all||o.all||Object.keys(s).some(function(c){return o[c]&&ec(o[c],s[c])})}v(Rt.prototype,((tn={add:function(s){return Xr(this,s),this},addKey:function(s){return Jr(this,s,s),this},addKeys:function(s){var o=this;return s.forEach(function(c){return Jr(o,c,c)}),this},hasKey:function(s){var o=Hs(this).next(s).value;return o&&Ke(o.from,s)<=0&&0<=Ke(o.to,s)}})[Me]=function(){return Hs(this)},tn));var or={},fi={},pi=!1;function zs(s){Ws(fi,s),pi||(pi=!0,setTimeout(function(){pi=!1,hi(fi,!(fi={}))},0))}function hi(s,o){o===void 0&&(o=!1);var c=new Set;if(s.all)for(var u=0,p=Object.values(or);u<p.length;u++)rc(b=p[u],s,c,o);else for(var y in s){var b,k=/^idb\:\/\/(.*)\/(.*)\//.exec(y);k&&(y=k[1],k=k[2],(b=or["idb://".concat(y,"/").concat(k)])&&rc(b,s,c,o))}c.forEach(function(E){return E()})}function rc(s,o,c,u){for(var p=[],y=0,b=Object.entries(s.queries.query);y<b.length;y++){for(var k=b[y],E=k[0],I=[],R=0,C=k[1];R<C.length;R++){var T=C[R];di(o,T.obsSet)?T.subscribers.forEach(function(D){return c.add(D)}):u&&I.push(T)}u&&p.push([E,I])}if(u)for(var S=0,O=p;S<O.length;S++){var $=O[S],E=$[0],I=$[1];s.queries.query[E]=I}}function _d(s){var o=s._state,c=s._deps.indexedDB;if(o.isBeingOpened||s.idbdb)return o.dbReadyPromise.then(function(){return o.dbOpenError?gt(o.dbOpenError):s});o.isBeingOpened=!0,o.dbOpenError=null,o.openComplete=!1;var u=o.openCanceller,p=Math.round(10*s.verno),y=!1;function b(){if(o.openCanceller!==u)throw new H.DatabaseClosed("db.open() was cancelled")}function k(){return new me(function(T,S){if(b(),!c)throw new H.MissingAPI;var O=s.name,$=o.autoSchema||!p?c.open(O):c.open(O,p);if(!$)throw new H.MissingAPI;$.onerror=dn(S),$.onblocked=ft(s._fireOnBlocked),$.onupgradeneeded=ft(function(D){var M;R=$.transaction,o.autoSchema&&!s._options.allowEmptyDB?($.onerror=zr,R.abort(),$.result.close(),(M=c.deleteDatabase(O)).onsuccess=M.onerror=ft(function(){S(new H.NoSuchDatabase("Database ".concat(O," doesnt exist")))})):(R.onerror=dn(S),D=D.oldVersion>Math.pow(2,62)?0:D.oldVersion,C=D<1,s.idbdb=$.result,y&&vd(s,R),gd(s,D/10,R,S))},S),$.onsuccess=ft(function(){R=null;var D,M,q,U,W,re=s.idbdb=$.result,le=ne(re.objectStoreNames);if(0<le.length)try{var oe=re.transaction((U=le).length===1?U[0]:U,"readonly");if(o.autoSchema)M=re,q=oe,(D=s).verno=M.version/10,q=D._dbSchema=Us(0,M,q),D._storeNames=ne(M.objectStoreNames,0),qs(D,[D._allTables],l(q),q);else if(Vs(s,s._dbSchema,oe),((W=oi(Us(0,(W=s).idbdb,oe),W._dbSchema)).add.length||W.change.some(function(ae){return ae.add.length||ae.change.length}))&&!y)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),re.close(),p=re.version+1,y=!0,T(k());Ls(s,oe)}catch{}kr.push(s),re.onversionchange=ft(function(ae){o.vcFired=!0,s.on("versionchange").fire(ae)}),re.onclose=ft(function(ae){s.on("close").fire(ae)}),C&&(W=s._deps,oe=O,re=W.indexedDB,W=W.IDBKeyRange,ci(re)||oe===Ts||ai(re,W).put({name:oe}).catch(_)),T()},S)}).catch(function(T){switch(T?.name){case"UnknownError":if(0<o.PR1398_maxLoop)return o.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),k();break;case"VersionError":if(0<p)return p=0,k()}return me.reject(T)})}var E,I=o.dbReadyResolve,R=null,C=!1;return me.race([u,(typeof navigator>"u"?me.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(T){function S(){return indexedDB.databases().finally(T)}E=setInterval(S,100),S()}).finally(function(){return clearInterval(E)}):Promise.resolve()).then(k)]).then(function(){return b(),o.onReadyBeingFired=[],me.resolve(li(function(){return s.on.ready.fire(s.vip)})).then(function T(){if(0<o.onReadyBeingFired.length){var S=o.onReadyBeingFired.reduce(ce,_);return o.onReadyBeingFired=[],me.resolve(li(function(){return S(s.vip)})).then(T)}})}).finally(function(){o.openCanceller===u&&(o.onReadyBeingFired=null,o.isBeingOpened=!1)}).catch(function(T){o.dbOpenError=T;try{R&&R.abort()}catch{}return u===o.openCanceller&&s._close(),gt(T)}).finally(function(){o.openComplete=!0,I()}).then(function(){var T;return C&&(T={},s.tables.forEach(function(S){S.schema.indexes.forEach(function(O){O.name&&(T["idb://".concat(s.name,"/").concat(S.name,"/").concat(O.name)]=new Rt(-1/0,[[[]]]))}),T["idb://".concat(s.name,"/").concat(S.name,"/")]=T["idb://".concat(s.name,"/").concat(S.name,"/:dels")]=new Rt(-1/0,[[[]]])}),Kn(Qr).fire(T),hi(T,!0)),s})}function mi(s){function o(y){return s.next(y)}var c=p(o),u=p(function(y){return s.throw(y)});function p(y){return function(E){var k=y(E),E=k.value;return k.done?E:E&&typeof E.then=="function"?E.then(c,u):d(E)?Promise.all(E).then(c,u):c(E)}}return p(o)()}function Qs(s,o,c){for(var u=d(s)?s.slice():[s],p=0;p<c;++p)u.push(o);return u}var wd={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(s){return r(r({},s),{table:function(o){var c=s.table(o),u=c.schema,p={},y=[];function b(C,T,S){var O=Gr(C),$=p[O]=p[O]||[],D=C==null?0:typeof C=="string"?1:C.length,M=0<T,M=r(r({},S),{name:M?"".concat(O,"(virtual-from:").concat(S.name,")"):S.name,lowLevelIndex:S,isVirtual:M,keyTail:T,keyLength:D,extractKey:ri(C),unique:!M&&S.unique});return $.push(M),M.isPrimaryKey||y.push(M),1<D&&b(D===2?C[0]:C.slice(0,D-1),T+1,S),$.sort(function(q,U){return q.keyTail-U.keyTail}),M}o=b(u.primaryKey.keyPath,0,u.primaryKey),p[":id"]=[o];for(var k=0,E=u.indexes;k<E.length;k++){var I=E[k];b(I.keyPath,0,I)}function R(C){var T,S=C.query.index;return S.isVirtual?r(r({},C),{query:{index:S.lowLevelIndex,range:(T=C.query.range,S=S.keyTail,{type:T.type===1?2:T.type,lower:Qs(T.lower,T.lowerOpen?s.MAX_KEY:s.MIN_KEY,S),lowerOpen:!0,upper:Qs(T.upper,T.upperOpen?s.MIN_KEY:s.MAX_KEY,S),upperOpen:!0})}}):C}return r(r({},c),{schema:r(r({},u),{primaryKey:o,indexes:y,getIndexByKeyPath:function(C){return(C=p[Gr(C)])&&C[0]}}),count:function(C){return c.count(R(C))},query:function(C){return c.query(R(C))},openCursor:function(C){var T=C.query.index,S=T.keyTail,O=T.isVirtual,$=T.keyLength;return O?c.openCursor(R(C)).then(function(M){return M&&D(M)}):c.openCursor(C);function D(M){return Object.create(M,{continue:{value:function(q){q!=null?M.continue(Qs(q,C.reverse?s.MAX_KEY:s.MIN_KEY,S)):C.unique?M.continue(M.key.slice(0,$).concat(C.reverse?s.MIN_KEY:s.MAX_KEY,S)):M.continue()}},continuePrimaryKey:{value:function(q,U){M.continuePrimaryKey(Qs(q,s.MAX_KEY,S),U)}},primaryKey:{get:function(){return M.primaryKey}},key:{get:function(){var q=M.key;return $===1?q[0]:q.slice(0,$)}},value:{get:function(){return M.value}}})}}})}})}};function yi(s,o,c,u){return c=c||{},u=u||"",l(s).forEach(function(p){var y,b,k;g(o,p)?(y=s[p],b=o[p],typeof y=="object"&&typeof b=="object"&&y&&b?(k=it(y))!==it(b)?c[u+p]=o[p]:k==="Object"?yi(y,b,c,u+p+"."):y!==b&&(c[u+p]=o[p]):y!==b&&(c[u+p]=o[p])):c[u+p]=void 0}),l(o).forEach(function(p){g(s,p)||(c[u+p]=o[p])}),c}function gi(s,o){return o.type==="delete"?o.keys:o.keys||o.values.map(s.extractKey)}var xd={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(s){return r(r({},s),{table:function(o){var c=s.table(o),u=c.schema.primaryKey;return r(r({},c),{mutate:function(p){var y=_e.trans,b=y.table(o).hook,k=b.deleting,E=b.creating,I=b.updating;switch(p.type){case"add":if(E.fire===_)break;return y._promise("readwrite",function(){return R(p)},!0);case"put":if(E.fire===_&&I.fire===_)break;return y._promise("readwrite",function(){return R(p)},!0);case"delete":if(k.fire===_)break;return y._promise("readwrite",function(){return R(p)},!0);case"deleteRange":if(k.fire===_)break;return y._promise("readwrite",function(){return(function C(T,S,O){return c.query({trans:T,values:!1,query:{index:u,range:S},limit:O}).then(function($){var D=$.result;return R({type:"delete",keys:D,trans:T}).then(function(M){return 0<M.numFailures?Promise.reject(M.failures[0]):D.length<O?{failures:[],numFailures:0,lastResult:void 0}:C(T,r(r({},S),{lower:D[D.length-1],lowerOpen:!0}),O)})})})(p.trans,p.range,1e4)},!0)}return c.mutate(p);function R(C){var T,S,O,$=_e.trans,D=C.keys||gi(u,C);if(!D)throw new Error("Keys missing");return(C=C.type==="add"||C.type==="put"?r(r({},C),{keys:D}):r({},C)).type!=="delete"&&(C.values=i([],C.values)),C.keys&&(C.keys=i([],C.keys)),T=c,O=D,((S=C).type==="add"?Promise.resolve([]):T.getMany({trans:S.trans,keys:O,cache:"immutable"})).then(function(M){var q=D.map(function(U,W){var re,le,oe,ae=M[W],he={onerror:null,onsuccess:null};return C.type==="delete"?k.fire.call(he,U,ae,$):C.type==="add"||ae===void 0?(re=E.fire.call(he,U,C.values[W],$),U==null&&re!=null&&(C.keys[W]=U=re,u.outbound||Ce(C.values[W],u.keyPath,U))):(re=yi(ae,C.values[W]),(le=I.fire.call(he,re,U,ae,$))&&(oe=C.values[W],Object.keys(le).forEach(function(de){g(oe,de)?oe[de]=le[de]:Ce(oe,de,le[de])}))),he});return c.mutate(C).then(function(U){for(var W=U.failures,re=U.results,le=U.numFailures,U=U.lastResult,oe=0;oe<D.length;++oe){var ae=(re||D)[oe],he=q[oe];ae==null?he.onerror&&he.onerror(W[oe]):he.onsuccess&&he.onsuccess(C.type==="put"&&M[oe]?C.values[oe]:ae)}return{failures:W,results:re,numFailures:le,lastResult:U}}).catch(function(U){return q.forEach(function(W){return W.onerror&&W.onerror(U)}),Promise.reject(U)})})}}})}})}};function sc(s,o,c){try{if(!o||o.keys.length<s.length)return null;for(var u=[],p=0,y=0;p<o.keys.length&&y<s.length;++p)Ke(o.keys[p],s[y])===0&&(u.push(c?ze(o.values[p]):o.values[p]),++y);return u.length===s.length?u:null}catch{return null}}var kd={stack:"dbcore",level:-1,create:function(s){return{table:function(o){var c=s.table(o);return r(r({},c),{getMany:function(u){if(!u.cache)return c.getMany(u);var p=sc(u.keys,u.trans._cache,u.cache==="clone");return p?me.resolve(p):c.getMany(u).then(function(y){return u.trans._cache={keys:u.keys,values:u.cache==="clone"?ze(y):y},y})},mutate:function(u){return u.type!=="add"&&(u.trans._cache=null),c.mutate(u)}})}}}};function oc(s,o){return s.trans.mode==="readonly"&&!!s.subscr&&!s.trans.explicit&&s.trans.db._options.cache!=="disabled"&&!o.schema.primaryKey.outbound}function ic(s,o){switch(s){case"query":return o.values&&!o.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Cd={stack:"dbcore",level:0,name:"Observability",create:function(s){var o=s.schema.name,c=new Rt(s.MIN_KEY,s.MAX_KEY);return r(r({},s),{transaction:function(u,p,y){if(_e.subscr&&p!=="readonly")throw new H.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(_e.querier));return s.transaction(u,p,y)},table:function(u){var p=s.table(u),y=p.schema,b=y.primaryKey,C=y.indexes,k=b.extractKey,E=b.outbound,I=b.autoIncrement&&C.filter(function(S){return S.compound&&S.keyPath.includes(b.keyPath)}),R=r(r({},p),{mutate:function(S){function O(de){return de="idb://".concat(o,"/").concat(u,"/").concat(de),U[de]||(U[de]=new Rt)}var $,D,M,q=S.trans,U=S.mutatedParts||(S.mutatedParts={}),W=O(""),re=O(":dels"),le=S.type,he=S.type==="deleteRange"?[S.range]:S.type==="delete"?[S.keys]:S.values.length<50?[gi(b,S).filter(function(de){return de}),S.values]:[],oe=he[0],ae=he[1],he=S.trans._cache;return d(oe)?(W.addKeys(oe),(he=le==="delete"||oe.length===ae.length?sc(oe,he):null)||re.addKeys(oe),(he||ae)&&($=O,D=he,M=ae,y.indexes.forEach(function(de){var ye=$(de.name||"");function Le(Be){return Be!=null?de.extractKey(Be):null}function We(Be){return de.multiEntry&&d(Be)?Be.forEach(function(mt){return ye.addKey(mt)}):ye.addKey(Be)}(D||M).forEach(function(Be,Dt){var Fe=D&&Le(D[Dt]),Dt=M&&Le(M[Dt]);Ke(Fe,Dt)!==0&&(Fe!=null&&We(Fe),Dt!=null&&We(Dt))})}))):oe?(ae={from:(ae=oe.lower)!==null&&ae!==void 0?ae:s.MIN_KEY,to:(ae=oe.upper)!==null&&ae!==void 0?ae:s.MAX_KEY},re.add(ae),W.add(ae)):(W.add(c),re.add(c),y.indexes.forEach(function(de){return O(de.name).add(c)})),p.mutate(S).then(function(de){return!oe||S.type!=="add"&&S.type!=="put"||(W.addKeys(de.results),I&&I.forEach(function(ye){for(var Le=S.values.map(function(Fe){return ye.extractKey(Fe)}),We=ye.keyPath.findIndex(function(Fe){return Fe===b.keyPath}),Be=0,mt=de.results.length;Be<mt;++Be)Le[Be][We]=de.results[Be];O(ye.name).addKeys(Le)})),q.mutatedParts=Ws(q.mutatedParts||{},U),de})}}),C=function(O){var $=O.query,O=$.index,$=$.range;return[O,new Rt((O=$.lower)!==null&&O!==void 0?O:s.MIN_KEY,($=$.upper)!==null&&$!==void 0?$:s.MAX_KEY)]},T={get:function(S){return[b,new Rt(S.key)]},getMany:function(S){return[b,new Rt().addKeys(S.keys)]},count:C,query:C,openCursor:C};return l(T).forEach(function(S){R[S]=function(O){var $=_e.subscr,D=!!$,M=oc(_e,p)&&ic(S,O)?O.obsSet={}:$;if(D){var q=function(ae){return ae="idb://".concat(o,"/").concat(u,"/").concat(ae),M[ae]||(M[ae]=new Rt)},U=q(""),W=q(":dels"),$=T[S](O),D=$[0],$=$[1];if((S==="query"&&D.isPrimaryKey&&!O.values?W:q(D.name||"")).add($),!D.isPrimaryKey){if(S!=="count"){var re=S==="query"&&E&&O.values&&p.query(r(r({},O),{values:!1}));return p[S].apply(this,arguments).then(function(ae){if(S==="query"){if(E&&O.values)return re.then(function(Le){return Le=Le.result,U.addKeys(Le),ae});var he=O.values?ae.result.map(k):ae.result;(O.values?U:W).addKeys(he)}else if(S==="openCursor"){var de=ae,ye=O.values;return de&&Object.create(de,{key:{get:function(){return W.addKey(de.primaryKey),de.key}},primaryKey:{get:function(){var Le=de.primaryKey;return W.addKey(Le),Le}},value:{get:function(){return ye&&U.addKey(de.primaryKey),de.value}}})}return ae})}W.add(c)}}return p[S].apply(this,arguments)}}),R}})}};function ac(s,o,c){if(c.numFailures===0)return o;if(o.type==="deleteRange")return null;var u=o.keys?o.keys.length:"values"in o&&o.values?o.values.length:1;return c.numFailures===u?null:(o=r({},o),d(o.keys)&&(o.keys=o.keys.filter(function(p,y){return!(y in c.failures)})),"values"in o&&d(o.values)&&(o.values=o.values.filter(function(p,y){return!(y in c.failures)})),o)}function vi(s,o){return c=s,((u=o).lower===void 0||(u.lowerOpen?0<Ke(c,u.lower):0<=Ke(c,u.lower)))&&(s=s,(o=o).upper===void 0||(o.upperOpen?Ke(s,o.upper)<0:Ke(s,o.upper)<=0));var c,u}function cc(s,o,T,u,p,y){if(!T||T.length===0)return s;var b=o.query.index,k=b.multiEntry,E=o.query.range,I=u.schema.primaryKey.extractKey,R=b.extractKey,C=(b.lowLevelIndex||b).extractKey,T=T.reduce(function(S,O){var $=S,D=[];if(O.type==="add"||O.type==="put")for(var M=new Rt,q=O.values.length-1;0<=q;--q){var U,W=O.values[q],re=I(W);M.hasKey(re)||(U=R(W),(k&&d(U)?U.some(function(de){return vi(de,E)}):vi(U,E))&&(M.addKey(re),D.push(W)))}switch(O.type){case"add":var le=new Rt().addKeys(o.values?S.map(function(ye){return I(ye)}):S),$=S.concat(o.values?D.filter(function(ye){return ye=I(ye),!le.hasKey(ye)&&(le.addKey(ye),!0)}):D.map(function(ye){return I(ye)}).filter(function(ye){return!le.hasKey(ye)&&(le.addKey(ye),!0)}));break;case"put":var oe=new Rt().addKeys(O.values.map(function(ye){return I(ye)}));$=S.filter(function(ye){return!oe.hasKey(o.values?I(ye):ye)}).concat(o.values?D:D.map(function(ye){return I(ye)}));break;case"delete":var ae=new Rt().addKeys(O.keys);$=S.filter(function(ye){return!ae.hasKey(o.values?I(ye):ye)});break;case"deleteRange":var he=O.range;$=S.filter(function(ye){return!vi(I(ye),he)})}return $},s);return T===s?s:(T.sort(function(S,O){return Ke(C(S),C(O))||Ke(I(S),I(O))}),o.limit&&o.limit<1/0&&(T.length>o.limit?T.length=o.limit:s.length===o.limit&&T.length<o.limit&&(p.dirty=!0)),y?Object.freeze(T):T)}function lc(s,o){return Ke(s.lower,o.lower)===0&&Ke(s.upper,o.upper)===0&&!!s.lowerOpen==!!o.lowerOpen&&!!s.upperOpen==!!o.upperOpen}function Ad(s,o){return(function(c,u,p,y){if(c===void 0)return u!==void 0?-1:0;if(u===void 0)return 1;if((u=Ke(c,u))===0){if(p&&y)return 0;if(p)return 1;if(y)return-1}return u})(s.lower,o.lower,s.lowerOpen,o.lowerOpen)<=0&&0<=(function(c,u,p,y){if(c===void 0)return u!==void 0?1:0;if(u===void 0)return-1;if((u=Ke(c,u))===0){if(p&&y)return 0;if(p)return-1;if(y)return 1}return u})(s.upper,o.upper,s.upperOpen,o.upperOpen)}function Ed(s,o,c,u){s.subscribers.add(c),u.addEventListener("abort",function(){var p,y;s.subscribers.delete(c),s.subscribers.size===0&&(p=s,y=o,setTimeout(function(){p.subscribers.size===0&&z(y,p)},3e3))})}var Sd={stack:"dbcore",level:0,name:"Cache",create:function(s){var o=s.schema.name;return r(r({},s),{transaction:function(c,u,p){var y,b,k=s.transaction(c,u,p);return u==="readwrite"&&(b=(y=new AbortController).signal,p=function(E){return function(){if(y.abort(),u==="readwrite"){for(var I=new Set,R=0,C=c;R<C.length;R++){var T=C[R],S=or["idb://".concat(o,"/").concat(T)];if(S){var O=s.table(T),$=S.optimisticOps.filter(function(ye){return ye.trans===k});if(k._explicit&&E&&k.mutatedParts)for(var D=0,M=Object.values(S.queries.query);D<M.length;D++)for(var q=0,U=(le=M[D]).slice();q<U.length;q++)di((oe=U[q]).obsSet,k.mutatedParts)&&(z(le,oe),oe.subscribers.forEach(function(ye){return I.add(ye)}));else if(0<$.length){S.optimisticOps=S.optimisticOps.filter(function(ye){return ye.trans!==k});for(var W=0,re=Object.values(S.queries.query);W<re.length;W++)for(var le,oe,ae,he=0,de=(le=re[W]).slice();he<de.length;he++)(oe=de[he]).res!=null&&k.mutatedParts&&(E&&!oe.dirty?(ae=Object.isFrozen(oe.res),ae=cc(oe.res,oe.req,$,O,oe,ae),oe.dirty?(z(le,oe),oe.subscribers.forEach(function(ye){return I.add(ye)})):ae!==oe.res&&(oe.res=ae,oe.promise=me.resolve({result:ae}))):(oe.dirty&&z(le,oe),oe.subscribers.forEach(function(ye){return I.add(ye)})))}}}I.forEach(function(ye){return ye()})}}},k.addEventListener("abort",p(!1),{signal:b}),k.addEventListener("error",p(!1),{signal:b}),k.addEventListener("complete",p(!0),{signal:b})),k},table:function(c){var u=s.table(c),p=u.schema.primaryKey;return r(r({},u),{mutate:function(y){var b=_e.trans;if(p.outbound||b.db._options.cache==="disabled"||b.explicit||b.idbtrans.mode!=="readwrite")return u.mutate(y);var k=or["idb://".concat(o,"/").concat(c)];return k?(b=u.mutate(y),y.type!=="add"&&y.type!=="put"||!(50<=y.values.length||gi(p,y).some(function(E){return E==null}))?(k.optimisticOps.push(y),y.mutatedParts&&zs(y.mutatedParts),b.then(function(E){0<E.numFailures&&(z(k.optimisticOps,y),(E=ac(0,y,E))&&k.optimisticOps.push(E),y.mutatedParts&&zs(y.mutatedParts))}),b.catch(function(){z(k.optimisticOps,y),y.mutatedParts&&zs(y.mutatedParts)})):b.then(function(E){var I=ac(0,r(r({},y),{values:y.values.map(function(R,C){var T;return E.failures[C]?R:(R=(T=p.keyPath)!==null&&T!==void 0&&T.includes(".")?ze(R):r({},R),Ce(R,p.keyPath,E.results[C]),R)})}),E);k.optimisticOps.push(I),queueMicrotask(function(){return y.mutatedParts&&zs(y.mutatedParts)})}),b):u.mutate(y)},query:function(y){if(!oc(_e,u)||!ic("query",y))return u.query(y);var b=((I=_e.trans)===null||I===void 0?void 0:I.db._options.cache)==="immutable",C=_e,k=C.requery,E=C.signal,I=(function(O,$,D,M){var q=or["idb://".concat(O,"/").concat($)];if(!q)return[];if(!($=q.queries[D]))return[null,!1,q,null];var U=$[(M.query?M.query.index.name:null)||""];if(!U)return[null,!1,q,null];switch(D){case"query":var W=U.find(function(re){return re.req.limit===M.limit&&re.req.values===M.values&&lc(re.req.query.range,M.query.range)});return W?[W,!0,q,U]:[U.find(function(re){return("limit"in re.req?re.req.limit:1/0)>=M.limit&&(!M.values||re.req.values)&&Ad(re.req.query.range,M.query.range)}),!1,q,U];case"count":return W=U.find(function(re){return lc(re.req.query.range,M.query.range)}),[W,!!W,q,U]}})(o,c,"query",y),R=I[0],C=I[1],T=I[2],S=I[3];return R&&C?R.obsSet=y.obsSet:(C=u.query(y).then(function(O){var $=O.result;if(R&&(R.res=$),b){for(var D=0,M=$.length;D<M;++D)Object.freeze($[D]);Object.freeze($)}else O.result=ze($);return O}).catch(function(O){return S&&R&&z(S,R),Promise.reject(O)}),R={obsSet:y.obsSet,promise:C,subscribers:new Set,type:"query",req:y,dirty:!1},S?S.push(R):(S=[R],(T=T||(or["idb://".concat(o,"/").concat(c)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[y.query.index.name||""]=S)),Ed(R,S,k,E),R.promise.then(function(O){return{result:cc(O.result,y,T?.optimisticOps,u,R,b)}})}})}})}};function Ys(s,o){return new Proxy(s,{get:function(c,u,p){return u==="db"?o:Reflect.get(c,u,p)}})}var An=(vt.prototype.version=function(s){if(isNaN(s)||s<.1)throw new H.Type("Given version is not a positive number");if(s=Math.round(10*s)/10,this.idbdb||this._state.isBeingOpened)throw new H.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,s);var o=this._versions,c=o.filter(function(u){return u._cfg.version===s})[0];return c||(c=new this.Version(s),o.push(c),o.sort(yd),c.stores({}),this._state.autoSchema=!1,c)},vt.prototype._whenReady=function(s){var o=this;return this.idbdb&&(this._state.openComplete||_e.letThrough||this._vip)?s():new me(function(c,u){if(o._state.openComplete)return u(new H.DatabaseClosed(o._state.dbOpenError));if(!o._state.isBeingOpened){if(!o._state.autoOpen)return void u(new H.DatabaseClosed);o.open().catch(_)}o._state.dbReadyPromise.then(c,u)}).then(s)},vt.prototype.use=function(s){var o=s.stack,c=s.create,u=s.level,p=s.name;return p&&this.unuse({stack:o,name:p}),s=this._middlewares[o]||(this._middlewares[o]=[]),s.push({stack:o,create:c,level:u??10,name:p}),s.sort(function(y,b){return y.level-b.level}),this},vt.prototype.unuse=function(s){var o=s.stack,c=s.name,u=s.create;return o&&this._middlewares[o]&&(this._middlewares[o]=this._middlewares[o].filter(function(p){return u?p.create!==u:!!c&&p.name!==c})),this},vt.prototype.open=function(){var s=this;return nr(ht,function(){return _d(s)})},vt.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var s=this._state,o=kr.indexOf(this);if(0<=o&&kr.splice(o,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}s.isBeingOpened||(s.dbReadyPromise=new me(function(c){s.dbReadyResolve=c}),s.openCanceller=new me(function(c,u){s.cancelOpen=u}))},vt.prototype.close=function(c){var o=(c===void 0?{disableAutoOpen:!0}:c).disableAutoOpen,c=this._state;o?(c.isBeingOpened&&c.cancelOpen(new H.DatabaseClosed),this._close(),c.autoOpen=!1,c.dbOpenError=new H.DatabaseClosed):(this._close(),c.autoOpen=this._options.autoOpen||c.isBeingOpened,c.openComplete=!1,c.dbOpenError=null)},vt.prototype.delete=function(s){var o=this;s===void 0&&(s={disableAutoOpen:!0});var c=0<arguments.length&&typeof arguments[0]!="object",u=this._state;return new me(function(p,y){function b(){o.close(s);var k=o._deps.indexedDB.deleteDatabase(o.name);k.onsuccess=ft(function(){var E,I,R;E=o._deps,I=o.name,R=E.indexedDB,E=E.IDBKeyRange,ci(R)||I===Ts||ai(R,E).delete(I).catch(_),p()}),k.onerror=dn(y),k.onblocked=o._fireOnBlocked}if(c)throw new H.InvalidArgument("Invalid closeOptions argument to db.delete()");u.isBeingOpened?u.dbReadyPromise.then(b):b()})},vt.prototype.backendDB=function(){return this.idbdb},vt.prototype.isOpen=function(){return this.idbdb!==null},vt.prototype.hasBeenClosed=function(){var s=this._state.dbOpenError;return s&&s.name==="DatabaseClosed"},vt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},vt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(vt.prototype,"tables",{get:function(){var s=this;return l(this._allTables).map(function(o){return s._allTables[o]})},enumerable:!1,configurable:!0}),vt.prototype.transaction=function(){var s=(function(o,c,u){var p=arguments.length;if(p<2)throw new H.InvalidArgument("Too few arguments");for(var y=new Array(p-1);--p;)y[p-1]=arguments[p];return u=y.pop(),[o,qe(y),u]}).apply(this,arguments);return this._transaction.apply(this,s)},vt.prototype._transaction=function(s,o,c){var u=this,p=_e.trans;p&&p.db===this&&s.indexOf("!")===-1||(p=null);var y,b,k=s.indexOf("?")!==-1;s=s.replace("!","").replace("?","");try{if(b=o.map(function(I){if(I=I instanceof u.Table?I.name:I,typeof I!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return I}),s=="r"||s===Go)y=Go;else{if(s!="rw"&&s!=Jo)throw new H.InvalidArgument("Invalid transaction mode: "+s);y=Jo}if(p){if(p.mode===Go&&y===Jo){if(!k)throw new H.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");p=null}p&&b.forEach(function(I){if(p&&p.storeNames.indexOf(I)===-1){if(!k)throw new H.SubTransaction("Table "+I+" not included in parent transaction.");p=null}}),k&&p&&!p.active&&(p=null)}}catch(I){return p?p._promise(null,function(R,C){C(I)}):gt(I)}var E=(function I(R,C,T,S,O){return me.resolve().then(function(){var $=_e.transless||_e,D=R._createTransaction(C,T,R._dbSchema,S);if(D.explicit=!0,$={trans:D,transless:$},S)D.idbtrans=S.idbtrans;else try{D.create(),D.idbtrans._explicit=!0,R._state.PR1398_maxLoop=3}catch(U){return U.name===J.InvalidState&&R.isOpen()&&0<--R._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),R.close({disableAutoOpen:!1}),R.open().then(function(){return I(R,C,T,null,O)})):gt(U)}var M,q=Ie(O);return q&&xr(),$=me.follow(function(){var U;(M=O.call(D,D))&&(q?(U=jn.bind(null,null),M.then(U,U)):typeof M.next=="function"&&typeof M.throw=="function"&&(M=mi(M)))},$),(M&&typeof M.then=="function"?me.resolve(M).then(function(U){return D.active?U:gt(new H.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):$.then(function(){return M})).then(function(U){return S&&D._resolve(),D._completion.then(function(){return U})}).catch(function(U){return D._reject(U),gt(U)})})}).bind(null,this,y,b,p,c);return p?p._promise(y,E,"lock"):_e.trans?nr(_e.transless,function(){return u._whenReady(E)}):this._whenReady(E)},vt.prototype.table=function(s){if(!g(this._allTables,s))throw new H.InvalidTable("Table ".concat(s," does not exist"));return this._allTables[s]},vt);function vt(s,o){var c=this;this._middlewares={},this.verno=0;var u=vt.dependencies;this._options=o=r({addons:vt.addons,autoOpen:!0,indexedDB:u.indexedDB,IDBKeyRange:u.IDBKeyRange,cache:"cloned"},o),this._deps={indexedDB:o.indexedDB,IDBKeyRange:o.IDBKeyRange},u=o.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var p,y,b,k,E,I={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:_,dbReadyPromise:null,cancelOpen:_,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:o.autoOpen};I.dbReadyPromise=new me(function(C){I.dbReadyResolve=C}),I.openCanceller=new me(function(C,T){I.cancelOpen=T}),this._state=I,this.name=s,this.on=Vr(this,"populate","blocked","versionchange","close",{ready:[ce,_]}),this.once=function(C,T){var S=function(){for(var O=[],$=0;$<arguments.length;$++)O[$]=arguments[$];c.on(C).unsubscribe(S),T.apply(c,O)};return c.on(C,S)},this.on.ready.subscribe=j(this.on.ready.subscribe,function(C){return function(T,S){vt.vip(function(){var O,$=c._state;$.openComplete?($.dbOpenError||me.resolve().then(T),S&&C(T)):$.onReadyBeingFired?($.onReadyBeingFired.push(T),S&&C(T)):(C(T),O=c,S||C(function D(){O.on.ready.unsubscribe(T),O.on.ready.unsubscribe(D)}))})}}),this.Collection=(p=this,Hr(ld.prototype,function(M,D){this.db=p;var S=ja,O=null;if(D)try{S=D()}catch(q){O=q}var $=M._ctx,D=$.table,M=D.hook.reading.fire;this._ctx={table:D,index:$.index,isPrimKey:!$.index||D.schema.primKey.keyPath&&$.index===D.schema.primKey.name,range:S,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:O,or:$.or,valueMapper:M!==A?M:null}})),this.Table=(y=this,Hr(Ua.prototype,function(C,T,S){this.db=y,this._tx=S,this.name=C,this.schema=T,this.hook=y._allTables[C]?y._allTables[C].hook:Vr(null,{creating:[ee,_],reading:[B,A],updating:[fe,_],deleting:[X,_]})})),this.Transaction=(b=this,Hr(fd.prototype,function(C,T,S,O,$){var D=this;C!=="readonly"&&T.forEach(function(M){M=(M=S[M])===null||M===void 0?void 0:M.yProps,M&&(T=T.concat(M.map(function(q){return q.updatesTable})))}),this.db=b,this.mode=C,this.storeNames=T,this.schema=S,this.chromeTransactionDurability=O,this.idbtrans=null,this.on=Vr(this,"complete","error","abort"),this.parent=$||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new me(function(M,q){D._resolve=M,D._reject=q}),this._completion.then(function(){D.active=!1,D.on.complete.fire()},function(M){var q=D.active;return D.active=!1,D.on.error.fire(M),D.parent?D.parent._reject(M):q&&D.idbtrans&&D.idbtrans.abort(),gt(M)})})),this.Version=(k=this,Hr(bd.prototype,function(C){this.db=k,this._cfg={version:C,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(E=this,Hr(Ya.prototype,function(C,T,S){if(this.db=E,this._ctx={table:C,index:T===":id"?null:T,or:S},this._cmp=this._ascending=Ke,this._descending=function(O,$){return Ke($,O)},this._max=function(O,$){return 0<Ke(O,$)?O:$},this._min=function(O,$){return Ke(O,$)<0?O:$},this._IDBKeyRange=E._deps.IDBKeyRange,!this._IDBKeyRange)throw new H.MissingAPI})),this.on("versionchange",function(C){0<C.newVersion?console.warn("Another connection wants to upgrade database '".concat(c.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(c.name,"'. Closing db now to resume the delete request.")),c.close({disableAutoOpen:!1})}),this.on("blocked",function(C){!C.newVersion||C.newVersion<C.oldVersion?console.warn("Dexie.delete('".concat(c.name,"') was blocked")):console.warn("Upgrade '".concat(c.name,"' blocked by other connection holding version ").concat(C.oldVersion/10))}),this._maxKey=Yr(o.IDBKeyRange),this._createTransaction=function(C,T,S,O){return new c.Transaction(C,T,S,c._options.chromeTransactionDurability,O)},this._fireOnBlocked=function(C){c.on("blocked").fire(C),kr.filter(function(T){return T.name===c.name&&T!==c&&!T._state.vcFired}).map(function(T){return T.on("versionchange").fire(C)})},this.use(kd),this.use(Sd),this.use(Cd),this.use(wd),this.use(xd);var R=new Proxy(this,{get:function(C,T,S){if(T==="_vip")return!0;if(T==="table")return function($){return Ys(c.table($),R)};var O=Reflect.get(C,T,S);return O instanceof Ua?Ys(O,R):T==="tables"?O.map(function($){return Ys($,R)}):T==="_createTransaction"?function(){return Ys(O.apply(this,arguments),R)}:O}});this.vip=R,u.forEach(function(C){return C(c)})}var Gs,tn=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Id=(bi.prototype.subscribe=function(s,o,c){return this._subscribe(s&&typeof s!="function"?s:{next:s,error:o,complete:c})},bi.prototype[tn]=function(){return this},bi);function bi(s){this._subscribe=s}try{Gs={indexedDB:a.indexedDB||a.mozIndexedDB||a.webkitIndexedDB||a.msIndexedDB,IDBKeyRange:a.IDBKeyRange||a.webkitIDBKeyRange}}catch{Gs={indexedDB:null,IDBKeyRange:null}}function uc(s){var o,c=!1,u=new Id(function(p){var y=Ie(s),b,k=!1,E={},I={},R={get closed(){return k},unsubscribe:function(){k||(k=!0,b&&b.abort(),C&&Kn.storagemutated.unsubscribe(S))}};p.start&&p.start(R);var C=!1,T=function(){return Yo(O)},S=function($){Ws(E,$),di(I,E)&&T()},O=function(){var $,D,M;!k&&Gs.indexedDB&&(E={},$={},b&&b.abort(),b=new AbortController,M=(function(q){var U=_r();try{y&&xr();var W=Nn(s,q);return W=y?W.finally(jn):W}finally{U&&wr()}})(D={subscr:$,signal:b.signal,requery:T,querier:s,trans:null}),Promise.resolve(M).then(function(q){c=!0,o=q,k||D.signal.aborted||(E={},(function(U){for(var W in U)if(g(U,W))return;return 1})(I=$)||C||(Kn(Qr,S),C=!0),Yo(function(){return!k&&p.next&&p.next(q)}))},function(q){c=!1,["DatabaseClosedError","AbortError"].includes(q?.name)||k||Yo(function(){k||p.error&&p.error(q)})}))};return setTimeout(T,0),R});return u.hasValue=function(){return c},u.getValue=function(){return o},u}var ir=An;function _i(s){var o=Un;try{Un=!0,Kn.storagemutated.fire(s),hi(s,!0)}finally{Un=o}}v(ir,r(r({},Ye),{delete:function(s){return new ir(s,{addons:[]}).delete()},exists:function(s){return new ir(s,{addons:[]}).open().then(function(o){return o.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(s){try{return o=ir.dependencies,c=o.indexedDB,o=o.IDBKeyRange,(ci(c)?Promise.resolve(c.databases()).then(function(u){return u.map(function(p){return p.name}).filter(function(p){return p!==Ts})}):ai(c,o).toCollection().primaryKeys()).then(s)}catch{return gt(new H.MissingAPI)}var o,c},defineClass:function(){return function(s){f(this,s)}},ignoreTransaction:function(s){return _e.trans?nr(_e.transless,s):s()},vip:li,async:function(s){return function(){try{var o=mi(s.apply(this,arguments));return o&&typeof o.then=="function"?o:me.resolve(o)}catch(c){return gt(c)}}},spawn:function(s,o,c){try{var u=mi(s.apply(c,o||[]));return u&&typeof u.then=="function"?u:me.resolve(u)}catch(p){return gt(p)}},currentTransaction:{get:function(){return _e.trans||null}},waitFor:function(s,o){return o=me.resolve(typeof s=="function"?ir.ignoreTransaction(s):s).timeout(o||6e4),_e.trans?_e.trans.waitFor(o):o},Promise:me,debug:{get:function(){return te},set:function(s){Re(s)}},derive:L,extend:f,props:v,override:j,Events:Vr,on:Kn,liveQuery:uc,extendObservabilitySet:Ws,getByKeyPath:ge,setByKeyPath:Ce,delByKeyPath:function(s,o){typeof o=="string"?Ce(s,o,void 0):"length"in o&&[].map.call(o,function(c){Ce(s,c,void 0)})},shallowClone:Se,deepClone:ze,getObjectDiff:yi,cmp:Ke,asap:se,minKey:-1/0,addons:[],connections:kr,errnames:J,dependencies:Gs,cache:or,semVer:"4.2.0",version:"4.2.0".split(".").map(function(s){return parseInt(s)}).reduce(function(s,o,c){return s+o/Math.pow(10,2*c)})})),ir.maxKey=Yr(ir.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Kn(Qr,function(s){Un||(s=new CustomEvent(ei,{detail:s}),Un=!0,dispatchEvent(s),Un=!1)}),addEventListener(ei,function(s){s=s.detail,Un||_i(s)}));var Sr,Un=!1,dc=function(){};return typeof BroadcastChannel<"u"&&((dc=function(){(Sr=new BroadcastChannel(ei)).onmessage=function(s){return s.data&&_i(s.data)}})(),typeof Sr.unref=="function"&&Sr.unref(),Kn(Qr,function(s){Un||Sr.postMessage(s)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(s){if(!An.disableBfCache&&s.persisted){te&&console.debug("Dexie: handling persisted pagehide"),Sr?.close();for(var o=0,c=kr;o<c.length;o++)c[o].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(s){!An.disableBfCache&&s.persisted&&(te&&console.debug("Dexie: handling persisted pageshow"),dc(),_i({all:new Rt(-1/0,[[]])}))})),me.rejectionMapper=function(s,o){return!s||s instanceof Ve||s instanceof TypeError||s instanceof SyntaxError||!s.name||!we[s.name]?s:(o=new we[s.name](o||s.message,s),"stack"in s&&P(o,"stack",{get:function(){return this.inner.stack}}),o)},Re(te),r(An,Object.freeze({__proto__:null,Dexie:An,liveQuery:uc,Entity:La,cmp:Ke,PropModification:Wr,replacePrefix:function(s,o){return new Wr({replacePrefix:[s,o]})},add:function(s){return new Wr({add:s})},remove:function(s){return new Wr({remove:s})},default:An,RangeSet:Rt,mergeRanges:Xr,rangesOverlap:ec}),{default:An}),An})})(po)),po.exports}var Im=Sm();const ra=Am(Im),dl=Symbol.for("Dexie"),Ao=globalThis[dl]||(globalThis[dl]=ra);if(ra.semVer!==Ao.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${ra.semVer} and ${Ao.semVer}`);const{liveQuery:Y_,mergeRanges:G_,rangesOverlap:J_,RangeSet:X_,cmp:Z_,Entity:ew,PropModification:tw,replacePrefix:nw,add:rw,remove:sw,DexieYProvider:ow}=Ao;class Pm extends Ao{cards;card_lots;holdings;transactions;scans;decks;deck_cards;price_points;valuations;settings;scan_sale_links;constructor(){super("MtgTrackerDb"),this.version(1).stores({cards:"id, oracleId, name, set, setCode, number, lang, finish",holdings:"id, cardId, acquisitionId, source, createdAt",transactions:"id, kind, cardId, source, externalRef, happenedAt",scans:"id, cardFingerprint, cardId, source, scannedAt",decks:"id, platform, name, importedAt",deck_cards:"[deckId+cardId], deckId, cardId",price_points:"id, cardId, provider, asOf",valuations:"id, asOf",settings:"k"}),this.version(2).stores({cards:"id, oracleId, name, set, setCode, number, lang, finish, createdAt, updatedAt",holdings:"id, cardId, acquisitionId, source, createdAt, updatedAt",transactions:"id, kind, cardId, source, externalRef, happenedAt, createdAt, updatedAt",scans:"id, cardFingerprint, cardId, source, scannedAt, createdAt, updatedAt",decks:"id, platform, name, importedAt, createdAt, updatedAt",deck_cards:"[deckId+cardId], deckId, cardId, createdAt",price_points:"id, cardId, provider, asOf, createdAt",valuations:"id, asOf, createdAt",settings:"k, createdAt, updatedAt",scan_sale_links:"id, scanId, transactionId, matchedAt, createdAt"}).upgrade(async t=>{const n=new Date;await t.table("cards").toCollection().modify(r=>{r.createdAt=r.createdAt||n,r.updatedAt=r.updatedAt||n}),await t.table("holdings").toCollection().modify(r=>{r.createdAt=r.createdAt||n,r.updatedAt=r.updatedAt||n}),await t.table("transactions").toCollection().modify(r=>{r.createdAt=r.createdAt||n,r.updatedAt=r.updatedAt||n}),await t.table("scans").toCollection().modify(r=>{r.createdAt=r.createdAt||n,r.updatedAt=r.updatedAt||n}),await t.table("decks").toCollection().modify(r=>{r.createdAt=r.createdAt||n,r.updatedAt=r.updatedAt||n}),await t.table("deck_cards").toCollection().modify(r=>{r.createdAt=r.createdAt||n}),await t.table("price_points").toCollection().modify(r=>{r.createdAt=r.createdAt||n}),await t.table("valuations").toCollection().modify(r=>{r.createdAt=r.createdAt||n}),await t.table("settings").toCollection().modify(r=>{r.createdAt=r.createdAt||n,r.updatedAt=r.updatedAt||n})}),this.version(3).stores({cards:"id, oracleId, name, set, setCode, number, lang, finish, createdAt, updatedAt",holdings:"id, cardId, acquisitionId, source, createdAt, updatedAt",transactions:"id, kind, cardId, source, externalRef, happenedAt, createdAt, updatedAt",scans:"id, cardFingerprint, cardId, source, scannedAt, createdAt, updatedAt",decks:"id, platform, name, importedAt, createdAt, updatedAt",deck_cards:"[deckId+cardId], deckId, cardId, createdAt",price_points:"id, cardId, provider, currency, asOf, createdAt, [cardId+asOf], [provider+asOf]",valuations:"id, asOf, createdAt, [asOf+createdAt]",settings:"k, createdAt, updatedAt",scan_sale_links:"id, scanId, transactionId, matchedAt, createdAt"}),this.version(4).stores({cards:"id, oracleId, name, set, setCode, number, lang, finish, createdAt, updatedAt",card_lots:"id, cardId, acquisitionId, source, purchasedAt, disposedAt, createdAt, updatedAt, [cardId+purchasedAt], [acquisitionId+cardId]",holdings:"id, cardId, acquisitionId, source, createdAt, updatedAt",transactions:"id, kind, cardId, lotId, source, externalRef, happenedAt, relatedTransactionId, createdAt, updatedAt, [lotId+kind]",scans:"id, cardFingerprint, cardId, lotId, source, scannedAt, boosterPackId, createdAt, updatedAt, [lotId+scannedAt]",decks:"id, platform, name, importedAt, createdAt, updatedAt",deck_cards:"id, deckId, cardId, lotId, addedAt, removedAt, createdAt, [deckId+cardId], [lotId+addedAt]",price_points:"id, cardId, provider, currency, asOf, source, createdAt, [cardId+asOf], [provider+asOf]",valuations:"id, asOf, createdAt, [asOf+createdAt]",settings:"k, createdAt, updatedAt",scan_sale_links:"id, scanId, transactionId, quantity, matchedAt, createdAt"}).upgrade(async t=>{const n=new Date;await t.table("deck_cards").toCollection().modify(r=>{try{r.id||(r.id=`deckcard-${Date.now()}-${Math.random().toString(36).substr(2,9)}`),r.addedAt||(r.addedAt=r.createdAt||n),r.role||(r.role="main"),(!r.cardId||r.cardId==="")&&(r.cardId="unknown-card"),r.deckId||(r.deckId="unknown-deck"),typeof r.quantity!="number"&&(r.quantity=1),r.createdAt||(r.createdAt=n)}catch(i){console.error("Error upgrading deck card:",i,r);return}})}),this.version(5).stores({cards:"id, oracleId, name, set, setCode, number, lang, finish, createdAt, updatedAt",card_lots:"id, cardId, acquisitionId, source, purchasedAt, disposedAt, createdAt, updatedAt, externalRef, [cardId+purchasedAt], [acquisitionId+cardId], [externalRef]",holdings:"id, cardId, acquisitionId, source, createdAt, updatedAt",transactions:"id, kind, cardId, lotId, source, externalRef, happenedAt, relatedTransactionId, createdAt, updatedAt, [lotId+kind]",scans:"id, cardFingerprint, cardId, lotId, source, scannedAt, boosterPackId, createdAt, updatedAt, [lotId+scannedAt]",decks:"id, platform, name, importedAt, createdAt, updatedAt",deck_cards:"id, deckId, cardId, lotId, addedAt, removedAt, createdAt, [deckId+cardId], [lotId+addedAt]",price_points:"id, cardId, provider, currency, asOf, source, createdAt, [cardId+asOf], [provider+asOf]",valuations:"id, asOf, createdAt, [asOf+createdAt]",settings:"k, createdAt, updatedAt",scan_sale_links:"id, scanId, transactionId, quantity, matchedAt, createdAt"})}}const xe=new Pm,gn={async add(e){return await xe.cards.add(e)},async getById(e){return await xe.cards.get(e)},async getAll(){return await xe.cards.toArray()},async update(e,t){return await xe.cards.update(e,t)},async delete(e){await xe.cards.delete(e)}},It={async add(e){return await xe.card_lots.add(e)},async getById(e){return await xe.card_lots.get(e)},async getAll(){return await xe.card_lots.toArray()},async getByCardId(e){return await xe.card_lots.where("cardId").equals(e).toArray()},async getByExternalRef(e){return await xe.card_lots.where("externalRef").equals(e).toArray()},async getActiveLotsByCardId(e){return await xe.card_lots.where("cardId").equals(e).and(t=>!t.disposedAt).toArray()},async update(e,t){return await xe.card_lots.update(e,t)},async delete(e){await xe.card_lots.delete(e)}},no={async add(e){return await xe.holdings.add(e)},async getById(e){return await xe.holdings.get(e)},async getAll(){return await xe.holdings.toArray()},async getByCardId(e){return await xe.holdings.where("cardId").equals(e).toArray()},async update(e,t){return await xe.holdings.update(e,t)},async delete(e){await xe.holdings.delete(e)}},yn={async add(e){return await xe.transactions.add(e)},async getById(e){return await xe.transactions.get(e)},async getAll(){return await xe.transactions.toArray()},async getByCardId(e){return await xe.transactions.where("cardId").equals(e).toArray()},async getByLotId(e){return await xe.transactions.where("lotId").equals(e).toArray()},async getByKind(e){return await xe.transactions.where("kind").equals(e).toArray()},async getBuyTransactionsByCardId(e){return await xe.transactions.where("cardId").equals(e).and(t=>t.kind==="BUY").toArray()},async getSellTransactionsByCardId(e){return await xe.transactions.where("cardId").equals(e).and(t=>t.kind==="SELL").toArray()},async update(e,t){return await xe.transactions.update(e,t)},async delete(e){await xe.transactions.delete(e)}},sa={async add(e){return await xe.price_points.add(e)},async getById(e){return await xe.price_points.get(e)},async getByCardId(e){return await xe.price_points.where("cardId").equals(e).toArray()},async update(e,t){return await xe.price_points.update(e,t)},async delete(e){await xe.price_points.delete(e)}};class tt{cents;currency;constructor(t,n="EUR"){this.cents=Math.round(t),this.currency=n}static parse(t,n="EUR"){if(typeof t=="number")return new tt(t*100,n);const r=t.replace(/[$\s]/g,"").replace(",","."),i=parseFloat(r);return new tt(isNaN(i)?0:i*100,n)}getCents(){return this.cents}getDecimal(){return this.cents/100}getCurrency(){return this.currency}add(t){if(this.currency!==t.currency)throw new Error("Cannot add Money values with different currencies");return new tt(this.cents+t.cents,this.currency)}subtract(t){if(this.currency!==t.currency)throw new Error("Cannot subtract Money values with different currencies");return new tt(this.cents-t.cents,this.currency)}multiply(t){return new tt(this.cents*t,this.currency)}divide(t){return new tt(this.cents/t,this.currency)}format(t="de-DE"){return new Intl.NumberFormat(t,{style:"currency",currency:this.currency,minimumFractionDigits:2,maximumFractionDigits:2}).format(this.getDecimal())}isZero(){return this.cents===0}isPositive(){return this.cents>0}isNegative(){return this.cents<0}}const Oa=Pa("cards",{state:()=>({cards:{},cardPrices:{},loading:!1,loadingPrices:!1,error:null}),getters:{getCardById:e=>t=>e.cards[t],getAllCards:e=>Object.values(e.cards),getCardsBySet:e=>t=>Object.values(e.cards).filter(n=>n.setCode===t),getCardPrice:e=>t=>e.cardPrices[t]||null},actions:{async loadCards(){this.loading=!0,this.error=null;try{const e=await gn.getAll();this.cards=e.reduce((t,n)=>(t[n.id]=n,t),{})}catch(e){this.error=e instanceof Error?e.message:"Failed to load cards",console.error("Error loading cards:",e)}finally{this.loading=!1}},async loadCardPrices(){this.loadingPrices=!0,this.error=null;try{const e=await xe.price_points.toArray(),t={},n={};e.forEach(r=>{n[r.cardId]||(n[r.cardId]=[]),n[r.cardId].push(r)}),Object.keys(n).forEach(r=>{const i=n[r];if(i.length>0){i.sort((l,d)=>d.asOf.getTime()-l.asOf.getTime());const a=i[0];t[r]=new tt(a.price,a.currency)}}),this.cardPrices=t}catch(e){this.error=e instanceof Error?e.message:"Failed to load card prices",console.error("Error loading card prices:",e)}finally{this.loadingPrices=!1}},async loadCardsAndPrices(){await Promise.all([this.loadCards(),this.loadCardPrices()])},async addCard(e){try{await gn.add(e),this.cards[e.id]=e}catch(t){throw this.error=t instanceof Error?t.message:"Failed to add card",console.error("Error adding card:",t),t}},async updateCard(e,t){try{await gn.update(e,t),this.cards[e]&&(this.cards[e]={...this.cards[e],...t})}catch(n){throw this.error=n instanceof Error?n.message:"Failed to update card",console.error("Error updating card:",n),n}},async removeCard(e){try{await gn.delete(e),delete this.cards[e],delete this.cardPrices[e]}catch(t){throw this.error=t instanceof Error?t.message:"Failed to remove card",console.error("Error removing card:",t),t}}}}),Om=Pa("holdings",{state:()=>({holdings:{},loading:!1,error:null}),getters:{getHoldingById:e=>t=>e.holdings[t],getAllHoldings:e=>Object.values(e.holdings),getHoldingsByCardId:e=>t=>Object.values(e.holdings).filter(n=>n.cardId===t),getTotalQuantityByCardId:e=>t=>Object.values(e.holdings).filter(n=>n.cardId===t).reduce((n,r)=>n+r.quantity,0)},actions:{async loadHoldings(){this.loading=!0,this.error=null;try{const e=await no.getAll();this.holdings=e.reduce((t,n)=>(t[n.id]=n,t),{})}catch(e){this.error=e instanceof Error?e.message:"Failed to load holdings",console.error("Error loading holdings:",e)}finally{this.loading=!1}},async addHolding(e){try{await no.add(e),this.holdings[e.id]=e}catch(t){throw this.error=t instanceof Error?t.message:"Failed to add holding",console.error("Error adding holding:",t),t}},async updateHolding(e,t){try{await no.update(e,t),this.holdings[e]&&(this.holdings[e]={...this.holdings[e],...t})}catch(n){throw this.error=n instanceof Error?n.message:"Failed to update holding",console.error("Error updating holding:",n),n}},async removeHolding(e){try{await no.delete(e),delete this.holdings[e]}catch(t){throw this.error=t instanceof Error?t.message:"Failed to remove holding",console.error("Error removing holding:",t),t}}}}),Rm=Pa("transactions",{state:()=>({transactions:{},loading:!1,error:null}),getters:{getTransactionById:e=>t=>e.transactions[t],getAllTransactions:e=>Object.values(e.transactions),getTransactionsByCardId:e=>t=>Object.values(e.transactions).filter(n=>n.cardId===t),getTransactionsByKind:e=>t=>Object.values(e.transactions).filter(n=>n.kind===t),getTotalValueByKind:e=>t=>Object.values(e.transactions).filter(n=>n.kind===t).reduce((n,r)=>{const i=r.unitPrice*r.quantity,a=r.fees||0,l=r.shipping||0;return t==="BUY"?n+i+a+l:n+i-a-l},0)},actions:{async loadTransactions(){this.loading=!0,this.error=null;try{const e=await yn.getAll();this.transactions=e.reduce((t,n)=>(t[n.id]=n,t),{})}catch(e){this.error=e instanceof Error?e.message:"Failed to load transactions",console.error("Error loading transactions:",e)}finally{this.loading=!1}},async addTransaction(e){try{await yn.add(e),this.transactions[e.id]=e}catch(t){throw this.error=t instanceof Error?t.message:"Failed to add transaction",console.error("Error adding transaction:",t),t}},async updateTransaction(e,t){try{await yn.update(e,t),this.transactions[e]&&(this.transactions[e]={...this.transactions[e],...t})}catch(n){throw this.error=n instanceof Error?n.message:"Failed to update transaction",console.error("Error updating transaction:",n),n}},async removeTransaction(e){try{await yn.delete(e),delete this.transactions[e]}catch(t){throw this.error=t instanceof Error?t.message:"Failed to remove transaction",console.error("Error removing transaction:",t),t}}}});class ro{static async calculateLotValue(t){if(t.cardId){const n=await sa.getByCardId(t.cardId);if(n.length>0){n.sort((l,d)=>d.asOf.getTime()-l.asOf.getTime());const r=n[0],i=new tt(r.price,r.currency),a=t.disposedQuantity?t.quantity-t.disposedQuantity:t.quantity;return i.multiply(a)}}return new tt(0,"EUR")}static async calculateLotCostBasis(t){return new tt(t.unitCost,t.currency||"EUR").multiply(t.quantity)}static async calculateRealizedPnL(){const t=await yn.getByKind("SELL");let n=new tt(0,"EUR");for(const r of t){const i=new tt(r.unitPrice,r.currency).multiply(r.quantity);let a=new tt(0,"EUR");if(r.lotId){const m=await It.getById(r.lotId);m&&(a=new tt(m.unitCost,m.currency||"EUR").multiply(r.quantity))}else r.cardId&&(a=await this.calculateFIFOCostForCard(r.cardId,r.quantity));const l=new tt(r.fees,r.currency),d=new tt(r.shipping,r.currency),f=i.subtract(a).subtract(l).subtract(d);n=n.add(f)}return n}static async calculateFIFOCostForCard(t,n){const i=(await It.getByCardId(t)).filter(d=>!d.disposedAt||d.disposedQuantity&&d.disposedQuantity<d.quantity).sort((d,f)=>d.purchasedAt.getTime()-f.purchasedAt.getTime());let a=n,l=new tt(0,"EUR");for(const d of i){if(a<=0)break;const f=d.disposedQuantity?d.quantity-d.disposedQuantity:d.quantity,m=Math.min(a,f),g=new tt(d.unitCost,d.currency||"EUR").multiply(m);l=l.add(g),a-=m}return l}static async calculatePortfolioValue(){const t=await It.getAll();let n=new tt(0,"EUR");for(const r of t)if(!r.disposedAt||r.disposedQuantity&&r.disposedQuantity<r.quantity){const i=await this.calculateLotValue(r);n=n.add(i)}return n}static async calculateTotalCostBasis(){const t=await It.getAll();let n=new tt(0,"EUR");for(const r of t)if(!r.disposedAt||r.disposedQuantity&&r.disposedQuantity<r.quantity){const i=await this.calculateLotCostBasis(r);n=n.add(i)}return n}static async calculateUnrealizedPnL(){const t=await this.calculatePortfolioValue(),n=await this.calculateTotalCostBasis();return t.subtract(n)}static async getActiveLots(){return(await It.getAll()).filter(n=>!n.disposedAt||n.disposedQuantity&&n.disposedQuantity<n.quantity)}static async getOwnedQuantity(t){const n=await It.getByCardId(t);let r=0;for(const i of n)i.disposedAt?i.disposedQuantity&&i.disposedQuantity<i.quantity&&(r+=i.quantity-i.disposedQuantity):r+=i.quantity;return r}}class rn{static BASE_URL="https://api.scryfall.com";static lastRequestTime=0;static RATE_LIMIT_DELAY=100;static async enforceRateLimit(){const n=Date.now()-this.lastRequestTime;if(n<this.RATE_LIMIT_DELAY){const r=this.RATE_LIMIT_DELAY-n;await new Promise(i=>setTimeout(i,r))}this.lastRequestTime=Date.now()}static async getPriceById(t){try{await this.enforceRateLimit();const n=await fetch(`${this.BASE_URL}/cards/${t}`);if(!n.ok)return null;const i=(await n.json()).prices?.eur;return i?tt.parse(i,"EUR"):null}catch(n){return console.error("Error fetching price from Scryfall:",n),null}}static async getPriceBySetAndNumber(t,n){try{await this.enforceRateLimit();const r=await fetch(`${this.BASE_URL}/cards/${t}/${n}`);if(!r.ok)return null;const a=(await r.json()).prices?.eur;return a?tt.parse(a,"EUR"):null}catch(r){return console.error("Error fetching price from Scryfall:",r),null}}static async getImageUrlById(t){try{await this.enforceRateLimit();const n=await fetch(`${this.BASE_URL}/cards/${t}`);if(!n.ok)return null;const r=await n.json();return r.image_uris?.normal||r.image_uris?.large||r.image_uris?.small||null}catch(n){return console.error("Error fetching image from Scryfall:",n),null}}static async getImageUrlBySetAndNumber(t,n){try{await this.enforceRateLimit();const r=await fetch(`${this.BASE_URL}/cards/${t}/${n}`);if(!r.ok)return null;const i=await r.json();return i.image_uris?.normal||i.image_uris?.large||i.image_uris?.small||null}catch(r){return console.error("Error fetching image from Scryfall:",r),null}}static async getByCardmarketId(t){try{await this.enforceRateLimit();const n=await fetch(`${this.BASE_URL}/cards/cardmarket/${t}`);if(!n.ok){console.error(`Scryfall API error for cardmarket_id ${t}: ${n.status} ${n.statusText}`);try{const r=await n.text();console.error(`Scryfall API error details: ${r}`)}catch{console.error("Could not read error response body")}return null}return await n.json()}catch(n){return console.error("Error fetching card by Cardmarket ID from Scryfall:",n),null}}static async getByCardmarketIds(t){try{if(!t||t.length===0)return[];if(t.length===1){const i=await this.getByCardmarketId(t[0]);return i?[i]:[]}await this.enforceRateLimit();const n=await fetch(`${this.BASE_URL}/cards/collection`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifiers:t.map(i=>({cardmarket_id:i}))})});if(!n.ok){console.error(`Scryfall API error for batch cardmarket_ids: ${n.status} ${n.statusText}`);try{const i=await n.text();console.error(`Scryfall API error details: ${i}`)}catch{console.error("Could not read error response body")}return await this.getByCardmarketIdsIndividually(t)}return(await n.json()).data||[]}catch(n){return console.error("Error fetching cards by Cardmarket IDs from Scryfall:",n),await this.getByCardmarketIdsIndividually(t)}}static async getByCardmarketIdsIndividually(t){const n=[];for(const r of t){const i=await this.getByCardmarketId(r);i&&n.push(i)}return n}static async hydrateCard(t){try{if(t.scryfall_id){await this.enforceRateLimit();const n=await fetch(`${this.BASE_URL}/cards/${t.scryfall_id}`);if(n.ok)return await n.json()}if(t.setCode&&t.collectorNumber){await this.enforceRateLimit();const n=await fetch(`${this.BASE_URL}/cards/${t.setCode}/${t.collectorNumber}`);if(n.ok)return await n.json()}if(t.name&&t.setCode){await this.enforceRateLimit();let n=await fetch(`${this.BASE_URL}/cards/named?exact=${encodeURIComponent(t.name)}&set=${encodeURIComponent(t.setCode)}`);if(n.ok)return await n.json();if(t.version&&(await this.enforceRateLimit(),n=await fetch(`${this.BASE_URL}/cards/named?exact=${encodeURIComponent(t.name)}&set=${encodeURIComponent(t.setCode)}&include_variations=true`),n.ok))return await n.json();if(await this.enforceRateLimit(),n=await fetch(`${this.BASE_URL}/cards/named?fuzzy=${encodeURIComponent(t.name)}&set=${encodeURIComponent(t.setCode)}`),n.ok)return await n.json()}return null}catch(n){return console.error("Error hydrating card with Scryfall data:",n),null}}}class Mi{static async syncPrices(){try{const t=new Date,n=await gn.getAll();for(const r of n)try{const i=await rn.getPriceById(r.id);if(i){const a=t.toISOString().split("T")[0],d={id:`${r.id}:scryfall:${a}`,cardId:r.id,provider:"scryfall",currency:i.getCurrency(),price:i.getCents(),asOf:t,createdAt:t};await xe.price_points.put(d)}}catch(i){console.error(`Error syncing price for card ${r.id}:`,i)}}catch(t){throw console.error("Error syncing prices:",t),t}}static async syncPriceForCard(t){try{const n=new Date,r=await gn.getById(t);if(!r){console.warn(`Card with ID ${t} not found`);return}const i=await rn.getPriceById(r.id);if(i){const a=n.toISOString().split("T")[0],d={id:`${r.id}:scryfall:${a}`,cardId:r.id,provider:"scryfall",currency:i.getCurrency(),price:i.getCents(),asOf:n,createdAt:n};await xe.price_points.put(d)}}catch(n){throw console.error(`Error syncing price for card ${t}:`,n),n}}static async needsPriceUpdate(){try{const t=await xe.price_points.orderBy("asOf").last();if(!t)return!0;const n=new Date,r=new Date(t.asOf);return(n.getTime()-r.getTime())/(1e3*60*60)>=24}catch(t){return console.error("Error checking if price update is needed:",t),!0}}static async needsPriceUpdateForCard(t){try{const n=await sa.getByCardId(t);if(n.length===0)return!0;n.sort((d,f)=>f.asOf.getTime()-d.asOf.getTime());const r=n[0],i=new Date,a=new Date(r.asOf);return(i.getTime()-a.getTime())/(1e3*60*60)>=24}catch(n){return console.error(`Error checking if price update is needed for card ${t}:`,n),!0}}static async getLatestPriceForCard(t){try{const n=await sa.getByCardId(t);if(n.length===0)return null;n.sort((i,a)=>a.asOf.getTime()-i.asOf.getTime());const r=n[0];return{price:r.price,asOf:r.asOf}}catch(n){return console.error(`Error getting latest price for card ${t}:`,n),null}}}const Dm={class:"home"},$m={class:"dashboard-stats row g-4"},Tm={class:"col-lg-3 col-md-6"},Mm={class:"card h-100 border"},Fm={class:"card-body"},Bm={class:"stat-value"},Nm={class:"col-lg-3 col-md-6"},jm={class:"card h-100 border"},Lm={class:"card-body"},qm={class:"stat-value"},Km={class:"col-lg-3 col-md-6"},Um={class:"card h-100 border"},Vm={class:"card-body"},Hm={class:"col-lg-3 col-md-6"},Wm={class:"card h-100 border"},zm={class:"card-body"},Qm=ot({__name:"HomeView",setup(e){const t=Oa(),n=Om(),r=Rm(),i=Ae("0.00"),a=Ae("0.00"),l=Ae("0.00"),d=Ae("0.00"),f=g=>g.format("de-DE"),m=async()=>{try{await t.loadCards(),await n.loadHoldings(),await r.loadTransactions();const g=await ro.calculatePortfolioValue(),v=await ro.calculateTotalCostBasis(),x=await ro.calculateUnrealizedPnL(),P=await ro.calculateRealizedPnL();i.value=f(g),a.value=f(v),l.value=f(x),d.value=f(P)}catch(g){console.error("Error loading dashboard data:",g)}},h=async()=>{try{await Mi.syncPrices(),await m(),alert("Prices refreshed successfully")}catch(g){console.error("Error refreshing prices:",g),alert("Failed to refresh prices: "+g.message)}};return er(async()=>{if(await Mi.needsPriceUpdate())try{await Mi.syncPrices()}catch(v){console.error("Error updating prices on app start:",v)}await m()}),(g,v)=>(K(),Z("div",Dm,[v[4]||(v[4]=w("h1",null,"MTG Collection Value Tracker",-1)),w("div",$m,[w("div",Tm,[w("div",Mm,[w("div",Fm,[v[0]||(v[0]=w("h2",{class:"card-title"},"Portfolio Value",-1)),w("p",Bm,ie(i.value),1)])])]),w("div",Nm,[w("div",jm,[w("div",Lm,[v[1]||(v[1]=w("h2",{class:"card-title"},"Total Cost",-1)),w("p",qm,ie(a.value),1)])])]),w("div",Km,[w("div",Um,[w("div",Vm,[v[2]||(v[2]=w("h2",{class:"card-title"},"Unrealized P/L",-1)),w("p",{class:Et(["stat-value",parseFloat(l.value)>=0?"positive":"negative"])},ie(l.value),3)])])]),w("div",Hm,[w("div",Wm,[w("div",zm,[v[3]||(v[3]=w("h2",{class:"card-title"},"Realized P/L",-1)),w("p",{class:Et(["stat-value",parseFloat(d.value)>=0?"positive":"negative"])},ie(d.value),3)])])])]),w("div",{class:"actions"},[w("button",{onClick:h,class:"btn btn-primary"},"Refresh Prices")])]))}}),Ym=Fn(Qm,[["__scopeId","data-v-2445d0f8"]]),Wt=e=>e.toLowerCase().normalize("NFKD").replace(new RegExp("\\p{Diacritic}","gu"),"").replace(/[\s-]+/g," ").replace(/[:'"]/g,"").trim();function jr(e){const t=new Map;for(const n of e)t.set(Wt(n.name),n);return{byName:t}}async function Gm(e){const t=e.trim(),n=Wt(t),r=await fl(),a=(await Jm()).get(n);if(a)return console.log(`Set code resolved from alias: ${t} -> ${a}`),a;const l=r.byName.get(n);if(l)return console.log(`Set code resolved from exact match: ${t} -> ${l.code}`),await Gt(n,l.code),l.code;if(/^commander:\s*/i.test(t)&&/: extras$/i.test(t)){const m=t.replace(/^commander:\s*/i,"").replace(/: extras$/i,"").trim(),h=r.byName.get(Wt(`${m} Commander`));if(h)return console.log(`Set code resolved from commander + extras nested: ${t} -> ${h.code}`),await Gt(n,h.code),h.code;const g=r.byName.get(Wt(m));if(g)return console.log(`Set code resolved from commander + extras nested (base): ${t} -> ${g.code}`),await Gt(n,g.code),g.code}if(/^commander:\s*/i.test(t)){const m=t.replace(/^commander:\s*/i,"").trim(),h=r.byName.get(Wt(`${m} Commander`));if(h)return console.log(`Set code resolved from commander rewrite (commander): ${t} -> ${h.code}`),await Gt(n,h.code),h.code;const g=r.byName.get(Wt(m));if(g)return console.log(`Set code resolved from commander rewrite (base): ${t} -> ${g.code}`),await Gt(n,g.code),g.code}if(/: extras$/i.test(t)){const m=Wt(t.replace(/: extras$/i,"")),h=r.byName.get(m);if(h)return console.log(`Set code resolved from extras suffix: ${t} -> ${h.code}`),await Gt(n,h.code),h.code}if(/^universes beyond:\s*/i.test(t)){const m=t.replace(/^universes beyond:\s*/i,"").trim();if(/: extras$/i.test(m)){const g=Wt(m.replace(/: extras$/i,"")),v=r.byName.get(g);if(v)return console.log(`Set code resolved from universes beyond + extras: ${t} -> ${v.code}`),await Gt(n,v.code),v.code}const h=r.byName.get(Wt(m));if(h)return console.log(`Set code resolved from universes beyond: ${t} -> ${h.code}`),await Gt(n,h.code),h.code}if(/^magic: the gathering -\s*/i.test(t)){const m=t.replace(/^magic: the gathering -\s*/i,"").trim();if(/: extras$/i.test(m)){const g=Wt(m.replace(/: extras$/i,"")),v=r.byName.get(g);if(v)return console.log(`Set code resolved from magic: the gathering - extras: ${t} -> ${v.code}`),await Gt(n,v.code),v.code}const h=r.byName.get(Wt(m));if(h)return console.log(`Set code resolved from magic: the gathering -: ${t} -> ${h.code}`),await Gt(n,h.code),h.code}if(/^secret lair drop series:/i.test(t)){const m=t.replace(/^secret lair drop series:/i,"").trim();if(/: extras$/i.test(m)){const g=Wt(m.replace(/: extras$/i,"")),v=r.byName.get(g);if(v)return console.log(`Set code resolved from secret lair drop series + extras: ${t} -> ${v.code}`),await Gt(n,v.code),v.code}const h=r.byName.get(Wt(m));if(h)return console.log(`Set code resolved from secret lair drop series: ${t} -> ${h.code}`),await Gt(n,h.code),h.code}console.log(`Set code unresolved: ${t}`),await Hu();const f=(await fl()).byName.get(n);return f?(console.log(`Set code resolved from fresh exact match: ${t} -> ${f.code}`),f.code):(await Gt(n,null),null)}async function fl(){try{const e=Date.now()-6048e5,t=await xe.settings.get("scryfall_sets_cache");return t&&t.v&&t.v.fetchedAt>e?(console.log("Using cached Scryfall sets data"),jr(t.v.sets)):(console.log("Refreshing Scryfall sets cache (no cache or old cache)"),await Hu())}catch(e){console.error("Error in getSetIndex:",e);try{const t=await xe.settings.get("scryfall_sets_cache");if(t&&t.v)return console.log("Using old cached Scryfall sets data due to error"),jr(t.v.sets)}catch(t){console.error("Error accessing cached Scryfall sets data:",t)}return console.log("Returning empty Scryfall sets index"),jr([])}}async function Hu(){try{console.log("Fetching Scryfall sets data...");const e=await fetch("https://api.scryfall.com/sets");if(!e.ok)throw new Error(`Failed to fetch sets: ${e.status} ${e.statusText}`);const n=(await e.json()).data||[];return console.log(`Fetched ${n.length} Scryfall sets`),await xe.settings.put({k:"scryfall_sets_cache",v:{sets:n,fetchedAt:Date.now()},createdAt:new Date,updatedAt:new Date}),jr(n)}catch(e){console.error("Error refreshing Scryfall sets cache:",e);try{const t=await xe.settings.get("scryfall_sets_cache");if(t&&t.v)return console.log("Using old cached Scryfall sets data due to fetch error"),jr(t.v.sets)}catch(t){console.error("Error accessing cached Scryfall sets data:",t)}return console.log("Returning empty Scryfall sets index due to errors"),jr([])}}async function Jm(){const e=new Map,t=await xe.settings.get("set_code_aliases");if(t&&t.v)for(const[n,r]of Object.entries(t.v))e.set(n,r);return e}async function Gt(e,t){try{const n=Wt(e),r=await xe.settings.get("set_code_aliases");let i={};r&&r.v&&(i={...r.v}),i[n]=t,await xe.settings.put({k:"set_code_aliases",v:i,createdAt:r?.createdAt||new Date,updatedAt:new Date})}catch(n){console.error("Error storing set code alias:",n)}}class fr{static async importCardmarketTransactions(t){try{const n=new Date;for(const r of t){const i=`cardmarket:${r.reference}:${r.lineNumber}`;if(await xe.transactions.where("externalRef").equals(i).first())continue;const l=tt.parse(r.amount,"EUR"),d={id:`tx-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,kind:l.isPositive()?"SELL":"BUY",quantity:1,unitPrice:l.getCents(),fees:0,shipping:0,currency:"EUR",source:"cardmarket",externalRef:i,happenedAt:new Date(r.date),createdAt:n,updatedAt:n};await yn.add(d)}}catch(n){throw console.error("Error importing Cardmarket transactions:",n),n}}static async importCardmarketOrders(t){try{const n=new Date;for(const r of t){const i=`cardmarket:order:${r.orderId}:${r.lineNumber}`;if(await xe.transactions.where("externalRef").equals(i).first())continue;const l=tt.parse(r.merchandiseValue,"EUR"),d=tt.parse(r.shipmentCosts,"EUR"),f=tt.parse(r.commission,"EUR"),m={id:`order-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,kind:r.direction==="sale"?"SELL":"BUY",quantity:parseInt(r.articleCount)||1,unitPrice:Math.round(l.getCents()/(parseInt(r.articleCount)||1)),fees:f.getCents(),shipping:d.getCents(),currency:"EUR",source:"cardmarket",externalRef:i,happenedAt:new Date(r.dateOfPurchase),createdAt:n,updatedAt:n};await yn.add(m)}}catch(n){throw console.error("Error importing Cardmarket orders:",n),n}}static async importCardmarketArticles(t){try{const n=new Date;for(const r of t){let i=null,a=null;if(r.productId){const v=r.productId.split(" | ").map(x=>x.trim());if(v.length===1)i=await rn.getByCardmarketId(v[0]),console.log(JSON.stringify({product_ids:v,resolved_via:"cardmarket_id",cardmarket_id:v[0],final_uri:`/cards/cardmarket/${v[0]}`}));else if(v.length>1){const x=await rn.getByCardmarketIds(v);x&&x.length>0&&(i=x[0],console.log(JSON.stringify({product_ids:v,resolved_via:"cardmarket_id",cardmarket_id:v[0],final_uri:"/cards/collection"})))}a=i?.id||null}const l=v=>{const x=[/-\s*(\d+[a-zA-Z]*)\s*-/i,/-\s*([IVXLCDM]+)\s*-/i,/\s+(\d+[a-zA-Z]*)\s*$/i,/\((\d+[a-zA-Z]*)\)/i];for(const P of x){const L=v.match(P);if(L)return L[1]}return""};if(!a){const v=await Gm(r.expansion);let x=r.name,P=null;const L=r.name.match(/^(.+?)\s*\((V\.\d+)\)$/i);L&&(x=L[1].trim(),P=L[2]);let Q=l(r.name);console.log(JSON.stringify({product_ids:r.productId?r.productId.split(" | ").map(G=>G.trim()):[],resolved_via:"set+cn",set_code:v,collector_number:Q,final_uri:v?`/cards/${v}/${Q}`:""})),i=await rn.hydrateCard({name:x,setCode:v||r.expansion,collectorNumber:Q,version:P}),a=i?.id||null,a||console.log(JSON.stringify({product_ids:r.productId?r.productId.split(" | ").map(G=>G.trim()):[],resolved_via:"none",set_code:null,collector_number:"",final_uri:"",name:r.name,expansion:r.expansion}))}const d=tt.parse(r.price,"EUR");if(a)if(await gn.getById(a))try{const x=n.toISOString().split("T")[0],P=`${a}:scryfall:${x}`;if(!await xe.price_points.get(P)){const Q=await rn.getPriceById(a);if(Q){const G={id:P,cardId:a,provider:"scryfall",currency:Q.getCurrency(),price:Q.getCents(),asOf:n,createdAt:n};await xe.price_points.put(G)}}}catch(x){console.error(`Error checking/updating price for existing card ${a}:`,x)}else{const x=i||await rn.hydrateCard({scryfall_id:a,name:r.name,setCode:r.expansion,collectorNumber:""}),P=await rn.getImageUrlById(a);let L=l(r.name);const Q={id:a,oracleId:x?.oracle_id||i?.oracle_id||"",name:r.name,set:x?.set_name||i?.set_name||r.expansion,setCode:x?.set||i?.set||r.expansion,number:x?.collector_number||i?.collector_number||L||"",lang:x?.lang||i?.lang||"en",finish:"nonfoil",imageUrl:P||"",createdAt:n,updatedAt:n};await gn.add(Q);try{const G=await rn.getPriceById(a);if(G){const ne=n.toISOString().split("T")[0],F={id:`${a}:scryfall:${ne}`,cardId:a,provider:"scryfall",currency:G.getCurrency(),price:G.getCents(),asOf:n,createdAt:n};await xe.price_points.put(F)}}catch(G){console.error(`Error fetching price for new card ${a}:`,G)}}let f;if(r.direction==="purchase"){const v=`cardmarket:lot:${r.shipmentId}:${r.lineNumber}`,x=await It.getByExternalRef(v);let P=null;if(x.length>0)P=x[0];else{const L=await It.getByCardId(a||"");for(const Q of L)if(!(await yn.getByLotId(Q.id)).some(j=>j.kind==="BUY")){P=Q;break}}if(P)await It.update(P.id,{unitCost:d.getCents(),source:"cardmarket",purchasedAt:new Date(r.dateOfPurchase),updatedAt:n}),f=P.id;else{const L=`lot-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,Q={id:L,cardId:a||"",quantity:parseInt(r.amount)||1,unitCost:d.getCents(),condition:"",language:"",foil:!1,finish:"nonfoil",source:"cardmarket",currency:"EUR",externalRef:v,purchasedAt:new Date(r.dateOfPurchase),createdAt:n,updatedAt:n};await It.add(Q),f=L}}const m=`cardmarket:article:${r.shipmentId}:${r.lineNumber}`;if(await xe.transactions.where("externalRef").equals(m).first())continue;const g={id:`article-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,kind:r.direction==="sale"?"SELL":"BUY",cardId:a||void 0,lotId:f,quantity:parseInt(r.amount)||1,unitPrice:d.getCents(),fees:0,shipping:0,currency:"EUR",source:"cardmarket",externalRef:m,happenedAt:new Date(r.dateOfPurchase),createdAt:n,updatedAt:n};await yn.add(g)}}catch(n){throw console.error("Error importing Cardmarket articles:",n),n}}static async getOrCreateLotForPurchase(t,n,r,i){const a=new Date,l=await It.getByCardId(t);for(const m of l)if(!(await yn.getByLotId(m.id)).some(v=>v.kind==="BUY"))return await It.update(m.id,{unitCost:r,quantity:m.quantity+n,source:"cardmarket",purchasedAt:i,updatedAt:a}),m.id;const d=`lot-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,f={id:d,cardId:t,quantity:n,unitCost:r,condition:"NM",language:"en",foil:!1,finish:"nonfoil",source:"cardmarket",currency:"EUR",purchasedAt:i,createdAt:a,updatedAt:a};return await It.add(f),d}static async getLotForSale(t,n){const i=(await It.getByCardId(t)).filter(a=>!a.disposedAt||a.disposedQuantity&&a.disposedQuantity<a.quantity).sort((a,l)=>a.purchasedAt.getTime()-l.purchasedAt.getTime());for(const a of i){const l=a.disposedQuantity?a.quantity-a.disposedQuantity:a.quantity;if(l>=n)return{lotId:a.id,remainingQuantity:l-n}}return null}static async checkForExistingImports(t){const n=[];for(const r of t){const i=`cardmarket:article:${r.shipmentId}:${r.lineNumber}`,a=await xe.transactions.where("externalRef").equals(i).first();n.push({article:r,exists:!!a})}return n}}const Xm={class:"csv-import"},Zm={class:"import-section"},ey={class:"mb-3"},ty={class:"mb-3"},ny={class:"mb-3"},ry={class:"import-section"},sy={class:"mb-3"},oy=ot({__name:"CsvImportView",setup(e){const t=Ae(null),n=(d,f)=>{t.value={type:d,message:f},setTimeout(()=>{t.value=null},5e3)},r=async d=>{const f=d.target,m=f.files?.[0];if(m)try{const g=(await m.text()).split(`
`),v=g[0].split(";").map(P=>P.trim()),x=[];for(let P=1;P<g.length;P++){const L=g[P].trim();if(!L)continue;const Q=L.split(";"),G={};for(let ne=0;ne<v.length;ne++){const j=v[ne].toLowerCase(),F=Q[ne]?Q[ne].trim():"";switch(j){case"reference":case"referenz":case"transaktions-id":G.reference=F;break;case"date":case"datum":case"date paid":G.date=F;break;case"category":case"kategorie":G.category=F;break;case"type":case"typ":G.type=F;break;case"counterpart":case"gegenpartei":G.counterpart=F;break;case"amount":case"betrag":G.amount=F;break;case"closing balance (eur)":case"balance after":case"saldo danach (eur)":G.balanceAfter=F;break}}G.reference&&(G.currency="EUR",x.push(G))}await fr.importCardmarketTransactions(x),n("success",`Successfully imported ${x.length} transactions`),f.value=""}catch(h){console.error("Error importing transactions:",h),n("error","Failed to import transactions: "+h.message)}},i=async d=>{const f=d.target,m=f.files?.[0];if(m)try{const g=m.name.toLowerCase().includes("purchased")?"purchase":"sale",x=(await m.text()).split(`
`),P=x[0].split(";").map(Q=>Q.trim()),L=[];for(let Q=1;Q<x.length;Q++){const G=x[Q].trim();if(!G)continue;const ne=G.split(";"),j={};for(let F=0;F<P.length;F++){const se=P[F].toLowerCase(),ge=ne[F]?ne[F].trim():"";switch(se){case"order id":case"orderid":case"bestellnummer":j.orderId=ge;break;case"date of purchase":case"date":case"date of payment":case"kaufdatum":case"zahlungsdatum":j.dateOfPurchase=ge;break;case"username":case"benutzername":j.username=ge;break;case"country":case"land":j.country=ge;break;case"city":case"stadt":j.city=ge;break;case"article count":case"items":case"anzahl artikel":j.articleCount=ge;break;case"merchandise value":case"warenwert":j.merchandiseValue=ge;break;case"shipment costs":case"versandkosten":j.shipmentCosts=ge;break;case"commission":case"trustee service fee":case"provision":j.commission=ge;break;case"total value":case"gesamtwert":j.totalValue=ge;break}}j.orderId&&(j.direction=g,j.currency="EUR",L.push(j))}await fr.importCardmarketOrders(L),n("success",`Successfully imported ${L.length} ${g} orders`),f.value=""}catch(h){console.error("Error importing orders:",h),n("error","Failed to import orders: "+h.message)}},a=async d=>{const f=d.target,m=f.files?.[0];if(m)try{const g=m.name.toLowerCase().includes("purchased")?"purchase":"sale",x=(await m.text()).split(`
`),P=x[0].split(";").map(Q=>Q.trim()),L=[];for(let Q=1;Q<x.length;Q++){const G=x[Q].trim();if(!G)continue;const ne=G.split(";"),j={};for(let F=0;F<P.length;F++){const se=P[F].toLowerCase(),ge=ne[F]?ne[F].trim():"";switch(se){case"shipment nr.":case"shipment nr":case"shipment id":case"order id":case"bestellnummer":j.shipmentId=ge;break;case"date of purchase":case"date":j.dateOfPurchase=ge;break;case"product id":case"produkt id":j.productId=ge;break;case"article":case"artikel":case"localized product name":case"produktname":j.name=ge;break;case"expansion":case"erweiterung":j.expansion=ge;break;case"category":case"kategorie":j.category=ge;break;case"amount":case"anzahl":j.amount=ge;break;case"article value":case"price":case"preis":j.price=ge;break;case"total":j.total=ge;break;case"currency":j.currency=ge;break;case"comments":j.comments=ge;break}}j.shipmentId&&(j.direction=g,j.currency||(j.currency="EUR"),L.push(j))}await fr.importCardmarketArticles(L),n("success",`Successfully imported ${L.length} ${g} articles`),f.value=""}catch(h){console.error("Error importing articles:",h),n("error","Failed to import articles: "+h.message)}},l=async d=>{const f=d.target;f.files?.[0]&&(n("success","ManaBox import functionality would be implemented here"),f.value="")};return(d,f)=>(K(),Z("div",Xm,[f[8]||(f[8]=w("h1",null,"Import CSV Files",-1)),w("div",Zm,[f[3]||(f[3]=w("h2",null,"Cardmarket Data",-1)),f[4]||(f[4]=w("p",null,"Import your Cardmarket transaction data to track your purchases and sales.",-1)),w("div",ey,[f[0]||(f[0]=w("label",{for:"transactions-csv",class:"form-label"}," Upload Transactions CSV ",-1)),w("input",{id:"transactions-csv",type:"file",accept:".csv",onChange:r,class:"form-control"},null,32)]),w("div",ty,[f[1]||(f[1]=w("label",{for:"orders-csv",class:"form-label"}," Upload Orders CSV ",-1)),w("input",{id:"orders-csv",type:"file",accept:".csv",onChange:i,class:"form-control"},null,32)]),w("div",ny,[f[2]||(f[2]=w("label",{for:"articles-csv",class:"form-label"}," Upload Articles CSV ",-1)),w("input",{id:"articles-csv",type:"file",accept:".csv",onChange:a,class:"form-control"},null,32)])]),w("div",ry,[f[6]||(f[6]=w("h2",null,"ManaBox Scans",-1)),f[7]||(f[7]=w("p",null,"Import your ManaBox scan data to track your physical collection.",-1)),w("div",sy,[f[5]||(f[5]=w("label",{for:"manabox-csv",class:"form-label"}," Upload ManaBox CSV ",-1)),w("input",{id:"manabox-csv",type:"file",accept:".csv",onChange:l,class:"form-control"},null,32)])]),t.value?(K(),Z("div",{key:0,class:Et(["status-message",t.value.type])},ie(t.value.message),3)):$e("",!0)]))}}),iy=Fn(oy,[["__scopeId","data-v-a64310e9"]]);function ay(e){return new Worker("/mtg-pwa/assets/cardmarketCsv-GHGAoa0o.js",{name:e?.name})}const cy={class:"cardmarket-wizard"},ly={class:"wizard-progress"},uy={class:"step-number"},dy={class:"step-label"},fy={class:"card"},py={class:"card-body"},hy={class:"wizard-content"},my={key:0,class:"step-content"},yy={class:"file-upload-section"},gy={class:"mb-3"},vy={key:0,class:"files-info"},by={class:"file-list"},_y={class:"file-name"},wy={class:"file-type"},xy={class:"file-size"},ky={key:0,class:"error-messages"},Cy={key:1,class:"step-content"},Ay={key:0,class:"preview-stats"},Ey={class:"stat"},Sy={class:"stat-value"},Iy={class:"stat"},Py={class:"stat-value"},Oy={class:"stat"},Ry={class:"stat-value"},Dy={key:1,class:"preview-table-container"},$y={class:"preview-table-wrapper"},Ty={class:"preview-table"},My={key:0},Fy={key:1},By={key:2},Ny={key:3},jy={key:4},Ly={key:5},qy={key:6},Ky={key:7},Uy={key:8},Vy={key:9},Hy={key:10},Wy={key:11},zy={key:12},Qy={key:13},Yy={key:14},Gy={key:0},Jy={key:1},Xy={key:2},Zy={key:3},eg={key:4},tg={key:5},ng={key:6},rg={key:7},sg={key:8},og={key:9},ig={key:10},ag={key:11},cg={key:12},lg={key:13},ug={key:14},dg={key:0},fg=["colspan"],pg={key:2,class:"invalid-rows-section"},hg={class:"invalid-rows"},mg={class:"row-number"},yg={class:"row-errors"},gg={key:0,class:"more-rows"},vg={key:2,class:"step-content"},bg={key:0,class:"conflicts-section"},_g={class:"conflicts-list"},wg={class:"flex-grow-1"},xg={class:"fw-medium"},kg={class:"small text-muted"},Cg={key:1,class:"conflicts-section"},Ag={class:"conflicts-list"},Eg={class:"flex-grow-1"},Sg={class:"fw-medium"},Ig={class:"small text-muted"},Pg={key:3,class:"step-content"},Og={class:"summary-stats"},Rg={class:"stat"},Dg={class:"stat-value"},$g={class:"stat"},Tg={class:"stat-value"},Mg={key:0,class:"stat"},Fg={class:"stat-value"},Bg={class:"summary-details"},Ng={class:"summary-grid"},jg={class:"summary-item"},Lg={class:"summary-value"},qg={class:"summary-item"},Kg={class:"summary-value"},Ug={class:"summary-item"},Vg={class:"summary-value"},Hg={class:"wizard-navigation pt-3"},Wg=["disabled"],zg=["disabled"],Qg=ot({__name:"CardmarketImportWizard",setup(e){const t=[{key:"upload",title:"Upload"},{key:"preview",title:"Preview"},{key:"conflicts",title:"Conflicts"},{key:"summary",title:"Summary"}],n=Ae(0),r=Ae([]),i=Ae({}),a=Ae({}),l=Ae({}),d=Ae(null),f=Ae(!1),m=Ae({}),h=Ae([]),g=z=>{if(z===0)return"0 Bytes";const V=1024,N=["Bytes","KB","MB","GB"],Ie=Math.floor(Math.log(z)/Math.log(V));return parseFloat((z/Math.pow(V,Ie)).toFixed(2))+" "+N[Ie]},v=z=>new Intl.NumberFormat("en-EU",{style:"currency",currency:"EUR"}).format(z/100),x=async z=>{const N=z.target.files;if(!(!N||N.length===0)){h.value=[],r.value=Array.from(N);try{for(const Ie of r.value){if(!Ie.name.endsWith(".csv")){h.value.push(`File ${Ie.name} is not a CSV file.`);continue}const ve=await Ie.text();i.value[Ie.name]=ve,a.value[Ie.name]=it(Ie.name)}await P()}catch(Ie){h.value.push("Failed to read the files: "+Ie.message)}}},P=async()=>{try{l.value={};for(const[z,V]of Object.entries(i.value)){const N=a.value[z];if(N==="unknown"){console.warn(`Skipping unknown file type: ${z}`);continue}const Ie=new ay;let ve="",Ve="sale";switch(N){case"transactions":ve="parseTransactions";break;case"sold-orders":ve="parseOrders",Ve="sale";break;case"purchased-orders":ve="parseOrders",Ve="purchase";break;case"sold-articles":ve="parseArticles",Ve="sale";break;case"purchased-articles":ve="parseArticles",Ve="purchase";break}Ie.postMessage({type:ve,data:V,direction:Ve});const Ht=await new Promise((Nt,pt)=>{Ie.onmessage=J=>{const{type:be,result:H,error:we}=J.data;console.log("Worker response type:",be),we?pt(new Error(we)):Nt(H)},Ie.onerror=J=>{pt(J)}});l.value[N]=Ht,Ie.terminate()}await Me()}catch(z){h.value.push("Failed to parse CSV data: "+z.message)}},L=st(()=>n.value===0?r.value.length>0&&h.value.length===0:!0),Q=async()=>{L.value&&(n.value===0&&await P(),n.value<t.length-1&&n.value++)},G=()=>{n.value>0&&n.value--},ne=async()=>{if(!f.value){f.value=!0,d.value=null;try{for(const[z,V]of Object.entries(l.value)){if(!V||V.length===0)continue;const N=ze(V,z);switch(z){case"transactions":await fr.importCardmarketTransactions(N);break;case"sold-orders":case"purchased-orders":await fr.importCardmarketOrders(N);break;case"sold-articles":case"purchased-articles":await fr.importCardmarketArticles(N);break}}d.value={type:"success",message:"Successfully imported all data"}}catch(z){d.value={type:"error",message:"Failed to import data: "+z.message}}finally{f.value=!1}}},j=z=>ze(l.value[z]||[],z),F=z=>ze(l.value[z]||[],z).filter(N=>Oe(z,N)),se=()=>Object.values(l.value).reduce((z,V)=>z+(V?.length||0),0),ge=()=>{let z=0;for(const[V,N]of Object.entries(l.value))N&&(z+=ze(N,V).length);return z},Ce=z=>{if(/^\d{2}\.\d{2}\.\d{4} \d{2}:\d{2}:\d{2}$/.test(z)){const Ie=z.split(" ")[0].split("."),ve=parseInt(Ie[0],10),Ve=parseInt(Ie[1],10)-1,Ht=parseInt(Ie[2],10),Nt=new Date(Ht,Ve,ve);return Nt.getFullYear()===Ht&&Nt.getMonth()===Ve&&Nt.getDate()===ve}if(/^\d{2}\.\d{2}\.\d{4}$/.test(z)){const V=z.split("."),N=parseInt(V[0],10),Ie=parseInt(V[1],10)-1,ve=parseInt(V[2],10),Ve=new Date(ve,Ie,N);return Ve.getFullYear()===ve&&Ve.getMonth()===Ie&&Ve.getDate()===N}if(/^\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}$/.test(z)){const V=new Date(z);return!isNaN(V.getTime())}if(/^\d{4}-\d{2}-\d{2}$/.test(z)){const V=new Date(z);return!isNaN(V.getTime())}return!1},Se=z=>{const V=z.replace(/[$\s]/g,"").replace(",",".");return!isNaN(parseFloat(V))},Ee=z=>{const V=parseInt(z,10);return!isNaN(V)&&V>0};function qe(z){switch(z){case"transactions":return"Transaction Summary";case"sold-orders":return"Sold Orders";case"purchased-orders":return"Purchased Orders";case"sold-articles":return"Sold Articles";case"purchased-articles":return"Purchased Articles";default:return"Unknown File Type"}}const ut=z=>{switch(z){case"transactions":return 5;case"sold-orders":case"purchased-orders":return 6;case"sold-articles":case"purchased-articles":return 8;default:return 5}},Xe=(z,V)=>{const N=[];if(!z.date&&!z.dateOfPurchase)N.push("Date is required");else{const Ie=z.date||z.dateOfPurchase;Ce(Ie)||N.push("Invalid date format (expected DD.MM.YYYY or YYYY-MM-DD)")}return V.includes("articles")?(z.name||N.push("Card name is required"),z.expansion||N.push("Expansion/Set is required"),z.price?Se(z.price)||N.push("Invalid price format (expected numeric value)"):N.push("Price is required"),z.amount?Ee(z.amount)||N.push("Invalid quantity (expected positive integer)"):N.push("Quantity is required"),z.shipmentId||N.push("Order ID is required")):V.includes("orders")?(z.dateOfPurchase?Ce(z.dateOfPurchase)||N.push("Invalid date format (expected DD.MM.YYYY or YYYY-MM-DD)"):N.push("Date is required"),z.orderId||N.push("Order ID is required"),z.articleCount?Ee(z.articleCount)||N.push("Invalid article count (expected positive integer)"):N.push("Article count is required"),z.merchandiseValue?Se(z.merchandiseValue)||N.push("Invalid merchandise value format (expected numeric value)"):N.push("Merchandise value is required")):V==="transactions"&&(z.reference||N.push("Reference is required"),z.amount?Se(z.amount)||N.push("Invalid amount format (expected numeric value)"):N.push("Amount is required"),z.category||N.push("Category is required"),z.type||N.push("Type is required")),N},ze=(z,V="articles")=>z.filter(N=>Xe(N,V).length===0),wt=(z,V="articles")=>z.map((N,Ie)=>({index:Ie,row:N,errors:Xe(N,V)})).filter(N=>N.errors.length>0),it=z=>{const V=z.toLowerCase();return V.includes("transaction")?"transactions":V.includes("sold orders")?"sold-orders":V.includes("purchased orders")?"purchased-orders":V.includes("sold articles")?"sold-articles":V.includes("purchased articles")?"purchased-articles":"unknown"},Me=async()=>{try{m.value={};for(const[z,V]of Object.entries(l.value))if(!(!V||V.length===0)&&z.includes("articles")){const N=await fr.checkForExistingImports(V);for(const Ie of N){const ve=`${z}:${Ie.article.shipmentId}:${Ie.article.lineNumber}`;m.value[ve]=Ie.exists}}}catch(z){console.error("Error checking for existing imports:",z)}},Oe=(z,V)=>{const N=`${z}:${V.shipmentId}:${V.lineNumber}`;return!!m.value[N]};return(z,V)=>(K(),Z("div",cy,[V[30]||(V[30]=w("h1",null,"Cardmarket Import Wizard",-1)),w("div",ly,[(K(),Z(nt,null,Ut(t,(N,Ie)=>w("div",{key:N.key,class:Et(["step",{active:n.value===Ie,completed:Ie<n.value}])},[w("div",uy,ie(Ie+1),1),w("div",dy,ie(N.title),1)],2)),64))]),w("div",fy,[w("div",py,[w("div",hy,[n.value===0?(K(),Z("div",my,[V[2]||(V[2]=w("h2",null,"Upload CSV Files",-1)),V[3]||(V[3]=w("p",null,"Please select all Cardmarket CSV export files to import. You can select multiple files at once.",-1)),w("div",yy,[w("div",gy,[V[0]||(V[0]=w("label",{for:"csv-files",class:"form-label"}," Choose CSV Files ",-1)),w("input",{id:"csv-files",type:"file",accept:".csv",multiple:"",onChange:x,class:"form-control"},null,32)]),r.value.length>0?(K(),Z("div",vy,[V[1]||(V[1]=w("h3",null,"Uploaded Files",-1)),w("ul",by,[(K(!0),Z(nt,null,Ut(r.value,N=>(K(),Z("li",{key:N.name,class:"file-item"},[w("span",_y,ie(N.name),1),w("span",wy,"("+ie(it(N.name))+")",1),w("span",xy,"- "+ie(g(N.size)),1)]))),128))])])):$e("",!0)]),h.value.length>0?(K(),Z("div",ky,[(K(!0),Z(nt,null,Ut(h.value,N=>(K(),Z("div",{key:N,class:"error-message"},ie(N),1))),128))])):$e("",!0)])):n.value===1?(K(),Z("div",Cy,[V[11]||(V[11]=w("h2",null,"Preview Data",-1)),V[12]||(V[12]=w("p",null,"Review the data that will be imported. Check for any issues before proceeding.",-1)),(K(!0),Z(nt,null,Ut(a.value,(N,Ie)=>(K(),Z("div",{key:Ie,class:"file-preview"},[w("h3",null,ie(qe(N)),1),l.value[N]&&l.value[N].length>0?(K(),Z("div",Ay,[w("div",Ey,[w("div",Sy,ie(l.value[N].length),1),V[4]||(V[4]=w("div",{class:"stat-label"},"Total Rows",-1))]),w("div",Iy,[w("div",Py,ie(ze(l.value[N],N).length),1),V[5]||(V[5]=w("div",{class:"stat-label"},"Valid Rows",-1))]),w("div",Oy,[w("div",Ry,ie(wt(l.value[N],N).length),1),V[6]||(V[6]=w("div",{class:"stat-label"},"Invalid Rows",-1))])])):$e("",!0),l.value[N]&&l.value[N].length>0?(K(),Z("div",Dy,[V[8]||(V[8]=w("h4",null,"Valid Data Preview",-1)),w("div",$y,[w("table",Ty,[w("thead",null,[w("tr",null,[N==="transactions"?(K(),Z("th",My,"Reference")):(K(),Z("th",Fy,"Line")),V[7]||(V[7]=w("th",null,"Date",-1)),N.includes("articles")?(K(),Z("th",By,"Card Name")):$e("",!0),N.includes("articles")?(K(),Z("th",Ny,"Expansion")):$e("",!0),N.includes("articles")?(K(),Z("th",jy,"Price")):$e("",!0),N.includes("articles")?(K(),Z("th",Ly,"Quantity")):$e("",!0),N.includes("articles")?(K(),Z("th",qy,"Order ID")):$e("",!0),N.includes("articles")?(K(),Z("th",Ky,"Status")):$e("",!0),N.includes("orders")?(K(),Z("th",Uy,"Order ID")):$e("",!0),N.includes("orders")?(K(),Z("th",Vy,"Username")):$e("",!0),N.includes("orders")?(K(),Z("th",Hy,"Article Count")):$e("",!0),N.includes("orders")?(K(),Z("th",Wy,"Merchandise Value")):$e("",!0),N==="transactions"?(K(),Z("th",zy,"Category")):$e("",!0),N==="transactions"?(K(),Z("th",Qy,"Type")):$e("",!0),N==="transactions"?(K(),Z("th",Yy,"Amount")):$e("",!0)])]),w("tbody",null,[(K(!0),Z(nt,null,Ut(ze(l.value[N],N).slice(0,5),(ve,Ve)=>(K(),Z("tr",{key:Ve},[N==="transactions"?(K(),Z("td",Gy,ie(ve.reference),1)):(K(),Z("td",Jy,ie(ve.lineNumber),1)),w("td",null,ie(ve.date||ve.dateOfPurchase),1),N.includes("articles")?(K(),Z("td",Xy,ie(ve.name),1)):$e("",!0),N.includes("articles")?(K(),Z("td",Zy,ie(ve.expansion),1)):$e("",!0),N.includes("articles")?(K(),Z("td",eg,ie(v(parseFloat(ve.price.replace(/[$\s]/g,"").replace(",","."))*100)),1)):$e("",!0),N.includes("articles")?(K(),Z("td",tg,ie(ve.amount),1)):$e("",!0),N.includes("articles")?(K(),Z("td",ng,ie(ve.shipmentId),1)):$e("",!0),N.includes("articles")?(K(),Z("td",rg,[w("span",{class:Et(Oe(N,ve)?"text-success":"text-primary")},ie(Oe(N,ve)?"Already Imported":"New"),3)])):$e("",!0),N.includes("orders")?(K(),Z("td",sg,ie(ve.orderId),1)):$e("",!0),N.includes("orders")?(K(),Z("td",og,ie(ve.username),1)):$e("",!0),N.includes("orders")?(K(),Z("td",ig,ie(ve.articleCount),1)):$e("",!0),N.includes("orders")?(K(),Z("td",ag,ie(v(parseFloat(ve.merchandiseValue.replace(/[$\s]/g,"").replace(",","."))*100)),1)):$e("",!0),N==="transactions"?(K(),Z("td",cg,ie(ve.category),1)):$e("",!0),N==="transactions"?(K(),Z("td",lg,ie(ve.type),1)):$e("",!0),N==="transactions"?(K(),Z("td",ug,ie(v(parseFloat(ve.amount.replace(/[$\s]/g,"").replace(",","."))*100)),1)):$e("",!0)]))),128)),ze(l.value[N],N).length>5?(K(),Z("tr",dg,[w("td",{colspan:ut(N),class:"more-rows-cell"}," ... and "+ie(ze(l.value[N],N).length-5)+" more rows ",9,fg)])):$e("",!0)])])])])):$e("",!0),wt(l.value[N],N).length>0?(K(),Z("div",pg,[V[9]||(V[9]=w("h4",null,"Invalid Rows",-1)),V[10]||(V[10]=w("p",null,"The following rows have issues and will be skipped:",-1)),w("div",hg,[(K(!0),Z(nt,null,Ut(wt(l.value[N],N).slice(0,3),(ve,Ve)=>(K(),Z("div",{key:Ve,class:"invalid-row"},[w("div",mg,"Row "+ie(ve.row.lineNumber||ve.row.reference),1),w("div",yg,ie(ve.errors.join(", ")),1)]))),128)),wt(l.value[N],N).length>3?(K(),Z("div",gg," ... and "+ie(wt(l.value[N],N).length-3)+" more rows ",1)):$e("",!0)])])):$e("",!0)]))),128))])):n.value===2?(K(),Z("div",vg,[V[19]||(V[19]=w("h2",null,"Resolve Conflicts",-1)),V[20]||(V[20]=w("p",null,"Check for duplicate imports and resolve any conflicts.",-1)),(K(!0),Z(nt,null,Ut(a.value,(N,Ie)=>(K(),Z("div",{key:Ie,class:"file-conflicts"},[w("h3",null,ie(qe(N)),1),N.includes("articles")&&F(N).length>0?(K(),Z("div",bg,[V[14]||(V[14]=w("h4",null,"Already Imported Articles",-1)),V[15]||(V[15]=w("p",null,"The following articles have already been imported and will be skipped:",-1)),w("div",_g,[(K(!0),Z(nt,null,Ut(F(N),(ve,Ve)=>(K(),Z("div",{key:Ve,class:"d-flex justify-content-between align-items-center p-2 bg-light rounded"},[w("div",wg,[w("div",xg,ie(ve.name),1),w("div",kg,ie(ve.expansion)+"  "+ie(ve.amount)+"  "+ie(v(parseFloat(ve.price.replace(/[$\s]/g,"").replace(",","."))*100))+"  Order #"+ie(ve.shipmentId),1)]),V[13]||(V[13]=w("div",{class:"ms-3"},[w("span",{class:"text-success fw-medium"},"Already Imported")],-1))]))),128))])])):$e("",!0),N.includes("articles")&&j(N).length>0?(K(),Z("div",Cg,[V[17]||(V[17]=w("h4",null,"New Articles to Import",-1)),V[18]||(V[18]=w("p",null,"The following articles will be imported:",-1)),w("div",Ag,[(K(!0),Z(nt,null,Ut(j(N).filter(ve=>!Oe(N,ve)),(ve,Ve)=>(K(),Z("div",{key:Ve,class:"d-flex justify-content-between align-items-center p-2 bg-light rounded"},[w("div",Eg,[w("div",Sg,ie(ve.name),1),w("div",Ig,ie(ve.expansion)+"  "+ie(ve.amount)+"  "+ie(v(parseFloat(ve.price.replace(/[$\s]/g,"").replace(",","."))*100))+"  Order #"+ie(ve.shipmentId),1)]),V[16]||(V[16]=w("div",{class:"ms-3"},[w("span",{class:"text-primary fw-medium"},"New")],-1))]))),128))])])):$e("",!0)]))),128))])):n.value===3?(K(),Z("div",Pg,[V[28]||(V[28]=w("h2",null,"Import Summary",-1)),V[29]||(V[29]=w("p",null,"Review the import summary before finalizing.",-1)),(K(!0),Z(nt,null,Ut(a.value,(N,Ie)=>(K(),Z("div",{key:Ie,class:"file-summary"},[w("h3",null,ie(qe(N)),1),w("div",Og,[w("div",Rg,[w("div",Dg,ie(j(N).length),1),V[21]||(V[21]=w("div",{class:"stat-label"},"New Records",-1))]),w("div",$g,[w("div",Tg,ie(wt(l.value[N]||[],N).length),1),V[22]||(V[22]=w("div",{class:"stat-label"},"Invalid Rows",-1))]),N.includes("articles")?(K(),Z("div",Mg,[w("div",Fg,ie(F(N).length),1),V[23]||(V[23]=w("div",{class:"stat-label"},"Already Imported",-1))])):$e("",!0)])]))),128)),w("div",Bg,[V[27]||(V[27]=w("h3",null,"Import Details",-1)),w("div",Ng,[w("div",jg,[V[24]||(V[24]=w("div",{class:"summary-label"},"Files Uploaded",-1)),w("div",Lg,ie(r.value.length),1)]),w("div",qg,[V[25]||(V[25]=w("div",{class:"summary-label"},"Total Rows Parsed",-1)),w("div",Kg,ie(se()),1)]),w("div",Ug,[V[26]||(V[26]=w("div",{class:"summary-label"},"Total Valid Rows",-1)),w("div",Vg,ie(ge()),1)])])]),d.value?(K(),Z("div",{key:0,class:Et(["import-status",d.value.type])},ie(d.value.message),3)):$e("",!0)])):$e("",!0)])])]),w("div",Hg,[n.value>0?(K(),Z("button",{key:0,onClick:G,class:"btn btn-secondary"}," Previous ")):$e("",!0),n.value<t.length-1?(K(),Z("button",{key:1,onClick:Q,class:"btn btn-primary",disabled:!L.value}," Next ",8,Wg)):$e("",!0),n.value===t.length-1?(K(),Z("button",{key:2,onClick:ne,class:"btn btn-primary",disabled:f.value},ie(f.value?"Importing...":"Import Data"),9,zg)):$e("",!0)])]))}}),Yg=Fn(Qg,[["__scopeId","data-v-3d6364bb"]]);class Gg{static normalizeFingerprint(t){return{name:t.name.trim().toLowerCase(),setCode:t.setCode.trim().toLowerCase(),collectorNumber:t.collectorNumber.trim().toLowerCase(),finish:t.finish.trim().toLowerCase(),language:t.language.trim().toLowerCase()}}static compareFingerprints(t,n){const r=this.normalizeFingerprint(t),i=this.normalizeFingerprint(n);return r.name===i.name&&r.setCode===i.setCode&&r.collectorNumber===i.collectorNumber&&r.finish===i.finish&&r.language===i.language}static async resolveFingerprint(t){try{const n=await rn.hydrateCard({name:t.name,setCode:t.setCode,collectorNumber:t.collectorNumber});return n&&n.id?n.id:null}catch(n){return console.error("Error resolving fingerprint:",n),null}}}const Jg={class:"deck-import"},Xg={class:"import-section"},Zg={class:"mb-3"},ev={class:"mb-3"},tv=["disabled"],nv={key:0,class:"progress-container mb-4"},rv={class:"progress"},sv={class:"progress-text"},ov=ot({__name:"DeckImportView",setup(e){const t=Ae(""),n=Ae(""),r=Ae(!1),i=Ae(null),a=Ae(null),l=(f,m)=>{i.value={type:f,message:m},setTimeout(()=>{i.value=null},5e3)},d=async()=>{if(!t.value.trim()){l("error","Please enter a deck name");return}if(!n.value.trim()){l("error","Please paste your decklist");return}r.value=!0,a.value=0;try{const f=n.value.trim().split(`
`).filter(P=>P.trim()),m=f.length,h=P=>new Promise(L=>setTimeout(L,P)),g=`deck-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,v=new Date,x={id:g,platform:"csv",name:t.value.trim(),commander:"",url:"",importedAt:v,createdAt:v,updatedAt:v};await xe.decks.add(x);for(let P=0;P<f.length;P++){const L=f[P].trim();if(!L)continue;a.value=Math.round((P+1)/m*100),await h(0),console.log("Processing line:",L);const Q=L.match(/^(\d+)\s+(.+?)\s*\(([^)]+)\)\s*(\d+)(?:\s*\*F\*\s*)?$/i);if(Q){const[,G,ne,j,F]=Q,se=parseInt(G)||1;if(ne&&j&&F){const ge={name:ne.trim(),setCode:j.trim(),collectorNumber:F.trim(),finish:"nonfoil",language:"en"},Ce=await Gg.resolveFingerprint(ge);if(Ce){if(!await gn.getById(Ce)){const it=await rn.hydrateCard({scryfall_id:Ce,name:ne.trim(),setCode:j.trim(),collectorNumber:F.trim()}),Me=it?.image_uris?.normal||it?.image_uris?.large||it?.image_uris?.small||"",Oe=new Date,z={id:Ce,oracleId:it?.oracle_id||"",name:ne.trim(),set:it?.set_name||j.trim(),setCode:j.trim(),number:F.trim(),lang:it?.lang||"en",finish:"nonfoil",imageUrl:Me,createdAt:Oe,updatedAt:Oe};await gn.add(z)}const wt=(await It.getByCardId(Ce)).reduce((it,Me)=>{if(!Me.disposedAt||Me.disposedQuantity&&Me.disposedQuantity<Me.quantity){const Oe=Me.disposedQuantity?Me.quantity-Me.disposedQuantity:Me.quantity;return it+Oe}return it},0);if(wt<se){const it=se-wt,Me=new Date,z={id:`lot-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,cardId:Ce,quantity:it,unitCost:0,condition:"unknown",language:"en",foil:!1,finish:"nonfoil",source:"deck_import",currency:"EUR",purchasedAt:Me,createdAt:Me,updatedAt:Me};await It.add(z)}}let Se;const Ee=await It.getByCardId(Ce||"");if(Ee.length>0){for(const Xe of Ee)if((Xe.disposedQuantity?Xe.quantity-Xe.disposedQuantity:Xe.quantity)>=se&&!Xe.disposedAt){Se=Xe.id;break}!Se&&Ee.length>0&&(Se=Ee[0].id)}const qe=new Date,ut={id:`deckcard-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,deckId:g||"unknown-deck",cardId:Ce||"unknown-card",lotId:Se,quantity:typeof se=="number"&&se>0?se:1,role:"main",addedAt:qe,createdAt:qe};await xe.deck_cards.put(ut)}}}l("success",`Successfully imported deck: ${t.value}`),t.value="",n.value=""}catch(f){console.error("Error importing deck:",f),l("error","Failed to import deck: "+f.message)}finally{r.value=!1,a.value=null}};return(f,m)=>(K(),Z("div",Jg,[m[7]||(m[7]=w("h1",null,"Import Deck",-1)),w("div",Xg,[m[4]||(m[4]=w("h2",null,"Moxfield Deck Import",-1)),m[5]||(m[5]=w("p",null,"Copy and paste your decklist from Moxfield to track which cards you own and which you're missing.",-1)),w("div",Zg,[m[2]||(m[2]=w("label",{for:"deck-name",class:"form-label"},"Deck Name",-1)),vs(w("input",{id:"deck-name","onUpdate:modelValue":m[0]||(m[0]=h=>t.value=h),type:"text",placeholder:"Enter a name for your deck",class:"form-control"},null,512),[[Ji,t.value]])]),w("div",ev,[m[3]||(m[3]=w("label",{for:"decklist",class:"form-label"},"Decklist",-1)),vs(w("textarea",{id:"decklist","onUpdate:modelValue":m[1]||(m[1]=h=>n.value=h),placeholder:`Paste your decklist here (e.g., 4 Lightning Bolt
2 Counterspell)`,rows:"10",class:"form-control"},null,512),[[Ji,n.value]])]),w("button",{onClick:d,disabled:r.value,class:"btn btn-primary mb-4"},ie(r.value?"Importing...":"Import Deck"),9,tv),a.value!==null?(K(),Z("div",nv,[w("div",rv,[w("div",{class:"progress-bar",style:Ur({width:a.value+"%"})},null,4)]),w("div",sv,ie(a.value)+"%",1)])):$e("",!0),m[6]||(m[6]=w("div",{class:"instructions"},[w("h3",null,"How to copy from Moxfield:"),w("ol",null,[w("li",null,"Open your deck on Moxfield.com"),w("li",null,'Click the "Export" button'),w("li",null,'Select "Text" format'),w("li",null,"Copy the text and paste it here")])],-1))]),i.value?(K(),Z("div",{key:0,class:Et(["status-message",i.value.type])},ie(i.value.message),3)):$e("",!0)]))}}),iv=Fn(ov,[["__scopeId","data-v-9ad190d9"]]),av={class:"decks-view"},cv={class:"header"},lv={key:0,class:"loading"},uv={key:1,class:"empty-state"},dv={key:2,class:"row g-4"},fv=["onClick"],pv={class:"deck-info"},hv={class:"platform"},mv={class:"date"},yv={class:"card-count"},gv=ot({__name:"DecksView",setup(e){const t=Zh(),n=Ae([]),r=Ae(!0),i=Ae({}),a=m=>new Date(m).toLocaleDateString(),l=m=>i.value[m]||0,d=m=>{t.push(`/decks/${m}`)},f=async()=>{try{const m=await xe.decks.toArray();n.value=m;for(const h of m){const g=await xe.deck_cards.where("deckId").equals(h.id).count();i.value[h.id]=g}}catch(m){console.error("Error loading decks:",m)}finally{r.value=!1}};return er(()=>{f()}),(m,h)=>{const g=Bo("router-link");return K(),Z("div",av,[w("div",cv,[h[1]||(h[1]=w("h1",null,"Decks",-1)),Ue(g,{to:"/import/deck",class:"btn btn-primary"},{default:rt(()=>[...h[0]||(h[0]=[zt(" Import Deck ",-1)])]),_:1})]),r.value?(K(),Z("div",lv," Loading decks... ")):n.value.length===0?(K(),Z("div",uv,[h[3]||(h[3]=w("p",null,"You haven't imported any decks yet.",-1)),Ue(g,{to:"/import/deck",class:"btn btn-primary"},{default:rt(()=>[...h[2]||(h[2]=[zt(" Import Your First Deck ",-1)])]),_:1})])):(K(),Z("div",dv,[(K(!0),Z(nt,null,Ut(n.value,v=>(K(),Z("div",{key:v.id,class:"col-lg-4 col-md-6"},[w("div",{class:"deck-card h-100",onClick:x=>d(v.id)},[w("h2",null,ie(v.name),1),w("p",pv,[w("span",hv,ie(v.platform),1),w("span",mv,ie(a(v.importedAt)),1)]),w("p",yv,ie(l(v.id))+" cards",1)],8,fv)]))),128))]))])}}}),vv=Fn(gv,[["__scopeId","data-v-a321a24f"]]);function Wu(e,t){const n=typeof e=="string"&&!t?`${e}Context`:t,r=Symbol(n);return[l=>{const d=Xt(r,l);if(d||d===null)return d;throw new Error(`Injection \`${r.toString()}\` not found. Component must be used within ${Array.isArray(e)?`one of the following components: ${e.join(", ")}`:`\`${e}\``}`)},l=>(us(r,l),l)]}function Xn(){let e=document.activeElement;if(e==null)return null;for(;e!=null&&e.shadowRoot!=null&&e.shadowRoot.activeElement!=null;)e=e.shadowRoot.activeElement;return e}function zu(e,t,n){const r=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&r.addEventListener(e,t,{once:!0}),r.dispatchEvent(i)}function Ra(e){return e?e.flatMap(t=>t.type===nt?Ra(t.children):[t]):[]}const[bv,iw]=Wu("ConfigProvider");function Qu(e){return ua()?(Sl(e),!0):!1}function _v(e){let t=!1,n;const r=Do(!0);return(...i)=>(t||(n=r.run(()=>e(...i)),t=!0),n)}function wv(e){let t=0,n,r;const i=()=>{t-=1,r&&t<=0&&(r.stop(),n=void 0,r=void 0)};return(...a)=>(t+=1,r||(r=Do(!0),n=r.run(()=>e(...a))),Qu(i),n)}const vr=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const xv=e=>typeof e<"u",kv=Object.prototype.toString,Cv=e=>kv.call(e)==="[object Object]",pl=Av();function Av(){var e,t;return vr&&((e=window?.navigator)==null?void 0:e.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((t=window?.navigator)==null?void 0:t.maxTouchPoints)>2&&/iPad|Macintosh/.test(window?.navigator.userAgent))}function Ev(e){return Mn()}function Fi(e){return Array.isArray(e)?e:[e]}function Sv(e,t){Ev()&&su(e,t)}function Iv(e,t,n){return Zt(e,t,{...n,immediate:!0})}const Da=vr?window:void 0;function Vo(e){var t;const n=bn(e);return(t=n?.$el)!=null?t:n}function Yu(...e){const t=[],n=()=>{t.forEach(d=>d()),t.length=0},r=(d,f,m,h)=>(d.addEventListener(f,m,h),()=>d.removeEventListener(f,m,h)),i=st(()=>{const d=Fi(bn(e[0])).filter(f=>f!=null);return d.every(f=>typeof f!="string")?d:void 0}),a=Iv(()=>{var d,f;return[(f=(d=i.value)==null?void 0:d.map(m=>Vo(m)))!=null?f:[Da].filter(m=>m!=null),Fi(bn(i.value?e[1]:e[0])),Fi(ke(i.value?e[2]:e[1])),bn(i.value?e[3]:e[2])]},([d,f,m,h])=>{if(n(),!d?.length||!f?.length||!m?.length)return;const g=Cv(h)?{...h}:h;t.push(...d.flatMap(v=>f.flatMap(x=>m.map(P=>r(v,x,P,g)))))},{flush:"post"}),l=()=>{a(),n()};return Qu(n),l}function Pv(){const e=Vl(!1),t=Mn();return t&&er(()=>{e.value=!0},t),e}function Ov(e){return typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0}function Rv(...e){let t,n,r={};e.length===3?(t=e[0],n=e[1],r=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,n=e[0],r=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:i=Da,eventName:a="keydown",passive:l=!1,dedupe:d=!1}=r,f=Ov(t);return Yu(i,a,h=>{h.repeat&&bn(d)||f(h)&&n(h)},l)}function Dv(e){return JSON.parse(JSON.stringify(e))}function $v(e,t,n,r={}){var i,a,l;const{clone:d=!1,passive:f=!1,eventName:m,deep:h=!1,defaultValue:g,shouldEmit:v}=r,x=Mn(),P=n||x?.emit||((i=x?.$emit)==null?void 0:i.bind(x))||((l=(a=x?.proxy)==null?void 0:a.$emit)==null?void 0:l.bind(x?.proxy));let L=m;L=L||`update:${t.toString()}`;const Q=j=>d?typeof d=="function"?d(j):Dv(j):j,G=()=>xv(e[t])?Q(e[t]):g,ne=j=>{v?v(j)&&P(L,j):P(L,j)};if(f){const j=G(),F=Ae(j);let se=!1;return Zt(()=>e[t],ge=>{se||(se=!0,F.value=Q(ge),an(()=>se=!1))}),Zt(F,ge=>{!se&&(ge!==e[t]||h)&&ne(ge)},{deep:h}),F}else return st({get(){return G()},set(j){ne(j)}})}function Bi(e){if(e===null||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);return t!==null&&t!==Object.prototype&&Object.getPrototypeOf(t)!==null||Symbol.iterator in e?!1:Symbol.toStringTag in e?Object.prototype.toString.call(e)==="[object Module]":!0}function oa(e,t,n=".",r){if(!Bi(t))return oa(e,{},n,r);const i=Object.assign({},t);for(const a in e){if(a==="__proto__"||a==="constructor")continue;const l=e[a];l!=null&&(r&&r(i,a,l,n)||(Array.isArray(l)&&Array.isArray(i[a])?i[a]=[...l,...i[a]]:Bi(l)&&Bi(i[a])?i[a]=oa(l,i[a],(n?`${n}.`:"")+a.toString(),r):i[a]=l))}return i}function Tv(e){return(...t)=>t.reduce((n,r)=>oa(n,r,"",e),{})}const Mv=Tv(),Fv=wv(()=>{const e=Ae(new Map),t=Ae(),n=st(()=>{for(const l of e.value.values())if(l)return!0;return!1}),r=bv({scrollBody:Ae(!0)});let i=null;const a=()=>{document.body.style.paddingRight="",document.body.style.marginRight="",document.body.style.pointerEvents="",document.documentElement.style.removeProperty("--scrollbar-width"),document.body.style.overflow=t.value??"",pl&&i?.(),t.value=void 0};return Zt(n,(l,d)=>{if(!vr)return;if(!l){d&&a();return}t.value===void 0&&(t.value=document.body.style.overflow);const f=window.innerWidth-document.documentElement.clientWidth,m={padding:f,margin:0},h=r.scrollBody?.value?typeof r.scrollBody.value=="object"?Mv({padding:r.scrollBody.value.padding===!0?f:r.scrollBody.value.padding,margin:r.scrollBody.value.margin===!0?f:r.scrollBody.value.margin},m):m:{padding:0,margin:0};f>0&&(document.body.style.paddingRight=typeof h.padding=="number"?`${h.padding}px`:String(h.padding),document.body.style.marginRight=typeof h.margin=="number"?`${h.margin}px`:String(h.margin),document.documentElement.style.setProperty("--scrollbar-width",`${f}px`),document.body.style.overflow="hidden"),pl&&(i=Yu(document,"touchmove",g=>Nv(g),{passive:!1})),an(()=>{document.body.style.pointerEvents="none",document.body.style.overflow="hidden"})},{immediate:!0,flush:"sync"}),e});function Bv(e){const t=Math.random().toString(36).substring(2,7),n=Fv();n.value.set(t,e);const r=st({get:()=>n.value.get(t)??!1,set:i=>n.value.set(t,i)});return Sv(()=>{n.value.delete(t)}),r}function Gu(e){const t=window.getComputedStyle(e);if(t.overflowX==="scroll"||t.overflowY==="scroll"||t.overflowX==="auto"&&e.clientWidth<e.scrollWidth||t.overflowY==="auto"&&e.clientHeight<e.scrollHeight)return!0;{const n=e.parentNode;return!(n instanceof Element)||n.tagName==="BODY"?!1:Gu(n)}}function Nv(e){const t=e||window.event,n=t.target;return n instanceof Element&&Gu(n)?!1:t.touches.length>1?!0:(t.preventDefault&&t.cancelable&&t.preventDefault(),!1)}function $a(e){const t=Mn(),n=t?.type.emits,r={};return n?.length||console.warn(`No emitted event found. Please check component: ${t?.type.__name}`),n?.forEach(i=>{r[ao(en(i))]=(...a)=>e(i,...a)}),r}function kn(){const e=Mn(),t=Ae(),n=st(()=>["#text","#comment"].includes(t.value?.$el.nodeName)?t.value?.$el.nextElementSibling:Vo(t)),r=Object.assign({},e.exposed),i={};for(const l in e.props)Object.defineProperty(i,l,{enumerable:!0,configurable:!0,get:()=>e.props[l]});if(Object.keys(r).length>0)for(const l in r)Object.defineProperty(i,l,{enumerable:!0,configurable:!0,get:()=>r[l]});Object.defineProperty(i,"$el",{enumerable:!0,configurable:!0,get:()=>e.vnode.el}),e.exposed=i;function a(l){t.value=l,l&&(Object.defineProperty(i,"$el",{enumerable:!0,configurable:!0,get:()=>l instanceof Element?l:l.$el}),e.exposed=i)}return{forwardRef:a,currentRef:t,currentElement:n}}var jv=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Or=new WeakMap,so=new WeakMap,oo={},Ni=0,Ju=function(e){return e&&(e.host||Ju(e.parentNode))},Lv=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=Ju(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},qv=function(e,t,n,r){var i=Lv(t,Array.isArray(e)?e:[e]);oo[n]||(oo[n]=new WeakMap);var a=oo[n],l=[],d=new Set,f=new Set(i),m=function(g){!g||d.has(g)||(d.add(g),m(g.parentNode))};i.forEach(m);var h=function(g){!g||f.has(g)||Array.prototype.forEach.call(g.children,function(v){if(d.has(v))h(v);else try{var x=v.getAttribute(r),P=x!==null&&x!=="false",L=(Or.get(v)||0)+1,Q=(a.get(v)||0)+1;Or.set(v,L),a.set(v,Q),l.push(v),L===1&&P&&so.set(v,!0),Q===1&&v.setAttribute(n,"true"),P||v.setAttribute(r,"true")}catch(G){console.error("aria-hidden: cannot operate on ",v,G)}})};return h(t),d.clear(),Ni++,function(){l.forEach(function(g){var v=Or.get(g)-1,x=a.get(g)-1;Or.set(g,v),a.set(g,x),v||(so.has(g)||g.removeAttribute(r),so.delete(g)),x||g.removeAttribute(n)}),Ni--,Ni||(Or=new WeakMap,Or=new WeakMap,so=new WeakMap,oo={})}},Kv=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),i=jv(e);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),qv(r,i,n,"aria-hidden")):function(){return null}};function Uv(e){let t;Zt(()=>Vo(e),n=>{n?t=Kv(n):t&&t()}),Fo(()=>{t&&t()})}function hl(e,t="reka"){return`${t}-${kf?.()}`}function Vv(e,t){const n=Ae(e);function r(a){return t[n.value][a]??n.value}return{state:n,dispatch:a=>{n.value=r(a)}}}function Hv(e,t){const n=Ae({}),r=Ae("none"),i=Ae(e),a=e.value?"mounted":"unmounted";let l;const d=t.value?.ownerDocument.defaultView??Da,{state:f,dispatch:m}=Vv(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}}),h=Q=>{if(vr){const G=new CustomEvent(Q,{bubbles:!1,cancelable:!1});t.value?.dispatchEvent(G)}};Zt(e,async(Q,G)=>{const ne=G!==Q;if(await an(),ne){const j=r.value,F=io(t.value);Q?(m("MOUNT"),h("enter"),F==="none"&&h("after-enter")):F==="none"||F==="undefined"||n.value?.display==="none"?(m("UNMOUNT"),h("leave"),h("after-leave")):G&&j!==F?(m("ANIMATION_OUT"),h("leave")):(m("UNMOUNT"),h("after-leave"))}},{immediate:!0});const g=Q=>{const G=io(t.value),ne=G.includes(Q.animationName),j=f.value==="mounted"?"enter":"leave";if(Q.target===t.value&&ne&&(h(`after-${j}`),m("ANIMATION_END"),!i.value)){const F=t.value.style.animationFillMode;t.value.style.animationFillMode="forwards",l=d?.setTimeout(()=>{t.value?.style.animationFillMode==="forwards"&&(t.value.style.animationFillMode=F)})}Q.target===t.value&&G==="none"&&m("ANIMATION_END")},v=Q=>{Q.target===t.value&&(r.value=io(t.value))},x=Zt(t,(Q,G)=>{Q?(n.value=getComputedStyle(Q),Q.addEventListener("animationstart",v),Q.addEventListener("animationcancel",g),Q.addEventListener("animationend",g)):(m("ANIMATION_END"),l!==void 0&&d?.clearTimeout(l),G?.removeEventListener("animationstart",v),G?.removeEventListener("animationcancel",g),G?.removeEventListener("animationend",g))},{immediate:!0}),P=Zt(f,()=>{const Q=io(t.value);r.value=f.value==="mounted"?Q:"none"});return Fo(()=>{x(),P()}),{isPresent:st(()=>["mounted","unmountSuspended"].includes(f.value))}}function io(e){return e&&getComputedStyle(e).animationName||"none"}var Xu=ot({name:"Presence",props:{present:{type:Boolean,required:!0},forceMount:{type:Boolean}},slots:{},setup(e,{slots:t,expose:n}){const{present:r,forceMount:i}=ba(e),a=Ae(),{isPresent:l}=Hv(r,a);n({present:l});let d=t.default({present:l.value});d=Ra(d||[]);const f=Mn();if(d&&d?.length>1){const m=f?.parent?.type.name?`<${f.parent.type.name} />`:"component";throw new Error([`Detected an invalid children for \`${m}\` for  \`Presence\` component.`,"","Note: Presence works similarly to `v-if` directly, but it waits for animation/transition to finished before unmounting. So it expect only one direct child of valid VNode type.","You can apply a few solutions:",["Provide a single child element so that `presence` directive attach correctly.","Ensure the first child is an actual element instead of a raw text node or comment node."].map(h=>`  - ${h}`).join(`
`)].join(`
`))}return()=>i.value||r.value||l.value?Br(t.default({present:l.value})[0],{ref:m=>{const h=Vo(m);return typeof h?.hasAttribute>"u"||(h?.hasAttribute("data-reka-popper-content-wrapper")?a.value=h.firstElementChild:a.value=h),h}}):null}});const Wv=ot({name:"PrimitiveSlot",inheritAttrs:!1,setup(e,{attrs:t,slots:n}){return()=>{if(!n.default)return null;const r=Ra(n.default()),i=r.findIndex(f=>f.type!==wn);if(i===-1)return r;const a=r[i];delete a.props?.ref;const l=a.props?xn(t,a.props):t,d=mr({...a,props:{}},l);return r.length===1?d:(r[i]=d,r)}}}),zv=["area","img","input"],Ss=ot({name:"Primitive",inheritAttrs:!1,props:{asChild:{type:Boolean,default:!1},as:{type:[String,Object],default:"div"}},setup(e,{attrs:t,slots:n}){const r=e.asChild?"template":e.as;return typeof r=="string"&&zv.includes(r)?()=>Br(r,t):r!=="template"?()=>Br(e.as,t,{default:n.default}):()=>Br(Wv,t,{default:n.default})}}),[tr,Qv]=Wu("DialogRoot");var Yv=ot({inheritAttrs:!1,__name:"DialogRoot",props:{open:{type:Boolean,required:!1,default:void 0},defaultOpen:{type:Boolean,required:!1,default:!1},modal:{type:Boolean,required:!1,default:!0}},emits:["update:open"],setup(e,{emit:t}){const n=e,i=$v(n,"open",t,{defaultValue:n.defaultOpen,passive:n.open===void 0}),a=Ae(),l=Ae(),{modal:d}=ba(n);return Qv({open:i,modal:d,openModal:()=>{i.value=!0},onOpenChange:f=>{i.value=f},onOpenToggle:()=>{i.value=!i.value},contentId:"",titleId:"",descriptionId:"",triggerElement:a,contentElement:l}),(f,m)=>Qt(f.$slots,"default",{open:ke(i),close:()=>i.value=!1})}}),Gv=Yv,Jv=ot({__name:"DialogClose",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(e){const t=e;kn();const n=tr();return(r,i)=>(K(),St(ke(Ss),xn(t,{type:r.as==="button"?"button":void 0,onClick:i[0]||(i[0]=a=>ke(n).onOpenChange(!1))}),{default:rt(()=>[Qt(r.$slots,"default")]),_:3},16,["type"]))}}),Xv=Jv;const Zv="dismissableLayer.pointerDownOutside",eb="dismissableLayer.focusOutside";function Zu(e,t){const n=t.closest("[data-dismissable-layer]"),r=e.dataset.dismissableLayer===""?e:e.querySelector("[data-dismissable-layer]"),i=Array.from(e.ownerDocument.querySelectorAll("[data-dismissable-layer]"));return!!(n&&(r===n||i.indexOf(r)<i.indexOf(n)))}function tb(e,t,n=!0){const r=t?.value?.ownerDocument??globalThis?.document,i=Ae(!1),a=Ae(()=>{});return Lr(l=>{if(!vr||!bn(n))return;const d=async m=>{const h=m.target;if(!(!t?.value||!h)){if(Zu(t.value,h)){i.value=!1;return}if(m.target&&!i.value){let x=function(){zu(Zv,e,v)};var g=x;const v={originalEvent:m};m.pointerType==="touch"?(r.removeEventListener("click",a.value),a.value=x,r.addEventListener("click",a.value,{once:!0})):x()}else r.removeEventListener("click",a.value);i.value=!1}},f=window.setTimeout(()=>{r.addEventListener("pointerdown",d)},0);l(()=>{window.clearTimeout(f),r.removeEventListener("pointerdown",d),r.removeEventListener("click",a.value)})}),{onPointerDownCapture:()=>{bn(n)&&(i.value=!0)}}}function nb(e,t,n=!0){const r=t?.value?.ownerDocument??globalThis?.document,i=Ae(!1);return Lr(a=>{if(!vr||!bn(n))return;const l=async d=>{if(!t?.value)return;await an(),await an();const f=d.target;!t.value||!f||Zu(t.value,f)||d.target&&!i.value&&zu(eb,e,{originalEvent:d})};r.addEventListener("focusin",l),a(()=>r.removeEventListener("focusin",l))}),{onFocusCapture:()=>{bn(n)&&(i.value=!0)},onBlurCapture:()=>{bn(n)&&(i.value=!1)}}}const In=gr({layersRoot:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set});var rb=ot({__name:"DismissableLayer",props:{disableOutsidePointerEvents:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","dismiss"],setup(e,{emit:t}){const n=e,r=t,{forwardRef:i,currentElement:a}=kn(),l=st(()=>a.value?.ownerDocument??globalThis.document),d=st(()=>In.layersRoot),f=st(()=>a.value?Array.from(d.value).indexOf(a.value):-1),m=st(()=>In.layersWithOutsidePointerEventsDisabled.size>0),h=st(()=>{const P=Array.from(d.value),[L]=[...In.layersWithOutsidePointerEventsDisabled].slice(-1),Q=P.indexOf(L);return f.value>=Q}),g=tb(async P=>{const L=[...In.branches].some(Q=>Q?.contains(P.target));!h.value||L||(r("pointerDownOutside",P),r("interactOutside",P),await an(),P.defaultPrevented||r("dismiss"))},a),v=nb(P=>{[...In.branches].some(Q=>Q?.contains(P.target))||(r("focusOutside",P),r("interactOutside",P),P.defaultPrevented||r("dismiss"))},a);Rv("Escape",P=>{f.value===d.value.size-1&&(r("escapeKeyDown",P),P.defaultPrevented||r("dismiss"))});let x;return Lr(P=>{a.value&&(n.disableOutsidePointerEvents&&(In.layersWithOutsidePointerEventsDisabled.size===0&&(x=l.value.body.style.pointerEvents,l.value.body.style.pointerEvents="none"),In.layersWithOutsidePointerEventsDisabled.add(a.value)),d.value.add(a.value),P(()=>{n.disableOutsidePointerEvents&&In.layersWithOutsidePointerEventsDisabled.size===1&&(l.value.body.style.pointerEvents=x)}))}),Lr(P=>{P(()=>{a.value&&(d.value.delete(a.value),In.layersWithOutsidePointerEventsDisabled.delete(a.value))})}),(P,L)=>(K(),St(ke(Ss),{ref:ke(i),"as-child":P.asChild,as:P.as,"data-dismissable-layer":"",style:Ur({pointerEvents:m.value?h.value?"auto":"none":void 0}),onFocusCapture:ke(v).onFocusCapture,onBlurCapture:ke(v).onBlurCapture,onPointerdownCapture:ke(g).onPointerDownCapture},{default:rt(()=>[Qt(P.$slots,"default")]),_:3},8,["as-child","as","style","onFocusCapture","onBlurCapture","onPointerdownCapture"]))}}),sb=rb;const ob=_v(()=>Ae([]));function ib(){const e=ob();return{add(t){const n=e.value[0];t!==n&&n?.pause(),e.value=ml(e.value,t),e.value.unshift(t)},remove(t){e.value=ml(e.value,t),e.value[0]?.resume()}}}function ml(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function ab(e){return e.filter(t=>t.tagName!=="A")}const ji="focusScope.autoFocusOnMount",Li="focusScope.autoFocusOnUnmount",yl={bubbles:!1,cancelable:!0};function cb(e,{select:t=!1}={}){const n=Xn();for(const r of e)if(Wn(r,{select:t}),Xn()!==n)return!0}function lb(e){const t=ed(e),n=gl(t,e),r=gl(t.reverse(),e);return[n,r]}function ed(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function gl(e,t){for(const n of e)if(!ub(n,{upTo:t}))return n}function ub(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function db(e){return e instanceof HTMLInputElement&&"select"in e}function Wn(e,{select:t=!1}={}){if(e&&e.focus){const n=Xn();e.focus({preventScroll:!0}),e!==n&&db(e)&&t&&e.select()}}var fb=ot({__name:"FocusScope",props:{loop:{type:Boolean,required:!1,default:!1},trapped:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["mountAutoFocus","unmountAutoFocus"],setup(e,{emit:t}){const n=e,r=t,{currentRef:i,currentElement:a}=kn(),l=Ae(null),d=ib(),f=gr({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}});Lr(h=>{if(!vr)return;const g=a.value;if(!n.trapped)return;function v(Q){if(f.paused||!g)return;const G=Q.target;g.contains(G)?l.value=G:Wn(l.value,{select:!0})}function x(Q){if(f.paused||!g)return;const G=Q.relatedTarget;G!==null&&(g.contains(G)||Wn(l.value,{select:!0}))}function P(Q){g.contains(l.value)||Wn(g)}document.addEventListener("focusin",v),document.addEventListener("focusout",x);const L=new MutationObserver(P);g&&L.observe(g,{childList:!0,subtree:!0}),h(()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",x),L.disconnect()})}),Lr(async h=>{const g=a.value;if(await an(),!g)return;d.add(f);const v=Xn();if(!g.contains(v)){const P=new CustomEvent(ji,yl);g.addEventListener(ji,L=>r("mountAutoFocus",L)),g.dispatchEvent(P),P.defaultPrevented||(cb(ab(ed(g)),{select:!0}),Xn()===v&&Wn(g))}h(()=>{g.removeEventListener(ji,Q=>r("mountAutoFocus",Q));const P=new CustomEvent(Li,yl),L=Q=>{r("unmountAutoFocus",Q)};g.addEventListener(Li,L),g.dispatchEvent(P),setTimeout(()=>{P.defaultPrevented||Wn(v??document.body,{select:!0}),g.removeEventListener(Li,L),d.remove(f)},0)})});function m(h){if(!n.loop&&!n.trapped||f.paused)return;const g=h.key==="Tab"&&!h.altKey&&!h.ctrlKey&&!h.metaKey,v=Xn();if(g&&v){const x=h.currentTarget,[P,L]=lb(x);P&&L?!h.shiftKey&&v===L?(h.preventDefault(),n.loop&&Wn(P,{select:!0})):h.shiftKey&&v===P&&(h.preventDefault(),n.loop&&Wn(L,{select:!0})):v===x&&h.preventDefault()}}return(h,g)=>(K(),St(ke(Ss),{ref_key:"currentRef",ref:i,tabindex:"-1","as-child":h.asChild,as:h.as,onKeydown:m},{default:rt(()=>[Qt(h.$slots,"default")]),_:3},8,["as-child","as"]))}}),pb=fb;function hb(e){return e?"open":"closed"}var mb=ot({__name:"DialogContentImpl",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(e,{emit:t}){const n=e,r=t,i=tr(),{forwardRef:a,currentElement:l}=kn();return i.titleId||=hl(void 0,"reka-dialog-title"),i.descriptionId||=hl(void 0,"reka-dialog-description"),er(()=>{i.contentElement=l,Xn()!==document.body&&(i.triggerElement.value=Xn())}),(d,f)=>(K(),St(ke(pb),{"as-child":"",loop:"",trapped:n.trapFocus,onMountAutoFocus:f[5]||(f[5]=m=>r("openAutoFocus",m)),onUnmountAutoFocus:f[6]||(f[6]=m=>r("closeAutoFocus",m))},{default:rt(()=>[Ue(ke(sb),xn({id:ke(i).contentId,ref:ke(a),as:d.as,"as-child":d.asChild,"disable-outside-pointer-events":d.disableOutsidePointerEvents,role:"dialog","aria-describedby":ke(i).descriptionId,"aria-labelledby":ke(i).titleId,"data-state":ke(hb)(ke(i).open.value)},d.$attrs,{onDismiss:f[0]||(f[0]=m=>ke(i).onOpenChange(!1)),onEscapeKeyDown:f[1]||(f[1]=m=>r("escapeKeyDown",m)),onFocusOutside:f[2]||(f[2]=m=>r("focusOutside",m)),onInteractOutside:f[3]||(f[3]=m=>r("interactOutside",m)),onPointerDownOutside:f[4]||(f[4]=m=>r("pointerDownOutside",m))}),{default:rt(()=>[Qt(d.$slots,"default")]),_:3},16,["id","as","as-child","disable-outside-pointer-events","aria-describedby","aria-labelledby","data-state"])]),_:3},8,["trapped"]))}}),td=mb,yb=ot({__name:"DialogContentModal",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(e,{emit:t}){const n=e,r=t,i=tr(),a=$a(r),{forwardRef:l,currentElement:d}=kn();return Uv(d),(f,m)=>(K(),St(td,xn({...n,...ke(a)},{ref:ke(l),"trap-focus":ke(i).open.value,"disable-outside-pointer-events":!0,onCloseAutoFocus:m[0]||(m[0]=h=>{h.defaultPrevented||(h.preventDefault(),ke(i).triggerElement.value?.focus())}),onPointerDownOutside:m[1]||(m[1]=h=>{const g=h.detail.originalEvent,v=g.button===0&&g.ctrlKey===!0;(g.button===2||v)&&h.preventDefault()}),onFocusOutside:m[2]||(m[2]=h=>{h.preventDefault()})}),{default:rt(()=>[Qt(f.$slots,"default")]),_:3},16,["trap-focus"]))}}),gb=yb,vb=ot({__name:"DialogContentNonModal",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(e,{emit:t}){const n=e,i=$a(t);kn();const a=tr(),l=Ae(!1),d=Ae(!1);return(f,m)=>(K(),St(td,xn({...n,...ke(i)},{"trap-focus":!1,"disable-outside-pointer-events":!1,onCloseAutoFocus:m[0]||(m[0]=h=>{h.defaultPrevented||(l.value||ke(a).triggerElement.value?.focus(),h.preventDefault()),l.value=!1,d.value=!1}),onInteractOutside:m[1]||(m[1]=h=>{h.defaultPrevented||(l.value=!0,h.detail.originalEvent.type==="pointerdown"&&(d.value=!0));const g=h.target;ke(a).triggerElement.value?.contains(g)&&h.preventDefault(),h.detail.originalEvent.type==="focusin"&&d.value&&h.preventDefault()})}),{default:rt(()=>[Qt(f.$slots,"default")]),_:3},16))}}),bb=vb,_b=ot({__name:"DialogContent",props:{forceMount:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(e,{emit:t}){const n=e,r=t,i=tr(),a=$a(r),{forwardRef:l}=kn();return(d,f)=>(K(),St(ke(Xu),{present:d.forceMount||ke(i).open.value},{default:rt(()=>[ke(i).modal.value?(K(),St(gb,xn({key:0,ref:ke(l)},{...n,...ke(a),...d.$attrs}),{default:rt(()=>[Qt(d.$slots,"default")]),_:3},16)):(K(),St(bb,xn({key:1,ref:ke(l)},{...n,...ke(a),...d.$attrs}),{default:rt(()=>[Qt(d.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),wb=_b,xb=ot({__name:"DialogOverlayImpl",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(e){const t=tr();return Bv(!0),kn(),(n,r)=>(K(),St(ke(Ss),{as:n.as,"as-child":n.asChild,"data-state":ke(t).open.value?"open":"closed",style:{"pointer-events":"auto"}},{default:rt(()=>[Qt(n.$slots,"default")]),_:3},8,["as","as-child","data-state"]))}}),kb=xb,Cb=ot({__name:"DialogOverlay",props:{forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(e){const t=tr(),{forwardRef:n}=kn();return(r,i)=>ke(t)?.modal.value?(K(),St(ke(Xu),{key:0,present:r.forceMount||ke(t).open.value},{default:rt(()=>[Ue(kb,xn(r.$attrs,{ref:ke(n),as:r.as,"as-child":r.asChild}),{default:rt(()=>[Qt(r.$slots,"default")]),_:3},16,["as","as-child"])]),_:3},8,["present"])):$e("v-if",!0)}}),Ab=Cb,Eb=ot({__name:"Teleport",props:{to:{type:null,required:!1,default:"body"},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(e){const t=Pv();return(n,r)=>ke(t)||n.forceMount?(K(),St(wf,{key:0,to:n.to,disabled:n.disabled,defer:n.defer},[Qt(n.$slots,"default")],8,["to","disabled","defer"])):$e("v-if",!0)}}),Sb=Eb,Ib=ot({__name:"DialogPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(e){const t=e;return(n,r)=>(K(),St(ke(Sb),Bd(ku(t)),{default:rt(()=>[Qt(n.$slots,"default")]),_:3},16))}}),Pb=Ib,Ob=ot({__name:"DialogTitle",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"h2"}},setup(e){const t=e,n=tr();return kn(),(r,i)=>(K(),St(ke(Ss),xn(t,{id:ke(n).titleId}),{default:rt(()=>[Qt(r.$slots,"default")]),_:3},16,["id"]))}}),Rb=Ob;const Db={class:"card-image-container position-relative overflow-hidden rounded",style:{"padding-bottom":"140%"}},$b=["src","alt"],Tb={class:"card-body"},Mb={class:"card-title fs-6 fw-medium mb-1"},Fb={class:"card-text small text-muted mb-2"},Bb={key:0,class:"d-flex justify-content-between small"},Nb={class:"text-success fw-medium"},jb={key:1,class:"small text-muted fst-italic"},Lb={class:"modal-dialog modal-dialog-centered modal-lg"},qb={class:"modal-content"},Kb={class:"modal-header py-2"},Ub={class:"modal-body py-3"},Vb={class:"row g-3 align-items-start"},Hb={class:"col-lg-5"},Wb=["src","alt"],zb={class:"row row-cols-2 g-2 small mt-3 mb-0 meta-grid"},Qb={class:"col text-end fw-semibold"},Yb={class:"col text-end fw-semibold"},Gb={class:"col text-end fw-semibold"},Jb={class:"col text-end fw-semibold"},Xb={class:"col-lg-7"},Zb={class:"d-flex justify-content-between align-items-center mb-3"},e_={key:0,class:"h5 mb-0 text-success fw-bold"},t_={key:1,class:"small text-muted fst-italic"},n_={key:2,class:"small text-muted fst-italic"},r_={key:0,class:"mb-3"},s_={class:"d-flex gap-3 small"},o_={class:"mt-2 border rounded-3 p-2 small",style:{"max-height":"30vh",overflow:"auto"}},i_={class:"row g-2 align-items-center"},a_={class:"col-6 col-md-3"},c_={class:"fw-medium"},l_={class:"col-6 col-md-3"},u_={class:"fw-medium"},d_={class:"col-6 col-md-3"},f_={class:"fw-medium"},p_={key:0,class:"col-6 col-md-3"},h_={class:"fw-medium"},m_={key:1},y_={class:"mt-2 small",style:{"max-height":"30vh",overflow:"auto"}},g_={class:"flex-grow-1"},v_={class:"fw-medium"},b_={class:"text-muted"},__={class:"fw-semibold"},nd=ot({inheritAttrs:!0,__name:"CardComponent",props:{card:{}},setup(e){const t=e,n=Oa(),r=Ae(!1),i=Ae(null),a=Ae(!1),l=Ae([]),d=Ae([]),f=Ae(!1),m=st(()=>d.value?[...d.value].sort((j,F)=>new Date(F.happenedAt).getTime()-new Date(j.happenedAt).getTime()):[]),h=st(()=>{const j=n.getCardPrice(t.card.id);return j||i.value}),g=st(()=>!l.value||l.value.length===0?0:l.value.reduce((j,F)=>{if(!F.disposedAt||F.disposedQuantity&&F.disposedQuantity<F.quantity){const se=F.disposedQuantity?F.quantity-F.disposedQuantity:F.quantity;return j+se}return j},0)),v=()=>{r.value=!0,G()},x=()=>{r.value=!1},P=j=>{j.target.src="https://placehold.co/200x280?text=Card+Image"},L=j=>new Date(j).toLocaleDateString(),Q=(j,F)=>new tt(j,F).format("de-DE"),G=async()=>{try{await ne(),l.value=await xe.card_lots.where("cardId").equals(t.card.id).toArray(),d.value=await xe.transactions.where("cardId").equals(t.card.id).toArray()}catch(j){console.error("Error loading card details:",j)}},ne=async()=>{a.value=!0;try{const j=await xe.price_points.where("cardId").equals(t.card.id).toArray();if(j.length>0){j.sort((se,ge)=>ge.asOf.getTime()-se.asOf.getTime());const F=j[0];i.value=new tt(F.price,F.currency)}}catch(j){console.error("Error loading current price:",j)}finally{a.value=!1}};return(j,F)=>(K(),Z(nt,null,[w("div",{class:"card h-100 card-item",onClick:v},[w("div",Db,[w("img",{src:j.card.imageUrl||"https://placehold.co/200x280?text=Card+Image",alt:j.card.name,class:"card-img-top position-absolute top-0 start-0 w-100 h-100 object-fit-cover",onError:P},null,40,$b)]),w("div",Tb,[w("h3",Mb,ie(j.card.name),1),w("p",Fb,ie(j.card.set)+" #"+ie(j.card.number),1),h.value?(K(),Z("div",Bb,[F[2]||(F[2]=w("span",{class:"text-muted"},"Current:",-1)),w("span",Nb,ie(h.value.format("de-DE")),1)])):a.value||ke(n).loadingPrices?(K(),Z("div",jb," Loading... ")):$e("",!0)])]),Ue(ke(Gv),{open:r.value,"onUpdate:open":F[1]||(F[1]=se=>r.value=se)},{default:rt(()=>[Ue(ke(Pb),null,{default:rt(()=>[Ue(ke(Ab),{class:"modal-backdrop fade show",onClick:x}),Ue(ke(wb),{class:"modal d-block compact-modal",onPointerDownOutside:x,onEscapeKeyDown:x},{default:rt(()=>[w("div",Lb,[w("div",qb,[w("div",Kb,[Ue(ke(Rb),{class:"modal-title h5 mb-0"},{default:rt(()=>[zt(ie(j.card.name),1)]),_:1}),Ue(ke(Xv),{"as-child":""},{default:rt(()=>[...F[3]||(F[3]=[w("button",{type:"button",class:"btn-close","aria-label":"Close"},null,-1)])]),_:1})]),w("div",Ub,[w("div",Vb,[w("div",Hb,[w("img",{src:j.card.imageUrl||"https://placehold.co/200x280?text=Card+Image",alt:j.card.name,onError:P,class:"w-100 h-100 rounded-4"},null,40,Wb),w("dl",zb,[F[4]||(F[4]=w("dt",{class:"col text-muted"},"Set",-1)),w("dd",Qb,ie(j.card.set)+" ("+ie(j.card.setCode)+")",1),F[5]||(F[5]=w("dt",{class:"col text-muted"},"Number",-1)),w("dd",Yb,"#"+ie(j.card.number),1),F[6]||(F[6]=w("dt",{class:"col text-muted"},"Language",-1)),w("dd",Gb,ie(j.card.lang),1),F[7]||(F[7]=w("dt",{class:"col text-muted"},"Finish",-1)),w("dd",Jb,ie(j.card.finish),1)])]),w("div",Xb,[w("div",Zb,[F[8]||(F[8]=w("h3",{class:"h6 mb-0"},"Current Price",-1)),i.value?(K(),Z("span",e_,ie(i.value.format("de-DE")),1)):a.value?(K(),Z("span",t_,"Loading")):(K(),Z("span",n_,"Price unavailable"))]),l.value&&l.value.length?(K(),Z("div",r_,[F[18]||(F[18]=w("h3",{class:"h6 mb-2"},"Your Collection",-1)),w("div",s_,[w("div",null,[F[9]||(F[9]=w("span",{class:"text-muted"},"Lots:",-1)),F[10]||(F[10]=zt()),w("strong",null,ie(l.value.length),1)]),w("div",null,[F[11]||(F[11]=w("span",{class:"text-muted"},"Cards:",-1)),F[12]||(F[12]=zt()),w("strong",null,ie(g.value),1)])]),l.value.length>2?(K(),Z("button",{key:0,class:"btn btn-link btn-sm p-0 mt-1",onClick:F[0]||(F[0]=se=>f.value=!f.value)},ie(f.value?"Hide details":"Show details"),1)):$e("",!0),vs(w("div",o_,[(K(!0),Z(nt,null,Ut(l.value,se=>(K(),Z("div",{key:se.id,class:"border rounded p-2 mb-2"},[w("div",i_,[w("div",a_,[F[13]||(F[13]=w("span",{class:"text-muted"},"Qty:",-1)),F[14]||(F[14]=zt()),w("span",c_,ie(se.quantity),1)]),w("div",l_,[F[15]||(F[15]=w("span",{class:"text-muted"},"Unit Cost:",-1)),w("span",u_,ie(Q(se.unitCost,se.currency||"EUR")),1)]),w("div",d_,[F[16]||(F[16]=w("span",{class:"text-muted"},"Purchased:",-1)),w("span",f_,ie(L(se.purchasedAt)),1)]),se.disposedQuantity?(K(),Z("div",p_,[F[17]||(F[17]=w("span",{class:"text-muted"},"Disposed:",-1)),w("span",h_,ie(se.disposedQuantity),1)])):$e("",!0)])]))),128))],512),[[Pp,f.value]])])):$e("",!0),d.value&&d.value.length?(K(),Z("div",m_,[F[19]||(F[19]=w("h3",{class:"h6 mb-2"},"Transaction History",-1)),w("div",y_,[(K(!0),Z(nt,null,Ut(m.value,se=>(K(),Z("div",{key:se.id,class:Et(["tx-item d-flex align-items-center gap-2 p-2 mb-2 rounded border",{buy:/buy/i.test(se.kind),sell:/sell/i.test(se.kind)}])},[w("span",{class:Et(["badge me-1",/buy/i.test(se.kind)?"bg-success-subtle text-success-emphasis":"bg-danger-subtle text-danger-emphasis"])},ie(se.kind),3),w("div",g_,[w("div",v_,ie(L(se.happenedAt)),1),w("div",b_,"Qty: "+ie(se.quantity),1)]),w("div",__,ie(Q(se.unitPrice,se.currency)),1)],2))),128))])])):$e("",!0)])])])])])]),_:1})]),_:1})]),_:1},8,["open"])],64))}}),w_={class:"deck-detail-view"},x_={key:0,class:"loading"},k_={key:1,class:"deck-detail"},C_={class:"deck-header"},A_={class:"deck-meta"},E_={class:"platform"},S_={class:"date"},I_={class:"cards-section"},P_={key:0,class:"empty-state"},O_={key:1,class:"cards-grid"},R_={key:2,class:"error"},D_=ot({__name:"DeckDetailView",setup(e){const t=Lu(),n=Ae(null),r=Ae([]),i=Ae({}),a=Ae(!0),l=m=>new Date(m).toLocaleDateString(),d=m=>i.value[m]||{id:m,name:"Unknown Card",set:"Unknown Set",setCode:"???",number:"???",lang:"en",finish:"nonfoil",imageUrl:"https://placehold.co/200x280?text=Card+Image"},f=async()=>{try{const m=t.params.id,h=await xe.decks.get(m);if(!h)return;n.value=h;const g=await xe.deck_cards.where("deckId").equals(m).toArray();r.value=g;const v=g.map(x=>x.cardId).filter(x=>x);if(v.length>0){const x=await xe.cards.where("id").anyOf(v).toArray();i.value=Object.fromEntries(x.map(P=>[P.id,P]))}}catch(m){console.error("Error loading deck:",m)}finally{a.value=!1}};return er(()=>{f()}),(m,h)=>{const g=Bo("router-link");return K(),Z("div",w_,[a.value?(K(),Z("div",x_," Loading deck... ")):n.value?(K(),Z("div",k_,[w("div",C_,[Ue(g,{to:"/decks",class:"back-link"},{default:rt(()=>[...h[0]||(h[0]=[zt("  Back to Decks ",-1)])]),_:1}),w("h1",null,ie(n.value.name),1),w("p",A_,[w("span",E_,ie(n.value.platform),1),w("span",S_,"Imported: "+ie(l(n.value.importedAt)),1)])]),w("div",I_,[h[2]||(h[2]=w("h2",null,"Cards in Deck",-1)),r.value.length===0?(K(),Z("div",P_,[...h[1]||(h[1]=[w("p",null,"No cards found in this deck.",-1)])])):(K(),Z("div",O_,[(K(!0),Z(nt,null,Ut(r.value,v=>(K(),St(nd,{key:v.id,card:d(v.cardId)},null,8,["card"]))),128))]))])])):(K(),Z("div",R_,[h[4]||(h[4]=w("p",null,"Deck not found.",-1)),Ue(g,{to:"/decks",class:"back-link"},{default:rt(()=>[...h[3]||(h[3]=[zt("  Back to Decks ",-1)])]),_:1})]))])}}}),$_=Fn(D_,[["__scopeId","data-v-aee401d9"]]),T_={class:"cards-view"},M_={class:"header"},F_={class:"controls"},B_={class:"search-box"},N_={class:"sort-controls"},j_={key:0,class:"loading"},L_={key:1,class:"empty-state"},q_={key:0},K_={key:1},U_={key:2,class:"row g-4"},V_=ot({__name:"CardsView",setup(e){const t=Oa(),n=Ae(""),r=Ae("name"),i=Ae("asc"),a=st(()=>{const d=t.getAllCards;if(!n.value)return d;const f=n.value.toLowerCase();return d.filter(m=>m.name.toLowerCase().includes(f)||m.set.toLowerCase().includes(f)||m.number.includes(f))}),l=st(()=>{const d=[...a.value];return d.sort((f,m)=>{let h=0;switch(r.value){case"name":h=f.name.localeCompare(m.name);break;case"set":h=f.set.localeCompare(m.set);break;case"price":{const g=t.getCardPrice(f.id)?.getCents()??0,v=t.getCardPrice(m.id)?.getCents()??0;h=g-v}break;case"owned":h=0;break;default:h=f.name.localeCompare(m.name)}return i.value==="asc"?h:-h}),d});return er(()=>{t.loadCardsAndPrices()}),(d,f)=>(K(),Z("div",T_,[w("div",M_,[w("div",F_,[w("div",B_,[vs(w("input",{"onUpdate:modelValue":f[0]||(f[0]=m=>n.value=m),type:"text",placeholder:"Search cards...",class:"form-control"},null,512),[[Ji,n.value]])]),w("div",N_,[vs(w("select",{"onUpdate:modelValue":f[1]||(f[1]=m=>r.value=m),class:"form-select"},[...f[3]||(f[3]=[w("option",{value:"name"},"Name",-1),w("option",{value:"set"},"Set",-1),w("option",{value:"price"},"Price",-1),w("option",{value:"owned"},"Owned Quantity",-1)])],512),[[Vp,r.value]]),w("button",{onClick:f[2]||(f[2]=m=>i.value=i.value==="asc"?"desc":"asc"),class:"btn btn-outline-primary"},ie(i.value==="asc"?"":""),1)])])]),ke(t).loading||ke(t).loadingPrices?(K(),Z("div",j_," Loading cards and prices... ")):l.value.length===0?(K(),Z("div",L_,[n.value?(K(),Z("p",q_,"No cards match your search.")):(K(),Z("p",K_,"You don't have any cards in your collection yet."))])):(K(),Z("div",U_,[(K(!0),Z(nt,null,Ut(l.value,m=>(K(),Z("div",{key:m.id,class:"col-xl-2 col-lg-3 col-md-4 col-sm-6"},[Ue(nd,{card:m},null,8,["card"])]))),128))]))]))}}),H_=Fn(V_,[["__scopeId","data-v-c166bf67"]]),W_=[{path:"/",name:"home",component:Ym},{path:"/import/csv",name:"csv-import",component:iy},{path:"/import/cardmarket",name:"cardmarket-import",component:Yg},{path:"/import/deck",name:"deck-import",component:iv},{path:"/decks",name:"decks",component:vv},{path:"/decks/:id",name:"deck-detail",component:$_,props:!0},{path:"/cards",name:"cards",component:H_}],z_=Jh({history:Eh(),routes:W_}),rd=zp(gm),Q_=vm();rd.use(Q_);rd.use(z_).mount("#app");
