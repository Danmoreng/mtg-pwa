(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();/**
* @vue/shared v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Sd(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const yt={},gi=[],or=()=>{},Im=()=>!1,Ul=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Pd=t=>t.startsWith("onUpdate:"),Bt=Object.assign,Ad=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},T_=Object.prototype.hasOwnProperty,ft=(t,e)=>T_.call(t,e),ze=Array.isArray,mi=t=>Go(t)==="[object Map]",ql=t=>Go(t)==="[object Set]",sh=t=>Go(t)==="[object Date]",Ye=t=>typeof t=="function",At=t=>typeof t=="string",Wn=t=>typeof t=="symbol",bt=t=>t!==null&&typeof t=="object",Om=t=>(bt(t)||Ye(t))&&Ye(t.then)&&Ye(t.catch),Mm=Object.prototype.toString,Go=t=>Mm.call(t),D_=t=>Go(t).slice(8,-1),Tm=t=>Go(t)==="[object Object]",Ed=t=>At(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,yo=Sd(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Wl=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},R_=/-(\w)/g,An=Wl(t=>t.replace(R_,(e,n)=>n?n.toUpperCase():"")),F_=/\B([A-Z])/g,os=Wl(t=>t.replace(F_,"-$1").toLowerCase()),Vl=Wl(t=>t.charAt(0).toUpperCase()+t.slice(1)),sl=Wl(t=>t?`on${Vl(t)}`:""),Qr=(t,e)=>!Object.is(t,e),il=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},Dm=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},yl=t=>{const e=parseFloat(t);return isNaN(e)?t:e},$_=t=>{const e=At(t)?Number(t):NaN;return isNaN(e)?t:e};let ih;const Hl=()=>ih||(ih=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Un(t){if(ze(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=At(r)?N_(r):Un(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(At(t)||bt(t))return t}const L_=/;(?![^(]*\))/g,B_=/:([^]+)/,j_=/\/\*[^]*?\*\//g;function N_(t){const e={};return t.replace(j_,"").split(L_).forEach(n=>{if(n){const r=n.split(B_);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function vt(t){let e="";if(At(t))e=t;else if(ze(t))for(let n=0;n<t.length;n++){const r=vt(t[n]);r&&(e+=r+" ")}else if(bt(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function z_(t){if(!t)return null;let{class:e,style:n}=t;return e&&!At(e)&&(t.class=vt(e)),n&&(t.style=Un(n)),t}const U_="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",q_=Sd(U_);function Rm(t){return!!t||t===""}function W_(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=Kl(t[r],e[r]);return n}function Kl(t,e){if(t===e)return!0;let n=sh(t),r=sh(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=Wn(t),r=Wn(e),n||r)return t===e;if(n=ze(t),r=ze(e),n||r)return n&&r?W_(t,e):!1;if(n=bt(t),r=bt(e),n||r){if(!n||!r)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!Kl(t[o],e[o]))return!1}}return String(t)===String(e)}function V_(t,e){return t.findIndex(n=>Kl(n,e))}const Fm=t=>!!(t&&t.__v_isRef===!0),oe=t=>At(t)?t:t==null?"":ze(t)||bt(t)&&(t.toString===Mm||!Ye(t.toString))?Fm(t)?oe(t.value):JSON.stringify(t,$m,2):String(t),$m=(t,e)=>Fm(e)?$m(t,e.value):mi(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],i)=>(n[Jc(r,i)+" =>"]=s,n),{})}:ql(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Jc(n))}:Wn(e)?Jc(e):bt(e)&&!ze(e)&&!Tm(e)?String(e):e,Jc=(t,e="")=>{var n;return Wn(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let nn;class Lm{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=nn,!e&&nn&&(this.index=(nn.scopes||(nn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=nn;try{return nn=this,e()}finally{nn=n}}}on(){++this._on===1&&(this.prevScope=nn,nn=this)}off(){this._on>0&&--this._on===0&&(nn=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function Yl(t){return new Lm(t)}function Id(){return nn}function Bm(t,e=!1){nn&&nn.cleanups.push(t)}let _t;const Zc=new WeakSet;class jm{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,nn&&nn.active&&nn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Zc.has(this)&&(Zc.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||zm(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,oh(this),Um(this);const e=_t,n=qn;_t=this,qn=!0;try{return this.fn()}finally{qm(this),_t=e,qn=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Td(e);this.deps=this.depsTail=void 0,oh(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Zc.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){ju(this)&&this.run()}get dirty(){return ju(this)}}let Nm=0,vo,bo;function zm(t,e=!1){if(t.flags|=8,e){t.next=bo,bo=t;return}t.next=vo,vo=t}function Od(){Nm++}function Md(){if(--Nm>0)return;if(bo){let e=bo;for(bo=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;vo;){let e=vo;for(vo=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function Um(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function qm(t){let e,n=t.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),Td(r),H_(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}t.deps=e,t.depsTail=n}function ju(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Wm(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Wm(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Do)||(t.globalVersion=Do,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!ju(t))))return;t.flags|=2;const e=t.dep,n=_t,r=qn;_t=t,qn=!0;try{Um(t);const s=t.fn(t._value);(e.version===0||Qr(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(s){throw e.version++,s}finally{_t=n,qn=r,qm(t),t.flags&=-3}}function Td(t,e=!1){const{dep:n,prevSub:r,nextSub:s}=t;if(r&&(r.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)Td(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function H_(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let qn=!0;const Vm=[];function Er(){Vm.push(qn),qn=!1}function Ir(){const t=Vm.pop();qn=t===void 0?!0:t}function oh(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=_t;_t=void 0;try{e()}finally{_t=n}}}let Do=0;class K_{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Dd{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!_t||!qn||_t===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==_t)n=this.activeLink=new K_(_t,this),_t.deps?(n.prevDep=_t.depsTail,_t.depsTail.nextDep=n,_t.depsTail=n):_t.deps=_t.depsTail=n,Hm(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=_t.depsTail,n.nextDep=void 0,_t.depsTail.nextDep=n,_t.depsTail=n,_t.deps===n&&(_t.deps=r)}return n}trigger(e){this.version++,Do++,this.notify(e)}notify(e){Od();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Md()}}}function Hm(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)Hm(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const vl=new WeakMap,$s=Symbol(""),Nu=Symbol(""),Ro=Symbol("");function rn(t,e,n){if(qn&&_t){let r=vl.get(t);r||vl.set(t,r=new Map);let s=r.get(n);s||(r.set(n,s=new Dd),s.map=r,s.key=n),s.track()}}function Sr(t,e,n,r,s,i){const o=vl.get(t);if(!o){Do++;return}const a=l=>{l&&l.trigger()};if(Od(),e==="clear")o.forEach(a);else{const l=ze(t),c=l&&Ed(n);if(l&&n==="length"){const u=Number(r);o.forEach((f,p)=>{(p==="length"||p===Ro||!Wn(p)&&p>=u)&&a(f)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),c&&a(o.get(Ro)),e){case"add":l?c&&a(o.get("length")):(a(o.get($s)),mi(t)&&a(o.get(Nu)));break;case"delete":l||(a(o.get($s)),mi(t)&&a(o.get(Nu)));break;case"set":mi(t)&&a(o.get($s));break}}Md()}function Y_(t,e){const n=vl.get(t);return n&&n.get(e)}function si(t){const e=tt(t);return e===t?e:(rn(e,"iterate",Ro),jn(t)?e:e.map(Yt))}function Gl(t){return rn(t=tt(t),"iterate",Ro),t}const G_={__proto__:null,[Symbol.iterator](){return eu(this,Symbol.iterator,Yt)},concat(...t){return si(this).concat(...t.map(e=>ze(e)?si(e):e))},entries(){return eu(this,"entries",t=>(t[1]=Yt(t[1]),t))},every(t,e){return hr(this,"every",t,e,void 0,arguments)},filter(t,e){return hr(this,"filter",t,e,n=>n.map(Yt),arguments)},find(t,e){return hr(this,"find",t,e,Yt,arguments)},findIndex(t,e){return hr(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return hr(this,"findLast",t,e,Yt,arguments)},findLastIndex(t,e){return hr(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return hr(this,"forEach",t,e,void 0,arguments)},includes(...t){return tu(this,"includes",t)},indexOf(...t){return tu(this,"indexOf",t)},join(t){return si(this).join(t)},lastIndexOf(...t){return tu(this,"lastIndexOf",t)},map(t,e){return hr(this,"map",t,e,void 0,arguments)},pop(){return Gi(this,"pop")},push(...t){return Gi(this,"push",t)},reduce(t,...e){return ah(this,"reduce",t,e)},reduceRight(t,...e){return ah(this,"reduceRight",t,e)},shift(){return Gi(this,"shift")},some(t,e){return hr(this,"some",t,e,void 0,arguments)},splice(...t){return Gi(this,"splice",t)},toReversed(){return si(this).toReversed()},toSorted(t){return si(this).toSorted(t)},toSpliced(...t){return si(this).toSpliced(...t)},unshift(...t){return Gi(this,"unshift",t)},values(){return eu(this,"values",Yt)}};function eu(t,e,n){const r=Gl(t),s=r[e]();return r!==t&&!jn(t)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.value&&(i.value=n(i.value)),i}),s}const X_=Array.prototype;function hr(t,e,n,r,s,i){const o=Gl(t),a=o!==t&&!jn(t),l=o[e];if(l!==X_[e]){const f=l.apply(t,i);return a?Yt(f):f}let c=n;o!==t&&(a?c=function(f,p){return n.call(this,Yt(f),p,t)}:n.length>2&&(c=function(f,p){return n.call(this,f,p,t)}));const u=l.call(o,c,r);return a&&s?s(u):u}function ah(t,e,n,r){const s=Gl(t);let i=n;return s!==t&&(jn(t)?n.length>3&&(i=function(o,a,l){return n.call(this,o,a,l,t)}):i=function(o,a,l){return n.call(this,o,Yt(a),l,t)}),s[e](i,...r)}function tu(t,e,n){const r=tt(t);rn(r,"iterate",Ro);const s=r[e](...n);return(s===-1||s===!1)&&Xo(n[0])?(n[0]=tt(n[0]),r[e](...n)):s}function Gi(t,e,n=[]){Er(),Od();const r=tt(t)[e].apply(t,n);return Md(),Ir(),r}const Q_=Sd("__proto__,__v_isRef,__isVue"),Km=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Wn));function J_(t){Wn(t)||(t=String(t));const e=tt(this);return rn(e,"has",t),e.hasOwnProperty(t)}class Ym{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?l0:Jm:i?Qm:Xm).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=ze(e);if(!s){let l;if(o&&(l=G_[n]))return l;if(n==="hasOwnProperty")return J_}const a=Reflect.get(e,n,Dt(e)?e:r);return(Wn(n)?Km.has(n):Q_(n))||(s||rn(e,"get",n),i)?a:Dt(a)?o&&Ed(n)?a:a.value:bt(a)?s?ey(a):qs(a):a}}class Gm extends Ym{constructor(e=!1){super(!1,e)}set(e,n,r,s){let i=e[n];if(!this._isShallow){const l=rs(i);if(!jn(r)&&!rs(r)&&(i=tt(i),r=tt(r)),!ze(e)&&Dt(i)&&!Dt(r))return l||(i.value=r),!0}const o=ze(e)&&Ed(n)?Number(n)<e.length:ft(e,n),a=Reflect.set(e,n,r,Dt(e)?e:s);return e===tt(s)&&(o?Qr(r,i)&&Sr(e,"set",n,r):Sr(e,"add",n,r)),a}deleteProperty(e,n){const r=ft(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&Sr(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!Wn(n)||!Km.has(n))&&rn(e,"has",n),r}ownKeys(e){return rn(e,"iterate",ze(e)?"length":$s),Reflect.ownKeys(e)}}class Z_ extends Ym{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const e0=new Gm,t0=new Z_,n0=new Gm(!0);const zu=t=>t,Da=t=>Reflect.getPrototypeOf(t);function r0(t,e,n){return function(...r){const s=this.__v_raw,i=tt(s),o=mi(i),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=s[t](...r),u=n?zu:e?bl:Yt;return!e&&rn(i,"iterate",l?Nu:$s),{next(){const{value:f,done:p}=c.next();return p?{value:f,done:p}:{value:a?[u(f[0]),u(f[1])]:u(f),done:p}},[Symbol.iterator](){return this}}}}function Ra(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function s0(t,e){const n={get(s){const i=this.__v_raw,o=tt(i),a=tt(s);t||(Qr(s,a)&&rn(o,"get",s),rn(o,"get",a));const{has:l}=Da(o),c=e?zu:t?bl:Yt;if(l.call(o,s))return c(i.get(s));if(l.call(o,a))return c(i.get(a));i!==o&&i.get(s)},get size(){const s=this.__v_raw;return!t&&rn(tt(s),"iterate",$s),s.size},has(s){const i=this.__v_raw,o=tt(i),a=tt(s);return t||(Qr(s,a)&&rn(o,"has",s),rn(o,"has",a)),s===a?i.has(s):i.has(s)||i.has(a)},forEach(s,i){const o=this,a=o.__v_raw,l=tt(a),c=e?zu:t?bl:Yt;return!t&&rn(l,"iterate",$s),a.forEach((u,f)=>s.call(i,c(u),c(f),o))}};return Bt(n,t?{add:Ra("add"),set:Ra("set"),delete:Ra("delete"),clear:Ra("clear")}:{add(s){!e&&!jn(s)&&!rs(s)&&(s=tt(s));const i=tt(this);return Da(i).has.call(i,s)||(i.add(s),Sr(i,"add",s,s)),this},set(s,i){!e&&!jn(i)&&!rs(i)&&(i=tt(i));const o=tt(this),{has:a,get:l}=Da(o);let c=a.call(o,s);c||(s=tt(s),c=a.call(o,s));const u=l.call(o,s);return o.set(s,i),c?Qr(i,u)&&Sr(o,"set",s,i):Sr(o,"add",s,i),this},delete(s){const i=tt(this),{has:o,get:a}=Da(i);let l=o.call(i,s);l||(s=tt(s),l=o.call(i,s)),a&&a.call(i,s);const c=i.delete(s);return l&&Sr(i,"delete",s,void 0),c},clear(){const s=tt(this),i=s.size!==0,o=s.clear();return i&&Sr(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=r0(s,t,e)}),n}function Rd(t,e){const n=s0(t,e);return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(ft(n,s)&&s in r?n:r,s,i)}const i0={get:Rd(!1,!1)},o0={get:Rd(!1,!0)},a0={get:Rd(!0,!1)};const Xm=new WeakMap,Qm=new WeakMap,Jm=new WeakMap,l0=new WeakMap;function c0(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function u0(t){return t.__v_skip||!Object.isExtensible(t)?0:c0(D_(t))}function qs(t){return rs(t)?t:Fd(t,!1,e0,i0,Xm)}function Zm(t){return Fd(t,!1,n0,o0,Qm)}function ey(t){return Fd(t,!0,t0,a0,Jm)}function Fd(t,e,n,r,s){if(!bt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=u0(t);if(i===0)return t;const o=s.get(t);if(o)return o;const a=new Proxy(t,i===2?r:n);return s.set(t,a),a}function Jr(t){return rs(t)?Jr(t.__v_raw):!!(t&&t.__v_isReactive)}function rs(t){return!!(t&&t.__v_isReadonly)}function jn(t){return!!(t&&t.__v_isShallow)}function Xo(t){return t?!!t.__v_raw:!1}function tt(t){const e=t&&t.__v_raw;return e?tt(e):t}function $d(t){return!ft(t,"__v_skip")&&Object.isExtensible(t)&&Dm(t,"__v_skip",!0),t}const Yt=t=>bt(t)?qs(t):t,bl=t=>bt(t)?ey(t):t;function Dt(t){return t?t.__v_isRef===!0:!1}function ge(t){return ty(t,!1)}function Xl(t){return ty(t,!0)}function ty(t,e){return Dt(t)?t:new d0(t,e)}class d0{constructor(e,n){this.dep=new Dd,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:tt(e),this._value=n?e:Yt(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||jn(e)||rs(e);e=r?e:tt(e),Qr(e,n)&&(this._rawValue=e,this._value=r?e:Yt(e),this.dep.trigger())}}function Re(t){return Dt(t)?t.value:t}function ar(t){return Ye(t)?t():Re(t)}const f0={get:(t,e,n)=>e==="__v_raw"?t:Re(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return Dt(s)&&!Dt(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function ny(t){return Jr(t)?t:new Proxy(t,f0)}function Ld(t){const e=ze(t)?new Array(t.length):{};for(const n in t)e[n]=p0(t,n);return e}class h0{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return Y_(tt(this._object),this._key)}}function p0(t,e,n){const r=t[e];return Dt(r)?r:new h0(t,e,n)}class g0{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Dd(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Do-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&_t!==this)return zm(this,!0),!0}get value(){const e=this.dep.track();return Wm(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function m0(t,e,n=!1){let r,s;return Ye(t)?r=t:(r=t.get,s=t.set),new g0(r,s,n)}const Fa={},_l=new WeakMap;let As;function y0(t,e=!1,n=As){if(n){let r=_l.get(n);r||_l.set(n,r=[]),r.push(t)}}function v0(t,e,n=yt){const{immediate:r,deep:s,once:i,scheduler:o,augmentJob:a,call:l}=n,c=S=>s?S:jn(S)||s===!1||s===0?Pr(S,1):Pr(S);let u,f,p,m,v=!1,_=!1;if(Dt(t)?(f=()=>t.value,v=jn(t)):Jr(t)?(f=()=>c(t),v=!0):ze(t)?(_=!0,v=t.some(S=>Jr(S)||jn(S)),f=()=>t.map(S=>{if(Dt(S))return S.value;if(Jr(S))return c(S);if(Ye(S))return l?l(S,2):S()})):Ye(t)?e?f=l?()=>l(t,2):t:f=()=>{if(p){Er();try{p()}finally{Ir()}}const S=As;As=u;try{return l?l(t,3,[m]):t(m)}finally{As=S}}:f=or,e&&s){const S=f,M=s===!0?1/0:s;f=()=>Pr(S(),M)}const k=Id(),C=()=>{u.stop(),k&&k.active&&Ad(k.effects,u)};if(i&&e){const S=e;e=(...M)=>{S(...M),C()}}let A=_?new Array(t.length).fill(Fa):Fa;const P=S=>{if(!(!(u.flags&1)||!u.dirty&&!S))if(e){const M=u.run();if(s||v||(_?M.some((T,X)=>Qr(T,A[X])):Qr(M,A))){p&&p();const T=As;As=u;try{const X=[M,A===Fa?void 0:_&&A[0]===Fa?[]:A,m];A=M,l?l(e,3,X):e(...X)}finally{As=T}}}else u.run()};return a&&a(P),u=new jm(f),u.scheduler=o?()=>o(P,!1):P,m=S=>y0(S,!1,u),p=u.onStop=()=>{const S=_l.get(u);if(S){if(l)l(S,4);else for(const M of S)M();_l.delete(u)}},e?r?P(!0):A=u.run():o?o(P.bind(null,!0),!0):u.run(),C.pause=u.pause.bind(u),C.resume=u.resume.bind(u),C.stop=C,C}function Pr(t,e=1/0,n){if(e<=0||!bt(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,Dt(t))Pr(t.value,e,n);else if(ze(t))for(let r=0;r<t.length;r++)Pr(t[r],e,n);else if(ql(t)||mi(t))t.forEach(r=>{Pr(r,e,n)});else if(Tm(t)){for(const r in t)Pr(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Pr(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Qo(t,e,n,r){try{return r?t(...r):t()}catch(s){Ql(s,e,n)}}function Vn(t,e,n,r){if(Ye(t)){const s=Qo(t,e,n,r);return s&&Om(s)&&s.catch(i=>{Ql(i,e,n)}),s}if(ze(t)){const s=[];for(let i=0;i<t.length;i++)s.push(Vn(t[i],e,n,r));return s}}function Ql(t,e,n,r=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||yt;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const u=a.ec;if(u){for(let f=0;f<u.length;f++)if(u[f](t,l,c)===!1)return}a=a.parent}if(i){Er(),Qo(i,null,10,[t,l,c]),Ir();return}}b0(t,n,s,r,o)}function b0(t,e,n,r=!0,s=!1){if(s)throw t;console.error(t)}const fn=[];let nr=-1;const yi=[];let Hr=null,ci=0;const ry=Promise.resolve();let wl=null;function En(t){const e=wl||ry;return t?e.then(this?t.bind(this):t):e}function _0(t){let e=nr+1,n=fn.length;for(;e<n;){const r=e+n>>>1,s=fn[r],i=Fo(s);i<t||i===t&&s.flags&2?e=r+1:n=r}return e}function Bd(t){if(!(t.flags&1)){const e=Fo(t),n=fn[fn.length-1];!n||!(t.flags&2)&&e>=Fo(n)?fn.push(t):fn.splice(_0(e),0,t),t.flags|=1,sy()}}function sy(){wl||(wl=ry.then(oy))}function w0(t){ze(t)?yi.push(...t):Hr&&t.id===-1?Hr.splice(ci+1,0,t):t.flags&1||(yi.push(t),t.flags|=1),sy()}function lh(t,e,n=nr+1){for(;n<fn.length;n++){const r=fn[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;fn.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function iy(t){if(yi.length){const e=[...new Set(yi)].sort((n,r)=>Fo(n)-Fo(r));if(yi.length=0,Hr){Hr.push(...e);return}for(Hr=e,ci=0;ci<Hr.length;ci++){const n=Hr[ci];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Hr=null,ci=0}}const Fo=t=>t.id==null?t.flags&2?-1:1/0:t.id;function oy(t){try{for(nr=0;nr<fn.length;nr++){const e=fn[nr];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Qo(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;nr<fn.length;nr++){const e=fn[nr];e&&(e.flags&=-2)}nr=-1,fn.length=0,iy(),wl=null,(fn.length||yi.length)&&oy()}}let Gt=null,ay=null;function xl(t){const e=Gt;return Gt=t,ay=t&&t.type.__scopeId||null,e}function lt(t,e=Gt,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&wh(-1);const i=xl(e);let o;try{o=t(...s)}finally{xl(i),r._d&&wh(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Ls(t,e){if(Gt===null)return t;const n=nc(Gt),r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,o,a,l=yt]=e[s];i&&(Ye(i)&&(i={mounted:i,updated:i}),i.deep&&Pr(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function gs(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let l=a.dir[r];l&&(Er(),Vn(l,n,8,[t.el,a,t,e]),Ir())}}const ly=Symbol("_vte"),x0=t=>t.__isTeleport,_o=t=>t&&(t.disabled||t.disabled===""),ch=t=>t&&(t.defer||t.defer===""),uh=t=>typeof SVGElement<"u"&&t instanceof SVGElement,dh=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,Uu=(t,e)=>{const n=t&&t.to;return At(n)?e?e(n):null:n},cy={name:"Teleport",__isTeleport:!0,process(t,e,n,r,s,i,o,a,l,c){const{mc:u,pc:f,pbc:p,o:{insert:m,querySelector:v,createText:_,createComment:k}}=c,C=_o(e.props);let{shapeFlag:A,children:P,dynamicChildren:S}=e;if(t==null){const M=e.el=_(""),T=e.anchor=_("");m(M,n,r),m(T,n,r);const X=(E,Z)=>{A&16&&(s&&s.isCE&&(s.ce._teleportTarget=E),u(P,E,Z,s,i,o,a,l))},V=()=>{const E=e.target=Uu(e.props,v),Z=uy(E,e,_,m);E&&(o!=="svg"&&uh(E)?o="svg":o!=="mathml"&&dh(E)&&(o="mathml"),C||(X(E,Z),ol(e,!1)))};C&&(X(n,T),ol(e,!0)),ch(e.props)?(e.el.__isMounted=!1,dn(()=>{V(),delete e.el.__isMounted},i)):V()}else{if(ch(e.props)&&t.el.__isMounted===!1){dn(()=>{cy.process(t,e,n,r,s,i,o,a,l,c)},i);return}e.el=t.el,e.targetStart=t.targetStart;const M=e.anchor=t.anchor,T=e.target=t.target,X=e.targetAnchor=t.targetAnchor,V=_o(t.props),E=V?n:T,Z=V?M:X;if(o==="svg"||uh(T)?o="svg":(o==="mathml"||dh(T))&&(o="mathml"),S?(p(t.dynamicChildren,S,E,s,i,o,a),Ud(t,e,!0)):l||f(t,e,E,Z,s,i,o,a,!1),C)V?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):$a(e,n,M,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const K=e.target=Uu(e.props,v);K&&$a(e,K,null,c,0)}else V&&$a(e,T,X,c,1);ol(e,C)}},remove(t,e,n,{um:r,o:{remove:s}},i){const{shapeFlag:o,children:a,anchor:l,targetStart:c,targetAnchor:u,target:f,props:p}=t;if(f&&(s(c),s(u)),i&&s(l),o&16){const m=i||!_o(p);for(let v=0;v<a.length;v++){const _=a[v];r(_,e,n,m,!!_.dynamicChildren)}}},move:$a,hydrate:k0};function $a(t,e,n,{o:{insert:r},m:s},i=2){i===0&&r(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:c,props:u}=t,f=i===2;if(f&&r(o,e,n),(!f||_o(u))&&l&16)for(let p=0;p<c.length;p++)s(c[p],e,n,2);f&&r(a,e,n)}function k0(t,e,n,r,s,i,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:c,createText:u}},f){const p=e.target=Uu(e.props,l);if(p){const m=_o(e.props),v=p._lpa||p.firstChild;if(e.shapeFlag&16)if(m)e.anchor=f(o(t),e,a(t),n,r,s,i),e.targetStart=v,e.targetAnchor=v&&o(v);else{e.anchor=o(t);let _=v;for(;_;){if(_&&_.nodeType===8){if(_.data==="teleport start anchor")e.targetStart=_;else if(_.data==="teleport anchor"){e.targetAnchor=_,p._lpa=e.targetAnchor&&o(e.targetAnchor);break}}_=o(_)}e.targetAnchor||uy(p,e,u,c),f(v&&o(v),e,p,n,r,s,i)}ol(e,m)}return e.anchor&&o(e.anchor)}const C0=cy;function ol(t,e){const n=t.ctx;if(n&&n.ut){let r,s;for(e?(r=t.el,s=t.anchor):(r=t.targetStart,s=t.targetAnchor);r&&r!==s;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function uy(t,e,n,r){const s=e.targetStart=n(""),i=e.targetAnchor=n("");return s[ly]=i,t&&(r(s,t),r(i,t)),i}const Es=Symbol("_leaveCb"),La=Symbol("_enterCb");function S0(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Nn(()=>{t.isMounted=!0}),jd(()=>{t.isUnmounting=!0}),t}const Mn=[Function,Array],P0={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Mn,onEnter:Mn,onAfterEnter:Mn,onEnterCancelled:Mn,onBeforeLeave:Mn,onLeave:Mn,onAfterLeave:Mn,onLeaveCancelled:Mn,onBeforeAppear:Mn,onAppear:Mn,onAfterAppear:Mn,onAppearCancelled:Mn};function A0(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function qu(t,e,n,r,s){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:u,onEnterCancelled:f,onBeforeLeave:p,onLeave:m,onAfterLeave:v,onLeaveCancelled:_,onBeforeAppear:k,onAppear:C,onAfterAppear:A,onAppearCancelled:P}=e,S=String(t.key),M=A0(n,t),T=(E,Z)=>{E&&Vn(E,r,9,Z)},X=(E,Z)=>{const K=Z[1];T(E,Z),ze(E)?E.every(j=>j.length<=1)&&K():E.length<=1&&K()},V={mode:o,persisted:a,beforeEnter(E){let Z=l;if(!n.isMounted)if(i)Z=k||l;else return;E[Es]&&E[Es](!0);const K=M[S];K&&ui(t,K)&&K.el[Es]&&K.el[Es](),T(Z,[E])},enter(E){let Z=c,K=u,j=f;if(!n.isMounted)if(i)Z=C||c,K=A||u,j=P||f;else return;let de=!1;const pe=E[La]=Ae=>{de||(de=!0,Ae?T(j,[E]):T(K,[E]),V.delayedLeave&&V.delayedLeave(),E[La]=void 0)};Z?X(Z,[E,pe]):pe()},leave(E,Z){const K=String(t.key);if(E[La]&&E[La](!0),n.isUnmounting)return Z();T(p,[E]);let j=!1;const de=E[Es]=pe=>{j||(j=!0,Z(),pe?T(_,[E]):T(v,[E]),E[Es]=void 0,M[K]===t&&delete M[K])};M[K]=t,m?X(m,[E,de]):de()},clone(E){return qu(E,e,n,r)}};return V}function $o(t,e){t.shapeFlag&6&&t.component?(t.transition=e,$o(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function dy(t,e=!1,n){let r=[],s=0;for(let i=0;i<t.length;i++){let o=t[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===Ze?(o.patchFlag&128&&s++,r=r.concat(dy(o.children,e,a))):(e||o.type!==Hn)&&r.push(a!=null?ss(o,{key:a}):o)}if(s>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function et(t,e){return Ye(t)?Bt({name:t.name},e,{setup:t}):t}function E0(){const t=cr();return t?(t.appContext.config.idPrefix||"v")+"-"+t.ids[0]+t.ids[1]++:""}function fy(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function wo(t,e,n,r,s=!1){if(ze(t)){t.forEach((v,_)=>wo(v,e&&(ze(e)?e[_]:e),n,r,s));return}if(vi(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&wo(t,e,n,r.component.subTree);return}const i=r.shapeFlag&4?nc(r.component):r.el,o=s?null:i,{i:a,r:l}=t,c=e&&e.r,u=a.refs===yt?a.refs={}:a.refs,f=a.setupState,p=tt(f),m=f===yt?Im:v=>ft(p,v);if(c!=null&&c!==l){if(At(c))u[c]=null,m(c)&&(f[c]=null);else if(Dt(c)){c.value=null;const v=e;v.k&&(u[v.k]=null)}}if(Ye(l))Qo(l,a,12,[o,u]);else{const v=At(l),_=Dt(l);if(v||_){const k=()=>{if(t.f){const C=v?m(l)?f[l]:u[l]:l.value;if(s)ze(C)&&Ad(C,i);else if(ze(C))C.includes(i)||C.push(i);else if(v)u[l]=[i],m(l)&&(f[l]=u[l]);else{const A=[i];l.value=A,t.k&&(u[t.k]=A)}}else v?(u[l]=o,m(l)&&(f[l]=o)):_&&(l.value=o,t.k&&(u[t.k]=o))};o?(k.id=-1,dn(k,n)):k()}}}Hl().requestIdleCallback;Hl().cancelIdleCallback;const vi=t=>!!t.type.__asyncLoader,hy=t=>t.type.__isKeepAlive;function I0(t,e){py(t,"a",e)}function O0(t,e){py(t,"da",e)}function py(t,e,n=sn){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(Jl(e,r,n),n){let s=n.parent;for(;s&&s.parent;)hy(s.parent.vnode)&&M0(r,e,n,s),s=s.parent}}function M0(t,e,n,r){const s=Jl(e,t,r,!0);Fi(()=>{Ad(r[e],s)},n)}function Jl(t,e,n=sn,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{Er();const a=Jo(n),l=Vn(e,n,t,o);return a(),Ir(),l});return r?s.unshift(i):s.push(i),i}}const Mr=t=>(e,n=sn)=>{(!jo||t==="sp")&&Jl(t,(...r)=>e(...r),n)},T0=Mr("bm"),Nn=Mr("m"),D0=Mr("bu"),gy=Mr("u"),jd=Mr("bum"),Fi=Mr("um"),R0=Mr("sp"),F0=Mr("rtg"),$0=Mr("rtc");function L0(t,e=sn){Jl("ec",t,e)}const B0="components";function Zl(t,e){return N0(B0,t,!0,e)||t}const j0=Symbol.for("v-ndc");function N0(t,e,n=!0,r=!1){const s=Gt||sn;if(s){const i=s.type;{const a=Pw(i,!1);if(a&&(a===e||a===An(e)||a===Vl(An(e))))return i}const o=fh(s[t]||i[t],e)||fh(s.appContext[t],e);return!o&&r?i:o}}function fh(t,e){return t&&(t[e]||t[An(e)]||t[Vl(An(e))])}function $t(t,e,n,r){let s;const i=n,o=ze(t);if(o||At(t)){const a=o&&Jr(t);let l=!1,c=!1;a&&(l=!jn(t),c=rs(t),t=Gl(t)),s=new Array(t.length);for(let u=0,f=t.length;u<f;u++)s[u]=e(l?c?bl(Yt(t[u])):Yt(t[u]):t[u],u,void 0,i)}else if(typeof t=="number"){s=new Array(t);for(let a=0;a<t;a++)s[a]=e(a+1,a,void 0,i)}else if(bt(t))if(t[Symbol.iterator])s=Array.from(t,(a,l)=>e(a,l,void 0,i));else{const a=Object.keys(t);s=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const u=a[l];s[l]=e(t[u],u,l,i)}}else s=[];return s}function vn(t,e,n={},r,s){if(Gt.ce||Gt.parent&&vi(Gt.parent)&&Gt.parent.ce)return q(),Qt(Ze,null,[qe("slot",n,r)],64);let i=t[e];i&&i._c&&(i._d=!1),q();const o=i&&my(i(n)),a=n.key||o&&o.key,l=Qt(Ze,{key:(a&&!Wn(a)?a:`_${e}`)+(!o&&r?"_fb":"")},o||[],o&&t._===1?64:-2);return l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),i&&i._c&&(i._d=!0),l}function my(t){return t.some(e=>Bo(e)?!(e.type===Hn||e.type===Ze&&!my(e.children)):!0)?t:null}const Wu=t=>t?Fy(t)?nc(t):Wu(t.parent):null,xo=Bt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Wu(t.parent),$root:t=>Wu(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>vy(t),$forceUpdate:t=>t.f||(t.f=()=>{Bd(t.update)}),$nextTick:t=>t.n||(t.n=En.bind(t.proxy)),$watch:t=>lw.bind(t)}),nu=(t,e)=>t!==yt&&!t.__isScriptSetup&&ft(t,e),z0={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const m=o[e];if(m!==void 0)switch(m){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(nu(r,e))return o[e]=1,r[e];if(s!==yt&&ft(s,e))return o[e]=2,s[e];if((c=t.propsOptions[0])&&ft(c,e))return o[e]=3,i[e];if(n!==yt&&ft(n,e))return o[e]=4,n[e];Vu&&(o[e]=0)}}const u=xo[e];let f,p;if(u)return e==="$attrs"&&rn(t.attrs,"get",""),u(t);if((f=a.__cssModules)&&(f=f[e]))return f;if(n!==yt&&ft(n,e))return o[e]=4,n[e];if(p=l.config.globalProperties,ft(p,e))return p[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return nu(s,e)?(s[e]=n,!0):r!==yt&&ft(r,e)?(r[e]=n,!0):ft(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:i,type:o}},a){let l,c;return!!(n[a]||t!==yt&&a[0]!=="$"&&ft(t,a)||nu(e,a)||(l=i[0])&&ft(l,a)||ft(r,a)||ft(xo,a)||ft(s.config.globalProperties,a)||(c=o.__cssModules)&&c[a])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:ft(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function hh(t){return ze(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Vu=!0;function U0(t){const e=vy(t),n=t.proxy,r=t.ctx;Vu=!1,e.beforeCreate&&ph(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:f,mounted:p,beforeUpdate:m,updated:v,activated:_,deactivated:k,beforeDestroy:C,beforeUnmount:A,destroyed:P,unmounted:S,render:M,renderTracked:T,renderTriggered:X,errorCaptured:V,serverPrefetch:E,expose:Z,inheritAttrs:K,components:j,directives:de,filters:pe}=e;if(c&&q0(c,r,null),o)for(const Pe in o){const te=o[Pe];Ye(te)&&(r[Pe]=te.bind(n))}if(s){const Pe=s.call(n,n);bt(Pe)&&(t.data=qs(Pe))}if(Vu=!0,i)for(const Pe in i){const te=i[Pe],ee=Ye(te)?te.bind(n,n):Ye(te.get)?te.get.bind(n,n):or,Y=!Ye(te)&&Ye(te.set)?te.set.bind(n):or,Le=He({get:ee,set:Y});Object.defineProperty(r,Pe,{enumerable:!0,configurable:!0,get:()=>Le.value,set:_e=>Le.value=_e})}if(a)for(const Pe in a)yy(a[Pe],r,n,Pe);if(l){const Pe=Ye(l)?l.call(n):l;Reflect.ownKeys(Pe).forEach(te=>{ko(te,Pe[te])})}u&&ph(u,t,"c");function Ce(Pe,te){ze(te)?te.forEach(ee=>Pe(ee.bind(n))):te&&Pe(te.bind(n))}if(Ce(T0,f),Ce(Nn,p),Ce(D0,m),Ce(gy,v),Ce(I0,_),Ce(O0,k),Ce(L0,V),Ce($0,T),Ce(F0,X),Ce(jd,A),Ce(Fi,S),Ce(R0,E),ze(Z))if(Z.length){const Pe=t.exposed||(t.exposed={});Z.forEach(te=>{Object.defineProperty(Pe,te,{get:()=>n[te],set:ee=>n[te]=ee,enumerable:!0})})}else t.exposed||(t.exposed={});M&&t.render===or&&(t.render=M),K!=null&&(t.inheritAttrs=K),j&&(t.components=j),de&&(t.directives=de),E&&fy(t)}function q0(t,e,n=or){ze(t)&&(t=Hu(t));for(const r in t){const s=t[r];let i;bt(s)?"default"in s?i=Pn(s.from||r,s.default,!0):i=Pn(s.from||r):i=Pn(s),Dt(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function ph(t,e,n){Vn(ze(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function yy(t,e,n,r){let s=r.includes(".")?Iy(n,r):()=>n[r];if(At(t)){const i=e[t];Ye(i)&&on(s,i)}else if(Ye(t))on(s,t.bind(n));else if(bt(t))if(ze(t))t.forEach(i=>yy(i,e,n,r));else{const i=Ye(t.handler)?t.handler.bind(n):e[t.handler];Ye(i)&&on(s,i,t)}}function vy(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let l;return a?l=a:!s.length&&!n&&!r?l=e:(l={},s.length&&s.forEach(c=>kl(l,c,o,!0)),kl(l,e,o)),bt(e)&&i.set(e,l),l}function kl(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&kl(t,i,n,!0),s&&s.forEach(o=>kl(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=W0[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const W0={data:gh,props:mh,emits:mh,methods:fo,computed:fo,beforeCreate:un,created:un,beforeMount:un,mounted:un,beforeUpdate:un,updated:un,beforeDestroy:un,beforeUnmount:un,destroyed:un,unmounted:un,activated:un,deactivated:un,errorCaptured:un,serverPrefetch:un,components:fo,directives:fo,watch:H0,provide:gh,inject:V0};function gh(t,e){return e?t?function(){return Bt(Ye(t)?t.call(this,this):t,Ye(e)?e.call(this,this):e)}:e:t}function V0(t,e){return fo(Hu(t),Hu(e))}function Hu(t){if(ze(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function un(t,e){return t?[...new Set([].concat(t,e))]:e}function fo(t,e){return t?Bt(Object.create(null),t,e):e}function mh(t,e){return t?ze(t)&&ze(e)?[...new Set([...t,...e])]:Bt(Object.create(null),hh(t),hh(e??{})):e}function H0(t,e){if(!t)return e;if(!e)return t;const n=Bt(Object.create(null),t);for(const r in e)n[r]=un(t[r],e[r]);return n}function by(){return{app:null,config:{isNativeTag:Im,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let K0=0;function Y0(t,e){return function(r,s=null){Ye(r)||(r=Bt({},r)),s!=null&&!bt(s)&&(s=null);const i=by(),o=new WeakSet,a=[];let l=!1;const c=i.app={_uid:K0++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:Ly,get config(){return i.config},set config(u){},use(u,...f){return o.has(u)||(u&&Ye(u.install)?(o.add(u),u.install(c,...f)):Ye(u)&&(o.add(u),u(c,...f))),c},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),c},component(u,f){return f?(i.components[u]=f,c):i.components[u]},directive(u,f){return f?(i.directives[u]=f,c):i.directives[u]},mount(u,f,p){if(!l){const m=c._ceVNode||qe(r,s);return m.appContext=i,p===!0?p="svg":p===!1&&(p=void 0),t(m,u,p),l=!0,c._container=u,u.__vue_app__=c,nc(m.component)}},onUnmount(u){a.push(u)},unmount(){l&&(Vn(a,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(u,f){return i.provides[u]=f,c},runWithContext(u){const f=Bs;Bs=c;try{return u()}finally{Bs=f}}};return c}}let Bs=null;function ko(t,e){if(sn){let n=sn.provides;const r=sn.parent&&sn.parent.provides;r===n&&(n=sn.provides=Object.create(r)),n[t]=e}}function Pn(t,e,n=!1){const r=cr();if(r||Bs){let s=Bs?Bs._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&Ye(e)?e.call(r&&r.proxy):e}}function G0(){return!!(cr()||Bs)}const _y={},wy=()=>Object.create(_y),xy=t=>Object.getPrototypeOf(t)===_y;function X0(t,e,n,r=!1){const s={},i=wy();t.propsDefaults=Object.create(null),ky(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:Zm(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function Q0(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,a=tt(s),[l]=t.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let f=0;f<u.length;f++){let p=u[f];if(ec(t.emitsOptions,p))continue;const m=e[p];if(l)if(ft(i,p))m!==i[p]&&(i[p]=m,c=!0);else{const v=An(p);s[v]=Ku(l,a,v,m,t,!1)}else m!==i[p]&&(i[p]=m,c=!0)}}}else{ky(t,e,s,i)&&(c=!0);let u;for(const f in a)(!e||!ft(e,f)&&((u=os(f))===f||!ft(e,u)))&&(l?n&&(n[f]!==void 0||n[u]!==void 0)&&(s[f]=Ku(l,a,f,void 0,t,!0)):delete s[f]);if(i!==a)for(const f in i)(!e||!ft(e,f))&&(delete i[f],c=!0)}c&&Sr(t.attrs,"set","")}function ky(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(yo(l))continue;const c=e[l];let u;s&&ft(s,u=An(l))?!i||!i.includes(u)?n[u]=c:(a||(a={}))[u]=c:ec(t.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(i){const l=tt(n),c=a||yt;for(let u=0;u<i.length;u++){const f=i[u];n[f]=Ku(s,l,f,c[f],t,!ft(c,f))}}return o}function Ku(t,e,n,r,s,i){const o=t[n];if(o!=null){const a=ft(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Ye(l)){const{propsDefaults:c}=s;if(n in c)r=c[n];else{const u=Jo(s);r=c[n]=l.call(null,e),u()}}else r=l;s.ce&&s.ce._setProp(n,r)}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===os(n))&&(r=!0))}return r}const J0=new WeakMap;function Cy(t,e,n=!1){const r=n?J0:e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},a=[];let l=!1;if(!Ye(t)){const u=f=>{l=!0;const[p,m]=Cy(f,e,!0);Bt(o,p),m&&a.push(...m)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!i&&!l)return bt(t)&&r.set(t,gi),gi;if(ze(i))for(let u=0;u<i.length;u++){const f=An(i[u]);yh(f)&&(o[f]=yt)}else if(i)for(const u in i){const f=An(u);if(yh(f)){const p=i[u],m=o[f]=ze(p)||Ye(p)?{type:p}:Bt({},p),v=m.type;let _=!1,k=!0;if(ze(v))for(let C=0;C<v.length;++C){const A=v[C],P=Ye(A)&&A.name;if(P==="Boolean"){_=!0;break}else P==="String"&&(k=!1)}else _=Ye(v)&&v.name==="Boolean";m[0]=_,m[1]=k,(_||ft(m,"default"))&&a.push(f)}}const c=[o,a];return bt(t)&&r.set(t,c),c}function yh(t){return t[0]!=="$"&&!yo(t)}const Nd=t=>t==="_"||t==="_ctx"||t==="$stable",zd=t=>ze(t)?t.map(ir):[ir(t)],Z0=(t,e,n)=>{if(e._n)return e;const r=lt((...s)=>zd(e(...s)),n);return r._c=!1,r},Sy=(t,e,n)=>{const r=t._ctx;for(const s in t){if(Nd(s))continue;const i=t[s];if(Ye(i))e[s]=Z0(s,i,r);else if(i!=null){const o=zd(i);e[s]=()=>o}}},Py=(t,e)=>{const n=zd(e);t.slots.default=()=>n},Ay=(t,e,n)=>{for(const r in e)(n||!Nd(r))&&(t[r]=e[r])},ew=(t,e,n)=>{const r=t.slots=wy();if(t.vnode.shapeFlag&32){const s=e._;s?(Ay(r,e,n),n&&Dm(r,"_",s,!0)):Sy(e,r)}else e&&Py(t,e)},tw=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=yt;if(r.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:Ay(s,e,n):(i=!e.$stable,Sy(e,s)),o=e}else e&&(Py(t,e),o={default:1});if(i)for(const a in s)!Nd(a)&&o[a]==null&&delete s[a]},dn=gw;function nw(t){return rw(t)}function rw(t,e){const n=Hl();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:f,nextSibling:p,setScopeId:m=or,insertStaticContent:v}=t,_=(O,F,Q,le=null,ue=null,ce=null,Ee=void 0,xe=null,ve=!!F.dynamicChildren)=>{if(O===F)return;O&&!ui(O,F)&&(le=ae(O),_e(O,ue,ce,!0),O=null),F.patchFlag===-2&&(ve=!1,F.dynamicChildren=null);const{type:fe,ref:Ne,shapeFlag:Ie}=F;switch(fe){case tc:k(O,F,Q,le);break;case Hn:C(O,F,Q,le);break;case al:O==null&&A(F,Q,le,Ee);break;case Ze:j(O,F,Q,le,ue,ce,Ee,xe,ve);break;default:Ie&1?M(O,F,Q,le,ue,ce,Ee,xe,ve):Ie&6?de(O,F,Q,le,ue,ce,Ee,xe,ve):(Ie&64||Ie&128)&&fe.process(O,F,Q,le,ue,ce,Ee,xe,ve,$e)}Ne!=null&&ue?wo(Ne,O&&O.ref,ce,F||O,!F):Ne==null&&O&&O.ref!=null&&wo(O.ref,null,ce,O,!0)},k=(O,F,Q,le)=>{if(O==null)r(F.el=a(F.children),Q,le);else{const ue=F.el=O.el;F.children!==O.children&&c(ue,F.children)}},C=(O,F,Q,le)=>{O==null?r(F.el=l(F.children||""),Q,le):F.el=O.el},A=(O,F,Q,le)=>{[O.el,O.anchor]=v(O.children,F,Q,le,O.el,O.anchor)},P=({el:O,anchor:F},Q,le)=>{let ue;for(;O&&O!==F;)ue=p(O),r(O,Q,le),O=ue;r(F,Q,le)},S=({el:O,anchor:F})=>{let Q;for(;O&&O!==F;)Q=p(O),s(O),O=Q;s(F)},M=(O,F,Q,le,ue,ce,Ee,xe,ve)=>{F.type==="svg"?Ee="svg":F.type==="math"&&(Ee="mathml"),O==null?T(F,Q,le,ue,ce,Ee,xe,ve):E(O,F,ue,ce,Ee,xe,ve)},T=(O,F,Q,le,ue,ce,Ee,xe)=>{let ve,fe;const{props:Ne,shapeFlag:Ie,transition:je,dirs:Ue}=O;if(ve=O.el=o(O.type,ce,Ne&&Ne.is,Ne),Ie&8?u(ve,O.children):Ie&16&&V(O.children,ve,null,le,ue,ru(O,ce),Ee,xe),Ue&&gs(O,null,le,"created"),X(ve,O,O.scopeId,Ee,le),Ne){for(const it in Ne)it!=="value"&&!yo(it)&&i(ve,it,null,Ne[it],ce,le);"value"in Ne&&i(ve,"value",null,Ne.value,ce),(fe=Ne.onVnodeBeforeMount)&&Jn(fe,le,O)}Ue&&gs(O,null,le,"beforeMount");const Ge=sw(ue,je);Ge&&je.beforeEnter(ve),r(ve,F,Q),((fe=Ne&&Ne.onVnodeMounted)||Ge||Ue)&&dn(()=>{fe&&Jn(fe,le,O),Ge&&je.enter(ve),Ue&&gs(O,null,le,"mounted")},ue)},X=(O,F,Q,le,ue)=>{if(Q&&m(O,Q),le)for(let ce=0;ce<le.length;ce++)m(O,le[ce]);if(ue){let ce=ue.subTree;if(F===ce||My(ce.type)&&(ce.ssContent===F||ce.ssFallback===F)){const Ee=ue.vnode;X(O,Ee,Ee.scopeId,Ee.slotScopeIds,ue.parent)}}},V=(O,F,Q,le,ue,ce,Ee,xe,ve=0)=>{for(let fe=ve;fe<O.length;fe++){const Ne=O[fe]=xe?Kr(O[fe]):ir(O[fe]);_(null,Ne,F,Q,le,ue,ce,Ee,xe)}},E=(O,F,Q,le,ue,ce,Ee)=>{const xe=F.el=O.el;let{patchFlag:ve,dynamicChildren:fe,dirs:Ne}=F;ve|=O.patchFlag&16;const Ie=O.props||yt,je=F.props||yt;let Ue;if(Q&&ms(Q,!1),(Ue=je.onVnodeBeforeUpdate)&&Jn(Ue,Q,F,O),Ne&&gs(F,O,Q,"beforeUpdate"),Q&&ms(Q,!0),(Ie.innerHTML&&je.innerHTML==null||Ie.textContent&&je.textContent==null)&&u(xe,""),fe?Z(O.dynamicChildren,fe,xe,Q,le,ru(F,ue),ce):Ee||te(O,F,xe,null,Q,le,ru(F,ue),ce,!1),ve>0){if(ve&16)K(xe,Ie,je,Q,ue);else if(ve&2&&Ie.class!==je.class&&i(xe,"class",null,je.class,ue),ve&4&&i(xe,"style",Ie.style,je.style,ue),ve&8){const Ge=F.dynamicProps;for(let it=0;it<Ge.length;it++){const at=Ge[it],Rt=Ie[at],jt=je[at];(jt!==Rt||at==="value")&&i(xe,at,Rt,jt,ue,Q)}}ve&1&&O.children!==F.children&&u(xe,F.children)}else!Ee&&fe==null&&K(xe,Ie,je,Q,ue);((Ue=je.onVnodeUpdated)||Ne)&&dn(()=>{Ue&&Jn(Ue,Q,F,O),Ne&&gs(F,O,Q,"updated")},le)},Z=(O,F,Q,le,ue,ce,Ee)=>{for(let xe=0;xe<F.length;xe++){const ve=O[xe],fe=F[xe],Ne=ve.el&&(ve.type===Ze||!ui(ve,fe)||ve.shapeFlag&198)?f(ve.el):Q;_(ve,fe,Ne,null,le,ue,ce,Ee,!0)}},K=(O,F,Q,le,ue)=>{if(F!==Q){if(F!==yt)for(const ce in F)!yo(ce)&&!(ce in Q)&&i(O,ce,F[ce],null,ue,le);for(const ce in Q){if(yo(ce))continue;const Ee=Q[ce],xe=F[ce];Ee!==xe&&ce!=="value"&&i(O,ce,xe,Ee,ue,le)}"value"in Q&&i(O,"value",F.value,Q.value,ue)}},j=(O,F,Q,le,ue,ce,Ee,xe,ve)=>{const fe=F.el=O?O.el:a(""),Ne=F.anchor=O?O.anchor:a("");let{patchFlag:Ie,dynamicChildren:je,slotScopeIds:Ue}=F;Ue&&(xe=xe?xe.concat(Ue):Ue),O==null?(r(fe,Q,le),r(Ne,Q,le),V(F.children||[],Q,Ne,ue,ce,Ee,xe,ve)):Ie>0&&Ie&64&&je&&O.dynamicChildren?(Z(O.dynamicChildren,je,Q,ue,ce,Ee,xe),(F.key!=null||ue&&F===ue.subTree)&&Ud(O,F,!0)):te(O,F,Q,Ne,ue,ce,Ee,xe,ve)},de=(O,F,Q,le,ue,ce,Ee,xe,ve)=>{F.slotScopeIds=xe,O==null?F.shapeFlag&512?ue.ctx.activate(F,Q,le,Ee,ve):pe(F,Q,le,ue,ce,Ee,ve):Ae(O,F,ve)},pe=(O,F,Q,le,ue,ce,Ee)=>{const xe=O.component=ww(O,le,ue);if(hy(O)&&(xe.ctx.renderer=$e),xw(xe,!1,Ee),xe.asyncDep){if(ue&&ue.registerDep(xe,Ce,Ee),!O.el){const ve=xe.subTree=qe(Hn);C(null,ve,F,Q),O.placeholder=ve.el}}else Ce(xe,O,F,Q,ue,ce,Ee)},Ae=(O,F,Q)=>{const le=F.component=O.component;if(hw(O,F,Q))if(le.asyncDep&&!le.asyncResolved){Pe(le,F,Q);return}else le.next=F,le.update();else F.el=O.el,le.vnode=F},Ce=(O,F,Q,le,ue,ce,Ee)=>{const xe=()=>{if(O.isMounted){let{next:Ie,bu:je,u:Ue,parent:Ge,vnode:it}=O;{const Nt=Ey(O);if(Nt){Ie&&(Ie.el=it.el,Pe(O,Ie,Ee)),Nt.asyncDep.then(()=>{O.isUnmounted||xe()});return}}let at=Ie,Rt;ms(O,!1),Ie?(Ie.el=it.el,Pe(O,Ie,Ee)):Ie=it,je&&il(je),(Rt=Ie.props&&Ie.props.onVnodeBeforeUpdate)&&Jn(Rt,Ge,Ie,it),ms(O,!0);const jt=bh(O),ln=O.subTree;O.subTree=jt,_(ln,jt,f(ln.el),ae(ln),O,ue,ce),Ie.el=jt.el,at===null&&pw(O,jt.el),Ue&&dn(Ue,ue),(Rt=Ie.props&&Ie.props.onVnodeUpdated)&&dn(()=>Jn(Rt,Ge,Ie,it),ue)}else{let Ie;const{el:je,props:Ue}=F,{bm:Ge,m:it,parent:at,root:Rt,type:jt}=O,ln=vi(F);ms(O,!1),Ge&&il(Ge),!ln&&(Ie=Ue&&Ue.onVnodeBeforeMount)&&Jn(Ie,at,F),ms(O,!0);{Rt.ce&&Rt.ce._def.shadowRoot!==!1&&Rt.ce._injectChildStyle(jt);const Nt=O.subTree=bh(O);_(null,Nt,Q,le,O,ue,ce),F.el=Nt.el}if(it&&dn(it,ue),!ln&&(Ie=Ue&&Ue.onVnodeMounted)){const Nt=F;dn(()=>Jn(Ie,at,Nt),ue)}(F.shapeFlag&256||at&&vi(at.vnode)&&at.vnode.shapeFlag&256)&&O.a&&dn(O.a,ue),O.isMounted=!0,F=Q=le=null}};O.scope.on();const ve=O.effect=new jm(xe);O.scope.off();const fe=O.update=ve.run.bind(ve),Ne=O.job=ve.runIfDirty.bind(ve);Ne.i=O,Ne.id=O.uid,ve.scheduler=()=>Bd(Ne),ms(O,!0),fe()},Pe=(O,F,Q)=>{F.component=O;const le=O.vnode.props;O.vnode=F,O.next=null,Q0(O,F.props,le,Q),tw(O,F.children,Q),Er(),lh(O),Ir()},te=(O,F,Q,le,ue,ce,Ee,xe,ve=!1)=>{const fe=O&&O.children,Ne=O?O.shapeFlag:0,Ie=F.children,{patchFlag:je,shapeFlag:Ue}=F;if(je>0){if(je&128){Y(fe,Ie,Q,le,ue,ce,Ee,xe,ve);return}else if(je&256){ee(fe,Ie,Q,le,ue,ce,Ee,xe,ve);return}}Ue&8?(Ne&16&&st(fe,ue,ce),Ie!==fe&&u(Q,Ie)):Ne&16?Ue&16?Y(fe,Ie,Q,le,ue,ce,Ee,xe,ve):st(fe,ue,ce,!0):(Ne&8&&u(Q,""),Ue&16&&V(Ie,Q,le,ue,ce,Ee,xe,ve))},ee=(O,F,Q,le,ue,ce,Ee,xe,ve)=>{O=O||gi,F=F||gi;const fe=O.length,Ne=F.length,Ie=Math.min(fe,Ne);let je;for(je=0;je<Ie;je++){const Ue=F[je]=ve?Kr(F[je]):ir(F[je]);_(O[je],Ue,Q,null,ue,ce,Ee,xe,ve)}fe>Ne?st(O,ue,ce,!0,!1,Ie):V(F,Q,le,ue,ce,Ee,xe,ve,Ie)},Y=(O,F,Q,le,ue,ce,Ee,xe,ve)=>{let fe=0;const Ne=F.length;let Ie=O.length-1,je=Ne-1;for(;fe<=Ie&&fe<=je;){const Ue=O[fe],Ge=F[fe]=ve?Kr(F[fe]):ir(F[fe]);if(ui(Ue,Ge))_(Ue,Ge,Q,null,ue,ce,Ee,xe,ve);else break;fe++}for(;fe<=Ie&&fe<=je;){const Ue=O[Ie],Ge=F[je]=ve?Kr(F[je]):ir(F[je]);if(ui(Ue,Ge))_(Ue,Ge,Q,null,ue,ce,Ee,xe,ve);else break;Ie--,je--}if(fe>Ie){if(fe<=je){const Ue=je+1,Ge=Ue<Ne?F[Ue].el:le;for(;fe<=je;)_(null,F[fe]=ve?Kr(F[fe]):ir(F[fe]),Q,Ge,ue,ce,Ee,xe,ve),fe++}}else if(fe>je)for(;fe<=Ie;)_e(O[fe],ue,ce,!0),fe++;else{const Ue=fe,Ge=fe,it=new Map;for(fe=Ge;fe<=je;fe++){const Et=F[fe]=ve?Kr(F[fe]):ir(F[fe]);Et.key!=null&&it.set(Et.key,fe)}let at,Rt=0;const jt=je-Ge+1;let ln=!1,Nt=0;const Yn=new Array(jt);for(fe=0;fe<jt;fe++)Yn[fe]=0;for(fe=Ue;fe<=Ie;fe++){const Et=O[fe];if(Rt>=jt){_e(Et,ue,ce,!0);continue}let Fe;if(Et.key!=null)Fe=it.get(Et.key);else for(at=Ge;at<=je;at++)if(Yn[at-Ge]===0&&ui(Et,F[at])){Fe=at;break}Fe===void 0?_e(Et,ue,ce,!0):(Yn[Fe-Ge]=fe+1,Fe>=Nt?Nt=Fe:ln=!0,_(Et,F[Fe],Q,null,ue,ce,Ee,xe,ve),Rt++)}const Gs=ln?iw(Yn):gi;for(at=Gs.length-1,fe=jt-1;fe>=0;fe--){const Et=Ge+fe,Fe=F[Et],Tr=F[Et+1],Gn=Et+1<Ne?Tr.el||Tr.placeholder:le;Yn[fe]===0?_(null,Fe,Q,Gn,ue,ce,Ee,xe,ve):ln&&(at<0||fe!==Gs[at]?Le(Fe,Q,Gn,2):at--)}}},Le=(O,F,Q,le,ue=null)=>{const{el:ce,type:Ee,transition:xe,children:ve,shapeFlag:fe}=O;if(fe&6){Le(O.component.subTree,F,Q,le);return}if(fe&128){O.suspense.move(F,Q,le);return}if(fe&64){Ee.move(O,F,Q,$e);return}if(Ee===Ze){r(ce,F,Q);for(let Ie=0;Ie<ve.length;Ie++)Le(ve[Ie],F,Q,le);r(O.anchor,F,Q);return}if(Ee===al){P(O,F,Q);return}if(le!==2&&fe&1&&xe)if(le===0)xe.beforeEnter(ce),r(ce,F,Q),dn(()=>xe.enter(ce),ue);else{const{leave:Ie,delayLeave:je,afterLeave:Ue}=xe,Ge=()=>{O.ctx.isUnmounted?s(ce):r(ce,F,Q)},it=()=>{ce._isLeaving&&ce[Es](!0),Ie(ce,()=>{Ge(),Ue&&Ue()})};je?je(ce,Ge,it):it()}else r(ce,F,Q)},_e=(O,F,Q,le=!1,ue=!1)=>{const{type:ce,props:Ee,ref:xe,children:ve,dynamicChildren:fe,shapeFlag:Ne,patchFlag:Ie,dirs:je,cacheIndex:Ue}=O;if(Ie===-2&&(ue=!1),xe!=null&&(Er(),wo(xe,null,Q,O,!0),Ir()),Ue!=null&&(F.renderCache[Ue]=void 0),Ne&256){F.ctx.deactivate(O);return}const Ge=Ne&1&&je,it=!vi(O);let at;if(it&&(at=Ee&&Ee.onVnodeBeforeUnmount)&&Jn(at,F,O),Ne&6)mt(O.component,Q,le);else{if(Ne&128){O.suspense.unmount(Q,le);return}Ge&&gs(O,null,F,"beforeUnmount"),Ne&64?O.type.remove(O,F,Q,$e,le):fe&&!fe.hasOnce&&(ce!==Ze||Ie>0&&Ie&64)?st(fe,F,Q,!1,!0):(ce===Ze&&Ie&384||!ue&&Ne&16)&&st(ve,F,Q),le&&We(O)}(it&&(at=Ee&&Ee.onVnodeUnmounted)||Ge)&&dn(()=>{at&&Jn(at,F,O),Ge&&gs(O,null,F,"unmounted")},Q)},We=O=>{const{type:F,el:Q,anchor:le,transition:ue}=O;if(F===Ze){xt(Q,le);return}if(F===al){S(O);return}const ce=()=>{s(Q),ue&&!ue.persisted&&ue.afterLeave&&ue.afterLeave()};if(O.shapeFlag&1&&ue&&!ue.persisted){const{leave:Ee,delayLeave:xe}=ue,ve=()=>Ee(Q,ce);xe?xe(O.el,ce,ve):ve()}else ce()},xt=(O,F)=>{let Q;for(;O!==F;)Q=p(O),s(O),O=Q;s(F)},mt=(O,F,Q)=>{const{bum:le,scope:ue,job:ce,subTree:Ee,um:xe,m:ve,a:fe}=O;vh(ve),vh(fe),le&&il(le),ue.stop(),ce&&(ce.flags|=8,_e(Ee,O,F,Q)),xe&&dn(xe,F),dn(()=>{O.isUnmounted=!0},F)},st=(O,F,Q,le=!1,ue=!1,ce=0)=>{for(let Ee=ce;Ee<O.length;Ee++)_e(O[Ee],F,Q,le,ue)},ae=O=>{if(O.shapeFlag&6)return ae(O.component.subTree);if(O.shapeFlag&128)return O.suspense.next();const F=p(O.anchor||O.el),Q=F&&F[ly];return Q?p(Q):F};let Me=!1;const re=(O,F,Q)=>{O==null?F._vnode&&_e(F._vnode,null,null,!0):_(F._vnode||null,O,F,null,null,null,Q),F._vnode=O,Me||(Me=!0,lh(),iy(),Me=!1)},$e={p:_,um:_e,m:Le,r:We,mt:pe,mc:V,pc:te,pbc:Z,n:ae,o:t};return{render:re,hydrate:void 0,createApp:Y0(re)}}function ru({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function ms({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function sw(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Ud(t,e,n=!1){const r=t.children,s=e.children;if(ze(r)&&ze(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=Kr(s[i]),a.el=o.el),!n&&a.patchFlag!==-2&&Ud(o,a)),a.type===tc&&a.patchFlag!==-1&&(a.el=o.el),a.type===Hn&&!a.el&&(a.el=o.el)}}function iw(t){const e=t.slice(),n=[0];let r,s,i,o,a;const l=t.length;for(r=0;r<l;r++){const c=t[r];if(c!==0){if(s=n[n.length-1],t[s]<c){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<c?i=a+1:o=a;c<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function Ey(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Ey(e)}function vh(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const ow=Symbol.for("v-scx"),aw=()=>Pn(ow);function Si(t,e){return qd(t,null,e)}function on(t,e,n){return qd(t,e,n)}function qd(t,e,n=yt){const{immediate:r,deep:s,flush:i,once:o}=n,a=Bt({},n),l=e&&r||!e&&i!=="post";let c;if(jo){if(i==="sync"){const m=aw();c=m.__watcherHandles||(m.__watcherHandles=[])}else if(!l){const m=()=>{};return m.stop=or,m.resume=or,m.pause=or,m}}const u=sn;a.call=(m,v,_)=>Vn(m,u,v,_);let f=!1;i==="post"?a.scheduler=m=>{dn(m,u&&u.suspense)}:i!=="sync"&&(f=!0,a.scheduler=(m,v)=>{v?m():Bd(m)}),a.augmentJob=m=>{e&&(m.flags|=4),f&&(m.flags|=2,u&&(m.id=u.uid,m.i=u))};const p=v0(t,e,a);return jo&&(c?c.push(p):l&&p()),p}function lw(t,e,n){const r=this.proxy,s=At(t)?t.includes(".")?Iy(r,t):()=>r[t]:t.bind(r,r);let i;Ye(e)?i=e:(i=e.handler,n=e);const o=Jo(this),a=qd(s,i.bind(r),n);return o(),a}function Iy(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const cw=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${An(e)}Modifiers`]||t[`${os(e)}Modifiers`];function uw(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||yt;let s=n;const i=e.startsWith("update:"),o=i&&cw(r,e.slice(7));o&&(o.trim&&(s=n.map(u=>At(u)?u.trim():u)),o.number&&(s=n.map(yl)));let a,l=r[a=sl(e)]||r[a=sl(An(e))];!l&&i&&(l=r[a=sl(os(e))]),l&&Vn(l,t,6,s);const c=r[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Vn(c,t,6,s)}}function Oy(t,e,n=!1){const r=e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},a=!1;if(!Ye(t)){const l=c=>{const u=Oy(c,e,!0);u&&(a=!0,Bt(o,u))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!a?(bt(t)&&r.set(t,null),null):(ze(i)?i.forEach(l=>o[l]=null):Bt(o,i),bt(t)&&r.set(t,o),o)}function ec(t,e){return!t||!Ul(e)?!1:(e=e.slice(2).replace(/Once$/,""),ft(t,e[0].toLowerCase()+e.slice(1))||ft(t,os(e))||ft(t,e))}function bh(t){const{type:e,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:o,attrs:a,emit:l,render:c,renderCache:u,props:f,data:p,setupState:m,ctx:v,inheritAttrs:_}=t,k=xl(t);let C,A;try{if(n.shapeFlag&4){const S=s||r,M=S;C=ir(c.call(M,S,u,f,m,p,v)),A=a}else{const S=e;C=ir(S.length>1?S(f,{attrs:a,slots:o,emit:l}):S(f,null)),A=e.props?a:dw(a)}}catch(S){Co.length=0,Ql(S,t,1),C=qe(Hn)}let P=C;if(A&&_!==!1){const S=Object.keys(A),{shapeFlag:M}=P;S.length&&M&7&&(i&&S.some(Pd)&&(A=fw(A,i)),P=ss(P,A,!1,!0))}return n.dirs&&(P=ss(P,null,!1,!0),P.dirs=P.dirs?P.dirs.concat(n.dirs):n.dirs),n.transition&&$o(P,n.transition),C=P,xl(k),C}const dw=t=>{let e;for(const n in t)(n==="class"||n==="style"||Ul(n))&&((e||(e={}))[n]=t[n]);return e},fw=(t,e)=>{const n={};for(const r in t)(!Pd(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function hw(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:a,patchFlag:l}=e,c=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?_h(r,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let f=0;f<u.length;f++){const p=u[f];if(o[p]!==r[p]&&!ec(c,p))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?_h(r,o,c):!0:!!o;return!1}function _h(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!ec(n,i))return!0}return!1}function pw({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const My=t=>t.__isSuspense;function gw(t,e){e&&e.pendingBranch?ze(t)?e.effects.push(...t):e.effects.push(t):w0(t)}const Ze=Symbol.for("v-fgt"),tc=Symbol.for("v-txt"),Hn=Symbol.for("v-cmt"),al=Symbol.for("v-stc"),Co=[];let Cn=null;function q(t=!1){Co.push(Cn=t?null:[])}function mw(){Co.pop(),Cn=Co[Co.length-1]||null}let Lo=1;function wh(t,e=!1){Lo+=t,t<0&&Cn&&e&&(Cn.hasOnce=!0)}function Ty(t){return t.dynamicChildren=Lo>0?Cn||gi:null,mw(),Lo>0&&Cn&&Cn.push(t),t}function J(t,e,n,r,s,i){return Ty(w(t,e,n,r,s,i,!0))}function Qt(t,e,n,r,s){return Ty(qe(t,e,n,r,s,!0))}function Bo(t){return t?t.__v_isVNode===!0:!1}function ui(t,e){return t.type===e.type&&t.key===e.key}const Dy=({key:t})=>t??null,ll=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?At(t)||Dt(t)||Ye(t)?{i:Gt,r:t,k:e,f:!!n}:t:null);function w(t,e=null,n=null,r=0,s=null,i=t===Ze?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Dy(e),ref:e&&ll(e),scopeId:ay,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Gt};return a?(Wd(l,n),i&128&&t.normalize(l)):n&&(l.shapeFlag|=At(n)?8:16),Lo>0&&!o&&Cn&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Cn.push(l),l}const qe=yw;function yw(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===j0)&&(t=Hn),Bo(t)){const a=ss(t,e,!0);return n&&Wd(a,n),Lo>0&&!i&&Cn&&(a.shapeFlag&6?Cn[Cn.indexOf(t)]=a:Cn.push(a)),a.patchFlag=-2,a}if(Aw(t)&&(t=t.__vccOpts),e){e=Ry(e);let{class:a,style:l}=e;a&&!At(a)&&(e.class=vt(a)),bt(l)&&(Xo(l)&&!ze(l)&&(l=Bt({},l)),e.style=Un(l))}const o=At(t)?1:My(t)?128:x0(t)?64:bt(t)?4:Ye(t)?2:0;return w(t,e,n,r,s,o,i,!0)}function Ry(t){return t?Xo(t)||xy(t)?Bt({},t):t:null}function ss(t,e,n=!1,r=!1){const{props:s,ref:i,patchFlag:o,children:a,transition:l}=t,c=e?lr(s||{},e):s,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&Dy(c),ref:e&&e.ref?n&&i?ze(i)?i.concat(ll(e)):[i,ll(e)]:ll(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Ze?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&ss(t.ssContent),ssFallback:t.ssFallback&&ss(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&$o(u,l.clone(u)),u}function ht(t=" ",e=0){return qe(tc,null,t,e)}function vw(t,e){const n=qe(al,null,t);return n.staticCount=e,n}function ke(t="",e=!1){return e?(q(),Qt(Hn,null,t)):qe(Hn,null,t)}function ir(t){return t==null||typeof t=="boolean"?qe(Hn):ze(t)?qe(Ze,null,t.slice()):Bo(t)?Kr(t):qe(tc,null,String(t))}function Kr(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:ss(t)}function Wd(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(ze(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),Wd(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!xy(e)?e._ctx=Gt:s===3&&Gt&&(Gt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Ye(e)?(e={default:e,_ctx:Gt},n=32):(e=String(e),r&64?(n=16,e=[ht(e)]):n=8);t.children=e,t.shapeFlag|=n}function lr(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=vt([e.class,r.class]));else if(s==="style")e.style=Un([e.style,r.style]);else if(Ul(s)){const i=e[s],o=r[s];o&&i!==o&&!(ze(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function Jn(t,e,n,r=null){Vn(t,e,7,[n,r])}const bw=by();let _w=0;function ww(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||bw,i={uid:_w++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Lm(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Cy(r,s),emitsOptions:Oy(r,s),emit:null,emitted:null,propsDefaults:yt,inheritAttrs:r.inheritAttrs,ctx:yt,data:yt,props:yt,attrs:yt,slots:yt,refs:yt,setupState:yt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=uw.bind(null,i),t.ce&&t.ce(i),i}let sn=null;const cr=()=>sn||Gt;let Cl,Yu;{const t=Hl(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};Cl=e("__VUE_INSTANCE_SETTERS__",n=>sn=n),Yu=e("__VUE_SSR_SETTERS__",n=>jo=n)}const Jo=t=>{const e=sn;return Cl(t),t.scope.on(),()=>{t.scope.off(),Cl(e)}},xh=()=>{sn&&sn.scope.off(),Cl(null)};function Fy(t){return t.vnode.shapeFlag&4}let jo=!1;function xw(t,e=!1,n=!1){e&&Yu(e);const{props:r,children:s}=t.vnode,i=Fy(t);X0(t,r,i,e),ew(t,s,n||e);const o=i?kw(t,e):void 0;return e&&Yu(!1),o}function kw(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,z0);const{setup:r}=n;if(r){Er();const s=t.setupContext=r.length>1?Sw(t):null,i=Jo(t),o=Qo(r,t,0,[t.props,s]),a=Om(o);if(Ir(),i(),(a||t.sp)&&!vi(t)&&fy(t),a){if(o.then(xh,xh),e)return o.then(l=>{kh(t,l)}).catch(l=>{Ql(l,t,0)});t.asyncDep=o}else kh(t,o)}else $y(t)}function kh(t,e,n){Ye(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:bt(e)&&(t.setupState=ny(e)),$y(t)}function $y(t,e,n){const r=t.type;t.render||(t.render=r.render||or);{const s=Jo(t);Er();try{U0(t)}finally{Ir(),s()}}}const Cw={get(t,e){return rn(t,"get",""),t[e]}};function Sw(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,Cw),slots:t.slots,emit:t.emit,expose:e}}function nc(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(ny($d(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in xo)return xo[n](t)},has(e,n){return n in e||n in xo}})):t.proxy}function Pw(t,e=!0){return Ye(t)?t.displayName||t.name:t.name||e&&t.__name}function Aw(t){return Ye(t)&&"__vccOpts"in t}const He=(t,e)=>m0(t,e,jo);function Ar(t,e,n){const r=arguments.length;return r===2?bt(e)&&!ze(e)?Bo(e)?qe(t,null,[e]):qe(t,e):qe(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Bo(n)&&(n=[n]),qe(t,e,n))}const Ly="3.5.20";/**
* @vue/runtime-dom v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Gu;const Ch=typeof window<"u"&&window.trustedTypes;if(Ch)try{Gu=Ch.createPolicy("vue",{createHTML:t=>t})}catch{}const By=Gu?t=>Gu.createHTML(t):t=>t,Ew="http://www.w3.org/2000/svg",Iw="http://www.w3.org/1998/Math/MathML",kr=typeof document<"u"?document:null,Sh=kr&&kr.createElement("template"),Ow={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?kr.createElementNS(Ew,t):e==="mathml"?kr.createElementNS(Iw,t):n?kr.createElement(t,{is:n}):kr.createElement(t);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>kr.createTextNode(t),createComment:t=>kr.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>kr.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{Sh.innerHTML=By(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=Sh.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},jr="transition",Xi="animation",Pi=Symbol("_vtc"),jy={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Mw=Bt({},P0,jy),ys=(t,e=[])=>{ze(t)?t.forEach(n=>n(...e)):t&&t(...e)},Ph=t=>t?ze(t)?t.some(e=>e.length>1):t.length>1:!1;function Tw(t){const e={};for(const j in t)j in jy||(e[j]=t[j]);if(t.css===!1)return e;const{name:n="v",type:r,duration:s,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=i,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:m=`${n}-leave-to`}=t,v=Dw(s),_=v&&v[0],k=v&&v[1],{onBeforeEnter:C,onEnter:A,onEnterCancelled:P,onLeave:S,onLeaveCancelled:M,onBeforeAppear:T=C,onAppear:X=A,onAppearCancelled:V=P}=e,E=(j,de,pe,Ae)=>{j._enterCancelled=Ae,Ur(j,de?u:a),Ur(j,de?c:o),pe&&pe()},Z=(j,de)=>{j._isLeaving=!1,Ur(j,f),Ur(j,m),Ur(j,p),de&&de()},K=j=>(de,pe)=>{const Ae=j?X:A,Ce=()=>E(de,j,pe);ys(Ae,[de,Ce]),Ah(()=>{Ur(de,j?l:i),er(de,j?u:a),Ph(Ae)||Eh(de,r,_,Ce)})};return Bt(e,{onBeforeEnter(j){ys(C,[j]),er(j,i),er(j,o)},onBeforeAppear(j){ys(T,[j]),er(j,l),er(j,c)},onEnter:K(!1),onAppear:K(!0),onLeave(j,de){j._isLeaving=!0;const pe=()=>Z(j,de);er(j,f),j._enterCancelled?(er(j,p),Xu()):(Xu(),er(j,p)),Ah(()=>{j._isLeaving&&(Ur(j,f),er(j,m),Ph(S)||Eh(j,r,k,pe))}),ys(S,[j,pe])},onEnterCancelled(j){E(j,!1,void 0,!0),ys(P,[j])},onAppearCancelled(j){E(j,!0,void 0,!0),ys(V,[j])},onLeaveCancelled(j){Z(j),ys(M,[j])}})}function Dw(t){if(t==null)return null;if(bt(t))return[su(t.enter),su(t.leave)];{const e=su(t);return[e,e]}}function su(t){return $_(t)}function er(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[Pi]||(t[Pi]=new Set)).add(e)}function Ur(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[Pi];n&&(n.delete(e),n.size||(t[Pi]=void 0))}function Ah(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let Rw=0;function Eh(t,e,n,r){const s=t._endId=++Rw,i=()=>{s===t._endId&&r()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:a,propCount:l}=Ny(t,e);if(!o)return r();const c=o+"end";let u=0;const f=()=>{t.removeEventListener(c,p),i()},p=m=>{m.target===t&&++u>=l&&f()};setTimeout(()=>{u<l&&f()},a+1),t.addEventListener(c,p)}function Ny(t,e){const n=window.getComputedStyle(t),r=v=>(n[v]||"").split(", "),s=r(`${jr}Delay`),i=r(`${jr}Duration`),o=Ih(s,i),a=r(`${Xi}Delay`),l=r(`${Xi}Duration`),c=Ih(a,l);let u=null,f=0,p=0;e===jr?o>0&&(u=jr,f=o,p=i.length):e===Xi?c>0&&(u=Xi,f=c,p=l.length):(f=Math.max(o,c),u=f>0?o>c?jr:Xi:null,p=u?u===jr?i.length:l.length:0);const m=u===jr&&/\b(transform|all)(,|$)/.test(r(`${jr}Property`).toString());return{type:u,timeout:f,propCount:p,hasTransform:m}}function Ih(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>Oh(n)+Oh(t[r])))}function Oh(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function Xu(){return document.body.offsetHeight}function Fw(t,e,n){const r=t[Pi];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Sl=Symbol("_vod"),zy=Symbol("_vsh"),$w={name:"show",beforeMount(t,{value:e},{transition:n}){t[Sl]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Qi(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),Qi(t,!0),r.enter(t)):r.leave(t,()=>{Qi(t,!1)}):Qi(t,e))},beforeUnmount(t,{value:e}){Qi(t,e)}};function Qi(t,e){t.style.display=e?t[Sl]:"none",t[zy]=!e}const Lw=Symbol(""),Bw=/(^|;)\s*display\s*:/;function jw(t,e,n){const r=t.style,s=At(n);let i=!1;if(n&&!s){if(e)if(At(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&cl(r,a,"")}else for(const o in e)n[o]==null&&cl(r,o,"");for(const o in n)o==="display"&&(i=!0),cl(r,o,n[o])}else if(s){if(e!==n){const o=r[Lw];o&&(n+=";"+o),r.cssText=n,i=Bw.test(n)}}else e&&t.removeAttribute("style");Sl in t&&(t[Sl]=i?r.display:"",t[zy]&&(r.display="none"))}const Mh=/\s*!important$/;function cl(t,e,n){if(ze(n))n.forEach(r=>cl(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=Nw(t,e);Mh.test(n)?t.setProperty(os(r),n.replace(Mh,""),"important"):t[r]=n}}const Th=["Webkit","Moz","ms"],iu={};function Nw(t,e){const n=iu[e];if(n)return n;let r=An(e);if(r!=="filter"&&r in t)return iu[e]=r;r=Vl(r);for(let s=0;s<Th.length;s++){const i=Th[s]+r;if(i in t)return iu[e]=i}return e}const Dh="http://www.w3.org/1999/xlink";function Rh(t,e,n,r,s,i=q_(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(Dh,e.slice(6,e.length)):t.setAttributeNS(Dh,e,n):n==null||i&&!Rm(n)?t.removeAttribute(e):t.setAttribute(e,i?"":Wn(n)?String(n):n)}function Fh(t,e,n,r,s){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?By(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=Rm(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(s||e)}function Ts(t,e,n,r){t.addEventListener(e,n,r)}function zw(t,e,n,r){t.removeEventListener(e,n,r)}const $h=Symbol("_vei");function Uw(t,e,n,r,s=null){const i=t[$h]||(t[$h]={}),o=i[e];if(r&&o)o.value=r;else{const[a,l]=qw(e);if(r){const c=i[e]=Hw(r,s);Ts(t,a,c,l)}else o&&(zw(t,a,o,l),i[e]=void 0)}}const Lh=/(?:Once|Passive|Capture)$/;function qw(t){let e;if(Lh.test(t)){e={};let r;for(;r=t.match(Lh);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):os(t.slice(2)),e]}let ou=0;const Ww=Promise.resolve(),Vw=()=>ou||(Ww.then(()=>ou=0),ou=Date.now());function Hw(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Vn(Kw(r,n.value),e,5,[r])};return n.value=t,n.attached=Vw(),n}function Kw(t,e){if(ze(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const Bh=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Yw=(t,e,n,r,s,i)=>{const o=s==="svg";e==="class"?Fw(t,r,o):e==="style"?jw(t,n,r):Ul(e)?Pd(e)||Uw(t,e,n,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Gw(t,e,r,o))?(Fh(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Rh(t,e,r,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!At(r))?Fh(t,An(e),r,i,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),Rh(t,e,r,o))};function Gw(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&Bh(e)&&Ye(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Bh(e)&&At(n)?!1:e in t}const Uy=new WeakMap,qy=new WeakMap,Pl=Symbol("_moveCb"),jh=Symbol("_enterCb"),Xw=t=>(delete t.props.mode,t),Qw=Xw({name:"TransitionGroup",props:Bt({},Mw,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=cr(),r=S0();let s,i;return gy(()=>{if(!s.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!nx(s[0].el,n.vnode.el,o)){s=[];return}s.forEach(Zw),s.forEach(ex);const a=s.filter(tx);Xu(),a.forEach(l=>{const c=l.el,u=c.style;er(c,o),u.transform=u.webkitTransform=u.transitionDuration="";const f=c[Pl]=p=>{p&&p.target!==c||(!p||/transform$/.test(p.propertyName))&&(c.removeEventListener("transitionend",f),c[Pl]=null,Ur(c,o))};c.addEventListener("transitionend",f)}),s=[]}),()=>{const o=tt(t),a=Tw(o);let l=o.tag||Ze;if(s=[],i)for(let c=0;c<i.length;c++){const u=i[c];u.el&&u.el instanceof Element&&(s.push(u),$o(u,qu(u,a,r,n)),Uy.set(u,u.el.getBoundingClientRect()))}i=e.default?dy(e.default()):[];for(let c=0;c<i.length;c++){const u=i[c];u.key!=null&&$o(u,qu(u,a,r,n))}return qe(l,null,i)}}}),Jw=Qw;function Zw(t){const e=t.el;e[Pl]&&e[Pl](),e[jh]&&e[jh]()}function ex(t){qy.set(t,t.el.getBoundingClientRect())}function tx(t){const e=Uy.get(t),n=qy.get(t),r=e.left-n.left,s=e.top-n.top;if(r||s){const i=t.el.style;return i.transform=i.webkitTransform=`translate(${r}px,${s}px)`,i.transitionDuration="0s",t}}function nx(t,e,n){const r=t.cloneNode(),s=t[Pi];s&&s.forEach(a=>{a.split(/\s+/).forEach(l=>l&&r.classList.remove(l))}),n.split(/\s+/).forEach(a=>a&&r.classList.add(a)),r.style.display="none";const i=e.nodeType===1?e:e.parentNode;i.appendChild(r);const{hasTransform:o}=Ny(r);return i.removeChild(r),o}const Al=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ze(e)?n=>il(e,n):e};function rx(t){t.target.composing=!0}function Nh(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const bi=Symbol("_assign"),El={created(t,{modifiers:{lazy:e,trim:n,number:r}},s){t[bi]=Al(s);const i=r||s.props&&s.props.type==="number";Ts(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),i&&(a=yl(a)),t[bi](a)}),n&&Ts(t,"change",()=>{t.value=t.value.trim()}),e||(Ts(t,"compositionstart",rx),Ts(t,"compositionend",Nh),Ts(t,"change",Nh))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},o){if(t[bi]=Al(o),t.composing)return;const a=(i||t.type==="number")&&!/^0\d/.test(t.value)?yl(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||s&&t.value.trim()===l)||(t.value=l))}},zh={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const s=ql(e);Ts(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?yl(Il(o)):Il(o));t[bi](t.multiple?s?new Set(i):i:i[0]),t._assigning=!0,En(()=>{t._assigning=!1})}),t[bi]=Al(r)},mounted(t,{value:e}){Uh(t,e)},beforeUpdate(t,e,n){t[bi]=Al(n)},updated(t,{value:e}){t._assigning||Uh(t,e)}};function Uh(t,e){const n=t.multiple,r=ze(e);if(!(n&&!r&&!ql(e))){for(let s=0,i=t.options.length;s<i;s++){const o=t.options[s],a=Il(o);if(n)if(r){const l=typeof a;l==="string"||l==="number"?o.selected=e.some(c=>String(c)===String(a)):o.selected=V_(e,a)>-1}else o.selected=e.has(a);else if(Kl(Il(o),e)){t.selectedIndex!==s&&(t.selectedIndex=s);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Il(t){return"_value"in t?t._value:t.value}const sx=["ctrl","shift","alt","meta"],ix={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>sx.some(n=>t[`${n}Key`]&&!e.includes(n))},ul=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=((s,...i)=>{for(let o=0;o<e.length;o++){const a=ix[e[o]];if(a&&a(s,e))return}return t(s,...i)}))},ox={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},qh=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=(s=>{if(!("key"in s))return;const i=os(s.key);if(e.some(o=>o===i||ox[o]===i))return t(s)}))},ax=Bt({patchProp:Yw},Ow);let Wh;function lx(){return Wh||(Wh=nw(ax))}const cx=((...t)=>{const e=lx().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=dx(r);if(!s)return;const i=e._component;!Ye(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=n(s,!1,ux(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e});function ux(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function dx(t){return At(t)?document.querySelector(t):t}const fx="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%201024%201024'%20width='1024'%20height='1024'%3e%3cdefs%3e%3clinearGradient%20id='bgGrad'%20x1='0'%20y1='0'%20x2='1'%20y2='1'%3e%3cstop%20offset='0%25'%20stop-color='%23137ef2'/%3e%3cstop%20offset='100%25'%20stop-color='%235cb5f9'/%3e%3c/linearGradient%3e%3c!--%20Subtle%20soft%20shadow%20for%20floating%20cards%20--%3e%3cfilter%20id='softShadow'%20x='-20%25'%20y='-20%25'%20width='140%25'%20height='140%25'%3e%3cfeDropShadow%20dx='0'%20dy='14'%20stdDeviation='18'%20flood-color='%23000000'%20flood-opacity='0.22'/%3e%3c/filter%3e%3cfilter%20id='pageShadow'%20x='-20%25'%20y='-20%25'%20width='140%25'%20height='140%25'%3e%3cfeDropShadow%20dx='0'%20dy='10'%20stdDeviation='12'%20flood-color='%23000000'%20flood-opacity='0.18'/%3e%3c/filter%3e%3cfilter%20id='coinShadow'%20x='-20%25'%20y='-20%25'%20width='140%25'%20height='140%25'%3e%3cfeDropShadow%20dx='0'%20dy='10'%20stdDeviation='10'%20flood-color='%23000000'%20flood-opacity='0.25'/%3e%3c/filter%3e%3clinearGradient%20id='coinGrad'%20x1='0'%20y1='0'%20x2='0'%20y2='1'%3e%3cstop%20offset='0%25'%20stop-color='%23ffc02e'/%3e%3cstop%20offset='100%25'%20stop-color='%23ffaa19'/%3e%3c/linearGradient%3e%3clinearGradient%20id='coinRingGrad'%20x1='0'%20y1='0'%20x2='0'%20y2='1'%3e%3cstop%20offset='0%25'%20stop-color='%23FFC83A'/%3e%3cstop%20offset='100%25'%20stop-color='%23E59200'/%3e%3c/linearGradient%3e%3c/defs%3e%3c!--%20Rounded%20square%20background%20--%3e%3crect%20x='72'%20y='72'%20width='880'%20height='880'%20rx='220'%20fill='url(%23bgGrad)'/%3e%3c!--%20Back%20pages%20(slightly%20tilted)%20--%3e%3cg%20filter='url(%23softShadow)'%3e%3crect%20x='340'%20y='210'%20width='460'%20height='560'%20rx='42'%20fill='%23DDEBFF'%20opacity='0.9'%20transform='rotate(18%20750%20480)'/%3e%3crect%20x='300'%20y='230'%20width='470'%20height='560'%20rx='46'%20fill='%23EAF3FF'%20opacity='0.95'%20transform='rotate(12%20715%20490)'/%3e%3c/g%3e%3c!--%20Main%20notebook%20page%20--%3e%3cg%20filter='url(%23pageShadow)'%3e%3crect%20id='page'%20x='260'%20y='240'%20width='520'%20height='560'%20rx='54'%20fill='%23FFFFFF'/%3e%3c!--%20Inner%20card%20area%20--%3e%3crect%20x='356'%20y='322'%20width='330'%20height='420'%20rx='34'%20fill='%23EDEFF2'/%3e%3c/g%3e%3c!--%20Binder%20rings%20--%3e%3cg%3e%3ccircle%20cx='260'%20cy='360'%20r='34'%20fill='%232B2F38'/%3e%3ccircle%20cx='260'%20cy='520'%20r='34'%20fill='%232B2F38'/%3e%3ccircle%20cx='260'%20cy='680'%20r='34'%20fill='%232B2F38'/%3e%3c!--%20little%20highlights%20--%3e%3ccircle%20cx='248'%20cy='350'%20r='10'%20fill='%23FFFFFF'%20opacity='0.35'/%3e%3ccircle%20cx='248'%20cy='510'%20r='10'%20fill='%23FFFFFF'%20opacity='0.35'/%3e%3ccircle%20cx='248'%20cy='670'%20r='10'%20fill='%23FFFFFF'%20opacity='0.35'/%3e%3c/g%3e%3c!--%20Gold%20checkmark%20coin%20--%3e%3cg%20filter='url(%23coinShadow)'%3e%3c!--%20ring%20--%3e%3ccircle%20cx='690'%20cy='680'%20r='148'%20fill='url(%23coinRingGrad)'/%3e%3ccircle%20cx='690'%20cy='680'%20r='112'%20fill='url(%23coinGrad)'/%3e%3c!--%20check%20--%3e%3cg%20transform='translate(10,60)'%3e%3cpath%20d='M635%20683%20l-36%20-36%20a18%2018%200%200%201%2025%20-25%20l25%2025%2072%20-72%20a18%2018%200%201%201%2025%2025%20l-84%2084%20a18%2018%200%200%201%20-27%200z'%20fill='%23FFFFFF'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e";/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const di=typeof document<"u";function Wy(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function hx(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&Wy(t.default)}const dt=Object.assign;function au(t,e){const n={};for(const r in e){const s=e[r];n[r]=Kn(s)?s.map(t):t(s)}return n}const So=()=>{},Kn=Array.isArray,Vy=/#/g,px=/&/g,gx=/\//g,mx=/=/g,yx=/\?/g,Hy=/\+/g,vx=/%5B/g,bx=/%5D/g,Ky=/%5E/g,_x=/%60/g,Yy=/%7B/g,wx=/%7C/g,Gy=/%7D/g,xx=/%20/g;function Vd(t){return encodeURI(""+t).replace(wx,"|").replace(vx,"[").replace(bx,"]")}function kx(t){return Vd(t).replace(Yy,"{").replace(Gy,"}").replace(Ky,"^")}function Qu(t){return Vd(t).replace(Hy,"%2B").replace(xx,"+").replace(Vy,"%23").replace(px,"%26").replace(_x,"`").replace(Yy,"{").replace(Gy,"}").replace(Ky,"^")}function Cx(t){return Qu(t).replace(mx,"%3D")}function Sx(t){return Vd(t).replace(Vy,"%23").replace(yx,"%3F")}function Px(t){return t==null?"":Sx(t).replace(gx,"%2F")}function No(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const Ax=/\/$/,Ex=t=>t.replace(Ax,"");function lu(t,e,n="/"){let r,s={},i="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=e.slice(0,l),i=e.slice(l+1,a>-1?a:e.length),s=t(i)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=Tx(r??e,n),{fullPath:r+(i&&"?")+i+o,path:r,query:s,hash:No(o)}}function Ix(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Vh(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function Ox(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&Ai(e.matched[r],n.matched[s])&&Xy(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Ai(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Xy(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!Mx(t[n],e[n]))return!1;return!0}function Mx(t,e){return Kn(t)?Hh(t,e):Kn(e)?Hh(e,t):t===e}function Hh(t,e){return Kn(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function Tx(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o).join("/")}const Nr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var zo;(function(t){t.pop="pop",t.push="push"})(zo||(zo={}));var Po;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Po||(Po={}));function Dx(t){if(!t)if(di){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),Ex(t)}const Rx=/^[^#]+#/;function Fx(t,e){return t.replace(Rx,"#")+e}function $x(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const rc=()=>({left:window.scrollX,top:window.scrollY});function Lx(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=$x(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Kh(t,e){return(history.state?history.state.position-e:-1)+t}const Ju=new Map;function Bx(t,e){Ju.set(t,e)}function jx(t){const e=Ju.get(t);return Ju.delete(t),e}let Nx=()=>location.protocol+"//"+location.host;function Qy(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let a=s.includes(t.slice(i))?t.slice(i).length:1,l=s.slice(a);return l[0]!=="/"&&(l="/"+l),Vh(l,"")}return Vh(n,t)+r+s}function zx(t,e,n,r){let s=[],i=[],o=null;const a=({state:p})=>{const m=Qy(t,location),v=n.value,_=e.value;let k=0;if(p){if(n.value=m,e.value=p,o&&o===v){o=null;return}k=_?p.position-_.position:0}else r(m);s.forEach(C=>{C(n.value,v,{delta:k,type:zo.pop,direction:k?k>0?Po.forward:Po.back:Po.unknown})})};function l(){o=n.value}function c(p){s.push(p);const m=()=>{const v=s.indexOf(p);v>-1&&s.splice(v,1)};return i.push(m),m}function u(){const{history:p}=window;p.state&&p.replaceState(dt({},p.state,{scroll:rc()}),"")}function f(){for(const p of i)p();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:f}}function Yh(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?rc():null}}function Ux(t){const{history:e,location:n}=window,r={value:Qy(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,c,u){const f=t.indexOf("#"),p=f>-1?(n.host&&document.querySelector("base")?t:t.slice(f))+l:Nx()+t+l;try{e[u?"replaceState":"pushState"](c,"",p),s.value=c}catch(m){console.error(m),n[u?"replace":"assign"](p)}}function o(l,c){const u=dt({},e.state,Yh(s.value.back,l,s.value.forward,!0),c,{position:s.value.position});i(l,u,!0),r.value=l}function a(l,c){const u=dt({},s.value,e.state,{forward:l,scroll:rc()});i(u.current,u,!0);const f=dt({},Yh(r.value,l,null),{position:u.position+1},c);i(l,f,!1),r.value=l}return{location:r,state:s,push:a,replace:o}}function qx(t){t=Dx(t);const e=Ux(t),n=zx(t,e.state,e.location,e.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=dt({location:"",base:t,go:r,createHref:Fx.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function Wx(t){return typeof t=="string"||t&&typeof t=="object"}function Jy(t){return typeof t=="string"||typeof t=="symbol"}const Zy=Symbol("");var Gh;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Gh||(Gh={}));function Ei(t,e){return dt(new Error,{type:t,[Zy]:!0},e)}function pr(t,e){return t instanceof Error&&Zy in t&&(e==null||!!(t.type&e))}const Xh="[^/]+?",Vx={sensitive:!1,strict:!1,start:!0,end:!0},Hx=/[.+*?^${}()[\]/\\]/g;function Kx(t,e){const n=dt({},Vx,e),r=[];let s=n.start?"^":"";const i=[];for(const c of t){const u=c.length?[]:[90];n.strict&&!c.length&&(s+="/");for(let f=0;f<c.length;f++){const p=c[f];let m=40+(n.sensitive?.25:0);if(p.type===0)f||(s+="/"),s+=p.value.replace(Hx,"\\$&"),m+=40;else if(p.type===1){const{value:v,repeatable:_,optional:k,regexp:C}=p;i.push({name:v,repeatable:_,optional:k});const A=C||Xh;if(A!==Xh){m+=10;try{new RegExp(`(${A})`)}catch(S){throw new Error(`Invalid custom RegExp for param "${v}" (${A}): `+S.message)}}let P=_?`((?:${A})(?:/(?:${A}))*)`:`(${A})`;f||(P=k&&c.length<2?`(?:/${P})`:"/"+P),k&&(P+="?"),s+=P,m+=20,k&&(m+=-8),_&&(m+=-20),A===".*"&&(m+=-50)}u.push(m)}r.push(u)}if(n.strict&&n.end){const c=r.length-1;r[c][r[c].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(c){const u=c.match(o),f={};if(!u)return null;for(let p=1;p<u.length;p++){const m=u[p]||"",v=i[p-1];f[v.name]=m&&v.repeatable?m.split("/"):m}return f}function l(c){let u="",f=!1;for(const p of t){(!f||!u.endsWith("/"))&&(u+="/"),f=!1;for(const m of p)if(m.type===0)u+=m.value;else if(m.type===1){const{value:v,repeatable:_,optional:k}=m,C=v in c?c[v]:"";if(Kn(C)&&!_)throw new Error(`Provided param "${v}" is an array but it is not repeatable (* or + modifiers)`);const A=Kn(C)?C.join("/"):C;if(!A)if(k)p.length<2&&(u.endsWith("/")?u=u.slice(0,-1):f=!0);else throw new Error(`Missing required param "${v}"`);u+=A}}return u||"/"}return{re:o,score:r,keys:i,parse:a,stringify:l}}function Yx(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function ev(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=Yx(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(Qh(r))return 1;if(Qh(s))return-1}return s.length-r.length}function Qh(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const Gx={type:0,value:""},Xx=/[a-zA-Z0-9_]/;function Qx(t){if(!t)return[[]];if(t==="/")return[[Gx]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(m){throw new Error(`ERR (${n})/"${c}": ${m}`)}let n=0,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let a=0,l,c="",u="";function f(){c&&(n===0?i.push({type:0,value:c}):n===1||n===2||n===3?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function p(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(c&&f(),o()):l===":"?(f(),n=1):p();break;case 4:p(),n=r;break;case 1:l==="("?n=2:Xx.test(l)?p():(f(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:n=3:u+=l;break;case 3:f(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${c}"`),f(),o(),s}function Jx(t,e,n){const r=Kx(Qx(t.path),n),s=dt(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function Zx(t,e){const n=[],r=new Map;e=tp({strict:!1,end:!0,sensitive:!1},e);function s(f){return r.get(f)}function i(f,p,m){const v=!m,_=Zh(f);_.aliasOf=m&&m.record;const k=tp(e,f),C=[_];if("alias"in f){const S=typeof f.alias=="string"?[f.alias]:f.alias;for(const M of S)C.push(Zh(dt({},_,{components:m?m.record.components:_.components,path:M,aliasOf:m?m.record:_})))}let A,P;for(const S of C){const{path:M}=S;if(p&&M[0]!=="/"){const T=p.record.path,X=T[T.length-1]==="/"?"":"/";S.path=p.record.path+(M&&X+M)}if(A=Jx(S,p,k),m?m.alias.push(A):(P=P||A,P!==A&&P.alias.push(A),v&&f.name&&!ep(A)&&o(f.name)),tv(A)&&l(A),_.children){const T=_.children;for(let X=0;X<T.length;X++)i(T[X],A,m&&m.children[X])}m=m||A}return P?()=>{o(P)}:So}function o(f){if(Jy(f)){const p=r.get(f);p&&(r.delete(f),n.splice(n.indexOf(p),1),p.children.forEach(o),p.alias.forEach(o))}else{const p=n.indexOf(f);p>-1&&(n.splice(p,1),f.record.name&&r.delete(f.record.name),f.children.forEach(o),f.alias.forEach(o))}}function a(){return n}function l(f){const p=n1(f,n);n.splice(p,0,f),f.record.name&&!ep(f)&&r.set(f.record.name,f)}function c(f,p){let m,v={},_,k;if("name"in f&&f.name){if(m=r.get(f.name),!m)throw Ei(1,{location:f});k=m.record.name,v=dt(Jh(p.params,m.keys.filter(P=>!P.optional).concat(m.parent?m.parent.keys.filter(P=>P.optional):[]).map(P=>P.name)),f.params&&Jh(f.params,m.keys.map(P=>P.name))),_=m.stringify(v)}else if(f.path!=null)_=f.path,m=n.find(P=>P.re.test(_)),m&&(v=m.parse(_),k=m.record.name);else{if(m=p.name?r.get(p.name):n.find(P=>P.re.test(p.path)),!m)throw Ei(1,{location:f,currentLocation:p});k=m.record.name,v=dt({},p.params,f.params),_=m.stringify(v)}const C=[];let A=m;for(;A;)C.unshift(A.record),A=A.parent;return{name:k,path:_,params:v,matched:C,meta:t1(C)}}t.forEach(f=>i(f));function u(){n.length=0,r.clear()}return{addRoute:i,resolve:c,removeRoute:o,clearRoutes:u,getRoutes:a,getRecordMatcher:s}}function Jh(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function Zh(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:e1(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function e1(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function ep(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function t1(t){return t.reduce((e,n)=>dt(e,n.meta),{})}function tp(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function n1(t,e){let n=0,r=e.length;for(;n!==r;){const i=n+r>>1;ev(t,e[i])<0?r=i:n=i+1}const s=r1(t);return s&&(r=e.lastIndexOf(s,r-1)),r}function r1(t){let e=t;for(;e=e.parent;)if(tv(e)&&ev(t,e)===0)return e}function tv({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function s1(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<r.length;++s){const i=r[s].replace(Hy," "),o=i.indexOf("="),a=No(o<0?i:i.slice(0,o)),l=o<0?null:No(i.slice(o+1));if(a in e){let c=e[a];Kn(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function np(t){let e="";for(let n in t){const r=t[n];if(n=Cx(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(Kn(r)?r.map(i=>i&&Qu(i)):[r&&Qu(r)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function i1(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=Kn(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const o1=Symbol(""),rp=Symbol(""),sc=Symbol(""),Hd=Symbol(""),Zu=Symbol("");function Ji(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Yr(t,e,n,r,s,i=o=>o()){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((a,l)=>{const c=p=>{p===!1?l(Ei(4,{from:n,to:e})):p instanceof Error?l(p):Wx(p)?l(Ei(2,{from:e,to:p})):(o&&r.enterCallbacks[s]===o&&typeof p=="function"&&o.push(p),a())},u=i(()=>t.call(r&&r.instances[s],e,n,c));let f=Promise.resolve(u);t.length<3&&(f=f.then(c)),f.catch(p=>l(p))})}function cu(t,e,n,r,s=i=>i()){const i=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(Wy(l)){const u=(l.__vccOpts||l)[e];u&&i.push(Yr(u,n,r,o,a,s))}else{let c=l();i.push(()=>c.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const f=hx(u)?u.default:u;o.mods[a]=u,o.components[a]=f;const m=(f.__vccOpts||f)[e];return m&&Yr(m,n,r,o,a,s)()}))}}return i}function sp(t){const e=Pn(sc),n=Pn(Hd),r=He(()=>{const l=Re(t.to);return e.resolve(l)}),s=He(()=>{const{matched:l}=r.value,{length:c}=l,u=l[c-1],f=n.matched;if(!u||!f.length)return-1;const p=f.findIndex(Ai.bind(null,u));if(p>-1)return p;const m=ip(l[c-2]);return c>1&&ip(u)===m&&f[f.length-1].path!==m?f.findIndex(Ai.bind(null,l[c-2])):p}),i=He(()=>s.value>-1&&d1(n.params,r.value.params)),o=He(()=>s.value>-1&&s.value===n.matched.length-1&&Xy(n.params,r.value.params));function a(l={}){if(u1(l)){const c=e[Re(t.replace)?"replace":"push"](Re(t.to)).catch(So);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:r,href:He(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}function a1(t){return t.length===1?t[0]:t}const l1=et({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:sp,setup(t,{slots:e}){const n=qs(sp(t)),{options:r}=Pn(sc),s=He(()=>({[op(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[op(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&a1(e.default(n));return t.custom?i:Ar("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),c1=l1;function u1(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function d1(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!Kn(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function ip(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const op=(t,e,n)=>t??e??n,f1=et({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=Pn(Zu),s=He(()=>t.route||r.value),i=Pn(rp,0),o=He(()=>{let c=Re(i);const{matched:u}=s.value;let f;for(;(f=u[c])&&!f.components;)c++;return c}),a=He(()=>s.value.matched[o.value]);ko(rp,He(()=>o.value+1)),ko(o1,a),ko(Zu,s);const l=ge();return on(()=>[l.value,a.value,t.name],([c,u,f],[p,m,v])=>{u&&(u.instances[f]=c,m&&m!==u&&c&&c===p&&(u.leaveGuards.size||(u.leaveGuards=m.leaveGuards),u.updateGuards.size||(u.updateGuards=m.updateGuards))),c&&u&&(!m||!Ai(u,m)||!p)&&(u.enterCallbacks[f]||[]).forEach(_=>_(c))},{flush:"post"}),()=>{const c=s.value,u=t.name,f=a.value,p=f&&f.components[u];if(!p)return ap(n.default,{Component:p,route:c});const m=f.props[u],v=m?m===!0?c.params:typeof m=="function"?m(c):m:null,k=Ar(p,dt({},v,e,{onVnodeUnmounted:C=>{C.component.isUnmounted&&(f.instances[u]=null)},ref:l}));return ap(n.default,{Component:k,route:c})||k}}});function ap(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const h1=f1;function p1(t){const e=Zx(t.routes,t),n=t.parseQuery||s1,r=t.stringifyQuery||np,s=t.history,i=Ji(),o=Ji(),a=Ji(),l=Xl(Nr);let c=Nr;di&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=au.bind(null,ae=>""+ae),f=au.bind(null,Px),p=au.bind(null,No);function m(ae,Me){let re,$e;return Jy(ae)?(re=e.getRecordMatcher(ae),$e=Me):$e=ae,e.addRoute($e,re)}function v(ae){const Me=e.getRecordMatcher(ae);Me&&e.removeRoute(Me)}function _(){return e.getRoutes().map(ae=>ae.record)}function k(ae){return!!e.getRecordMatcher(ae)}function C(ae,Me){if(Me=dt({},Me||l.value),typeof ae=="string"){const Q=lu(n,ae,Me.path),le=e.resolve({path:Q.path},Me),ue=s.createHref(Q.fullPath);return dt(Q,le,{params:p(le.params),hash:No(Q.hash),redirectedFrom:void 0,href:ue})}let re;if(ae.path!=null)re=dt({},ae,{path:lu(n,ae.path,Me.path).path});else{const Q=dt({},ae.params);for(const le in Q)Q[le]==null&&delete Q[le];re=dt({},ae,{params:f(Q)}),Me.params=f(Me.params)}const $e=e.resolve(re,Me),nt=ae.hash||"";$e.params=u(p($e.params));const O=Ix(r,dt({},ae,{hash:kx(nt),path:$e.path})),F=s.createHref(O);return dt({fullPath:O,hash:nt,query:r===np?i1(ae.query):ae.query||{}},$e,{redirectedFrom:void 0,href:F})}function A(ae){return typeof ae=="string"?lu(n,ae,l.value.path):dt({},ae)}function P(ae,Me){if(c!==ae)return Ei(8,{from:Me,to:ae})}function S(ae){return X(ae)}function M(ae){return S(dt(A(ae),{replace:!0}))}function T(ae){const Me=ae.matched[ae.matched.length-1];if(Me&&Me.redirect){const{redirect:re}=Me;let $e=typeof re=="function"?re(ae):re;return typeof $e=="string"&&($e=$e.includes("?")||$e.includes("#")?$e=A($e):{path:$e},$e.params={}),dt({query:ae.query,hash:ae.hash,params:$e.path!=null?{}:ae.params},$e)}}function X(ae,Me){const re=c=C(ae),$e=l.value,nt=ae.state,O=ae.force,F=ae.replace===!0,Q=T(re);if(Q)return X(dt(A(Q),{state:typeof Q=="object"?dt({},nt,Q.state):nt,force:O,replace:F}),Me||re);const le=re;le.redirectedFrom=Me;let ue;return!O&&Ox(r,$e,re)&&(ue=Ei(16,{to:le,from:$e}),Le($e,$e,!0,!1)),(ue?Promise.resolve(ue):Z(le,$e)).catch(ce=>pr(ce)?pr(ce,2)?ce:Y(ce):te(ce,le,$e)).then(ce=>{if(ce){if(pr(ce,2))return X(dt({replace:F},A(ce.to),{state:typeof ce.to=="object"?dt({},nt,ce.to.state):nt,force:O}),Me||le)}else ce=j(le,$e,!0,F,nt);return K(le,$e,ce),ce})}function V(ae,Me){const re=P(ae,Me);return re?Promise.reject(re):Promise.resolve()}function E(ae){const Me=xt.values().next().value;return Me&&typeof Me.runWithContext=="function"?Me.runWithContext(ae):ae()}function Z(ae,Me){let re;const[$e,nt,O]=g1(ae,Me);re=cu($e.reverse(),"beforeRouteLeave",ae,Me);for(const Q of $e)Q.leaveGuards.forEach(le=>{re.push(Yr(le,ae,Me))});const F=V.bind(null,ae,Me);return re.push(F),st(re).then(()=>{re=[];for(const Q of i.list())re.push(Yr(Q,ae,Me));return re.push(F),st(re)}).then(()=>{re=cu(nt,"beforeRouteUpdate",ae,Me);for(const Q of nt)Q.updateGuards.forEach(le=>{re.push(Yr(le,ae,Me))});return re.push(F),st(re)}).then(()=>{re=[];for(const Q of O)if(Q.beforeEnter)if(Kn(Q.beforeEnter))for(const le of Q.beforeEnter)re.push(Yr(le,ae,Me));else re.push(Yr(Q.beforeEnter,ae,Me));return re.push(F),st(re)}).then(()=>(ae.matched.forEach(Q=>Q.enterCallbacks={}),re=cu(O,"beforeRouteEnter",ae,Me,E),re.push(F),st(re))).then(()=>{re=[];for(const Q of o.list())re.push(Yr(Q,ae,Me));return re.push(F),st(re)}).catch(Q=>pr(Q,8)?Q:Promise.reject(Q))}function K(ae,Me,re){a.list().forEach($e=>E(()=>$e(ae,Me,re)))}function j(ae,Me,re,$e,nt){const O=P(ae,Me);if(O)return O;const F=Me===Nr,Q=di?history.state:{};re&&($e||F?s.replace(ae.fullPath,dt({scroll:F&&Q&&Q.scroll},nt)):s.push(ae.fullPath,nt)),l.value=ae,Le(ae,Me,re,F),Y()}let de;function pe(){de||(de=s.listen((ae,Me,re)=>{if(!mt.listening)return;const $e=C(ae),nt=T($e);if(nt){X(dt(nt,{replace:!0,force:!0}),$e).catch(So);return}c=$e;const O=l.value;di&&Bx(Kh(O.fullPath,re.delta),rc()),Z($e,O).catch(F=>pr(F,12)?F:pr(F,2)?(X(dt(A(F.to),{force:!0}),$e).then(Q=>{pr(Q,20)&&!re.delta&&re.type===zo.pop&&s.go(-1,!1)}).catch(So),Promise.reject()):(re.delta&&s.go(-re.delta,!1),te(F,$e,O))).then(F=>{F=F||j($e,O,!1),F&&(re.delta&&!pr(F,8)?s.go(-re.delta,!1):re.type===zo.pop&&pr(F,20)&&s.go(-1,!1)),K($e,O,F)}).catch(So)}))}let Ae=Ji(),Ce=Ji(),Pe;function te(ae,Me,re){Y(ae);const $e=Ce.list();return $e.length?$e.forEach(nt=>nt(ae,Me,re)):console.error(ae),Promise.reject(ae)}function ee(){return Pe&&l.value!==Nr?Promise.resolve():new Promise((ae,Me)=>{Ae.add([ae,Me])})}function Y(ae){return Pe||(Pe=!ae,pe(),Ae.list().forEach(([Me,re])=>ae?re(ae):Me()),Ae.reset()),ae}function Le(ae,Me,re,$e){const{scrollBehavior:nt}=t;if(!di||!nt)return Promise.resolve();const O=!re&&jx(Kh(ae.fullPath,0))||($e||!re)&&history.state&&history.state.scroll||null;return En().then(()=>nt(ae,Me,O)).then(F=>F&&Lx(F)).catch(F=>te(F,ae,Me))}const _e=ae=>s.go(ae);let We;const xt=new Set,mt={currentRoute:l,listening:!0,addRoute:m,removeRoute:v,clearRoutes:e.clearRoutes,hasRoute:k,getRoutes:_,resolve:C,options:t,push:S,replace:M,go:_e,back:()=>_e(-1),forward:()=>_e(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:Ce.add,isReady:ee,install(ae){const Me=this;ae.component("RouterLink",c1),ae.component("RouterView",h1),ae.config.globalProperties.$router=Me,Object.defineProperty(ae.config.globalProperties,"$route",{enumerable:!0,get:()=>Re(l)}),di&&!We&&l.value===Nr&&(We=!0,S(s.location).catch(nt=>{}));const re={};for(const nt in Nr)Object.defineProperty(re,nt,{get:()=>l.value[nt],enumerable:!0});ae.provide(sc,Me),ae.provide(Hd,Zm(re)),ae.provide(Zu,l);const $e=ae.unmount;xt.add(ae),ae.unmount=function(){xt.delete(ae),xt.size<1&&(c=Nr,de&&de(),de=null,l.value=Nr,We=!1,Pe=!1),$e()}}};function st(ae){return ae.reduce((Me,re)=>Me.then(()=>E(re)),Promise.resolve())}return mt}function g1(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(c=>Ai(c,a))?r.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(c=>Ai(c,l))||s.push(l))}return[n,r,s]}function nv(){return Pn(sc)}function Kd(t){return Pn(Hd)}const m1=["aria-label"],y1={key:0},v1={key:1},b1=et({__name:"ThemeSwitcher",setup(t){const e=ge("light"),n=()=>{const r=e.value==="light"?"dark":"light";e.value=r,document.documentElement.setAttribute("data-theme",r),document.documentElement.setAttribute("data-bs-theme",r),localStorage.setItem("theme",r)};return Nn(()=>{const r=localStorage.getItem("theme"),s=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;let i="light";r?i=r:s&&(i="dark"),e.value=i,document.documentElement.setAttribute("data-theme",i),document.documentElement.setAttribute("data-bs-theme",i)}),(r,s)=>(q(),J("button",{type:"button",class:vt(e.value==="light"?"rounded-4 btn btn-outline-dark":"rounded-4 btn btn-outline-light"),onClick:n,"aria-label":`Switch to ${e.value==="light"?"dark":"light"} mode`},[e.value==="light"?(q(),J("span",y1,"🌑")):(q(),J("span",v1,"☀️"))],10,m1))}}),hn=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},_1=hn(b1,[["__scopeId","data-v-beeb0ac7"]]);/*!
 * pinia v3.0.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let rv;const ic=t=>rv=t,sv=Symbol();function ed(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Ao;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Ao||(Ao={}));function w1(){const t=Yl(!0),e=t.run(()=>ge({}));let n=[],r=[];const s=$d({install(i){ic(s),s._a=i,i.provide(sv,s),i.config.globalProperties.$pinia=s,r.forEach(o=>n.push(o)),r=[]},use(i){return this._a?n.push(i):r.push(i),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return s}const iv=()=>{};function lp(t,e,n,r=iv){t.push(e);const s=()=>{const i=t.indexOf(e);i>-1&&(t.splice(i,1),r())};return!n&&Id()&&Bm(s),s}function ii(t,...e){t.slice().forEach(n=>{n(...e)})}const x1=t=>t(),cp=Symbol(),uu=Symbol();function td(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,r)=>t.set(r,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],s=t[n];ed(s)&&ed(r)&&t.hasOwnProperty(n)&&!Dt(r)&&!Jr(r)?t[n]=td(s,r):t[n]=r}return t}const k1=Symbol();function C1(t){return!ed(t)||!Object.prototype.hasOwnProperty.call(t,k1)}const{assign:qr}=Object;function S1(t){return!!(Dt(t)&&t.effect)}function P1(t,e,n,r){const{state:s,actions:i,getters:o}=e,a=n.state.value[t];let l;function c(){a||(n.state.value[t]=s?s():{});const u=Ld(n.state.value[t]);return qr(u,i,Object.keys(o||{}).reduce((f,p)=>(f[p]=$d(He(()=>{ic(n);const m=n._s.get(t);return o[p].call(m,m)})),f),{}))}return l=ov(t,c,e,n,r,!0),l}function ov(t,e,n={},r,s,i){let o;const a=qr({actions:{}},n),l={deep:!0};let c,u,f=[],p=[],m;const v=r.state.value[t];!i&&!v&&(r.state.value[t]={}),ge({});let _;function k(V){let E;c=u=!1,typeof V=="function"?(V(r.state.value[t]),E={type:Ao.patchFunction,storeId:t,events:m}):(td(r.state.value[t],V),E={type:Ao.patchObject,payload:V,storeId:t,events:m});const Z=_=Symbol();En().then(()=>{_===Z&&(c=!0)}),u=!0,ii(f,E,r.state.value[t])}const C=i?function(){const{state:E}=n,Z=E?E():{};this.$patch(K=>{qr(K,Z)})}:iv;function A(){o.stop(),f=[],p=[],r._s.delete(t)}const P=(V,E="")=>{if(cp in V)return V[uu]=E,V;const Z=function(){ic(r);const K=Array.from(arguments),j=[],de=[];function pe(Pe){j.push(Pe)}function Ae(Pe){de.push(Pe)}ii(p,{args:K,name:Z[uu],store:M,after:pe,onError:Ae});let Ce;try{Ce=V.apply(this&&this.$id===t?this:M,K)}catch(Pe){throw ii(de,Pe),Pe}return Ce instanceof Promise?Ce.then(Pe=>(ii(j,Pe),Pe)).catch(Pe=>(ii(de,Pe),Promise.reject(Pe))):(ii(j,Ce),Ce)};return Z[cp]=!0,Z[uu]=E,Z},S={_p:r,$id:t,$onAction:lp.bind(null,p),$patch:k,$reset:C,$subscribe(V,E={}){const Z=lp(f,V,E.detached,()=>K()),K=o.run(()=>on(()=>r.state.value[t],j=>{(E.flush==="sync"?u:c)&&V({storeId:t,type:Ao.direct,events:m},j)},qr({},l,E)));return Z},$dispose:A},M=qs(S);r._s.set(t,M);const X=(r._a&&r._a.runWithContext||x1)(()=>r._e.run(()=>(o=Yl()).run(()=>e({action:P}))));for(const V in X){const E=X[V];if(Dt(E)&&!S1(E)||Jr(E))i||(v&&C1(E)&&(Dt(E)?E.value=v[V]:td(E,v[V])),r.state.value[t][V]=E);else if(typeof E=="function"){const Z=P(E,V);X[V]=Z,a.actions[V]=E}}return qr(M,X),qr(tt(M),X),Object.defineProperty(M,"$state",{get:()=>r.state.value[t],set:V=>{k(E=>{qr(E,V)})}}),r._p.forEach(V=>{qr(M,o.run(()=>V({store:M,app:r._a,pinia:r,options:a})))}),v&&i&&n.hydrate&&n.hydrate(M.$state,v),c=!0,u=!0,M}/*! #__NO_SIDE_EFFECTS__ */function oc(t,e,n){let r;const s=typeof e=="function";r=s?n:e;function i(o,a){const l=G0();return o=o||(l?Pn(sv,null):null),o&&ic(o),o=rv,o._s.has(t)||(s?ov(t,e,r,o):P1(t,r,o)),o._s.get(t)}return i.$id=t,i}const _i=oc("importStatus",()=>{const t=ge([]);return{imports:t,addImport:l=>{const c={...l,createdAt:new Date};return t.value.push(c),c.id},updateImport:(l,c)=>{const u=t.value.findIndex(f=>f.id===l);u!==-1&&(t.value[u]={...t.value[u],...c})},completeImport:(l,c)=>{const u=t.value.findIndex(f=>f.id===l);u!==-1&&(t.value[u]={...t.value[u],status:c?"failed":"completed",errorMessage:c,completedAt:new Date,progress:100})},removeImport:l=>{t.value=t.value.filter(c=>c.id!==l)},clearCompletedImports:()=>{t.value=t.value.filter(l=>l.status==="pending"||l.status==="processing")},getActiveImports:()=>t.value.filter(l=>l.status==="pending"||l.status==="processing"),getCompletedImports:()=>t.value.filter(l=>l.status==="completed"||l.status==="failed")}}),A1={key:0,class:"import-status-indicator",style:{width:"200px"}},E1={class:"d-flex justify-content-between align-items-baseline"},I1=["title"],O1={class:"small text-muted flex-shrink-0 ms-2"},M1={class:"progress mt-1"},T1=["aria-valuenow"],D1={class:"import-alerts position-fixed top-0 end-0 p-3",style:{"z-index":"1050"}},R1={class:"d-flex justify-content-between"},F1={key:0,class:"small"},$1=["onClick"],L1=et({__name:"ImportStatusIndicator",setup(t){const e=_i(),n=He(()=>e.getActiveImports()),r=He(()=>e.getCompletedImports()),s=He(()=>n.value.length>0?n.value[0]:null),i=a=>{e.removeImport(a)};let o=null;return Nn(()=>{o=window.setInterval(()=>{const a=new Date;e.imports.forEach(l=>{if((l.status==="completed"||l.status==="failed")&&l.completedAt){const c=new Date(l.completedAt);a.getTime()-c.getTime()>5e3&&e.removeImport(l.id)}})},1e3)}),Fi(()=>{o&&clearInterval(o)}),(a,l)=>(q(),J(Ze,null,[s.value?(q(),J("div",A1,[w("div",E1,[w("span",{class:"fw-medium small text-truncate",title:s.value.name},oe(s.value.name),9,I1),w("span",O1,oe(s.value.processedItems)+" / "+oe(s.value.totalItems),1)]),w("div",M1,[w("div",{class:"progress-bar",role:"progressbar",style:Un({width:s.value.progress+"%"}),"aria-valuenow":s.value.progress,"aria-valuemin":"0","aria-valuemax":"100"},null,12,T1)])])):ke("",!0),w("div",D1,[qe(Jw,{name:"alert",tag:"div"},{default:lt(()=>[(q(!0),J(Ze,null,$t(r.value,c=>(q(),J("div",{key:c.id,class:vt(["alert",c.status==="completed"?"alert-success":"alert-danger"]),role:"alert"},[w("div",R1,[w("div",null,[w("strong",null,oe(c.name),1),ht(" "+oe(c.status==="completed"?"import completed successfully!":"import failed.")+" ",1),c.errorMessage?(q(),J("div",F1,oe(c.errorMessage),1)):ke("",!0)]),w("button",{type:"button",class:"btn-close",onClick:u=>i(c.id)},null,8,$1)])],2))),128))]),_:1})])],64))}}),av=hn(L1,[["__scopeId","data-v-0987b82f"]]),B1={class:"navbar navbar-expand-md navbar-light bg-body fixed-top border-bottom"},j1={class:"container-fluid"},N1=["aria-expanded"],z1={class:"navbar-nav me-auto"},U1={class:"nav-item"},q1={class:"nav-item"},W1={class:"nav-item"},V1={class:"nav-item"},H1={class:"nav-item"},K1={class:"nav-item"},Y1={class:"d-flex align-items-center"},G1=et({__name:"Navigation",setup(t){const e=Kd(),n=He(()=>e.name==="decks"||e.name==="deck-detail"||e.name==="deck-import"),r=ge(!1);return(s,i)=>{const o=Zl("router-link");return q(),J("nav",B1,[w("div",j1,[qe(o,{to:"/",class:"navbar-brand"},{default:lt(()=>[...i[1]||(i[1]=[w("img",{style:{"max-width":"40px"},src:fx,alt:"logo"},null,-1),ht(" MTG Collection Tracker ",-1)])]),_:1}),w("button",{class:"navbar-toggler",type:"button",onClick:i[0]||(i[0]=a=>r.value=!r.value),"aria-controls":"navbarNav","aria-expanded":r.value,"aria-label":"Toggle navigation"},[...i[2]||(i[2]=[w("span",{class:"navbar-toggler-icon"},null,-1)])],8,N1),w("div",{id:"navbarNav",class:vt(["collapse navbar-collapse",{show:r.value}])},[w("ul",z1,[w("li",U1,[qe(o,{to:"/",class:vt(["nav-link",{active:Re(e).name==="home"}])},{default:lt(()=>[...i[3]||(i[3]=[ht(" Dashboard ",-1)])]),_:1},8,["class"])]),w("li",q1,[qe(o,{to:"/decks",class:vt(["nav-link",{active:n.value}])},{default:lt(()=>[...i[4]||(i[4]=[ht(" Decks ",-1)])]),_:1},8,["class"])]),w("li",W1,[qe(o,{to:"/cards",class:vt(["nav-link",{active:Re(e).name==="cards"}])},{default:lt(()=>[...i[5]||(i[5]=[ht(" Cards ",-1)])]),_:1},8,["class"])]),w("li",V1,[qe(o,{to:"/import/cardmarket",class:vt(["nav-link",{active:Re(e).name==="cardmarket-import"}])},{default:lt(()=>[...i[6]||(i[6]=[ht(" Cardmarket Import ",-1)])]),_:1},8,["class"])]),w("li",H1,[qe(o,{to:"/import/mtgjson",class:vt(["nav-link",{active:Re(e).name==="mtgjson-import"}])},{default:lt(()=>[...i[7]||(i[7]=[ht(" MTGJSON Import ",-1)])]),_:1},8,["class"])]),w("li",K1,[qe(o,{to:"/import/price-guide",class:vt(["nav-link",{active:Re(e).name==="price-guide-import"}])},{default:lt(()=>[...i[8]||(i[8]=[ht(" Price Guide Import ",-1)])]),_:1},8,["class"])])]),w("div",Y1,[qe(av),qe(_1)])],2)])])}}}),X1=hn(G1,[["__scopeId","data-v-2db4ecb2"]]),Q1={class:"container-lg",style:{"padding-top":"calc(var(--app-navbar-h) + 1.5rem)","padding-bottom":"1.5rem"}},J1=et({__name:"App",setup(t){return(e,n)=>{const r=Zl("router-view");return q(),J(Ze,null,[qe(X1),qe(av),w("main",Q1,[qe(r)])],64)}}});var Z1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function lv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function ek(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){var s=!1;try{s=this instanceof r}catch{}return s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var dl={exports:{}},tk=dl.exports,up;function nk(){return up||(up=1,(function(t,e){(function(n,r){t.exports=r()})(tk,function(){var n=function(d,h){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,y){g.__proto__=y}||function(g,y){for(var b in y)Object.prototype.hasOwnProperty.call(y,b)&&(g[b]=y[b])})(d,h)},r=function(){return(r=Object.assign||function(d){for(var h,g=1,y=arguments.length;g<y;g++)for(var b in h=arguments[g])Object.prototype.hasOwnProperty.call(h,b)&&(d[b]=h[b]);return d}).apply(this,arguments)};function s(d,h,g){for(var y,b=0,x=h.length;b<x;b++)!y&&b in h||((y=y||Array.prototype.slice.call(h,0,b))[b]=h[b]);return d.concat(y||Array.prototype.slice.call(h))}var i=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Z1,o=Object.keys,a=Array.isArray;function l(d,h){return typeof h!="object"||o(h).forEach(function(g){d[g]=h[g]}),d}typeof Promise>"u"||i.Promise||(i.Promise=Promise);var c=Object.getPrototypeOf,u={}.hasOwnProperty;function f(d,h){return u.call(d,h)}function p(d,h){typeof h=="function"&&(h=h(c(d))),(typeof Reflect>"u"?o:Reflect.ownKeys)(h).forEach(function(g){v(d,g,h[g])})}var m=Object.defineProperty;function v(d,h,g,y){m(d,h,l(g&&f(g,"get")&&typeof g.get=="function"?{get:g.get,set:g.set,configurable:!0}:{value:g,configurable:!0,writable:!0},y))}function _(d){return{from:function(h){return d.prototype=Object.create(h.prototype),v(d.prototype,"constructor",d),{extend:p.bind(null,d.prototype)}}}}var k=Object.getOwnPropertyDescriptor,C=[].slice;function A(d,h,g){return C.call(d,h,g)}function P(d,h){return h(d)}function S(d){if(!d)throw new Error("Assertion Failed")}function M(d){i.setImmediate?setImmediate(d):setTimeout(d,0)}function T(d,h){if(typeof h=="string"&&f(d,h))return d[h];if(!h)return d;if(typeof h!="string"){for(var g=[],y=0,b=h.length;y<b;++y){var x=T(d,h[y]);g.push(x)}return g}var I=h.indexOf(".");if(I!==-1){var D=d[h.substr(0,I)];return D==null?void 0:T(D,h.substr(I+1))}}function X(d,h,g){if(d&&h!==void 0&&!("isFrozen"in Object&&Object.isFrozen(d)))if(typeof h!="string"&&"length"in h){S(typeof g!="string"&&"length"in g);for(var y=0,b=h.length;y<b;++y)X(d,h[y],g[y])}else{var x,I,D=h.indexOf(".");D!==-1?(x=h.substr(0,D),(I=h.substr(D+1))===""?g===void 0?a(d)&&!isNaN(parseInt(x))?d.splice(x,1):delete d[x]:d[x]=g:X(D=!(D=d[x])||!f(d,x)?d[x]={}:D,I,g)):g===void 0?a(d)&&!isNaN(parseInt(h))?d.splice(h,1):delete d[h]:d[h]=g}}function V(d){var h,g={};for(h in d)f(d,h)&&(g[h]=d[h]);return g}var E=[].concat;function Z(d){return E.apply([],d)}var Ge="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Z([8,16,32,64].map(function(d){return["Int","Uint","Float"].map(function(h){return h+d+"Array"})}))).filter(function(d){return i[d]}),K=new Set(Ge.map(function(d){return i[d]})),j=null;function de(d){return j=new WeakMap,d=(function h(g){if(!g||typeof g!="object")return g;var y=j.get(g);if(y)return y;if(a(g)){y=[],j.set(g,y);for(var b=0,x=g.length;b<x;++b)y.push(h(g[b]))}else if(K.has(g.constructor))y=g;else{var I,D=c(g);for(I in y=D===Object.prototype?{}:Object.create(D),j.set(g,y),g)f(g,I)&&(y[I]=h(g[I]))}return y})(d),j=null,d}var pe={}.toString;function Ae(d){return pe.call(d).slice(8,-1)}var Ce=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Pe=typeof Ce=="symbol"?function(d){var h;return d!=null&&(h=d[Ce])&&h.apply(d)}:function(){return null};function te(d,h){return h=d.indexOf(h),0<=h&&d.splice(h,1),0<=h}var ee={};function Y(d){var h,g,y,b;if(arguments.length===1){if(a(d))return d.slice();if(this===ee&&typeof d=="string")return[d];if(b=Pe(d)){for(g=[];!(y=b.next()).done;)g.push(y.value);return g}if(d==null)return[d];if(typeof(h=d.length)!="number")return[d];for(g=new Array(h);h--;)g[h]=d[h];return g}for(h=arguments.length,g=new Array(h);h--;)g[h]=arguments[h];return g}var Le=typeof Symbol<"u"?function(d){return d[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Ue=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],On=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Ue),_e={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function We(d,h){this.name=d,this.message=h}function xt(d,h){return d+". Errors: "+Object.keys(h).map(function(g){return h[g].toString()}).filter(function(g,y,b){return b.indexOf(g)===y}).join(`
`)}function mt(d,h,g,y){this.failures=h,this.failedKeys=y,this.successCount=g,this.message=xt(d,h)}function st(d,h){this.name="BulkError",this.failures=Object.keys(h).map(function(g){return h[g]}),this.failuresByPos=h,this.message=xt(d,this.failures)}_(We).from(Error).extend({toString:function(){return this.name+": "+this.message}}),_(mt).from(We),_(st).from(We);var ae=On.reduce(function(d,h){return d[h]=h+"Error",d},{}),Me=We,re=On.reduce(function(d,h){var g=h+"Error";function y(b,x){this.name=g,b?typeof b=="string"?(this.message="".concat(b).concat(x?`
 `+x:""),this.inner=x||null):typeof b=="object"&&(this.message="".concat(b.name," ").concat(b.message),this.inner=b):(this.message=_e[h]||g,this.inner=null)}return _(y).from(Me),d[h]=y,d},{});re.Syntax=SyntaxError,re.Type=TypeError,re.Range=RangeError;var $e=Ue.reduce(function(d,h){return d[h+"Error"]=re[h],d},{}),nt=On.reduce(function(d,h){return["Syntax","Type","Range"].indexOf(h)===-1&&(d[h+"Error"]=re[h]),d},{});function O(){}function F(d){return d}function Q(d,h){return d==null||d===F?h:function(g){return h(d(g))}}function le(d,h){return function(){d.apply(this,arguments),h.apply(this,arguments)}}function ue(d,h){return d===O?h:function(){var g=d.apply(this,arguments);g!==void 0&&(arguments[0]=g);var y=this.onsuccess,b=this.onerror;this.onsuccess=null,this.onerror=null;var x=h.apply(this,arguments);return y&&(this.onsuccess=this.onsuccess?le(y,this.onsuccess):y),b&&(this.onerror=this.onerror?le(b,this.onerror):b),x!==void 0?x:g}}function ce(d,h){return d===O?h:function(){d.apply(this,arguments);var g=this.onsuccess,y=this.onerror;this.onsuccess=this.onerror=null,h.apply(this,arguments),g&&(this.onsuccess=this.onsuccess?le(g,this.onsuccess):g),y&&(this.onerror=this.onerror?le(y,this.onerror):y)}}function Ee(d,h){return d===O?h:function(g){var y=d.apply(this,arguments);l(g,y);var b=this.onsuccess,x=this.onerror;return this.onsuccess=null,this.onerror=null,g=h.apply(this,arguments),b&&(this.onsuccess=this.onsuccess?le(b,this.onsuccess):b),x&&(this.onerror=this.onerror?le(x,this.onerror):x),y===void 0?g===void 0?void 0:g:l(y,g)}}function xe(d,h){return d===O?h:function(){return h.apply(this,arguments)!==!1&&d.apply(this,arguments)}}function ve(d,h){return d===O?h:function(){var g=d.apply(this,arguments);if(g&&typeof g.then=="function"){for(var y=this,b=arguments.length,x=new Array(b);b--;)x[b]=arguments[b];return g.then(function(){return h.apply(y,x)})}return h.apply(this,arguments)}}nt.ModifyError=mt,nt.DexieError=We,nt.BulkError=st;var fe=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Ne(d){fe=d}var Ie={},je=100,Ge=typeof Promise>"u"?[]:(function(){var d=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[d,c(d),d];var h=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[h,c(h),d]})(),Ue=Ge[0],On=Ge[1],Ge=Ge[2],On=On&&On.then,it=Ue&&Ue.constructor,at=!!Ge,Rt=function(d,h){Tr.push([d,h]),ln&&(queueMicrotask(l_),ln=!1)},jt=!0,ln=!0,Nt=[],Yn=[],Gs=F,Et={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:O,pgp:!1,env:{},finalize:O},Fe=Et,Tr=[],Gn=0,ca=[];function Te(d){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var h=this._PSD=Fe;if(typeof d!="function"){if(d!==Ie)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&xc(this,this._value))}this._state=null,this._value=null,++h.ref,(function g(y,b){try{b(function(x){if(y._state===null){if(x===y)throw new TypeError("A promise cannot be resolved with itself.");var I=y._lib&&Xs();x&&typeof x.then=="function"?g(y,function(D,$){x instanceof Te?x._then(D,$):x.then(D,$)}):(y._state=!0,y._value=x,Af(y)),I&&Qs()}},xc.bind(null,y))}catch(x){xc(y,x)}})(this,d)}var wc={get:function(){var d=Fe,h=ha;function g(y,b){var x=this,I=!d.global&&(d!==Fe||h!==ha),D=I&&!Rr(),$=new Te(function(B,z){kc(x,new Pf(If(y,d,I,D),If(b,d,I,D),B,z,d))});return this._consoleTask&&($._consoleTask=this._consoleTask),$}return g.prototype=Ie,g},set:function(d){v(this,"then",d&&d.prototype===Ie?wc:{get:function(){return d},set:wc.set})}};function Pf(d,h,g,y,b){this.onFulfilled=typeof d=="function"?d:null,this.onRejected=typeof h=="function"?h:null,this.resolve=g,this.reject=y,this.psd=b}function xc(d,h){var g,y;Yn.push(h),d._state===null&&(g=d._lib&&Xs(),h=Gs(h),d._state=!1,d._value=h,y=d,Nt.some(function(b){return b._value===y._value})||Nt.push(y),Af(d),g&&Qs())}function Af(d){var h=d._listeners;d._listeners=[];for(var g=0,y=h.length;g<y;++g)kc(d,h[g]);var b=d._PSD;--b.ref||b.finalize(),Gn===0&&(++Gn,Rt(function(){--Gn==0&&Cc()},[]))}function kc(d,h){if(d._state!==null){var g=d._state?h.onFulfilled:h.onRejected;if(g===null)return(d._state?h.resolve:h.reject)(d._value);++h.psd.ref,++Gn,Rt(a_,[g,d,h])}else d._listeners.push(h)}function a_(d,h,g){try{var y,b=h._value;!h._state&&Yn.length&&(Yn=[]),y=fe&&h._consoleTask?h._consoleTask.run(function(){return d(b)}):d(b),h._state||Yn.indexOf(b)!==-1||(function(x){for(var I=Nt.length;I;)if(Nt[--I]._value===x._value)return Nt.splice(I,1)})(h),g.resolve(y)}catch(x){g.reject(x)}finally{--Gn==0&&Cc(),--g.psd.ref||g.psd.finalize()}}function l_(){cs(Et,function(){Xs()&&Qs()})}function Xs(){var d=jt;return ln=jt=!1,d}function Qs(){var d,h,g;do for(;0<Tr.length;)for(d=Tr,Tr=[],g=d.length,h=0;h<g;++h){var y=d[h];y[0].apply(null,y[1])}while(0<Tr.length);ln=jt=!0}function Cc(){var d=Nt;Nt=[],d.forEach(function(y){y._PSD.onunhandled.call(null,y._value,y)});for(var h=ca.slice(0),g=h.length;g;)h[--g]()}function ua(d){return new Te(Ie,!1,d)}function Pt(d,h){var g=Fe;return function(){var y=Xs(),b=Fe;try{return Fr(g,!0),d.apply(this,arguments)}catch(x){h&&h(x)}finally{Fr(b,!1),y&&Qs()}}}p(Te.prototype,{then:wc,_then:function(d,h){kc(this,new Pf(null,null,d,h,Fe))},catch:function(d){if(arguments.length===1)return this.then(null,d);var h=d,g=arguments[1];return typeof h=="function"?this.then(null,function(y){return(y instanceof h?g:ua)(y)}):this.then(null,function(y){return(y&&y.name===h?g:ua)(y)})},finally:function(d){return this.then(function(h){return Te.resolve(d()).then(function(){return h})},function(h){return Te.resolve(d()).then(function(){return ua(h)})})},timeout:function(d,h){var g=this;return d<1/0?new Te(function(y,b){var x=setTimeout(function(){return b(new re.Timeout(h))},d);g.then(y,b).finally(clearTimeout.bind(null,x))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&v(Te.prototype,Symbol.toStringTag,"Dexie.Promise"),Et.env=Ef(),p(Te,{all:function(){var d=Y.apply(null,arguments).map(pa);return new Te(function(h,g){d.length===0&&h([]);var y=d.length;d.forEach(function(b,x){return Te.resolve(b).then(function(I){d[x]=I,--y||h(d)},g)})})},resolve:function(d){return d instanceof Te?d:d&&typeof d.then=="function"?new Te(function(h,g){d.then(h,g)}):new Te(Ie,!0,d)},reject:ua,race:function(){var d=Y.apply(null,arguments).map(pa);return new Te(function(h,g){d.map(function(y){return Te.resolve(y).then(h,g)})})},PSD:{get:function(){return Fe},set:function(d){return Fe=d}},totalEchoes:{get:function(){return ha}},newPSD:Dr,usePSD:cs,scheduler:{get:function(){return Rt},set:function(d){Rt=d}},rejectionMapper:{get:function(){return Gs},set:function(d){Gs=d}},follow:function(d,h){return new Te(function(g,y){return Dr(function(b,x){var I=Fe;I.unhandleds=[],I.onunhandled=x,I.finalize=le(function(){var D,$=this;D=function(){$.unhandleds.length===0?b():x($.unhandleds[0])},ca.push(function B(){D(),ca.splice(ca.indexOf(B),1)}),++Gn,Rt(function(){--Gn==0&&Cc()},[])},I.finalize),d()},h,g,y)})}}),it&&(it.allSettled&&v(Te,"allSettled",function(){var d=Y.apply(null,arguments).map(pa);return new Te(function(h){d.length===0&&h([]);var g=d.length,y=new Array(g);d.forEach(function(b,x){return Te.resolve(b).then(function(I){return y[x]={status:"fulfilled",value:I}},function(I){return y[x]={status:"rejected",reason:I}}).then(function(){return--g||h(y)})})})}),it.any&&typeof AggregateError<"u"&&v(Te,"any",function(){var d=Y.apply(null,arguments).map(pa);return new Te(function(h,g){d.length===0&&g(new AggregateError([]));var y=d.length,b=new Array(y);d.forEach(function(x,I){return Te.resolve(x).then(function(D){return h(D)},function(D){b[I]=D,--y||g(new AggregateError(b))})})})}),it.withResolvers&&(Te.withResolvers=it.withResolvers));var zt={awaits:0,echoes:0,id:0},c_=0,da=[],fa=0,ha=0,u_=0;function Dr(d,h,g,y){var b=Fe,x=Object.create(b);return x.parent=b,x.ref=0,x.global=!1,x.id=++u_,Et.env,x.env=at?{Promise:Te,PromiseProp:{value:Te,configurable:!0,writable:!0},all:Te.all,race:Te.race,allSettled:Te.allSettled,any:Te.any,resolve:Te.resolve,reject:Te.reject}:{},h&&l(x,h),++b.ref,x.finalize=function(){--this.parent.ref||this.parent.finalize()},y=cs(x,d,g,y),x.ref===0&&x.finalize(),y}function Js(){return zt.id||(zt.id=++c_),++zt.awaits,zt.echoes+=je,zt.id}function Rr(){return!!zt.awaits&&(--zt.awaits==0&&(zt.id=0),zt.echoes=zt.awaits*je,!0)}function pa(d){return zt.echoes&&d&&d.constructor===it?(Js(),d.then(function(h){return Rr(),h},function(h){return Rr(),Mt(h)})):d}function d_(){var d=da[da.length-1];da.pop(),Fr(d,!1)}function Fr(d,h){var g,y=Fe;(h?!zt.echoes||fa++&&d===Fe:!fa||--fa&&d===Fe)||queueMicrotask(h?(function(b){++ha,zt.echoes&&--zt.echoes!=0||(zt.echoes=zt.awaits=zt.id=0),da.push(Fe),Fr(b,!0)}).bind(null,d):d_),d!==Fe&&(Fe=d,y===Et&&(Et.env=Ef()),at&&(g=Et.env.Promise,h=d.env,(y.global||d.global)&&(Object.defineProperty(i,"Promise",h.PromiseProp),g.all=h.all,g.race=h.race,g.resolve=h.resolve,g.reject=h.reject,h.allSettled&&(g.allSettled=h.allSettled),h.any&&(g.any=h.any))))}function Ef(){var d=i.Promise;return at?{Promise:d,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:d.all,race:d.race,allSettled:d.allSettled,any:d.any,resolve:d.resolve,reject:d.reject}:{}}function cs(d,h,g,y,b){var x=Fe;try{return Fr(d,!0),h(g,y,b)}finally{Fr(x,!1)}}function If(d,h,g,y){return typeof d!="function"?d:function(){var b=Fe;g&&Js(),Fr(h,!0);try{return d.apply(this,arguments)}finally{Fr(b,!1),y&&queueMicrotask(Rr)}}}function Sc(d){Promise===it&&zt.echoes===0?fa===0?d():enqueueNativeMicroTask(d):setTimeout(d,0)}(""+On).indexOf("[native code]")===-1&&(Js=Rr=O);var Mt=Te.reject,us="￿",dr="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Of="String expected.",Zs=[],ga="__dbnames",Pc="readonly",Ac="readwrite";function ds(d,h){return d?h?function(){return d.apply(this,arguments)&&h.apply(this,arguments)}:d:h}var Mf={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function ma(d){return typeof d!="string"||/\./.test(d)?function(h){return h}:function(h){return h[d]===void 0&&d in h&&delete(h=de(h))[d],h}}function Tf(){throw re.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function rt(d,h){try{var g=Df(d),y=Df(h);if(g!==y)return g==="Array"?1:y==="Array"?-1:g==="binary"?1:y==="binary"?-1:g==="string"?1:y==="string"?-1:g==="Date"?1:y!=="Date"?NaN:-1;switch(g){case"number":case"Date":case"string":return h<d?1:d<h?-1:0;case"binary":return(function(b,x){for(var I=b.length,D=x.length,$=I<D?I:D,B=0;B<$;++B)if(b[B]!==x[B])return b[B]<x[B]?-1:1;return I===D?0:I<D?-1:1})(Rf(d),Rf(h));case"Array":return(function(b,x){for(var I=b.length,D=x.length,$=I<D?I:D,B=0;B<$;++B){var z=rt(b[B],x[B]);if(z!==0)return z}return I===D?0:I<D?-1:1})(d,h)}}catch{}return NaN}function Df(d){var h=typeof d;return h!="object"?h:ArrayBuffer.isView(d)?"binary":(d=Ae(d),d==="ArrayBuffer"?"binary":d)}function Rf(d){return d instanceof Uint8Array?d:ArrayBuffer.isView(d)?new Uint8Array(d.buffer,d.byteOffset,d.byteLength):new Uint8Array(d)}function ya(d,h,g){var y=d.schema.yProps;return y?(h&&0<g.numFailures&&(h=h.filter(function(b,x){return!g.failures[x]})),Promise.all(y.map(function(b){return b=b.updatesTable,h?d.db.table(b).where("k").anyOf(h).delete():d.db.table(b).clear()})).then(function(){return g})):g}var Ff=(kt.prototype._trans=function(d,h,g){var y=this._tx||Fe.trans,b=this.name,x=fe&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(d==="readonly"?"read":"write"," ").concat(this.name));function I(B,z,R){if(!R.schema[b])throw new re.NotFound("Table "+b+" not part of transaction");return h(R.idbtrans,R)}var D=Xs();try{var $=y&&y.db._novip===this.db._novip?y===Fe.trans?y._promise(d,I,g):Dr(function(){return y._promise(d,I,g)},{trans:y,transless:Fe.transless||Fe}):(function B(z,R,H,L){if(z.idbdb&&(z._state.openComplete||Fe.letThrough||z._vip)){var N=z._createTransaction(R,H,z._dbSchema);try{N.create(),z._state.PR1398_maxLoop=3}catch(W){return W.name===ae.InvalidState&&z.isOpen()&&0<--z._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),z.close({disableAutoOpen:!1}),z.open().then(function(){return B(z,R,H,L)})):Mt(W)}return N._promise(R,function(W,U){return Dr(function(){return Fe.trans=N,L(W,U,N)})}).then(function(W){if(R==="readwrite")try{N.idbtrans.commit()}catch{}return R==="readonly"?W:N._completion.then(function(){return W})})}if(z._state.openComplete)return Mt(new re.DatabaseClosed(z._state.dbOpenError));if(!z._state.isBeingOpened){if(!z._state.autoOpen)return Mt(new re.DatabaseClosed);z.open().catch(O)}return z._state.dbReadyPromise.then(function(){return B(z,R,H,L)})})(this.db,d,[this.name],I);return x&&($._consoleTask=x,$=$.catch(function(B){return console.trace(B),Mt(B)})),$}finally{D&&Qs()}},kt.prototype.get=function(d,h){var g=this;return d&&d.constructor===Object?this.where(d).first(h):d==null?Mt(new re.Type("Invalid argument to Table.get()")):this._trans("readonly",function(y){return g.core.get({trans:y,key:d}).then(function(b){return g.hook.reading.fire(b)})}).then(h)},kt.prototype.where=function(d){if(typeof d=="string")return new this.db.WhereClause(this,d);if(a(d))return new this.db.WhereClause(this,"[".concat(d.join("+"),"]"));var h=o(d);if(h.length===1)return this.where(h[0]).equals(d[h[0]]);var g=this.schema.indexes.concat(this.schema.primKey).filter(function(D){if(D.compound&&h.every(function(B){return 0<=D.keyPath.indexOf(B)})){for(var $=0;$<h.length;++$)if(h.indexOf(D.keyPath[$])===-1)return!1;return!0}return!1}).sort(function(D,$){return D.keyPath.length-$.keyPath.length})[0];if(g&&this.db._maxKey!==us){var x=g.keyPath.slice(0,h.length);return this.where(x).equals(x.map(function($){return d[$]}))}!g&&fe&&console.warn("The query ".concat(JSON.stringify(d)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(h.join("+"),"]"));var y=this.schema.idxByName;function b(D,$){return rt(D,$)===0}var I=h.reduce(function(R,$){var B=R[0],z=R[1],R=y[$],H=d[$];return[B||R,B||!R?ds(z,R&&R.multi?function(L){return L=T(L,$),a(L)&&L.some(function(N){return b(H,N)})}:function(L){return b(H,T(L,$))}):z]},[null,null]),x=I[0],I=I[1];return x?this.where(x.name).equals(d[x.keyPath]).filter(I):g?this.filter(I):this.where(h).equals("")},kt.prototype.filter=function(d){return this.toCollection().and(d)},kt.prototype.count=function(d){return this.toCollection().count(d)},kt.prototype.offset=function(d){return this.toCollection().offset(d)},kt.prototype.limit=function(d){return this.toCollection().limit(d)},kt.prototype.each=function(d){return this.toCollection().each(d)},kt.prototype.toArray=function(d){return this.toCollection().toArray(d)},kt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},kt.prototype.orderBy=function(d){return new this.db.Collection(new this.db.WhereClause(this,a(d)?"[".concat(d.join("+"),"]"):d))},kt.prototype.reverse=function(){return this.toCollection().reverse()},kt.prototype.mapToClass=function(d){var h,g=this.db,y=this.name;function b(){return h!==null&&h.apply(this,arguments)||this}(this.schema.mappedClass=d).prototype instanceof Tf&&((function($,B){if(typeof B!="function"&&B!==null)throw new TypeError("Class extends value "+String(B)+" is not a constructor or null");function z(){this.constructor=$}n($,B),$.prototype=B===null?Object.create(B):(z.prototype=B.prototype,new z)})(b,h=d),Object.defineProperty(b.prototype,"db",{get:function(){return g},enumerable:!1,configurable:!0}),b.prototype.table=function(){return y},d=b);for(var x=new Set,I=d.prototype;I;I=c(I))Object.getOwnPropertyNames(I).forEach(function($){return x.add($)});function D($){if(!$)return $;var B,z=Object.create(d.prototype);for(B in $)if(!x.has(B))try{z[B]=$[B]}catch{}return z}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=D,this.hook("reading",D),d},kt.prototype.defineClass=function(){return this.mapToClass(function(d){l(this,d)})},kt.prototype.add=function(d,h){var g=this,y=this.schema.primKey,b=y.auto,x=y.keyPath,I=d;return x&&b&&(I=ma(x)(d)),this._trans("readwrite",function(D){return g.core.mutate({trans:D,type:"add",keys:h!=null?[h]:null,values:[I]})}).then(function(D){return D.numFailures?Te.reject(D.failures[0]):D.lastResult}).then(function(D){if(x)try{X(d,x,D)}catch{}return D})},kt.prototype.update=function(d,h){return typeof d!="object"||a(d)?this.where(":id").equals(d).modify(h):(d=T(d,this.schema.primKey.keyPath),d===void 0?Mt(new re.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(d).modify(h))},kt.prototype.put=function(d,h){var g=this,y=this.schema.primKey,b=y.auto,x=y.keyPath,I=d;return x&&b&&(I=ma(x)(d)),this._trans("readwrite",function(D){return g.core.mutate({trans:D,type:"put",values:[I],keys:h!=null?[h]:null})}).then(function(D){return D.numFailures?Te.reject(D.failures[0]):D.lastResult}).then(function(D){if(x)try{X(d,x,D)}catch{}return D})},kt.prototype.delete=function(d){var h=this;return this._trans("readwrite",function(g){return h.core.mutate({trans:g,type:"delete",keys:[d]}).then(function(y){return ya(h,[d],y)}).then(function(y){return y.numFailures?Te.reject(y.failures[0]):void 0})})},kt.prototype.clear=function(){var d=this;return this._trans("readwrite",function(h){return d.core.mutate({trans:h,type:"deleteRange",range:Mf}).then(function(g){return ya(d,null,g)})}).then(function(h){return h.numFailures?Te.reject(h.failures[0]):void 0})},kt.prototype.bulkGet=function(d){var h=this;return this._trans("readonly",function(g){return h.core.getMany({keys:d,trans:g}).then(function(y){return y.map(function(b){return h.hook.reading.fire(b)})})})},kt.prototype.bulkAdd=function(d,h,g){var y=this,b=Array.isArray(h)?h:void 0,x=(g=g||(b?void 0:h))?g.allKeys:void 0;return this._trans("readwrite",function(I){var B=y.schema.primKey,D=B.auto,B=B.keyPath;if(B&&b)throw new re.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(b&&b.length!==d.length)throw new re.InvalidArgument("Arguments objects and keys must have the same length");var $=d.length,B=B&&D?d.map(ma(B)):d;return y.core.mutate({trans:I,type:"add",keys:b,values:B,wantResults:x}).then(function(N){var R=N.numFailures,H=N.results,L=N.lastResult,N=N.failures;if(R===0)return x?H:L;throw new st("".concat(y.name,".bulkAdd(): ").concat(R," of ").concat($," operations failed"),N)})})},kt.prototype.bulkPut=function(d,h,g){var y=this,b=Array.isArray(h)?h:void 0,x=(g=g||(b?void 0:h))?g.allKeys:void 0;return this._trans("readwrite",function(I){var B=y.schema.primKey,D=B.auto,B=B.keyPath;if(B&&b)throw new re.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(b&&b.length!==d.length)throw new re.InvalidArgument("Arguments objects and keys must have the same length");var $=d.length,B=B&&D?d.map(ma(B)):d;return y.core.mutate({trans:I,type:"put",keys:b,values:B,wantResults:x}).then(function(N){var R=N.numFailures,H=N.results,L=N.lastResult,N=N.failures;if(R===0)return x?H:L;throw new st("".concat(y.name,".bulkPut(): ").concat(R," of ").concat($," operations failed"),N)})})},kt.prototype.bulkUpdate=function(d){var h=this,g=this.core,y=d.map(function(I){return I.key}),b=d.map(function(I){return I.changes}),x=[];return this._trans("readwrite",function(I){return g.getMany({trans:I,keys:y,cache:"clone"}).then(function(D){var $=[],B=[];d.forEach(function(R,H){var L=R.key,N=R.changes,W=D[H];if(W){for(var U=0,G=Object.keys(N);U<G.length;U++){var ne=G[U],se=N[ne];if(ne===h.schema.primKey.keyPath){if(rt(se,L)!==0)throw new re.Constraint("Cannot update primary key in bulkUpdate()")}else X(W,ne,se)}x.push(H),$.push(L),B.push(W)}});var z=$.length;return g.mutate({trans:I,type:"put",keys:$,values:B,updates:{keys:y,changeSpecs:b}}).then(function(R){var H=R.numFailures,L=R.failures;if(H===0)return z;for(var N=0,W=Object.keys(L);N<W.length;N++){var U,G=W[N],ne=x[Number(G)];ne!=null&&(U=L[G],delete L[G],L[ne]=U)}throw new st("".concat(h.name,".bulkUpdate(): ").concat(H," of ").concat(z," operations failed"),L)})})})},kt.prototype.bulkDelete=function(d){var h=this,g=d.length;return this._trans("readwrite",function(y){return h.core.mutate({trans:y,type:"delete",keys:d}).then(function(b){return ya(h,d,b)})}).then(function(I){var b=I.numFailures,x=I.lastResult,I=I.failures;if(b===0)return x;throw new st("".concat(h.name,".bulkDelete(): ").concat(b," of ").concat(g," operations failed"),I)})},kt);function kt(){}function Ni(d){function h(I,D){if(D){for(var $=arguments.length,B=new Array($-1);--$;)B[$-1]=arguments[$];return g[I].subscribe.apply(null,B),d}if(typeof I=="string")return g[I]}var g={};h.addEventType=x;for(var y=1,b=arguments.length;y<b;++y)x(arguments[y]);return h;function x(I,D,$){if(typeof I!="object"){var B;D=D||xe;var z={subscribers:[],fire:$=$||O,subscribe:function(R){z.subscribers.indexOf(R)===-1&&(z.subscribers.push(R),z.fire=D(z.fire,R))},unsubscribe:function(R){z.subscribers=z.subscribers.filter(function(H){return H!==R}),z.fire=z.subscribers.reduce(D,$)}};return g[I]=h[I]=z}o(B=I).forEach(function(R){var H=B[R];if(a(H))x(R,B[R][0],B[R][1]);else{if(H!=="asap")throw new re.InvalidArgument("Invalid event config");var L=x(R,F,function(){for(var N=arguments.length,W=new Array(N);N--;)W[N]=arguments[N];L.subscribers.forEach(function(U){M(function(){U.apply(null,W)})})})}})}}function zi(d,h){return _(h).from({prototype:d}),h}function ei(d,h){return!(d.filter||d.algorithm||d.or)&&(h?d.justLimit:!d.replayFilter)}function Ec(d,h){d.filter=ds(d.filter,h)}function Ic(d,h,g){var y=d.replayFilter;d.replayFilter=y?function(){return ds(y(),h())}:h,d.justLimit=g&&!y}function va(d,h){if(d.isPrimKey)return h.primaryKey;var g=h.getIndexByKeyPath(d.index);if(!g)throw new re.Schema("KeyPath "+d.index+" on object store "+h.name+" is not indexed");return g}function $f(d,h,g){var y=va(d,h.schema);return h.openCursor({trans:g,values:!d.keysOnly,reverse:d.dir==="prev",unique:!!d.unique,query:{index:y,range:d.range}})}function ba(d,h,g,y){var b=d.replayFilter?ds(d.filter,d.replayFilter()):d.filter;if(d.or){var x={},I=function(D,$,B){var z,R;b&&!b($,B,function(H){return $.stop(H)},function(H){return $.fail(H)})||((R=""+(z=$.primaryKey))=="[object ArrayBuffer]"&&(R=""+new Uint8Array(z)),f(x,R)||(x[R]=!0,h(D,$,B)))};return Promise.all([d.or._iterate(I,g),Lf($f(d,y,g),d.algorithm,I,!d.keysOnly&&d.valueMapper)])}return Lf($f(d,y,g),ds(d.algorithm,b),h,!d.keysOnly&&d.valueMapper)}function Lf(d,h,g,y){var b=Pt(y?function(x,I,D){return g(y(x),I,D)}:g);return d.then(function(x){if(x)return x.start(function(){var I=function(){return x.continue()};h&&!h(x,function(D){return I=D},function(D){x.stop(D),I=O},function(D){x.fail(D),I=O})||b(x.value,x,function(D){return I=D}),I()})})}var Ui=(Bf.prototype.execute=function(d){var h=this["@@propmod"];if(h.add!==void 0){var g=h.add;if(a(g))return s(s([],a(d)?d:[],!0),g).sort();if(typeof g=="number")return(Number(d)||0)+g;if(typeof g=="bigint")try{return BigInt(d)+g}catch{return BigInt(0)+g}throw new TypeError("Invalid term ".concat(g))}if(h.remove!==void 0){var y=h.remove;if(a(y))return a(d)?d.filter(function(b){return!y.includes(b)}).sort():[];if(typeof y=="number")return Number(d)-y;if(typeof y=="bigint")try{return BigInt(d)-y}catch{return BigInt(0)-y}throw new TypeError("Invalid subtrahend ".concat(y))}return g=(g=h.replacePrefix)===null||g===void 0?void 0:g[0],g&&typeof d=="string"&&d.startsWith(g)?h.replacePrefix[1]+d.substring(g.length):d},Bf);function Bf(d){this["@@propmod"]=d}var f_=(ct.prototype._read=function(d,h){var g=this._ctx;return g.error?g.table._trans(null,Mt.bind(null,g.error)):g.table._trans("readonly",d).then(h)},ct.prototype._write=function(d){var h=this._ctx;return h.error?h.table._trans(null,Mt.bind(null,h.error)):h.table._trans("readwrite",d,"locked")},ct.prototype._addAlgorithm=function(d){var h=this._ctx;h.algorithm=ds(h.algorithm,d)},ct.prototype._iterate=function(d,h){return ba(this._ctx,d,h,this._ctx.table.core)},ct.prototype.clone=function(d){var h=Object.create(this.constructor.prototype),g=Object.create(this._ctx);return d&&l(g,d),h._ctx=g,h},ct.prototype.raw=function(){return this._ctx.valueMapper=null,this},ct.prototype.each=function(d){var h=this._ctx;return this._read(function(g){return ba(h,d,g,h.table.core)})},ct.prototype.count=function(d){var h=this;return this._read(function(g){var y=h._ctx,b=y.table.core;if(ei(y,!0))return b.count({trans:g,query:{index:va(y,b.schema),range:y.range}}).then(function(I){return Math.min(I,y.limit)});var x=0;return ba(y,function(){return++x,!1},g,b).then(function(){return x})}).then(d)},ct.prototype.sortBy=function(d,h){var g=d.split(".").reverse(),y=g[0],b=g.length-1;function x($,B){return B?x($[g[B]],B-1):$[y]}var I=this._ctx.dir==="next"?1:-1;function D($,B){return rt(x($,b),x(B,b))*I}return this.toArray(function($){return $.sort(D)}).then(h)},ct.prototype.toArray=function(d){var h=this;return this._read(function(g){var y=h._ctx;if(y.dir==="next"&&ei(y,!0)&&0<y.limit){var b=y.valueMapper,x=va(y,y.table.core.schema);return y.table.core.query({trans:g,limit:y.limit,values:!0,query:{index:x,range:y.range}}).then(function(D){return D=D.result,b?D.map(b):D})}var I=[];return ba(y,function(D){return I.push(D)},g,y.table.core).then(function(){return I})},d)},ct.prototype.offset=function(d){var h=this._ctx;return d<=0||(h.offset+=d,ei(h)?Ic(h,function(){var g=d;return function(y,b){return g===0||(g===1?--g:b(function(){y.advance(g),g=0}),!1)}}):Ic(h,function(){var g=d;return function(){return--g<0}})),this},ct.prototype.limit=function(d){return this._ctx.limit=Math.min(this._ctx.limit,d),Ic(this._ctx,function(){var h=d;return function(g,y,b){return--h<=0&&y(b),0<=h}},!0),this},ct.prototype.until=function(d,h){return Ec(this._ctx,function(g,y,b){return!d(g.value)||(y(b),h)}),this},ct.prototype.first=function(d){return this.limit(1).toArray(function(h){return h[0]}).then(d)},ct.prototype.last=function(d){return this.reverse().first(d)},ct.prototype.filter=function(d){var h;return Ec(this._ctx,function(g){return d(g.value)}),(h=this._ctx).isMatch=ds(h.isMatch,d),this},ct.prototype.and=function(d){return this.filter(d)},ct.prototype.or=function(d){return new this.db.WhereClause(this._ctx.table,d,this)},ct.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},ct.prototype.desc=function(){return this.reverse()},ct.prototype.eachKey=function(d){var h=this._ctx;return h.keysOnly=!h.isMatch,this.each(function(g,y){d(y.key,y)})},ct.prototype.eachUniqueKey=function(d){return this._ctx.unique="unique",this.eachKey(d)},ct.prototype.eachPrimaryKey=function(d){var h=this._ctx;return h.keysOnly=!h.isMatch,this.each(function(g,y){d(y.primaryKey,y)})},ct.prototype.keys=function(d){var h=this._ctx;h.keysOnly=!h.isMatch;var g=[];return this.each(function(y,b){g.push(b.key)}).then(function(){return g}).then(d)},ct.prototype.primaryKeys=function(d){var h=this._ctx;if(h.dir==="next"&&ei(h,!0)&&0<h.limit)return this._read(function(y){var b=va(h,h.table.core.schema);return h.table.core.query({trans:y,values:!1,limit:h.limit,query:{index:b,range:h.range}})}).then(function(y){return y.result}).then(d);h.keysOnly=!h.isMatch;var g=[];return this.each(function(y,b){g.push(b.primaryKey)}).then(function(){return g}).then(d)},ct.prototype.uniqueKeys=function(d){return this._ctx.unique="unique",this.keys(d)},ct.prototype.firstKey=function(d){return this.limit(1).keys(function(h){return h[0]}).then(d)},ct.prototype.lastKey=function(d){return this.reverse().firstKey(d)},ct.prototype.distinct=function(){var d=this._ctx,d=d.index&&d.table.schema.idxByName[d.index];if(!d||!d.multi)return this;var h={};return Ec(this._ctx,function(b){var y=b.primaryKey.toString(),b=f(h,y);return h[y]=!0,!b}),this},ct.prototype.modify=function(d){var h=this,g=this._ctx;return this._write(function(y){var b,x,I;I=typeof d=="function"?d:(b=o(d),x=b.length,function(G){for(var ne=!1,se=0;se<x;++se){var ie=b[se],he=d[ie],be=T(G,ie);he instanceof Ui?(X(G,ie,he.execute(be)),ne=!0):be!==he&&(X(G,ie,he),ne=!0)}return ne});var D=g.table.core,R=D.schema.primaryKey,$=R.outbound,B=R.extractKey,z=200,R=h.db._options.modifyChunkSize;R&&(z=typeof R=="object"?R[D.name]||R["*"]||200:R);function H(G,ie){var se=ie.failures,ie=ie.numFailures;N+=G-ie;for(var he=0,be=o(se);he<be.length;he++){var me=be[he];L.push(se[me])}}var L=[],N=0,W=[],U=d===jf;return h.clone().primaryKeys().then(function(G){function ne(ie){var he=Math.min(z,G.length-ie),be=G.slice(ie,ie+he);return(U?Promise.resolve([]):D.getMany({trans:y,keys:be,cache:"immutable"})).then(function(me){var ye=[],Oe=[],Se=$?[]:null,De=U?be:[];if(!U)for(var Xe=0;Xe<he;++Xe){var ot=me[Xe],Ke={value:de(ot),primKey:G[ie+Xe]};I.call(Ke,Ke.value,Ke)!==!1&&(Ke.value==null?De.push(G[ie+Xe]):$||rt(B(ot),B(Ke.value))===0?(Oe.push(Ke.value),$&&Se.push(G[ie+Xe])):(De.push(G[ie+Xe]),ye.push(Ke.value)))}return Promise.resolve(0<ye.length&&D.mutate({trans:y,type:"add",values:ye}).then(function(It){for(var Ve in It.failures)De.splice(parseInt(Ve),1);H(ye.length,It)})).then(function(){return(0<Oe.length||se&&typeof d=="object")&&D.mutate({trans:y,type:"put",keys:Se,values:Oe,criteria:se,changeSpec:typeof d!="function"&&d,isAdditionalChunk:0<ie}).then(function(It){return H(Oe.length,It)})}).then(function(){return(0<De.length||se&&U)&&D.mutate({trans:y,type:"delete",keys:De,criteria:se,isAdditionalChunk:0<ie}).then(function(It){return ya(g.table,De,It)}).then(function(It){return H(De.length,It)})}).then(function(){return G.length>ie+he&&ne(ie+z)})})}var se=ei(g)&&g.limit===1/0&&(typeof d!="function"||U)&&{index:g.index,range:g.range};return ne(0).then(function(){if(0<L.length)throw new mt("Error modifying one or more objects",L,N,W);return G.length})})})},ct.prototype.delete=function(){var d=this._ctx,h=d.range;return!ei(d)||d.table.schema.yProps||!d.isPrimKey&&h.type!==3?this.modify(jf):this._write(function(g){var y=d.table.core.schema.primaryKey,b=h;return d.table.core.count({trans:g,query:{index:y,range:b}}).then(function(x){return d.table.core.mutate({trans:g,type:"deleteRange",range:b}).then(function($){var D=$.failures,$=$.numFailures;if($)throw new mt("Could not delete some values",Object.keys(D).map(function(B){return D[B]}),x-$);return x-$})})})},ct);function ct(){}var jf=function(d,h){return h.value=null};function h_(d,h){return d<h?-1:d===h?0:1}function p_(d,h){return h<d?-1:d===h?0:1}function _n(d,h,g){return d=d instanceof zf?new d.Collection(d):d,d._ctx.error=new(g||TypeError)(h),d}function ti(d){return new d.Collection(d,function(){return Nf("")}).limit(0)}function _a(d,h,g,y){var b,x,I,D,$,B,z,R=g.length;if(!g.every(function(N){return typeof N=="string"}))return _n(d,Of);function H(N){b=N==="next"?function(U){return U.toUpperCase()}:function(U){return U.toLowerCase()},x=N==="next"?function(U){return U.toLowerCase()}:function(U){return U.toUpperCase()},I=N==="next"?h_:p_;var W=g.map(function(U){return{lower:x(U),upper:b(U)}}).sort(function(U,G){return I(U.lower,G.lower)});D=W.map(function(U){return U.upper}),$=W.map(function(U){return U.lower}),z=(B=N)==="next"?"":y}H("next"),d=new d.Collection(d,function(){return $r(D[0],$[R-1]+y)}),d._ondirectionchange=function(N){H(N)};var L=0;return d._addAlgorithm(function(N,W,U){var G=N.key;if(typeof G!="string")return!1;var ne=x(G);if(h(ne,$,L))return!0;for(var se=null,ie=L;ie<R;++ie){var he=(function(be,me,ye,Oe,Se,De){for(var Xe=Math.min(be.length,Oe.length),ot=-1,Ke=0;Ke<Xe;++Ke){var It=me[Ke];if(It!==Oe[Ke])return Se(be[Ke],ye[Ke])<0?be.substr(0,Ke)+ye[Ke]+ye.substr(Ke+1):Se(be[Ke],Oe[Ke])<0?be.substr(0,Ke)+Oe[Ke]+ye.substr(Ke+1):0<=ot?be.substr(0,ot)+me[ot]+ye.substr(ot+1):null;Se(be[Ke],It)<0&&(ot=Ke)}return Xe<Oe.length&&De==="next"?be+ye.substr(be.length):Xe<be.length&&De==="prev"?be.substr(0,ye.length):ot<0?null:be.substr(0,ot)+Oe[ot]+ye.substr(ot+1)})(G,ne,D[ie],$[ie],I,B);he===null&&se===null?L=ie+1:(se===null||0<I(se,he))&&(se=he)}return W(se!==null?function(){N.continue(se+z)}:U),!1}),d}function $r(d,h,g,y){return{type:2,lower:d,upper:h,lowerOpen:g,upperOpen:y}}function Nf(d){return{type:1,lower:d,upper:d}}var zf=(Object.defineProperty(Ut.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Ut.prototype.between=function(d,h,g,y){g=g!==!1,y=y===!0;try{return 0<this._cmp(d,h)||this._cmp(d,h)===0&&(g||y)&&(!g||!y)?ti(this):new this.Collection(this,function(){return $r(d,h,!g,!y)})}catch{return _n(this,dr)}},Ut.prototype.equals=function(d){return d==null?_n(this,dr):new this.Collection(this,function(){return Nf(d)})},Ut.prototype.above=function(d){return d==null?_n(this,dr):new this.Collection(this,function(){return $r(d,void 0,!0)})},Ut.prototype.aboveOrEqual=function(d){return d==null?_n(this,dr):new this.Collection(this,function(){return $r(d,void 0,!1)})},Ut.prototype.below=function(d){return d==null?_n(this,dr):new this.Collection(this,function(){return $r(void 0,d,!1,!0)})},Ut.prototype.belowOrEqual=function(d){return d==null?_n(this,dr):new this.Collection(this,function(){return $r(void 0,d)})},Ut.prototype.startsWith=function(d){return typeof d!="string"?_n(this,Of):this.between(d,d+us,!0,!0)},Ut.prototype.startsWithIgnoreCase=function(d){return d===""?this.startsWith(d):_a(this,function(h,g){return h.indexOf(g[0])===0},[d],us)},Ut.prototype.equalsIgnoreCase=function(d){return _a(this,function(h,g){return h===g[0]},[d],"")},Ut.prototype.anyOfIgnoreCase=function(){var d=Y.apply(ee,arguments);return d.length===0?ti(this):_a(this,function(h,g){return g.indexOf(h)!==-1},d,"")},Ut.prototype.startsWithAnyOfIgnoreCase=function(){var d=Y.apply(ee,arguments);return d.length===0?ti(this):_a(this,function(h,g){return g.some(function(y){return h.indexOf(y)===0})},d,us)},Ut.prototype.anyOf=function(){var d=this,h=Y.apply(ee,arguments),g=this._cmp;try{h.sort(g)}catch{return _n(this,dr)}if(h.length===0)return ti(this);var y=new this.Collection(this,function(){return $r(h[0],h[h.length-1])});y._ondirectionchange=function(x){g=x==="next"?d._ascending:d._descending,h.sort(g)};var b=0;return y._addAlgorithm(function(x,I,D){for(var $=x.key;0<g($,h[b]);)if(++b===h.length)return I(D),!1;return g($,h[b])===0||(I(function(){x.continue(h[b])}),!1)}),y},Ut.prototype.notEqual=function(d){return this.inAnyRange([[-1/0,d],[d,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Ut.prototype.noneOf=function(){var d=Y.apply(ee,arguments);if(d.length===0)return new this.Collection(this);try{d.sort(this._ascending)}catch{return _n(this,dr)}var h=d.reduce(function(g,y){return g?g.concat([[g[g.length-1][1],y]]):[[-1/0,y]]},null);return h.push([d[d.length-1],this.db._maxKey]),this.inAnyRange(h,{includeLowers:!1,includeUppers:!1})},Ut.prototype.inAnyRange=function(G,h){var g=this,y=this._cmp,b=this._ascending,x=this._descending,I=this._min,D=this._max;if(G.length===0)return ti(this);if(!G.every(function(ne){return ne[0]!==void 0&&ne[1]!==void 0&&b(ne[0],ne[1])<=0}))return _n(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",re.InvalidArgument);var $=!h||h.includeLowers!==!1,B=h&&h.includeUppers===!0,z,R=b;function H(ne,se){return R(ne[0],se[0])}try{(z=G.reduce(function(ne,se){for(var ie=0,he=ne.length;ie<he;++ie){var be=ne[ie];if(y(se[0],be[1])<0&&0<y(se[1],be[0])){be[0]=I(be[0],se[0]),be[1]=D(be[1],se[1]);break}}return ie===he&&ne.push(se),ne},[])).sort(H)}catch{return _n(this,dr)}var L=0,N=B?function(ne){return 0<b(ne,z[L][1])}:function(ne){return 0<=b(ne,z[L][1])},W=$?function(ne){return 0<x(ne,z[L][0])}:function(ne){return 0<=x(ne,z[L][0])},U=N,G=new this.Collection(this,function(){return $r(z[0][0],z[z.length-1][1],!$,!B)});return G._ondirectionchange=function(ne){R=ne==="next"?(U=N,b):(U=W,x),z.sort(H)},G._addAlgorithm(function(ne,se,ie){for(var he,be=ne.key;U(be);)if(++L===z.length)return se(ie),!1;return!N(he=be)&&!W(he)||(g._cmp(be,z[L][1])===0||g._cmp(be,z[L][0])===0||se(function(){R===b?ne.continue(z[L][0]):ne.continue(z[L][1])}),!1)}),G},Ut.prototype.startsWithAnyOf=function(){var d=Y.apply(ee,arguments);return d.every(function(h){return typeof h=="string"})?d.length===0?ti(this):this.inAnyRange(d.map(function(h){return[h,h+us]})):_n(this,"startsWithAnyOf() only works with strings")},Ut);function Ut(){}function Xn(d){return Pt(function(h){return qi(h),d(h.target.error),!1})}function qi(d){d.stopPropagation&&d.stopPropagation(),d.preventDefault&&d.preventDefault()}var Wi="storagemutated",Oc="x-storagemutated-1",Lr=Ni(null,Wi),g_=(Qn.prototype._lock=function(){return S(!Fe.global),++this._reculock,this._reculock!==1||Fe.global||(Fe.lockOwnerFor=this),this},Qn.prototype._unlock=function(){if(S(!Fe.global),--this._reculock==0)for(Fe.global||(Fe.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var d=this._blockedFuncs.shift();try{cs(d[1],d[0])}catch{}}return this},Qn.prototype._locked=function(){return this._reculock&&Fe.lockOwnerFor!==this},Qn.prototype.create=function(d){var h=this;if(!this.mode)return this;var g=this.db.idbdb,y=this.db._state.dbOpenError;if(S(!this.idbtrans),!d&&!g)switch(y&&y.name){case"DatabaseClosedError":throw new re.DatabaseClosed(y);case"MissingAPIError":throw new re.MissingAPI(y.message,y);default:throw new re.OpenFailed(y)}if(!this.active)throw new re.TransactionInactive;return S(this._completion._state===null),(d=this.idbtrans=d||(this.db.core||g).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Pt(function(b){qi(b),h._reject(d.error)}),d.onabort=Pt(function(b){qi(b),h.active&&h._reject(new re.Abort(d.error)),h.active=!1,h.on("abort").fire(b)}),d.oncomplete=Pt(function(){h.active=!1,h._resolve(),"mutatedParts"in d&&Lr.storagemutated.fire(d.mutatedParts)}),this},Qn.prototype._promise=function(d,h,g){var y=this;if(d==="readwrite"&&this.mode!=="readwrite")return Mt(new re.ReadOnly("Transaction is readonly"));if(!this.active)return Mt(new re.TransactionInactive);if(this._locked())return new Te(function(x,I){y._blockedFuncs.push([function(){y._promise(d,h,g).then(x,I)},Fe])});if(g)return Dr(function(){var x=new Te(function(I,D){y._lock();var $=h(I,D,y);$&&$.then&&$.then(I,D)});return x.finally(function(){return y._unlock()}),x._lib=!0,x});var b=new Te(function(x,I){var D=h(x,I,y);D&&D.then&&D.then(x,I)});return b._lib=!0,b},Qn.prototype._root=function(){return this.parent?this.parent._root():this},Qn.prototype.waitFor=function(d){var h,g=this._root(),y=Te.resolve(d);g._waitingFor?g._waitingFor=g._waitingFor.then(function(){return y}):(g._waitingFor=y,g._waitingQueue=[],h=g.idbtrans.objectStore(g.storeNames[0]),(function x(){for(++g._spinCount;g._waitingQueue.length;)g._waitingQueue.shift()();g._waitingFor&&(h.get(-1/0).onsuccess=x)})());var b=g._waitingFor;return new Te(function(x,I){y.then(function(D){return g._waitingQueue.push(Pt(x.bind(null,D)))},function(D){return g._waitingQueue.push(Pt(I.bind(null,D)))}).finally(function(){g._waitingFor===b&&(g._waitingFor=null)})})},Qn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new re.Abort))},Qn.prototype.table=function(d){var h=this._memoizedTables||(this._memoizedTables={});if(f(h,d))return h[d];var g=this.schema[d];if(!g)throw new re.NotFound("Table "+d+" not part of transaction");return g=new this.db.Table(d,g,this),g.core=this.db.core.table(d),h[d]=g},Qn);function Qn(){}function Mc(d,h,g,y,b,x,I,D){return{name:d,keyPath:h,unique:g,multi:y,auto:b,compound:x,src:(g&&!I?"&":"")+(y?"*":"")+(b?"++":"")+Uf(h),type:D}}function Uf(d){return typeof d=="string"?d:d?"["+[].join.call(d,"+")+"]":""}function Tc(d,h,g){return{name:d,primKey:h,indexes:g,mappedClass:null,idxByName:(y=function(b){return[b.name,b]},g.reduce(function(b,x,I){return I=y(x,I),I&&(b[I[0]]=I[1]),b},{}))};var y}var Vi=function(d){try{return d.only([[]]),Vi=function(){return[[]]},[[]]}catch{return Vi=function(){return us},us}};function Dc(d){return d==null?function(){}:typeof d=="string"?(h=d).split(".").length===1?function(g){return g[h]}:function(g){return T(g,h)}:function(g){return T(g,d)};var h}function qf(d){return[].slice.call(d)}var m_=0;function Hi(d){return d==null?":id":typeof d=="string"?d:"[".concat(d.join("+"),"]")}function y_(d,h,$){function y(U){if(U.type===3)return null;if(U.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var L=U.lower,N=U.upper,W=U.lowerOpen,U=U.upperOpen;return L===void 0?N===void 0?null:h.upperBound(N,!!U):N===void 0?h.lowerBound(L,!!W):h.bound(L,N,!!W,!!U)}function b(H){var L,N=H.name;return{name:N,schema:H,mutate:function(W){var U=W.trans,G=W.type,ne=W.keys,se=W.values,ie=W.range;return new Promise(function(he,be){he=Pt(he);var me=U.objectStore(N),ye=me.keyPath==null,Oe=G==="put"||G==="add";if(!Oe&&G!=="delete"&&G!=="deleteRange")throw new Error("Invalid operation type: "+G);var Se,De=(ne||se||{length:1}).length;if(ne&&se&&ne.length!==se.length)throw new Error("Given keys array must have same length as given values array.");if(De===0)return he({numFailures:0,failures:{},results:[],lastResult:void 0});function Xe(cn){++It,qi(cn)}var ot=[],Ke=[],It=0;if(G==="deleteRange"){if(ie.type===4)return he({numFailures:It,failures:Ke,results:[],lastResult:void 0});ie.type===3?ot.push(Se=me.clear()):ot.push(Se=me.delete(y(ie)))}else{var ye=Oe?ye?[se,ne]:[se,null]:[ne,null],Ve=ye[0],Zt=ye[1];if(Oe)for(var en=0;en<De;++en)ot.push(Se=Zt&&Zt[en]!==void 0?me[G](Ve[en],Zt[en]):me[G](Ve[en])),Se.onerror=Xe;else for(en=0;en<De;++en)ot.push(Se=me[G](Ve[en])),Se.onerror=Xe}function Ta(cn){cn=cn.target.result,ot.forEach(function(ps,Qc){return ps.error!=null&&(Ke[Qc]=ps.error)}),he({numFailures:It,failures:Ke,results:G==="delete"?ne:ot.map(function(ps){return ps.result}),lastResult:cn})}Se.onerror=function(cn){Xe(cn),Ta(cn)},Se.onsuccess=Ta})},getMany:function(W){var U=W.trans,G=W.keys;return new Promise(function(ne,se){ne=Pt(ne);for(var ie,he=U.objectStore(N),be=G.length,me=new Array(be),ye=0,Oe=0,Se=function(ot){ot=ot.target,me[ot._pos]=ot.result,++Oe===ye&&ne(me)},De=Xn(se),Xe=0;Xe<be;++Xe)G[Xe]!=null&&((ie=he.get(G[Xe]))._pos=Xe,ie.onsuccess=Se,ie.onerror=De,++ye);ye===0&&ne(me)})},get:function(W){var U=W.trans,G=W.key;return new Promise(function(ne,se){ne=Pt(ne);var ie=U.objectStore(N).get(G);ie.onsuccess=function(he){return ne(he.target.result)},ie.onerror=Xn(se)})},query:(L=B,function(W){return new Promise(function(U,G){U=Pt(U);var ne,se,ie,ye=W.trans,he=W.values,be=W.limit,Se=W.query,me=be===1/0?void 0:be,Oe=Se.index,Se=Se.range,ye=ye.objectStore(N),Oe=Oe.isPrimaryKey?ye:ye.index(Oe.name),Se=y(Se);if(be===0)return U({result:[]});L?((me=he?Oe.getAll(Se,me):Oe.getAllKeys(Se,me)).onsuccess=function(De){return U({result:De.target.result})},me.onerror=Xn(G)):(ne=0,se=!he&&"openKeyCursor"in Oe?Oe.openKeyCursor(Se):Oe.openCursor(Se),ie=[],se.onsuccess=function(De){var Xe=se.result;return Xe?(ie.push(he?Xe.value:Xe.primaryKey),++ne===be?U({result:ie}):void Xe.continue()):U({result:ie})},se.onerror=Xn(G))})}),openCursor:function(W){var U=W.trans,G=W.values,ne=W.query,se=W.reverse,ie=W.unique;return new Promise(function(he,be){he=Pt(he);var Oe=ne.index,me=ne.range,ye=U.objectStore(N),ye=Oe.isPrimaryKey?ye:ye.index(Oe.name),Oe=se?ie?"prevunique":"prev":ie?"nextunique":"next",Se=!G&&"openKeyCursor"in ye?ye.openKeyCursor(y(me),Oe):ye.openCursor(y(me),Oe);Se.onerror=Xn(be),Se.onsuccess=Pt(function(De){var Xe,ot,Ke,It,Ve=Se.result;Ve?(Ve.___id=++m_,Ve.done=!1,Xe=Ve.continue.bind(Ve),ot=(ot=Ve.continuePrimaryKey)&&ot.bind(Ve),Ke=Ve.advance.bind(Ve),It=function(){throw new Error("Cursor not stopped")},Ve.trans=U,Ve.stop=Ve.continue=Ve.continuePrimaryKey=Ve.advance=function(){throw new Error("Cursor not started")},Ve.fail=Pt(be),Ve.next=function(){var Zt=this,en=1;return this.start(function(){return en--?Zt.continue():Zt.stop()}).then(function(){return Zt})},Ve.start=function(Zt){function en(){if(Se.result)try{Zt()}catch(cn){Ve.fail(cn)}else Ve.done=!0,Ve.start=function(){throw new Error("Cursor behind last entry")},Ve.stop()}var Ta=new Promise(function(cn,ps){cn=Pt(cn),Se.onerror=Xn(ps),Ve.fail=ps,Ve.stop=function(Qc){Ve.stop=Ve.continue=Ve.continuePrimaryKey=Ve.advance=It,cn(Qc)}});return Se.onsuccess=Pt(function(cn){Se.onsuccess=en,en()}),Ve.continue=Xe,Ve.continuePrimaryKey=ot,Ve.advance=Ke,en(),Ta},he(Ve)):he(null)},be)})},count:function(W){var U=W.query,G=W.trans,ne=U.index,se=U.range;return new Promise(function(ie,he){var be=G.objectStore(N),me=ne.isPrimaryKey?be:be.index(ne.name),be=y(se),me=be?me.count(be):me.count();me.onsuccess=Pt(function(ye){return ie(ye.target.result)}),me.onerror=Xn(he)})}}}var x,I,D,z=(I=$,D=qf((x=d).objectStoreNames),{schema:{name:x.name,tables:D.map(function(H){return I.objectStore(H)}).map(function(H){var L=H.keyPath,U=H.autoIncrement,N=a(L),W={},U={name:H.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:L==null,compound:N,keyPath:L,autoIncrement:U,unique:!0,extractKey:Dc(L)},indexes:qf(H.indexNames).map(function(G){return H.index(G)}).map(function(ie){var ne=ie.name,se=ie.unique,he=ie.multiEntry,ie=ie.keyPath,he={name:ne,compound:a(ie),keyPath:ie,unique:se,multiEntry:he,extractKey:Dc(ie)};return W[Hi(ie)]=he}),getIndexByKeyPath:function(G){return W[Hi(G)]}};return W[":id"]=U.primaryKey,L!=null&&(W[Hi(L)]=U.primaryKey),U})},hasGetAll:0<D.length&&"getAll"in I.objectStore(D[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),$=z.schema,B=z.hasGetAll,z=$.tables.map(b),R={};return z.forEach(function(H){return R[H.name]=H}),{stack:"dbcore",transaction:d.transaction.bind(d),table:function(H){if(!R[H])throw new Error("Table '".concat(H,"' not found"));return R[H]},MIN_KEY:-1/0,MAX_KEY:Vi(h),schema:$}}function v_(d,h,g,y){var b=g.IDBKeyRange;return g.indexedDB,{dbcore:(y=y_(h,b,y),d.dbcore.reduce(function(x,I){return I=I.create,r(r({},x),I(x))},y))}}function wa(d,y){var g=y.db,y=v_(d._middlewares,g,d._deps,y);d.core=y.dbcore,d.tables.forEach(function(b){var x=b.name;d.core.schema.tables.some(function(I){return I.name===x})&&(b.core=d.core.table(x),d[x]instanceof d.Table&&(d[x].core=b.core))})}function xa(d,h,g,y){g.forEach(function(b){var x=y[b];h.forEach(function(I){var D=(function $(B,z){return k(B,z)||(B=c(B))&&$(B,z)})(I,b);(!D||"value"in D&&D.value===void 0)&&(I===d.Transaction.prototype||I instanceof d.Transaction?v(I,b,{get:function(){return this.table(b)},set:function($){m(this,b,{value:$,writable:!0,configurable:!0,enumerable:!0})}}):I[b]=new d.Table(b,x))})})}function Rc(d,h){h.forEach(function(g){for(var y in g)g[y]instanceof d.Table&&delete g[y]})}function b_(d,h){return d._cfg.version-h._cfg.version}function __(d,h,g,y){var b=d._dbSchema;g.objectStoreNames.contains("$meta")&&!b.$meta&&(b.$meta=Tc("$meta",Vf("")[0],[]),d._storeNames.push("$meta"));var x=d._createTransaction("readwrite",d._storeNames,b);x.create(g),x._completion.catch(y);var I=x._reject.bind(x),D=Fe.transless||Fe;Dr(function(){return Fe.trans=x,Fe.transless=D,h!==0?(wa(d,g),B=h,(($=x).storeNames.includes("$meta")?$.table("$meta").get("version").then(function(z){return z??B}):Te.resolve(B)).then(function(z){return H=z,L=x,N=g,W=[],z=(R=d)._versions,U=R._dbSchema=Ca(0,R.idbdb,N),(z=z.filter(function(G){return G._cfg.version>=H})).length!==0?(z.forEach(function(G){W.push(function(){var ne=U,se=G._cfg.dbschema;Sa(R,ne,N),Sa(R,se,N),U=R._dbSchema=se;var ie=Fc(ne,se);ie.add.forEach(function(Oe){$c(N,Oe[0],Oe[1].primKey,Oe[1].indexes)}),ie.change.forEach(function(Oe){if(Oe.recreate)throw new re.Upgrade("Not yet support for changing primary key");var Se=N.objectStore(Oe.name);Oe.add.forEach(function(De){return ka(Se,De)}),Oe.change.forEach(function(De){Se.deleteIndex(De.name),ka(Se,De)}),Oe.del.forEach(function(De){return Se.deleteIndex(De)})});var he=G._cfg.contentUpgrade;if(he&&G._cfg.version>H){wa(R,N),L._memoizedTables={};var be=V(se);ie.del.forEach(function(Oe){be[Oe]=ne[Oe]}),Rc(R,[R.Transaction.prototype]),xa(R,[R.Transaction.prototype],o(be),be),L.schema=be;var me,ye=Le(he);return ye&&Js(),ie=Te.follow(function(){var Oe;(me=he(L))&&ye&&(Oe=Rr.bind(null,null),me.then(Oe,Oe))}),me&&typeof me.then=="function"?Te.resolve(me):ie.then(function(){return me})}}),W.push(function(ne){var se,ie,he=G._cfg.dbschema;se=he,ie=ne,[].slice.call(ie.db.objectStoreNames).forEach(function(be){return se[be]==null&&ie.db.deleteObjectStore(be)}),Rc(R,[R.Transaction.prototype]),xa(R,[R.Transaction.prototype],R._storeNames,R._dbSchema),L.schema=R._dbSchema}),W.push(function(ne){R.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(R.idbdb.version/10)===G._cfg.version?(R.idbdb.deleteObjectStore("$meta"),delete R._dbSchema.$meta,R._storeNames=R._storeNames.filter(function(se){return se!=="$meta"})):ne.objectStore("$meta").put(G._cfg.version,"version"))})}),(function G(){return W.length?Te.resolve(W.shift()(L.idbtrans)).then(G):Te.resolve()})().then(function(){Wf(U,N)})):Te.resolve();var R,H,L,N,W,U}).catch(I)):(o(b).forEach(function(z){$c(g,z,b[z].primKey,b[z].indexes)}),wa(d,g),void Te.follow(function(){return d.on.populate.fire(x)}).catch(I));var $,B})}function w_(d,h){Wf(d._dbSchema,h),h.db.version%10!=0||h.objectStoreNames.contains("$meta")||h.db.createObjectStore("$meta").add(Math.ceil(h.db.version/10-1),"version");var g=Ca(0,d.idbdb,h);Sa(d,d._dbSchema,h);for(var y=0,b=Fc(g,d._dbSchema).change;y<b.length;y++){var x=(function(I){if(I.change.length||I.recreate)return console.warn("Unable to patch indexes of table ".concat(I.name," because it has changes on the type of index or primary key.")),{value:void 0};var D=h.objectStore(I.name);I.add.forEach(function($){fe&&console.debug("Dexie upgrade patch: Creating missing index ".concat(I.name,".").concat($.src)),ka(D,$)})})(b[y]);if(typeof x=="object")return x.value}}function Fc(d,h){var g,y={del:[],add:[],change:[]};for(g in d)h[g]||y.del.push(g);for(g in h){var b=d[g],x=h[g];if(b){var I={name:g,def:x,recreate:!1,del:[],add:[],change:[]};if(""+(b.primKey.keyPath||"")!=""+(x.primKey.keyPath||"")||b.primKey.auto!==x.primKey.auto)I.recreate=!0,y.change.push(I);else{var D=b.idxByName,$=x.idxByName,B=void 0;for(B in D)$[B]||I.del.push(B);for(B in $){var z=D[B],R=$[B];z?z.src!==R.src&&I.change.push(R):I.add.push(R)}(0<I.del.length||0<I.add.length||0<I.change.length)&&y.change.push(I)}}else y.add.push([g,x])}return y}function $c(d,h,g,y){var b=d.db.createObjectStore(h,g.keyPath?{keyPath:g.keyPath,autoIncrement:g.auto}:{autoIncrement:g.auto});return y.forEach(function(x){return ka(b,x)}),b}function Wf(d,h){o(d).forEach(function(g){h.db.objectStoreNames.contains(g)||(fe&&console.debug("Dexie: Creating missing table",g),$c(h,g,d[g].primKey,d[g].indexes))})}function ka(d,h){d.createIndex(h.name,h.keyPath,{unique:h.unique,multiEntry:h.multi})}function Ca(d,h,g){var y={};return A(h.objectStoreNames,0).forEach(function(b){for(var x=g.objectStore(b),I=Mc(Uf(B=x.keyPath),B||"",!0,!1,!!x.autoIncrement,B&&typeof B!="string",!0),D=[],$=0;$<x.indexNames.length;++$){var z=x.index(x.indexNames[$]),B=z.keyPath,z=Mc(z.name,B,!!z.unique,!!z.multiEntry,!1,B&&typeof B!="string",!1);D.push(z)}y[b]=Tc(b,I,D)}),y}function Sa(d,h,g){for(var y=g.db.objectStoreNames,b=0;b<y.length;++b){var x=y[b],I=g.objectStore(x);d._hasGetAll="getAll"in I;for(var D=0;D<I.indexNames.length;++D){var $=I.indexNames[D],B=I.index($).keyPath,z=typeof B=="string"?B:"["+A(B).join("+")+"]";!h[x]||(B=h[x].idxByName[z])&&(B.name=$,delete h[x].idxByName[z],h[x].idxByName[$]=B)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(d._hasGetAll=!1)}function Vf(d){return d.split(",").map(function(h,g){var x=h.split(":"),y=(b=x[1])===null||b===void 0?void 0:b.trim(),b=(h=x[0].trim()).replace(/([&*]|\+\+)/g,""),x=/^\[/.test(b)?b.match(/^\[(.*)\]$/)[1].split("+"):b;return Mc(b,x||null,/\&/.test(h),/\*/.test(h),/\+\+/.test(h),a(x),g===0,y)})}var x_=(ni.prototype._createTableSchema=Tc,ni.prototype._parseIndexSyntax=Vf,ni.prototype._parseStoresSpec=function(d,h){var g=this;o(d).forEach(function(y){if(d[y]!==null){var b=g._parseIndexSyntax(d[y]),x=b.shift();if(!x)throw new re.Schema("Invalid schema for table "+y+": "+d[y]);if(x.unique=!0,x.multi)throw new re.Schema("Primary key cannot be multiEntry*");b.forEach(function(I){if(I.auto)throw new re.Schema("Only primary key can be marked as autoIncrement (++)");if(!I.keyPath)throw new re.Schema("Index must have a name and cannot be an empty string")}),b=g._createTableSchema(y,x,b),h[y]=b}})},ni.prototype.stores=function(g){var h=this.db;this._cfg.storesSource=this._cfg.storesSource?l(this._cfg.storesSource,g):g;var g=h._versions,y={},b={};return g.forEach(function(x){l(y,x._cfg.storesSource),b=x._cfg.dbschema={},x._parseStoresSpec(y,b)}),h._dbSchema=b,Rc(h,[h._allTables,h,h.Transaction.prototype]),xa(h,[h._allTables,h,h.Transaction.prototype,this._cfg.tables],o(b),b),h._storeNames=o(b),this},ni.prototype.upgrade=function(d){return this._cfg.contentUpgrade=ve(this._cfg.contentUpgrade||O,d),this},ni);function ni(){}function Lc(d,h){var g=d._dbNamesDB;return g||(g=d._dbNamesDB=new fr(ga,{addons:[],indexedDB:d,IDBKeyRange:h})).version(1).stores({dbnames:"name"}),g.table("dbnames")}function Bc(d){return d&&typeof d.databases=="function"}function jc(d){return Dr(function(){return Fe.letThrough=!0,d()})}function Nc(d){return!("from"in d)}var Jt=function(d,h){if(!this){var g=new Jt;return d&&"d"in d&&l(g,d),g}l(this,arguments.length?{d:1,from:d,to:1<arguments.length?h:d}:{d:0})};function Ki(d,h,g){var y=rt(h,g);if(!isNaN(y)){if(0<y)throw RangeError();if(Nc(d))return l(d,{from:h,to:g,d:1});var b=d.l,y=d.r;if(rt(g,d.from)<0)return b?Ki(b,h,g):d.l={from:h,to:g,d:1,l:null,r:null},Kf(d);if(0<rt(h,d.to))return y?Ki(y,h,g):d.r={from:h,to:g,d:1,l:null,r:null},Kf(d);rt(h,d.from)<0&&(d.from=h,d.l=null,d.d=y?y.d+1:1),0<rt(g,d.to)&&(d.to=g,d.r=null,d.d=d.l?d.l.d+1:1),g=!d.r,b&&!d.l&&Yi(d,b),y&&g&&Yi(d,y)}}function Yi(d,h){Nc(h)||(function g(y,$){var x=$.from,I=$.to,D=$.l,$=$.r;Ki(y,x,I),D&&g(y,D),$&&g(y,$)})(d,h)}function Hf(d,h){var g=Pa(h),y=g.next();if(y.done)return!1;for(var b=y.value,x=Pa(d),I=x.next(b.from),D=I.value;!y.done&&!I.done;){if(rt(D.from,b.to)<=0&&0<=rt(D.to,b.from))return!0;rt(b.from,D.from)<0?b=(y=g.next(D.from)).value:D=(I=x.next(b.from)).value}return!1}function Pa(d){var h=Nc(d)?null:{s:0,n:d};return{next:function(g){for(var y=0<arguments.length;h;)switch(h.s){case 0:if(h.s=1,y)for(;h.n.l&&rt(g,h.n.from)<0;)h={up:h,n:h.n.l,s:1};else for(;h.n.l;)h={up:h,n:h.n.l,s:1};case 1:if(h.s=2,!y||rt(g,h.n.to)<=0)return{value:h.n,done:!1};case 2:if(h.n.r){h.s=3,h={up:h,n:h.n.r,s:0};continue}case 3:h=h.up}return{done:!0}}}}function Kf(d){var h,g,y=(((h=d.r)===null||h===void 0?void 0:h.d)||0)-(((g=d.l)===null||g===void 0?void 0:g.d)||0),b=1<y?"r":y<-1?"l":"";b&&(h=b=="r"?"l":"r",g=r({},d),y=d[b],d.from=y.from,d.to=y.to,d[b]=y[b],g[b]=y[h],(d[h]=g).d=Yf(g)),d.d=Yf(d)}function Yf(g){var h=g.r,g=g.l;return(h?g?Math.max(h.d,g.d):h.d:g?g.d:0)+1}function Aa(d,h){return o(h).forEach(function(g){d[g]?Yi(d[g],h[g]):d[g]=(function y(b){var x,I,D={};for(x in b)f(b,x)&&(I=b[x],D[x]=!I||typeof I!="object"||K.has(I.constructor)?I:y(I));return D})(h[g])}),d}function zc(d,h){return d.all||h.all||Object.keys(d).some(function(g){return h[g]&&Hf(h[g],d[g])})}p(Jt.prototype,((On={add:function(d){return Yi(this,d),this},addKey:function(d){return Ki(this,d,d),this},addKeys:function(d){var h=this;return d.forEach(function(g){return Ki(h,g,g)}),this},hasKey:function(d){var h=Pa(this).next(d).value;return h&&rt(h.from,d)<=0&&0<=rt(h.to,d)}})[Ce]=function(){return Pa(this)},On));var fs={},Uc={},qc=!1;function Ea(d){Aa(Uc,d),qc||(qc=!0,setTimeout(function(){qc=!1,Wc(Uc,!(Uc={}))},0))}function Wc(d,h){h===void 0&&(h=!1);var g=new Set;if(d.all)for(var y=0,b=Object.values(fs);y<b.length;y++)Gf(I=b[y],d,g,h);else for(var x in d){var I,D=/^idb\:\/\/(.*)\/(.*)\//.exec(x);D&&(x=D[1],D=D[2],(I=fs["idb://".concat(x,"/").concat(D)])&&Gf(I,d,g,h))}g.forEach(function($){return $()})}function Gf(d,h,g,y){for(var b=[],x=0,I=Object.entries(d.queries.query);x<I.length;x++){for(var D=I[x],$=D[0],B=[],z=0,R=D[1];z<R.length;z++){var H=R[z];zc(h,H.obsSet)?H.subscribers.forEach(function(U){return g.add(U)}):y&&B.push(H)}y&&b.push([$,B])}if(y)for(var L=0,N=b;L<N.length;L++){var W=N[L],$=W[0],B=W[1];d.queries.query[$]=B}}function k_(d){var h=d._state,g=d._deps.indexedDB;if(h.isBeingOpened||d.idbdb)return h.dbReadyPromise.then(function(){return h.dbOpenError?Mt(h.dbOpenError):d});h.isBeingOpened=!0,h.dbOpenError=null,h.openComplete=!1;var y=h.openCanceller,b=Math.round(10*d.verno),x=!1;function I(){if(h.openCanceller!==y)throw new re.DatabaseClosed("db.open() was cancelled")}function D(){return new Te(function(H,L){if(I(),!g)throw new re.MissingAPI;var N=d.name,W=h.autoSchema||!b?g.open(N):g.open(N,b);if(!W)throw new re.MissingAPI;W.onerror=Xn(L),W.onblocked=Pt(d._fireOnBlocked),W.onupgradeneeded=Pt(function(U){var G;z=W.transaction,h.autoSchema&&!d._options.allowEmptyDB?(W.onerror=qi,z.abort(),W.result.close(),(G=g.deleteDatabase(N)).onsuccess=G.onerror=Pt(function(){L(new re.NoSuchDatabase("Database ".concat(N," doesnt exist")))})):(z.onerror=Xn(L),U=U.oldVersion>Math.pow(2,62)?0:U.oldVersion,R=U<1,d.idbdb=W.result,x&&w_(d,z),__(d,U/10,z,L))},L),W.onsuccess=Pt(function(){z=null;var U,G,ne,se,ie,he=d.idbdb=W.result,be=A(he.objectStoreNames);if(0<be.length)try{var me=he.transaction((se=be).length===1?se[0]:se,"readonly");if(h.autoSchema)G=he,ne=me,(U=d).verno=G.version/10,ne=U._dbSchema=Ca(0,G,ne),U._storeNames=A(G.objectStoreNames,0),xa(U,[U._allTables],o(ne),ne);else if(Sa(d,d._dbSchema,me),((ie=Fc(Ca(0,(ie=d).idbdb,me),ie._dbSchema)).add.length||ie.change.some(function(ye){return ye.add.length||ye.change.length}))&&!x)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),he.close(),b=he.version+1,x=!0,H(D());wa(d,me)}catch{}Zs.push(d),he.onversionchange=Pt(function(ye){h.vcFired=!0,d.on("versionchange").fire(ye)}),he.onclose=Pt(function(ye){d.on("close").fire(ye)}),R&&(ie=d._deps,me=N,he=ie.indexedDB,ie=ie.IDBKeyRange,Bc(he)||me===ga||Lc(he,ie).put({name:me}).catch(O)),H()},L)}).catch(function(H){switch(H?.name){case"UnknownError":if(0<h.PR1398_maxLoop)return h.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),D();break;case"VersionError":if(0<b)return b=0,D()}return Te.reject(H)})}var $,B=h.dbReadyResolve,z=null,R=!1;return Te.race([y,(typeof navigator>"u"?Te.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(H){function L(){return indexedDB.databases().finally(H)}$=setInterval(L,100),L()}).finally(function(){return clearInterval($)}):Promise.resolve()).then(D)]).then(function(){return I(),h.onReadyBeingFired=[],Te.resolve(jc(function(){return d.on.ready.fire(d.vip)})).then(function H(){if(0<h.onReadyBeingFired.length){var L=h.onReadyBeingFired.reduce(ve,O);return h.onReadyBeingFired=[],Te.resolve(jc(function(){return L(d.vip)})).then(H)}})}).finally(function(){h.openCanceller===y&&(h.onReadyBeingFired=null,h.isBeingOpened=!1)}).catch(function(H){h.dbOpenError=H;try{z&&z.abort()}catch{}return y===h.openCanceller&&d._close(),Mt(H)}).finally(function(){h.openComplete=!0,B()}).then(function(){var H;return R&&(H={},d.tables.forEach(function(L){L.schema.indexes.forEach(function(N){N.name&&(H["idb://".concat(d.name,"/").concat(L.name,"/").concat(N.name)]=new Jt(-1/0,[[[]]]))}),H["idb://".concat(d.name,"/").concat(L.name,"/")]=H["idb://".concat(d.name,"/").concat(L.name,"/:dels")]=new Jt(-1/0,[[[]]])}),Lr(Wi).fire(H),Wc(H,!0)),d})}function Vc(d){function h(x){return d.next(x)}var g=b(h),y=b(function(x){return d.throw(x)});function b(x){return function($){var D=x($),$=D.value;return D.done?$:$&&typeof $.then=="function"?$.then(g,y):a($)?Promise.all($).then(g,y):g($)}}return b(h)()}function Ia(d,h,g){for(var y=a(d)?d.slice():[d],b=0;b<g;++b)y.push(h);return y}var C_={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(d){return r(r({},d),{table:function(h){var g=d.table(h),y=g.schema,b={},x=[];function I(R,H,L){var N=Hi(R),W=b[N]=b[N]||[],U=R==null?0:typeof R=="string"?1:R.length,G=0<H,G=r(r({},L),{name:G?"".concat(N,"(virtual-from:").concat(L.name,")"):L.name,lowLevelIndex:L,isVirtual:G,keyTail:H,keyLength:U,extractKey:Dc(R),unique:!G&&L.unique});return W.push(G),G.isPrimaryKey||x.push(G),1<U&&I(U===2?R[0]:R.slice(0,U-1),H+1,L),W.sort(function(ne,se){return ne.keyTail-se.keyTail}),G}h=I(y.primaryKey.keyPath,0,y.primaryKey),b[":id"]=[h];for(var D=0,$=y.indexes;D<$.length;D++){var B=$[D];I(B.keyPath,0,B)}function z(R){var H,L=R.query.index;return L.isVirtual?r(r({},R),{query:{index:L.lowLevelIndex,range:(H=R.query.range,L=L.keyTail,{type:H.type===1?2:H.type,lower:Ia(H.lower,H.lowerOpen?d.MAX_KEY:d.MIN_KEY,L),lowerOpen:!0,upper:Ia(H.upper,H.upperOpen?d.MIN_KEY:d.MAX_KEY,L),upperOpen:!0})}}):R}return r(r({},g),{schema:r(r({},y),{primaryKey:h,indexes:x,getIndexByKeyPath:function(R){return(R=b[Hi(R)])&&R[0]}}),count:function(R){return g.count(z(R))},query:function(R){return g.query(z(R))},openCursor:function(R){var H=R.query.index,L=H.keyTail,N=H.isVirtual,W=H.keyLength;return N?g.openCursor(z(R)).then(function(G){return G&&U(G)}):g.openCursor(R);function U(G){return Object.create(G,{continue:{value:function(ne){ne!=null?G.continue(Ia(ne,R.reverse?d.MAX_KEY:d.MIN_KEY,L)):R.unique?G.continue(G.key.slice(0,W).concat(R.reverse?d.MIN_KEY:d.MAX_KEY,L)):G.continue()}},continuePrimaryKey:{value:function(ne,se){G.continuePrimaryKey(Ia(ne,d.MAX_KEY,L),se)}},primaryKey:{get:function(){return G.primaryKey}},key:{get:function(){var ne=G.key;return W===1?ne[0]:ne.slice(0,W)}},value:{get:function(){return G.value}}})}}})}})}};function Hc(d,h,g,y){return g=g||{},y=y||"",o(d).forEach(function(b){var x,I,D;f(h,b)?(x=d[b],I=h[b],typeof x=="object"&&typeof I=="object"&&x&&I?(D=Ae(x))!==Ae(I)?g[y+b]=h[b]:D==="Object"?Hc(x,I,g,y+b+"."):x!==I&&(g[y+b]=h[b]):x!==I&&(g[y+b]=h[b])):g[y+b]=void 0}),o(h).forEach(function(b){f(d,b)||(g[y+b]=h[b])}),g}function Kc(d,h){return h.type==="delete"?h.keys:h.keys||h.values.map(d.extractKey)}var S_={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(d){return r(r({},d),{table:function(h){var g=d.table(h),y=g.schema.primaryKey;return r(r({},g),{mutate:function(b){var x=Fe.trans,I=x.table(h).hook,D=I.deleting,$=I.creating,B=I.updating;switch(b.type){case"add":if($.fire===O)break;return x._promise("readwrite",function(){return z(b)},!0);case"put":if($.fire===O&&B.fire===O)break;return x._promise("readwrite",function(){return z(b)},!0);case"delete":if(D.fire===O)break;return x._promise("readwrite",function(){return z(b)},!0);case"deleteRange":if(D.fire===O)break;return x._promise("readwrite",function(){return(function R(H,L,N){return g.query({trans:H,values:!1,query:{index:y,range:L},limit:N}).then(function(W){var U=W.result;return z({type:"delete",keys:U,trans:H}).then(function(G){return 0<G.numFailures?Promise.reject(G.failures[0]):U.length<N?{failures:[],numFailures:0,lastResult:void 0}:R(H,r(r({},L),{lower:U[U.length-1],lowerOpen:!0}),N)})})})(b.trans,b.range,1e4)},!0)}return g.mutate(b);function z(R){var H,L,N,W=Fe.trans,U=R.keys||Kc(y,R);if(!U)throw new Error("Keys missing");return(R=R.type==="add"||R.type==="put"?r(r({},R),{keys:U}):r({},R)).type!=="delete"&&(R.values=s([],R.values)),R.keys&&(R.keys=s([],R.keys)),H=g,N=U,((L=R).type==="add"?Promise.resolve([]):H.getMany({trans:L.trans,keys:N,cache:"immutable"})).then(function(G){var ne=U.map(function(se,ie){var he,be,me,ye=G[ie],Oe={onerror:null,onsuccess:null};return R.type==="delete"?D.fire.call(Oe,se,ye,W):R.type==="add"||ye===void 0?(he=$.fire.call(Oe,se,R.values[ie],W),se==null&&he!=null&&(R.keys[ie]=se=he,y.outbound||X(R.values[ie],y.keyPath,se))):(he=Hc(ye,R.values[ie]),(be=B.fire.call(Oe,he,se,ye,W))&&(me=R.values[ie],Object.keys(be).forEach(function(Se){f(me,Se)?me[Se]=be[Se]:X(me,Se,be[Se])}))),Oe});return g.mutate(R).then(function(se){for(var ie=se.failures,he=se.results,be=se.numFailures,se=se.lastResult,me=0;me<U.length;++me){var ye=(he||U)[me],Oe=ne[me];ye==null?Oe.onerror&&Oe.onerror(ie[me]):Oe.onsuccess&&Oe.onsuccess(R.type==="put"&&G[me]?R.values[me]:ye)}return{failures:ie,results:he,numFailures:be,lastResult:se}}).catch(function(se){return ne.forEach(function(ie){return ie.onerror&&ie.onerror(se)}),Promise.reject(se)})})}}})}})}};function Xf(d,h,g){try{if(!h||h.keys.length<d.length)return null;for(var y=[],b=0,x=0;b<h.keys.length&&x<d.length;++b)rt(h.keys[b],d[x])===0&&(y.push(g?de(h.values[b]):h.values[b]),++x);return y.length===d.length?y:null}catch{return null}}var P_={stack:"dbcore",level:-1,create:function(d){return{table:function(h){var g=d.table(h);return r(r({},g),{getMany:function(y){if(!y.cache)return g.getMany(y);var b=Xf(y.keys,y.trans._cache,y.cache==="clone");return b?Te.resolve(b):g.getMany(y).then(function(x){return y.trans._cache={keys:y.keys,values:y.cache==="clone"?de(x):x},x})},mutate:function(y){return y.type!=="add"&&(y.trans._cache=null),g.mutate(y)}})}}}};function Qf(d,h){return d.trans.mode==="readonly"&&!!d.subscr&&!d.trans.explicit&&d.trans.db._options.cache!=="disabled"&&!h.schema.primaryKey.outbound}function Jf(d,h){switch(d){case"query":return h.values&&!h.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var A_={stack:"dbcore",level:0,name:"Observability",create:function(d){var h=d.schema.name,g=new Jt(d.MIN_KEY,d.MAX_KEY);return r(r({},d),{transaction:function(y,b,x){if(Fe.subscr&&b!=="readonly")throw new re.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Fe.querier));return d.transaction(y,b,x)},table:function(y){var b=d.table(y),x=b.schema,I=x.primaryKey,R=x.indexes,D=I.extractKey,$=I.outbound,B=I.autoIncrement&&R.filter(function(L){return L.compound&&L.keyPath.includes(I.keyPath)}),z=r(r({},b),{mutate:function(L){function N(Se){return Se="idb://".concat(h,"/").concat(y,"/").concat(Se),se[Se]||(se[Se]=new Jt)}var W,U,G,ne=L.trans,se=L.mutatedParts||(L.mutatedParts={}),ie=N(""),he=N(":dels"),be=L.type,Oe=L.type==="deleteRange"?[L.range]:L.type==="delete"?[L.keys]:L.values.length<50?[Kc(I,L).filter(function(Se){return Se}),L.values]:[],me=Oe[0],ye=Oe[1],Oe=L.trans._cache;return a(me)?(ie.addKeys(me),(Oe=be==="delete"||me.length===ye.length?Xf(me,Oe):null)||he.addKeys(me),(Oe||ye)&&(W=N,U=Oe,G=ye,x.indexes.forEach(function(Se){var De=W(Se.name||"");function Xe(Ke){return Ke!=null?Se.extractKey(Ke):null}function ot(Ke){return Se.multiEntry&&a(Ke)?Ke.forEach(function(It){return De.addKey(It)}):De.addKey(Ke)}(U||G).forEach(function(Ke,Zt){var Ve=U&&Xe(U[Zt]),Zt=G&&Xe(G[Zt]);rt(Ve,Zt)!==0&&(Ve!=null&&ot(Ve),Zt!=null&&ot(Zt))})}))):me?(ye={from:(ye=me.lower)!==null&&ye!==void 0?ye:d.MIN_KEY,to:(ye=me.upper)!==null&&ye!==void 0?ye:d.MAX_KEY},he.add(ye),ie.add(ye)):(ie.add(g),he.add(g),x.indexes.forEach(function(Se){return N(Se.name).add(g)})),b.mutate(L).then(function(Se){return!me||L.type!=="add"&&L.type!=="put"||(ie.addKeys(Se.results),B&&B.forEach(function(De){for(var Xe=L.values.map(function(Ve){return De.extractKey(Ve)}),ot=De.keyPath.findIndex(function(Ve){return Ve===I.keyPath}),Ke=0,It=Se.results.length;Ke<It;++Ke)Xe[Ke][ot]=Se.results[Ke];N(De.name).addKeys(Xe)})),ne.mutatedParts=Aa(ne.mutatedParts||{},se),Se})}}),R=function(N){var W=N.query,N=W.index,W=W.range;return[N,new Jt((N=W.lower)!==null&&N!==void 0?N:d.MIN_KEY,(W=W.upper)!==null&&W!==void 0?W:d.MAX_KEY)]},H={get:function(L){return[I,new Jt(L.key)]},getMany:function(L){return[I,new Jt().addKeys(L.keys)]},count:R,query:R,openCursor:R};return o(H).forEach(function(L){z[L]=function(N){var W=Fe.subscr,U=!!W,G=Qf(Fe,b)&&Jf(L,N)?N.obsSet={}:W;if(U){var ne=function(ye){return ye="idb://".concat(h,"/").concat(y,"/").concat(ye),G[ye]||(G[ye]=new Jt)},se=ne(""),ie=ne(":dels"),W=H[L](N),U=W[0],W=W[1];if((L==="query"&&U.isPrimaryKey&&!N.values?ie:ne(U.name||"")).add(W),!U.isPrimaryKey){if(L!=="count"){var he=L==="query"&&$&&N.values&&b.query(r(r({},N),{values:!1}));return b[L].apply(this,arguments).then(function(ye){if(L==="query"){if($&&N.values)return he.then(function(Xe){return Xe=Xe.result,se.addKeys(Xe),ye});var Oe=N.values?ye.result.map(D):ye.result;(N.values?se:ie).addKeys(Oe)}else if(L==="openCursor"){var Se=ye,De=N.values;return Se&&Object.create(Se,{key:{get:function(){return ie.addKey(Se.primaryKey),Se.key}},primaryKey:{get:function(){var Xe=Se.primaryKey;return ie.addKey(Xe),Xe}},value:{get:function(){return De&&se.addKey(Se.primaryKey),Se.value}}})}return ye})}ie.add(g)}}return b[L].apply(this,arguments)}}),z}})}};function Zf(d,h,g){if(g.numFailures===0)return h;if(h.type==="deleteRange")return null;var y=h.keys?h.keys.length:"values"in h&&h.values?h.values.length:1;return g.numFailures===y?null:(h=r({},h),a(h.keys)&&(h.keys=h.keys.filter(function(b,x){return!(x in g.failures)})),"values"in h&&a(h.values)&&(h.values=h.values.filter(function(b,x){return!(x in g.failures)})),h)}function Yc(d,h){return g=d,((y=h).lower===void 0||(y.lowerOpen?0<rt(g,y.lower):0<=rt(g,y.lower)))&&(d=d,(h=h).upper===void 0||(h.upperOpen?rt(d,h.upper)<0:rt(d,h.upper)<=0));var g,y}function eh(d,h,H,y,b,x){if(!H||H.length===0)return d;var I=h.query.index,D=I.multiEntry,$=h.query.range,B=y.schema.primaryKey.extractKey,z=I.extractKey,R=(I.lowLevelIndex||I).extractKey,H=H.reduce(function(L,N){var W=L,U=[];if(N.type==="add"||N.type==="put")for(var G=new Jt,ne=N.values.length-1;0<=ne;--ne){var se,ie=N.values[ne],he=B(ie);G.hasKey(he)||(se=z(ie),(D&&a(se)?se.some(function(Se){return Yc(Se,$)}):Yc(se,$))&&(G.addKey(he),U.push(ie)))}switch(N.type){case"add":var be=new Jt().addKeys(h.values?L.map(function(De){return B(De)}):L),W=L.concat(h.values?U.filter(function(De){return De=B(De),!be.hasKey(De)&&(be.addKey(De),!0)}):U.map(function(De){return B(De)}).filter(function(De){return!be.hasKey(De)&&(be.addKey(De),!0)}));break;case"put":var me=new Jt().addKeys(N.values.map(function(De){return B(De)}));W=L.filter(function(De){return!me.hasKey(h.values?B(De):De)}).concat(h.values?U:U.map(function(De){return B(De)}));break;case"delete":var ye=new Jt().addKeys(N.keys);W=L.filter(function(De){return!ye.hasKey(h.values?B(De):De)});break;case"deleteRange":var Oe=N.range;W=L.filter(function(De){return!Yc(B(De),Oe)})}return W},d);return H===d?d:(H.sort(function(L,N){return rt(R(L),R(N))||rt(B(L),B(N))}),h.limit&&h.limit<1/0&&(H.length>h.limit?H.length=h.limit:d.length===h.limit&&H.length<h.limit&&(b.dirty=!0)),x?Object.freeze(H):H)}function th(d,h){return rt(d.lower,h.lower)===0&&rt(d.upper,h.upper)===0&&!!d.lowerOpen==!!h.lowerOpen&&!!d.upperOpen==!!h.upperOpen}function E_(d,h){return(function(g,y,b,x){if(g===void 0)return y!==void 0?-1:0;if(y===void 0)return 1;if((y=rt(g,y))===0){if(b&&x)return 0;if(b)return 1;if(x)return-1}return y})(d.lower,h.lower,d.lowerOpen,h.lowerOpen)<=0&&0<=(function(g,y,b,x){if(g===void 0)return y!==void 0?1:0;if(y===void 0)return-1;if((y=rt(g,y))===0){if(b&&x)return 0;if(b)return-1;if(x)return 1}return y})(d.upper,h.upper,d.upperOpen,h.upperOpen)}function I_(d,h,g,y){d.subscribers.add(g),y.addEventListener("abort",function(){var b,x;d.subscribers.delete(g),d.subscribers.size===0&&(b=d,x=h,setTimeout(function(){b.subscribers.size===0&&te(x,b)},3e3))})}var O_={stack:"dbcore",level:0,name:"Cache",create:function(d){var h=d.schema.name;return r(r({},d),{transaction:function(g,y,b){var x,I,D=d.transaction(g,y,b);return y==="readwrite"&&(I=(x=new AbortController).signal,b=function($){return function(){if(x.abort(),y==="readwrite"){for(var B=new Set,z=0,R=g;z<R.length;z++){var H=R[z],L=fs["idb://".concat(h,"/").concat(H)];if(L){var N=d.table(H),W=L.optimisticOps.filter(function(De){return De.trans===D});if(D._explicit&&$&&D.mutatedParts)for(var U=0,G=Object.values(L.queries.query);U<G.length;U++)for(var ne=0,se=(be=G[U]).slice();ne<se.length;ne++)zc((me=se[ne]).obsSet,D.mutatedParts)&&(te(be,me),me.subscribers.forEach(function(De){return B.add(De)}));else if(0<W.length){L.optimisticOps=L.optimisticOps.filter(function(De){return De.trans!==D});for(var ie=0,he=Object.values(L.queries.query);ie<he.length;ie++)for(var be,me,ye,Oe=0,Se=(be=he[ie]).slice();Oe<Se.length;Oe++)(me=Se[Oe]).res!=null&&D.mutatedParts&&($&&!me.dirty?(ye=Object.isFrozen(me.res),ye=eh(me.res,me.req,W,N,me,ye),me.dirty?(te(be,me),me.subscribers.forEach(function(De){return B.add(De)})):ye!==me.res&&(me.res=ye,me.promise=Te.resolve({result:ye}))):(me.dirty&&te(be,me),me.subscribers.forEach(function(De){return B.add(De)})))}}}B.forEach(function(De){return De()})}}},D.addEventListener("abort",b(!1),{signal:I}),D.addEventListener("error",b(!1),{signal:I}),D.addEventListener("complete",b(!0),{signal:I})),D},table:function(g){var y=d.table(g),b=y.schema.primaryKey;return r(r({},y),{mutate:function(x){var I=Fe.trans;if(b.outbound||I.db._options.cache==="disabled"||I.explicit||I.idbtrans.mode!=="readwrite")return y.mutate(x);var D=fs["idb://".concat(h,"/").concat(g)];return D?(I=y.mutate(x),x.type!=="add"&&x.type!=="put"||!(50<=x.values.length||Kc(b,x).some(function($){return $==null}))?(D.optimisticOps.push(x),x.mutatedParts&&Ea(x.mutatedParts),I.then(function($){0<$.numFailures&&(te(D.optimisticOps,x),($=Zf(0,x,$))&&D.optimisticOps.push($),x.mutatedParts&&Ea(x.mutatedParts))}),I.catch(function(){te(D.optimisticOps,x),x.mutatedParts&&Ea(x.mutatedParts)})):I.then(function($){var B=Zf(0,r(r({},x),{values:x.values.map(function(z,R){var H;return $.failures[R]?z:(z=(H=b.keyPath)!==null&&H!==void 0&&H.includes(".")?de(z):r({},z),X(z,b.keyPath,$.results[R]),z)})}),$);D.optimisticOps.push(B),queueMicrotask(function(){return x.mutatedParts&&Ea(x.mutatedParts)})}),I):y.mutate(x)},query:function(x){if(!Qf(Fe,y)||!Jf("query",x))return y.query(x);var I=((B=Fe.trans)===null||B===void 0?void 0:B.db._options.cache)==="immutable",R=Fe,D=R.requery,$=R.signal,B=(function(N,W,U,G){var ne=fs["idb://".concat(N,"/").concat(W)];if(!ne)return[];if(!(W=ne.queries[U]))return[null,!1,ne,null];var se=W[(G.query?G.query.index.name:null)||""];if(!se)return[null,!1,ne,null];switch(U){case"query":var ie=se.find(function(he){return he.req.limit===G.limit&&he.req.values===G.values&&th(he.req.query.range,G.query.range)});return ie?[ie,!0,ne,se]:[se.find(function(he){return("limit"in he.req?he.req.limit:1/0)>=G.limit&&(!G.values||he.req.values)&&E_(he.req.query.range,G.query.range)}),!1,ne,se];case"count":return ie=se.find(function(he){return th(he.req.query.range,G.query.range)}),[ie,!!ie,ne,se]}})(h,g,"query",x),z=B[0],R=B[1],H=B[2],L=B[3];return z&&R?z.obsSet=x.obsSet:(R=y.query(x).then(function(N){var W=N.result;if(z&&(z.res=W),I){for(var U=0,G=W.length;U<G;++U)Object.freeze(W[U]);Object.freeze(W)}else N.result=de(W);return N}).catch(function(N){return L&&z&&te(L,z),Promise.reject(N)}),z={obsSet:x.obsSet,promise:R,subscribers:new Set,type:"query",req:x,dirty:!1},L?L.push(z):(L=[z],(H=H||(fs["idb://".concat(h,"/").concat(g)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[x.query.index.name||""]=L)),I_(z,L,D,$),z.promise.then(function(N){return{result:eh(N.result,x,H?.optimisticOps,y,z,I)}})}})}})}};function Oa(d,h){return new Proxy(d,{get:function(g,y,b){return y==="db"?h:Reflect.get(g,y,b)}})}var fr=(Tt.prototype.version=function(d){if(isNaN(d)||d<.1)throw new re.Type("Given version is not a positive number");if(d=Math.round(10*d)/10,this.idbdb||this._state.isBeingOpened)throw new re.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,d);var h=this._versions,g=h.filter(function(y){return y._cfg.version===d})[0];return g||(g=new this.Version(d),h.push(g),h.sort(b_),g.stores({}),this._state.autoSchema=!1,g)},Tt.prototype._whenReady=function(d){var h=this;return this.idbdb&&(this._state.openComplete||Fe.letThrough||this._vip)?d():new Te(function(g,y){if(h._state.openComplete)return y(new re.DatabaseClosed(h._state.dbOpenError));if(!h._state.isBeingOpened){if(!h._state.autoOpen)return void y(new re.DatabaseClosed);h.open().catch(O)}h._state.dbReadyPromise.then(g,y)}).then(d)},Tt.prototype.use=function(d){var h=d.stack,g=d.create,y=d.level,b=d.name;return b&&this.unuse({stack:h,name:b}),d=this._middlewares[h]||(this._middlewares[h]=[]),d.push({stack:h,create:g,level:y??10,name:b}),d.sort(function(x,I){return x.level-I.level}),this},Tt.prototype.unuse=function(d){var h=d.stack,g=d.name,y=d.create;return h&&this._middlewares[h]&&(this._middlewares[h]=this._middlewares[h].filter(function(b){return y?b.create!==y:!!g&&b.name!==g})),this},Tt.prototype.open=function(){var d=this;return cs(Et,function(){return k_(d)})},Tt.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var d=this._state,h=Zs.indexOf(this);if(0<=h&&Zs.splice(h,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}d.isBeingOpened||(d.dbReadyPromise=new Te(function(g){d.dbReadyResolve=g}),d.openCanceller=new Te(function(g,y){d.cancelOpen=y}))},Tt.prototype.close=function(g){var h=(g===void 0?{disableAutoOpen:!0}:g).disableAutoOpen,g=this._state;h?(g.isBeingOpened&&g.cancelOpen(new re.DatabaseClosed),this._close(),g.autoOpen=!1,g.dbOpenError=new re.DatabaseClosed):(this._close(),g.autoOpen=this._options.autoOpen||g.isBeingOpened,g.openComplete=!1,g.dbOpenError=null)},Tt.prototype.delete=function(d){var h=this;d===void 0&&(d={disableAutoOpen:!0});var g=0<arguments.length&&typeof arguments[0]!="object",y=this._state;return new Te(function(b,x){function I(){h.close(d);var D=h._deps.indexedDB.deleteDatabase(h.name);D.onsuccess=Pt(function(){var $,B,z;$=h._deps,B=h.name,z=$.indexedDB,$=$.IDBKeyRange,Bc(z)||B===ga||Lc(z,$).delete(B).catch(O),b()}),D.onerror=Xn(x),D.onblocked=h._fireOnBlocked}if(g)throw new re.InvalidArgument("Invalid closeOptions argument to db.delete()");y.isBeingOpened?y.dbReadyPromise.then(I):I()})},Tt.prototype.backendDB=function(){return this.idbdb},Tt.prototype.isOpen=function(){return this.idbdb!==null},Tt.prototype.hasBeenClosed=function(){var d=this._state.dbOpenError;return d&&d.name==="DatabaseClosed"},Tt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Tt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Tt.prototype,"tables",{get:function(){var d=this;return o(this._allTables).map(function(h){return d._allTables[h]})},enumerable:!1,configurable:!0}),Tt.prototype.transaction=function(){var d=(function(h,g,y){var b=arguments.length;if(b<2)throw new re.InvalidArgument("Too few arguments");for(var x=new Array(b-1);--b;)x[b-1]=arguments[b];return y=x.pop(),[h,Z(x),y]}).apply(this,arguments);return this._transaction.apply(this,d)},Tt.prototype._transaction=function(d,h,g){var y=this,b=Fe.trans;b&&b.db===this&&d.indexOf("!")===-1||(b=null);var x,I,D=d.indexOf("?")!==-1;d=d.replace("!","").replace("?","");try{if(I=h.map(function(B){if(B=B instanceof y.Table?B.name:B,typeof B!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return B}),d=="r"||d===Pc)x=Pc;else{if(d!="rw"&&d!=Ac)throw new re.InvalidArgument("Invalid transaction mode: "+d);x=Ac}if(b){if(b.mode===Pc&&x===Ac){if(!D)throw new re.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");b=null}b&&I.forEach(function(B){if(b&&b.storeNames.indexOf(B)===-1){if(!D)throw new re.SubTransaction("Table "+B+" not included in parent transaction.");b=null}}),D&&b&&!b.active&&(b=null)}}catch(B){return b?b._promise(null,function(z,R){R(B)}):Mt(B)}var $=(function B(z,R,H,L,N){return Te.resolve().then(function(){var W=Fe.transless||Fe,U=z._createTransaction(R,H,z._dbSchema,L);if(U.explicit=!0,W={trans:U,transless:W},L)U.idbtrans=L.idbtrans;else try{U.create(),U.idbtrans._explicit=!0,z._state.PR1398_maxLoop=3}catch(se){return se.name===ae.InvalidState&&z.isOpen()&&0<--z._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),z.close({disableAutoOpen:!1}),z.open().then(function(){return B(z,R,H,null,N)})):Mt(se)}var G,ne=Le(N);return ne&&Js(),W=Te.follow(function(){var se;(G=N.call(U,U))&&(ne?(se=Rr.bind(null,null),G.then(se,se)):typeof G.next=="function"&&typeof G.throw=="function"&&(G=Vc(G)))},W),(G&&typeof G.then=="function"?Te.resolve(G).then(function(se){return U.active?se:Mt(new re.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):W.then(function(){return G})).then(function(se){return L&&U._resolve(),U._completion.then(function(){return se})}).catch(function(se){return U._reject(se),Mt(se)})})}).bind(null,this,x,I,b,g);return b?b._promise(x,$,"lock"):Fe.trans?cs(Fe.transless,function(){return y._whenReady($)}):this._whenReady($)},Tt.prototype.table=function(d){if(!f(this._allTables,d))throw new re.InvalidTable("Table ".concat(d," does not exist"));return this._allTables[d]},Tt);function Tt(d,h){var g=this;this._middlewares={},this.verno=0;var y=Tt.dependencies;this._options=h=r({addons:Tt.addons,autoOpen:!0,indexedDB:y.indexedDB,IDBKeyRange:y.IDBKeyRange,cache:"cloned"},h),this._deps={indexedDB:h.indexedDB,IDBKeyRange:h.IDBKeyRange},y=h.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var b,x,I,D,$,B={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:O,dbReadyPromise:null,cancelOpen:O,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:h.autoOpen};B.dbReadyPromise=new Te(function(R){B.dbReadyResolve=R}),B.openCanceller=new Te(function(R,H){B.cancelOpen=H}),this._state=B,this.name=d,this.on=Ni(this,"populate","blocked","versionchange","close",{ready:[ve,O]}),this.once=function(R,H){var L=function(){for(var N=[],W=0;W<arguments.length;W++)N[W]=arguments[W];g.on(R).unsubscribe(L),H.apply(g,N)};return g.on(R,L)},this.on.ready.subscribe=P(this.on.ready.subscribe,function(R){return function(H,L){Tt.vip(function(){var N,W=g._state;W.openComplete?(W.dbOpenError||Te.resolve().then(H),L&&R(H)):W.onReadyBeingFired?(W.onReadyBeingFired.push(H),L&&R(H)):(R(H),N=g,L||R(function U(){N.on.ready.unsubscribe(H),N.on.ready.unsubscribe(U)}))})}}),this.Collection=(b=this,zi(f_.prototype,function(G,U){this.db=b;var L=Mf,N=null;if(U)try{L=U()}catch(ne){N=ne}var W=G._ctx,U=W.table,G=U.hook.reading.fire;this._ctx={table:U,index:W.index,isPrimKey:!W.index||U.schema.primKey.keyPath&&W.index===U.schema.primKey.name,range:L,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:N,or:W.or,valueMapper:G!==F?G:null}})),this.Table=(x=this,zi(Ff.prototype,function(R,H,L){this.db=x,this._tx=L,this.name=R,this.schema=H,this.hook=x._allTables[R]?x._allTables[R].hook:Ni(null,{creating:[ue,O],reading:[Q,F],updating:[Ee,O],deleting:[ce,O]})})),this.Transaction=(I=this,zi(g_.prototype,function(R,H,L,N,W){var U=this;R!=="readonly"&&H.forEach(function(G){G=(G=L[G])===null||G===void 0?void 0:G.yProps,G&&(H=H.concat(G.map(function(ne){return ne.updatesTable})))}),this.db=I,this.mode=R,this.storeNames=H,this.schema=L,this.chromeTransactionDurability=N,this.idbtrans=null,this.on=Ni(this,"complete","error","abort"),this.parent=W||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Te(function(G,ne){U._resolve=G,U._reject=ne}),this._completion.then(function(){U.active=!1,U.on.complete.fire()},function(G){var ne=U.active;return U.active=!1,U.on.error.fire(G),U.parent?U.parent._reject(G):ne&&U.idbtrans&&U.idbtrans.abort(),Mt(G)})})),this.Version=(D=this,zi(x_.prototype,function(R){this.db=D,this._cfg={version:R,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=($=this,zi(zf.prototype,function(R,H,L){if(this.db=$,this._ctx={table:R,index:H===":id"?null:H,or:L},this._cmp=this._ascending=rt,this._descending=function(N,W){return rt(W,N)},this._max=function(N,W){return 0<rt(N,W)?N:W},this._min=function(N,W){return rt(N,W)<0?N:W},this._IDBKeyRange=$._deps.IDBKeyRange,!this._IDBKeyRange)throw new re.MissingAPI})),this.on("versionchange",function(R){0<R.newVersion?console.warn("Another connection wants to upgrade database '".concat(g.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(g.name,"'. Closing db now to resume the delete request.")),g.close({disableAutoOpen:!1})}),this.on("blocked",function(R){!R.newVersion||R.newVersion<R.oldVersion?console.warn("Dexie.delete('".concat(g.name,"') was blocked")):console.warn("Upgrade '".concat(g.name,"' blocked by other connection holding version ").concat(R.oldVersion/10))}),this._maxKey=Vi(h.IDBKeyRange),this._createTransaction=function(R,H,L,N){return new g.Transaction(R,H,L,g._options.chromeTransactionDurability,N)},this._fireOnBlocked=function(R){g.on("blocked").fire(R),Zs.filter(function(H){return H.name===g.name&&H!==g&&!H._state.vcFired}).map(function(H){return H.on("versionchange").fire(R)})},this.use(P_),this.use(O_),this.use(A_),this.use(C_),this.use(S_);var z=new Proxy(this,{get:function(R,H,L){if(H==="_vip")return!0;if(H==="table")return function(W){return Oa(g.table(W),z)};var N=Reflect.get(R,H,L);return N instanceof Ff?Oa(N,z):H==="tables"?N.map(function(W){return Oa(W,z)}):H==="_createTransaction"?function(){return Oa(N.apply(this,arguments),z)}:N}});this.vip=z,y.forEach(function(R){return R(g)})}var Ma,On=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",M_=(Gc.prototype.subscribe=function(d,h,g){return this._subscribe(d&&typeof d!="function"?d:{next:d,error:h,complete:g})},Gc.prototype[On]=function(){return this},Gc);function Gc(d){this._subscribe=d}try{Ma={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch{Ma={indexedDB:null,IDBKeyRange:null}}function nh(d){var h,g=!1,y=new M_(function(b){var x=Le(d),I,D=!1,$={},B={},z={get closed(){return D},unsubscribe:function(){D||(D=!0,I&&I.abort(),R&&Lr.storagemutated.unsubscribe(L))}};b.start&&b.start(z);var R=!1,H=function(){return Sc(N)},L=function(W){Aa($,W),zc(B,$)&&H()},N=function(){var W,U,G;!D&&Ma.indexedDB&&($={},W={},I&&I.abort(),I=new AbortController,G=(function(ne){var se=Xs();try{x&&Js();var ie=Dr(d,ne);return ie=x?ie.finally(Rr):ie}finally{se&&Qs()}})(U={subscr:W,signal:I.signal,requery:H,querier:d,trans:null}),Promise.resolve(G).then(function(ne){g=!0,h=ne,D||U.signal.aborted||($={},(function(se){for(var ie in se)if(f(se,ie))return;return 1})(B=W)||R||(Lr(Wi,L),R=!0),Sc(function(){return!D&&b.next&&b.next(ne)}))},function(ne){g=!1,["DatabaseClosedError","AbortError"].includes(ne?.name)||D||Sc(function(){D||b.error&&b.error(ne)})}))};return setTimeout(H,0),z});return y.hasValue=function(){return g},y.getValue=function(){return h},y}var hs=fr;function Xc(d){var h=Br;try{Br=!0,Lr.storagemutated.fire(d),Wc(d,!0)}finally{Br=h}}p(hs,r(r({},nt),{delete:function(d){return new hs(d,{addons:[]}).delete()},exists:function(d){return new hs(d,{addons:[]}).open().then(function(h){return h.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(d){try{return h=hs.dependencies,g=h.indexedDB,h=h.IDBKeyRange,(Bc(g)?Promise.resolve(g.databases()).then(function(y){return y.map(function(b){return b.name}).filter(function(b){return b!==ga})}):Lc(g,h).toCollection().primaryKeys()).then(d)}catch{return Mt(new re.MissingAPI)}var h,g},defineClass:function(){return function(d){l(this,d)}},ignoreTransaction:function(d){return Fe.trans?cs(Fe.transless,d):d()},vip:jc,async:function(d){return function(){try{var h=Vc(d.apply(this,arguments));return h&&typeof h.then=="function"?h:Te.resolve(h)}catch(g){return Mt(g)}}},spawn:function(d,h,g){try{var y=Vc(d.apply(g,h||[]));return y&&typeof y.then=="function"?y:Te.resolve(y)}catch(b){return Mt(b)}},currentTransaction:{get:function(){return Fe.trans||null}},waitFor:function(d,h){return h=Te.resolve(typeof d=="function"?hs.ignoreTransaction(d):d).timeout(h||6e4),Fe.trans?Fe.trans.waitFor(h):h},Promise:Te,debug:{get:function(){return fe},set:function(d){Ne(d)}},derive:_,extend:l,props:p,override:P,Events:Ni,on:Lr,liveQuery:nh,extendObservabilitySet:Aa,getByKeyPath:T,setByKeyPath:X,delByKeyPath:function(d,h){typeof h=="string"?X(d,h,void 0):"length"in h&&[].map.call(h,function(g){X(d,g,void 0)})},shallowClone:V,deepClone:de,getObjectDiff:Hc,cmp:rt,asap:M,minKey:-1/0,addons:[],connections:Zs,errnames:ae,dependencies:Ma,cache:fs,semVer:"4.2.0",version:"4.2.0".split(".").map(function(d){return parseInt(d)}).reduce(function(d,h,g){return d+h/Math.pow(10,2*g)})})),hs.maxKey=Vi(hs.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Lr(Wi,function(d){Br||(d=new CustomEvent(Oc,{detail:d}),Br=!0,dispatchEvent(d),Br=!1)}),addEventListener(Oc,function(d){d=d.detail,Br||Xc(d)}));var ri,Br=!1,rh=function(){};return typeof BroadcastChannel<"u"&&((rh=function(){(ri=new BroadcastChannel(Oc)).onmessage=function(d){return d.data&&Xc(d.data)}})(),typeof ri.unref=="function"&&ri.unref(),Lr(Wi,function(d){Br||ri.postMessage(d)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(d){if(!fr.disableBfCache&&d.persisted){fe&&console.debug("Dexie: handling persisted pagehide"),ri?.close();for(var h=0,g=Zs;h<g.length;h++)g[h].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(d){!fr.disableBfCache&&d.persisted&&(fe&&console.debug("Dexie: handling persisted pageshow"),rh(),Xc({all:new Jt(-1/0,[[]])}))})),Te.rejectionMapper=function(d,h){return!d||d instanceof We||d instanceof TypeError||d instanceof SyntaxError||!d.name||!$e[d.name]?d:(h=new $e[d.name](h||d.message,d),"stack"in d&&v(h,"stack",{get:function(){return this.inner.stack}}),h)},Ne(fe),r(fr,Object.freeze({__proto__:null,Dexie:fr,liveQuery:nh,Entity:Tf,cmp:rt,PropModification:Ui,replacePrefix:function(d,h){return new Ui({replacePrefix:[d,h]})},add:function(d){return new Ui({add:d})},remove:function(d){return new Ui({remove:d})},default:fr,RangeSet:Jt,mergeRanges:Yi,rangesOverlap:Hf}),{default:fr}),fr})})(dl)),dl.exports}var rk=nk();const nd=lv(rk),dp=Symbol.for("Dexie"),Ol=globalThis[dp]||(globalThis[dp]=nd);if(nd.semVer!==Ol.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${nd.semVer} and ${Ol.semVer}`);const{liveQuery:K$,mergeRanges:Y$,rangesOverlap:G$,RangeSet:X$,cmp:Q$,Entity:J$,PropModification:Z$,replacePrefix:eL,add:tL,remove:nL,DexieYProvider:rL}=Ol;class sk extends Ol{cards;card_lots;transactions;scans;decks;deck_cards;price_points;valuations;settings;scan_sale_links;constructor(){super("MtgTrackerDb"),this.version(1).stores({cards:"id, oracleId, name, set, setCode, number, lang, finish",transactions:"id, kind, cardId, source, externalRef, happenedAt",scans:"id, cardFingerprint, cardId, source, scannedAt",decks:"id, platform, name, importedAt",deck_cards:"[deckId+cardId], deckId, cardId",price_points:"id, cardId, provider, asOf",valuations:"id, asOf",settings:"k"}),this.version(2).stores({cards:"id, oracleId, name, set, setCode, number, lang, finish, createdAt, updatedAt",transactions:"id, kind, cardId, source, externalRef, happenedAt, createdAt, updatedAt",scans:"id, cardFingerprint, cardId, source, scannedAt, createdAt, updatedAt",decks:"id, platform, name, importedAt, createdAt, updatedAt",deck_cards:"[deckId+cardId], deckId, cardId, createdAt",price_points:"id, cardId, provider, asOf, createdAt",valuations:"id, asOf, createdAt",settings:"k, createdAt, updatedAt",scan_sale_links:"id, scanId, transactionId, matchedAt, createdAt"}).upgrade(async e=>{const n=new Date;await e.table("cards").toCollection().modify(r=>{r.createdAt=r.createdAt||n,r.updatedAt=r.updatedAt||n}),await e.table("transactions").toCollection().modify(r=>{r.createdAt=r.createdAt||n,r.updatedAt=r.updatedAt||n}),await e.table("scans").toCollection().modify(r=>{r.createdAt=r.createdAt||n,r.updatedAt=r.updatedAt||n}),await e.table("decks").toCollection().modify(r=>{r.createdAt=r.createdAt||n,r.updatedAt=r.updatedAt||n}),await e.table("deck_cards").toCollection().modify(r=>{r.createdAt=r.createdAt||n}),await e.table("price_points").toCollection().modify(r=>{r.createdAt=r.createdAt||n}),await e.table("valuations").toCollection().modify(r=>{r.createdAt=r.createdAt||n}),await e.table("settings").toCollection().modify(r=>{r.createdAt=r.createdAt||n,r.updatedAt=r.updatedAt||n})}),this.version(3).stores({cards:"id, oracleId, name, set, setCode, number, lang, finish, createdAt, updatedAt",transactions:"id, kind, cardId, source, externalRef, happenedAt, createdAt, updatedAt",scans:"id, cardFingerprint, cardId, source, scannedAt, createdAt, updatedAt",decks:"id, platform, name, importedAt, createdAt, updatedAt",deck_cards:"[deckId+cardId], deckId, cardId, createdAt",price_points:"id, cardId, provider, currency, asOf, createdAt, [cardId+asOf], [provider+asOf]",valuations:"id, asOf, createdAt, [asOf+createdAt]",settings:"k, createdAt, updatedAt",scan_sale_links:"id, scanId, transactionId, matchedAt, createdAt"}),this.version(4).stores({cards:"id, oracleId, name, set, setCode, number, lang, finish, createdAt, updatedAt",card_lots:"id, cardId, acquisitionId, source, purchasedAt, disposedAt, createdAt, updatedAt, [cardId+purchasedAt], [acquisitionId+cardId]",transactions:"id, kind, cardId, lotId, source, externalRef, happenedAt, relatedTransactionId, createdAt, updatedAt, [lotId+kind]",scans:"id, cardFingerprint, cardId, lotId, source, scannedAt, boosterPackId, createdAt, updatedAt, [lotId+scannedAt]",decks:"id, platform, name, importedAt, createdAt, updatedAt",deck_cards:"id, deckId, cardId, lotId, addedAt, removedAt, createdAt, [deckId+cardId], [lotId+addedAt]",price_points:"id, cardId, provider, currency, asOf, source, createdAt, [cardId+asOf], [provider+asOf]",valuations:"id, asOf, createdAt, [asOf+createdAt]",settings:"k, createdAt, updatedAt",scan_sale_links:"id, scanId, transactionId, quantity, matchedAt, createdAt"}).upgrade(async e=>{const n=new Date;await e.table("deck_cards").toCollection().modify(r=>{try{r.id||(r.id=`deckcard-${Date.now()}-${Math.random().toString(36).substr(2,9)}`),r.addedAt||(r.addedAt=r.createdAt||n),r.role||(r.role="main"),(!r.cardId||r.cardId==="")&&(r.cardId="unknown-card"),r.deckId||(r.deckId="unknown-deck"),typeof r.quantity!="number"&&(r.quantity=1),r.createdAt||(r.createdAt=n)}catch(s){console.error("Error upgrading deck card:",s,r);return}})}),this.version(5).stores({cards:"id, oracleId, name, set, setCode, number, lang, finish, createdAt, updatedAt",card_lots:"id, cardId, acquisitionId, source, purchasedAt, disposedAt, createdAt, updatedAt, externalRef, [cardId+purchasedAt], [acquisitionId+cardId], [externalRef]",transactions:"id, kind, cardId, lotId, source, externalRef, happenedAt, relatedTransactionId, createdAt, updatedAt, [lotId+kind]",scans:"id, cardFingerprint, cardId, lotId, source, scannedAt, boosterPackId, createdAt, updatedAt, [lotId+scannedAt]",decks:"id, platform, name, importedAt, createdAt, updatedAt",deck_cards:"id, deckId, cardId, lotId, addedAt, removedAt, createdAt, [deckId+cardId], [lotId+addedAt]",price_points:"id, cardId, provider, currency, asOf, source, createdAt, [cardId+asOf], [provider+asOf]",valuations:"id, asOf, createdAt, [asOf+createdAt]",settings:"k, createdAt, updatedAt",scan_sale_links:"id, scanId, transactionId, quantity, matchedAt, createdAt"}),this.version(6).stores({cards:"id, oracleId, name, set, setCode, number, lang, finish, layout, imageUrl, imageUrlBack, createdAt, updatedAt",card_lots:"id, cardId, acquisitionId, source, purchasedAt, disposedAt, createdAt, updatedAt, externalRef, [cardId+purchasedAt], [acquisitionId+cardId], [externalRef]",transactions:"id, kind, cardId, lotId, source, externalRef, happenedAt, relatedTransactionId, createdAt, updatedAt, [lotId+kind]",scans:"id, cardFingerprint, cardId, lotId, source, scannedAt, boosterPackId, createdAt, updatedAt, [lotId+scannedAt]",decks:"id, platform, name, importedAt, createdAt, updatedAt",deck_cards:"id, deckId, cardId, lotId, addedAt, removedAt, createdAt, [deckId+cardId], [lotId+addedAt]",price_points:"id, cardId, provider, currency, asOf, source, createdAt, [cardId+asOf], [provider+asOf]",valuations:"id, asOf, createdAt, [asOf+createdAt]",settings:"k, createdAt, updatedAt",scan_sale_links:"id, scanId, transactionId, quantity, matchedAt, createdAt"}).upgrade(async e=>{await e.table("cards").toCollection().modify(n=>{n.layout=n.layout||"normal"})}),this.version(7).stores({holdings:null}),this.version(8).stores({cards:"id, oracleId, name, set, setCode, number, lang, finish, layout, imageUrl, imageUrlBack, cardmarketId, createdAt, updatedAt",card_lots:"id, cardId, acquisitionId, source, purchasedAt, disposedAt, createdAt, updatedAt, externalRef, [cardId+purchasedAt], [acquisitionId+cardId], [externalRef]",transactions:"id, kind, cardId, lotId, source, externalRef, happenedAt, relatedTransactionId, createdAt, updatedAt, [lotId+kind]",scans:"id, cardFingerprint, cardId, lotId, source, scannedAt, boosterPackId, createdAt, updatedAt, [lotId+scannedAt]",decks:"id, platform, name, importedAt, createdAt, updatedAt",deck_cards:"id, deckId, cardId, lotId, addedAt, removedAt, createdAt, [deckId+cardId], [lotId+addedAt]",price_points:"id, cardId, provider, finish, date, currency, priceCent, asOf, createdAt, [cardId+date], [cardId+asOf], [provider+asOf], [cardId+provider+finish+date]",valuations:"id, asOf, createdAt, [asOf+createdAt]",settings:"k, createdAt, updatedAt",scan_sale_links:"id, scanId, transactionId, quantity, matchedAt, createdAt"}).upgrade(async e=>{const n=e.table("price_points"),r=await n.toArray();for(const s of r){if(s.priceCent==null&&s.price!=null){const f=typeof s.price=="number"&&s.price<1e3;s.priceCent=f?Math.round(s.price*100):s.price,delete s.price}let i=s.finish??"nonfoil",o=s.date??(s.asOf?new Date(s.asOf).toISOString().slice(0,10):void 0);const a=String(s.id??"").split(":"),l=a[2],c=a[3]??a[2];(l==="foil"||l==="etched")&&(i=l),/^\d{4}-\d{2}-\d{2}$/.test(c)&&(o=c);let u="scryfall";s.source&&(s.source==="mtgjson"?u="mtgjson.cardmarket":s.source==="cardmarket"?u="cardmarket.priceguide":u="scryfall"),s.finish=i,s.provider=u,s.date=o??new Date().toISOString().slice(0,10),s.currency=s.currency??"EUR",s.createdAt=s.createdAt??new Date,s.asOf=s.asOf??new Date,s.id=`${s.cardId}:${u}:${i}:${s.date}`,await n.put(s)}})}}const we=new sk,$n={async add(t){return await we.cards.add(t)},async getById(t){return await we.cards.get(t)},async getAll(){return await we.cards.toArray()},async getByCardmarketIds(t){return await we.cards.where("cardmarketId").anyOf(t).toArray()},async update(t,e){return await we.cards.update(t,e)},async delete(t){await we.cards.delete(t)}},Ft={async add(t){return await we.card_lots.add(t)},async getById(t){return await we.card_lots.get(t)},async getAll(){return await we.card_lots.toArray()},async getByCardId(t){return await we.card_lots.where("cardId").equals(t).toArray()},async getByExternalRef(t){return await we.card_lots.where("externalRef").equals(t).toArray()},async getActiveLotsByCardId(t){return await we.card_lots.where("cardId").equals(t).and(e=>!e.disposedAt).toArray()},async update(t,e){return await we.card_lots.update(t,e)},async delete(t){await we.card_lots.delete(t)}},Sn={async add(t){return await we.transactions.add(t)},async getById(t){return await we.transactions.get(t)},async getAll(){return await we.transactions.toArray()},async getByCardId(t){return await we.transactions.where("cardId").equals(t).toArray()},async getByLotId(t){return await we.transactions.where("lotId").equals(t).toArray()},async getByKind(t){return await we.transactions.where("kind").equals(t).toArray()},async getBuyTransactionsByCardId(t){return await we.transactions.where("cardId").equals(t).and(e=>e.kind==="BUY").toArray()},async getSellTransactionsByCardId(t){return await we.transactions.where("cardId").equals(t).and(e=>e.kind==="SELL").toArray()},async update(t,e){return await we.transactions.update(t,e)},async delete(t){await we.transactions.delete(t)}},Ba={async add(t){return await we.price_points.add(t)},async getById(t){return await we.price_points.get(t)},async getByCardId(t){return await we.price_points.where("cardId").equals(t).toArray()},async getByCardIdAndDate(t,e){return await we.price_points.where("[cardId+date]").equals([t,e]).toArray()},async getByCardIdAndSourceAndFinishAndDate(t,e,n,r){return await we.price_points.where("[cardId+source+finish+date]").equals([t,e,n,r]).toArray()},async update(t,e){return await we.price_points.update(t,e)},async bulkPut(t){await we.price_points.bulkPut(t)},async delete(t){await we.price_points.delete(t)}},rd={async add(t){return await we.valuations.add(t)},async getById(t){return await we.valuations.get(t)},async getAll(){return await we.valuations.toArray()},async update(t,e){return await we.valuations.update(t,e)},async delete(t){await we.valuations.delete(t)}},wi={async set(t,e){const n={k:t,v:e,createdAt:new Date,updatedAt:new Date};return await we.settings.put(n)},async get(t){return(await we.settings.get(t))?.v},async getAll(){return await we.settings.toArray()},async delete(t){await we.settings.delete(t)}};class Be{cents;currency;constructor(e,n="EUR"){this.cents=Math.round(e),this.currency=n}static parse(e,n="EUR"){if(typeof e=="number")return new Be(e*100,n);const r=e.replace(/[€$£\s]/g,"").replace(",","."),s=parseFloat(r);return new Be(isNaN(s)?0:s*100,n)}getCents(){return this.cents}getDecimal(){return this.cents/100}getCurrency(){return this.currency}add(e){if(this.currency!==e.currency)throw new Error("Cannot add Money values with different currencies");return new Be(this.cents+e.cents,this.currency)}subtract(e){if(this.currency!==e.currency)throw new Error("Cannot subtract Money values with different currencies");return new Be(this.cents-e.cents,this.currency)}multiply(e){return new Be(this.cents*e,this.currency)}divide(e){return new Be(this.cents/e,this.currency)}format(e="de-DE"){return new Intl.NumberFormat(e,{style:"currency",currency:this.currency,minimumFractionDigits:2,maximumFractionDigits:2}).format(this.getDecimal())}isZero(){return this.cents===0}isPositive(){return this.cents>0}isNegative(){return this.cents<0}}const ik="mtgjson.idMap.v1",ok={"mtgjson.cardmarket":3,"cardmarket.priceguide":2,scryfall:1},Yd=oc("cards",{state:()=>({cards:{},cardPrices:{},cardLatest:{},idMap:null,loading:!1,loadingPrices:!1,error:null}),getters:{getCardById:t=>e=>t.cards[e],getAllCards:t=>Object.values(t.cards),getCardsBySet:t=>e=>Object.values(t.cards).filter(n=>n.setCode===e),getCardPrice:t=>e=>t.cardPrices[e]||null,getLatestNonfoil:t=>e=>t.cardLatest[e]?.nonfoil||null,getLatestFoil:t=>e=>t.cardLatest[e]?.foil||null},actions:{async loadCards(){this.loading=!0,this.error=null;try{const t=await $n.getAll();this.cards=t.reduce((e,n)=>(e[n.id]=n,e),{})}catch(t){this.error=t instanceof Error?t.message:"Failed to load cards",console.error("Error loading cards:",t)}finally{this.loading=!1}},async ensureIdMap(){if(!this.idMap)try{this.idMap=await wi.get(ik)??null}catch(t){console.warn("[cardsStore] Could not load id map",t),this.idMap=null}},uuidForCard(t){const e=this.idMap;if(!e)return null;const n=e[t.id]||(t.oracleId?e[t.oracleId]:void 0);return n?String(n).toLowerCase():null},_pickLatestForFinish(t,e){const n=a=>{try{return new Date(a).toISOString().slice(0,10)}catch{return}},r={};for(const a of t){if((a.finish??"nonfoil")!==e)continue;const c=a.date??(a.asOf?n(a.asOf):void 0);if(!c)continue;const u=ok[a.provider??""]??0,f=a.asOf?new Date(a.asOf).getTime():0,p=r[c];(!p||u>p.rank||u===p.rank&&f>p.asOfTs)&&(r[c]={priceCent:a.priceCent,currency:a.currency??"EUR",rank:u,asOfTs:f})}const s=Object.keys(r);if(!s.length)return null;const i=s.sort((a,l)=>a.localeCompare(l)).at(-1),o=r[i];return new Be(o.priceCent,o.currency)},async loadLatestForCard(t){const e=this.cards[t];if(!e)return;await this.ensureIdMap();const n=this.uuidForCard(e),r=n?[e.id,n]:[e.id],i=(await we.price_points.where("cardId").anyOf(r).toArray()).map(c=>({date:c.date,asOf:c.asOf,provider:c.provider,finish:c.finish??"nonfoil",priceCent:c.priceCent,currency:c.currency??"EUR"})),o=this._pickLatestForFinish(i,"nonfoil"),a=this._pickLatestForFinish(i,"foil");this.cardLatest[t]={nonfoil:o||void 0,foil:a||void 0};const l=(e.finish==="foil"?a:o)||a||o||null;l?this.cardPrices[t]=l:delete this.cardPrices[t]},async loadCardPrices(){this.loadingPrices=!0,this.error=null;try{Object.keys(this.cards).length||await this.loadCards(),await this.ensureIdMap();const t=Object.values(this.cards),e=8;for(let n=0;n<t.length;n+=e){const r=t.slice(n,n+e);await Promise.all(r.map(s=>this.loadLatestForCard(s.id)))}}catch(t){this.error=t instanceof Error?t.message:"Failed to load card prices",console.error("Error loading card prices:",t)}finally{this.loadingPrices=!1}},async getPriceHistory(t){const e=this.cards[t];if(!e)return[];await this.ensureIdMap();const n=this.uuidForCard(e),r=n?[e.id,n]:[e.id],s=o=>{try{return new Date(o).toISOString().slice(0,10)}catch{return}};return(await we.price_points.where("cardId").anyOf(r).toArray()).map(o=>({...o,date:o.date??(o.asOf?s(o.asOf):void 0)})).filter(o=>typeof o.date=="string").sort((o,a)=>o.date.localeCompare(a.date))},async loadCardsAndPrices(){await this.loadCards(),await this.loadCardPrices()},async addCard(t){await $n.add(t),this.cards[t.id]=t},async updateCard(t,e){await $n.update(t,e),this.cards[t]&&(this.cards[t]={...this.cards[t],...e})},async removeCard(t){await $n.delete(t),delete this.cards[t],delete this.cardPrices[t],delete this.cardLatest[t]}}}),ak=oc("holdings",{state:()=>({holdings:{},loading:!1,error:null}),getters:{getHoldingByCardId:t=>e=>t.holdings[e],getAllHoldings:t=>Object.values(t.holdings),getTotalQuantityByCardId:t=>e=>t.holdings[e]?.quantity||0},actions:{async loadHoldings(){this.loading=!0,this.error=null;try{const t=await Ft.getAll(),n=(await $n.getAll()).reduce((s,i)=>(s[i.id]=i,s),{}),r={};for(const s of t){if(s.disposedAt)continue;const i=r[s.cardId],o=s.quantity-(s.disposedQuantity||0);i?(i.quantity+=o,i.totalCost+=s.totalAcquisitionCostCent||s.unitCost*o,i.averageCost=i.totalCost/i.quantity):r[s.cardId]={cardId:s.cardId,quantity:o,totalCost:s.totalAcquisitionCostCent||s.unitCost*o,averageCost:s.totalAcquisitionCostCent?s.totalAcquisitionCostCent/s.quantity:s.unitCost,card:n[s.cardId]}}this.holdings=r}catch(t){this.error=t instanceof Error?t.message:"Failed to load holdings",console.error("Error loading holdings:",t)}finally{this.loading=!1}}}}),lk=oc("transactions",{state:()=>({transactions:{},loading:!1,error:null}),getters:{getTransactionById:t=>e=>t.transactions[e],getAllTransactions:t=>Object.values(t.transactions),getTransactionsByCardId:t=>e=>Object.values(t.transactions).filter(n=>n.cardId===e),getTransactionsByKind:t=>e=>Object.values(t.transactions).filter(n=>n.kind===e),getTotalValueByKind:t=>e=>Object.values(t.transactions).filter(n=>n.kind===e).reduce((n,r)=>{const s=r.unitPrice*r.quantity,i=r.fees||0,o=r.shipping||0;return e==="BUY"?n+s+i+o:n+s-i-o},0)},actions:{async loadTransactions(){this.loading=!0,this.error=null;try{const t=await Sn.getAll();this.transactions=t.reduce((e,n)=>(e[n.id]=n,e),{})}catch(t){this.error=t instanceof Error?t.message:"Failed to load transactions",console.error("Error loading transactions:",t)}finally{this.loading=!1}},async addTransaction(t){try{await Sn.add(t),this.transactions[t.id]=t}catch(e){throw this.error=e instanceof Error?e.message:"Failed to add transaction",console.error("Error adding transaction:",e),e}},async updateTransaction(t,e){try{await Sn.update(t,e),this.transactions[t]&&(this.transactions[t]={...this.transactions[t],...e})}catch(n){throw this.error=n instanceof Error?n.message:"Failed to update transaction",console.error("Error updating transaction:",n),n}},async removeTransaction(t){try{await Sn.delete(t),delete this.transactions[t]}catch(e){throw this.error=e instanceof Error?e.message:"Failed to remove transaction",console.error("Error removing transaction:",e),e}}}});class sd{static PROVIDER_PRECEDENCE=["cardmarket.priceguide","mtgjson.cardmarket","scryfall"];static async getLatestPriceForCard(e){try{const n=await Ba.getByCardId(e);if(n.length===0)return null;const r=this.sortPricePointsByPrecedence(n);if(r.length===0)return null;const s=r[0];return{price:new Be(s.priceCent,s.currency),asOf:s.asOf,provider:s.provider}}catch(n){return console.error(`Error getting latest price for card ${e}:`,n),null}}static async getPricePointsForCard(e,n){try{let r=await Ba.getByCardId(e);return n?.source&&(r=r.filter(s=>s.provider===n.source)),n?.finish&&(r=r.filter(s=>s.finish===n.finish)),n?.startDate&&(r=r.filter(s=>new Date(s.asOf)>=n.startDate)),n?.endDate&&(r=r.filter(s=>new Date(s.asOf)<=n.endDate)),r=this.sortPricePointsByPrecedence(r),n?.limit&&(r=r.slice(0,n.limit)),r}catch(r){return console.error(`Error getting price points for card ${e}:`,r),[]}}static async getPriceForDate(e,n){try{const r=n.toISOString().split("T")[0];let s=await Ba.getByCardIdAndDate(e,r);if(s.length===0||(s=this.sortPricePointsByPrecedence(s),s.length===0))return null;const i=s[0];return{price:new Be(i.priceCent,i.currency),provider:i.provider,finish:i.finish}}catch(r){return console.error(`Error getting price for card ${e} on date ${n.toISOString().split("T")[0]}:`,r),null}}static async getPriceForDateAndFinish(e,n,r){try{const s=n.toISOString().split("T")[0];let i=await Ba.getByCardIdAndDate(e,s);if(i.length===0||(i=i.filter(a=>a.finish===r),i.length===0)||(i=this.sortPricePointsByPrecedence(i),i.length===0))return null;const o=i[0];return{price:new Be(o.priceCent,o.currency),provider:o.provider}}catch(s){return console.error(`Error getting price for card ${e} on date ${n.toISOString().split("T")[0]} with finish ${r}:`,s),null}}static sortPricePointsByPrecedence(e){return e.sort((n,r)=>{const s=this.PROVIDER_PRECEDENCE.indexOf(n.provider),i=this.PROVIDER_PRECEDENCE.indexOf(r.provider),o=s===-1?1/0:s,a=i===-1?1/0:i;return o!==a?o-a:new Date(r.asOf).getTime()-new Date(n.asOf).getTime()})}static getSourcePrecedence(e){const n=this.PROVIDER_PRECEDENCE.indexOf(e);return n===-1?1/0:n}}class Gr{static async calculateLotValue(e){if(e.cardId){const n=await sd.getLatestPriceForCard(e.cardId);if(n){const r=n.price,s=e.disposedQuantity?e.quantity-e.disposedQuantity:e.quantity;return r.multiply(s)}}return new Be(0,"EUR")}static async calculateLotCostBasis(e){if(e.totalAcquisitionCostCent){const i=(e.disposedQuantity?e.quantity-e.disposedQuantity:e.quantity)/e.quantity;return new Be(e.totalAcquisitionCostCent*i,e.currency||"EUR")}const n=new Be(e.unitCost,e.currency||"EUR"),r=e.disposedQuantity?e.quantity-e.disposedQuantity:e.quantity;return n.multiply(r)}static async calculateRealizedPnL(){const e=await Sn.getByKind("SELL");let n=new Be(0,"EUR");for(const r of e){const s=new Be(r.unitPrice,r.currency).multiply(r.quantity);let i=new Be(0,"EUR");if(r.lotId){const c=await Ft.getById(r.lotId);c&&(i=(c.totalAcquisitionCostCent?new Be(c.totalAcquisitionCostCent,c.currency||"EUR"):new Be(c.unitCost,c.currency||"EUR").multiply(c.quantity)).multiply(r.quantity/c.quantity))}else r.cardId&&(i=await this.calculateFIFOCostForCard(r.cardId,r.quantity));const o=new Be(r.fees,r.currency),a=new Be(r.shipping,r.currency),l=s.subtract(i).subtract(o).subtract(a);n=n.add(l)}return n}static async calculateFIFOCostForCard(e,n){const s=(await Ft.getByCardId(e)).filter(a=>!a.disposedAt||a.disposedQuantity&&a.disposedQuantity<a.quantity).sort((a,l)=>a.purchasedAt.getTime()-l.purchasedAt.getTime());let i=n,o=new Be(0,"EUR");for(const a of s){if(i<=0)break;const l=a.disposedQuantity?a.quantity-a.disposedQuantity:a.quantity,c=Math.min(i,l),f=new Be(a.unitCost,a.currency||"EUR").multiply(c);o=o.add(f),i-=c}return o}static async calculatePortfolioValue(){const e=await Ft.getAll();let n=new Be(0,"EUR");for(const r of e)if(!r.disposedAt||r.disposedQuantity&&r.disposedQuantity<r.quantity){const s=await this.calculateLotValue(r);n=n.add(s)}return n}static async calculateTotalCostBasis(){const e=await Ft.getAll();let n=new Be(0,"EUR");for(const r of e)if(!r.disposedAt||r.disposedQuantity&&r.disposedQuantity<r.quantity){const s=await this.calculateLotCostBasis(r);n=n.add(s)}return n}static async calculateUnrealizedPnL(){const e=await this.calculatePortfolioValue(),n=await this.calculateTotalCostBasis();return e.subtract(n)}static async getActiveLots(){return(await Ft.getAll()).filter(n=>!n.disposedAt||n.disposedQuantity&&n.disposedQuantity<n.quantity)}static async getOwnedQuantity(e){const n=await Ft.getByCardId(e);let r=0;for(const s of n)s.disposedAt?s.disposedQuantity&&s.disposedQuantity<s.quantity&&(r+=s.quantity-s.disposedQuantity):r+=s.quantity;return r}static async createValuationSnapshot(){try{const e=new Date;if(e.setHours(0,0,0,0),(await rd.getAll()).find(l=>{const c=new Date(l.asOf);return c.setHours(0,0,0,0),c.getTime()===e.getTime()})){console.log("Valuation snapshot for today already exists");return}const s=await this.calculatePortfolioValue(),i=await this.calculateTotalCostBasis(),o=await this.calculateRealizedPnL(),a={id:`valuation-${Date.now()}`,asOf:new Date,totalValue:s.getCents(),totalCostBasis:i.getCents(),realizedPnLToDate:o.getCents(),createdAt:new Date};await rd.add(a),console.log("Valuation snapshot created:",a)}catch(e){throw console.error("Error creating valuation snapshot:",e),e}}}class Is{static calculateTrueAcquisitionCost(e,n,r,s){const i=e+n+r;return Math.round(i/s*100)}static calculateNetRevenuePerCard(e,n,r,s){const i=e-n-r;return Math.round(i/s*100)}static async getTotalFees(e,n){const r=await Sn.getAll();let s=new Be(0,"EUR");for(const i of r)e&&new Date(i.happenedAt)<e||n&&new Date(i.happenedAt)>n||(s=s.add(new Be(i.fees||0,"EUR")));return s}static async getTotalShippingCosts(e,n,r){const s=await Sn.getAll();let i=new Be(0,"EUR");for(const o of s)e==="purchase"&&o.kind!=="BUY"||e==="sale"&&o.kind!=="SELL"||n&&new Date(o.happenedAt)<n||r&&new Date(o.happenedAt)>r||(i=i.add(new Be(o.shipping||0,o.currency||"EUR")));return i}static calculateLotNetProfit(e){if(!e.disposedAt||!e.salePriceCent)return 0;const n=e.totalAcquisitionCostCent||e.unitCost*e.quantity;return(e.totalSaleRevenueCent||e.salePriceCent*e.quantity-(e.saleFeesCent||0)+(e.saleShippingCent||0))-n}static async getTotalNetProfit(){const e=await Ft.getAll();let n=new Be(0,"EUR");for(const r of e)if(r.disposedAt&&r.totalNetProfitCent!==void 0)n=n.add(new Be(r.totalNetProfitCent,"EUR"));else if(r.disposedAt&&r.salePriceCent){const s=this.calculateLotNetProfit(r);n=n.add(new Be(s,"EUR"))}return n}static async getTotalRevenue(){const e=await Sn.getByKind("SELL");let n=new Be(0,"EUR");for(const r of e){const s=new Be(r.unitPrice*r.quantity,r.currency);n=n.add(s)}return n}static async getTotalCosts(){const e=await Sn.getByKind("BUY");let n=new Be(0,"EUR");for(const r of e){const s=new Be(r.unitPrice*r.quantity,r.currency),i=new Be(r.fees||0,r.currency),o=new Be(r.shipping||0,r.currency);n=n.add(s).add(i).add(o)}return n}}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Zo(t){return t+.5|0}const Xr=(t,e,n)=>Math.max(Math.min(t,n),e);function ho(t){return Xr(Zo(t*2.55),0,255)}function Zr(t){return Xr(Zo(t*255),0,255)}function Cr(t){return Xr(Zo(t/2.55)/100,0,1)}function fp(t){return Xr(Zo(t*100),0,100)}const Tn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},id=[..."0123456789ABCDEF"],ck=t=>id[t&15],uk=t=>id[(t&240)>>4]+id[t&15],ja=t=>(t&240)>>4===(t&15),dk=t=>ja(t.r)&&ja(t.g)&&ja(t.b)&&ja(t.a);function fk(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Tn[t[1]]*17,g:255&Tn[t[2]]*17,b:255&Tn[t[3]]*17,a:e===5?Tn[t[4]]*17:255}:(e===7||e===9)&&(n={r:Tn[t[1]]<<4|Tn[t[2]],g:Tn[t[3]]<<4|Tn[t[4]],b:Tn[t[5]]<<4|Tn[t[6]],a:e===9?Tn[t[7]]<<4|Tn[t[8]]:255})),n}const hk=(t,e)=>t<255?e(t):"";function pk(t){var e=dk(t)?ck:uk;return t?"#"+e(t.r)+e(t.g)+e(t.b)+hk(t.a,e):void 0}const gk=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function cv(t,e,n){const r=e*Math.min(n,1-n),s=(i,o=(i+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function mk(t,e,n){const r=(s,i=(s+t/60)%6)=>n-n*e*Math.max(Math.min(i,4-i,1),0);return[r(5),r(3),r(1)]}function yk(t,e,n){const r=cv(t,1,.5);let s;for(e+n>1&&(s=1/(e+n),e*=s,n*=s),s=0;s<3;s++)r[s]*=1-e-n,r[s]+=e;return r}function vk(t,e,n,r,s){return t===s?(e-n)/r+(e<n?6:0):e===s?(n-t)/r+2:(t-e)/r+4}function Gd(t){const n=t.r/255,r=t.g/255,s=t.b/255,i=Math.max(n,r,s),o=Math.min(n,r,s),a=(i+o)/2;let l,c,u;return i!==o&&(u=i-o,c=a>.5?u/(2-i-o):u/(i+o),l=vk(n,r,s,u,i),l=l*60+.5),[l|0,c||0,a]}function Xd(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(Zr)}function Qd(t,e,n){return Xd(cv,t,e,n)}function bk(t,e,n){return Xd(yk,t,e,n)}function _k(t,e,n){return Xd(mk,t,e,n)}function uv(t){return(t%360+360)%360}function wk(t){const e=gk.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?ho(+e[5]):Zr(+e[5]));const s=uv(+e[2]),i=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=bk(s,i,o):e[1]==="hsv"?r=_k(s,i,o):r=Qd(s,i,o),{r:r[0],g:r[1],b:r[2],a:n}}function xk(t,e){var n=Gd(t);n[0]=uv(n[0]+e),n=Qd(n),t.r=n[0],t.g=n[1],t.b=n[2]}function kk(t){if(!t)return;const e=Gd(t),n=e[0],r=fp(e[1]),s=fp(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${s}%, ${Cr(t.a)})`:`hsl(${n}, ${r}%, ${s}%)`}const hp={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},pp={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Ck(){const t={},e=Object.keys(pp),n=Object.keys(hp);let r,s,i,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],s=0;s<n.length;s++)i=n[s],a=a.replace(i,hp[i]);i=parseInt(pp[o],16),t[a]=[i>>16&255,i>>8&255,i&255]}return t}let Na;function Sk(t){Na||(Na=Ck(),Na.transparent=[0,0,0,0]);const e=Na[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const Pk=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Ak(t){const e=Pk.exec(t);let n=255,r,s,i;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?ho(o):Xr(o*255,0,255)}return r=+e[1],s=+e[3],i=+e[5],r=255&(e[2]?ho(r):Xr(r,0,255)),s=255&(e[4]?ho(s):Xr(s,0,255)),i=255&(e[6]?ho(i):Xr(i,0,255)),{r,g:s,b:i,a:n}}}function Ek(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Cr(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const du=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,oi=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function Ik(t,e,n){const r=oi(Cr(t.r)),s=oi(Cr(t.g)),i=oi(Cr(t.b));return{r:Zr(du(r+n*(oi(Cr(e.r))-r))),g:Zr(du(s+n*(oi(Cr(e.g))-s))),b:Zr(du(i+n*(oi(Cr(e.b))-i))),a:t.a+n*(e.a-t.a)}}function za(t,e,n){if(t){let r=Gd(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=Qd(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function dv(t,e){return t&&Object.assign(e||{},t)}function gp(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Zr(t[3]))):(e=dv(t,{r:0,g:0,b:0,a:1}),e.a=Zr(e.a)),e}function Ok(t){return t.charAt(0)==="r"?Ak(t):wk(t)}class Uo{constructor(e){if(e instanceof Uo)return e;const n=typeof e;let r;n==="object"?r=gp(e):n==="string"&&(r=fk(e)||Sk(e)||Ok(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=dv(this._rgb);return e&&(e.a=Cr(e.a)),e}set rgb(e){this._rgb=gp(e)}rgbString(){return this._valid?Ek(this._rgb):void 0}hexString(){return this._valid?pk(this._rgb):void 0}hslString(){return this._valid?kk(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,s=e.rgb;let i;const o=n===i?.5:n,a=2*o-1,l=r.a-s.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;i=1-c,r.r=255&c*r.r+i*s.r+.5,r.g=255&c*r.g+i*s.g+.5,r.b=255&c*r.b+i*s.b+.5,r.a=o*r.a+(1-o)*s.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=Ik(this._rgb,e._rgb,n)),this}clone(){return new Uo(this.rgb)}alpha(e){return this._rgb.a=Zr(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Zo(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return za(this._rgb,2,e),this}darken(e){return za(this._rgb,2,-e),this}saturate(e){return za(this._rgb,1,e),this}desaturate(e){return za(this._rgb,1,-e),this}rotate(e){return xk(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function gr(){}const Mk=(()=>{let t=0;return()=>t++})();function wt(t){return t==null}function Ct(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Je(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Ht(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Zn(t,e){return Ht(t)?t:e}function Qe(t,e){return typeof t>"u"?e:t}const Tk=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,fv=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function gt(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function pt(t,e,n,r){let s,i,o;if(Ct(t))for(i=t.length,s=0;s<i;s++)e.call(n,t[s],s);else if(Je(t))for(o=Object.keys(t),i=o.length,s=0;s<i;s++)e.call(n,t[o[s]],o[s])}function Ml(t,e){let n,r,s,i;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(s=t[n],i=e[n],s.datasetIndex!==i.datasetIndex||s.index!==i.index)return!1;return!0}function Tl(t){if(Ct(t))return t.map(Tl);if(Je(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let s=0;for(;s<r;++s)e[n[s]]=Tl(t[n[s]]);return e}return t}function hv(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function Dk(t,e,n,r){if(!hv(t))return;const s=e[t],i=n[t];Je(s)&&Je(i)?qo(s,i,r):e[t]=Tl(i)}function qo(t,e,n){const r=Ct(e)?e:[e],s=r.length;if(!Je(t))return t;n=n||{};const i=n.merger||Dk;let o;for(let a=0;a<s;++a){if(o=r[a],!Je(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)i(l[c],t,o,n)}return t}function Eo(t,e){return qo(t,e,{merger:Rk})}function Rk(t,e,n){if(!hv(t))return;const r=e[t],s=n[t];Je(r)&&Je(s)?Eo(r,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Tl(s))}const mp={"":t=>t,x:t=>t.x,y:t=>t.y};function Fk(t){const e=t.split("."),n=[];let r="";for(const s of e)r+=s,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function $k(t){const e=Fk(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function Wo(t,e){return(mp[e]||(mp[e]=$k(e)))(t)}function Jd(t){return t.charAt(0).toUpperCase()+t.slice(1)}const In=t=>typeof t<"u",yn=t=>typeof t=="function",yp=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function Lk(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const ut=Math.PI,qt=2*ut,Bk=qt+ut,Dl=Number.POSITIVE_INFINITY,Zd=ut/180,Xt=ut/2,Rn=ut/4,Rl=ut*2/3,pv=Math.log10,Ii=Math.sign;function Io(t,e,n){return Math.abs(t-e)<n}function vp(t){const e=Math.round(t);t=Io(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(pv(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function jk(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((s,i)=>s-i).pop(),e}function Nk(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Ns(t){return!Nk(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function zk(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function Uk(t,e,n){let r,s,i;for(r=0,s=t.length;r<s;r++)i=t[r][n],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function Wt(t){return t*(ut/180)}function gv(t){return t*(180/ut)}function bp(t){if(!Ht(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function od(t,e){const n=e.x-t.x,r=e.y-t.y,s=Math.sqrt(n*n+r*r);let i=Math.atan2(r,n);return i<-.5*ut&&(i+=qt),{angle:i,distance:s}}function Oi(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function qk(t,e){return(t-e+Bk)%qt-ut}function sr(t){return(t%qt+qt)%qt}function Fl(t,e,n,r){const s=sr(t),i=sr(e),o=sr(n),a=sr(i-s),l=sr(o-s),c=sr(s-i),u=sr(s-o);return s===i||s===o||r&&i===o||a>l&&c<u}function Ln(t,e,n){return Math.max(e,Math.min(n,t))}function Wk(t){return Ln(t,-32768,32767)}function hi(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function ef(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,s=0,i;for(;r-s>1;)i=s+r>>1,n(i)?s=i:r=i;return{lo:s,hi:r}}const Ds=(t,e,n,r)=>ef(t,n,r?s=>{const i=t[s][e];return i<n||i===n&&t[s+1][e]===n}:s=>t[s][e]<n),Vk=(t,e,n)=>ef(t,n,r=>t[r][e]>=n);function Hk(t,e,n){let r=0,s=t.length;for(;r<s&&t[r]<e;)r++;for(;s>r&&t[s-1]>n;)s--;return r>0||s<t.length?t.slice(r,s):t}const mv=["push","pop","shift","splice","unshift"];function Kk(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),mv.forEach(n=>{const r="_onData"+Jd(n),s=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...i){const o=s.apply(this,i);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...i)}),o}})})}function _p(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,s=r.indexOf(e);s!==-1&&r.splice(s,1),!(r.length>0)&&(mv.forEach(i=>{delete t[i]}),delete t._chartjs)}function Yk(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const yv=(function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame})();function vv(t,e){let n=[],r=!1;return function(...s){n=s,r||(r=!0,yv.call(window,()=>{r=!1,t.apply(e,n)}))}}function Gk(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const tf=t=>t==="start"?"left":t==="end"?"right":"center",tn=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,Xk=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function Qk(t,e,n){const r=e.length;let s=0,i=r;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=o.axis,{min:f,max:p,minDefined:m,maxDefined:v}=o.getUserBounds();if(m){if(s=Math.min(Ds(l,u,f).lo,n?r:Ds(e,u,o.getPixelForValue(f)).lo),c){const _=l.slice(0,s+1).reverse().findIndex(k=>!wt(k[a.axis]));s-=Math.max(0,_)}s=Ln(s,0,r-1)}if(v){let _=Math.max(Ds(l,o.axis,p,!0).hi+1,n?0:Ds(e,u,o.getPixelForValue(p),!0).hi+1);if(c){const k=l.slice(_-1).findIndex(C=>!wt(C[a.axis]));_+=Math.max(0,k)}i=Ln(_,s,r)-s}else i=r-s}return{start:s,count:i}}function Jk(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,s={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=s,!0;const i=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,s),i}const Ua=t=>t===0||t===1,wp=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*qt/n)),xp=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*qt/n)+1,Oo={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Xt)+1,easeOutSine:t=>Math.sin(t*Xt),easeInOutSine:t=>-.5*(Math.cos(ut*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Ua(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Ua(t)?t:wp(t,.075,.3),easeOutElastic:t=>Ua(t)?t:xp(t,.075,.3),easeInOutElastic(t){return Ua(t)?t:t<.5?.5*wp(t*2,.1125,.45):.5+.5*xp(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Oo.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Oo.easeInBounce(t*2)*.5:Oo.easeOutBounce(t*2-1)*.5+.5};function nf(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function kp(t){return nf(t)?t:new Uo(t)}function fu(t){return nf(t)?t:new Uo(t).saturate(.5).darken(.1).hexString()}const Zk=["x","y","borderWidth","radius","tension"],eC=["color","borderColor","backgroundColor"];function tC(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:eC},numbers:{type:"number",properties:Zk}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function nC(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Cp=new Map;function rC(t,e){e=e||{};const n=t+JSON.stringify(e);let r=Cp.get(n);return r||(r=new Intl.NumberFormat(t,e),Cp.set(n,r)),r}function rf(t,e,n){return rC(e,n).format(t)}const sC={values(t){return Ct(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let s,i=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),i=iC(t,n)}const o=pv(Math.abs(i)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),rf(t,r,l)}};function iC(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var bv={formatters:sC};function oC(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:bv.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const zs=Object.create(null),ad=Object.create(null);function Mo(t,e){if(!e)return t;const n=e.split(".");for(let r=0,s=n.length;r<s;++r){const i=n[r];t=t[i]||(t[i]=Object.create(null))}return t}function hu(t,e,n){return typeof e=="string"?qo(Mo(t,e),n):qo(Mo(t,""),e)}class aC{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,s)=>fu(s.backgroundColor),this.hoverBorderColor=(r,s)=>fu(s.borderColor),this.hoverColor=(r,s)=>fu(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return hu(this,e,n)}get(e){return Mo(this,e)}describe(e,n){return hu(ad,e,n)}override(e,n){return hu(zs,e,n)}route(e,n,r,s){const i=Mo(this,e),o=Mo(this,r),a="_"+n;Object.defineProperties(i,{[a]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[s];return Je(l)?Object.assign({},c,l):Qe(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var Ot=new aC({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[tC,nC,oC]);function lC(t){return!t||wt(t.size)||wt(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Sp(t,e,n,r,s){let i=e[s];return i||(i=e[s]=t.measureText(s).width,n.push(s)),i>r&&(r=i),r}function vs(t,e,n){const r=t.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((e-s)*r)/r+s}function Pp(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function ld(t,e,n,r){_v(t,e,n,r,null)}function _v(t,e,n,r,s){let i,o,a,l,c,u,f,p;const m=e.pointStyle,v=e.rotation,_=e.radius;let k=(v||0)*Zd;if(m&&typeof m=="object"&&(i=m.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(k),t.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),t.restore();return}if(!(isNaN(_)||_<=0)){switch(t.beginPath(),m){default:s?t.ellipse(n,r,s/2,_,0,0,qt):t.arc(n,r,_,0,qt),t.closePath();break;case"triangle":u=s?s/2:_,t.moveTo(n+Math.sin(k)*u,r-Math.cos(k)*_),k+=Rl,t.lineTo(n+Math.sin(k)*u,r-Math.cos(k)*_),k+=Rl,t.lineTo(n+Math.sin(k)*u,r-Math.cos(k)*_),t.closePath();break;case"rectRounded":c=_*.516,l=_-c,o=Math.cos(k+Rn)*l,f=Math.cos(k+Rn)*(s?s/2-c:l),a=Math.sin(k+Rn)*l,p=Math.sin(k+Rn)*(s?s/2-c:l),t.arc(n-f,r-a,c,k-ut,k-Xt),t.arc(n+p,r-o,c,k-Xt,k),t.arc(n+f,r+a,c,k,k+Xt),t.arc(n-p,r+o,c,k+Xt,k+ut),t.closePath();break;case"rect":if(!v){l=Math.SQRT1_2*_,u=s?s/2:l,t.rect(n-u,r-l,2*u,2*l);break}k+=Rn;case"rectRot":f=Math.cos(k)*(s?s/2:_),o=Math.cos(k)*_,a=Math.sin(k)*_,p=Math.sin(k)*(s?s/2:_),t.moveTo(n-f,r-a),t.lineTo(n+p,r-o),t.lineTo(n+f,r+a),t.lineTo(n-p,r+o),t.closePath();break;case"crossRot":k+=Rn;case"cross":f=Math.cos(k)*(s?s/2:_),o=Math.cos(k)*_,a=Math.sin(k)*_,p=Math.sin(k)*(s?s/2:_),t.moveTo(n-f,r-a),t.lineTo(n+f,r+a),t.moveTo(n+p,r-o),t.lineTo(n-p,r+o);break;case"star":f=Math.cos(k)*(s?s/2:_),o=Math.cos(k)*_,a=Math.sin(k)*_,p=Math.sin(k)*(s?s/2:_),t.moveTo(n-f,r-a),t.lineTo(n+f,r+a),t.moveTo(n+p,r-o),t.lineTo(n-p,r+o),k+=Rn,f=Math.cos(k)*(s?s/2:_),o=Math.cos(k)*_,a=Math.sin(k)*_,p=Math.sin(k)*(s?s/2:_),t.moveTo(n-f,r-a),t.lineTo(n+f,r+a),t.moveTo(n+p,r-o),t.lineTo(n-p,r+o);break;case"line":o=s?s/2:Math.cos(k)*_,a=Math.sin(k)*_,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(k)*(s?s/2:_),r+Math.sin(k)*_);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Vo(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function ea(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function ta(t){t.restore()}function cC(t,e,n,r,s){if(!e)return t.lineTo(n.x,n.y);if(s==="middle"){const i=(e.x+n.x)/2;t.lineTo(i,e.y),t.lineTo(i,n.y)}else s==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function uC(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function dC(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),wt(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function fC(t,e,n,r,s){if(s.strikethrough||s.underline){const i=t.measureText(r),o=e-i.actualBoundingBoxLeft,a=e+i.actualBoundingBoxRight,l=n-i.actualBoundingBoxAscent,c=n+i.actualBoundingBoxDescent,u=s.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function hC(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Ho(t,e,n,r,s,i={}){const o=Ct(e)?e:[e],a=i.strokeWidth>0&&i.strokeColor!=="";let l,c;for(t.save(),t.font=s.string,dC(t,i),l=0;l<o.length;++l)c=o[l],i.backdrop&&hC(t,i.backdrop),a&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),wt(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(c,n,r,i.maxWidth)),t.fillText(c,n,r,i.maxWidth),fC(t,n,r,c,i),r+=Number(s.lineHeight);t.restore()}function $l(t,e){const{x:n,y:r,w:s,h:i,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*ut,ut,!0),t.lineTo(n,r+i-o.bottomLeft),t.arc(n+o.bottomLeft,r+i-o.bottomLeft,o.bottomLeft,ut,Xt,!0),t.lineTo(n+s-o.bottomRight,r+i),t.arc(n+s-o.bottomRight,r+i-o.bottomRight,o.bottomRight,Xt,0,!0),t.lineTo(n+s,r+o.topRight),t.arc(n+s-o.topRight,r+o.topRight,o.topRight,0,-Xt,!0),t.lineTo(n+o.topLeft,r)}const pC=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,gC=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function mC(t,e){const n=(""+t).match(pC);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const yC=t=>+t||0;function wv(t,e){const n={},r=Je(e),s=r?Object.keys(e):e,i=Je(t)?r?o=>Qe(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of s)n[o]=yC(i(o));return n}function vC(t){return wv(t,{top:"y",right:"x",bottom:"y",left:"x"})}function xi(t){return wv(t,["topLeft","topRight","bottomLeft","bottomRight"])}function an(t){const e=vC(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Lt(t,e){t=t||{},e=e||Ot.font;let n=Qe(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=Qe(t.style,e.style);r&&!(""+r).match(gC)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const s={family:Qe(t.family,e.family),lineHeight:mC(Qe(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:Qe(t.weight,e.weight),string:""};return s.string=lC(s),s}function qa(t,e,n,r){let s,i,o;for(s=0,i=t.length;s<i;++s)if(o=t[s],o!==void 0&&o!==void 0)return o}function bC(t,e,n){const{min:r,max:s}=t,i=fv(e,(s-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(i)),max:o(s,i)}}function Ws(t,e){return Object.assign(Object.create(t),e)}function sf(t,e=[""],n,r,s=()=>t[0]){const i=n||t;typeof r>"u"&&(r=Sv("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:r,_getTarget:s,override:a=>sf([a,...t],e,i,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return kv(a,l,()=>AC(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return Ep(a).includes(l)},ownKeys(a){return Ep(a)},set(a,l,c){const u=a._storage||(a._storage=s());return a[l]=u[l]=c,delete a._keys,!0}})}function Mi(t,e,n,r){const s={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:xv(t,r),setContext:i=>Mi(t,i,n,r),override:i=>Mi(t.override(i),e,n,r)};return new Proxy(s,{deleteProperty(i,o){return delete i[o],delete t[o],!0},get(i,o,a){return kv(i,o,()=>wC(i,o,a))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(i,o,a){return t[o]=a,delete i[o],!0}})}function xv(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:n,indexable:r,isScriptable:yn(n)?n:()=>n,isIndexable:yn(r)?r:()=>r}}const _C=(t,e)=>t?t+Jd(e):e,of=(t,e)=>Je(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function kv(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function wC(t,e,n){const{_proxy:r,_context:s,_subProxy:i,_descriptors:o}=t;let a=r[e];return yn(a)&&o.isScriptable(e)&&(a=xC(e,a,t,n)),Ct(a)&&a.length&&(a=kC(e,a,t,o.isIndexable)),of(e,a)&&(a=Mi(a,s,i&&i[e],o)),a}function xC(t,e,n,r){const{_proxy:s,_context:i,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(i,o||r);return a.delete(t),of(t,l)&&(l=af(s._scopes,s,t,l)),l}function kC(t,e,n,r){const{_proxy:s,_context:i,_subProxy:o,_descriptors:a}=n;if(typeof i.index<"u"&&r(t))return e[i.index%e.length];if(Je(e[0])){const l=e,c=s._scopes.filter(u=>u!==l);e=[];for(const u of l){const f=af(c,s,t,u);e.push(Mi(f,i,o&&o[t],a))}}return e}function Cv(t,e,n){return yn(t)?t(e,n):t}const CC=(t,e)=>t===!0?e:typeof t=="string"?Wo(e,t):void 0;function SC(t,e,n,r,s){for(const i of e){const o=CC(n,i);if(o){t.add(o);const a=Cv(o._fallback,n,s);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function af(t,e,n,r){const s=e._rootScopes,i=Cv(e._fallback,n,r),o=[...t,...s],a=new Set;a.add(r);let l=Ap(a,o,n,i||n,r);return l===null||typeof i<"u"&&i!==n&&(l=Ap(a,o,i,l,r),l===null)?!1:sf(Array.from(a),[""],s,i,()=>PC(e,n,r))}function Ap(t,e,n,r,s){for(;n;)n=SC(t,e,n,r,s);return n}function PC(t,e,n){const r=t._getTarget();e in r||(r[e]={});const s=r[e];return Ct(s)&&Je(n)?n:s||{}}function AC(t,e,n,r){let s;for(const i of e)if(s=Sv(_C(i,t),n),typeof s<"u")return of(t,s)?af(n,r,t,s):s}function Sv(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function Ep(t){let e=t._keys;return e||(e=t._keys=EC(t._scopes)),e}function EC(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(s=>!s.startsWith("_")))e.add(r);return Array.from(e)}const IC=Number.EPSILON||1e-14,Ti=(t,e)=>e<t.length&&!t[e].skip&&t[e],Pv=t=>t==="x"?"y":"x";function OC(t,e,n,r){const s=t.skip?e:t,i=e,o=n.skip?e:n,a=Oi(i,s),l=Oi(o,i);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const f=r*c,p=r*u;return{previous:{x:i.x-f*(o.x-s.x),y:i.y-f*(o.y-s.y)},next:{x:i.x+p*(o.x-s.x),y:i.y+p*(o.y-s.y)}}}function MC(t,e,n){const r=t.length;let s,i,o,a,l,c=Ti(t,0);for(let u=0;u<r-1;++u)if(l=c,c=Ti(t,u+1),!(!l||!c)){if(Io(e[u],0,IC)){n[u]=n[u+1]=0;continue}s=n[u]/e[u],i=n[u+1]/e[u],a=Math.pow(s,2)+Math.pow(i,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=s*o*e[u],n[u+1]=i*o*e[u])}}function TC(t,e,n="x"){const r=Pv(n),s=t.length;let i,o,a,l=Ti(t,0);for(let c=0;c<s;++c){if(o=a,a=l,l=Ti(t,c+1),!a)continue;const u=a[n],f=a[r];o&&(i=(u-o[n])/3,a[`cp1${n}`]=u-i,a[`cp1${r}`]=f-i*e[c]),l&&(i=(l[n]-u)/3,a[`cp2${n}`]=u+i,a[`cp2${r}`]=f+i*e[c])}}function DC(t,e="x"){const n=Pv(e),r=t.length,s=Array(r).fill(0),i=Array(r);let o,a,l,c=Ti(t,0);for(o=0;o<r;++o)if(a=l,l=c,c=Ti(t,o+1),!!l){if(c){const u=c[e]-l[e];s[o]=u!==0?(c[n]-l[n])/u:0}i[o]=a?c?Ii(s[o-1])!==Ii(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}MC(t,s,i),TC(t,i,e)}function Wa(t,e,n){return Math.max(Math.min(t,n),e)}function RC(t,e){let n,r,s,i,o,a=Vo(t[0],e);for(n=0,r=t.length;n<r;++n)o=i,i=a,a=n<r-1&&Vo(t[n+1],e),i&&(s=t[n],o&&(s.cp1x=Wa(s.cp1x,e.left,e.right),s.cp1y=Wa(s.cp1y,e.top,e.bottom)),a&&(s.cp2x=Wa(s.cp2x,e.left,e.right),s.cp2y=Wa(s.cp2y,e.top,e.bottom)))}function FC(t,e,n,r,s){let i,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")DC(t,s);else{let c=r?t[t.length-1]:t[0];for(i=0,o=t.length;i<o;++i)a=t[i],l=OC(c,a,t[Math.min(i+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&RC(t,n)}function lf(){return typeof window<"u"&&typeof document<"u"}function cf(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Ll(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const ac=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function $C(t,e){return ac(t).getPropertyValue(e)}const LC=["top","right","bottom","left"];function js(t,e,n){const r={};n=n?"-"+n:"";for(let s=0;s<4;s++){const i=LC[s];r[i]=parseFloat(t[e+"-"+i+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const BC=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function jC(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:s,offsetY:i}=r;let o=!1,a,l;if(BC(s,i,t.target))a=s,l=i;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Os(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,s=ac(n),i=s.boxSizing==="border-box",o=js(s,"padding"),a=js(s,"border","width"),{x:l,y:c,box:u}=jC(t,n),f=o.left+(u&&a.left),p=o.top+(u&&a.top);let{width:m,height:v}=e;return i&&(m-=o.width+a.width,v-=o.height+a.height),{x:Math.round((l-f)/m*n.width/r),y:Math.round((c-p)/v*n.height/r)}}function NC(t,e,n){let r,s;if(e===void 0||n===void 0){const i=t&&cf(t);if(!i)e=t.clientWidth,n=t.clientHeight;else{const o=i.getBoundingClientRect(),a=ac(i),l=js(a,"border","width"),c=js(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,r=Ll(a.maxWidth,i,"clientWidth"),s=Ll(a.maxHeight,i,"clientHeight")}}return{width:e,height:n,maxWidth:r||Dl,maxHeight:s||Dl}}const Va=t=>Math.round(t*10)/10;function zC(t,e,n,r){const s=ac(t),i=js(s,"margin"),o=Ll(s.maxWidth,t,"clientWidth")||Dl,a=Ll(s.maxHeight,t,"clientHeight")||Dl,l=NC(t,e,n);let{width:c,height:u}=l;if(s.boxSizing==="content-box"){const p=js(s,"border","width"),m=js(s,"padding");c-=m.width+p.width,u-=m.height+p.height}return c=Math.max(0,c-i.width),u=Math.max(0,r?c/r:u-i.height),c=Va(Math.min(c,o,l.maxWidth)),u=Va(Math.min(u,a,l.maxHeight)),c&&!u&&(u=Va(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&u>l.height&&(u=l.height,c=Va(Math.floor(u*r))),{width:c,height:u}}function Ip(t,e,n){const r=e||1,s=Math.floor(t.height*r),i=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==s||o.width!==i?(t.currentDevicePixelRatio=r,o.height=s,o.width=i,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const UC=(function(){let t=!1;try{const e={get passive(){return t=!0,!1}};lf()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t})();function Op(t,e){const n=$C(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Ms(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function qC(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function WC(t,e,n,r){const s={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},o=Ms(t,s,n),a=Ms(s,i,n),l=Ms(i,e,n),c=Ms(o,a,n),u=Ms(a,l,n);return Ms(c,u,n)}const VC=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},HC=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function ki(t,e,n){return t?VC(e,n):HC()}function Av(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function Ev(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Iv(t){return t==="angle"?{between:Fl,compare:qk,normalize:sr}:{between:hi,compare:(e,n)=>e-n,normalize:e=>e}}function Mp({start:t,end:e,count:n,loop:r,style:s}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:s}}function KC(t,e,n){const{property:r,start:s,end:i}=n,{between:o,normalize:a}=Iv(r),l=e.length;let{start:c,end:u,loop:f}=t,p,m;if(f){for(c+=l,u+=l,p=0,m=l;p<m&&o(a(e[c%l][r]),s,i);++p)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:f,style:t.style}}function Ov(t,e,n){if(!n)return[t];const{property:r,start:s,end:i}=n,o=e.length,{compare:a,between:l,normalize:c}=Iv(r),{start:u,end:f,loop:p,style:m}=KC(t,e,n),v=[];let _=!1,k=null,C,A,P;const S=()=>l(s,P,C)&&a(s,P)!==0,M=()=>a(i,C)===0||l(i,P,C),T=()=>_||S(),X=()=>!_||M();for(let V=u,E=u;V<=f;++V)A=e[V%o],!A.skip&&(C=c(A[r]),C!==P&&(_=l(C,s,i),k===null&&T()&&(k=a(C,s)===0?V:E),k!==null&&X()&&(v.push(Mp({start:k,end:V,loop:p,count:o,style:m})),k=null),E=V,P=C));return k!==null&&v.push(Mp({start:k,end:f,loop:p,count:o,style:m})),v}function Mv(t,e){const n=[],r=t.segments;for(let s=0;s<r.length;s++){const i=Ov(r[s],t.points,e);i.length&&n.push(...i)}return n}function YC(t,e,n,r){let s=0,i=e-1;if(n&&!r)for(;s<e&&!t[s].skip;)s++;for(;s<e&&t[s].skip;)s++;for(s%=e,n&&(i+=s);i>s&&t[i%e].skip;)i--;return i%=e,{start:s,end:i}}function GC(t,e,n,r){const s=t.length,i=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%s];c.skip||c.stop?a.skip||(r=!1,i.push({start:e%s,end:(l-1)%s,loop:r}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&i.push({start:e%s,end:o%s,loop:r}),i}function XC(t,e){const n=t.points,r=t.options.spanGaps,s=n.length;if(!s)return[];const i=!!t._loop,{start:o,end:a}=YC(n,s,i,r);if(r===!0)return Tp(t,[{start:o,end:a,loop:i}],n,e);const l=a<o?a+s:a,c=!!t._fullLoop&&o===0&&a===s-1;return Tp(t,GC(n,o,l,c),n,e)}function Tp(t,e,n,r){return!r||!r.setContext||!n?e:QC(t,e,n,r)}function QC(t,e,n,r){const s=t._chart.getContext(),i=Dp(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let u=i,f=e[0].start,p=f;function m(v,_,k,C){const A=a?-1:1;if(v!==_){for(v+=l;n[v%l].skip;)v-=A;for(;n[_%l].skip;)_+=A;v%l!==_%l&&(c.push({start:v%l,end:_%l,loop:k,style:C}),u=C,f=_%l)}}for(const v of e){f=a?f:v.start;let _=n[f%l],k;for(p=f+1;p<=v.end;p++){const C=n[p%l];k=Dp(r.setContext(Ws(s,{type:"segment",p0:_,p1:C,p0DataIndex:(p-1)%l,p1DataIndex:p%l,datasetIndex:o}))),JC(k,u)&&m(f,p-1,v.loop,u),_=C,u=k}f<p-1&&m(f,p-1,v.loop,u)}return c}function Dp(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function JC(t,e){if(!e)return!1;const n=[],r=function(s,i){return nf(i)?(n.includes(i)||n.push(i),n.indexOf(i)):i};return JSON.stringify(t,r)!==JSON.stringify(e,r)}function Ha(t,e,n){return t.options.clip?t[n]:e[n]}function ZC(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:Ha(n,e,"left"),right:Ha(n,e,"right"),top:Ha(r,e,"top"),bottom:Ha(r,e,"bottom")}:e}function Tv(t,e){const n=e._clip;if(n.disabled)return!1;const r=ZC(e,t.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class eS{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,s){const i=n.listeners[s],o=n.duration;i.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=yv.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,s)=>{if(!r.running||!r.items.length)return;const i=r.items;let o=i.length-1,a=!1,l;for(;o>=0;--o)l=i[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(i[o]=i[i.length-1],i.pop());a&&(s.draw(),this._notify(s,r,e,"progress")),i.length||(r.running=!1,this._notify(s,r,e,"complete"),r.initial=!1),n+=i.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,s)=>Math.max(r,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let s=r.length-1;for(;s>=0;--s)r[s].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var wr=new eS;const Rp="transparent",tS={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=kp(t||Rp),s=r.valid&&kp(e||Rp);return s&&s.valid?s.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class nS{constructor(e,n,r,s){const i=n[r];s=qa([e.to,s,i,e.from]);const o=qa([e.from,i,s]);this._active=!0,this._fn=e.fn||tS[e.type||typeof o],this._easing=Oo[e.easing]||Oo.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const s=this._target[this._prop],i=r-this._start,o=this._duration-i;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=qa([e.to,n,s,e.from]),this._from=qa([e.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,s=this._prop,i=this._from,o=this._loop,a=this._to;let l;if(this._active=i!==a&&(o||n<r),!this._active){this._target[s]=a,this._notify(!0);return}if(n<0){this._target[s]=i;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(i,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let s=0;s<r.length;s++)r[s][n]()}}class uf{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Je(e))return;const n=Object.keys(Ot.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const i=e[s];if(!Je(i))return;const o={};for(const a of n)o[a]=i[a];(Ct(i.properties)&&i.properties||[s]).forEach(a=>{(a===s||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,s=sS(e,r);if(!s)return[];const i=this._createAnimations(s,r);return r.$shared&&rS(e.options.$animations,r).then(()=>{e.options=r},()=>{}),i}_createAnimations(e,n){const r=this._properties,s=[],i=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(e,n));continue}const u=n[c];let f=i[c];const p=r.get(c);if(f)if(p&&f.active()){f.update(p,u,a);continue}else f.cancel();if(!p||!p.duration){e[c]=u;continue}i[c]=f=new nS(p,e,c,u),s.push(f)}return s}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return wr.add(this._chart,r),!0}}function rS(t,e){const n=[],r=Object.keys(e);for(let s=0;s<r.length;s++){const i=t[r[s]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function sS(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function Fp(t,e){const n=t&&t.options||{},r=n.reverse,s=n.min===void 0?e:0,i=n.max===void 0?e:0;return{start:r?i:s,end:r?s:i}}function iS(t,e,n){if(n===!1)return!1;const r=Fp(t,n),s=Fp(e,n);return{top:s.end,right:r.end,bottom:s.start,left:r.start}}function oS(t){let e,n,r,s;return Je(t)?(e=t.top,n=t.right,r=t.bottom,s=t.left):e=n=r=s=t,{top:e,right:n,bottom:r,left:s,disabled:t===!1}}function Dv(t,e){const n=[],r=t._getSortedDatasetMetas(e);let s,i;for(s=0,i=r.length;s<i;++s)n.push(r[s].index);return n}function $p(t,e,n,r={}){const s=t.keys,i=r.mode==="single";let o,a,l,c;if(e===null)return;let u=!1;for(o=0,a=s.length;o<a;++o){if(l=+s[o],l===n){if(u=!0,r.all)continue;break}c=t.values[l],Ht(c)&&(i||e===0||Ii(e)===Ii(c))&&(e+=c)}return!u&&!r.all?0:e}function aS(t,e){const{iScale:n,vScale:r}=e,s=n.axis==="x"?"x":"y",i=r.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[s]:u,[i]:t[u]};return a}function pu(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function lS(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function cS(t){const{min:e,max:n,minDefined:r,maxDefined:s}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function uS(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function Lp(t,e,n,r){for(const s of e.getMatchingVisibleMetas(r).reverse()){const i=t[s.index];if(n&&i>0||!n&&i<0)return s.index}return null}function Bp(t,e){const{chart:n,_cachedMeta:r}=t,s=n._stacks||(n._stacks={}),{iScale:i,vScale:o,index:a}=r,l=i.axis,c=o.axis,u=lS(i,o,r),f=e.length;let p;for(let m=0;m<f;++m){const v=e[m],{[l]:_,[c]:k}=v,C=v._stacks||(v._stacks={});p=C[c]=uS(s,u,_),p[a]=k,p._top=Lp(p,o,!0,r.type),p._bottom=Lp(p,o,!1,r.type);const A=p._visualValues||(p._visualValues={});A[a]=k}}function gu(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function dS(t,e){return Ws(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function fS(t,e,n){return Ws(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Zi(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const s of e){const i=s._stacks;if(!i||i[r]===void 0||i[r][n]===void 0)return;delete i[r][n],i[r]._visualValues!==void 0&&i[r]._visualValues[n]!==void 0&&delete i[r]._visualValues[n]}}}const mu=t=>t==="reset"||t==="none",jp=(t,e)=>e?t:Object.assign({},t),hS=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:Dv(n,!0),values:null};class df{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=pu(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Zi(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),s=(f,p,m,v)=>f==="x"?p:f==="r"?v:m,i=n.xAxisID=Qe(r.xAxisID,gu(e,"x")),o=n.yAxisID=Qe(r.yAxisID,gu(e,"y")),a=n.rAxisID=Qe(r.rAxisID,gu(e,"r")),l=n.indexAxis,c=n.iAxisID=s(l,i,o,a),u=n.vAxisID=s(l,o,i,a);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&_p(this._data,this),e._stacked&&Zi(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(Je(n)){const s=this._cachedMeta;this._data=aS(n,s)}else if(r!==n){if(r){_p(r,this);const s=this._cachedMeta;Zi(s),s._parsed=[]}n&&Object.isExtensible(n)&&Kk(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let s=!1;this._dataCheck();const i=n._stacked;n._stacked=pu(n.vScale,n),n.stack!==r.stack&&(s=!0,Zi(n),n.stack=r.stack),this._resyncElements(e),(s||i!==n._stacked)&&(Bp(this,n._parsed),n._stacked=pu(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:s}=this,{iScale:i,_stacked:o}=r,a=i.axis;let l=e===0&&n===s.length?!0:r._sorted,c=e>0&&r._parsed[e-1],u,f,p;if(this._parsing===!1)r._parsed=s,r._sorted=!0,p=s;else{Ct(s[e])?p=this.parseArrayData(r,s,e,n):Je(s[e])?p=this.parseObjectData(r,s,e,n):p=this.parsePrimitiveData(r,s,e,n);const m=()=>f[a]===null||c&&f[a]<c[a];for(u=0;u<n;++u)r._parsed[u+e]=f=p[u],l&&(m()&&(l=!1),c=f);r._sorted=l}o&&Bp(this,p)}parsePrimitiveData(e,n,r,s){const{iScale:i,vScale:o}=e,a=i.axis,l=o.axis,c=i.getLabels(),u=i===o,f=new Array(s);let p,m,v;for(p=0,m=s;p<m;++p)v=p+r,f[p]={[a]:u||i.parse(c[v],v),[l]:o.parse(n[v],v)};return f}parseArrayData(e,n,r,s){const{xScale:i,yScale:o}=e,a=new Array(s);let l,c,u,f;for(l=0,c=s;l<c;++l)u=l+r,f=n[u],a[l]={x:i.parse(f[0],u),y:o.parse(f[1],u)};return a}parseObjectData(e,n,r,s){const{xScale:i,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(s);let u,f,p,m;for(u=0,f=s;u<f;++u)p=u+r,m=n[p],c[u]={x:i.parse(Wo(m,a),p),y:o.parse(Wo(m,l),p)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const s=this.chart,i=this._cachedMeta,o=n[e.axis],a={keys:Dv(s,!0),values:n._stacks[e.axis]._visualValues};return $p(a,o,i.index,{mode:r})}updateRangeFromParsed(e,n,r,s){const i=r[n.axis];let o=i===null?NaN:i;const a=s&&r._stacks[n.axis];s&&a&&(s.values=a,o=$p(s,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,s=r._parsed,i=r._sorted&&e===r.iScale,o=s.length,a=this._getOtherScale(e),l=hS(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:f}=cS(a);let p,m;function v(){m=s[p];const _=m[a.axis];return!Ht(m[e.axis])||u>_||f<_}for(p=0;p<o&&!(!v()&&(this.updateRangeFromParsed(c,e,m,l),i));++p);if(i){for(p=o-1;p>=0;--p)if(!v()){this.updateRangeFromParsed(c,e,m,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let s,i,o;for(s=0,i=n.length;s<i;++s)o=n[s][e.axis],Ht(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,s=n.vScale,i=this.getParsed(e);return{label:r?""+r.getLabelForValue(i[r.axis]):"",value:s?""+s.getLabelForValue(i[s.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=oS(Qe(this.options.clip,iS(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,s=r.data||[],i=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||s.length-a,c=this.options.drawActiveElementsOnTop;let u;for(r.dataset&&r.dataset.draw(e,i,a,l),u=a;u<a+l;++u){const f=s[u];f.hidden||(f.active&&c?o.push(f):f.draw(e,i))}for(u=0;u<o.length;++u)o[u].draw(e,i)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const s=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];i=o.$context||(o.$context=fS(this.getContext(),e,o)),i.parsed=this.getParsed(e),i.raw=s.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=dS(this.chart.getContext(),this.index)),i.dataset=s,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=r,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const s=n==="active",i=this._cachedDataOpts,o=e+"-"+n,a=i[o],l=this.enableOptionSharing&&In(r);if(a)return jp(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),f=s?[`${e}Hover`,"hover",e,""]:[e,""],p=c.getOptionScopes(this.getDataset(),u),m=Object.keys(Ot.elements[e]),v=()=>this.getContext(r,s,n),_=c.resolveNamedOptions(p,m,v,f);return _.$shared&&(_.$shared=l,i[o]=Object.freeze(jp(_,l))),_}_resolveAnimations(e,n,r){const s=this.chart,i=this._cachedDataOpts,o=`animation-${n}`,a=i[o];if(a)return a;let l;if(s.options.animation!==!1){const u=this.chart.config,f=u.datasetAnimationScopeKeys(this._type,n),p=u.getOptionScopes(this.getDataset(),f);l=u.createResolver(p,this.getContext(e,r,n))}const c=new uf(s,l&&l.animations);return l&&l._cacheable&&(i[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||mu(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),s=this._sharedOptions,i=this.getSharedOptions(r),o=this.includeOptions(n,i)||i!==s;return this.updateSharedOptions(i,n,r),{sharedOptions:i,includeOptions:o}}updateElement(e,n,r,s){mu(s)?Object.assign(e,r):this._resolveAnimations(n,s).update(e,r)}updateSharedOptions(e,n,r){e&&!mu(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,s){e.active=s;const i=this.getStyle(n,s);this._resolveAnimations(n,r,s).update(e,{options:!s&&this.getSharedOptions(i)||i})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const s=r.length,i=n.length,o=Math.min(i,s);o&&this.parse(0,o),i>s?this._insertElements(s,i-s,e):i<s&&this._removeElements(i,s-i)}_insertElements(e,n,r=!0){const s=this._cachedMeta,i=s.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(i),a=e;a<o;++a)i[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(e,n),r&&this.updateElements(i,e,n,"reset")}updateElements(e,n,r,s){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const s=r._parsed.splice(e,n);r._stacked&&Zi(r,s)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,s]=e;this[n](r,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function pS(t,e,n){let r=1,s=1,i=0,o=0;if(e<qt){const a=t,l=a+e,c=Math.cos(a),u=Math.sin(a),f=Math.cos(l),p=Math.sin(l),m=(P,S,M)=>Fl(P,a,l,!0)?1:Math.max(S,S*n,M,M*n),v=(P,S,M)=>Fl(P,a,l,!0)?-1:Math.min(S,S*n,M,M*n),_=m(0,c,f),k=m(Xt,u,p),C=v(ut,c,f),A=v(ut+Xt,u,p);r=(_-C)/2,s=(k-A)/2,i=-(_+C)/2,o=-(k+A)/2}return{ratioX:r,ratioY:s,offsetX:i,offsetY:o}}class gS extends df{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:s}}=e.legend.options;return n.labels.map((i,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:i,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}}};constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const r=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=r;else{let i=l=>+r[l];if(Je(r[e])){const{key:l="value"}=this._parsing;i=c=>+Wo(r[c],l)}let o,a;for(o=e,a=e+n;o<a;++o)s._parsed[o]=i(o)}}_getRotation(){return Wt(this.options.rotation-90)}_getCircumference(){return Wt(this.options.circumference)}_getRotationExtents(){let e=qt,n=-qt;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const s=this.chart.getDatasetMeta(r).controller,i=s._getRotation(),o=s._getCircumference();e=Math.min(e,i),n=Math.max(n,i+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:r}=n,s=this._cachedMeta,i=s.data,o=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,a=Math.max((Math.min(r.width,r.height)-o)/2,0),l=Math.min(Tk(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:f}=this._getRotationExtents(),{ratioX:p,ratioY:m,offsetX:v,offsetY:_}=pS(f,u,l),k=(r.width-o)/p,C=(r.height-o)/m,A=Math.max(Math.min(k,C)/2,0),P=fv(this.options.radius,A),S=Math.max(P*l,0),M=(P-S)/this._getVisibleDatasetWeightTotal();this.offsetX=v*P,this.offsetY=_*P,s.total=this.calculateTotal(),this.outerRadius=P-M*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-M*c,0),this.updateElements(i,0,i.length,e)}_circumference(e,n){const r=this.options,s=this._cachedMeta,i=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||s._parsed[e]===null||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*i/qt)}updateElements(e,n,r,s){const i=s==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,u=(a.left+a.right)/2,f=(a.top+a.bottom)/2,p=i&&c.animateScale,m=p?0:this.innerRadius,v=p?0:this.outerRadius,{sharedOptions:_,includeOptions:k}=this._getSharedOptions(n,s);let C=this._getRotation(),A;for(A=0;A<n;++A)C+=this._circumference(A,i);for(A=n;A<n+r;++A){const P=this._circumference(A,i),S=e[A],M={x:u+this.offsetX,y:f+this.offsetY,startAngle:C,endAngle:C+P,circumference:P,outerRadius:v,innerRadius:m};k&&(M.options=_||this.resolveDataElementOptions(A,S.active?"active":s)),C+=P,this.updateElement(S,A,M,s)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let r=0,s;for(s=0;s<n.length;s++){const i=e._parsed[s];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(s)&&!n[s].hidden&&(r+=Math.abs(i))}return r}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?qt*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,s=r.data.labels||[],i=rf(n._parsed[e],r.options.locale);return{label:s[e]||"",value:i}}getMaxBorderWidth(e){let n=0;const r=this.chart;let s,i,o,a,l;if(!e){for(s=0,i=r.data.datasets.length;s<i;++s)if(r.isDatasetVisible(s)){o=r.getDatasetMeta(s),e=o.data,a=o.controller;break}}if(!e)return 0;for(s=0,i=e.length;s<i;++s)l=a.resolveDataElementOptions(s),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let r=0,s=e.length;r<s;++r){const i=this.resolveDataElementOptions(r);n=Math.max(n,i.offset||0,i.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(e){return Math.max(Qe(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class mS extends df{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:s=[],_dataset:i}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=Qk(n,s,o);this._drawStart=a,this._drawCount=l,Jk(n)&&(a=0,l=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!i._decimated,r.points=s;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:c},e),this.updateElements(s,a,l,e)}updateElements(e,n,r,s){const i=s==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:f}=this._getSharedOptions(n,s),p=o.axis,m=a.axis,{spanGaps:v,segment:_}=this.options,k=Ns(v)?v:Number.POSITIVE_INFINITY,C=this.chart._animationsDisabled||i||s==="none",A=n+r,P=e.length;let S=n>0&&this.getParsed(n-1);for(let M=0;M<P;++M){const T=e[M],X=C?T:{};if(M<n||M>=A){X.skip=!0;continue}const V=this.getParsed(M),E=wt(V[m]),Z=X[p]=o.getPixelForValue(V[p],M),K=X[m]=i||E?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,V,l):V[m],M);X.skip=isNaN(Z)||isNaN(K)||E,X.stop=M>0&&Math.abs(V[p]-S[p])>k,_&&(X.parsed=V,X.raw=c.data[M]),f&&(X.options=u||this.resolveDataElementOptions(M,T.active?"active":s)),C||this.updateElement(T,M,X,s),S=V}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,s=e.data||[];if(!s.length)return r;const i=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,i,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}function bs(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class ff{static override(e){Object.assign(ff.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return bs()}parse(){return bs()}format(){return bs()}add(){return bs()}diff(){return bs()}startOf(){return bs()}endOf(){return bs()}}var yS={_date:ff};function vS(t,e,n,r){const{controller:s,data:i,_sorted:o}=t,a=s._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&i.length){const c=a._reversePixels?Vk:Ds;if(r){if(s._sharedOptions){const u=i[0],f=typeof u.getRange=="function"&&u.getRange(e);if(f){const p=c(i,e,n-f),m=c(i,e,n+f);return{lo:p.lo,hi:m.hi}}}}else{const u=c(i,e,n);if(l){const{vScale:f}=s._cachedMeta,{_parsed:p}=t,m=p.slice(0,u.lo+1).reverse().findIndex(_=>!wt(_[f.axis]));u.lo-=Math.max(0,m);const v=p.slice(u.hi).findIndex(_=>!wt(_[f.axis]));u.hi+=Math.max(0,v)}return u}}return{lo:0,hi:i.length-1}}function lc(t,e,n,r,s){const i=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=i.length;a<l;++a){const{index:c,data:u}=i[a],{lo:f,hi:p}=vS(i[a],e,o,s);for(let m=f;m<=p;++m){const v=u[m];v.skip||r(v,c,m)}}}function bS(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,s){const i=e?Math.abs(r.x-s.x):0,o=n?Math.abs(r.y-s.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function yu(t,e,n,r,s){const i=[];return!s&&!t.isPointInArea(e)||lc(t,n,e,function(a,l,c){!s&&!Vo(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&i.push({element:a,datasetIndex:l,index:c})},!0),i}function _S(t,e,n,r){let s=[];function i(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],r),{angle:f}=od(o,{x:e.x,y:e.y});Fl(f,c,u)&&s.push({element:o,datasetIndex:a,index:l})}return lc(t,n,e,i),s}function wS(t,e,n,r,s,i){let o=[];const a=bS(n);let l=Number.POSITIVE_INFINITY;function c(u,f,p){const m=u.inRange(e.x,e.y,s);if(r&&!m)return;const v=u.getCenterPoint(s);if(!(!!i||t.isPointInArea(v))&&!m)return;const k=a(e,v);k<l?(o=[{element:u,datasetIndex:f,index:p}],l=k):k===l&&o.push({element:u,datasetIndex:f,index:p})}return lc(t,n,e,c),o}function vu(t,e,n,r,s,i){return!i&&!t.isPointInArea(e)?[]:n==="r"&&!r?_S(t,e,n,s):wS(t,e,n,r,s,i)}function Np(t,e,n,r,s){const i=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return lc(t,n,e,(l,c,u)=>{l[o]&&l[o](e[n],s)&&(i.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,s))}),r&&!a?[]:i}var xS={modes:{index(t,e,n,r){const s=Os(e,t),i=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?yu(t,s,i,r,o):vu(t,s,i,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,f=c.data[u];f&&!f.skip&&l.push({element:f,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,r){const s=Os(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?yu(t,s,i,r,o):vu(t,s,i,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,r){const s=Os(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return yu(t,s,i,r,o)},nearest(t,e,n,r){const s=Os(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return vu(t,s,i,n.intersect,r,o)},x(t,e,n,r){const s=Os(e,t);return Np(t,s,"x",n.intersect,r)},y(t,e,n,r){const s=Os(e,t);return Np(t,s,"y",n.intersect,r)}}};const Rv=["left","top","right","bottom"];function eo(t,e){return t.filter(n=>n.pos===e)}function zp(t,e){return t.filter(n=>Rv.indexOf(n.pos)===-1&&n.box.axis===e)}function to(t,e){return t.sort((n,r)=>{const s=e?r:n,i=e?n:r;return s.weight===i.weight?s.index-i.index:s.weight-i.weight})}function kS(t){const e=[];let n,r,s,i,o,a;for(n=0,r=(t||[]).length;n<r;++n)s=t[n],{position:i,options:{stack:o,stackWeight:a=1}}=s,e.push({index:n,box:s,pos:i,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&i+o,stackWeight:a});return e}function CS(t){const e={};for(const n of t){const{stack:r,pos:s,stackWeight:i}=n;if(!r||!Rv.includes(s))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}function SS(t,e){const n=CS(t),{vBoxMaxWidth:r,hBoxMaxHeight:s}=e;let i,o,a;for(i=0,o=t.length;i<o;++i){a=t[i];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*r:l&&e.availableWidth,a.height=s):(a.width=r,a.height=u?u*s:l&&e.availableHeight)}return n}function PS(t){const e=kS(t),n=to(e.filter(c=>c.box.fullSize),!0),r=to(eo(e,"left"),!0),s=to(eo(e,"right")),i=to(eo(e,"top"),!0),o=to(eo(e,"bottom")),a=zp(e,"x"),l=zp(e,"y");return{fullSize:n,leftAndTop:r.concat(i),rightAndBottom:s.concat(l).concat(o).concat(a),chartArea:eo(e,"chartArea"),vertical:r.concat(s).concat(l),horizontal:i.concat(o).concat(a)}}function Up(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function Fv(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function AS(t,e,n,r){const{pos:s,box:i}=n,o=t.maxPadding;if(!Je(s)){n.size&&(t[s]-=n.size);const f=r[n.stack]||{size:0,count:1};f.size=Math.max(f.size,n.horizontal?i.height:i.width),n.size=f.size/f.count,t[s]+=n.size}i.getPadding&&Fv(o,i.getPadding());const a=Math.max(0,e.outerWidth-Up(o,t,"left","right")),l=Math.max(0,e.outerHeight-Up(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function ES(t){const e=t.maxPadding;function n(r){const s=Math.max(e[r]-t[r],0);return t[r]+=s,s}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function IS(t,e){const n=e.maxPadding;function r(s){const i={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{i[o]=Math.max(e[o],n[o])}),i}return r(t?["left","right"]:["top","bottom"])}function po(t,e,n,r){const s=[];let i,o,a,l,c,u;for(i=0,o=t.length,c=0;i<o;++i){a=t[i],l=a.box,l.update(a.width||e.w,a.height||e.h,IS(a.horizontal,e));const{same:f,other:p}=AS(e,n,a,r);c|=f&&s.length,u=u||p,l.fullSize||s.push(a)}return c&&po(s,e,n,r)||u}function Ka(t,e,n,r,s){t.top=n,t.left=e,t.right=e+r,t.bottom=n+s,t.width=r,t.height=s}function qp(t,e,n,r){const s=n.padding;let{x:i,y:o}=e;for(const a of t){const l=a.box,c=r[a.stack]||{placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const f=e.w*u,p=c.size||l.height;In(c.start)&&(o=c.start),l.fullSize?Ka(l,s.left,o,n.outerWidth-s.right-s.left,p):Ka(l,e.left+c.placed,o,f,p),c.start=o,c.placed+=f,o=l.bottom}else{const f=e.h*u,p=c.size||l.width;In(c.start)&&(i=c.start),l.fullSize?Ka(l,i,s.top,p,n.outerHeight-s.bottom-s.top):Ka(l,i,e.top+c.placed,p,f),c.start=i,c.placed+=f,i=l.right}}e.x=i,e.y=o}var Bn={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const s=an(t.options.layout.padding),i=Math.max(e-s.width,0),o=Math.max(n-s.height,0),a=PS(t.boxes),l=a.vertical,c=a.horizontal;pt(t.boxes,_=>{typeof _.beforeLayout=="function"&&_.beforeLayout()});const u=l.reduce((_,k)=>k.box.options&&k.box.options.display===!1?_:_+1,0)||1,f=Object.freeze({outerWidth:e,outerHeight:n,padding:s,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/u,hBoxMaxHeight:o/2}),p=Object.assign({},s);Fv(p,an(r));const m=Object.assign({maxPadding:p,w:i,h:o,x:s.left,y:s.top},s),v=SS(l.concat(c),f);po(a.fullSize,m,f,v),po(l,m,f,v),po(c,m,f,v)&&po(l,m,f,v),ES(m),qp(a.leftAndTop,m,f,v),m.x+=m.w,m.y+=m.h,qp(a.rightAndBottom,m,f,v),t.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},pt(a.chartArea,_=>{const k=_.box;Object.assign(k,t.chartArea),k.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class $v{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,s){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,s?Math.floor(n/s):r)}}isAttached(e){return!0}updateConfig(e){}}class OS extends $v{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const fl="$chartjs",MS={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Wp=t=>t===null||t==="";function TS(t,e){const n=t.style,r=t.getAttribute("height"),s=t.getAttribute("width");if(t[fl]={initial:{height:r,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Wp(s)){const i=Op(t,"width");i!==void 0&&(t.width=i)}if(Wp(r))if(t.style.height==="")t.height=t.width/(e||2);else{const i=Op(t,"height");i!==void 0&&(t.height=i)}return t}const Lv=UC?{passive:!0}:!1;function DS(t,e,n){t&&t.addEventListener(e,n,Lv)}function RS(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,Lv)}function FS(t,e){const n=MS[t.type]||t.type,{x:r,y:s}=Os(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:s!==void 0?s:null}}function Bl(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function $S(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||Bl(a.addedNodes,r),o=o&&!Bl(a.removedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function LS(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||Bl(a.removedNodes,r),o=o&&!Bl(a.addedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const Ko=new Map;let Vp=0;function Bv(){const t=window.devicePixelRatio;t!==Vp&&(Vp=t,Ko.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function BS(t,e){Ko.size||window.addEventListener("resize",Bv),Ko.set(t,e)}function jS(t){Ko.delete(t),Ko.size||window.removeEventListener("resize",Bv)}function NS(t,e,n){const r=t.canvas,s=r&&cf(r);if(!s)return;const i=vv((a,l)=>{const c=s.clientWidth;n(a,l),c<s.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||i(c,u)});return o.observe(s),BS(t,i),o}function bu(t,e,n){n&&n.disconnect(),e==="resize"&&jS(t)}function zS(t,e,n){const r=t.canvas,s=vv(i=>{t.ctx!==null&&n(FS(i,t))},t);return DS(r,e,s),s}class US extends $v{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(TS(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[fl])return!1;const r=n[fl].initial;["height","width"].forEach(i=>{const o=r[i];wt(o)?n.removeAttribute(i):n.setAttribute(i,o)});const s=r.style||{};return Object.keys(s).forEach(i=>{n.style[i]=s[i]}),n.width=n.width,delete n[fl],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const s=e.$proxies||(e.$proxies={}),o={attach:$S,detach:LS,resize:NS}[n]||zS;s[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),s=r[n];if(!s)return;({attach:bu,detach:bu,resize:bu}[n]||RS)(e,n,s),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,s){return zC(e,n,r,s)}isAttached(e){const n=e&&cf(e);return!!(n&&n.isConnected)}}function qS(t){return!lf()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?OS:US}let bn=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return Ns(this.x)&&Ns(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const s={};return e.forEach(i=>{s[i]=r[i]&&r[i].active()?r[i]._to:this[i]}),s}};function WS(t,e){const n=t.options.ticks,r=VS(t),s=Math.min(n.maxTicksLimit||r,r),i=n.major.enabled?KS(e):[],o=i.length,a=i[0],l=i[o-1],c=[];if(o>s)return YS(e,c,i,o/s),c;const u=HS(i,e,s);if(o>0){let f,p;const m=o>1?Math.round((l-a)/(o-1)):null;for(Ya(e,c,u,wt(m)?0:a-m,a),f=0,p=o-1;f<p;f++)Ya(e,c,u,i[f],i[f+1]);return Ya(e,c,u,l,wt(m)?e.length:l+m),c}return Ya(e,c,u),c}function VS(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),s=t._maxLength/n;return Math.floor(Math.min(r,s))}function HS(t,e,n){const r=GS(t),s=e.length/n;if(!r)return Math.max(s,1);const i=jk(r);for(let o=0,a=i.length-1;o<a;o++){const l=i[o];if(l>s)return l}return Math.max(s,1)}function KS(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function YS(t,e,n,r){let s=0,i=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===i&&(e.push(t[o]),s++,i=n[s*r])}function Ya(t,e,n,r,s){const i=Qe(r,0),o=Math.min(Qe(s,t.length),t.length);let a=0,l,c,u;for(n=Math.ceil(n),s&&(l=s-r,n=l/Math.floor(l/n)),u=i;u<0;)a++,u=Math.round(i+a*n);for(c=Math.max(i,0);c<o;c++)c===u&&(e.push(t[c]),a++,u=Math.round(i+a*n))}function GS(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const XS=t=>t==="left"?"right":t==="right"?"left":t,Hp=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,Kp=(t,e)=>Math.min(e||t,t);function Yp(t,e){const n=[],r=t.length/e,s=t.length;let i=0;for(;i<s;i+=r)n.push(t[Math.floor(i)]);return n}function QS(t,e,n){const r=t.ticks.length,s=Math.min(e,r-1),i=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(s),c;if(!(n&&(r===1?c=Math.max(l-i,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(s-1))/2,l+=s<e?c:-c,l<i-a||l>o+a)))return l}function JS(t,e){pt(t,n=>{const r=n.gc,s=r.length/2;let i;if(s>e){for(i=0;i<s;++i)delete n.data[r[i]];r.splice(0,s)}})}function no(t){return t.drawTicks?t.tickLength:0}function Gp(t,e){if(!t.display)return 0;const n=Lt(t.font,e),r=an(t.padding);return(Ct(t.text)?t.text.length:1)*n.lineHeight+r.height}function ZS(t,e){return Ws(t,{scale:e,type:"scale"})}function eP(t,e,n){return Ws(t,{tick:n,index:e,type:"tick"})}function tP(t,e,n){let r=tf(t);return(n&&e!=="right"||!n&&e==="right")&&(r=XS(r)),r}function nP(t,e,n,r){const{top:s,left:i,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let f=0,p,m,v;const _=o-s,k=a-i;if(t.isHorizontal()){if(m=tn(r,i,a),Je(n)){const C=Object.keys(n)[0],A=n[C];v=u[C].getPixelForValue(A)+_-e}else n==="center"?v=(c.bottom+c.top)/2+_-e:v=Hp(t,n,e);p=a-i}else{if(Je(n)){const C=Object.keys(n)[0],A=n[C];m=u[C].getPixelForValue(A)-k+e}else n==="center"?m=(c.left+c.right)/2-k+e:m=Hp(t,n,e);v=tn(r,o,s),f=n==="left"?-Xt:Xt}return{titleX:m,titleY:v,maxWidth:p,rotation:f}}class $i extends bn{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:s}=this;return e=Zn(e,Number.POSITIVE_INFINITY),n=Zn(n,Number.NEGATIVE_INFINITY),r=Zn(r,Number.POSITIVE_INFINITY),s=Zn(s,Number.NEGATIVE_INFINITY),{min:Zn(e,r),max:Zn(n,s),minDefined:Ht(e),maxDefined:Ht(n)}}getMinMax(e){let{min:n,max:r,minDefined:s,maxDefined:i}=this.getUserBounds(),o;if(s&&i)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),s||(n=Math.min(n,o.min)),i||(r=Math.max(r,o.max));return n=i&&n>r?r:n,r=s&&n>r?n:r,{min:Zn(n,Zn(r,n)),max:Zn(r,Zn(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){gt(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:s,grace:i,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=bC(this,i,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Yp(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=WS(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){gt(this.options.afterUpdate,[this])}beforeSetDimensions(){gt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){gt(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),gt(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){gt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,s,i;for(r=0,s=e.length;r<s;r++)i=e[r],i.label=gt(n.callback,[i.value,r,e],this)}afterTickToLabelConversion(){gt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){gt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=Kp(this.ticks.length,e.ticks.maxTicksLimit),s=n.minRotation||0,i=n.maxRotation;let o=s,a,l,c;if(!this._isVisible()||!n.display||s>=i||r<=1||!this.isHorizontal()){this.labelRotation=s;return}const u=this._getLabelSizes(),f=u.widest.width,p=u.highest.height,m=Ln(this.chart.width-f,0,this.maxWidth);a=e.offset?this.maxWidth/r:m/(r-1),f+6>a&&(a=m/(r-(e.offset?.5:1)),l=this.maxHeight-no(e.grid)-n.padding-Gp(e.title,this.chart.options.font),c=Math.sqrt(f*f+p*p),o=gv(Math.min(Math.asin(Ln((u.highest.height+6)/a,-1,1)),Math.asin(Ln(l/c,-1,1))-Math.asin(Ln(p/c,-1,1)))),o=Math.max(s,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){gt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){gt(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:s,grid:i}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=Gp(s,n.options.font);if(a?(e.width=this.maxWidth,e.height=no(i)+l):(e.height=this.maxHeight,e.width=no(i)+l),r.display&&this.ticks.length){const{first:c,last:u,widest:f,highest:p}=this._getLabelSizes(),m=r.padding*2,v=Wt(this.labelRotation),_=Math.cos(v),k=Math.sin(v);if(a){const C=r.mirror?0:k*f.width+_*p.height;e.height=Math.min(this.maxHeight,e.height+C+m)}else{const C=r.mirror?0:_*f.width+k*p.height;e.width=Math.min(this.maxWidth,e.width+C+m)}this._calculatePadding(c,u,k,_)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,s){const{ticks:{align:i,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let p=0,m=0;l?c?(p=s*e.width,m=r*n.height):(p=r*e.height,m=s*n.width):i==="start"?m=n.width:i==="end"?p=e.width:i!=="inner"&&(p=e.width/2,m=n.width/2),this.paddingLeft=Math.max((p-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((m-f+o)*this.width/(this.width-f),0)}else{let u=n.height/2,f=e.height/2;i==="start"?(u=0,f=e.height):i==="end"&&(u=n.height,f=0),this.paddingTop=u+o,this.paddingBottom=f+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){gt(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)wt(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=Yp(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:s,_longestTextCache:i}=this,o=[],a=[],l=Math.floor(n/Kp(n,r));let c=0,u=0,f,p,m,v,_,k,C,A,P,S,M;for(f=0;f<n;f+=l){if(v=e[f].label,_=this._resolveTickFontOptions(f),s.font=k=_.string,C=i[k]=i[k]||{data:{},gc:[]},A=_.lineHeight,P=S=0,!wt(v)&&!Ct(v))P=Sp(s,C.data,C.gc,P,v),S=A;else if(Ct(v))for(p=0,m=v.length;p<m;++p)M=v[p],!wt(M)&&!Ct(M)&&(P=Sp(s,C.data,C.gc,P,M),S+=A);o.push(P),a.push(S),c=Math.max(P,c),u=Math.max(S,u)}JS(i,n);const T=o.indexOf(c),X=a.indexOf(u),V=E=>({width:o[E]||0,height:a[E]||0});return{first:V(0),last:V(n-1),widest:V(T),highest:V(X),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return Wk(this._alignToPixels?vs(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=eP(this.getContext(),e,r))}return this.$context||(this.$context=ZS(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Wt(this.labelRotation),r=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,a=i?i.widest.width+o:0,l=i?i.highest.height+o:0;return this.isHorizontal()?l*r>a*s?a/r:l/s:l*s<a*r?l/r:a/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,s=this.options,{grid:i,position:o,border:a}=s,l=i.offset,c=this.isHorizontal(),f=this.ticks.length+(l?1:0),p=no(i),m=[],v=a.setContext(this.getContext()),_=v.display?v.width:0,k=_/2,C=function(Ce){return vs(r,Ce,_)};let A,P,S,M,T,X,V,E,Z,K,j,de;if(o==="top")A=C(this.bottom),X=this.bottom-p,E=A-k,K=C(e.top)+k,de=e.bottom;else if(o==="bottom")A=C(this.top),K=e.top,de=C(e.bottom)-k,X=A+k,E=this.top+p;else if(o==="left")A=C(this.right),T=this.right-p,V=A-k,Z=C(e.left)+k,j=e.right;else if(o==="right")A=C(this.left),Z=e.left,j=C(e.right)-k,T=A+k,V=this.left+p;else if(n==="x"){if(o==="center")A=C((e.top+e.bottom)/2+.5);else if(Je(o)){const Ce=Object.keys(o)[0],Pe=o[Ce];A=C(this.chart.scales[Ce].getPixelForValue(Pe))}K=e.top,de=e.bottom,X=A+k,E=X+p}else if(n==="y"){if(o==="center")A=C((e.left+e.right)/2);else if(Je(o)){const Ce=Object.keys(o)[0],Pe=o[Ce];A=C(this.chart.scales[Ce].getPixelForValue(Pe))}T=A-k,V=T-p,Z=e.left,j=e.right}const pe=Qe(s.ticks.maxTicksLimit,f),Ae=Math.max(1,Math.ceil(f/pe));for(P=0;P<f;P+=Ae){const Ce=this.getContext(P),Pe=i.setContext(Ce),te=a.setContext(Ce),ee=Pe.lineWidth,Y=Pe.color,Le=te.dash||[],_e=te.dashOffset,We=Pe.tickWidth,xt=Pe.tickColor,mt=Pe.tickBorderDash||[],st=Pe.tickBorderDashOffset;S=QS(this,P,l),S!==void 0&&(M=vs(r,S,ee),c?T=V=Z=j=M:X=E=K=de=M,m.push({tx1:T,ty1:X,tx2:V,ty2:E,x1:Z,y1:K,x2:j,y2:de,width:ee,color:Y,borderDash:Le,borderDashOffset:_e,tickWidth:We,tickColor:xt,tickBorderDash:mt,tickBorderDashOffset:st}))}return this._ticksLength=f,this._borderValue=A,m}_computeLabelItems(e){const n=this.axis,r=this.options,{position:s,ticks:i}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:f}=i,p=no(r.grid),m=p+u,v=f?-u:m,_=-Wt(this.labelRotation),k=[];let C,A,P,S,M,T,X,V,E,Z,K,j,de="middle";if(s==="top")T=this.bottom-v,X=this._getXAxisLabelAlignment();else if(s==="bottom")T=this.top+v,X=this._getXAxisLabelAlignment();else if(s==="left"){const Ae=this._getYAxisLabelAlignment(p);X=Ae.textAlign,M=Ae.x}else if(s==="right"){const Ae=this._getYAxisLabelAlignment(p);X=Ae.textAlign,M=Ae.x}else if(n==="x"){if(s==="center")T=(e.top+e.bottom)/2+m;else if(Je(s)){const Ae=Object.keys(s)[0],Ce=s[Ae];T=this.chart.scales[Ae].getPixelForValue(Ce)+m}X=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")M=(e.left+e.right)/2-m;else if(Je(s)){const Ae=Object.keys(s)[0],Ce=s[Ae];M=this.chart.scales[Ae].getPixelForValue(Ce)}X=this._getYAxisLabelAlignment(p).textAlign}n==="y"&&(l==="start"?de="top":l==="end"&&(de="bottom"));const pe=this._getLabelSizes();for(C=0,A=a.length;C<A;++C){P=a[C],S=P.label;const Ae=i.setContext(this.getContext(C));V=this.getPixelForTick(C)+i.labelOffset,E=this._resolveTickFontOptions(C),Z=E.lineHeight,K=Ct(S)?S.length:1;const Ce=K/2,Pe=Ae.color,te=Ae.textStrokeColor,ee=Ae.textStrokeWidth;let Y=X;o?(M=V,X==="inner"&&(C===A-1?Y=this.options.reverse?"left":"right":C===0?Y=this.options.reverse?"right":"left":Y="center"),s==="top"?c==="near"||_!==0?j=-K*Z+Z/2:c==="center"?j=-pe.highest.height/2-Ce*Z+Z:j=-pe.highest.height+Z/2:c==="near"||_!==0?j=Z/2:c==="center"?j=pe.highest.height/2-Ce*Z:j=pe.highest.height-K*Z,f&&(j*=-1),_!==0&&!Ae.showLabelBackdrop&&(M+=Z/2*Math.sin(_))):(T=V,j=(1-K)*Z/2);let Le;if(Ae.showLabelBackdrop){const _e=an(Ae.backdropPadding),We=pe.heights[C],xt=pe.widths[C];let mt=j-_e.top,st=0-_e.left;switch(de){case"middle":mt-=We/2;break;case"bottom":mt-=We;break}switch(X){case"center":st-=xt/2;break;case"right":st-=xt;break;case"inner":C===A-1?st-=xt:C>0&&(st-=xt/2);break}Le={left:st,top:mt,width:xt+_e.width,height:We+_e.height,color:Ae.backdropColor}}k.push({label:S,font:E,textOffset:j,options:{rotation:_,color:Pe,strokeColor:te,strokeWidth:ee,textAlign:Y,textBaseline:de,translation:[M,T],backdrop:Le}})}return k}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Wt(this.labelRotation))return e==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:s,padding:i}}=this.options,o=this._getLabelSizes(),a=e+i,l=o.widest.width;let c,u;return n==="left"?s?(u=this.right+i,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?s?(u=this.left+i,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:s,width:i,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,s,i,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(i=>i.value===e);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const a=(l,c,u)=>{!u.width||!u.color||(r.save(),r.lineWidth=u.width,r.strokeStyle=u.color,r.setLineDash(u.borderDash||[]),r.lineDashOffset=u.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(i=0,o=s.length;i<o;++i){const l=s[i];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:s}}=this,i=r.setContext(this.getContext()),o=r.display?i.width:0;if(!o)return;const a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,f,p;this.isHorizontal()?(c=vs(e,this.left,o)-o/2,u=vs(e,this.right,a)+a/2,f=p=l):(f=vs(e,this.top,o)-o/2,p=vs(e,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(c,f),n.lineTo(u,p),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,s=this._computeLabelArea();s&&ea(r,s);const i=this.getLabelItems(e);for(const o of i){const a=o.options,l=o.font,c=o.label,u=o.textOffset;Ho(r,c,0,u,l,a)}s&&ta(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:s}}=this;if(!r.display)return;const i=Lt(r.font),o=an(r.padding),a=r.align;let l=i.lineHeight/2;n==="bottom"||n==="center"||Je(n)?(l+=o.bottom,Ct(r.text)&&(l+=i.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:f,rotation:p}=nP(this,l,n,a);Ho(e,r.text,0,0,i,{color:r.color,maxWidth:f,rotation:p,textAlign:tP(a,n,s),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=Qe(e.grid&&e.grid.z,-1),s=Qe(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==$i.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:r,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",s=[];let i,o;for(i=0,o=n.length;i<o;++i){const a=n[i];a[r]===this.id&&(!e||a.type===e)&&s.push(a)}return s}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Lt(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Ga{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;iP(n)&&(r=this.register(n));const s=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in s||(s[i]=e,rP(e,o,r),this.override&&Ot.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,s=this.scope;r in n&&delete n[r],s&&r in Ot[s]&&(delete Ot[s][r],this.override&&delete zs[r])}}function rP(t,e,n){const r=qo(Object.create(null),[n?Ot.get(n):{},Ot.get(e),t.defaults]);Ot.set(e,r),t.defaultRoutes&&sP(e,t.defaultRoutes),t.descriptors&&Ot.describe(e,t.descriptors)}function sP(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),s=r.pop(),i=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");Ot.route(i,s,l,a)})}function iP(t){return"id"in t&&"defaults"in t}class oP{constructor(){this.controllers=new Ga(df,"datasets",!0),this.elements=new Ga(bn,"elements"),this.plugins=new Ga(Object,"plugins"),this.scales=new Ga($i,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(s=>{const i=r||this._getRegistryForType(s);r||i.isForType(s)||i===this.plugins&&s.id?this._exec(e,i,s):pt(s,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const s=Jd(e);gt(r["before"+s],[],r),n[e](r),gt(r["after"+s],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const s=n.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return s}}var rr=new oP;class aP{constructor(){this._init=[]}notify(e,n,r,s){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=s?this._descriptors(e).filter(s):this._descriptors(e),o=this._notify(i,e,n,r);return n==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,r,s){s=s||{};for(const i of e){const o=i.plugin,a=o[r],l=[n,s,i.options];if(gt(a,l,o)===!1&&s.cancelable)return!1}return!0}invalidate(){wt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,s=Qe(r.options&&r.options.plugins,{}),i=lP(r);return s===!1&&!n?[]:uP(e,i,s,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,s=(i,o)=>i.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(s(n,r),e,"stop"),this._notify(s(r,n),e,"start")}}function lP(t){const e={},n=[],r=Object.keys(rr.plugins.items);for(let i=0;i<r.length;i++)n.push(rr.getPlugin(r[i]));const s=t.plugins||[];for(let i=0;i<s.length;i++){const o=s[i];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function cP(t,e){return!e&&t===!1?null:t===!0?{}:t}function uP(t,{plugins:e,localIds:n},r,s){const i=[],o=t.getContext();for(const a of e){const l=a.id,c=cP(r[l],s);c!==null&&i.push({plugin:a,options:dP(t.config,{plugin:a,local:n[l]},c,o)})}return i}function dP(t,{plugin:e,local:n},r,s){const i=t.pluginScopeKeys(e),o=t.getOptionScopes(r,i);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function cd(t,e){const n=Ot.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function fP(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function hP(t,e){return t===e?"_index_":"_value_"}function Xp(t){if(t==="x"||t==="y"||t==="r")return t}function pP(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function ud(t,...e){if(Xp(t))return t;for(const n of e){const r=n.axis||pP(n.position)||t.length>1&&Xp(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function Qp(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function gP(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return Qp(t,"x",n[0])||Qp(t,"y",n[0])}return{}}function mP(t,e){const n=zs[t.type]||{scales:{}},r=e.scales||{},s=cd(t.type,e),i=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!Je(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=ud(o,a,gP(o,t),Ot.scales[a.type]),c=hP(l,s),u=n.scales||{};i[o]=Eo(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||cd(a,e),u=(zs[a]||{}).scales||{};Object.keys(u).forEach(f=>{const p=fP(f,l),m=o[p+"AxisID"]||p;i[m]=i[m]||Object.create(null),Eo(i[m],[{axis:p},r[m],u[f]])})}),Object.keys(i).forEach(o=>{const a=i[o];Eo(a,[Ot.scales[a.type],Ot.scale])}),i}function jv(t){const e=t.options||(t.options={});e.plugins=Qe(e.plugins,{}),e.scales=mP(t,e)}function Nv(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function yP(t){return t=t||{},t.data=Nv(t.data),jv(t),t}const Jp=new Map,zv=new Set;function Xa(t,e){let n=Jp.get(t);return n||(n=e(),Jp.set(t,n),zv.add(n)),n}const ro=(t,e,n)=>{const r=Wo(e,n);r!==void 0&&t.add(r)};class vP{constructor(e){this._config=yP(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Nv(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),jv(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Xa(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Xa(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Xa(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return Xa(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let s=r.get(e);return(!s||n)&&(s=new Map,r.set(e,s)),s}getOptionScopes(e,n,r){const{options:s,type:i}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(f=>ro(l,e,f))),u.forEach(f=>ro(l,s,f)),u.forEach(f=>ro(l,zs[i]||{},f)),u.forEach(f=>ro(l,Ot,f)),u.forEach(f=>ro(l,ad,f))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),zv.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,zs[n]||{},Ot.datasets[n]||{},{type:n},Ot,ad]}resolveNamedOptions(e,n,r,s=[""]){const i={$shared:!0},{resolver:o,subPrefixes:a}=Zp(this._resolverCache,e,s);let l=o;if(_P(o,n)){i.$shared=!1,r=yn(r)?r():r;const c=this.createResolver(e,r,a);l=Mi(o,r,c)}for(const c of n)i[c]=l[c];return i}createResolver(e,n,r=[""],s){const{resolver:i}=Zp(this._resolverCache,e,r);return Je(n)?Mi(i,n,void 0,s):i}}function Zp(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const s=n.join();let i=r.get(s);return i||(i={resolver:sf(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(s,i)),i}const bP=t=>Je(t)&&Object.getOwnPropertyNames(t).some(e=>yn(t[e]));function _P(t,e){const{isScriptable:n,isIndexable:r}=xv(t);for(const s of e){const i=n(s),o=r(s),a=(o||i)&&t[s];if(i&&(yn(a)||bP(a))||o&&Ct(a))return!0}return!1}var wP="4.5.0";const xP=["top","bottom","left","right","chartArea"];function eg(t,e){return t==="top"||t==="bottom"||xP.indexOf(t)===-1&&e==="x"}function tg(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function ng(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),gt(n&&n.onComplete,[t],e)}function kP(t){const e=t.chart,n=e.options.animation;gt(n&&n.onProgress,[t],e)}function Uv(t){return lf()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const hl={},rg=t=>{const e=Uv(t);return Object.values(hl).filter(n=>n.canvas===e).pop()};function CP(t,e,n){const r=Object.keys(t);for(const s of r){const i=+s;if(i>=e){const o=t[s];delete t[s],(n>0||i>e)&&(t[i+n]=o)}}}function SP(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}let es=class{static defaults=Ot;static instances=hl;static overrides=zs;static registry=rr;static version=wP;static getChart=rg;static register(...e){rr.add(...e),sg()}static unregister(...e){rr.remove(...e),sg()}constructor(e,n){const r=this.config=new vP(n),s=Uv(e),i=rg(s);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||qS(s)),this.platform.updateConfig(r);const a=this.platform.acquireContext(s,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=Mk(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new aP,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Gk(f=>this.update(f),o.resizeDelay||0),this._dataChanges=[],hl[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}wr.listen(this,"complete",ng),wr.listen(this,"progress",kP),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:s,_aspectRatio:i}=this;return wt(e)?n&&i?i:s?r/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return rr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Ip(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Pp(this.canvas,this.ctx),this}stop(){return wr.stop(this),this}resize(e,n){wr.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,s=this.canvas,i=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,e,n,i),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Ip(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),gt(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};pt(n,(r,s)=>{r.id=s})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,s=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let i=[];n&&(i=i.concat(Object.keys(n).map(o=>{const a=n[o],l=ud(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),pt(i,o=>{const a=o.options,l=a.id,c=ud(l,a),u=Qe(a.type,o.dtype);(a.position===void 0||eg(a.position,c)!==eg(o.dposition))&&(a.position=o.dposition),s[l]=!0;let f=null;if(l in r&&r[l].type===u)f=r[l];else{const p=rr.getScale(u);f=new p({id:l,type:u,ctx:this.ctx,chart:this}),r[f.id]=f}f.init(a,e)}),pt(s,(o,a)=>{o||delete r[a]}),pt(r,o=>{Bn.configure(this,o,o.options),Bn.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((s,i)=>s.index-i.index),r>n){for(let s=n;s<r;++s)this._destroyDatasetMeta(s);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(tg("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,s)=>{n.filter(i=>i===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,s;for(this._removeUnreferencedMetasets(),r=0,s=n.length;r<s;r++){const i=n[r];let o=this.getDatasetMeta(r);const a=i.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=i.indexAxis||cd(a,this.options),o.order=i.order||0,o.index=r,o.label=""+i.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=rr.getController(a),{datasetElementType:c,dataElementType:u}=Ot.datasets[a];Object.assign(l,{dataElementType:rr.getElement(u),datasetElementType:c&&rr.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){pt(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:f}=this.getDatasetMeta(c),p=!s&&i.indexOf(f)===-1;f.buildOrUpdateElements(p),o=Math.max(+f.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),s||pt(i,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(tg("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){pt(this.scales,e=>{Bn.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!yp(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:s,count:i}of n){const o=r==="_removeElements"?-i:i;CP(e,s,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=i=>new Set(e.filter(o=>o[0]===i).map((o,a)=>a+","+o.splice(1).join(","))),s=r(0);for(let i=1;i<n;i++)if(!yp(s,r(i)))return;return Array.from(s).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Bn.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],pt(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,i)=>{s._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,yn(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),s={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(wr.has(this)?this.attached&&!wr.running(this)&&wr.start(this):(this.draw(),ng({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let s,i;for(s=0,i=n.length;s<i;++s){const o=n[s];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r={meta:e,index:e.index,cancelable:!0},s=Tv(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(s&&ea(n,s),e.controller.draw(),s&&ta(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return Vo(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,s){const i=xS.modes[n];return typeof i=="function"?i(this,e,r,s):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let s=r.filter(i=>i&&i._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=Ws(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const s=r?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,s);In(n)?(i.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(i,{visible:r}),this.update(a=>a.datasetIndex===e?s:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),wr.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Pp(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete hl[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(i,o)=>{n.addEventListener(this,i,o),e[i]=o},s=(i,o,a)=>{i.offsetX=o,i.offsetY=a,this._eventHandler(i)};pt(this.options.events,i=>r(i,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},s=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},i=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{s("attach",a),this.attached=!0,this.resize(),r("resize",i),r("detach",o)};o=()=>{this.attached=!1,s("resize",i),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){pt(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},pt(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const s=r?"set":"remove";let i,o,a,l;for(n==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:i,index:o})=>{const a=this.getDatasetMeta(i);if(!a)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:a.data[o],index:o}});!Ml(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const s=this.options.hover,i=(l,c)=>l.filter(u=>!c.some(f=>u.datasetIndex===f.datasetIndex&&u.index===f.index)),o=i(n,e),a=r?e:i(e,n);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},s=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;const i=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(i||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:s=[],options:i}=this,o=n,a=this._getActiveElements(e,s,r,o),l=Lk(e),c=SP(e,this._lastEvent,r,l);r&&(this._lastEvent=null,gt(i.onHover,[e,a,this],this),l&&gt(i.onClick,[e,a,this],this));const u=!Ml(a,s);return(u||n)&&(this._active=a,this._updateHoverStyles(a,s,n)),this._lastEvent=c,u}_getActiveElements(e,n,r,s){if(e.type==="mouseout")return[];if(!r)return n;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,s)}};function sg(){return pt(es.instances,t=>t._plugins.invalidate())}function qv(t,e,n=e){t.lineCap=Qe(n.borderCapStyle,e.borderCapStyle),t.setLineDash(Qe(n.borderDash,e.borderDash)),t.lineDashOffset=Qe(n.borderDashOffset,e.borderDashOffset),t.lineJoin=Qe(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Qe(n.borderWidth,e.borderWidth),t.strokeStyle=Qe(n.borderColor,e.borderColor)}function PP(t,e,n){t.lineTo(n.x,n.y)}function AP(t){return t.stepped?cC:t.tension||t.cubicInterpolationMode==="monotone"?uC:PP}function Wv(t,e,n={}){const r=t.length,{start:s=0,end:i=r-1}=n,{start:o,end:a}=e,l=Math.max(s,o),c=Math.min(i,a),u=s<o&&i<o||s>a&&i>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!u?r+c-l:c-l}}function EP(t,e,n,r){const{points:s,options:i}=e,{count:o,start:a,loop:l,ilen:c}=Wv(s,n,r),u=AP(i);let{move:f=!0,reverse:p}=r||{},m,v,_;for(m=0;m<=c;++m)v=s[(a+(p?c-m:m))%o],!v.skip&&(f?(t.moveTo(v.x,v.y),f=!1):u(t,_,v,p,i.stepped),_=v);return l&&(v=s[(a+(p?c:0))%o],u(t,_,v,p,i.stepped)),!!l}function IP(t,e,n,r){const s=e.points,{count:i,start:o,ilen:a}=Wv(s,n,r),{move:l=!0,reverse:c}=r||{};let u=0,f=0,p,m,v,_,k,C;const A=S=>(o+(c?a-S:S))%i,P=()=>{_!==k&&(t.lineTo(u,k),t.lineTo(u,_),t.lineTo(u,C))};for(l&&(m=s[A(0)],t.moveTo(m.x,m.y)),p=0;p<=a;++p){if(m=s[A(p)],m.skip)continue;const S=m.x,M=m.y,T=S|0;T===v?(M<_?_=M:M>k&&(k=M),u=(f*u+S)/++f):(P(),t.lineTo(S,M),v=T,f=0,_=k=M),C=M}P()}function dd(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?IP:EP}function OP(t){return t.stepped?qC:t.tension||t.cubicInterpolationMode==="monotone"?WC:Ms}function MP(t,e,n,r){let s=e._path;s||(s=e._path=new Path2D,e.path(s,n,r)&&s.closePath()),qv(t,e.options),t.stroke(s)}function TP(t,e,n,r){const{segments:s,options:i}=e,o=dd(e);for(const a of s)qv(t,i,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const DP=typeof Path2D=="function";function RP(t,e,n,r){DP&&!e.options.segment?MP(t,e,n,r):TP(t,e,n,r)}class na extends bn{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const s=r.spanGaps?this._loop:this._fullLoop;FC(this._points,r,e,s,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=XC(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,s=e[n],i=this.points,o=Mv(this,{property:n,start:s,end:s});if(!o.length)return;const a=[],l=OP(r);let c,u;for(c=0,u=o.length;c<u;++c){const{start:f,end:p}=o[c],m=i[f],v=i[p];if(m===v){a.push(m);continue}const _=Math.abs((s-m[n])/(v[n]-m[n])),k=l(m,v,_,r.stepped);k[n]=e[n],a.push(k)}return a.length===1?a[0]:a}pathSegment(e,n,r){return dd(this)(e,this,n,r)}path(e,n,r){const s=this.segments,i=dd(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of s)o&=i(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,s){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),RP(e,this,r,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function ig(t,e,n,r){const s=t.options,{[n]:i}=t.getProps([n],r);return Math.abs(e-i)<s.radius+s.hitRadius}class Vv extends bn{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,n,r){const s=this.options,{x:i,y:o}=this.getProps(["x","y"],r);return Math.pow(e-i,2)+Math.pow(n-o,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(e,n){return ig(this,e,"x",n)}inYRange(e,n){return ig(this,e,"y",n)}getCenterPoint(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}size(e){e=e||this.options||{};let n=e.radius||0;n=Math.max(n,n&&e.hoverRadius||0);const r=n&&e.borderWidth||0;return(n+r)*2}draw(e,n){const r=this.options;this.skip||r.radius<.1||!Vo(this,n,this.size(r)/2)||(e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.fillStyle=r.backgroundColor,ld(e,r,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function FP(t,e,n){const r=t.segments,s=t.points,i=e.points,o=[];for(const a of r){let{start:l,end:c}=a;c=cc(l,c,s);const u=fd(n,s[l],s[c],a.loop);if(!e.segments){o.push({source:a,target:u,start:s[l],end:s[c]});continue}const f=Mv(e,u);for(const p of f){const m=fd(n,i[p.start],i[p.end],p.loop),v=Ov(a,s,m);for(const _ of v)o.push({source:_,target:p,start:{[n]:og(u,m,"start",Math.max)},end:{[n]:og(u,m,"end",Math.min)}})}}return o}function fd(t,e,n,r){if(r)return;let s=e[t],i=n[t];return t==="angle"&&(s=sr(s),i=sr(i)),{property:t,start:s,end:i}}function $P(t,e){const{x:n=null,y:r=null}=t||{},s=e.points,i=[];return e.segments.forEach(({start:o,end:a})=>{a=cc(o,a,s);const l=s[o],c=s[a];r!==null?(i.push({x:l.x,y:r}),i.push({x:c.x,y:r})):n!==null&&(i.push({x:n,y:l.y}),i.push({x:n,y:c.y}))}),i}function cc(t,e,n){for(;e>t;e--){const r=n[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function og(t,e,n,r){return t&&e?r(t[n],e[n]):t?t[n]:e?e[n]:0}function Hv(t,e){let n=[],r=!1;return Ct(t)?(r=!0,n=t):n=$P(t,e),n.length?new na({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function ag(t){return t&&t.fill!==!1}function LP(t,e,n){let s=t[e].fill;const i=[e];let o;if(!n)return s;for(;s!==!1&&i.indexOf(s)===-1;){if(!Ht(s))return s;if(o=t[s],!o)return!1;if(o.visible)return s;i.push(s),s=o.fill}return!1}function BP(t,e,n){const r=UP(t);if(Je(r))return isNaN(r.value)?!1:r;let s=parseFloat(r);return Ht(s)&&Math.floor(s)===s?jP(r[0],e,s,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function jP(t,e,n,r){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=r?!1:n}function NP(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:Je(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function zP(t,e,n){let r;return t==="start"?r=n:t==="end"?r=e.options.reverse?e.min:e.max:Je(t)?r=t.value:r=e.getBaseValue(),r}function UP(t){const e=t.options,n=e.fill;let r=Qe(n&&n.target,n);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function qP(t){const{scale:e,index:n,line:r}=t,s=[],i=r.segments,o=r.points,a=WP(e,n);a.push(Hv({x:null,y:e.bottom},r));for(let l=0;l<i.length;l++){const c=i[l];for(let u=c.start;u<=c.end;u++)VP(s,o[u],a)}return new na({points:s,options:{}})}function WP(t,e){const n=[],r=t.getMatchingVisibleMetas("line");for(let s=0;s<r.length;s++){const i=r[s];if(i.index===e)break;i.hidden||n.unshift(i.dataset)}return n}function VP(t,e,n){const r=[];for(let s=0;s<n.length;s++){const i=n[s],{first:o,last:a,point:l}=HP(i,e,"x");if(!(!l||o&&a)){if(o)r.unshift(l);else if(t.push(l),!a)break}}t.push(...r)}function HP(t,e,n){const r=t.interpolate(e,n);if(!r)return{};const s=r[n],i=t.segments,o=t.points;let a=!1,l=!1;for(let c=0;c<i.length;c++){const u=i[c],f=o[u.start][n],p=o[u.end][n];if(hi(s,f,p)){a=s===f,l=s===p;break}}return{first:a,last:l,point:r}}class Kv{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,r){const{x:s,y:i,radius:o}=this;return n=n||{start:0,end:qt},e.arc(s,i,o,n.end,n.start,!0),!r.bounds}interpolate(e){const{x:n,y:r,radius:s}=this,i=e.angle;return{x:n+Math.cos(i)*s,y:r+Math.sin(i)*s,angle:i}}}function KP(t){const{chart:e,fill:n,line:r}=t;if(Ht(n))return YP(e,n);if(n==="stack")return qP(t);if(n==="shape")return!0;const s=GP(t);return s instanceof Kv?s:Hv(s,r)}function YP(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function GP(t){return(t.scale||{}).getPointPositionForValue?QP(t):XP(t)}function XP(t){const{scale:e={},fill:n}=t,r=NP(n,e);if(Ht(r)){const s=e.isHorizontal();return{x:s?r:null,y:s?null:r}}return null}function QP(t){const{scale:e,fill:n}=t,r=e.options,s=e.getLabels().length,i=r.reverse?e.max:e.min,o=zP(n,e,i),a=[];if(r.grid.circular){const l=e.getPointPositionForValue(0,i);return new Kv({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<s;++l)a.push(e.getPointPositionForValue(l,o));return a}function _u(t,e,n){const r=KP(e),{chart:s,index:i,line:o,scale:a,axis:l}=e,c=o.options,u=c.fill,f=c.backgroundColor,{above:p=f,below:m=f}=u||{},v=s.getDatasetMeta(i),_=Tv(s,v);r&&o.points.length&&(ea(t,n),JP(t,{line:o,target:r,above:p,below:m,area:n,scale:a,axis:l,clip:_}),ta(t))}function JP(t,e){const{line:n,target:r,above:s,below:i,area:o,scale:a,clip:l}=e,c=n._loop?"angle":e.axis;t.save();let u=i;i!==s&&(c==="x"?(lg(t,r,o.top),wu(t,{line:n,target:r,color:s,scale:a,property:c,clip:l}),t.restore(),t.save(),lg(t,r,o.bottom)):c==="y"&&(cg(t,r,o.left),wu(t,{line:n,target:r,color:i,scale:a,property:c,clip:l}),t.restore(),t.save(),cg(t,r,o.right),u=s)),wu(t,{line:n,target:r,color:u,scale:a,property:c,clip:l}),t.restore()}function lg(t,e,n){const{segments:r,points:s}=e;let i=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,u=s[l],f=s[cc(l,c,s)];i?(t.moveTo(u.x,u.y),i=!1):(t.lineTo(u.x,n),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(f.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function cg(t,e,n){const{segments:r,points:s}=e;let i=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,u=s[l],f=s[cc(l,c,s)];i?(t.moveTo(u.x,u.y),i=!1):(t.lineTo(n,u.y),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(n,f.y)}t.lineTo(n,e.first().y),t.closePath(),t.clip()}function wu(t,e){const{line:n,target:r,property:s,color:i,scale:o,clip:a}=e,l=FP(n,r,s);for(const{source:c,target:u,start:f,end:p}of l){const{style:{backgroundColor:m=i}={}}=c,v=r!==!0;t.save(),t.fillStyle=m,ZP(t,o,a,v&&fd(s,f,p)),t.beginPath();const _=!!n.pathSegment(t,c);let k;if(v){_?t.closePath():ug(t,r,p,s);const C=!!r.pathSegment(t,u,{move:_,reverse:!0});k=_&&C,k||ug(t,r,f,s)}t.closePath(),t.fill(k?"evenodd":"nonzero"),t.restore()}}function ZP(t,e,n,r){const s=e.chart.chartArea,{property:i,start:o,end:a}=r||{};if(i==="x"||i==="y"){let l,c,u,f;i==="x"?(l=o,c=s.top,u=a,f=s.bottom):(l=s.left,c=o,u=s.right,f=a),t.beginPath(),n&&(l=Math.max(l,n.left),u=Math.min(u,n.right),c=Math.max(c,n.top),f=Math.min(f,n.bottom)),t.rect(l,c,u-l,f-c),t.clip()}}function ug(t,e,n,r){const s=e.interpolate(n,r);s&&t.lineTo(s.x,s.y)}var eA={id:"filler",afterDatasetsUpdate(t,e,n){const r=(t.data.datasets||[]).length,s=[];let i,o,a,l;for(o=0;o<r;++o)i=t.getDatasetMeta(o),a=i.dataset,l=null,a&&a.options&&a instanceof na&&(l={visible:t.isDatasetVisible(o),index:o,fill:BP(a,o,r),chart:t,axis:i.controller.options.indexAxis,scale:i.vScale,line:a}),i.$filler=l,s.push(l);for(o=0;o<r;++o)l=s[o],!(!l||l.fill===!1)&&(l.fill=LP(s,o,n.propagate))},beforeDraw(t,e,n){const r=n.drawTime==="beforeDraw",s=t.getSortedVisibleDatasetMetas(),i=t.chartArea;for(let o=s.length-1;o>=0;--o){const a=s[o].$filler;a&&(a.line.updateControlPoints(i,a.axis),r&&a.fill&&_u(t.ctx,a,i))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const r=t.getSortedVisibleDatasetMetas();for(let s=r.length-1;s>=0;--s){const i=r[s].$filler;ag(i)&&_u(t.ctx,i,t.chartArea)}},beforeDatasetDraw(t,e,n){const r=e.meta.$filler;!ag(r)||n.drawTime!=="beforeDatasetDraw"||_u(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const dg=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},tA=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class fg extends bn{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=gt(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,s)=>e.sort(r,s,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,s=Lt(r.font),i=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=dg(r,i);let c,u;n.font=s.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,i,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,s,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,s){const{ctx:i,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=s+a;let f=e;i.textAlign="left",i.textBaseline="middle";let p=-1,m=-u;return this.legendItems.forEach((v,_)=>{const k=r+n/2+i.measureText(v.text).width;(_===0||c[c.length-1]+k+2*a>o)&&(f+=u,c[c.length-(_>0?0:1)]=0,m+=u,p++),l[_]={left:0,top:m,row:p,width:k,height:s},c[c.length-1]+=k+a}),f}_fitCols(e,n,r,s){const{ctx:i,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let f=a,p=0,m=0,v=0,_=0;return this.legendItems.forEach((k,C)=>{const{itemWidth:A,itemHeight:P}=nA(r,n,i,k,s);C>0&&m+P+2*a>u&&(f+=p+a,c.push({width:p,height:m}),v+=p+a,_++,p=m=0),l[C]={left:v,top:m,col:_,width:A,height:P},p=Math.max(p,A),m+=P+a}),f+=p,c.push({width:p,height:m}),f}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:s},rtl:i}}=this,o=ki(i,this.left,this.width);if(this.isHorizontal()){let a=0,l=tn(r,this.left+s,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=tn(r,this.left+s,this.right-this.lineWidths[a])),c.top+=this.top+e+s,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+s}else{let a=0,l=tn(r,this.top+e+s,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=tn(r,this.top+e+s,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+s,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;ea(e,this),this._draw(),ta(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:s}=this,{align:i,labels:o}=e,a=Ot.color,l=ki(e.rtl,this.left,this.width),c=Lt(o.font),{padding:u}=o,f=c.size,p=f/2;let m;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:v,boxHeight:_,itemHeight:k}=dg(o,f),C=function(T,X,V){if(isNaN(v)||v<=0||isNaN(_)||_<0)return;s.save();const E=Qe(V.lineWidth,1);if(s.fillStyle=Qe(V.fillStyle,a),s.lineCap=Qe(V.lineCap,"butt"),s.lineDashOffset=Qe(V.lineDashOffset,0),s.lineJoin=Qe(V.lineJoin,"miter"),s.lineWidth=E,s.strokeStyle=Qe(V.strokeStyle,a),s.setLineDash(Qe(V.lineDash,[])),o.usePointStyle){const Z={radius:_*Math.SQRT2/2,pointStyle:V.pointStyle,rotation:V.rotation,borderWidth:E},K=l.xPlus(T,v/2),j=X+p;_v(s,Z,K,j,o.pointStyleWidth&&v)}else{const Z=X+Math.max((f-_)/2,0),K=l.leftForLtr(T,v),j=xi(V.borderRadius);s.beginPath(),Object.values(j).some(de=>de!==0)?$l(s,{x:K,y:Z,w:v,h:_,radius:j}):s.rect(K,Z,v,_),s.fill(),E!==0&&s.stroke()}s.restore()},A=function(T,X,V){Ho(s,V.text,T,X+k/2,c,{strikethrough:V.hidden,textAlign:l.textAlign(V.textAlign)})},P=this.isHorizontal(),S=this._computeTitleHeight();P?m={x:tn(i,this.left+u,this.right-r[0]),y:this.top+u+S,line:0}:m={x:this.left+u,y:tn(i,this.top+S+u,this.bottom-n[0].height),line:0},Av(this.ctx,e.textDirection);const M=k+u;this.legendItems.forEach((T,X)=>{s.strokeStyle=T.fontColor,s.fillStyle=T.fontColor;const V=s.measureText(T.text).width,E=l.textAlign(T.textAlign||(T.textAlign=o.textAlign)),Z=v+p+V;let K=m.x,j=m.y;l.setWidth(this.width),P?X>0&&K+Z+u>this.right&&(j=m.y+=M,m.line++,K=m.x=tn(i,this.left+u,this.right-r[m.line])):X>0&&j+M>this.bottom&&(K=m.x=K+n[m.line].width+u,m.line++,j=m.y=tn(i,this.top+S+u,this.bottom-n[m.line].height));const de=l.x(K);if(C(de,j,T),K=Xk(E,K+v+p,P?K+Z:this.right,e.rtl),A(l.x(K),j,T),P)m.x+=Z+u;else if(typeof T.text!="string"){const pe=c.lineHeight;m.y+=Yv(T,pe)+u}else m.y+=M}),Ev(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=Lt(n.font),s=an(n.padding);if(!n.display)return;const i=ki(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,c=s.top+l;let u,f=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),u=this.top+c,f=tn(e.align,f,this.right-p);else{const v=this.columnSizes.reduce((_,k)=>Math.max(_,k.height),0);u=c+tn(e.align,this.top,this.bottom-v-e.labels.padding-this._computeTitleHeight())}const m=tn(a,f,f+p);o.textAlign=i.textAlign(tf(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,Ho(o,n.text,m,u,r)}_computeTitleHeight(){const e=this.options.title,n=Lt(e.font),r=an(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,s,i;if(hi(e,this.left,this.right)&&hi(n,this.top,this.bottom)){for(i=this.legendHitBoxes,r=0;r<i.length;++r)if(s=i[r],hi(e,s.left,s.left+s.width)&&hi(n,s.top,s.top+s.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!iA(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,i=tA(s,r);s&&!i&&gt(n.onLeave,[e,s,this],this),this._hoveredItem=r,r&&!i&&gt(n.onHover,[e,r,this],this)}else r&&gt(n.onClick,[e,r,this],this)}}function nA(t,e,n,r,s){const i=rA(r,t,e,n),o=sA(s,r,e.lineHeight);return{itemWidth:i,itemHeight:o}}function rA(t,e,n,r){let s=t.text;return s&&typeof s!="string"&&(s=s.reduce((i,o)=>i.length>o.length?i:o)),e+n.size/2+r.measureText(s).width}function sA(t,e,n){let r=t;return typeof e.text!="string"&&(r=Yv(e,n)),r}function Yv(t,e){const n=t.text?t.text.length:0;return e*n}function iA(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var Gv={id:"legend",_element:fg,start(t,e,n){const r=t.legend=new fg({ctx:t.ctx,options:n,chart:t});Bn.configure(t,r,n),Bn.addBox(t,r)},stop(t){Bn.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;Bn.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,s=n.chart;s.isDatasetVisible(r)?(s.hide(r),e.hidden=!0):(s.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:s,color:i,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=an(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:i,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:s||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class Xv extends bn{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const s=Ct(r.text)?r.text.length:1;this._padding=an(r.padding);const i=s*Lt(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:s,right:i,options:o}=this,a=o.align;let l=0,c,u,f;return this.isHorizontal()?(u=tn(a,r,i),f=n+e,c=i-r):(o.position==="left"?(u=r+e,f=tn(a,s,n),l=ut*-.5):(u=i-e,f=tn(a,n,s),l=ut*.5),c=s-n),{titleX:u,titleY:f,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=Lt(n.font),i=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(i);Ho(e,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:c,textAlign:tf(n.align),textBaseline:"middle",translation:[o,a]})}}function oA(t,e){const n=new Xv({ctx:t.ctx,options:e,chart:t});Bn.configure(t,n,e),Bn.addBox(t,n),t.titleBlock=n}var Qv={id:"title",_element:Xv,start(t,e,n){oA(t,n)},stop(t){const e=t.titleBlock;Bn.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;Bn.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const go={average(t){if(!t.length)return!1;let e,n,r=new Set,s=0,i=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();r.add(l.x),s+=l.y,++i}}return i===0||r.size===0?!1:{x:[...r].reduce((a,l)=>a+l)/r.size,y:s/i}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,s=Number.POSITIVE_INFINITY,i,o,a;for(i=0,o=t.length;i<o;++i){const l=t[i].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=Oi(e,c);u<s&&(s=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function tr(t,e){return e&&(Ct(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function xr(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function aA(t,e){const{element:n,datasetIndex:r,index:s}=e,i=t.getDatasetMeta(r).controller,{label:o,value:a}=i.getLabelAndValue(s);return{chart:t,label:o,parsed:i.getParsed(s),raw:t.data.datasets[r].data[s],formattedValue:a,dataset:i.getDataset(),dataIndex:s,datasetIndex:r,element:n}}function hg(t,e){const n=t.chart.ctx,{body:r,footer:s,title:i}=t,{boxWidth:o,boxHeight:a}=e,l=Lt(e.bodyFont),c=Lt(e.titleFont),u=Lt(e.footerFont),f=i.length,p=s.length,m=r.length,v=an(e.padding);let _=v.height,k=0,C=r.reduce((S,M)=>S+M.before.length+M.lines.length+M.after.length,0);if(C+=t.beforeBody.length+t.afterBody.length,f&&(_+=f*c.lineHeight+(f-1)*e.titleSpacing+e.titleMarginBottom),C){const S=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;_+=m*S+(C-m)*l.lineHeight+(C-1)*e.bodySpacing}p&&(_+=e.footerMarginTop+p*u.lineHeight+(p-1)*e.footerSpacing);let A=0;const P=function(S){k=Math.max(k,n.measureText(S).width+A)};return n.save(),n.font=c.string,pt(t.title,P),n.font=l.string,pt(t.beforeBody.concat(t.afterBody),P),A=e.displayColors?o+2+e.boxPadding:0,pt(r,S=>{pt(S.before,P),pt(S.lines,P),pt(S.after,P)}),A=0,n.font=u.string,pt(t.footer,P),n.restore(),k+=v.width,{width:k,height:_}}function lA(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function cA(t,e,n,r){const{x:s,width:i}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&s+i+o>e.width||t==="right"&&s-i-o<0)return!0}function uA(t,e,n,r){const{x:s,width:i}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return r==="center"?c=s<=(a+l)/2?"left":"right":s<=i/2?c="left":s>=o-i/2&&(c="right"),cA(c,t,e,n)&&(c="center"),c}function pg(t,e,n){const r=n.yAlign||e.yAlign||lA(t,n);return{xAlign:n.xAlign||e.xAlign||uA(t,e,n,r),yAlign:r}}function dA(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function fA(t,e,n){let{y:r,height:s}=t;return e==="top"?r+=n:e==="bottom"?r-=s+n:r-=s/2,r}function gg(t,e,n,r){const{caretSize:s,caretPadding:i,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=s+i,{topLeft:u,topRight:f,bottomLeft:p,bottomRight:m}=xi(o);let v=dA(e,a);const _=fA(e,l,c);return l==="center"?a==="left"?v+=c:a==="right"&&(v-=c):a==="left"?v-=Math.max(u,p)+s:a==="right"&&(v+=Math.max(f,m)+s),{x:Ln(v,0,r.width-e.width),y:Ln(_,0,r.height-e.height)}}function Qa(t,e,n){const r=an(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function mg(t){return tr([],xr(t))}function hA(t,e,n){return Ws(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function yg(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const Jv={beforeTitle:gr,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:gr,beforeBody:gr,beforeLabel:gr,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return wt(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:gr,afterBody:gr,beforeFooter:gr,footer:gr,afterFooter:gr};function pn(t,e,n,r){const s=t[e].call(n,r);return typeof s>"u"?Jv[e].call(n,r):s}class vg extends bn{static positioners=go;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&n.options.animation&&r.animations,i=new uf(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=hA(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,s=pn(r,"beforeTitle",this,e),i=pn(r,"title",this,e),o=pn(r,"afterTitle",this,e);let a=[];return a=tr(a,xr(s)),a=tr(a,xr(i)),a=tr(a,xr(o)),a}getBeforeBody(e,n){return mg(pn(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,s=[];return pt(e,i=>{const o={before:[],lines:[],after:[]},a=yg(r,i);tr(o.before,xr(pn(a,"beforeLabel",this,i))),tr(o.lines,pn(a,"label",this,i)),tr(o.after,xr(pn(a,"afterLabel",this,i))),s.push(o)}),s}getAfterBody(e,n){return mg(pn(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,s=pn(r,"beforeFooter",this,e),i=pn(r,"footer",this,e),o=pn(r,"afterFooter",this,e);let a=[];return a=tr(a,xr(s)),a=tr(a,xr(i)),a=tr(a,xr(o)),a}_createItems(e){const n=this._active,r=this.chart.data,s=[],i=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(aA(this.chart,n[l]));return e.filter&&(a=a.filter((u,f,p)=>e.filter(u,f,p,r))),e.itemSort&&(a=a.sort((u,f)=>e.itemSort(u,f,r))),pt(a,u=>{const f=yg(e.callbacks,u);s.push(pn(f,"labelColor",this,u)),i.push(pn(f,"labelPointStyle",this,u)),o.push(pn(f,"labelTextColor",this,u))}),this.labelColors=s,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),s=this._active;let i,o=[];if(!s.length)this.opacity!==0&&(i={opacity:0});else{const a=go[r.position].call(this,s,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=hg(this,r),c=Object.assign({},a,l),u=pg(this.chart,r,c),f=gg(r,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,i={opacity:1,x:f.x,y:f.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,s){const i=this.getCaretPosition(e,r,s);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(e,n,r){const{xAlign:s,yAlign:i}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:f}=xi(a),{x:p,y:m}=e,{width:v,height:_}=n;let k,C,A,P,S,M;return i==="center"?(S=m+_/2,s==="left"?(k=p,C=k-o,P=S+o,M=S-o):(k=p+v,C=k+o,P=S-o,M=S+o),A=k):(s==="left"?C=p+Math.max(l,u)+o:s==="right"?C=p+v-Math.max(c,f)-o:C=this.caretX,i==="top"?(P=m,S=P-o,k=C-o,A=C+o):(P=m+_,S=P+o,k=C+o,A=C-o),M=P),{x1:k,x2:C,x3:A,y1:P,y2:S,y3:M}}drawTitle(e,n,r){const s=this.title,i=s.length;let o,a,l;if(i){const c=ki(r.rtl,this.x,this.width);for(e.x=Qa(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",o=Lt(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<i;++l)n.fillText(s[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===i&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,s,i){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=i,u=Lt(i.bodyFont),f=Qa(this,"left",i),p=s.x(f),m=l<u.lineHeight?(u.lineHeight-l)/2:0,v=n.y+m;if(i.usePointStyle){const _={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},k=s.leftForLtr(p,c)+c/2,C=v+l/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,ld(e,_,k,C),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,ld(e,_,k,C)}else{e.lineWidth=Je(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const _=s.leftForLtr(p,c),k=s.leftForLtr(s.xPlus(p,1),c-2),C=xi(o.borderRadius);Object.values(C).some(A=>A!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,$l(e,{x:_,y:v,w:c,h:l,radius:C}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),$l(e,{x:k,y:v+1,w:c-2,h:l-2,radius:C}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(_,v,c,l),e.strokeRect(_,v,c,l),e.fillStyle=o.backgroundColor,e.fillRect(k,v+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:s}=this,{bodySpacing:i,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=r,f=Lt(r.bodyFont);let p=f.lineHeight,m=0;const v=ki(r.rtl,this.x,this.width),_=function(V){n.fillText(V,v.x(e.x+m),e.y+p/2),e.y+=p+i},k=v.textAlign(o);let C,A,P,S,M,T,X;for(n.textAlign=o,n.textBaseline="middle",n.font=f.string,e.x=Qa(this,k,r),n.fillStyle=r.bodyColor,pt(this.beforeBody,_),m=a&&k!=="right"?o==="center"?c/2+u:c+2+u:0,S=0,T=s.length;S<T;++S){for(C=s[S],A=this.labelTextColors[S],n.fillStyle=A,pt(C.before,_),P=C.lines,a&&P.length&&(this._drawColorBox(n,e,S,v,r),p=Math.max(f.lineHeight,l)),M=0,X=P.length;M<X;++M)_(P[M]),p=f.lineHeight;pt(C.after,_)}m=0,p=f.lineHeight,pt(this.afterBody,_),e.y-=i}drawFooter(e,n,r){const s=this.footer,i=s.length;let o,a;if(i){const l=ki(r.rtl,this.x,this.width);for(e.x=Qa(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=Lt(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<i;++a)n.fillText(s[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,s){const{xAlign:i,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=r,{topLeft:f,topRight:p,bottomLeft:m,bottomRight:v}=xi(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(a+f,l),o==="top"&&this.drawCaret(e,n,r,s),n.lineTo(a+c-p,l),n.quadraticCurveTo(a+c,l,a+c,l+p),o==="center"&&i==="right"&&this.drawCaret(e,n,r,s),n.lineTo(a+c,l+u-v),n.quadraticCurveTo(a+c,l+u,a+c-v,l+u),o==="bottom"&&this.drawCaret(e,n,r,s),n.lineTo(a+m,l+u),n.quadraticCurveTo(a,l+u,a,l+u-m),o==="center"&&i==="left"&&this.drawCaret(e,n,r,s),n.lineTo(a,l+f),n.quadraticCurveTo(a,l,a+f,l),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,s=r&&r.x,i=r&&r.y;if(s||i){const o=go[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=hg(this,e),l=Object.assign({},o,this._size),c=pg(n,e,l),u=gg(e,l,c,n);(s._to!==u.x||i._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},i={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=an(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(i,e,s,n),Av(e,n.textDirection),i.y+=o.top,this.drawTitle(i,e,n),this.drawBody(i,e,n),this.drawFooter(i,e,n),Ev(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,s=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),i=!Ml(r,s),o=this._positionChanged(s,n);(i||o)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,i=this._active||[],o=this._getActiveElements(e,i,n,r),a=this._positionChanged(o,e),l=n||!Ml(o,i)||a;return l&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,s){const i=this.options;if(e.type==="mouseout")return[];if(!s)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,i.mode,i,r);return i.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:s,options:i}=this,o=go[i.position].call(this,e,n);return o!==!1&&(r!==o.x||s!==o.y)}}var Zv={id:"tooltip",_element:vg,positioners:go,afterInit(t,e,n){n&&(t.tooltip=new vg({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Jv},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const pA=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function gA(t,e,n,r){const s=t.indexOf(e);if(s===-1)return pA(t,e,n,r);const i=t.lastIndexOf(e);return s!==i?n:s}const mA=(t,e)=>t===null?null:Ln(Math.round(t),0,e);function bg(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class eb extends $i{static id="category";static defaults={ticks:{callback:bg}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:s,label:i}of n)r[s]===i&&r.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(wt(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:gA(r,e,Qe(n,e),this._addedLabels),mA(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,s=[];let i=this.getLabels();i=e===0&&n===i.length-1?i:i.slice(e,n+1),this._valueRange=Math.max(i.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)s.push({value:o});return s}getLabelForValue(e){return bg.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function yA(t,e){const n=[],{bounds:s,step:i,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:f,includeBounds:p}=t,m=i||1,v=u-1,{min:_,max:k}=e,C=!wt(o),A=!wt(a),P=!wt(c),S=(k-_)/(f+1);let M=vp((k-_)/v/m)*m,T,X,V,E;if(M<1e-14&&!C&&!A)return[{value:_},{value:k}];E=Math.ceil(k/M)-Math.floor(_/M),E>v&&(M=vp(E*M/v/m)*m),wt(l)||(T=Math.pow(10,l),M=Math.ceil(M*T)/T),s==="ticks"?(X=Math.floor(_/M)*M,V=Math.ceil(k/M)*M):(X=_,V=k),C&&A&&i&&zk((a-o)/i,M/1e3)?(E=Math.round(Math.min((a-o)/M,u)),M=(a-o)/E,X=o,V=a):P?(X=C?o:X,V=A?a:V,E=c-1,M=(V-X)/E):(E=(V-X)/M,Io(E,Math.round(E),M/1e3)?E=Math.round(E):E=Math.ceil(E));const Z=Math.max(bp(M),bp(X));T=Math.pow(10,wt(l)?Z:l),X=Math.round(X*T)/T,V=Math.round(V*T)/T;let K=0;for(C&&(p&&X!==o?(n.push({value:o}),X<o&&K++,Io(Math.round((X+K*M)*T)/T,o,_g(o,S,t))&&K++):X<o&&K++);K<E;++K){const j=Math.round((X+K*M)*T)/T;if(A&&j>a)break;n.push({value:j})}return A&&p&&V!==a?n.length&&Io(n[n.length-1].value,a,_g(a,S,t))?n[n.length-1].value=a:n.push({value:a}):(!A||V===a)&&n.push({value:V}),n}function _g(t,e,{horizontal:n,minRotation:r}){const s=Wt(r),i=(n?Math.sin(s):Math.cos(s))||.001,o=.75*e*(""+t).length;return Math.min(e/i,o)}class vA extends $i{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return wt(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:s,max:i}=this;const o=l=>s=n?s:l,a=l=>i=r?i:l;if(e){const l=Ii(s),c=Ii(i);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(s===i){let l=i===0?1:Math.abs(i*.05);a(i+l),e||o(s-l)}this.min=s,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,s;return r?(s=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),n=n||11),n&&(s=Math.min(n,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const s={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},i=this._range||this,o=yA(s,i);return e.bounds==="ticks"&&Uk(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const s=(r-n)/Math.max(e.length-1,1)/2;n-=s,r+=s}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return rf(e,this.chart.options.locale,this.options.ticks.format)}}class tb extends vA{static id="linear";static defaults={ticks:{callback:bv.formatters.numeric}};determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Ht(e)?e:0,this.max=Ht(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=Wt(this.options.ticks.minRotation),s=(e?Math.sin(r):Math.cos(r))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,i.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const uc={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},mn=Object.keys(uc);function wg(t,e){return t-e}function xg(t,e){if(wt(e))return null;const n=t._adapter,{parser:r,round:s,isoWeekday:i}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),Ht(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(s&&(o=s==="week"&&(Ns(i)||i===!0)?n.startOf(o,"isoWeek",i):n.startOf(o,s)),+o)}function kg(t,e,n,r){const s=mn.length;for(let i=mn.indexOf(t);i<s-1;++i){const o=uc[mn[i]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return mn[i]}return mn[s-1]}function bA(t,e,n,r,s){for(let i=mn.length-1;i>=mn.indexOf(n);i--){const o=mn[i];if(uc[o].common&&t._adapter.diff(s,r,o)>=e-1)return o}return mn[n?mn.indexOf(n):0]}function _A(t){for(let e=mn.indexOf(t)+1,n=mn.length;e<n;++e)if(uc[mn[e]].common)return mn[e]}function Cg(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:s}=ef(n,e),i=n[r]>=e?n[r]:n[s];t[i]=!0}}function wA(t,e,n,r){const s=t._adapter,i=+s.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=i;a<=o;a=+s.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function Sg(t,e,n){const r=[],s={},i=e.length;let o,a;for(o=0;o<i;++o)a=e[o],s[a]=o,r.push({value:a,major:!1});return i===0||!n?r:wA(t,r,s,n)}class Pg extends $i{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),s=this._adapter=new yS._date(e.adapters.date);s.init(n),Eo(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:xg(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:s,max:i,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!a&&!isNaN(c.max)&&(i=Math.max(i,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=Ht(s)&&!isNaN(s)?s:+n.startOf(Date.now(),r),i=Ht(i)&&!isNaN(i)?i:+n.endOf(Date.now(),r)+1,this.min=Math.min(s,i-1),this.max=Math.max(s+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const i=this.min,o=this.max,a=Hk(s,i,o);return this._unit=n.unit||(r.autoSkip?kg(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):bA(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:_A(this._unit),this.initOffsets(s),e.reverse&&a.reverse(),Sg(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,s,i;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?n=1-s:n=(this.getDecimalForValue(e[1])-s)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?r=i:r=(i-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=Ln(n,0,o),r=Ln(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,s=this.options,i=s.time,o=i.unit||kg(i.minUnit,n,r,this._getLabelCapacity(n)),a=Qe(s.ticks.stepSize,1),l=o==="week"?i.isoWeekday:!1,c=Ns(l)||l===!0,u={};let f=n,p,m;if(c&&(f=+e.startOf(f,"isoWeek",l)),f=+e.startOf(f,c?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const v=s.ticks.source==="data"&&this.getDataTimestamps();for(p=f,m=0;p<r;p=+e.add(p,a,o),m++)Cg(u,p,v);return(p===r||s.bounds==="ticks"||m===1)&&Cg(u,p,v),Object.keys(u).sort(wg).map(_=>+_)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const s=this.options.time.displayFormats,i=this._unit,o=n||s[i];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,s){const i=this.options,o=i.ticks.callback;if(o)return gt(o,[e,n,r],this);const a=i.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],f=c&&a[c],p=r[n],m=c&&f&&p&&p.major;return this._adapter.format(e,s||(m?f:u))}generateTickLabels(e){let n,r,s;for(n=0,r=e.length;n<r;++n)s=e[n],s.label=this._tickFormatFunction(s.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,s=Wt(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(s),o=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:r*i+a*o,h:r*o+a*i}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,s=r[n.unit]||r.millisecond,i=this._tickFormatFunction(e,0,Sg(this,[e],this._majorUnit),s),o=this._getLabelSize(i),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,r=s.length;n<r;++n)e=e.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const s=this.getLabels();for(n=0,r=s.length;n<r;++n)e.push(xg(this,s[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Yk(e.sort(wg))}}function Ja(t,e,n){let r=0,s=t.length-1,i,o,a,l;n?(e>=t[r].pos&&e<=t[s].pos&&({lo:r,hi:s}=Ds(t,"pos",e)),{pos:i,time:a}=t[r],{pos:o,time:l}=t[s]):(e>=t[r].time&&e<=t[s].time&&({lo:r,hi:s}=Ds(t,"time",e)),{time:i,pos:a}=t[r],{time:o,pos:l}=t[s]);const c=o-i;return c?a+(l-a)*(e-i)/c:a}class oL extends Pg{static id="timeseries";static defaults=Pg.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Ja(n,this.min),this._tableRange=Ja(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,s=[],i=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=r&&s.push(c);if(s.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=s.length;o<a;++o)u=s[o+1],l=s[o-1],c=s[o],Math.round((u+l)/2)!==c&&i.push({time:c,pos:o/(a-1)});return i}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((s,i)=>s-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(Ja(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return Ja(this._table,r*this._tableRange+this._minPos,!0)}}const nb={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},xA={ariaLabel:{type:String},ariaDescribedby:{type:String}},kA={type:{type:String,required:!0},destroyDelay:{type:Number,default:0},...nb,...xA},CA=Ly[0]==="2"?(t,e)=>Object.assign(t,{attrs:e}):(t,e)=>Object.assign(t,e);function ai(t){return Xo(t)?tt(t):t}function SA(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t;return Xo(e)?new Proxy(t,{}):t}function PA(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function rb(t,e){t.labels=e}function sb(t,e,n){const r=[];t.datasets=e.map(s=>{const i=t.datasets.find(o=>o[n]===s[n]);return!i||!s.data||r.includes(i)?{...s}:(r.push(i),Object.assign(i,s),i)})}function AA(t,e){const n={labels:[],datasets:[]};return rb(n,t.labels),sb(n,t.datasets,e),n}const EA=et({props:kA,setup(t,e){let{expose:n,slots:r}=e;const s=ge(null),i=Xl(null);n({chart:i});const o=()=>{if(!s.value)return;const{type:c,data:u,options:f,plugins:p,datasetIdKey:m}=t,v=AA(u,m),_=SA(v,u);i.value=new es(s.value,{type:c,data:_,options:{...f},plugins:p})},a=()=>{const c=tt(i.value);c&&(t.destroyDelay>0?setTimeout(()=>{c.destroy(),i.value=null},t.destroyDelay):(c.destroy(),i.value=null))},l=c=>{c.update(t.updateMode)};return Nn(o),Fi(a),on([()=>t.options,()=>t.data],(c,u)=>{let[f,p]=c,[m,v]=u;const _=tt(i.value);if(!_)return;let k=!1;if(f){const C=ai(f),A=ai(m);C&&C!==A&&(PA(_,C),k=!0)}if(p){const C=ai(p.labels),A=ai(v.labels),P=ai(p.datasets),S=ai(v.datasets);C!==A&&(rb(_.config.data,C),k=!0),P&&P!==S&&(sb(_.config.data,P,t.datasetIdKey),k=!0)}k&&En(()=>{l(_)})},{deep:!0}),()=>Ar("canvas",{role:"img",ariaLabel:t.ariaLabel,ariaDescribedby:t.ariaDescribedby,ref:s},[Ar("p",{},[r.default?r.default():""])])}});function IA(t,e){return es.register(e),et({props:nb,setup(n,r){let{expose:s}=r;const i=Xl(null),o=a=>{i.value=a?.chart};return s({chart:i}),()=>Ar(EA,CA({ref:o},{type:t,...n}))}})}const ib=IA("line",mS),OA={class:"chart-container"},MA=et({__name:"PortfolioValueChart",setup(t){es.register(eb,tb,Vv,na,Qv,Zv,Gv,eA);const e=ge([]),n=He(()=>{const s=[...e.value].sort((a,l)=>new Date(a.asOf).getTime()-new Date(l.asOf).getTime()),i=s.map(a=>new Date(a.asOf).toLocaleDateString()),o=s.map(a=>new Be(a.totalValue,"EUR").getDecimal());return{labels:i,datasets:[{label:"Portfolio Value",backgroundColor:"rgba(75, 192, 192, 0.2)",borderColor:"rgba(75, 192, 192, 1)",data:o,fill:!0,tension:.4}]}}),r={responsive:!0,maintainAspectRatio:!1,scales:{y:{ticks:{callback:function(s){return typeof s=="number"?new Be(s*100,"EUR").format("de-DE"):s}}}},plugins:{legend:{display:!1}}};return Nn(async()=>{try{e.value=await rd.getAll()}catch(s){console.error("Error fetching valuation data:",s)}}),(s,i)=>(q(),J("div",OA,[qe(Re(ib),{data:n.value,options:r},null,8,["data"])]))}}),TA=hn(MA,[["__scopeId","data-v-7346e7bf"]]);class Fn{static BASE_URL="https://api.scryfall.com";static lastRequestTime=0;static RATE_LIMIT_DELAY=100;static async enforceRateLimit(){const n=Date.now()-this.lastRequestTime;if(n<this.RATE_LIMIT_DELAY){const r=this.RATE_LIMIT_DELAY-n;await new Promise(s=>setTimeout(s,r))}this.lastRequestTime=Date.now()}static async getPriceById(e){try{await this.enforceRateLimit();const n=await fetch(`${this.BASE_URL}/cards/${e}`);if(!n.ok)return null;const s=(await n.json()).prices?.eur;return s?Be.parse(s,"EUR"):null}catch(n){return console.error("Error fetching price from Scryfall:",n),null}}static async getPriceBySetAndNumber(e,n){try{await this.enforceRateLimit();const r=await fetch(`${this.BASE_URL}/cards/${e}/${n}`);if(!r.ok)return null;const i=(await r.json()).prices?.eur;return i?Be.parse(i,"EUR"):null}catch(r){return console.error("Error fetching price from Scryfall:",r),null}}static async getImageUrlById(e){try{await this.enforceRateLimit();const n=await fetch(`${this.BASE_URL}/cards/${e}`);if(!n.ok)return null;const r=await n.json();return(r.layout==="transform"||r.layout==="modal_dfc"||r.layout==="reversible_card")&&r.card_faces&&r.card_faces.length===2?{front:r.card_faces[0].image_uris?.normal||r.card_faces[0].image_uris?.large||r.card_faces[0].image_uris?.small||"",back:r.card_faces[1].image_uris?.normal||r.card_faces[1].image_uris?.large||r.card_faces[1].image_uris?.small||"",layout:r.layout}:r.image_uris?{front:r.image_uris.normal||r.image_uris.large||r.image_uris.small||"",back:"",layout:r.layout||"normal"}:r.card_faces&&r.card_faces.length>0&&r.card_faces[0].image_uris?{front:r.card_faces[0].image_uris.normal||r.card_faces[0].image_uris.large||r.card_faces[0].image_uris.small||"",back:"",layout:r.layout||"normal"}:{front:r.image_uris?.normal||r.image_uris?.large||r.image_uris?.small||"",back:"",layout:r.layout||"normal"}}catch(n){return console.error("Error fetching image from Scryfall:",n),null}}static async getImageUrlBySetAndNumber(e,n){try{await this.enforceRateLimit();const r=await fetch(`${this.BASE_URL}/cards/${e}/${n}`);if(!r.ok)return null;const s=await r.json();return(s.layout==="transform"||s.layout==="modal_dfc"||s.layout==="reversible_card")&&s.card_faces&&s.card_faces.length===2?{front:s.card_faces[0].image_uris?.normal||s.card_faces[0].image_uris?.large||s.card_faces[0].image_uris?.small||"",back:s.card_faces[1].image_uris?.normal||s.card_faces[1].image_uris?.large||s.card_faces[1].image_uris?.small||"",layout:s.layout}:s.image_uris?{front:s.image_uris.normal||s.image_uris.large||s.image_uris.small||"",back:"",layout:s.layout||"normal"}:s.card_faces&&s.card_faces.length>0&&s.card_faces[0].image_uris?{front:s.card_faces[0].image_uris.normal||s.card_faces[0].image_uris.large||s.card_faces[0].image_uris.small||"",back:"",layout:s.layout||"normal"}:{front:s.image_uris?.normal||s.image_uris?.large||s.image_uris?.small||"",back:"",layout:s.layout||"normal"}}catch(r){return console.error("Error fetching image from Scryfall:",r),null}}static async getByCardmarketId(e){try{await this.enforceRateLimit();const n=await fetch(`${this.BASE_URL}/cards/cardmarket/${e}`);if(!n.ok){console.error(`Scryfall API error for cardmarket_id ${e}: ${n.status} ${n.statusText}`);try{const r=await n.text();console.error(`Scryfall API error details: ${r}`)}catch{console.error("Could not read error response body")}return null}return await n.json()}catch(n){return console.error("Error fetching card by Cardmarket ID from Scryfall:",n),null}}static async getByCardmarketIds(e){try{if(!e||e.length===0)return[];if(e.length===1){const s=await this.getByCardmarketId(e[0]);return s?[s]:[]}await this.enforceRateLimit();const n=await fetch(`${this.BASE_URL}/cards/collection`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifiers:e.map(s=>({cardmarket_id:s}))})});if(!n.ok){console.error(`Scryfall API error for batch cardmarket_ids: ${n.status} ${n.statusText}`);try{const s=await n.text();console.error(`Scryfall API error details: ${s}`)}catch{console.error("Could not read error response body")}return await this.getByCardmarketIdsIndividually(e)}return(await n.json()).data||[]}catch(n){return console.error("Error fetching cards by Cardmarket IDs from Scryfall:",n),await this.getByCardmarketIdsIndividually(e)}}static async getPricesByIds(e){try{if(!e||e.length===0)return[];if(e.length===1){const i=await this.getPriceById(e[0]);return i?[{[e[0]]:{eur:i.getCents()/100}}]:[]}await this.enforceRateLimit();const n=await fetch(`${this.BASE_URL}/cards/collection`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifiers:e.map(i=>({id:i}))})});if(!n.ok){console.error(`Scryfall API error for batch price fetching: ${n.status} ${n.statusText}`);try{const i=await n.text();console.error(`Scryfall API error details: ${i}`)}catch{console.error("Could not read error response body")}return await this.getPricesByIdsIndividually(e)}const r=await n.json(),s=[];if(r.data&&Array.isArray(r.data))for(const i of r.data)i.id&&i.prices&&s.push({[i.id]:{eur:i.prices.eur?parseFloat(i.prices.eur):void 0,eur_foil:i.prices.eur_foil?parseFloat(i.prices.eur_foil):void 0}});return s}catch(n){return console.error("Error fetching prices by Scryfall IDs from Scryfall:",n),await this.getPricesByIdsIndividually(e)}}static async getPricesByIdsIndividually(e){const n=[];for(const r of e)try{const s=await fetch(`${this.BASE_URL}/cards/${r}`);if(s.ok){const i=await s.json();i.prices&&n.push({[r]:{eur:i.prices.eur?parseFloat(i.prices.eur):void 0,eur_foil:i.prices.eur_foil?parseFloat(i.prices.eur_foil):void 0}})}}catch(s){console.error(`Error fetching price for card ${r}:`,s)}return n}static async getByCardmarketIdsIndividually(e){const n=[];for(const r of e){const s=await this.getByCardmarketId(r);s&&n.push(s)}return n}static async hydrateCard(e){try{if(e.scryfall_id){await this.enforceRateLimit();const n=await fetch(`${this.BASE_URL}/cards/${e.scryfall_id}`);if(n.ok)return await n.json()}if(e.setCode&&e.collectorNumber){await this.enforceRateLimit();const n=await fetch(`${this.BASE_URL}/cards/${e.setCode}/${e.collectorNumber}`);if(n.ok)return await n.json()}if(e.name&&e.setCode){await this.enforceRateLimit();let n=await fetch(`${this.BASE_URL}/cards/named?exact=${encodeURIComponent(e.name)}&set=${encodeURIComponent(e.setCode)}`);if(n.ok)return await n.json();if(e.version&&(await this.enforceRateLimit(),n=await fetch(`${this.BASE_URL}/cards/named?exact=${encodeURIComponent(e.name)}&set=${encodeURIComponent(e.setCode)}&include_variations=true`),n.ok))return await n.json();if(await this.enforceRateLimit(),n=await fetch(`${this.BASE_URL}/cards/named?fuzzy=${encodeURIComponent(e.name)}&set=${encodeURIComponent(e.setCode)}`),n.ok)return await n.json()}return null}catch(n){return console.error("Error hydrating card with Scryfall data:",n),null}}}class DA{static BATCH_SIZE=75;static async syncPrices(e){try{const n=new Date,r=n.toISOString().split("T")[0],s=await $n.getAll(),i=s.length;let o=0;for(let a=0;a<s.length;a+=this.BATCH_SIZE){const l=s.slice(a,a+this.BATCH_SIZE),c=l.map(u=>u.id);try{const u=await Fn.getPricesByIds(c);for(const f of u)for(const[p,m]of Object.entries(f)){if(m.eur!==void 0){const v=Be.parse(m.eur.toString(),"EUR"),_="nonfoil",C={id:`${p}:scryfall:${_}:${r}`,cardId:p,provider:"scryfall",finish:_,date:r,currency:"EUR",priceCent:v.getCents(),asOf:n,createdAt:n};await we.price_points.put(C)}if(m.eur_foil!==void 0){const v=Be.parse(m.eur_foil.toString(),"EUR"),k={id:`${p}:scryfall:foil:${r}`,cardId:p,provider:"scryfall",finish:"foil",date:r,currency:"EUR",priceCent:v.getCents(),asOf:n,createdAt:n};await we.price_points.put(k)}o++,e&&e(o,i)}}catch(u){console.error(`Error syncing prices for batch starting at index ${a}:`,u),o+=l.length,e&&e(o,i)}}try{await Gr.createValuationSnapshot(),console.log("Valuation snapshot created after price update")}catch(a){console.error("Error creating valuation snapshot after price update:",a)}}catch(n){throw console.error("Error syncing prices:",n),n}}static async syncPriceForCard(e){try{const n=new Date,r=n.toISOString().split("T")[0],s=await $n.getById(e);if(!s){console.warn(`Card with ID ${e} not found`);return}const i=await Fn.getPricesByIds([s.id]);if(i.length>0){const a=i[0][s.id];if(a.eur!==void 0){const l=Be.parse(a.eur.toString(),"EUR"),u={id:`${s.id}:scryfall:nonfoil:${r}`,cardId:s.id,provider:"scryfall",finish:"nonfoil",date:r,currency:"EUR",priceCent:l.getCents(),asOf:n,createdAt:n};await we.price_points.put(u)}if(a.eur_foil!==void 0){const l=Be.parse(a.eur_foil.toString(),"EUR"),u={id:`${s.id}:scryfall:foil:${r}`,cardId:s.id,provider:"scryfall",finish:"foil",date:r,currency:"EUR",priceCent:l.getCents(),asOf:n,createdAt:n};await we.price_points.put(u)}}}catch(n){throw console.error(`Error syncing price for card ${e}:`,n),n}}static async needsPriceUpdate(){try{const e=await we.price_points.orderBy("asOf").last();if(!e)return!0;const n=new Date,r=new Date(e.asOf);return(n.getTime()-r.getTime())/(1e3*60*60)>=24}catch(e){return console.error("Error checking if price update is needed:",e),!0}}static async needsPriceUpdateForCard(e){try{const n=await sd.getLatestPriceForCard(e);if(!n)return!0;const r=new Date,s=new Date(n.asOf);return(r.getTime()-s.getTime())/(1e3*60*60)>=24}catch(n){return console.error(`Error checking if price update is needed for card ${e}:`,n),!0}}static async getLatestPriceForCard(e){try{const n=await sd.getLatestPriceForCard(e);return n?{price:n.price.getCents(),asOf:n.asOf,provider:n.provider}:null}catch(n){return console.error(`Error getting latest price for card ${e}:`,n),null}}}class fi{static async needsPriceUpdate(){try{const e=await wi.get("last_price_update_timestamp");if(!e)return!0;const n=Date.now(),r=new Date(e).getTime();return(n-r)/(1e3*60*60)>=24}catch(e){return console.error("Error checking if price update is needed:",e),!0}}static async schedulePriceUpdate(){try{await this.needsPriceUpdate()&&await this.updatePrices()}catch(e){throw console.error("Error scheduling price update:",e),e}}static async updatePrices(){const e=_i(),n=e.addImport({id:`price-update-${Date.now()}`,type:"pricing",name:"Price Updates",status:"pending",progress:0,totalItems:0,processedItems:0});try{await DA.syncPrices((s,i)=>{e.updateImport(n,{status:"processing",progress:Math.round(s/i*100),totalItems:i,processedItems:s})});const r=new Date().toISOString();await wi.set("last_price_update_timestamp",r),await Gr.createValuationSnapshot(),e.completeImport(n),console.log(`Prices updated successfully at ${r}`)}catch(r){throw console.error("Error updating prices:",r),e.completeImport(n,r instanceof Error?r.message:"Unknown error"),r}}static async getLastUpdateTime(){try{const e=await wi.get("last_price_update_timestamp");return e?new Date(e):null}catch(e){return console.error("Error getting last update time:",e),null}}static async getNextUpdateTime(){try{const e=await this.getLastUpdateTime();return e?new Date(e.getTime()+1440*60*1e3):new Date}catch(e){return console.error("Error calculating next update time:",e),null}}}const Ag=ge(null),Eg=ge(null),_s=ge(!1);function RA(){const t=s=>s?s.toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Never",e=async()=>{try{Ag.value=await fi.getLastUpdateTime(),Eg.value=await fi.getNextUpdateTime()}catch(s){console.error("Error updating price info:",s)}};return{lastUpdate:Ag,nextUpdate:Eg,isUpdating:_s,formatDate:t,updatePriceInfo:e,checkAndScheduleUpdate:async()=>{if(!_s.value){_s.value=!0;try{await fi.needsPriceUpdate()&&(await fi.schedulePriceUpdate(),await Gr.createValuationSnapshot()),await e()}catch(s){console.error("Error scheduling price update:",s)}finally{_s.value=!1}}},forceUpdatePrices:async()=>{if(!_s.value){_s.value=!0;try{await fi.updatePrices(),await Gr.createValuationSnapshot(),await e()}catch(s){throw console.error("Error updating prices:",s),s}finally{_s.value=!1}}}}}const FA={class:"home"},$A={class:"row"},LA={class:"col-lg-9"},BA={class:"card mb-4"},jA={class:"card-body"},NA={class:"col-lg-3"},zA={class:"card mb-4"},UA={class:"card-body"},qA={class:"small text-muted mb-1"},WA=["disabled"],VA={class:"card"},HA={class:"card-body"},KA={class:"small"},YA={class:"d-flex justify-content-between"},GA={class:"fw-medium"},XA={class:"d-flex justify-content-between"},QA={class:"fw-medium"},JA={class:"d-flex justify-content-between"},ZA={class:"row g-4"},eE={class:"col-lg-3 col-md-6"},tE={class:"card h-100"},nE={class:"card-body"},rE={class:"col-lg-3 col-md-6"},sE={class:"card h-100"},iE={class:"card-body"},oE={class:"col-lg-3 col-md-6"},aE={class:"card h-100"},lE={class:"card-body"},cE={class:"stat-value text-success"},uE={class:"col-lg-3 col-md-6"},dE={class:"card h-100"},fE={class:"card-body"},hE={class:"stat-value text-danger"},pE={class:"row mt-4"},gE={class:"col-12"},mE={class:"card"},yE={class:"card-body"},vE={class:"row"},bE={class:"col-md-3"},_E={class:"stat-value text-success"},wE={class:"col-md-3"},xE={class:"stat-value text-danger"},kE={class:"col-md-3"},CE={class:"stat-value text-danger"},SE={class:"col-md-3"},PE={class:"stat-value text-danger"},AE=et({__name:"HomeView",setup(t){const e=Yd(),n=ak(),r=lk(),{formatDate:s,checkAndScheduleUpdate:i,forceUpdatePrices:o,lastUpdate:a,nextUpdate:l,isUpdating:c}=RA(),u=ge("€0.00"),f=ge("€0.00"),p=ge("€0.00"),m=ge("€0.00"),v=ge("€0.00"),_=ge("€0.00"),k=ge("€0.00"),C=ge("€0.00"),A=ge("€0.00"),P=ge("€0.00"),S=ge("€0.00"),M=V=>V.format("de-DE"),T=async()=>{try{await e.loadCards(),await n.loadHoldings(),await r.loadTransactions();const V=await Gr.calculatePortfolioValue(),E=await Gr.calculateTotalCostBasis(),Z=await Gr.calculateUnrealizedPnL(),K=await Gr.calculateRealizedPnL();u.value=M(V),f.value=M(E),p.value=M(Z),m.value=M(K);const j=await Is.getTotalRevenue(),de=await Is.getTotalCosts(),pe=await Is.getTotalFees(),Ae=await Is.getTotalShippingCosts("purchase"),Ce=await Is.getTotalShippingCosts("sale"),Pe=await Is.getTotalNetProfit();v.value=M(j),_.value=M(de),C.value=M(j),A.value=M(de),P.value=M(pe),S.value=M(Ae.subtract(Ce)),k.value=M(Pe)}catch(V){console.error("Error loading dashboard data:",V)}},X=async()=>{try{await o(),await T()}catch(V){console.error("Error refreshing prices:",V)}};return Nn(async()=>{await T(),setTimeout(async()=>{await i()},0)}),(V,E)=>(q(),J("div",FA,[w("div",$A,[E[6]||(E[6]=w("div",{class:"col-12"},[w("h1",{class:"mb-4"},"MTG Collection Tracker")],-1)),w("div",LA,[w("div",BA,[w("div",jA,[E[0]||(E[0]=w("h5",{class:"card-title"},"Portfolio Value Over Time",-1)),qe(TA)])])]),w("div",NA,[w("div",zA,[w("div",UA,[E[1]||(E[1]=w("h5",{class:"card-title"},"Price Updates",-1)),w("div",qA," Last: "+oe(Re(s)(Re(a)))+" | Next: "+oe(Re(s)(Re(l))),1),w("button",{onClick:X,class:"btn btn-sm btn-link p-0",disabled:Re(c)},oe(Re(c)?"Updating...":"Refresh Now"),9,WA)])]),w("div",VA,[w("div",HA,[E[5]||(E[5]=w("h5",{class:"card-title"},"Quick Stats",-1)),w("div",KA,[w("div",YA,[E[2]||(E[2]=w("span",{class:"text-muted"},"Portfolio Value:",-1)),w("span",GA,oe(u.value),1)]),w("div",XA,[E[3]||(E[3]=w("span",{class:"text-muted"},"Total Cost:",-1)),w("span",QA,oe(f.value),1)]),w("div",JA,[E[4]||(E[4]=w("span",{class:"text-muted"},"Net Profit/Loss:",-1)),w("span",{class:vt(["fw-medium",parseFloat(k.value)>=0?"text-success":"text-danger"])},oe(k.value),3)])])])])])]),w("div",ZA,[w("div",eE,[w("div",tE,[w("div",nE,[E[7]||(E[7]=w("h5",{class:"card-title"},"Unrealized P/L",-1)),w("p",{class:vt(["stat-value",parseFloat(p.value)>=0?"positive":"negative"])},oe(p.value),3)])])]),w("div",rE,[w("div",sE,[w("div",iE,[E[8]||(E[8]=w("h5",{class:"card-title"},"Realized P/L",-1)),w("p",{class:vt(["stat-value",parseFloat(m.value)>=0?"positive":"negative"])},oe(m.value),3)])])]),w("div",oE,[w("div",aE,[w("div",lE,[E[9]||(E[9]=w("h5",{class:"card-title"},"Total Revenue",-1)),w("p",cE,oe(v.value),1)])])]),w("div",uE,[w("div",dE,[w("div",fE,[E[10]||(E[10]=w("h5",{class:"card-title"},"Total Costs",-1)),w("p",hE,oe(_.value),1)])])])]),w("div",pE,[w("div",gE,[w("div",mE,[w("div",yE,[E[15]||(E[15]=w("h5",{class:"card-title"},"Financial Breakdown",-1)),w("div",vE,[w("div",bE,[E[11]||(E[11]=w("h6",{class:"text-muted"},"Sales Revenue",-1)),w("p",_E,oe(C.value),1)]),w("div",wE,[E[12]||(E[12]=w("h6",{class:"text-muted"},"Purchase Costs",-1)),w("p",xE,oe(A.value),1)]),w("div",kE,[E[13]||(E[13]=w("h6",{class:"text-muted"},"Fees & Commission",-1)),w("p",CE,oe(P.value),1)]),w("div",SE,[E[14]||(E[14]=w("h6",{class:"text-muted"},"Shipping Costs",-1)),w("p",PE,oe(S.value),1)])])])])])])]))}}),EE=hn(AE,[["__scopeId","data-v-07c51ba5"]]),gn=t=>t.toLowerCase().normalize("NFKD").replace(new RegExp("\\p{Diacritic}","gu"),"").replace(/[\s–—-]+/g," ").replace(/[:'"]/g,"").trim();function Ci(t){const e=new Map;for(const n of t)e.set(gn(n.name),n);return{byName:e}}async function Ig(t){const e=t.trim(),n=gn(e),r=await Og(),i=(await IE()).get(n);if(i)return console.log(`Set code resolved from alias: ${e} -> ${i}`),i;const o=r.byName.get(n);if(o)return console.log(`Set code resolved from exact match: ${e} -> ${o.code}`),await wn(n,o.code),o.code;if(/^commander:\s*/i.test(e)&&/: extras$/i.test(e)){const c=e.replace(/^commander:\s*/i,"").replace(/: extras$/i,"").trim(),u=r.byName.get(gn(`${c} Commander`));if(u)return console.log(`Set code resolved from commander + extras nested: ${e} -> ${u.code}`),await wn(n,u.code),u.code;const f=r.byName.get(gn(c));if(f)return console.log(`Set code resolved from commander + extras nested (base): ${e} -> ${f.code}`),await wn(n,f.code),f.code}if(/^commander:\s*/i.test(e)){const c=e.replace(/^commander:\s*/i,"").trim(),u=r.byName.get(gn(`${c} Commander`));if(u)return console.log(`Set code resolved from commander rewrite (commander): ${e} -> ${u.code}`),await wn(n,u.code),u.code;const f=r.byName.get(gn(c));if(f)return console.log(`Set code resolved from commander rewrite (base): ${e} -> ${f.code}`),await wn(n,f.code),f.code}if(/: extras$/i.test(e)){const c=gn(e.replace(/: extras$/i,"")),u=r.byName.get(c);if(u)return console.log(`Set code resolved from extras suffix: ${e} -> ${u.code}`),await wn(n,u.code),u.code}if(/^universes beyond:\s*/i.test(e)){const c=e.replace(/^universes beyond:\s*/i,"").trim();if(/: extras$/i.test(c)){const f=gn(c.replace(/: extras$/i,"")),p=r.byName.get(f);if(p)return console.log(`Set code resolved from universes beyond + extras: ${e} -> ${p.code}`),await wn(n,p.code),p.code}const u=r.byName.get(gn(c));if(u)return console.log(`Set code resolved from universes beyond: ${e} -> ${u.code}`),await wn(n,u.code),u.code}if(/^magic: the gathering -\s*/i.test(e)){const c=e.replace(/^magic: the gathering -\s*/i,"").trim();if(/: extras$/i.test(c)){const f=gn(c.replace(/: extras$/i,"")),p=r.byName.get(f);if(p)return console.log(`Set code resolved from magic: the gathering - extras: ${e} -> ${p.code}`),await wn(n,p.code),p.code}const u=r.byName.get(gn(c));if(u)return console.log(`Set code resolved from magic: the gathering -: ${e} -> ${u.code}`),await wn(n,u.code),u.code}if(/^secret lair drop series:/i.test(e)){const c=e.replace(/^secret lair drop series:/i,"").trim();if(/: extras$/i.test(c)){const f=gn(c.replace(/: extras$/i,"")),p=r.byName.get(f);if(p)return console.log(`Set code resolved from secret lair drop series + extras: ${e} -> ${p.code}`),await wn(n,p.code),p.code}const u=r.byName.get(gn(c));if(u)return console.log(`Set code resolved from secret lair drop series: ${e} -> ${u.code}`),await wn(n,u.code),u.code}console.log(`Set code unresolved: ${e}`),await ob();const l=(await Og()).byName.get(n);return l?(console.log(`Set code resolved from fresh exact match: ${e} -> ${l.code}`),l.code):(await wn(n,null),null)}async function Og(){try{const t=Date.now()-6048e5,e=await we.settings.get("scryfall_sets_cache");return e&&e.v&&e.v.fetchedAt>t?(console.log("Using cached Scryfall sets data"),Ci(e.v.sets)):(console.log("Refreshing Scryfall sets cache (no cache or old cache)"),await ob())}catch(t){console.error("Error in getSetIndex:",t);try{const e=await we.settings.get("scryfall_sets_cache");if(e&&e.v)return console.log("Using old cached Scryfall sets data due to error"),Ci(e.v.sets)}catch(e){console.error("Error accessing cached Scryfall sets data:",e)}return console.log("Returning empty Scryfall sets index"),Ci([])}}async function ob(){try{console.log("Fetching Scryfall sets data...");const t=await fetch("https://api.scryfall.com/sets");if(!t.ok)throw new Error(`Failed to fetch sets: ${t.status} ${t.statusText}`);const n=(await t.json()).data||[];return console.log(`Fetched ${n.length} Scryfall sets`),await we.settings.put({k:"scryfall_sets_cache",v:{sets:n,fetchedAt:Date.now()},createdAt:new Date,updatedAt:new Date}),Ci(n)}catch(t){console.error("Error refreshing Scryfall sets cache:",t);try{const e=await we.settings.get("scryfall_sets_cache");if(e&&e.v)return console.log("Using old cached Scryfall sets data due to fetch error"),Ci(e.v.sets)}catch(e){console.error("Error accessing cached Scryfall sets data:",e)}return console.log("Returning empty Scryfall sets index due to errors"),Ci([])}}async function IE(){const t=new Map,e=await we.settings.get("set_code_aliases");if(e&&e.v)for(const[n,r]of Object.entries(e.v))t.set(n,r);return t}async function wn(t,e){try{const n=gn(t),r=await we.settings.get("set_code_aliases");let s={};r&&r.v&&(s={...r.v}),s[n]=e,await we.settings.put({k:"set_code_aliases",v:s,createdAt:r?.createdAt||new Date,updatedAt:new Date})}catch(n){console.error("Error storing set code alias:",n)}}const Kt=[];for(let t=0;t<256;++t)Kt.push((t+256).toString(16).slice(1));function OE(t,e=0){return(Kt[t[e+0]]+Kt[t[e+1]]+Kt[t[e+2]]+Kt[t[e+3]]+"-"+Kt[t[e+4]]+Kt[t[e+5]]+"-"+Kt[t[e+6]]+Kt[t[e+7]]+"-"+Kt[t[e+8]]+Kt[t[e+9]]+"-"+Kt[t[e+10]]+Kt[t[e+11]]+Kt[t[e+12]]+Kt[t[e+13]]+Kt[t[e+14]]+Kt[t[e+15]]).toLowerCase()}let xu;const ME=new Uint8Array(16);function TE(){if(!xu){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");xu=crypto.getRandomValues.bind(crypto)}return xu(ME)}const DE=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Mg={randomUUID:DE};function RE(t,e,n){t=t||{};const r=t.random??t.rng?.()??TE();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,OE(r)}function pl(t,e,n){return Mg.randomUUID&&!t?Mg.randomUUID():RE(t)}class Rs{static async importCardmarketTransactions(e){const n=_i(),r=pl();n.addImport({id:r,type:"cardmarket",name:"Cardmarket Transactions",status:"pending",progress:0,totalItems:e.length,processedItems:0});try{const s=new Date;for(let i=0;i<e.length;i++){const o=e[i];n.updateImport(r,{status:"processing",processedItems:i+1,progress:Math.round((i+1)/e.length*100)});const a=`cardmarket:${o.reference}:${o.lineNumber}`;if(await we.transactions.where("externalRef").equals(a).first())continue;const c=Be.parse(o.amount,"EUR"),u={id:`tx-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,kind:c.isPositive()?"SELL":"BUY",quantity:1,unitPrice:c.getCents(),fees:0,shipping:0,currency:"EUR",source:"cardmarket",externalRef:a,happenedAt:new Date(o.date),createdAt:s,updatedAt:s};await Sn.add(u)}n.completeImport(r)}catch(s){throw console.error("Error importing Cardmarket transactions:",s),n.completeImport(r,s.message),s}}static async importCardmarketOrders(e){const n=_i(),r=pl();n.addImport({id:r,type:"cardmarket",name:"Cardmarket Orders",status:"pending",progress:0,totalItems:e.length,processedItems:0});try{const s=new Date;for(let i=0;i<e.length;i++){const o=e[i];n.updateImport(r,{status:"processing",processedItems:i+1,progress:Math.round((i+1)/e.length*100)});const a=`cardmarket:order:${o.orderId}:${o.lineNumber}`;if(await we.transactions.where("externalRef").equals(a).first())continue;const c=Be.parse(o.merchandiseValue,"EUR"),u=Be.parse(o.shipmentCosts,"EUR"),f=Be.parse(o.commission,"EUR"),p={id:`order-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,kind:o.direction==="sale"?"SELL":"BUY",quantity:parseInt(o.articleCount)||1,unitPrice:Math.round(c.getCents()/(parseInt(o.articleCount)||1)),fees:f.getCents(),shipping:u.getCents(),currency:"EUR",source:"cardmarket",externalRef:a,happenedAt:new Date(o.dateOfPurchase),createdAt:s,updatedAt:s};if(await Sn.add(p),o.direction==="purchase"){const m=await we.transactions.where("externalRef").startsWith(`cardmarket:article:${o.orderId}:`).toArray();for(const v of m)if(v.lotId){const _=await Ft.getById(v.lotId);if(_){const k=parseInt(o.articleCount)||1,C=v.quantity/k,A=Is.calculateTrueAcquisitionCost(c.getCents()/100,u.getCents()/100,f.getCents()/100,k),P=Math.round(u.getCents()*C/v.quantity),S=Math.round(f.getCents()*C/v.quantity);await Ft.update(_.id,{acquisitionPriceCent:A,acquisitionFeesCent:S,acquisitionShippingCent:P,totalAcquisitionCostCent:A+S+P,updatedAt:s})}}}if(o.direction==="sale"){const m=await we.transactions.where("externalRef").startsWith(`cardmarket:article:${o.orderId}:`).toArray();for(const v of m)if(v.lotId){const _=await Ft.getById(v.lotId);if(_){const k=parseInt(o.articleCount)||1,C=v.quantity/k,A=Math.round(c.getCents()/k),P=Math.round(f.getCents()*C/v.quantity),S=Math.round(u.getCents()*C/v.quantity);await Ft.update(_.id,{salePriceCent:A,saleFeesCent:P,saleShippingCent:S,totalSaleRevenueCent:A-P+S,updatedAt:s})}}}}n.completeImport(r)}catch(s){throw console.error("Error importing Cardmarket orders:",s),n.completeImport(r,s.message),s}}static async importCardmarketArticles(e){const n=_i(),r=pl();n.addImport({id:r,type:"cardmarket",name:"Cardmarket Articles",status:"pending",progress:0,totalItems:e.length,processedItems:0});try{const s=new Date;for(let i=0;i<e.length;i++){const o=e[i];n.updateImport(r,{status:"processing",processedItems:i+1,progress:Math.round((i+1)/e.length*100)});const{cardId:a,cardData:l}=await this.resolveCard(o),c=Be.parse(o.price,"EUR");a&&await this.ensureCardInDb(a,l,o);let u;o.direction==="purchase"&&(u=await this.getOrCreateLotForPurchase(a,c,o)),await this.createTransactionForArticle(o,a,u,c,s)}n.completeImport(r)}catch(s){throw console.error("Error importing Cardmarket articles:",s),n.completeImport(r,s.message),s}}static async resolveCard(e){let n=null,r=null;if(e.productId){const s=e.productId.split(" | ").map(i=>i.trim());if(s.length===1)n=await Fn.getByCardmarketId(s[0]),console.log(JSON.stringify({product_ids:s,resolved_via:"cardmarket_id",cardmarket_id:s[0],final_uri:`/cards/cardmarket/${s[0]}`}));else if(s.length>1){const i=await Fn.getByCardmarketIds(s);i&&i.length>0&&(n=i[0],console.log(JSON.stringify({product_ids:s,resolved_via:"cardmarket_id",cardmarket_id:s[0],final_uri:"/cards/collection"})))}r=n?.id||null}if(!r){const s=await Ig(e.expansion),i=this.extractCollectorNumber(e.name);let o=e.name,a=null;const l=e.name.match(/^(.+?)\s*\((V\.\d+)\)$/i);l&&(o=l[1].trim(),a=l[2]),console.log(JSON.stringify({product_ids:e.productId?e.productId.split(" | ").map(c=>c.trim()):[],resolved_via:"set+cn",set_code:s,collector_number:i,final_uri:s?`/cards/${s}/${i}`:""})),n=await Fn.hydrateCard({name:o,setCode:s||e.expansion,collectorNumber:i,version:a}),r=n?.id||null,r||console.log(JSON.stringify({product_ids:e.productId?e.productId.split(" | ").map(c=>c.trim()):[],resolved_via:"none",set_code:null,collector_number:"",final_uri:"",name:e.name,expansion:e.expansion}))}return{cardId:r,cardData:n}}static extractCollectorNumber(e){const n=[/-\s*(\d+[a-zA-Z★]*)\s*-/i,/-\s*([IVXLCDM]+)\s*-/i,/\s+(\d+[a-zA-Z★]*)\s*$/i,/\((\d+[a-zA-Z★]*)\)/i];for(const r of n){const s=e.match(r);if(s)return s[1]}return""}static async ensureCardInDb(e,n,r){if(await $n.getById(e))await this.updatePriceForCard(e);else{const i=n||await Fn.hydrateCard({scryfall_id:e,name:r.name,setCode:r.expansion,collectorNumber:""}),o=await Fn.getImageUrlById(e),a={id:e,oracleId:i?.oracle_id||n?.oracle_id||"",name:r.name,set:i?.set_name||n?.set_name||r.expansion,setCode:i?.set||n?.set||await Ig(r.expansion)||"",number:i?.collector_number||n?.collector_number||this.extractCollectorNumber(r.name)||"",lang:i?.lang||n?.lang||"en",finish:"nonfoil",layout:o?.layout||"normal",imageUrl:o?.front||"",imageUrlBack:o?.back||"",cardmarketId:typeof i?.cardmarket_id=="number"?i.cardmarket_id:void 0,createdAt:new Date,updatedAt:new Date};await $n.add(a),await this.updatePriceForCard(e)}}static async updatePriceForCard(e){try{const n=new Date,r=n.toISOString().split("T")[0],s=`${e}:scryfall:${r}`;if(!await we.price_points.get(s)){const o=await Fn.getPriceById(e);if(o){const a={id:s,cardId:e,provider:"scryfall",finish:"nonfoil",date:n.toISOString().split("T")[0],currency:"EUR",priceCent:o.getCents(),asOf:n,createdAt:n};await we.price_points.put(a)}}}catch(n){console.error(`Error checking/updating price for existing card ${e}:`,n)}}static async getOrCreateLotForPurchase(e,n,r){const s=new Date,i=`cardmarket:lot:${r.shipmentId}:${r.lineNumber}`,o=await Ft.getByExternalRef(i);let a=null;if(o.length>0)a=o[0];else if(e){const l=await Ft.getByCardId(e);for(const c of l)if(!(await Sn.getByLotId(c.id)).some(p=>p.kind==="BUY")){a=c;break}}if(a)return await Ft.update(a.id,{unitCost:n.getCents(),source:"cardmarket",purchasedAt:new Date(r.dateOfPurchase),updatedAt:s,acquisitionPriceCent:n.getCents(),acquisitionFeesCent:0,acquisitionShippingCent:0,totalAcquisitionCostCent:n.getCents()}),a.id;{const l=`lot-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,c={id:l,cardId:e||"",quantity:parseInt(r.amount)||1,unitCost:n.getCents(),condition:"",language:"",foil:!1,finish:"nonfoil",source:"cardmarket",currency:"EUR",externalRef:i,purchasedAt:new Date(r.dateOfPurchase),acquisitionPriceCent:n.getCents(),acquisitionFeesCent:0,acquisitionShippingCent:0,totalAcquisitionCostCent:n.getCents(),createdAt:s,updatedAt:s};return await Ft.add(c),l}}static async createTransactionForArticle(e,n,r,s,i){const o=`cardmarket:article:${e.shipmentId}:${e.lineNumber}`;if(await we.transactions.where("externalRef").equals(o).first())return;const l={id:`article-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,kind:e.direction==="sale"?"SELL":"BUY",cardId:n||void 0,lotId:r,quantity:parseInt(e.amount)||1,unitPrice:s.getCents(),fees:0,shipping:0,currency:"EUR",source:"cardmarket",externalRef:o,happenedAt:new Date(e.dateOfPurchase),createdAt:i,updatedAt:i};await Sn.add(l)}static async checkForExistingImports(e){const n=[];for(const r of e){const s=`cardmarket:article:${r.shipmentId}:${r.lineNumber}`,i=await we.transactions.where("externalRef").equals(s).first();n.push({article:r,exists:!!i})}return n}}const FE={class:"csv-import"},$E={class:"import-section"},LE={class:"mb-3"},BE={class:"mb-3"},jE={class:"mb-3"},NE={class:"import-section"},zE={class:"mb-3"},UE=et({__name:"CsvImportView",setup(t){const e=ge(null),n=(a,l)=>{e.value={type:a,message:l},setTimeout(()=>{e.value=null},5e3)},r=async a=>{const l=a.target,c=l.files?.[0];if(c)try{const f=(await c.text()).split(`
`),p=f[0].split(";").map(v=>v.trim()),m=[];for(let v=1;v<f.length;v++){const _=f[v].trim();if(!_)continue;const k=_.split(";"),C={};for(let A=0;A<p.length;A++){const P=p[A].toLowerCase(),S=k[A]?k[A].trim():"";switch(P){case"reference":case"referenz":case"transaktions-id":C.reference=S;break;case"date":case"datum":case"date paid":C.date=S;break;case"category":case"kategorie":C.category=S;break;case"type":case"typ":C.type=S;break;case"counterpart":case"gegenpartei":C.counterpart=S;break;case"amount":case"betrag":C.amount=S;break;case"closing balance (eur)":case"balance after":case"saldo danach (eur)":C.balanceAfter=S;break}}C.reference&&(C.currency="EUR",m.push(C))}await Rs.importCardmarketTransactions(m),n("success",`Successfully imported ${m.length} transactions`),l.value=""}catch(u){console.error("Error importing transactions:",u),n("error","Failed to import transactions: "+u.message)}},s=async a=>{const l=a.target,c=l.files?.[0];if(c)try{const f=c.name.toLowerCase().includes("purchased")?"purchase":"sale",m=(await c.text()).split(`
`),v=m[0].split(";").map(k=>k.trim()),_=[];for(let k=1;k<m.length;k++){const C=m[k].trim();if(!C)continue;const A=C.split(";"),P={};for(let S=0;S<v.length;S++){const M=v[S].toLowerCase(),T=A[S]?A[S].trim():"";switch(M){case"order id":case"orderid":case"bestellnummer":P.orderId=T;break;case"date of purchase":case"date":case"date of payment":case"kaufdatum":case"zahlungsdatum":P.dateOfPurchase=T;break;case"username":case"benutzername":P.username=T;break;case"country":case"land":P.country=T;break;case"city":case"stadt":P.city=T;break;case"article count":case"items":case"anzahl artikel":P.articleCount=T;break;case"merchandise value":case"warenwert":P.merchandiseValue=T;break;case"shipment costs":case"versandkosten":P.shipmentCosts=T;break;case"commission":case"trustee service fee":case"provision":P.commission=T;break;case"total value":case"gesamtwert":P.totalValue=T;break}}P.orderId&&(P.direction=f,P.currency="EUR",_.push(P))}await Rs.importCardmarketOrders(_),n("success",`Successfully imported ${_.length} ${f} orders`),l.value=""}catch(u){console.error("Error importing orders:",u),n("error","Failed to import orders: "+u.message)}},i=async a=>{const l=a.target,c=l.files?.[0];if(c)try{const f=c.name.toLowerCase().includes("purchased")?"purchase":"sale",m=(await c.text()).split(`
`),v=m[0].split(";").map(k=>k.trim()),_=[];for(let k=1;k<m.length;k++){const C=m[k].trim();if(!C)continue;const A=C.split(";"),P={};for(let S=0;S<v.length;S++){const M=v[S].toLowerCase(),T=A[S]?A[S].trim():"";switch(M){case"shipment nr.":case"shipment nr":case"shipment id":case"order id":case"bestellnummer":P.shipmentId=T;break;case"date of purchase":case"date":P.dateOfPurchase=T;break;case"product id":case"produkt id":P.productId=T;break;case"article":case"artikel":case"localized product name":case"produktname":P.name=T;break;case"expansion":case"erweiterung":P.expansion=T;break;case"category":case"kategorie":P.category=T;break;case"amount":case"anzahl":P.amount=T;break;case"article value":case"price":case"preis":P.price=T;break;case"total":P.total=T;break;case"currency":P.currency=T;break;case"comments":P.comments=T;break}}P.shipmentId&&(P.direction=f,P.currency||(P.currency="EUR"),_.push(P))}await Rs.importCardmarketArticles(_),n("success",`Successfully imported ${_.length} ${f} articles`),l.value=""}catch(u){console.error("Error importing articles:",u),n("error","Failed to import articles: "+u.message)}},o=async a=>{const l=a.target;l.files?.[0]&&(n("success","ManaBox import functionality would be implemented here"),l.value="")};return(a,l)=>(q(),J("div",FE,[l[8]||(l[8]=w("h1",null,"Import CSV Files",-1)),w("div",$E,[l[3]||(l[3]=w("h2",null,"Cardmarket Data",-1)),l[4]||(l[4]=w("p",null,"Import your Cardmarket transaction data to track your purchases and sales.",-1)),w("div",LE,[l[0]||(l[0]=w("label",{for:"transactions-csv",class:"form-label"}," Upload Transactions CSV ",-1)),w("input",{id:"transactions-csv",type:"file",accept:".csv",onChange:r,class:"form-control"},null,32)]),w("div",BE,[l[1]||(l[1]=w("label",{for:"orders-csv",class:"form-label"}," Upload Orders CSV ",-1)),w("input",{id:"orders-csv",type:"file",accept:".csv",onChange:s,class:"form-control"},null,32)]),w("div",jE,[l[2]||(l[2]=w("label",{for:"articles-csv",class:"form-label"}," Upload Articles CSV ",-1)),w("input",{id:"articles-csv",type:"file",accept:".csv",onChange:i,class:"form-control"},null,32)])]),w("div",NE,[l[6]||(l[6]=w("h2",null,"ManaBox Scans",-1)),l[7]||(l[7]=w("p",null,"Import your ManaBox scan data to track your physical collection.",-1)),w("div",zE,[l[5]||(l[5]=w("label",{for:"manabox-csv",class:"form-label"}," Upload ManaBox CSV ",-1)),w("input",{id:"manabox-csv",type:"file",accept:".csv",onChange:o,class:"form-control"},null,32)])]),e.value?(q(),J("div",{key:0,class:vt(["status-message",e.value.type])},oe(e.value.message),3)):ke("",!0)]))}}),qE=hn(UE,[["__scopeId","data-v-a64310e9"]]);function WE(t){return new Worker("/mtg-pwa/assets/cardmarketCsv-CzsXSO1k.js",{name:t?.name})}const VE={class:"cardmarket-wizard"},HE={class:"wizard-progress"},KE={class:"step-number"},YE={class:"step-label"},GE={class:"card"},XE={class:"card-body"},QE={class:"wizard-content"},JE={key:0,class:"step-content"},ZE={class:"file-upload-section"},eI={class:"mb-3"},tI={key:0,class:"files-info"},nI={class:"file-list"},rI={class:"file-name"},sI={class:"file-type"},iI={class:"file-size"},oI={key:0,class:"error-messages"},aI={key:1,class:"step-content"},lI={key:0,class:"preview-stats"},cI={class:"stat"},uI={class:"stat-value"},dI={class:"stat"},fI={class:"stat-value"},hI={class:"stat"},pI={class:"stat-value"},gI={key:1,class:"preview-table-container"},mI={class:"preview-table-wrapper"},yI={class:"preview-table"},vI={key:0},bI={key:1},_I={key:2},wI={key:3},xI={key:4},kI={key:5},CI={key:6},SI={key:7},PI={key:8},AI={key:9},EI={key:10},II={key:11},OI={key:12},MI={key:13},TI={key:14},DI={key:0},RI={key:1},FI={key:2},$I={key:3},LI={key:4},BI={key:5},jI={key:6},NI={key:7},zI={key:8},UI={key:9},qI={key:10},WI={key:11},VI={key:12},HI={key:13},KI={key:14},YI={key:0},GI=["colspan"],XI={key:2,class:"invalid-rows-section"},QI={class:"invalid-rows"},JI={class:"row-number"},ZI={class:"row-errors"},eO={key:0,class:"more-rows"},tO={key:2,class:"step-content"},nO={key:0,class:"conflicts-section"},rO={class:"conflicts-list"},sO={class:"flex-grow-1"},iO={class:"fw-medium"},oO={class:"small text-muted"},aO={key:1,class:"conflicts-section"},lO={class:"conflicts-list"},cO={class:"flex-grow-1"},uO={class:"fw-medium"},dO={class:"small text-muted"},fO={key:3,class:"step-content"},hO={class:"summary-stats"},pO={class:"stat"},gO={class:"stat-value"},mO={class:"stat"},yO={class:"stat-value"},vO={key:0,class:"stat"},bO={class:"stat-value"},_O={class:"summary-details"},wO={class:"summary-grid"},xO={class:"summary-item"},kO={class:"summary-value"},CO={class:"summary-item"},SO={class:"summary-value"},PO={class:"summary-item"},AO={class:"summary-value"},EO={key:0,class:"import-status error"},IO={class:"wizard-navigation pt-3"},OO=["disabled"],MO=["disabled"],TO=et({__name:"CardmarketImportWizard",setup(t){const e=[{key:"upload",title:"Upload"},{key:"preview",title:"Preview"},{key:"conflicts",title:"Conflicts"},{key:"summary",title:"Summary"}],n=ge(0),r=ge([]),s=ge({}),i=ge({}),o=ge({}),a=ge(!1),l=ge(null),c=ge({}),u=ge([]),f=te=>{if(te===0)return"0 Bytes";const ee=1024,Y=["Bytes","KB","MB","GB"],Le=Math.floor(Math.log(te)/Math.log(ee));return parseFloat((te/Math.pow(ee,Le)).toFixed(2))+" "+Y[Le]},p=te=>new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(te/100),m=async te=>{const Y=te.target.files;if(!(!Y||Y.length===0)){u.value=[],r.value=Array.from(Y);try{for(const Le of r.value){if(!Le.name.endsWith(".csv")){u.value.push(`File ${Le.name} is not a CSV file.`);continue}const _e=await Le.text();s.value[Le.name]=_e,i.value[Le.name]=Ae(Le.name)}await v()}catch(Le){u.value.push("Failed to read the files: "+Le.message)}}},v=async()=>{try{o.value={};for(const[te,ee]of Object.entries(s.value)){const Y=i.value[te];if(Y==="unknown"){console.warn(`Skipping unknown file type: ${te}`);continue}const Le=new WE;let _e="",We="sale";switch(Y){case"transactions":_e="parseTransactions";break;case"sold-orders":_e="parseOrders",We="sale";break;case"purchased-orders":_e="parseOrders",We="purchase";break;case"sold-articles":_e="parseArticles",We="sale";break;case"purchased-articles":_e="parseArticles",We="purchase";break}Le.postMessage({type:_e,data:ee,direction:We});const xt=await new Promise((mt,st)=>{Le.onmessage=ae=>{const{type:Me,result:re,error:$e}=ae.data;console.log("Worker response type:",Me),$e?st(new Error($e)):mt(re)},Le.onerror=ae=>{st(ae)}});o.value[Y]=xt,Le.terminate()}await Ce()}catch(te){u.value.push("Failed to parse CSV data: "+te.message)}},_=He(()=>n.value===0?r.value.length>0&&u.value.length===0:!0),k=async()=>{_.value&&(n.value===0&&await v(),n.value<e.length-1&&n.value++)},C=()=>{n.value>0&&n.value--},A=async()=>{if(!a.value){a.value=!0,l.value=null;try{for(const[te,ee]of Object.entries(o.value)){if(!ee||ee.length===0)continue;const Y=de(ee,te);switch(te){case"transactions":await Rs.importCardmarketTransactions(Y);break;case"sold-orders":case"purchased-orders":await Rs.importCardmarketOrders(Y);break;case"sold-articles":case"purchased-articles":await Rs.importCardmarketArticles(Y);break}}l.value="Import completed successfully! Check the status indicator in the top right for details.",setTimeout(()=>{n.value=0,r.value=[],s.value={},i.value={},o.value={},u.value=[],a.value=!1,l.value=null},3e3)}catch(te){l.value="Failed to import data: "+te.message,a.value=!1}}},P=te=>de(o.value[te]||[],te),S=te=>de(o.value[te]||[],te).filter(Y=>Pe(te,Y)),M=()=>Object.values(o.value).reduce((te,ee)=>te+(ee?.length||0),0),T=()=>{let te=0;for(const[ee,Y]of Object.entries(o.value))Y&&(te+=de(Y,ee).length);return te},X=te=>{if(/^\d{2}\.\d{2}\.\d{4} \d{2}:\d{2}:\d{2}$/.test(te)){const Le=te.split(" ")[0].split("."),_e=parseInt(Le[0],10),We=parseInt(Le[1],10)-1,xt=parseInt(Le[2],10),mt=new Date(xt,We,_e);return mt.getFullYear()===xt&&mt.getMonth()===We&&mt.getDate()===_e}if(/^\d{2}\.\d{2}\.\d{4}$/.test(te)){const ee=te.split("."),Y=parseInt(ee[0],10),Le=parseInt(ee[1],10)-1,_e=parseInt(ee[2],10),We=new Date(_e,Le,Y);return We.getFullYear()===_e&&We.getMonth()===Le&&We.getDate()===Y}if(/^\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}$/.test(te)){const ee=new Date(te);return!isNaN(ee.getTime())}if(/^\d{4}-\d{2}-\d{2}$/.test(te)){const ee=new Date(te);return!isNaN(ee.getTime())}return!1},V=te=>{if(te==null)return!1;if(typeof te=="number")return Number.isFinite(te);const ee=String(te).trim().replace(/[€$£\s]/g,"").replace(",","."),Y=Number.parseFloat(ee);return Number.isFinite(Y)},E=te=>{const ee=Number.parseInt(String(te??"").trim(),10);return Number.isFinite(ee)&&ee>0};function Z(te){switch(te){case"transactions":return"Transaction Summary";case"sold-orders":return"Sold Orders";case"purchased-orders":return"Purchased Orders";case"sold-articles":return"Sold Articles";case"purchased-articles":return"Purchased Articles";default:return"Unknown File Type"}}const K=te=>{switch(te){case"transactions":return 5;case"sold-orders":case"purchased-orders":return 6;case"sold-articles":case"purchased-articles":return 8;default:return 5}},j=(te,ee)=>{const Y=[];if(!te.date&&!te.dateOfPurchase)Y.push("Date is required");else{const Le=te.date||te.dateOfPurchase;X(Le)||Y.push("Invalid date format (expected DD.MM.YYYY or YYYY-MM-DD)")}return ee.includes("articles")?(te.name||Y.push("Card name is required"),te.expansion||Y.push("Expansion/Set is required"),te.price===void 0||te.price===null||String(te.price).trim()===""?Y.push("Price is required"):V(te.price)||Y.push("Invalid price format (expected numeric value)"),te.amount===void 0||te.amount===null||String(te.amount).trim()===""?Y.push("Quantity is required"):E(te.amount)||Y.push("Invalid quantity (expected positive integer)"),te.shipmentId||Y.push("Order ID is required")):ee.includes("orders")?(te.dateOfPurchase?X(te.dateOfPurchase)||Y.push("Invalid date format (expected DD.MM.YYYY or YYYY-MM-DD)"):Y.push("Date is required"),te.orderId||Y.push("Order ID is required"),te.articleCount?E(te.articleCount)||Y.push("Invalid article count (expected positive integer)"):Y.push("Article count is required"),te.merchandiseValue===void 0||te.merchandiseValue===null||String(te.merchandiseValue).trim()===""?Y.push("Merchandise value is required"):V(te.merchandiseValue)||Y.push("Invalid merchandise value format (expected numeric value)")):ee==="transactions"&&(te.reference||Y.push("Reference is required"),te.amount===void 0||te.amount===null||String(te.amount).trim()===""?Y.push("Amount is required"):V(te.amount)||Y.push("Invalid amount format (expected numeric value)"),te.category||Y.push("Category is required"),te.type||Y.push("Type is required")),Y},de=(te,ee="articles")=>te.filter(Y=>j(Y,ee).length===0),pe=(te,ee="articles")=>te.map((Y,Le)=>({index:Le,row:Y,errors:j(Y,ee)})).filter(Y=>Y.errors.length>0),Ae=te=>{const ee=te.toLowerCase();return ee.includes("transaction")?"transactions":ee.includes("sold orders")?"sold-orders":ee.includes("purchased orders")?"purchased-orders":ee.includes("sold articles")?"sold-articles":ee.includes("purchased articles")?"purchased-articles":"unknown"},Ce=async()=>{try{c.value={};for(const[te,ee]of Object.entries(o.value))if(!(!ee||ee.length===0)&&te.includes("articles")){const Y=await Rs.checkForExistingImports(ee);for(const Le of Y){const _e=`${te}:${Le.article.shipmentId}:${Le.article.lineNumber}`;c.value[_e]=Le.exists}}}catch(te){console.error("Error checking for existing imports:",te)}},Pe=(te,ee)=>{const Y=`${te}:${ee.shipmentId}:${ee.lineNumber}`;return!!c.value[Y]};return(te,ee)=>(q(),J("div",VE,[ee[29]||(ee[29]=w("h1",null,"Cardmarket Import Wizard",-1)),w("div",HE,[(q(),J(Ze,null,$t(e,(Y,Le)=>w("div",{key:Y.key,class:vt(["step",{active:n.value===Le,completed:Le<n.value}])},[w("div",KE,oe(Le+1),1),w("div",YE,oe(Y.title),1)],2)),64))]),w("div",GE,[w("div",XE,[w("div",QE,[n.value===0?(q(),J("div",JE,[ee[2]||(ee[2]=vw('<h2 data-v-d94f377d>Upload CSV Files</h2><p data-v-d94f377d>Please select all Cardmarket CSV export files to import. You can select multiple files at once.</p><div class="alert alert-info mb-4" data-v-d94f377d><h3 class="alert-heading" data-v-d94f377d>Where to Get Cardmarket CSV Files</h3><p data-v-d94f377d>Cardmarket provides several types of CSV exports. For the best import results, we recommend downloading these files:</p><div class="row" data-v-d94f377d><div class="col-md-6" data-v-d94f377d><h4 data-v-d94f377d>1. Transaction Summary</h4><p data-v-d94f377d>Contains financial summary of all your transactions (sales, purchases, fees).</p><p data-v-d94f377d><strong data-v-d94f377d>Download from:</strong><br data-v-d94f377d> Cardmarket → My Account → Transactions → All Transactions → Download CSV</p><p class="mb-1" data-v-d94f377d><strong data-v-d94f377d>Direct link:</strong></p><a href="https://www.cardmarket.com/de/Magic/Account/Transactions/Details" target="_blank" rel="noopener noreferrer" class="btn btn-sm btn-outline-primary" data-v-d94f377d> Go to Transactions Page </a></div><div class="col-md-6" data-v-d94f377d><h4 data-v-d94f377d>2. Sold Articles</h4><p data-v-d94f377d>Contains detailed information about individual items you&#39;ve sold.</p><p data-v-d94f377d><strong data-v-d94f377d>Download from:</strong><br data-v-d94f377d> Cardmarket → My Account → Statistics → Sold Articles → CSV Export</p><p class="mb-1" data-v-d94f377d><strong data-v-d94f377d>Direct link:</strong></p><a href="https://www.cardmarket.com/de/Magic/Account/Statistics" target="_blank" rel="noopener noreferrer" class="btn btn-sm btn-outline-primary" data-v-d94f377d> Go to Statistics Page </a></div></div><div class="row mt-3" data-v-d94f377d><div class="col-md-6" data-v-d94f377d><h4 data-v-d94f377d>3. Purchased Articles</h4><p data-v-d94f377d>Contains detailed information about individual items you&#39;ve bought.</p><p data-v-d94f377d><strong data-v-d94f377d>Download from:</strong><br data-v-d94f377d> Cardmarket → My Account → Statistics → Purchased Articles → CSV Export</p><p class="mb-1" data-v-d94f377d><strong data-v-d94f377d>Direct link:</strong></p><a href="https://www.cardmarket.com/de/Magic/Account/Statistics" target="_blank" rel="noopener noreferrer" class="btn btn-sm btn-outline-primary" data-v-d94f377d> Go to Statistics Page </a></div><div class="col-md-6" data-v-d94f377d><h4 data-v-d94f377d>Optional: Order Details</h4><p data-v-d94f377d>Sold Orders and Purchased Orders contain redundant information. Only import if you specifically need order-level details.</p><p data-v-d94f377d><strong data-v-d94f377d>Download from:</strong><br data-v-d94f377d> Cardmarket → My Account → Statistics → Sold/Purchased Orders → CSV Export</p></div></div><div class="mt-3" data-v-d94f377d><small class="text-muted" data-v-d94f377d><strong data-v-d94f377d>Tip:</strong> The most important files are Transaction Summary, Sold Articles, and Purchased Articles. Order files (Sold Orders, Purchased Orders) contain redundant information but can be imported if needed. </small></div></div>',3)),w("div",ZE,[w("div",eI,[ee[0]||(ee[0]=w("label",{for:"csv-files",class:"form-label"}," Choose CSV Files ",-1)),w("input",{id:"csv-files",type:"file",accept:".csv",multiple:"",onChange:m,class:"form-control"},null,32)]),r.value.length>0?(q(),J("div",tI,[ee[1]||(ee[1]=w("h3",null,"Uploaded Files",-1)),w("ul",nI,[(q(!0),J(Ze,null,$t(r.value,Y=>(q(),J("li",{key:Y.name,class:"file-item"},[w("span",rI,oe(Y.name),1),w("span",sI,"("+oe(Ae(Y.name))+")",1),w("span",iI,"- "+oe(f(Y.size)),1)]))),128))])])):ke("",!0)]),u.value.length>0?(q(),J("div",oI,[(q(!0),J(Ze,null,$t(u.value,Y=>(q(),J("div",{key:Y,class:"error-message"},oe(Y),1))),128))])):ke("",!0)])):n.value===1?(q(),J("div",aI,[ee[10]||(ee[10]=w("h2",null,"Preview Data",-1)),ee[11]||(ee[11]=w("p",null,"Review the data that will be imported. Check for any issues before proceeding.",-1)),(q(!0),J(Ze,null,$t(i.value,(Y,Le)=>(q(),J("div",{key:Le,class:"file-preview"},[w("h3",null,oe(Z(Y)),1),o.value[Y]&&o.value[Y].length>0?(q(),J("div",lI,[w("div",cI,[w("div",uI,oe(o.value[Y].length),1),ee[3]||(ee[3]=w("div",{class:"stat-label"},"Total Rows",-1))]),w("div",dI,[w("div",fI,oe(de(o.value[Y],Y).length),1),ee[4]||(ee[4]=w("div",{class:"stat-label"},"Valid Rows",-1))]),w("div",hI,[w("div",pI,oe(pe(o.value[Y],Y).length),1),ee[5]||(ee[5]=w("div",{class:"stat-label"},"Invalid Rows",-1))])])):ke("",!0),o.value[Y]&&o.value[Y].length>0?(q(),J("div",gI,[ee[7]||(ee[7]=w("h4",null,"Valid Data Preview",-1)),w("div",mI,[w("table",yI,[w("thead",null,[w("tr",null,[Y==="transactions"?(q(),J("th",vI,"Reference")):(q(),J("th",bI,"Line")),ee[6]||(ee[6]=w("th",null,"Date",-1)),Y.includes("articles")?(q(),J("th",_I,"Card Name")):ke("",!0),Y.includes("articles")?(q(),J("th",wI,"Expansion")):ke("",!0),Y.includes("articles")?(q(),J("th",xI,"Price")):ke("",!0),Y.includes("articles")?(q(),J("th",kI,"Quantity")):ke("",!0),Y.includes("articles")?(q(),J("th",CI,"Order ID")):ke("",!0),Y.includes("articles")?(q(),J("th",SI,"Status")):ke("",!0),Y.includes("orders")?(q(),J("th",PI,"Order ID")):ke("",!0),Y.includes("orders")?(q(),J("th",AI,"Username")):ke("",!0),Y.includes("orders")?(q(),J("th",EI,"Article Count")):ke("",!0),Y.includes("orders")?(q(),J("th",II,"Merchandise Value")):ke("",!0),Y==="transactions"?(q(),J("th",OI,"Category")):ke("",!0),Y==="transactions"?(q(),J("th",MI,"Type")):ke("",!0),Y==="transactions"?(q(),J("th",TI,"Amount")):ke("",!0)])]),w("tbody",null,[(q(!0),J(Ze,null,$t(de(o.value[Y],Y).slice(0,5),(_e,We)=>(q(),J("tr",{key:We},[Y==="transactions"?(q(),J("td",DI,oe(_e.reference),1)):(q(),J("td",RI,oe(_e.lineNumber),1)),w("td",null,oe(_e.date||_e.dateOfPurchase),1),Y.includes("articles")?(q(),J("td",FI,oe(_e.name),1)):ke("",!0),Y.includes("articles")?(q(),J("td",$I,oe(_e.expansion),1)):ke("",!0),Y.includes("articles")?(q(),J("td",LI,oe(p(parseFloat(String(_e.price).replace(/[€$£\s]/g,"").replace(",","."))*100)),1)):ke("",!0),Y.includes("articles")?(q(),J("td",BI,oe(_e.amount),1)):ke("",!0),Y.includes("articles")?(q(),J("td",jI,oe(_e.shipmentId),1)):ke("",!0),Y.includes("articles")?(q(),J("td",NI,[w("span",{class:vt(Pe(Y,_e)?"text-success":"text-primary")},oe(Pe(Y,_e)?"Already Imported":"New"),3)])):ke("",!0),Y.includes("orders")?(q(),J("td",zI,oe(_e.orderId),1)):ke("",!0),Y.includes("orders")?(q(),J("td",UI,oe(_e.username),1)):ke("",!0),Y.includes("orders")?(q(),J("td",qI,oe(_e.articleCount),1)):ke("",!0),Y.includes("orders")?(q(),J("td",WI,oe(p(parseFloat(String(_e.merchandiseValue).replace(/[€$£\s]/g,"").replace(",","."))*100)),1)):ke("",!0),Y==="transactions"?(q(),J("td",VI,oe(_e.category),1)):ke("",!0),Y==="transactions"?(q(),J("td",HI,oe(_e.type),1)):ke("",!0),Y==="transactions"?(q(),J("td",KI,oe(p(parseFloat(String(_e.amount).replace(/[€$£\s]/g,"").replace(",","."))*100)),1)):ke("",!0)]))),128)),de(o.value[Y],Y).length>5?(q(),J("tr",YI,[w("td",{colspan:K(Y),class:"more-rows-cell"}," ... and "+oe(de(o.value[Y],Y).length-5)+" more rows ",9,GI)])):ke("",!0)])])])])):ke("",!0),pe(o.value[Y],Y).length>0?(q(),J("div",XI,[ee[8]||(ee[8]=w("h4",null,"Invalid Rows",-1)),ee[9]||(ee[9]=w("p",null,"The following rows have issues and will be skipped:",-1)),w("div",QI,[(q(!0),J(Ze,null,$t(pe(o.value[Y],Y).slice(0,3),(_e,We)=>(q(),J("div",{key:We,class:"invalid-row"},[w("div",JI,"Row "+oe(_e.row.lineNumber||_e.row.reference),1),w("div",ZI,oe(_e.errors.join(", ")),1)]))),128)),pe(o.value[Y],Y).length>3?(q(),J("div",eO," ... and "+oe(pe(o.value[Y],Y).length-3)+" more rows ",1)):ke("",!0)])])):ke("",!0)]))),128))])):n.value===2?(q(),J("div",tO,[ee[18]||(ee[18]=w("h2",null,"Resolve Conflicts",-1)),ee[19]||(ee[19]=w("p",null,"Check for duplicate imports and resolve any conflicts.",-1)),(q(!0),J(Ze,null,$t(i.value,(Y,Le)=>(q(),J("div",{key:Le,class:"file-conflicts"},[w("h3",null,oe(Z(Y)),1),Y.includes("articles")&&S(Y).length>0?(q(),J("div",nO,[ee[13]||(ee[13]=w("h4",null,"Already Imported Articles",-1)),ee[14]||(ee[14]=w("p",null,"The following articles have already been imported and will be skipped:",-1)),w("div",rO,[(q(!0),J(Ze,null,$t(S(Y),(_e,We)=>(q(),J("div",{key:We,class:"d-flex justify-content-between align-items-center p-2 bg-light rounded"},[w("div",sO,[w("div",iO,oe(_e.name),1),w("div",oO,oe(_e.expansion)+" • "+oe(_e.amount)+" × "+oe(p(parseFloat(String(_e.price).replace(/[€$£\s]/g,"").replace(",","."))*100))+" • Order #"+oe(_e.shipmentId),1)]),ee[12]||(ee[12]=w("div",{class:"ms-3"},[w("span",{class:"text-success fw-medium"},"Already Imported")],-1))]))),128))])])):ke("",!0),Y.includes("articles")&&P(Y).length>0?(q(),J("div",aO,[ee[16]||(ee[16]=w("h4",null,"New Articles to Import",-1)),ee[17]||(ee[17]=w("p",null,"The following articles will be imported:",-1)),w("div",lO,[(q(!0),J(Ze,null,$t(P(Y).filter(_e=>!Pe(Y,_e)),(_e,We)=>(q(),J("div",{key:We,class:"d-flex justify-content-between align-items-center p-2 bg-light rounded"},[w("div",cO,[w("div",uO,oe(_e.name),1),w("div",dO,oe(_e.expansion)+" • "+oe(_e.amount)+" × "+oe(p(parseFloat(String(_e.price).replace(/[€$£\s]/g,"").replace(",","."))*100))+" • Order #"+oe(_e.shipmentId),1)]),ee[15]||(ee[15]=w("div",{class:"ms-3"},[w("span",{class:"text-primary fw-medium"},"New")],-1))]))),128))])])):ke("",!0)]))),128))])):n.value===3?(q(),J("div",fO,[ee[27]||(ee[27]=w("h2",null,"Import Summary",-1)),ee[28]||(ee[28]=w("p",null,"Review the import summary before finalizing.",-1)),(q(!0),J(Ze,null,$t(i.value,(Y,Le)=>(q(),J("div",{key:Le,class:"file-summary"},[w("h3",null,oe(Z(Y)),1),w("div",hO,[w("div",pO,[w("div",gO,oe(P(Y).length),1),ee[20]||(ee[20]=w("div",{class:"stat-label"},"New Records",-1))]),w("div",mO,[w("div",yO,oe(pe(o.value[Y]||[],Y).length),1),ee[21]||(ee[21]=w("div",{class:"stat-label"},"Invalid Rows",-1))]),Y.includes("articles")?(q(),J("div",vO,[w("div",bO,oe(S(Y).length),1),ee[22]||(ee[22]=w("div",{class:"stat-label"},"Already Imported",-1))])):ke("",!0)])]))),128)),w("div",_O,[ee[26]||(ee[26]=w("h3",null,"Import Details",-1)),w("div",wO,[w("div",xO,[ee[23]||(ee[23]=w("div",{class:"summary-label"},"Files Uploaded",-1)),w("div",kO,oe(r.value.length),1)]),w("div",CO,[ee[24]||(ee[24]=w("div",{class:"summary-label"},"Total Rows Parsed",-1)),w("div",SO,oe(M()),1)]),w("div",PO,[ee[25]||(ee[25]=w("div",{class:"summary-label"},"Total Valid Rows",-1)),w("div",AO,oe(T()),1)])])]),l.value?(q(),J("div",EO,oe(l.value),1)):ke("",!0)])):ke("",!0)])])]),w("div",IO,[n.value>0?(q(),J("button",{key:0,onClick:C,class:"btn btn-secondary"}," Previous ")):ke("",!0),n.value<e.length-1?(q(),J("button",{key:1,onClick:k,class:"btn btn-primary",disabled:!_.value}," Next ",8,OO)):ke("",!0),n.value===e.length-1?(q(),J("button",{key:2,onClick:A,class:"btn btn-primary",disabled:a.value},oe(a.value?"Importing...":"Import Data"),9,MO)):ke("",!0)])]))}}),DO=hn(TO,[["__scopeId","data-v-d94f377d"]]);var ws={},mr={},xs={},Tg;function ab(){if(Tg)return xs;Tg=1,Object.defineProperty(xs,"__esModule",{value:!0}),xs.DefaultSerializer=xs.extendSerializer=void 0;function t(r,s){const i=r.deserialize.bind(r),o=r.serialize.bind(r);return{deserialize(a){return s.deserialize(a,i)},serialize(a){return s.serialize(a,o)}}}xs.extendSerializer=t;const e={deserialize(r){return Object.assign(Error(r.message),{name:r.name,stack:r.stack})},serialize(r){return{__error_marker:"$$error",message:r.message,name:r.name,stack:r.stack}}},n=r=>r&&typeof r=="object"&&"__error_marker"in r&&r.__error_marker==="$$error";return xs.DefaultSerializer={deserialize(r){return n(r)?e.deserialize(r):r},serialize(r){return r instanceof Error?e.serialize(r):r}},xs}var Dg;function Yo(){if(Dg)return mr;Dg=1,Object.defineProperty(mr,"__esModule",{value:!0}),mr.serialize=mr.deserialize=mr.registerSerializer=void 0;const t=ab();let e=t.DefaultSerializer;function n(i){e=t.extendSerializer(e,i)}mr.registerSerializer=n;function r(i){return e.deserialize(i)}mr.deserialize=r;function s(i){return e.serialize(i)}return mr.serialize=s,mr}var ku={},yr={},ks={},Rg;function RO(){if(Rg)return ks;Rg=1,Object.defineProperty(ks,"__esModule",{value:!0}),ks.getBundleURL=ks.getBaseURL=void 0;let t;function e(){return t||(t=n()),t}ks.getBundleURL=e;function n(){try{throw new Error}catch(s){const i=(""+s.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\/\/[^)\n]+/g);if(i)return r(i[0])}return"/"}function r(s){return(""+s).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\/\/.+)?\/[^/]+(?:\?.*)?$/,"$1")+"/"}return ks.getBaseURL=r,ks}var Fg;function lb(){if(Fg)return yr;Fg=1,Object.defineProperty(yr,"__esModule",{value:!0}),yr.isWorkerRuntime=yr.getWorkerImplementation=yr.defaultPoolSize=void 0;const t=RO();yr.defaultPoolSize=typeof navigator<"u"&&navigator.hardwareConcurrency?navigator.hardwareConcurrency:4;const e=a=>/^[a-zA-Z][a-zA-Z\d+\-.]*:/.test(a);function n(a){const l=new Blob([a],{type:"application/javascript"});return URL.createObjectURL(l)}function r(){if(typeof Worker>"u")return class{constructor(){throw Error("No web worker implementation available. You might have tried to spawn a worker within a worker in a browser that doesn't support workers in workers.")}};class a extends Worker{constructor(u,f){var p,m;typeof u=="string"&&f&&f._baseURL?u=new URL(u,f._baseURL):typeof u=="string"&&!e(u)&&t.getBundleURL().match(/^file:\/\//i)&&(u=new URL(u,t.getBundleURL().replace(/\/[^\/]+$/,"/")),(!((p=f?.CORSWorkaround)!==null&&p!==void 0)||p)&&(u=n(`importScripts(${JSON.stringify(u)});`))),typeof u=="string"&&e(u)&&(!((m=f?.CORSWorkaround)!==null&&m!==void 0)||m)&&(u=n(`importScripts(${JSON.stringify(u)});`)),super(u,f)}}class l extends a{constructor(u,f){const p=window.URL.createObjectURL(u);super(p,f)}static fromText(u,f){const p=new window.Blob([u],{type:"text/javascript"});return new l(p,f)}}return{blob:l,default:a}}let s;function i(){return s||(s=r()),s}yr.getWorkerImplementation=i;function o(){const a=typeof self<"u"&&typeof Window<"u"&&self instanceof Window;return!!(typeof self<"u"&&self.postMessage&&!a)}return yr.isWorkerRuntime=o,yr}var Cs={},Za={exports:{}},Cu,$g;function FO(){if($g)return Cu;$g=1;var t=1e3,e=t*60,n=e*60,r=n*24,s=r*7,i=r*365.25;Cu=function(u,f){f=f||{};var p=typeof u;if(p==="string"&&u.length>0)return o(u);if(p==="number"&&isFinite(u))return f.long?l(u):a(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))};function o(u){if(u=String(u),!(u.length>100)){var f=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(u);if(f){var p=parseFloat(f[1]),m=(f[2]||"ms").toLowerCase();switch(m){case"years":case"year":case"yrs":case"yr":case"y":return p*i;case"weeks":case"week":case"w":return p*s;case"days":case"day":case"d":return p*r;case"hours":case"hour":case"hrs":case"hr":case"h":return p*n;case"minutes":case"minute":case"mins":case"min":case"m":return p*e;case"seconds":case"second":case"secs":case"sec":case"s":return p*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return p;default:return}}}}function a(u){var f=Math.abs(u);return f>=r?Math.round(u/r)+"d":f>=n?Math.round(u/n)+"h":f>=e?Math.round(u/e)+"m":f>=t?Math.round(u/t)+"s":u+"ms"}function l(u){var f=Math.abs(u);return f>=r?c(u,f,r,"day"):f>=n?c(u,f,n,"hour"):f>=e?c(u,f,e,"minute"):f>=t?c(u,f,t,"second"):u+" ms"}function c(u,f,p,m){var v=f>=p*1.5;return Math.round(u/p)+" "+m+(v?"s":"")}return Cu}var Su,Lg;function $O(){if(Lg)return Su;Lg=1;function t(e){r.debug=r,r.default=r,r.coerce=c,r.disable=a,r.enable=i,r.enabled=l,r.humanize=FO(),r.destroy=u,Object.keys(e).forEach(f=>{r[f]=e[f]}),r.names=[],r.skips=[],r.formatters={};function n(f){let p=0;for(let m=0;m<f.length;m++)p=(p<<5)-p+f.charCodeAt(m),p|=0;return r.colors[Math.abs(p)%r.colors.length]}r.selectColor=n;function r(f){let p,m=null,v,_;function k(...C){if(!k.enabled)return;const A=k,P=Number(new Date),S=P-(p||P);A.diff=S,A.prev=p,A.curr=P,p=P,C[0]=r.coerce(C[0]),typeof C[0]!="string"&&C.unshift("%O");let M=0;C[0]=C[0].replace(/%([a-zA-Z%])/g,(X,V)=>{if(X==="%%")return"%";M++;const E=r.formatters[V];if(typeof E=="function"){const Z=C[M];X=E.call(A,Z),C.splice(M,1),M--}return X}),r.formatArgs.call(A,C),(A.log||r.log).apply(A,C)}return k.namespace=f,k.useColors=r.useColors(),k.color=r.selectColor(f),k.extend=s,k.destroy=r.destroy,Object.defineProperty(k,"enabled",{enumerable:!0,configurable:!1,get:()=>m!==null?m:(v!==r.namespaces&&(v=r.namespaces,_=r.enabled(f)),_),set:C=>{m=C}}),typeof r.init=="function"&&r.init(k),k}function s(f,p){const m=r(this.namespace+(typeof p>"u"?":":p)+f);return m.log=this.log,m}function i(f){r.save(f),r.namespaces=f,r.names=[],r.skips=[];const p=(typeof f=="string"?f:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const m of p)m[0]==="-"?r.skips.push(m.slice(1)):r.names.push(m)}function o(f,p){let m=0,v=0,_=-1,k=0;for(;m<f.length;)if(v<p.length&&(p[v]===f[m]||p[v]==="*"))p[v]==="*"?(_=v,k=m,v++):(m++,v++);else if(_!==-1)v=_+1,k++,m=k;else return!1;for(;v<p.length&&p[v]==="*";)v++;return v===p.length}function a(){const f=[...r.names,...r.skips.map(p=>"-"+p)].join(",");return r.enable(""),f}function l(f){for(const p of r.skips)if(o(f,p))return!1;for(const p of r.names)if(o(f,p))return!0;return!1}function c(f){return f instanceof Error?f.stack||f.message:f}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}return Su=t,Su}var Bg;function hf(){return Bg||(Bg=1,(function(t,e){var n={};e.formatArgs=s,e.save=i,e.load=o,e.useColors=r,e.storage=a(),e.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let c;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(c=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(c[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function s(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const u="color: "+this.color;c.splice(1,0,u,"color: inherit");let f=0,p=0;c[0].replace(/%[a-zA-Z%]/g,m=>{m!=="%%"&&(f++,m==="%c"&&(p=f))}),c.splice(p,0,u)}e.log=console.debug||console.log||(()=>{});function i(c){try{c?e.storage.setItem("debug",c):e.storage.removeItem("debug")}catch{}}function o(){let c;try{c=e.storage.getItem("debug")||e.storage.getItem("DEBUG")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c=n.DEBUG),c}function a(){try{return localStorage}catch{}}t.exports=$O()(e);const{formatters:l}=t.exports;l.j=function(c){try{return JSON.stringify(c)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}}})(Za,Za.exports)),Za.exports}var LO=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class dc{constructor(e){this._baseObserver=e,this._pendingPromises=new Set}complete(){Promise.all(this._pendingPromises).then(()=>this._baseObserver.complete()).catch(e=>this._baseObserver.error(e))}error(e){this._baseObserver.error(e)}schedule(e){const n=Promise.all(this._pendingPromises),r=[],s=o=>r.push(o),i=Promise.resolve().then(()=>LO(this,void 0,void 0,function*(){yield n,yield e(s),this._pendingPromises.delete(i);for(const o of r)this._baseObserver.next(o)})).catch(o=>{this._pendingPromises.delete(i),this._baseObserver.error(o)});this._pendingPromises.add(i)}}const cb=()=>typeof Symbol=="function",ra=t=>cb()&&!!Symbol[t],pf=t=>ra(t)?Symbol[t]:"@@"+t;ra("asyncIterator")||(Symbol.asyncIterator=Symbol.asyncIterator||Symbol.for("Symbol.asyncIterator"));const BO=pf("iterator"),hd=pf("observable"),ub=pf("species");function jl(t,e){const n=t[e];if(n!=null){if(typeof n!="function")throw new TypeError(n+" is not a function");return n}}function so(t){let e=t.constructor;return e!==void 0&&(e=e[ub],e===null&&(e=void 0)),e!==void 0?e:Vt}function jO(t){return t instanceof Vt}function Di(t){Di.log?Di.log(t):setTimeout(()=>{throw t},0)}function gl(t){Promise.resolve().then(()=>{try{t()}catch(e){Di(e)}})}function db(t){const e=t._cleanup;if(e!==void 0&&(t._cleanup=void 0,!!e))try{if(typeof e=="function")e();else{const n=jl(e,"unsubscribe");n&&n.call(e)}}catch(n){Di(n)}}function pd(t){t._observer=void 0,t._queue=void 0,t._state="closed"}function NO(t){const e=t._queue;if(e){t._queue=void 0,t._state="ready";for(const n of e)if(fb(t,n.type,n.value),t._state==="closed")break}}function fb(t,e,n){t._state="running";const r=t._observer;try{const s=r?jl(r,e):void 0;switch(e){case"next":s&&s.call(r,n);break;case"error":if(pd(t),s)s.call(r,n);else throw n;break;case"complete":pd(t),s&&s.call(r);break}}catch(s){Di(s)}t._state==="closed"?db(t):t._state==="running"&&(t._state="ready")}function Pu(t,e,n){if(t._state!=="closed"){if(t._state==="buffering"){t._queue=t._queue||[],t._queue.push({type:e,value:n});return}if(t._state!=="ready"){t._state="buffering",t._queue=[{type:e,value:n}],gl(()=>NO(t));return}fb(t,e,n)}}class zO{constructor(e,n){this._cleanup=void 0,this._observer=e,this._queue=void 0,this._state="initializing";const r=new UO(this);try{this._cleanup=n.call(void 0,r)}catch(s){r.error(s)}this._state==="initializing"&&(this._state="ready")}get closed(){return this._state==="closed"}unsubscribe(){this._state!=="closed"&&(pd(this),db(this))}}class UO{constructor(e){this._subscription=e}get closed(){return this._subscription._state==="closed"}next(e){Pu(this._subscription,"next",e)}error(e){Pu(this._subscription,"error",e)}complete(){Pu(this._subscription,"complete")}}class Vt{constructor(e){if(!(this instanceof Vt))throw new TypeError("Observable cannot be called as a function");if(typeof e!="function")throw new TypeError("Observable initializer must be a function");this._subscriber=e}subscribe(e,n,r){return(typeof e!="object"||e===null)&&(e={next:e,error:n,complete:r}),new zO(e,this._subscriber)}pipe(e,...n){let r=this;for(const s of[e,...n])r=s(r);return r}tap(e,n,r){const s=typeof e!="object"||e===null?{next:e,error:n,complete:r}:e;return new Vt(i=>this.subscribe({next(o){s.next&&s.next(o),i.next(o)},error(o){s.error&&s.error(o),i.error(o)},complete(){s.complete&&s.complete(),i.complete()},start(o){s.start&&s.start(o)}}))}forEach(e){return new Promise((n,r)=>{if(typeof e!="function"){r(new TypeError(e+" is not a function"));return}function s(){i.unsubscribe(),n(void 0)}const i=this.subscribe({next(o){try{e(o,s)}catch(a){r(a),i.unsubscribe()}},error(o){r(o)},complete(){n(void 0)}})})}map(e){if(typeof e!="function")throw new TypeError(e+" is not a function");const n=so(this);return new n(r=>this.subscribe({next(s){let i=s;try{i=e(s)}catch(o){return r.error(o)}r.next(i)},error(s){r.error(s)},complete(){r.complete()}}))}filter(e){if(typeof e!="function")throw new TypeError(e+" is not a function");const n=so(this);return new n(r=>this.subscribe({next(s){try{if(!e(s))return}catch(i){return r.error(i)}r.next(s)},error(s){r.error(s)},complete(){r.complete()}}))}reduce(e,n){if(typeof e!="function")throw new TypeError(e+" is not a function");const r=so(this),s=arguments.length>1;let i=!1,o=n;return new r(a=>this.subscribe({next(l){const c=!i;if(i=!0,!c||s)try{o=e(o,l)}catch(u){return a.error(u)}else o=l},error(l){a.error(l)},complete(){if(!i&&!s)return a.error(new TypeError("Cannot reduce an empty sequence"));a.next(o),a.complete()}}))}concat(...e){const n=so(this);return new n(r=>{let s,i=0;function o(a){s=a.subscribe({next(l){r.next(l)},error(l){r.error(l)},complete(){i===e.length?(s=void 0,r.complete()):o(n.from(e[i++]))}})}return o(this),()=>{s&&(s.unsubscribe(),s=void 0)}})}flatMap(e){if(typeof e!="function")throw new TypeError(e+" is not a function");const n=so(this);return new n(r=>{const s=[],i=this.subscribe({next(a){let l;if(e)try{l=e(a)}catch(u){return r.error(u)}else l=a;const c=n.from(l).subscribe({next(u){r.next(u)},error(u){r.error(u)},complete(){const u=s.indexOf(c);u>=0&&s.splice(u,1),o()}});s.push(c)},error(a){r.error(a)},complete(){o()}});function o(){i.closed&&s.length===0&&r.complete()}return()=>{s.forEach(a=>a.unsubscribe()),i.unsubscribe()}})}[hd](){return this}static from(e){const n=typeof this=="function"?this:Vt;if(e==null)throw new TypeError(e+" is not an object");const r=jl(e,hd);if(r){const s=r.call(e);if(Object(s)!==s)throw new TypeError(s+" is not an object");return jO(s)&&s.constructor===n?s:new n(i=>s.subscribe(i))}if(ra("iterator")){const s=jl(e,BO);if(s)return new n(i=>{gl(()=>{if(!i.closed){for(const o of s.call(e))if(i.next(o),i.closed)return;i.complete()}})})}if(Array.isArray(e))return new n(s=>{gl(()=>{if(!s.closed){for(const i of e)if(s.next(i),s.closed)return;s.complete()}})});throw new TypeError(e+" is not observable")}static of(...e){const n=typeof this=="function"?this:Vt;return new n(r=>{gl(()=>{if(!r.closed){for(const s of e)if(r.next(s),r.closed)return;r.complete()}})})}static get[ub](){return this}}cb()&&Object.defineProperty(Vt,Symbol("extensions"),{value:{symbol:hd,hostReportError:Di},configurable:!0});function Vs(t){typeof t=="function"?t():t&&typeof t.unsubscribe=="function"&&t.unsubscribe()}var qO=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};function WO(t){return e=>new Vt(n=>{const r=new dc(n),s=e.subscribe({complete(){r.complete()},error(i){r.error(i)},next(i){r.schedule(o=>qO(this,void 0,void 0,function*(){(yield t(i))&&o(i)}))}});return()=>Vs(s)})}function VO(t){return t&&ra("asyncIterator")&&t[Symbol.asyncIterator]}function HO(t){return t&&ra("iterator")&&t[Symbol.iterator]}var KO=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})},YO=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof __values=="function"?__values(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,l){o=t[i](o),s(a,l,o.done,o.value)})}}function s(i,o,a,l){Promise.resolve(l).then(function(c){i({value:c,done:a})},o)}};function GO(t){return e=>new Vt(n=>{const r=new dc(n),s=e.subscribe({complete(){r.complete()},error(i){r.error(i)},next(i){r.schedule(o=>KO(this,void 0,void 0,function*(){var a,l;const c=yield t(i);if(HO(c)||VO(c))try{for(var u=YO(c),f;f=yield u.next(),!f.done;){const p=f.value;o(p)}}catch(p){a={error:p}}finally{try{f&&!f.done&&(l=u.return)&&(yield l.call(u))}finally{if(a)throw a.error}}else c.map(p=>o(p))}))}});return()=>Vs(s)})}function XO(t){return new Vt(e=>{let n=0;const r=setInterval(()=>{e.next(n++)},t);return()=>clearInterval(r)})}var QO=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};function JO(t){return e=>new Vt(n=>{const r=new dc(n),s=e.subscribe({complete(){r.complete()},error(i){r.error(i)},next(i){r.schedule(o=>QO(this,void 0,void 0,function*(){const a=yield t(i);o(a)}))}});return()=>Vs(s)})}function ZO(...t){return t.length===0?Vt.from([]):new Vt(e=>{let n=0;const r=t.map(i=>i.subscribe({error(o){e.error(o),s()},next(o){e.next(o)},complete(){++n===t.length&&(e.complete(),s())}})),s=()=>{r.forEach(i=>Vs(i))};return s})}class hb extends Vt{constructor(){super(e=>(this._observers.add(e),()=>this._observers.delete(e))),this._observers=new Set}next(e){for(const n of this._observers)n.next(e)}error(e){for(const n of this._observers)n.error(e)}complete(){for(const e of this._observers)e.complete()}}function eM(t){const e=new hb;let n,r=0;return new Vt(s=>{n||(n=t.subscribe(e));const i=e.subscribe(s);return r++,()=>{r--,i.unsubscribe(),r===0&&(Vs(n),n=void 0)}})}var tM=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};function nM(t,e){return n=>new Vt(r=>{let s,i=0;const o=new dc(r),a=n.subscribe({complete(){o.complete()},error(l){o.error(l)},next(l){o.schedule(c=>tM(this,void 0,void 0,function*(){s=yield t(i===0?typeof e>"u"?l:e:s,l,i++),c(s)}))}});return()=>Vs(a)})}const rM=Object.freeze(Object.defineProperty({__proto__:null,Observable:Vt,Subject:hb,filter:WO,flatMap:GO,interval:XO,map:JO,merge:ZO,multicast:eM,scan:nM,unsubscribe:Vs},Symbol.toStringTag,{value:"Module"})),fc=ek(rM);var io={},jg;function sM(){if(jg)return io;jg=1,Object.defineProperty(io,"__esModule",{value:!0}),io.allSettled=void 0;function t(e){return Promise.all(e.map(n=>{const r=o=>({status:"fulfilled",value:o}),s=o=>({status:"rejected",reason:o}),i=Promise.resolve(n);try{return i.then(r,s)}catch(o){return Promise.reject(o)}}))}return io.allSettled=t,io}var Au={},Ng;function iM(){return Ng||(Ng=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.PoolEventType=void 0,(function(e){e.initialized="initialized",e.taskCanceled="taskCanceled",e.taskCompleted="taskCompleted",e.taskFailed="taskFailed",e.taskQueued="taskQueued",e.taskQueueDrained="taskQueueDrained",e.taskStart="taskStart",e.terminated="terminated"})(t.PoolEventType||(t.PoolEventType={}))})(Au)),Au}var oo={},xn={},zg;function gf(){return zg||(zg=1,Object.defineProperty(xn,"__esModule",{value:!0}),xn.$worker=xn.$transferable=xn.$terminate=xn.$events=xn.$errors=void 0,xn.$errors=Symbol("thread.errors"),xn.$events=Symbol("thread.events"),xn.$terminate=Symbol("thread.terminate"),xn.$transferable=Symbol("thread.transferable"),xn.$worker=Symbol("thread.worker")),xn}var Ug;function pb(){if(Ug)return oo;Ug=1,Object.defineProperty(oo,"__esModule",{value:!0}),oo.Thread=void 0;const t=gf();function e(n){throw Error(n)}return oo.Thread={errors(n){return n[t.$errors]||e("Error observable not found. Make sure to pass a thread instance as returned by the spawn() promise.")},events(n){return n[t.$events]||e("Events observable not found. Make sure to pass a thread instance as returned by the spawn() promise.")},terminate(n){return n[t.$terminate]()}},oo}var qg;function oM(){return qg||(qg=1,(function(t){var e=Cs&&Cs.__awaiter||function(C,A,P,S){function M(T){return T instanceof P?T:new P(function(X){X(T)})}return new(P||(P=Promise))(function(T,X){function V(K){try{Z(S.next(K))}catch(j){X(j)}}function E(K){try{Z(S.throw(K))}catch(j){X(j)}}function Z(K){K.done?T(K.value):M(K.value).then(V,E)}Z((S=S.apply(C,A||[])).next())})},n=Cs&&Cs.__importDefault||function(C){return C&&C.__esModule?C:{default:C}};Object.defineProperty(t,"__esModule",{value:!0}),t.Pool=t.Thread=t.PoolEventType=void 0;const r=n(hf()),s=fc,i=sM(),o=lb(),a=iM();Object.defineProperty(t,"PoolEventType",{enumerable:!0,get:function(){return a.PoolEventType}});const l=pb();Object.defineProperty(t,"Thread",{enumerable:!0,get:function(){return l.Thread}});let c=1;function u(C){const A=[];for(let P=0;P<C;P++)A.push(P);return A}function f(C){return new Promise(A=>setTimeout(A,C))}function p(C,A){return C.reduce((P,S)=>[...P,...A(S)],[])}function m(C){return C.replace(/\W/g," ").trim().replace(/\s+/g,"-")}function v(C,A){return u(A).map(()=>({init:C(),runningTasks:[]}))}class _{constructor(A,P){this.eventSubject=new s.Subject,this.initErrors=[],this.isClosing=!1,this.nextTaskID=1,this.taskQueue=[];const S=typeof P=="number"?{size:P}:P||{},{size:M=o.defaultPoolSize}=S;this.debug=r.default(`threads:pool:${m(S.name||String(c++))}`),this.options=S,this.workers=v(A,M),this.eventObservable=s.multicast(s.Observable.from(this.eventSubject)),Promise.all(this.workers.map(T=>T.init)).then(()=>this.eventSubject.next({type:a.PoolEventType.initialized,size:this.workers.length}),T=>{this.debug("Error while initializing pool worker:",T),this.eventSubject.error(T),this.initErrors.push(T)})}findIdlingWorker(){const{concurrency:A=1}=this.options;return this.workers.find(P=>P.runningTasks.length<A)}runPoolTask(A,P){return e(this,void 0,void 0,function*(){const S=this.workers.indexOf(A)+1;this.debug(`Running task #${P.id} on worker #${S}...`),this.eventSubject.next({type:a.PoolEventType.taskStart,taskID:P.id,workerID:S});try{const M=yield P.run(yield A.init);this.debug(`Task #${P.id} completed successfully`),this.eventSubject.next({type:a.PoolEventType.taskCompleted,returnValue:M,taskID:P.id,workerID:S})}catch(M){this.debug(`Task #${P.id} failed`),this.eventSubject.next({type:a.PoolEventType.taskFailed,taskID:P.id,error:M,workerID:S})}})}run(A,P){return e(this,void 0,void 0,function*(){const S=e(this,void 0,void 0,function*(){const M=()=>{A.runningTasks=A.runningTasks.filter(T=>T!==S)};yield f(0);try{yield this.runPoolTask(A,P)}finally{M(),this.isClosing||this.scheduleWork()}});A.runningTasks.push(S)})}scheduleWork(){this.debug("Attempt de-queueing a task in order to run it...");const A=this.findIdlingWorker();if(!A)return;const P=this.taskQueue.shift();if(!P){this.debug("Task queue is empty"),this.eventSubject.next({type:a.PoolEventType.taskQueueDrained});return}this.run(A,P)}taskCompletion(A){return new Promise((P,S)=>{const M=this.events().subscribe(T=>{T.type===a.PoolEventType.taskCompleted&&T.taskID===A?(M.unsubscribe(),P(T.returnValue)):T.type===a.PoolEventType.taskFailed&&T.taskID===A?(M.unsubscribe(),S(T.error)):T.type===a.PoolEventType.terminated&&(M.unsubscribe(),S(Error("Pool has been terminated before task was run.")))})})}settled(A=!1){return e(this,void 0,void 0,function*(){const P=()=>p(this.workers,T=>T.runningTasks),S=[],M=this.eventObservable.subscribe(T=>{T.type===a.PoolEventType.taskFailed&&S.push(T.error)});return this.initErrors.length>0?Promise.reject(this.initErrors[0]):A&&this.taskQueue.length===0?(yield i.allSettled(P()),S):(yield new Promise((T,X)=>{const V=this.eventObservable.subscribe({next(E){E.type===a.PoolEventType.taskQueueDrained&&(V.unsubscribe(),T(void 0))},error:X})}),yield i.allSettled(P()),M.unsubscribe(),S)})}completed(A=!1){return e(this,void 0,void 0,function*(){const P=this.settled(A),S=new Promise((T,X)=>{const V=this.eventObservable.subscribe({next(E){E.type===a.PoolEventType.taskQueueDrained?(V.unsubscribe(),T(P)):E.type===a.PoolEventType.taskFailed&&(V.unsubscribe(),X(E.error))},error:X})}),M=yield Promise.race([P,S]);if(M.length>0)throw M[0]})}events(){return this.eventObservable}queue(A){const{maxQueuedJobs:P=1/0}=this.options;if(this.isClosing)throw Error("Cannot schedule pool tasks after terminate() has been called.");if(this.initErrors.length>0)throw this.initErrors[0];const S=this.nextTaskID++,M=this.taskCompletion(S);M.catch(X=>{this.debug(`Task #${S} errored:`,X)});const T={id:S,run:A,cancel:()=>{this.taskQueue.indexOf(T)!==-1&&(this.taskQueue=this.taskQueue.filter(X=>X!==T),this.eventSubject.next({type:a.PoolEventType.taskCanceled,taskID:T.id}))},then:M.then.bind(M)};if(this.taskQueue.length>=P)throw Error(`Maximum number of pool tasks queued. Refusing to queue another one.
This usually happens for one of two reasons: We are either at peak workload right now or some tasks just won't finish, thus blocking the pool.`);return this.debug(`Queueing task #${T.id}...`),this.taskQueue.push(T),this.eventSubject.next({type:a.PoolEventType.taskQueued,taskID:T.id}),this.scheduleWork(),T}terminate(A){return e(this,void 0,void 0,function*(){this.isClosing=!0,A||(yield this.completed(!0)),this.eventSubject.next({type:a.PoolEventType.terminated,remainingQueue:[...this.taskQueue]}),this.eventSubject.complete(),yield Promise.all(this.workers.map(P=>e(this,void 0,void 0,function*(){return l.Thread.terminate(yield P.init)})))})}}_.EventType=a.PoolEventType;function k(C,A){return new _(C,A)}k.EventType=a.PoolEventType,t.Pool=k})(Cs)),Cs}var vr={},ao={},Wg;function aM(){if(Wg)return ao;Wg=1,Object.defineProperty(ao,"__esModule",{value:!0}),ao.createPromiseWithResolver=void 0;const t=()=>{};function e(){let n=!1,r,s=t;return[new Promise(a=>{n?a(r):s=a}),a=>{n=!0,r=a,s(r)}]}return ao.createPromiseWithResolver=e,ao}var Eu={},Vg;function lM(){return Vg||(Vg=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.WorkerEventType=void 0,(function(e){e.internalError="internalError",e.message="message",e.termination="termination"})(t.WorkerEventType||(t.WorkerEventType={}))})(Eu)),Eu}var br={},lo={},Hg;function cM(){if(Hg)return lo;Hg=1,Object.defineProperty(lo,"__esModule",{value:!0}),lo.ObservablePromise=void 0;const t=fc,e=()=>{},n=a=>a,r=a=>Promise.resolve().then(a);function s(a){throw a}function i(a){return a&&typeof a.then=="function"}class o extends t.Observable{constructor(l){super(c=>{const u=this,f=Object.assign(Object.assign({},c),{complete(){c.complete(),u.onCompletion()},error(p){c.error(p),u.onError(p)},next(p){c.next(p),u.onNext(p)}});try{return this.initHasRun=!0,l(f)}catch(p){f.error(p)}}),this.initHasRun=!1,this.fulfillmentCallbacks=[],this.rejectionCallbacks=[],this.firstValueSet=!1,this.state="pending"}onNext(l){this.firstValueSet||(this.firstValue=l,this.firstValueSet=!0)}onError(l){this.state="rejected",this.rejection=l;for(const c of this.rejectionCallbacks)r(()=>c(l))}onCompletion(){this.state="fulfilled";for(const l of this.fulfillmentCallbacks)r(()=>l(this.firstValue))}then(l,c){const u=l||n,f=c||s;let p=!1;return new Promise((m,v)=>{const _=C=>{if(!p){p=!0;try{m(f(C))}catch(A){v(A)}}},k=C=>{try{m(u(C))}catch(A){_(A)}};if(this.initHasRun||this.subscribe({error:_}),this.state==="fulfilled")return m(u(this.firstValue));if(this.state==="rejected")return p=!0,m(f(this.rejection));this.fulfillmentCallbacks.push(k),this.rejectionCallbacks.push(_)})}catch(l){return this.then(void 0,l)}finally(l){const c=l||e;return this.then(u=>(c(),u),()=>c())}static from(l){return i(l)?new o(c=>{const u=p=>{c.next(p),c.complete()},f=p=>{c.error(p)};l.then(u,f)}):super.from(l)}}return lo.ObservablePromise=o,lo}var Ss={},Kg;function Nl(){if(Kg)return Ss;Kg=1,Object.defineProperty(Ss,"__esModule",{value:!0}),Ss.Transfer=Ss.isTransferDescriptor=void 0;const t=gf();function e(s){return!(!s||typeof s!="object")}function n(s){return s&&typeof s=="object"&&s[t.$transferable]}Ss.isTransferDescriptor=n;function r(s,i){if(!i){if(!e(s))throw Error();i=[s]}return{[t.$transferable]:!0,send:s,transferables:i}}return Ss.Transfer=r,Ss}var Iu={},Yg;function gb(){return Yg||(Yg=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.WorkerMessageType=t.MasterMessageType=void 0,(function(e){e.cancel="cancel",e.run="run"})(t.MasterMessageType||(t.MasterMessageType={})),(function(e){e.error="error",e.init="init",e.result="result",e.running="running",e.uncaughtError="uncaughtError"})(t.WorkerMessageType||(t.WorkerMessageType={}))})(Iu)),Iu}var Gg;function uM(){if(Gg)return br;Gg=1;var t=br&&br.__importDefault||function(C){return C&&C.__esModule?C:{default:C}};Object.defineProperty(br,"__esModule",{value:!0}),br.createProxyModule=br.createProxyFunction=void 0;const e=t(hf()),n=fc,r=Yo(),s=cM(),i=Nl(),o=gb(),a=e.default("threads:master:messages");let l=1;const c=C=>Array.from(new Set(C)),u=C=>C&&C.type===o.WorkerMessageType.error,f=C=>C&&C.type===o.WorkerMessageType.result,p=C=>C&&C.type===o.WorkerMessageType.running;function m(C,A){return new n.Observable(P=>{let S;const M=(T=>{if(a("Message from worker:",T.data),!(!T.data||T.data.uid!==A)){if(p(T.data))S=T.data.resultType;else if(f(T.data))S==="promise"?(typeof T.data.payload<"u"&&P.next(r.deserialize(T.data.payload)),P.complete(),C.removeEventListener("message",M)):(T.data.payload&&P.next(r.deserialize(T.data.payload)),T.data.complete&&(P.complete(),C.removeEventListener("message",M)));else if(u(T.data)){const X=r.deserialize(T.data.error);P.error(X),C.removeEventListener("message",M)}}});return C.addEventListener("message",M),()=>{if(S==="observable"||!S){const T={type:o.MasterMessageType.cancel,uid:A};C.postMessage(T)}C.removeEventListener("message",M)}})}function v(C){if(C.length===0)return{args:[],transferables:[]};const A=[],P=[];for(const S of C)i.isTransferDescriptor(S)?(A.push(r.serialize(S.send)),P.push(...S.transferables)):A.push(r.serialize(S));return{args:A,transferables:P.length===0?P:c(P)}}function _(C,A){return((...P)=>{const S=l++,{args:M,transferables:T}=v(P),X={type:o.MasterMessageType.run,uid:S,method:A,args:M};a("Sending command to run function to worker:",X);try{C.postMessage(X,T)}catch(V){return s.ObservablePromise.from(Promise.reject(V))}return s.ObservablePromise.from(n.multicast(m(C,S)))})}br.createProxyFunction=_;function k(C,A){const P={};for(const S of A)P[S]=_(C,S);return P}return br.createProxyModule=k,br}var Xg;function dM(){if(Xg)return vr;Xg=1;var t={},e=vr&&vr.__awaiter||function(T,X,V,E){function Z(K){return K instanceof V?K:new V(function(j){j(K)})}return new(V||(V=Promise))(function(K,j){function de(Ce){try{Ae(E.next(Ce))}catch(Pe){j(Pe)}}function pe(Ce){try{Ae(E.throw(Ce))}catch(Pe){j(Pe)}}function Ae(Ce){Ce.done?K(Ce.value):Z(Ce.value).then(de,pe)}Ae((E=E.apply(T,X||[])).next())})},n=vr&&vr.__importDefault||function(T){return T&&T.__esModule?T:{default:T}};Object.defineProperty(vr,"__esModule",{value:!0}),vr.spawn=void 0;const r=n(hf()),s=fc,i=Yo(),o=aM(),a=gf(),l=lM(),c=uM(),u=r.default("threads:master:messages"),f=r.default("threads:master:spawn"),p=r.default("threads:master:thread-utils"),m=T=>T&&T.type==="init",v=T=>T&&T.type==="uncaughtError",_=typeof process<"u"&&t.THREADS_WORKER_INIT_TIMEOUT?Number.parseInt(t.THREADS_WORKER_INIT_TIMEOUT,10):1e4;function k(T,X,V){return e(this,void 0,void 0,function*(){let E;const Z=new Promise((j,de)=>{E=setTimeout(()=>de(Error(V)),X)}),K=yield Promise.race([T,Z]);return clearTimeout(E),K})}function C(T){return new Promise((X,V)=>{const E=(Z=>{u("Message from worker before finishing initialization:",Z.data),m(Z.data)?(T.removeEventListener("message",E),X(Z.data)):v(Z.data)&&(T.removeEventListener("message",E),V(i.deserialize(Z.data.error)))});T.addEventListener("message",E)})}function A(T,X){return new s.Observable(V=>{const E=(K=>{const j={type:l.WorkerEventType.message,data:K.data};V.next(j)}),Z=(K=>{p("Unhandled promise rejection event in thread:",K);const j={type:l.WorkerEventType.internalError,error:Error(K.reason)};V.next(j)});T.addEventListener("message",E),T.addEventListener("unhandledrejection",Z),X.then(()=>{const K={type:l.WorkerEventType.termination};T.removeEventListener("message",E),T.removeEventListener("unhandledrejection",Z),V.next(K),V.complete()})})}function P(T){const[X,V]=o.createPromiseWithResolver();return{terminate:()=>e(this,void 0,void 0,function*(){p("Terminating worker"),yield T.terminate(),V()}),termination:X}}function S(T,X,V,E){const Z=V.filter(K=>K.type===l.WorkerEventType.internalError).map(K=>K.error);return Object.assign(T,{[a.$errors]:Z,[a.$events]:V,[a.$terminate]:E,[a.$worker]:X})}function M(T,X){return e(this,void 0,void 0,function*(){f("Initializing new thread");const V=X&&X.timeout?X.timeout:_,Z=(yield k(C(T),V,`Timeout: Did not receive an init message from worker after ${V}ms. Make sure the worker calls expose().`)).exposed,{termination:K,terminate:j}=P(T),de=A(T,K);if(Z.type==="function"){const pe=c.createProxyFunction(T);return S(pe,T,de,j)}else if(Z.type==="module"){const pe=c.createProxyModule(T,Z.methods);return S(pe,T,de,j)}else{const pe=Z.type;throw Error(`Worker init message states unexpected type of expose(): ${pe}`)}})}return vr.spawn=M,vr}var Qg;function fM(){return Qg||(Qg=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Worker=t.BlobWorker=t.isWorkerRuntime=t.Thread=t.spawn=t.Pool=void 0;const e=lb();Object.defineProperty(t,"isWorkerRuntime",{enumerable:!0,get:function(){return e.isWorkerRuntime}});var n=oM();Object.defineProperty(t,"Pool",{enumerable:!0,get:function(){return n.Pool}});var r=dM();Object.defineProperty(t,"spawn",{enumerable:!0,get:function(){return r.spawn}});var s=pb();Object.defineProperty(t,"Thread",{enumerable:!0,get:function(){return s.Thread}}),t.BlobWorker=e.getWorkerImplementation().blob,t.Worker=e.getWorkerImplementation().default})(ku)),ku}var Ps={},Ou,Jg;function hM(){return Jg||(Jg=1,Ou=t=>t?typeof Symbol.observable=="symbol"&&typeof t[Symbol.observable]=="function"?t===t[Symbol.observable]():typeof t["@@observable"]=="function"?t===t["@@observable"]():!1:!1),Ou}var el={},Zg;function pM(){if(Zg)return el;Zg=1,Object.defineProperty(el,"__esModule",{value:!0});const t=function(){const s=typeof self<"u"&&typeof Window<"u"&&self instanceof Window;return!!(typeof self<"u"&&self.postMessage&&!s)},e=function(s,i){self.postMessage(s,i)},n=function(s){const i=a=>{s(a.data)},o=()=>{self.removeEventListener("message",i)};return self.addEventListener("message",i),o};return el.default={isWorkerRuntime:t,postMessageToMaster:e,subscribeToMasterMessages:n},el}var em;function gM(){return em||(em=1,(function(t){var e=Ps&&Ps.__awaiter||function(E,Z,K,j){function de(pe){return pe instanceof K?pe:new K(function(Ae){Ae(pe)})}return new(K||(K=Promise))(function(pe,Ae){function Ce(ee){try{te(j.next(ee))}catch(Y){Ae(Y)}}function Pe(ee){try{te(j.throw(ee))}catch(Y){Ae(Y)}}function te(ee){ee.done?pe(ee.value):de(ee.value).then(Ce,Pe)}te((j=j.apply(E,Z||[])).next())})},n=Ps&&Ps.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(t,"__esModule",{value:!0}),t.expose=t.isWorkerRuntime=t.Transfer=t.registerSerializer=void 0;const r=n(hM()),s=Yo(),i=Nl(),o=gb(),a=n(pM());var l=Yo();Object.defineProperty(t,"registerSerializer",{enumerable:!0,get:function(){return l.registerSerializer}});var c=Nl();Object.defineProperty(t,"Transfer",{enumerable:!0,get:function(){return c.Transfer}}),t.isWorkerRuntime=a.default.isWorkerRuntime;let u=!1;const f=new Map,p=E=>E&&E.type===o.MasterMessageType.cancel,m=E=>E&&E.type===o.MasterMessageType.run,v=E=>r.default(E)||_(E);function _(E){return E&&typeof E=="object"&&typeof E.subscribe=="function"}function k(E){return i.isTransferDescriptor(E)?{payload:E.send,transferables:E.transferables}:{payload:E,transferables:void 0}}function C(){const E={type:o.WorkerMessageType.init,exposed:{type:"function"}};a.default.postMessageToMaster(E)}function A(E){const Z={type:o.WorkerMessageType.init,exposed:{type:"module",methods:E}};a.default.postMessageToMaster(Z)}function P(E,Z){const{payload:K,transferables:j}=k(Z),de={type:o.WorkerMessageType.error,uid:E,error:s.serialize(K)};a.default.postMessageToMaster(de,j)}function S(E,Z,K){const{payload:j,transferables:de}=k(K),pe={type:o.WorkerMessageType.result,uid:E,complete:Z?!0:void 0,payload:j};a.default.postMessageToMaster(pe,de)}function M(E,Z){const K={type:o.WorkerMessageType.running,uid:E,resultType:Z};a.default.postMessageToMaster(K)}function T(E){try{const Z={type:o.WorkerMessageType.uncaughtError,error:s.serialize(E)};a.default.postMessageToMaster(Z)}catch(Z){console.error(`Not reporting uncaught error back to master thread as it occured while reporting an uncaught error already.
Latest error:`,Z,`
Original error:`,E)}}function X(E,Z,K){return e(this,void 0,void 0,function*(){let j;try{j=Z(...K)}catch(pe){return P(E,pe)}const de=v(j)?"observable":"promise";if(M(E,de),v(j)){const pe=j.subscribe(Ae=>S(E,!1,s.serialize(Ae)),Ae=>{P(E,s.serialize(Ae)),f.delete(E)},()=>{S(E,!0),f.delete(E)});f.set(E,pe)}else try{const pe=yield j;S(E,!0,s.serialize(pe))}catch(pe){P(E,s.serialize(pe))}})}function V(E){if(!a.default.isWorkerRuntime())throw Error("expose() called in the master thread.");if(u)throw Error("expose() called more than once. This is not possible. Pass an object to expose() if you want to expose multiple functions.");if(u=!0,typeof E=="function")a.default.subscribeToMasterMessages(Z=>{m(Z)&&!Z.method&&X(Z.uid,E,Z.args.map(s.deserialize))}),C();else if(typeof E=="object"&&E){a.default.subscribeToMasterMessages(K=>{m(K)&&K.method&&X(K.uid,E[K.method],K.args.map(s.deserialize))});const Z=Object.keys(E).filter(K=>typeof E[K]=="function");A(Z)}else throw Error(`Invalid argument passed to expose(). Expected a function or an object, got: ${E}`);a.default.subscribeToMasterMessages(Z=>{if(p(Z)){const K=Z.uid,j=f.get(K);j&&(j.unsubscribe(),f.delete(K))}})}t.expose=V,typeof self<"u"&&typeof self.addEventListener=="function"&&a.default.isWorkerRuntime()&&(self.addEventListener("error",E=>{setTimeout(()=>T(E.error||E),250)}),self.addEventListener("unhandledrejection",E=>{const Z=E.reason;Z&&typeof Z.message=="string"&&setTimeout(()=>T(Z),250)})),typeof process<"u"&&typeof process.on=="function"&&a.default.isWorkerRuntime()&&(process.on("uncaughtException",E=>{setTimeout(()=>T(E),250)}),process.on("unhandledRejection",E=>{E&&typeof E.message=="string"&&setTimeout(()=>T(E),250)}))})(Ps)),Ps}var tm;function mM(){return tm||(tm=1,(function(t){var e=ws&&ws.__createBinding||(Object.create?(function(a,l,c,u){u===void 0&&(u=c),Object.defineProperty(a,u,{enumerable:!0,get:function(){return l[c]}})}):(function(a,l,c,u){u===void 0&&(u=c),a[u]=l[c]})),n=ws&&ws.__exportStar||function(a,l){for(var c in a)c!=="default"&&!Object.prototype.hasOwnProperty.call(l,c)&&e(l,a,c)};Object.defineProperty(t,"__esModule",{value:!0}),t.Transfer=t.DefaultSerializer=t.expose=t.registerSerializer=void 0;var r=Yo();Object.defineProperty(t,"registerSerializer",{enumerable:!0,get:function(){return r.registerSerializer}}),n(fM(),t);var s=gM();Object.defineProperty(t,"expose",{enumerable:!0,get:function(){return s.expose}});var i=ab();Object.defineProperty(t,"DefaultSerializer",{enumerable:!0,get:function(){return i.DefaultSerializer}});var o=Nl();Object.defineProperty(t,"Transfer",{enumerable:!0,get:function(){return o.Transfer}})})(ws)),ws}var yM=mM();const as=lv(yM);as.registerSerializer;const mb=as.spawn;as.BlobWorker;as.DefaultSerializer;as.Pool;const yb=as.Thread;as.Transfer;as.Worker;function vM(t){return new Worker("/mtg-pwa/assets/MTGJSONUploadWorker-BW84B1FZ.js",{name:t?.name})}var kn=Uint8Array,pi=Uint16Array,bM=Int32Array,vb=new kn([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),bb=new kn([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),_M=new kn([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),_b=function(t,e){for(var n=new pi(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var s=new bM(n[30]),r=1;r<30;++r)for(var i=n[r];i<n[r+1];++i)s[i]=i-n[r]<<5|r;return{b:n,r:s}},wb=_b(vb,2),xb=wb.b,wM=wb.r;xb[28]=258,wM[258]=28;var xM=_b(bb,0),kM=xM.b,gd=new pi(32768);for(var St=0;St<32768;++St){var zr=(St&43690)>>1|(St&21845)<<1;zr=(zr&52428)>>2|(zr&13107)<<2,zr=(zr&61680)>>4|(zr&3855)<<4,gd[St]=((zr&65280)>>8|(zr&255)<<8)>>1}var To=(function(t,e,n){for(var r=t.length,s=0,i=new pi(e);s<r;++s)t[s]&&++i[t[s]-1];var o=new pi(e);for(s=1;s<e;++s)o[s]=o[s-1]+i[s-1]<<1;var a;if(n){a=new pi(1<<e);var l=15-e;for(s=0;s<r;++s)if(t[s])for(var c=s<<4|t[s],u=e-t[s],f=o[t[s]-1]++<<u,p=f|(1<<u)-1;f<=p;++f)a[gd[f]>>l]=c}else for(a=new pi(r),s=0;s<r;++s)t[s]&&(a[s]=gd[o[t[s]-1]++]>>15-t[s]);return a}),sa=new kn(288);for(var St=0;St<144;++St)sa[St]=8;for(var St=144;St<256;++St)sa[St]=9;for(var St=256;St<280;++St)sa[St]=7;for(var St=280;St<288;++St)sa[St]=8;var kb=new kn(32);for(var St=0;St<32;++St)kb[St]=5;var CM=To(sa,9,1),SM=To(kb,5,1),Mu=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},zn=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},Tu=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},PM=function(t){return(t+7)/8|0},Cb=function(t,e,n){return(e==null||e<0)&&(e=0),(n==null||n>t.length)&&(n=t.length),new kn(t.subarray(e,n))},AM=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Dn=function(t,e,n){var r=new Error(e||AM[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,Dn),!n)throw r;return r},EM=function(t,e,n,r){var s=t.length,i=0;if(!s||e.f&&!e.l)return n||new kn(0);var o=!n,a=o||e.i!=2,l=e.i;o&&(n=new kn(s*3));var c=function(nt){var O=n.length;if(nt>O){var F=new kn(Math.max(O*2,nt));F.set(n),n=F}},u=e.f||0,f=e.p||0,p=e.b||0,m=e.l,v=e.d,_=e.m,k=e.n,C=s*8;do{if(!m){u=zn(t,f,1);var A=zn(t,f+1,3);if(f+=3,A)if(A==1)m=CM,v=SM,_=9,k=5;else if(A==2){var T=zn(t,f,31)+257,X=zn(t,f+10,15)+4,V=T+zn(t,f+5,31)+1;f+=14;for(var E=new kn(V),Z=new kn(19),K=0;K<X;++K)Z[_M[K]]=zn(t,f+K*3,7);f+=X*3;for(var j=Mu(Z),de=(1<<j)-1,pe=To(Z,j,1),K=0;K<V;){var Ae=pe[zn(t,f,de)];f+=Ae&15;var P=Ae>>4;if(P<16)E[K++]=P;else{var Ce=0,Pe=0;for(P==16?(Pe=3+zn(t,f,3),f+=2,Ce=E[K-1]):P==17?(Pe=3+zn(t,f,7),f+=3):P==18&&(Pe=11+zn(t,f,127),f+=7);Pe--;)E[K++]=Ce}}var te=E.subarray(0,T),ee=E.subarray(T);_=Mu(te),k=Mu(ee),m=To(te,_,1),v=To(ee,k,1)}else Dn(1);else{var P=PM(f)+4,S=t[P-4]|t[P-3]<<8,M=P+S;if(M>s){l&&Dn(0);break}a&&c(p+S),n.set(t.subarray(P,M),p),e.b=p+=S,e.p=f=M*8,e.f=u;continue}if(f>C){l&&Dn(0);break}}a&&c(p+131072);for(var Y=(1<<_)-1,Le=(1<<k)-1,_e=f;;_e=f){var Ce=m[Tu(t,f)&Y],We=Ce>>4;if(f+=Ce&15,f>C){l&&Dn(0);break}if(Ce||Dn(2),We<256)n[p++]=We;else if(We==256){_e=f,m=null;break}else{var xt=We-254;if(We>264){var K=We-257,mt=vb[K];xt=zn(t,f,(1<<mt)-1)+xb[K],f+=mt}var st=v[Tu(t,f)&Le],ae=st>>4;st||Dn(3),f+=st&15;var ee=kM[ae];if(ae>3){var mt=bb[ae];ee+=Tu(t,f)&(1<<mt)-1,f+=mt}if(f>C){l&&Dn(0);break}a&&c(p+131072);var Me=p+xt;if(p<ee){var re=i-ee,$e=Math.min(ee,Me);for(re+p<0&&Dn(3);p<$e;++p)n[p]=r[re+p]}for(;p<Me;++p)n[p]=n[p-ee]}}e.l=m,e.p=_e,e.b=p,e.f=u,m&&(u=1,e.m=_,e.d=v,e.n=k)}while(!u);return p!=n.length&&o?Cb(n,0,p):n.subarray(0,p)},IM=new kn(0),OM=function(t){(t[0]!=31||t[1]!=139||t[2]!=8)&&Dn(6,"invalid gzip data");var e=t[3],n=10;e&4&&(n+=(t[10]|t[11]<<8)+2);for(var r=(e>>3&1)+(e>>4&1);r>0;r-=!t[n++]);return n+(e&2)},MM=function(t){var e=t.length;return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0};function TM(t,e){var n=OM(t);return n+8>t.length&&Dn(6,"invalid gzip data"),EM(t.subarray(n,-8),{i:2},new kn(MM(t)),e)}var md=typeof TextDecoder<"u"&&new TextDecoder,DM=0;try{md.decode(IM,{stream:!0}),DM=1}catch{}var RM=function(t){for(var e="",n=0;;){var r=t[n++],s=(r>127)+(r>223)+(r>239);if(n+s>t.length)return{s:e,r:Cb(t,n-1)};s?s==3?(r=((r&15)<<18|(t[n++]&63)<<12|(t[n++]&63)<<6|t[n++]&63)-65536,e+=String.fromCharCode(55296|r>>10,56320|r&1023)):s&1?e+=String.fromCharCode((r&31)<<6|t[n++]&63):e+=String.fromCharCode((r&15)<<12|(t[n++]&63)<<6|t[n++]&63):e+=String.fromCharCode(r)}};function FM(t,e){var n;if(md)return md.decode(t);var r=RM(t),s=r.s,n=r.r;return n.length&&Dn(8),s}const nm="mtgjson.idMap.v1",$M="https://mtgjson.com/api/v5/AllIdentifiers.json.gz";function LM(t){const e={},n=t?.data??t,r=(s,i)=>{if(!s||!i)return;const o=i.identifiers??i,a=o?.scryfallId,l=o?.scryfallOracleId;a&&(e[a]=s),l&&(e[l]=s)};if(Array.isArray(n))for(const s of n){const i=s?.uuid??s?.cardId??s?.id;r(i,s)}else if(n&&typeof n=="object")for(const[s,i]of Object.entries(n))r(s,i);else throw new Error("[MTGJSONUploadService] Unrecognized AllIdentifiers format (no array/object).");if(Object.keys(e).length===0){const s=n&&typeof n=="object"?Object.keys(n).slice(0,5):[];throw console.warn("[MTGJSONUploadService] AllIdentifiers parsed but no entries found. Sample keys:",s),new Error("[MTGJSONUploadService] Parsed AllIdentifiers but produced an empty id map.")}return e}async function BM(){try{const i=await wi.get(nm);if(i&&typeof i=="object")return console.log("[MTGJSONUploadService] Using cached AllIdentifiers id map."),i}catch(i){console.warn("[MTGJSONUploadService] Could not read cached id map:",i)}console.log("[MTGJSONUploadService] Downloading AllIdentifiers.json.gz...");const t=await fetch($M,{mode:"cors"});if(!t.ok)throw new Error(`[MTGJSONUploadService] Failed to fetch AllIdentifiers.json.gz: ${t.status} ${t.statusText}`);const e=new Uint8Array(await t.arrayBuffer()),n=FM(TM(e)),r=JSON.parse(n),s=LM(r);try{await wi.set(nm,s)}catch(i){console.warn("[MTGJSONUploadService] Could not cache id map:",i)}return console.log(`[MTGJSONUploadService] Built AllIdentifiers id map with ${Object.keys(s).length} entries.`),s}class jM{static async upload(e,n){console.log(`[MTGJSONUploadService] Starting upload for file: ${e.name}`);let r=null;try{console.log("[MTGJSONUploadService] Spawning worker..."),r=await mb(new vM,{timeout:3e5}),console.log("[MTGJSONUploadService] Worker spawned."),console.log("[MTGJSONUploadService] Fetching wanted cards from DB...");const s=await $n.getAll();console.log(`[MTGJSONUploadService] Found ${s.length} cards.`);const i=await BM(),o=Array.from(new Set(s.map(a=>i[a.id]||(a.oracleId?i[a.oracleId]:void 0)).filter(Boolean)));console.log(`[MTGJSONUploadService] Resolved ${o.length} MTGJSON UUIDs from ${s.length} cards.`),o.length===0&&console.warn("[MTGJSONUploadService] No MTGJSON UUIDs resolved from local cards. Check that your cards contain Scryfall ids/oracleIds and that AllIdentifiers was parsed correctly."),console.log("[MTGJSONUploadService] Calling worker.upload()...");try{const a=await r.upload(e,o);console.log(`[MTGJSONUploadService] Worker finished processing. ${a} cards processed.`),n(a)}catch(a){throw console.error("[MTGJSONUploadService] Worker returned an error:",a),a}}catch(s){throw console.error("[MTGJSONUploadService] An error occurred in the upload service:",s),s}finally{if(r){console.log("[MTGJSONUploadService] Terminating worker.");try{await yb.terminate(r)}catch(s){console.error("[MTGJSONUploadService] Error terminating worker:",s)}}}}}const NM={class:"mtgjson-wizard"},zM={class:"card"},UM={class:"card-body"},qM={class:"file-upload-section"},WM={class:"mb-3"},VM={key:0,class:"files-info"},HM={class:"file-list"},KM={class:"file-item"},YM={class:"file-name"},GM={class:"file-size"},XM={key:0,class:"alert alert-warning mt-2"},QM={key:0,class:"progress"},JM=["aria-valuenow"],ZM={key:1,class:"alert alert-success"},e2={key:2,class:"error-messages"},t2={key:0,class:"mt-2"},n2={class:"wizard-navigation pt-3"},r2=["disabled"],s2=et({__name:"MtgjsonImportWizard",setup(t){const e=ge(null),n=ge(!1),r=ge(!1),s=ge(0),i=ge(0),o=ge([]),a=u=>{const p=u.target.files;!p||p.length===0||(e.value=p[0],r.value=!1,i.value=0,o.value=[])},l=async()=>{if(!(!e.value||n.value)){n.value=!0,r.value=!1,o.value=[],s.value=0,i.value=0;try{await jM.upload(e.value,u=>{i.value=u,s.value=100}),n.value=!1,r.value=!0}catch(u){o.value.push("Failed to import MTGJSON data: "+u.message),n.value=!1}}},c=u=>{if(u===0)return"0 Bytes";const f=1024,p=["Bytes","KB","MB","GB"],m=Math.floor(Math.log(u)/Math.log(f));return parseFloat((u/Math.pow(f,m)).toFixed(2))+" "+p[m]};return(u,f)=>(q(),J("div",NM,[f[4]||(f[4]=w("h1",null,"MTGJSON Price Import",-1)),f[5]||(f[5]=w("p",null,"Import historical price data from MTGJSON. This will populate the price history for your cards for the last 90 days.",-1)),f[6]||(f[6]=w("div",{class:"alert alert-info"},[w("h3",{class:"alert-heading"},"Where to get the file"),w("p",null,[ht("You can download the "),w("code",null,"AllPrices.json.gz"),ht(" file from the "),w("a",{href:"https://mtgjson.com/downloads/all-files/",target:"_blank",rel:"noopener noreferrer"},"MTGJSON website"),ht(".")]),w("p",null,[w("strong",null,"Note:"),ht(' The full file is very large (~1.2GB when decompressed). If you encounter memory issues, consider using the smaller "AllPricesToday.json" file instead, which contains only the latest prices.')])],-1)),w("div",zM,[w("div",UM,[w("div",qM,[w("div",WM,[f[0]||(f[0]=w("label",{for:"mtgjson-file",class:"form-label"}," Choose AllPrices.json.gz File ",-1)),w("input",{id:"mtgjson-file",type:"file",accept:".json.gz",onChange:a,class:"form-control"},null,32)]),e.value?(q(),J("div",VM,[f[2]||(f[2]=w("h3",null,"Uploaded File",-1)),w("ul",HM,[w("li",KM,[w("span",YM,oe(e.value.name),1),w("span",GM,"- "+oe(c(e.value.size)),1)])]),e.value.size>100*1024*1024?(q(),J("div",XM,[f[1]||(f[1]=w("strong",null,"Warning:",-1)),ht(" This file is quite large ("+oe(c(e.value.size))+'). Processing may take a while and could potentially fail due to memory constraints. Consider using the smaller "AllPricesToday.json" file if available. ',1)])):ke("",!0)])):ke("",!0)]),n.value?(q(),J("div",QM,[w("div",{class:"progress-bar",role:"progressbar",style:Un({width:s.value+"%"}),"aria-valuenow":s.value,"aria-valuemin":"0","aria-valuemax":"100"},oe(s.value)+"%",13,JM)])):ke("",!0),r.value?(q(),J("div",ZM," Import finished! Processed "+oe(i.value)+" price points. ",1)):ke("",!0),o.value.length>0?(q(),J("div",e2,[(q(!0),J(Ze,null,$t(o.value,p=>(q(),J("div",{key:p,class:"error-message"},[ht(oe(p)+" ",1),p.includes("Out of Memory")||p.includes("too large")?(q(),J("div",t2,[...f[3]||(f[3]=[w("strong",null,"Solution:",-1),ht(' The MTGJSON file is too large to process in your browser. Please download the smaller "AllPricesToday.json" file from MTGJSON instead, which contains only the latest prices and is much smaller. ',-1)])])):ke("",!0)]))),128))])):ke("",!0),w("div",n2,[w("button",{onClick:l,class:"btn btn-primary",disabled:!e.value||n.value},oe(n.value?"Importing...":"Import Prices"),9,r2)])])])]))}}),i2=hn(s2,[["__scopeId","data-v-53c73d32"]]);function o2(t){return new Worker("/mtg-pwa/assets/PriceGuideUploadWorker-oWfc4mMj.js",{name:t?.name})}class a2{static async upload(e,n){const r=await mb(new o2,{timeout:3e5});try{const s=await r.upload(e);n(s)}finally{await yb.terminate(r)}}}const l2={class:"price-guide-wizard"},c2={class:"card"},u2={class:"card-body"},d2={class:"file-upload-section"},f2={class:"mb-3"},h2={key:0,class:"files-info"},p2={class:"file-list"},g2={class:"file-item"},m2={class:"file-name"},y2={class:"file-size"},v2={key:0,class:"progress"},b2=["aria-valuenow"],_2={key:1,class:"alert alert-success"},w2={key:2,class:"error-messages"},x2={class:"wizard-navigation pt-3"},k2=["disabled"],C2=et({__name:"PriceGuideUploadWizard",setup(t){const e=ge(null),n=ge(!1),r=ge(!1),s=ge(0),i=ge(0),o=ge([]),a=u=>{const p=u.target.files;!p||p.length===0||(e.value=p[0],r.value=!1,i.value=0,o.value=[])},l=async()=>{if(!(!e.value||n.value)){n.value=!0,r.value=!1,o.value=[],s.value=0;try{await a2.upload(e.value,u=>{i.value=u,s.value=100,n.value=!1,r.value=!0})}catch(u){o.value.push("Failed to import Price Guide data: "+u.message),n.value=!1}}},c=u=>{if(u===0)return"0 Bytes";const f=1024,p=["Bytes","KB","MB","GB"],m=Math.floor(Math.log(u)/Math.log(f));return parseFloat((u/Math.pow(f,m)).toFixed(2))+" "+p[m]};return(u,f)=>(q(),J("div",l2,[f[2]||(f[2]=w("h1",null,"Cardmarket Price Guide Import",-1)),f[3]||(f[3]=w("p",null,"Import historical price data from Cardmarket Price Guide.",-1)),f[4]||(f[4]=w("div",{class:"alert alert-info"},[w("h3",{class:"alert-heading"},"Where to get the file"),w("p",null,"You can download the Price Guide CSV from your Cardmarket account.")],-1)),w("div",c2,[w("div",u2,[w("div",d2,[w("div",f2,[f[0]||(f[0]=w("label",{for:"price-guide-file",class:"form-label"}," Choose Price Guide CSV File ",-1)),w("input",{id:"price-guide-file",type:"file",accept:".csv",onChange:a,class:"form-control"},null,32)]),e.value?(q(),J("div",h2,[f[1]||(f[1]=w("h3",null,"Uploaded File",-1)),w("ul",p2,[w("li",g2,[w("span",m2,oe(e.value.name),1),w("span",y2,"- "+oe(c(e.value.size)),1)])])])):ke("",!0)]),n.value?(q(),J("div",v2,[w("div",{class:"progress-bar",role:"progressbar",style:Un({width:s.value+"%"}),"aria-valuenow":s.value,"aria-valuemin":"0","aria-valuemax":"100"},oe(s.value)+"%",13,b2)])):ke("",!0),r.value?(q(),J("div",_2," Import finished! Processed "+oe(i.value)+" price points. ",1)):ke("",!0),o.value.length>0?(q(),J("div",w2,[(q(!0),J(Ze,null,$t(o.value,p=>(q(),J("div",{key:p,class:"error-message"},oe(p),1))),128))])):ke("",!0),w("div",x2,[w("button",{onClick:l,class:"btn btn-primary",disabled:!e.value||n.value},oe(n.value?"Importing...":"Import Prices"),9,k2)])])])]))}}),S2=hn(C2,[["__scopeId","data-v-56a027f9"]]);class P2{static normalizeFingerprint(e){return{name:e.name.trim().toLowerCase(),setCode:e.setCode.trim().toLowerCase(),collectorNumber:e.collectorNumber.trim().toLowerCase(),finish:e.finish.trim().toLowerCase(),language:e.language.trim().toLowerCase()}}static compareFingerprints(e,n){const r=this.normalizeFingerprint(e),s=this.normalizeFingerprint(n);return r.name===s.name&&r.setCode===s.setCode&&r.collectorNumber===s.collectorNumber&&r.finish===s.finish&&r.language===s.language}static async resolveFingerprint(e){try{const n=await Fn.hydrateCard({name:e.name,setCode:e.setCode,collectorNumber:e.collectorNumber});return n&&n.id?n.id:null}catch(n){return console.error("Error resolving fingerprint:",n),null}}}class A2{static async importDeckFromText(e,n){let r,s;try{r=_i();const i=n.split(`
`).map(o=>o.trim()).filter(o=>o);s=pl(),r.addImport({id:s,type:"deck",name:e,status:"pending",progress:0,totalItems:i.length,processedItems:0})}catch(i){console.warn("Could not initialize import status store:",i),r=null,s=null}try{const i=new Date,o=`deck-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,a={id:o,platform:"csv",name:e,commander:"",url:"",importedAt:i,createdAt:i,updatedAt:i};await we.decks.add(a);const l=n.split(`
`).map(u=>u.trim()).filter(u=>u);if(console.log("Processing deck import:",{deckName:e,lineCount:l.length}),r&&s)try{r.updateImport(s,{status:"processing"})}catch(u){console.warn("Could not update import status:",u)}for(let u=0;u<l.length;u++){const p=l[u].trim();if(!p)continue;if(console.log("Processing line:",p),r&&s)try{r.updateImport(s,{processedItems:u+1,progress:Math.round((u+1)/l.length*100)})}catch(v){console.warn("Could not update import progress:",v)}const m=p.match(/^(\d+)\s+(.+?)\s*\(([^)]+)\)\s*(\d+)(?:\s*\*F\*\s*)?$/i);if(m){const[,v,_,k,C]=m,A=parseInt(v)||1;if(console.log("Parsed card:",{quantity:A,cardName:_,setCode:k,collectorNumber:C}),_&&k&&C){const P={name:_.trim(),setCode:k.trim(),collectorNumber:C.trim(),finish:"nonfoil",language:"en"},S=await P2.resolveFingerprint(P);if(console.log("Resolved card ID:",S),S){const E=new Date;if(!await $n.getById(S)){const de=await Fn.hydrateCard({scryfall_id:S,name:_.trim(),setCode:k.trim(),collectorNumber:C.trim()}),pe=await Fn.getImageUrlById(S),Ae={id:S,oracleId:de?.oracle_id||"",name:_.trim(),set:de?.set_name||k.trim(),setCode:de?.set||k.trim(),number:de?.collector_number||C.trim(),lang:de?.lang||"en",finish:"nonfoil",layout:pe?.layout||"normal",imageUrl:pe?.front||"",imageUrlBack:pe?.back||"",createdAt:E,updatedAt:E};await $n.add(Ae),console.log("Added new card to database:",Ae);try{const Ce=await Fn.getPriceById(S);if(Ce){const Pe=E.toISOString().split("T")[0],ee={id:`${S}:scryfall:${Pe}`,cardId:S,provider:"scryfall",finish:"nonfoil",date:E.toISOString().split("T")[0],currency:"EUR",priceCent:Ce.getCents(),asOf:E,createdAt:E};await we.price_points.put(ee)}}catch(Ce){console.error(`Error fetching price for new card ${S}:`,Ce)}}const j=(await Ft.getByCardId(S)).reduce((de,pe)=>{if(!pe.disposedAt||pe.disposedQuantity&&pe.disposedQuantity<pe.quantity){const Ae=pe.disposedQuantity?pe.quantity-pe.disposedQuantity:pe.quantity;return de+Ae}return de},0);if(j<A){const de=A-j,Ae={id:`lot-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,cardId:S,quantity:de,unitCost:0,condition:"unknown",language:"en",foil:!1,finish:"nonfoil",source:"deck_import",currency:"EUR",purchasedAt:E,createdAt:E,updatedAt:E};await Ft.add(Ae),console.log("Added new lot for deck import:",Ae)}}let M;const T=await Ft.getByCardId(S||"");if(T.length>0){for(const E of T)if((E.disposedQuantity?E.quantity-E.disposedQuantity:E.quantity)>=A&&!E.disposedAt){M=E.id;break}!M&&T.length>0&&(M=T[0].id)}const X=new Date,V={id:`deckcard-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,deckId:o||"unknown-deck",cardId:S||"unknown-card",lotId:M,quantity:typeof A=="number"&&A>0?A:1,role:"main",addedAt:X,createdAt:X};await we.deck_cards.add(V),console.log("Added deck card:",V)}}else console.log("Line did not match expected format:",p)}const c=await we.deck_cards.where("deckId").equals(o).count();if(console.log("Total cards imported:",c),r&&s)try{r.completeImport(s)}catch(u){console.warn("Could not complete import status:",u)}}catch(i){if(console.error("Error importing deck from text:",i),r&&s)try{r.completeImport(s,i.message)}catch(o){console.warn("Could not update import status to failed:",o)}throw i}}static async calculateDeckCoverage(e){try{const n=await we.deck_cards.where("deckId").equals(e).toArray();let r=0,s=0;for(const o of n){r+=o.quantity;const l=(await Ft.getActiveLotsByCardId(o.cardId)).reduce((c,u)=>c+u.quantity,0);s+=Math.min(o.quantity,l)}const i=r>0?Math.round(s/r*100):100;return{totalCards:r,ownedCards:s,coveragePercentage:i}}catch(n){throw console.error("Error calculating deck coverage:",n),n}}}const E2={class:"deck-import"},I2={class:"import-section"},O2={class:"mb-3"},M2={class:"mb-3"},T2=["disabled"],D2={key:0,class:"status-message error"},R2=et({__name:"DeckImportView",setup(t){const e=ge(""),n=ge(""),r=ge(!1),s=ge(null),i=async()=>{if(!e.value.trim()){s.value="Please enter a deck name";return}if(!n.value.trim()){s.value="Please paste your decklist";return}r.value=!0,s.value=null;try{await A2.importDeckFromText(e.value.trim(),n.value.trim()),s.value="Deck import started successfully! Check the status indicator in the top right for progress.",setTimeout(()=>{e.value="",n.value="",r.value=!1,s.value=null},3e3)}catch(o){s.value="Failed to import deck: "+o.message,r.value=!1}};return(o,a)=>(q(),J("div",E2,[a[7]||(a[7]=w("h1",null,"Import Deck",-1)),w("div",I2,[a[4]||(a[4]=w("h2",null,"Moxfield Deck Import",-1)),a[5]||(a[5]=w("p",null,"Copy and paste your decklist from Moxfield to track which cards you own and which you're missing.",-1)),w("div",O2,[a[2]||(a[2]=w("label",{for:"deck-name",class:"form-label"},"Deck Name",-1)),Ls(w("input",{id:"deck-name","onUpdate:modelValue":a[0]||(a[0]=l=>e.value=l),type:"text",placeholder:"Enter a name for your deck",class:"form-control"},null,512),[[El,e.value]])]),w("div",M2,[a[3]||(a[3]=w("label",{for:"decklist",class:"form-label"},"Decklist",-1)),Ls(w("textarea",{id:"decklist","onUpdate:modelValue":a[1]||(a[1]=l=>n.value=l),placeholder:`Paste your decklist here (e.g., 4 Lightning Bolt
2 Counterspell)`,rows:"10",class:"form-control"},null,512),[[El,n.value]])]),w("button",{onClick:i,disabled:r.value,class:"btn btn-primary mb-4"},oe(r.value?"Importing...":"Import Deck"),9,T2),s.value?(q(),J("div",D2,oe(s.value),1)):ke("",!0),a[6]||(a[6]=w("div",{class:"instructions"},[w("h3",null,"How to copy from Moxfield:"),w("ol",null,[w("li",null,"Open your deck on Moxfield.com"),w("li",null,'Click the "Export" button'),w("li",null,'Select "Text" format'),w("li",null,"Copy the text and paste it here")])],-1))])]))}}),F2=hn(R2,[["__scopeId","data-v-dde8fd34"]]),$2={class:"container py-4"},L2={class:"d-flex align-items-center justify-content-between mb-4"},B2={key:0,class:"text-center py-5"},j2={key:1,class:"text-center py-5"},N2={key:2,class:"row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4"},z2={class:"card h-100 shadow-sm border-0 overflow-hidden position-relative"},U2={class:"card-aspect position-relative overflow-hidden"},q2=["src","alt"],W2={class:"card-body"},V2=["title"],H2={class:"d-flex align-items-center justify-content-between mb-2"},K2={key:0,class:"badge bg-info text-dark text-uppercase"},Y2={class:"text-muted"},G2={class:"fw-semibold"},X2="https://placehold.co/315x440?text=Card+Image",Q2=et({__name:"DecksView",setup(t){const e=ge([]),n=ge(!0),r=ge({}),s=ge({}),i=c=>c?new Date(c).toLocaleDateString():"—",o=c=>r.value[c]??0,a=c=>s.value[c];return Nn(async()=>{try{const c=await we.decks.toArray();e.value=c;const u=c.map(async p=>{const m=await we.deck_cards.where("deckId").equals(p.id).count();return[p.id,m]}),f=c.map(async p=>{if(!p.faceCardId)return[p.id,null];const m=await we.cards.get(p.faceCardId);return[p.id,m?{id:m.id,name:m.name,imageUrl:m.imageUrl}:null]});(await Promise.all(u)).forEach(([p,m])=>r.value[p]=m),(await Promise.all(f)).forEach(([p,m])=>{m?s.value[p]=m:delete s.value[p]})}catch(c){console.error("Error loading decks:",c)}finally{n.value=!1}}),(c,u)=>{const f=Zl("router-link");return q(),J("div",$2,[w("div",L2,[u[1]||(u[1]=w("h1",{class:"h3 mb-0"},"Decks",-1)),qe(f,{to:"/import/deck",class:"btn btn-primary"},{default:lt(()=>[...u[0]||(u[0]=[ht(" Import Deck ",-1)])]),_:1})]),n.value?(q(),J("div",B2,[...u[2]||(u[2]=[w("div",{class:"spinner-border",role:"status","aria-hidden":"true"},null,-1),w("div",{class:"mt-2"},"Loading decks…",-1)])])):e.value.length===0?(q(),J("div",j2,[u[4]||(u[4]=w("p",{class:"text-muted mb-3"},"You haven't imported any decks yet.",-1)),qe(f,{to:"/import/deck",class:"btn btn-primary"},{default:lt(()=>[...u[3]||(u[3]=[ht(" Import Your First Deck ",-1)])]),_:1})])):(q(),J("div",N2,[(q(!0),J(Ze,null,$t(e.value,p=>(q(),J("div",{key:p.id,class:"col"},[w("div",z2,[w("div",U2,[w("img",{src:a(p.id)?.imageUrl||X2,alt:a(p.id)?.name||"Face card",class:"w-100 h-100 d-block img-fit-cover"},null,8,q2)]),w("div",W2,[w("h2",{class:"h5 mb-1 text-truncate",title:p.name},oe(p.name),9,V2),w("div",H2,[p.platform?(q(),J("span",K2,oe(p.platform),1)):ke("",!0),w("small",Y2,oe(i(p.importedAt)),1)]),w("div",G2,oe(o(p.id))+" cards",1),qe(f,{class:"stretched-link",to:`/decks/${p.id}`,"aria-label":"Open deck"},null,8,["to"])])])]))),128))]))])}}}),J2=hn(Q2,[["__scopeId","data-v-022043fe"]]);function Sb(t,e){const n=typeof t=="string"&&!e?`${t}Context`:e,r=Symbol(n);return[o=>{const a=Pn(r,o);if(a||a===null)return a;throw new Error(`Injection \`${r.toString()}\` not found. Component must be used within ${Array.isArray(t)?`one of the following components: ${t.join(", ")}`:`\`${t}\``}`)},o=>(ko(r,o),o)]}function ts(){let t=document.activeElement;if(t==null)return null;for(;t!=null&&t.shadowRoot!=null&&t.shadowRoot.activeElement!=null;)t=t.shadowRoot.activeElement;return t}function Pb(t,e,n){const r=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),r.dispatchEvent(s)}function mf(t){return t?t.flatMap(e=>e.type===Ze?mf(e.children):[e]):[]}const[Z2,lL]=Sb("ConfigProvider");function Ab(t){return Id()?(Bm(t),!0):!1}function eT(t){let e=!1,n;const r=Yl(!0);return(...s)=>(e||(n=r.run(()=>t(...s)),e=!0),n)}function tT(t){let e=0,n,r;const s=()=>{e-=1,r&&e<=0&&(r.stop(),n=void 0,r=void 0)};return(...i)=>(e+=1,r||(r=Yl(!0),n=r.run(()=>t(...i))),Ab(s),n)}const Hs=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const nT=t=>typeof t<"u",rT=Object.prototype.toString,sT=t=>rT.call(t)==="[object Object]",rm=iT();function iT(){var t,e;return Hs&&((t=window?.navigator)==null?void 0:t.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((e=window?.navigator)==null?void 0:e.maxTouchPoints)>2&&/iPad|Macintosh/.test(window?.navigator.userAgent))}function oT(t){return cr()}function Du(t){return Array.isArray(t)?t:[t]}function aT(t,e){oT()&&jd(t,e)}function lT(t,e,n){return on(t,e,{...n,immediate:!0})}const yf=Hs?window:void 0;function hc(t){var e;const n=ar(t);return(e=n?.$el)!=null?e:n}function Eb(...t){const e=[],n=()=>{e.forEach(a=>a()),e.length=0},r=(a,l,c,u)=>(a.addEventListener(l,c,u),()=>a.removeEventListener(l,c,u)),s=He(()=>{const a=Du(ar(t[0])).filter(l=>l!=null);return a.every(l=>typeof l!="string")?a:void 0}),i=lT(()=>{var a,l;return[(l=(a=s.value)==null?void 0:a.map(c=>hc(c)))!=null?l:[yf].filter(c=>c!=null),Du(ar(s.value?t[1]:t[0])),Du(Re(s.value?t[2]:t[1])),ar(s.value?t[3]:t[2])]},([a,l,c,u])=>{if(n(),!a?.length||!l?.length||!c?.length)return;const f=sT(u)?{...u}:u;e.push(...a.flatMap(p=>l.flatMap(m=>c.map(v=>r(p,m,v,f)))))},{flush:"post"}),o=()=>{i(),n()};return Ab(n),o}function cT(){const t=Xl(!1),e=cr();return e&&Nn(()=>{t.value=!0},e),t}function uT(t){return typeof t=="function"?t:typeof t=="string"?e=>e.key===t:Array.isArray(t)?e=>t.includes(e.key):()=>!0}function dT(...t){let e,n,r={};t.length===3?(e=t[0],n=t[1],r=t[2]):t.length===2?typeof t[1]=="object"?(e=!0,n=t[0],r=t[1]):(e=t[0],n=t[1]):(e=!0,n=t[0]);const{target:s=yf,eventName:i="keydown",passive:o=!1,dedupe:a=!1}=r,l=uT(e);return Eb(s,i,u=>{u.repeat&&ar(a)||l(u)&&n(u)},o)}function fT(t){return JSON.parse(JSON.stringify(t))}function hT(t,e,n,r={}){var s,i,o;const{clone:a=!1,passive:l=!1,eventName:c,deep:u=!1,defaultValue:f,shouldEmit:p}=r,m=cr(),v=n||m?.emit||((s=m?.$emit)==null?void 0:s.bind(m))||((o=(i=m?.proxy)==null?void 0:i.$emit)==null?void 0:o.bind(m?.proxy));let _=c;_=_||`update:${e.toString()}`;const k=P=>a?typeof a=="function"?a(P):fT(P):P,C=()=>nT(t[e])?k(t[e]):f,A=P=>{p?p(P)&&v(_,P):v(_,P)};if(l){const P=C(),S=ge(P);let M=!1;return on(()=>t[e],T=>{M||(M=!0,S.value=k(T),En(()=>M=!1))}),on(S,T=>{!M&&(T!==t[e]||u)&&A(T)},{deep:u}),S}else return He({get(){return C()},set(P){A(P)}})}function Ru(t){if(t===null||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e!==null&&e!==Object.prototype&&Object.getPrototypeOf(e)!==null||Symbol.iterator in t?!1:Symbol.toStringTag in t?Object.prototype.toString.call(t)==="[object Module]":!0}function yd(t,e,n=".",r){if(!Ru(e))return yd(t,{},n,r);const s=Object.assign({},e);for(const i in t){if(i==="__proto__"||i==="constructor")continue;const o=t[i];o!=null&&(r&&r(s,i,o,n)||(Array.isArray(o)&&Array.isArray(s[i])?s[i]=[...o,...s[i]]:Ru(o)&&Ru(s[i])?s[i]=yd(o,s[i],(n?`${n}.`:"")+i.toString(),r):s[i]=o))}return s}function pT(t){return(...e)=>e.reduce((n,r)=>yd(n,r,"",t),{})}const gT=pT(),mT=tT(()=>{const t=ge(new Map),e=ge(),n=He(()=>{for(const o of t.value.values())if(o)return!0;return!1}),r=Z2({scrollBody:ge(!0)});let s=null;const i=()=>{document.body.style.paddingRight="",document.body.style.marginRight="",document.body.style.pointerEvents="",document.documentElement.style.removeProperty("--scrollbar-width"),document.body.style.overflow=e.value??"",rm&&s?.(),e.value=void 0};return on(n,(o,a)=>{if(!Hs)return;if(!o){a&&i();return}e.value===void 0&&(e.value=document.body.style.overflow);const l=window.innerWidth-document.documentElement.clientWidth,c={padding:l,margin:0},u=r.scrollBody?.value?typeof r.scrollBody.value=="object"?gT({padding:r.scrollBody.value.padding===!0?l:r.scrollBody.value.padding,margin:r.scrollBody.value.margin===!0?l:r.scrollBody.value.margin},c):c:{padding:0,margin:0};l>0&&(document.body.style.paddingRight=typeof u.padding=="number"?`${u.padding}px`:String(u.padding),document.body.style.marginRight=typeof u.margin=="number"?`${u.margin}px`:String(u.margin),document.documentElement.style.setProperty("--scrollbar-width",`${l}px`),document.body.style.overflow="hidden"),rm&&(s=Eb(document,"touchmove",f=>vT(f),{passive:!1})),En(()=>{document.body.style.pointerEvents="none",document.body.style.overflow="hidden"})},{immediate:!0,flush:"sync"}),t});function yT(t){const e=Math.random().toString(36).substring(2,7),n=mT();n.value.set(e,t);const r=He({get:()=>n.value.get(e)??!1,set:s=>n.value.set(e,s)});return aT(()=>{n.value.delete(e)}),r}function Ib(t){const e=window.getComputedStyle(t);if(e.overflowX==="scroll"||e.overflowY==="scroll"||e.overflowX==="auto"&&t.clientWidth<t.scrollWidth||e.overflowY==="auto"&&t.clientHeight<t.scrollHeight)return!0;{const n=t.parentNode;return!(n instanceof Element)||n.tagName==="BODY"?!1:Ib(n)}}function vT(t){const e=t||window.event,n=e.target;return n instanceof Element&&Ib(n)?!1:e.touches.length>1?!0:(e.preventDefault&&e.cancelable&&e.preventDefault(),!1)}function vf(t){const e=cr(),n=e?.type.emits,r={};return n?.length||console.warn(`No emitted event found. Please check component: ${e?.type.__name}`),n?.forEach(s=>{r[sl(An(s))]=(...i)=>t(s,...i)}),r}function ur(){const t=cr(),e=ge(),n=He(()=>["#text","#comment"].includes(e.value?.$el.nodeName)?e.value?.$el.nextElementSibling:hc(e)),r=Object.assign({},t.exposed),s={};for(const o in t.props)Object.defineProperty(s,o,{enumerable:!0,configurable:!0,get:()=>t.props[o]});if(Object.keys(r).length>0)for(const o in r)Object.defineProperty(s,o,{enumerable:!0,configurable:!0,get:()=>r[o]});Object.defineProperty(s,"$el",{enumerable:!0,configurable:!0,get:()=>t.vnode.el}),t.exposed=s;function i(o){e.value=o,o&&(Object.defineProperty(s,"$el",{enumerable:!0,configurable:!0,get:()=>o instanceof Element?o:o.$el}),t.exposed=s)}return{forwardRef:i,currentRef:e,currentElement:n}}var bT=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},li=new WeakMap,tl=new WeakMap,nl={},Fu=0,Ob=function(t){return t&&(t.host||Ob(t.parentNode))},_T=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=Ob(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},wT=function(t,e,n,r){var s=_T(e,Array.isArray(t)?t:[t]);nl[n]||(nl[n]=new WeakMap);var i=nl[n],o=[],a=new Set,l=new Set(s),c=function(f){!f||a.has(f)||(a.add(f),c(f.parentNode))};s.forEach(c);var u=function(f){!f||l.has(f)||Array.prototype.forEach.call(f.children,function(p){if(a.has(p))u(p);else try{var m=p.getAttribute(r),v=m!==null&&m!=="false",_=(li.get(p)||0)+1,k=(i.get(p)||0)+1;li.set(p,_),i.set(p,k),o.push(p),_===1&&v&&tl.set(p,!0),k===1&&p.setAttribute(n,"true"),v||p.setAttribute(r,"true")}catch(C){console.error("aria-hidden: cannot operate on ",p,C)}})};return u(e),a.clear(),Fu++,function(){o.forEach(function(f){var p=li.get(f)-1,m=i.get(f)-1;li.set(f,p),i.set(f,m),p||(tl.has(f)||f.removeAttribute(r),tl.delete(f)),m||f.removeAttribute(n)}),Fu--,Fu||(li=new WeakMap,li=new WeakMap,tl=new WeakMap,nl={})}},xT=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=bT(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),wT(r,s,n,"aria-hidden")):function(){return null}};function kT(t){let e;on(()=>hc(t),n=>{n?e=xT(n):e&&e()}),Fi(()=>{e&&e()})}function sm(t,e="reka"){return`${e}-${E0?.()}`}function CT(t,e){const n=ge(t);function r(i){return e[n.value][i]??n.value}return{state:n,dispatch:i=>{n.value=r(i)}}}function ST(t,e){const n=ge({}),r=ge("none"),s=ge(t),i=t.value?"mounted":"unmounted";let o;const a=e.value?.ownerDocument.defaultView??yf,{state:l,dispatch:c}=CT(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}}),u=k=>{if(Hs){const C=new CustomEvent(k,{bubbles:!1,cancelable:!1});e.value?.dispatchEvent(C)}};on(t,async(k,C)=>{const A=C!==k;if(await En(),A){const P=r.value,S=rl(e.value);k?(c("MOUNT"),u("enter"),S==="none"&&u("after-enter")):S==="none"||S==="undefined"||n.value?.display==="none"?(c("UNMOUNT"),u("leave"),u("after-leave")):C&&P!==S?(c("ANIMATION_OUT"),u("leave")):(c("UNMOUNT"),u("after-leave"))}},{immediate:!0});const f=k=>{const C=rl(e.value),A=C.includes(k.animationName),P=l.value==="mounted"?"enter":"leave";if(k.target===e.value&&A&&(u(`after-${P}`),c("ANIMATION_END"),!s.value)){const S=e.value.style.animationFillMode;e.value.style.animationFillMode="forwards",o=a?.setTimeout(()=>{e.value?.style.animationFillMode==="forwards"&&(e.value.style.animationFillMode=S)})}k.target===e.value&&C==="none"&&c("ANIMATION_END")},p=k=>{k.target===e.value&&(r.value=rl(e.value))},m=on(e,(k,C)=>{k?(n.value=getComputedStyle(k),k.addEventListener("animationstart",p),k.addEventListener("animationcancel",f),k.addEventListener("animationend",f)):(c("ANIMATION_END"),o!==void 0&&a?.clearTimeout(o),C?.removeEventListener("animationstart",p),C?.removeEventListener("animationcancel",f),C?.removeEventListener("animationend",f))},{immediate:!0}),v=on(l,()=>{const k=rl(e.value);r.value=l.value==="mounted"?k:"none"});return Fi(()=>{m(),v()}),{isPresent:He(()=>["mounted","unmountSuspended"].includes(l.value))}}function rl(t){return t&&getComputedStyle(t).animationName||"none"}var Mb=et({name:"Presence",props:{present:{type:Boolean,required:!0},forceMount:{type:Boolean}},slots:{},setup(t,{slots:e,expose:n}){const{present:r,forceMount:s}=Ld(t),i=ge(),{isPresent:o}=ST(r,i);n({present:o});let a=e.default({present:o.value});a=mf(a||[]);const l=cr();if(a&&a?.length>1){const c=l?.parent?.type.name?`<${l.parent.type.name} />`:"component";throw new Error([`Detected an invalid children for \`${c}\` for  \`Presence\` component.`,"","Note: Presence works similarly to `v-if` directly, but it waits for animation/transition to finished before unmounting. So it expect only one direct child of valid VNode type.","You can apply a few solutions:",["Provide a single child element so that `presence` directive attach correctly.","Ensure the first child is an actual element instead of a raw text node or comment node."].map(u=>`  - ${u}`).join(`
`)].join(`
`))}return()=>s.value||r.value||o.value?Ar(e.default({present:o.value})[0],{ref:c=>{const u=hc(c);return typeof u?.hasAttribute>"u"||(u?.hasAttribute("data-reka-popper-content-wrapper")?i.value=u.firstElementChild:i.value=u),u}}):null}});const PT=et({name:"PrimitiveSlot",inheritAttrs:!1,setup(t,{attrs:e,slots:n}){return()=>{if(!n.default)return null;const r=mf(n.default()),s=r.findIndex(l=>l.type!==Hn);if(s===-1)return r;const i=r[s];delete i.props?.ref;const o=i.props?lr(e,i.props):e,a=ss({...i,props:{}},o);return r.length===1?a:(r[s]=a,r)}}}),AT=["area","img","input"],ia=et({name:"Primitive",inheritAttrs:!1,props:{asChild:{type:Boolean,default:!1},as:{type:[String,Object],default:"div"}},setup(t,{attrs:e,slots:n}){const r=t.asChild?"template":t.as;return typeof r=="string"&&AT.includes(r)?()=>Ar(r,e):r!=="template"?()=>Ar(t.as,e,{default:n.default}):()=>Ar(PT,e,{default:n.default})}}),[ls,ET]=Sb("DialogRoot");var IT=et({inheritAttrs:!1,__name:"DialogRoot",props:{open:{type:Boolean,required:!1,default:void 0},defaultOpen:{type:Boolean,required:!1,default:!1},modal:{type:Boolean,required:!1,default:!0}},emits:["update:open"],setup(t,{emit:e}){const n=t,s=hT(n,"open",e,{defaultValue:n.defaultOpen,passive:n.open===void 0}),i=ge(),o=ge(),{modal:a}=Ld(n);return ET({open:s,modal:a,openModal:()=>{s.value=!0},onOpenChange:l=>{s.value=l},onOpenToggle:()=>{s.value=!s.value},contentId:"",titleId:"",descriptionId:"",triggerElement:i,contentElement:o}),(l,c)=>vn(l.$slots,"default",{open:Re(s),close:()=>s.value=!1})}}),OT=IT,MT=et({__name:"DialogClose",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(t){const e=t;ur();const n=ls();return(r,s)=>(q(),Qt(Re(ia),lr(e,{type:r.as==="button"?"button":void 0,onClick:s[0]||(s[0]=i=>Re(n).onOpenChange(!1))}),{default:lt(()=>[vn(r.$slots,"default")]),_:3},16,["type"]))}}),TT=MT;const DT="dismissableLayer.pointerDownOutside",RT="dismissableLayer.focusOutside";function Tb(t,e){const n=e.closest("[data-dismissable-layer]"),r=t.dataset.dismissableLayer===""?t:t.querySelector("[data-dismissable-layer]"),s=Array.from(t.ownerDocument.querySelectorAll("[data-dismissable-layer]"));return!!(n&&(r===n||s.indexOf(r)<s.indexOf(n)))}function FT(t,e,n=!0){const r=e?.value?.ownerDocument??globalThis?.document,s=ge(!1),i=ge(()=>{});return Si(o=>{if(!Hs||!ar(n))return;const a=async c=>{const u=c.target;if(!(!e?.value||!u)){if(Tb(e.value,u)){s.value=!1;return}if(c.target&&!s.value){let m=function(){Pb(DT,t,p)};var f=m;const p={originalEvent:c};c.pointerType==="touch"?(r.removeEventListener("click",i.value),i.value=m,r.addEventListener("click",i.value,{once:!0})):m()}else r.removeEventListener("click",i.value);s.value=!1}},l=window.setTimeout(()=>{r.addEventListener("pointerdown",a)},0);o(()=>{window.clearTimeout(l),r.removeEventListener("pointerdown",a),r.removeEventListener("click",i.value)})}),{onPointerDownCapture:()=>{ar(n)&&(s.value=!0)}}}function $T(t,e,n=!0){const r=e?.value?.ownerDocument??globalThis?.document,s=ge(!1);return Si(i=>{if(!Hs||!ar(n))return;const o=async a=>{if(!e?.value)return;await En(),await En();const l=a.target;!e.value||!l||Tb(e.value,l)||a.target&&!s.value&&Pb(RT,t,{originalEvent:a})};r.addEventListener("focusin",o),i(()=>r.removeEventListener("focusin",o))}),{onFocusCapture:()=>{ar(n)&&(s.value=!0)},onBlurCapture:()=>{ar(n)&&(s.value=!1)}}}const _r=qs({layersRoot:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set});var LT=et({__name:"DismissableLayer",props:{disableOutsidePointerEvents:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","dismiss"],setup(t,{emit:e}){const n=t,r=e,{forwardRef:s,currentElement:i}=ur(),o=He(()=>i.value?.ownerDocument??globalThis.document),a=He(()=>_r.layersRoot),l=He(()=>i.value?Array.from(a.value).indexOf(i.value):-1),c=He(()=>_r.layersWithOutsidePointerEventsDisabled.size>0),u=He(()=>{const v=Array.from(a.value),[_]=[..._r.layersWithOutsidePointerEventsDisabled].slice(-1),k=v.indexOf(_);return l.value>=k}),f=FT(async v=>{const _=[..._r.branches].some(k=>k?.contains(v.target));!u.value||_||(r("pointerDownOutside",v),r("interactOutside",v),await En(),v.defaultPrevented||r("dismiss"))},i),p=$T(v=>{[..._r.branches].some(k=>k?.contains(v.target))||(r("focusOutside",v),r("interactOutside",v),v.defaultPrevented||r("dismiss"))},i);dT("Escape",v=>{l.value===a.value.size-1&&(r("escapeKeyDown",v),v.defaultPrevented||r("dismiss"))});let m;return Si(v=>{i.value&&(n.disableOutsidePointerEvents&&(_r.layersWithOutsidePointerEventsDisabled.size===0&&(m=o.value.body.style.pointerEvents,o.value.body.style.pointerEvents="none"),_r.layersWithOutsidePointerEventsDisabled.add(i.value)),a.value.add(i.value),v(()=>{n.disableOutsidePointerEvents&&_r.layersWithOutsidePointerEventsDisabled.size===1&&(o.value.body.style.pointerEvents=m)}))}),Si(v=>{v(()=>{i.value&&(a.value.delete(i.value),_r.layersWithOutsidePointerEventsDisabled.delete(i.value))})}),(v,_)=>(q(),Qt(Re(ia),{ref:Re(s),"as-child":v.asChild,as:v.as,"data-dismissable-layer":"",style:Un({pointerEvents:c.value?u.value?"auto":"none":void 0}),onFocusCapture:Re(p).onFocusCapture,onBlurCapture:Re(p).onBlurCapture,onPointerdownCapture:Re(f).onPointerDownCapture},{default:lt(()=>[vn(v.$slots,"default")]),_:3},8,["as-child","as","style","onFocusCapture","onBlurCapture","onPointerdownCapture"]))}}),BT=LT;const jT=eT(()=>ge([]));function NT(){const t=jT();return{add(e){const n=t.value[0];e!==n&&n?.pause(),t.value=im(t.value,e),t.value.unshift(e)},remove(e){t.value=im(t.value,e),t.value[0]?.resume()}}}function im(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function zT(t){return t.filter(e=>e.tagName!=="A")}const $u="focusScope.autoFocusOnMount",Lu="focusScope.autoFocusOnUnmount",om={bubbles:!1,cancelable:!0};function UT(t,{select:e=!1}={}){const n=ts();for(const r of t)if(Wr(r,{select:e}),ts()!==n)return!0}function qT(t){const e=Db(t),n=am(e,t),r=am(e.reverse(),t);return[n,r]}function Db(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function am(t,e){for(const n of t)if(!WT(n,{upTo:e}))return n}function WT(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function VT(t){return t instanceof HTMLInputElement&&"select"in t}function Wr(t,{select:e=!1}={}){if(t&&t.focus){const n=ts();t.focus({preventScroll:!0}),t!==n&&VT(t)&&e&&t.select()}}var HT=et({__name:"FocusScope",props:{loop:{type:Boolean,required:!1,default:!1},trapped:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["mountAutoFocus","unmountAutoFocus"],setup(t,{emit:e}){const n=t,r=e,{currentRef:s,currentElement:i}=ur(),o=ge(null),a=NT(),l=qs({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}});Si(u=>{if(!Hs)return;const f=i.value;if(!n.trapped)return;function p(k){if(l.paused||!f)return;const C=k.target;f.contains(C)?o.value=C:Wr(o.value,{select:!0})}function m(k){if(l.paused||!f)return;const C=k.relatedTarget;C!==null&&(f.contains(C)||Wr(o.value,{select:!0}))}function v(k){f.contains(o.value)||Wr(f)}document.addEventListener("focusin",p),document.addEventListener("focusout",m);const _=new MutationObserver(v);f&&_.observe(f,{childList:!0,subtree:!0}),u(()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",m),_.disconnect()})}),Si(async u=>{const f=i.value;if(await En(),!f)return;a.add(l);const p=ts();if(!f.contains(p)){const v=new CustomEvent($u,om);f.addEventListener($u,_=>r("mountAutoFocus",_)),f.dispatchEvent(v),v.defaultPrevented||(UT(zT(Db(f)),{select:!0}),ts()===p&&Wr(f))}u(()=>{f.removeEventListener($u,k=>r("mountAutoFocus",k));const v=new CustomEvent(Lu,om),_=k=>{r("unmountAutoFocus",k)};f.addEventListener(Lu,_),f.dispatchEvent(v),setTimeout(()=>{v.defaultPrevented||Wr(p??document.body,{select:!0}),f.removeEventListener(Lu,_),a.remove(l)},0)})});function c(u){if(!n.loop&&!n.trapped||l.paused)return;const f=u.key==="Tab"&&!u.altKey&&!u.ctrlKey&&!u.metaKey,p=ts();if(f&&p){const m=u.currentTarget,[v,_]=qT(m);v&&_?!u.shiftKey&&p===_?(u.preventDefault(),n.loop&&Wr(v,{select:!0})):u.shiftKey&&p===v&&(u.preventDefault(),n.loop&&Wr(_,{select:!0})):p===m&&u.preventDefault()}}return(u,f)=>(q(),Qt(Re(ia),{ref_key:"currentRef",ref:s,tabindex:"-1","as-child":u.asChild,as:u.as,onKeydown:c},{default:lt(()=>[vn(u.$slots,"default")]),_:3},8,["as-child","as"]))}}),KT=HT;function YT(t){return t?"open":"closed"}var GT=et({__name:"DialogContentImpl",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const n=t,r=e,s=ls(),{forwardRef:i,currentElement:o}=ur();return s.titleId||=sm(void 0,"reka-dialog-title"),s.descriptionId||=sm(void 0,"reka-dialog-description"),Nn(()=>{s.contentElement=o,ts()!==document.body&&(s.triggerElement.value=ts())}),(a,l)=>(q(),Qt(Re(KT),{"as-child":"",loop:"",trapped:n.trapFocus,onMountAutoFocus:l[5]||(l[5]=c=>r("openAutoFocus",c)),onUnmountAutoFocus:l[6]||(l[6]=c=>r("closeAutoFocus",c))},{default:lt(()=>[qe(Re(BT),lr({id:Re(s).contentId,ref:Re(i),as:a.as,"as-child":a.asChild,"disable-outside-pointer-events":a.disableOutsidePointerEvents,role:"dialog","aria-describedby":Re(s).descriptionId,"aria-labelledby":Re(s).titleId,"data-state":Re(YT)(Re(s).open.value)},a.$attrs,{onDismiss:l[0]||(l[0]=c=>Re(s).onOpenChange(!1)),onEscapeKeyDown:l[1]||(l[1]=c=>r("escapeKeyDown",c)),onFocusOutside:l[2]||(l[2]=c=>r("focusOutside",c)),onInteractOutside:l[3]||(l[3]=c=>r("interactOutside",c)),onPointerDownOutside:l[4]||(l[4]=c=>r("pointerDownOutside",c))}),{default:lt(()=>[vn(a.$slots,"default")]),_:3},16,["id","as","as-child","disable-outside-pointer-events","aria-describedby","aria-labelledby","data-state"])]),_:3},8,["trapped"]))}}),Rb=GT,XT=et({__name:"DialogContentModal",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const n=t,r=e,s=ls(),i=vf(r),{forwardRef:o,currentElement:a}=ur();return kT(a),(l,c)=>(q(),Qt(Rb,lr({...n,...Re(i)},{ref:Re(o),"trap-focus":Re(s).open.value,"disable-outside-pointer-events":!0,onCloseAutoFocus:c[0]||(c[0]=u=>{u.defaultPrevented||(u.preventDefault(),Re(s).triggerElement.value?.focus())}),onPointerDownOutside:c[1]||(c[1]=u=>{const f=u.detail.originalEvent,p=f.button===0&&f.ctrlKey===!0;(f.button===2||p)&&u.preventDefault()}),onFocusOutside:c[2]||(c[2]=u=>{u.preventDefault()})}),{default:lt(()=>[vn(l.$slots,"default")]),_:3},16,["trap-focus"]))}}),QT=XT,JT=et({__name:"DialogContentNonModal",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const n=t,s=vf(e);ur();const i=ls(),o=ge(!1),a=ge(!1);return(l,c)=>(q(),Qt(Rb,lr({...n,...Re(s)},{"trap-focus":!1,"disable-outside-pointer-events":!1,onCloseAutoFocus:c[0]||(c[0]=u=>{u.defaultPrevented||(o.value||Re(i).triggerElement.value?.focus(),u.preventDefault()),o.value=!1,a.value=!1}),onInteractOutside:c[1]||(c[1]=u=>{u.defaultPrevented||(o.value=!0,u.detail.originalEvent.type==="pointerdown"&&(a.value=!0));const f=u.target;Re(i).triggerElement.value?.contains(f)&&u.preventDefault(),u.detail.originalEvent.type==="focusin"&&a.value&&u.preventDefault()})}),{default:lt(()=>[vn(l.$slots,"default")]),_:3},16))}}),ZT=JT,eD=et({__name:"DialogContent",props:{forceMount:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const n=t,r=e,s=ls(),i=vf(r),{forwardRef:o}=ur();return(a,l)=>(q(),Qt(Re(Mb),{present:a.forceMount||Re(s).open.value},{default:lt(()=>[Re(s).modal.value?(q(),Qt(QT,lr({key:0,ref:Re(o)},{...n,...Re(i),...a.$attrs}),{default:lt(()=>[vn(a.$slots,"default")]),_:3},16)):(q(),Qt(ZT,lr({key:1,ref:Re(o)},{...n,...Re(i),...a.$attrs}),{default:lt(()=>[vn(a.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),tD=eD,nD=et({__name:"DialogOverlayImpl",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const e=ls();return yT(!0),ur(),(n,r)=>(q(),Qt(Re(ia),{as:n.as,"as-child":n.asChild,"data-state":Re(e).open.value?"open":"closed",style:{"pointer-events":"auto"}},{default:lt(()=>[vn(n.$slots,"default")]),_:3},8,["as","as-child","data-state"]))}}),rD=nD,sD=et({__name:"DialogOverlay",props:{forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const e=ls(),{forwardRef:n}=ur();return(r,s)=>Re(e)?.modal.value?(q(),Qt(Re(Mb),{key:0,present:r.forceMount||Re(e).open.value},{default:lt(()=>[qe(rD,lr(r.$attrs,{ref:Re(n),as:r.as,"as-child":r.asChild}),{default:lt(()=>[vn(r.$slots,"default")]),_:3},16,["as","as-child"])]),_:3},8,["present"])):ke("v-if",!0)}}),iD=sD,oD=et({__name:"Teleport",props:{to:{type:null,required:!1,default:"body"},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(t){const e=cT();return(n,r)=>Re(e)||n.forceMount?(q(),Qt(C0,{key:0,to:n.to,disabled:n.disabled,defer:n.defer},[vn(n.$slots,"default")],8,["to","disabled","defer"])):ke("v-if",!0)}}),aD=oD,lD=et({__name:"DialogPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(t){const e=t;return(n,r)=>(q(),Qt(Re(aD),z_(Ry(e)),{default:lt(()=>[vn(n.$slots,"default")]),_:3},16))}}),cD=lD,uD=et({__name:"DialogTitle",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"h2"}},setup(t){const e=t,n=ls();return ur(),(r,s)=>(q(),Qt(Re(ia),lr(e,{id:Re(n).titleId}),{default:lt(()=>[vn(r.$slots,"default")]),_:3},16,["id"]))}}),dD=uD;/*!
* chartjs-plugin-annotation v3.1.0
* https://www.chartjs.org/chartjs-plugin-annotation/index
 * (c) 2024 chartjs-plugin-annotation Contributors
 * Released under the MIT License
 */const lm={modes:{point(t,e){return ml(t,e,{intersect:!0})},nearest(t,e,n){return pD(t,e,n)},x(t,e,n){return ml(t,e,{intersect:n.intersect,axis:"x"})},y(t,e,n){return ml(t,e,{intersect:n.intersect,axis:"y"})}}};function bf(t,e,n){return(lm.modes[n.mode]||lm.modes.nearest)(t,e,n)}function fD(t,e,n){return n!=="x"&&n!=="y"?t.inRange(e.x,e.y,"x",!0)||t.inRange(e.x,e.y,"y",!0):t.inRange(e.x,e.y,n,!0)}function hD(t,e,n){return n==="x"?{x:t.x,y:e.y}:n==="y"?{x:e.x,y:t.y}:e}function ml(t,e,n){return t.filter(r=>n.intersect?r.inRange(e.x,e.y):fD(r,e,n.axis))}function pD(t,e,n){let r=Number.POSITIVE_INFINITY;return ml(t,e,n).reduce((s,i)=>{const o=i.getCenterPoint(),a=hD(e,o,n.axis),l=Oi(e,a);return l<r?(s=[i],r=l):l===r&&s.push(i),s},[]).sort((s,i)=>s._index-i._index).slice(0,1)}function Ks(t,e,n){const r=Math.cos(n),s=Math.sin(n),i=e.x,o=e.y;return{x:i+r*(t.x-i)-s*(t.y-o),y:o+s*(t.x-i)+r*(t.y-o)}}const gD=(t,e)=>e>t||t.length>e.length&&t.slice(0,e.length)===e,Fs=.001,pc=(t,e,n)=>Math.min(n,Math.max(e,t)),Fb=(t,e)=>t.value>=t.start-e&&t.value<=t.end+e;function mD(t,e,n){for(const r of Object.keys(t))t[r]=pc(t[r],e,n);return t}function yD(t,e,n,r){return!t||!e||n<=0?!1:Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)<=Math.pow(n+r,2)}function $b(t,{x:e,y:n,x2:r,y2:s},i,{borderWidth:o,hitTolerance:a}){const l=(o+a)/2,c=t.x>=e-l-Fs&&t.x<=r+l+Fs,u=t.y>=n-l-Fs&&t.y<=s+l+Fs;return i==="x"?c:(i==="y"||c)&&u}function Lb(t,{rect:e,center:n},r,{rotation:s,borderWidth:i,hitTolerance:o}){const a=Ks(t,n,Wt(-s));return $b(a,e,r,{borderWidth:i,hitTolerance:o})}function Ys(t,e){const{centerX:n,centerY:r}=t.getProps(["centerX","centerY"],e);return{x:n,y:r}}function vD(t,e,n,r=!0){const s=n.split(".");let i=0;for(const o of e.split(".")){const a=s[i++];if(parseInt(o,10)<parseInt(a,10))break;if(gD(a,o)){if(r)throw new Error(`${t} v${n} is not supported. v${e} or newer is required.`);return!1}}return!0}const Bb=t=>typeof t=="string"&&t.endsWith("%"),jb=t=>parseFloat(t)/100,Nb=t=>pc(jb(t),0,1),co=(t,e)=>({x:t,y:e,x2:t,y2:e,width:0,height:0}),bD={box:t=>co(t.centerX,t.centerY),doughnutLabel:t=>co(t.centerX,t.centerY),ellipse:t=>({centerX:t.centerX,centerY:t.centerX,radius:0,width:0,height:0}),label:t=>co(t.centerX,t.centerY),line:t=>co(t.x,t.y),point:t=>({centerX:t.centerX,centerY:t.centerY,radius:0,width:0,height:0}),polygon:t=>co(t.centerX,t.centerY)};function _f(t,e){return e==="start"?0:e==="end"?t:Bb(e)?Nb(e)*t:t/2}function is(t,e,n=!0){return typeof e=="number"?e:Bb(e)?(n?Nb(e):jb(e))*t:t}function _D(t,e){const{x:n,width:r}=t,s=e.textAlign;return s==="center"?n+r/2:s==="end"||s==="right"?n+r:n}function zb(t,e,{borderWidth:n,position:r,xAdjust:s,yAdjust:i},o){const a=Je(o),l=e.width+(a?o.width:0)+n,c=e.height+(a?o.height:0)+n,u=wf(r),f=cm(t.x,l,s,u.x),p=cm(t.y,c,i,u.y);return{x:f,y:p,x2:f+l,y2:p+c,width:l,height:c,centerX:f+l/2,centerY:p+c/2}}function wf(t,e="center"){return Je(t)?{x:Qe(t.x,e),y:Qe(t.y,e)}:(t=Qe(t,e),{x:t,y:t})}const Ub=(t,e)=>t&&t.autoFit&&e<1;function qb(t,e){const n=t.font,r=Ct(n)?n:[n];return Ub(t,e)?r.map(function(s){const i=Lt(s);return i.size=Math.floor(s.size*e),i.lineHeight=s.lineHeight,Lt(i)}):r.map(s=>Lt(s))}function Wb(t){return t&&(In(t.xValue)||In(t.yValue))}function cm(t,e,n=0,r){return t-_f(e,r)+n}function Li(t,e,n){const r=n.init;if(r){if(r===!0)return Hb(e,n)}else return;return wD(t,e,n)}function Vb(t,e,n){let r=!1;return e.forEach(s=>{yn(t[s])?(r=!0,n[s]=t[s]):In(n[s])&&delete n[s]}),r}function Hb(t,e){const n=e.type||"line";return bD[n](t)}function wD(t,e,n){const r=gt(n.init,[{chart:t,properties:e,options:n}]);if(r===!0)return Hb(e,n);if(Je(r))return r}const Bu=new Map,xD=t=>isNaN(t)||t<=0,kD=t=>t.reduce(function(e,n){return e+=n.string,e},"");function gc(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object HTMLImageElement]"||e==="[object HTMLCanvasElement]"}}function mc(t,{x:e,y:n},r){r&&(t.translate(e,n),t.rotate(Wt(r)),t.translate(-e,-n))}function Or(t,e){if(e&&e.borderWidth)return t.lineCap=e.borderCapStyle||"butt",t.setLineDash(e.borderDash),t.lineDashOffset=e.borderDashOffset,t.lineJoin=e.borderJoinStyle||"miter",t.lineWidth=e.borderWidth,t.strokeStyle=e.borderColor,!0}function Bi(t,e){t.shadowColor=e.backgroundShadowColor,t.shadowBlur=e.shadowBlur,t.shadowOffsetX=e.shadowOffsetX,t.shadowOffsetY=e.shadowOffsetY}function yc(t,e){const n=e.content;if(gc(n))return{width:is(n.width,e.width),height:is(n.height,e.height)};const r=qb(e),s=e.textStrokeWidth,i=Ct(n)?n:[n],o=i.join()+kD(r)+s+(t._measureText?"-spriting":"");return Bu.has(o)||Bu.set(o,AD(t,i,r,s)),Bu.get(o)}function Kb(t,e,n){const{x:r,y:s,width:i,height:o}=e;t.save(),Bi(t,n);const a=Or(t,n);t.fillStyle=n.backgroundColor,t.beginPath(),$l(t,{x:r,y:s,w:i,h:o,radius:mD(xi(n.borderRadius),0,Math.min(i,o)/2)}),t.closePath(),t.fill(),a&&(t.shadowColor=n.borderShadowColor,t.stroke()),t.restore()}function Yb(t,e,n,r){const s=n.content;if(gc(s)){t.save(),t.globalAlpha=OD(n.opacity,s.style.opacity),t.drawImage(s,e.x,e.y,e.width,e.height),t.restore();return}const i=Ct(s)?s:[s],o=qb(n,r),a=n.color,l=Ct(a)?a:[a],c=_D(e,n),u=e.y+n.textStrokeWidth/2;t.save(),t.textBaseline="middle",t.textAlign=n.textAlign,CD(t,n)&&ED(t,{x:c,y:u},i,o),ID(t,{x:c,y:u},i,{fonts:o,colors:l}),t.restore()}function CD(t,e){if(e.textStrokeWidth>0)return t.lineJoin="round",t.miterLimit=2,t.lineWidth=e.textStrokeWidth,t.strokeStyle=e.textStrokeColor,!0}function SD(t,e,n,r){const{radius:s,options:i}=e,o=i.pointStyle,a=i.rotation;let l=(a||0)*Zd;if(gc(o)){t.save(),t.translate(n,r),t.rotate(l),t.drawImage(o,-o.width/2,-o.height/2,o.width,o.height),t.restore();return}xD(s)||PD(t,{x:n,y:r,radius:s,rotation:a,style:o,rad:l})}function PD(t,{x:e,y:n,radius:r,rotation:s,style:i,rad:o}){let a,l,c,u;switch(t.beginPath(),i){default:t.arc(e,n,r,0,qt),t.closePath();break;case"triangle":t.moveTo(e+Math.sin(o)*r,n-Math.cos(o)*r),o+=Rl,t.lineTo(e+Math.sin(o)*r,n-Math.cos(o)*r),o+=Rl,t.lineTo(e+Math.sin(o)*r,n-Math.cos(o)*r),t.closePath();break;case"rectRounded":u=r*.516,c=r-u,a=Math.cos(o+Rn)*c,l=Math.sin(o+Rn)*c,t.arc(e-a,n-l,u,o-ut,o-Xt),t.arc(e+l,n-a,u,o-Xt,o),t.arc(e+a,n+l,u,o,o+Xt),t.arc(e-l,n+a,u,o+Xt,o+ut),t.closePath();break;case"rect":if(!s){c=Math.SQRT1_2*r,t.rect(e-c,n-c,2*c,2*c);break}o+=Rn;case"rectRot":a=Math.cos(o)*r,l=Math.sin(o)*r,t.moveTo(e-a,n-l),t.lineTo(e+l,n-a),t.lineTo(e+a,n+l),t.lineTo(e-l,n+a),t.closePath();break;case"crossRot":o+=Rn;case"cross":a=Math.cos(o)*r,l=Math.sin(o)*r,t.moveTo(e-a,n-l),t.lineTo(e+a,n+l),t.moveTo(e+l,n-a),t.lineTo(e-l,n+a);break;case"star":a=Math.cos(o)*r,l=Math.sin(o)*r,t.moveTo(e-a,n-l),t.lineTo(e+a,n+l),t.moveTo(e+l,n-a),t.lineTo(e-l,n+a),o+=Rn,a=Math.cos(o)*r,l=Math.sin(o)*r,t.moveTo(e-a,n-l),t.lineTo(e+a,n+l),t.moveTo(e+l,n-a),t.lineTo(e-l,n+a);break;case"line":a=Math.cos(o)*r,l=Math.sin(o)*r,t.moveTo(e-a,n-l),t.lineTo(e+a,n+l);break;case"dash":t.moveTo(e,n),t.lineTo(e+Math.cos(o)*r,n+Math.sin(o)*r);break}t.fill()}function AD(t,e,n,r){t.save();const s=e.length;let i=0,o=r;for(let a=0;a<s;a++){const l=n[Math.min(a,n.length-1)];t.font=l.string;const c=e[a];i=Math.max(i,t.measureText(c).width+r),o+=l.lineHeight}return t.restore(),{width:i,height:o}}function ED(t,{x:e,y:n},r,s){t.beginPath();let i=0;r.forEach(function(o,a){const l=s[Math.min(a,s.length-1)],c=l.lineHeight;t.font=l.string,t.strokeText(o,e,n+c/2+i),i+=c}),t.stroke()}function ID(t,{x:e,y:n},r,{fonts:s,colors:i}){let o=0;r.forEach(function(a,l){const c=i[Math.min(l,i.length-1)],u=s[Math.min(l,s.length-1)],f=u.lineHeight;t.beginPath(),t.font=u.string,t.fillStyle=c,t.fillText(a,e,n+f/2+o),o+=f,t.fill()})}function OD(t,e){const n=Ns(t)?t:e;return Ns(n)?pc(n,0,1):1}const Gb=["left","bottom","top","right"];function MD(t,e){const{pointX:n,pointY:r,options:s}=e,i=s.callout,o=i&&i.display&&$D(e,i);if(!o||BD(e,i,o))return;if(t.save(),t.beginPath(),!Or(t,i))return t.restore();const{separatorStart:l,separatorEnd:c}=TD(e,o),{sideStart:u,sideEnd:f}=RD(e,o,l);(i.margin>0||s.borderWidth===0)&&(t.moveTo(l.x,l.y),t.lineTo(c.x,c.y)),t.moveTo(u.x,u.y),t.lineTo(f.x,f.y);const p=Ks({x:n,y:r},e.getCenterPoint(),Wt(-e.rotation));t.lineTo(p.x,p.y),t.stroke(),t.restore()}function TD(t,e){const{x:n,y:r,x2:s,y2:i}=t,o=DD(t,e);let a,l;return e==="left"||e==="right"?(a={x:n+o,y:r},l={x:a.x,y:i}):(a={x:n,y:r+o},l={x:s,y:a.y}),{separatorStart:a,separatorEnd:l}}function DD(t,e){const{width:n,height:r,options:s}=t,i=s.callout.margin+s.borderWidth/2;return e==="right"?n+i:e==="bottom"?r+i:-i}function RD(t,e,n){const{y:r,width:s,height:i,options:o}=t,a=o.callout.start,l=FD(e,o.callout);let c,u;return e==="left"||e==="right"?(c={x:n.x,y:r+is(i,a)},u={x:c.x+l,y:c.y}):(c={x:n.x+is(s,a),y:n.y},u={x:c.x,y:c.y+l}),{sideStart:c,sideEnd:u}}function FD(t,e){const n=e.side;return t==="left"||t==="top"?-n:n}function $D(t,e){const n=e.position;return Gb.includes(n)?n:LD(t,e)}function LD(t,e){const{x:n,y:r,x2:s,y2:i,width:o,height:a,pointX:l,pointY:c,centerX:u,centerY:f,rotation:p}=t,m={x:u,y:f},v=e.start,_=is(o,v),k=is(a,v),C=[n,n+_,n+_,s],A=[r+k,i,r,i],P=[];for(let S=0;S<4;S++){const M=Ks({x:C[S],y:A[S]},m,Wt(p));P.push({position:Gb[S],distance:Oi(M,{x:l,y:c})})}return P.sort((S,M)=>S.distance-M.distance)[0].position}function BD(t,e,n){const{pointX:r,pointY:s}=t,i=e.margin;let o=r,a=s;return n==="left"?o+=i:n==="right"?o-=i:n==="top"?a+=i:n==="bottom"&&(a-=i),t.inRange(o,a)}const um={xScaleID:{min:"xMin",max:"xMax",start:"left",end:"right",startProp:"x",endProp:"x2"},yScaleID:{min:"yMin",max:"yMax",start:"bottom",end:"top",startProp:"y",endProp:"y2"}};function Ri(t,e,n){return e=typeof e=="number"?e:t.parse(e),Ht(e)?t.getPixelForValue(e):n}function Us(t,e,n){const r=e[n];if(r||n==="scaleID")return r;const s=n.charAt(0),i=Object.values(t).filter(o=>o.axis&&o.axis===s);return i.length?i[0].id:s}function Xb(t,e){if(t){const n=t.options.reverse,r=Ri(t,e.min,n?e.end:e.start),s=Ri(t,e.max,n?e.start:e.end);return{start:r,end:s}}}function Qb(t,e){const{chartArea:n,scales:r}=t,s=r[Us(r,e,"xScaleID")],i=r[Us(r,e,"yScaleID")];let o=n.width/2,a=n.height/2;return s&&(o=Ri(s,e.xValue,s.left+s.width/2)),i&&(a=Ri(i,e.yValue,i.top+i.height/2)),{x:o,y:a}}function xf(t,e){const n=t.scales,r=n[Us(n,e,"xScaleID")],s=n[Us(n,e,"yScaleID")];if(!r&&!s)return{};let{left:i,right:o}=r||t.chartArea,{top:a,bottom:l}=s||t.chartArea;const c=dm(r,{min:e.xMin,max:e.xMax,start:i,end:o});i=c.start,o=c.end;const u=dm(s,{min:e.yMin,max:e.yMax,start:l,end:a});return a=u.start,l=u.end,{x:i,y:a,x2:o,y2:l,width:o-i,height:l-a,centerX:i+(o-i)/2,centerY:a+(l-a)/2}}function Jb(t,e){if(!Wb(e)){const n=xf(t,e);let r=e.radius;(!r||isNaN(r))&&(r=Math.min(n.width,n.height)/2,e.radius=r);const s=r*2,i=n.centerX+e.xAdjust,o=n.centerY+e.yAdjust;return{x:i-r,y:o-r,x2:i+r,y2:o+r,centerX:i,centerY:o,width:s,height:s,radius:r}}return ND(t,e)}function jD(t,e){const{scales:n,chartArea:r}=t,s=n[e.scaleID],i={x:r.left,y:r.top,x2:r.right,y2:r.bottom};return s?zD(s,i,e):UD(n,i,e),i}function Zb(t,e){const n=xf(t,e);return n.initProperties=Li(t,n,e),n.elements=[{type:"label",optionScope:"label",properties:VD(t,n,e),initProperties:n.initProperties}],n}function ND(t,e){const n=Qb(t,e),r=e.radius*2;return{x:n.x-e.radius+e.xAdjust,y:n.y-e.radius+e.yAdjust,x2:n.x+e.radius+e.xAdjust,y2:n.y+e.radius+e.yAdjust,centerX:n.x+e.xAdjust,centerY:n.y+e.yAdjust,radius:e.radius,width:r,height:r}}function dm(t,e){const n=Xb(t,e)||e;return{start:Math.min(n.start,n.end),end:Math.max(n.start,n.end)}}function zD(t,e,n){const r=Ri(t,n.value,NaN),s=Ri(t,n.endValue,r);t.isHorizontal()?(e.x=r,e.x2=s):(e.y=r,e.y2=s)}function UD(t,e,n){for(const r of Object.keys(um)){const s=t[Us(t,n,r)];if(s){const{min:i,max:o,start:a,end:l,startProp:c,endProp:u}=um[r],f=Xb(s,{min:n[i],max:n[o],start:s[a],end:s[l]});e[c]=f.start,e[u]=f.end}}}function qD({properties:t,options:e},n,r,s){const{x:i,x2:o,width:a}=t;return e_({start:i,end:o,borderWidth:e.borderWidth},{position:r.x,padding:{start:s.left,end:s.right},adjust:e.label.xAdjust,size:n.width})}function WD({properties:t,options:e},n,r,s){const{y:i,y2:o,height:a}=t;return e_({start:i,end:o,borderWidth:e.borderWidth},{position:r.y,padding:{start:s.top,end:s.bottom},adjust:e.label.yAdjust,size:n.height})}function e_(t,e){const{start:n,end:r,borderWidth:s}=t,{position:i,padding:{start:o,end:a},adjust:l}=e,c=r-s-n-o-a-e.size;return n+s/2+l+_f(c,i)}function VD(t,e,n){const r=n.label;r.backgroundColor="transparent",r.callout.display=!1;const s=wf(r.position),i=an(r.padding),o=yc(t.ctx,r),a=qD({properties:e,options:n},o,s,i),l=WD({properties:e,options:n},o,s,i),c=o.width+i.width,u=o.height+i.height;return{x:a,y:l,x2:a+c,y2:l+u,width:c,height:u,centerX:a+c/2,centerY:l+u/2,rotation:r.rotation}}const vd=["enter","leave"],kf=vd.concat("click");function HD(t,e,n){e.listened=Vb(n,kf,e.listeners),e.moveListened=!1,vd.forEach(r=>{yn(n[r])&&(e.moveListened=!0)}),(!e.listened||!e.moveListened)&&e.annotations.forEach(r=>{!e.listened&&yn(r.click)&&(e.listened=!0),e.moveListened||vd.forEach(s=>{yn(r[s])&&(e.listened=!0,e.moveListened=!0)})})}function KD(t,e,n){if(t.listened)switch(e.type){case"mousemove":case"mouseout":return YD(t,e,n);case"click":return GD(t,e,n)}}function YD(t,e,n){if(!t.moveListened)return;let r;e.type==="mousemove"?r=bf(t.visibleElements,e,n.interaction):r=[];const s=t.hovered;t.hovered=r;const i={state:t,event:e};let o=fm(i,"leave",s,r);return fm(i,"enter",r,s)||o}function fm({state:t,event:e},n,r,s){let i;for(const o of r)s.indexOf(o)<0&&(i=t_(o.options[n]||t.listeners[n],o,e)||i);return i}function GD(t,e,n){const r=t.listeners,s=bf(t.visibleElements,e,n.interaction);let i;for(const o of s)i=t_(o.options.click||r.click,o,e)||i;return i}function t_(t,e,n){return gt(t,[e.$context,n])===!0}const zl=["afterDraw","beforeDraw"];function XD(t,e,n){const r=e.visibleElements;e.hooked=Vb(n,zl,e.hooks),e.hooked||r.forEach(s=>{e.hooked||zl.forEach(i=>{yn(s.options[i])&&(e.hooked=!0)})})}function hm(t,e,n){if(t.hooked){const r=e.options[n]||t.hooks[n];return gt(r,[e.$context])}}function QD(t,e,n){const r=nR(t.scales,e,n);let s=pm(e,r,"min","suggestedMin");s=pm(e,r,"max","suggestedMax")||s,s&&yn(e.handleTickRangeOptions)&&e.handleTickRangeOptions()}function JD(t,e){for(const n of t)eR(n,e)}function pm(t,e,n,r){if(Ht(e[n])&&!ZD(t.options,n,r)){const s=t[n]!==e[n];return t[n]=e[n],s}}function ZD(t,e,n){return In(t[e])||In(t[n])}function eR(t,e){for(const n of["scaleID","xScaleID","yScaleID"]){const r=Us(e,t,n);r&&!e[r]&&tR(t,n)&&console.warn(`No scale found with id '${r}' for annotation '${t.id}'`)}}function tR(t,e){if(e==="scaleID")return!0;const n=e.charAt(0);for(const r of["Min","Max","Value"])if(In(t[n+r]))return!0;return!1}function nR(t,e,n){const r=e.axis,s=e.id,i=r+"ScaleID",o={min:Qe(e.min,Number.NEGATIVE_INFINITY),max:Qe(e.max,Number.POSITIVE_INFINITY)};for(const a of n)a.scaleID===s?gm(a,e,["value","endValue"],o):Us(t,a,i)===s&&gm(a,e,[r+"Min",r+"Max",r+"Value"],o);return o}function gm(t,e,n,r){for(const s of n){const i=t[s];if(In(i)){const o=e.parse(i);r.min=Math.min(r.min,o),r.max=Math.max(r.max,o)}}}class ji extends bn{inRange(e,n,r,s){const{x:i,y:o}=Ks({x:e,y:n},this.getCenterPoint(s),Wt(-this.options.rotation));return $b({x:i,y:o},this.getProps(["x","y","x2","y2"],s),r,this.options)}getCenterPoint(e){return Ys(this,e)}draw(e){e.save(),mc(e,this.getCenterPoint(),this.options.rotation),Kb(e,this,this.options),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){return Zb(e,n)}}ji.id="boxAnnotation";ji.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,hitTolerance:0,label:{backgroundColor:"transparent",borderWidth:0,callout:{display:!1},color:"black",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:void 0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};ji.defaultRoutes={borderColor:"color",backgroundColor:"color"};ji.descriptors={label:{_fallback:!0}};class vc extends bn{inRange(e,n,r,s){return Lb({x:e,y:n},{rect:this.getProps(["x","y","x2","y2"],s),center:this.getCenterPoint(s)},r,{rotation:this.rotation,borderWidth:0,hitTolerance:this.options.hitTolerance})}getCenterPoint(e){return Ys(this,e)}draw(e){const n=this.options;!n.display||!n.content||(lR(e,this),e.save(),mc(e,this.getCenterPoint(),this.rotation),Yb(e,this,n,this._fitRatio),e.restore())}resolveElementProperties(e,n){const r=rR(e,n);if(!r)return{};const{controllerMeta:s,point:i,radius:o}=iR(e,n,r);let a=yc(e.ctx,n);const l=oR(a,o);Ub(n,l)&&(a={width:a.width*l,height:a.height*l});const{position:c,xAdjust:u,yAdjust:f}=n,p=zb(i,a,{borderWidth:0,position:c,xAdjust:u,yAdjust:f});return{initProperties:Li(e,p,n),...p,...s,rotation:n.rotation,_fitRatio:l}}}vc.id="doughnutLabelAnnotation";vc.defaults={autoFit:!0,autoHide:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderColor:"transparent",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:0,color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,spacing:1,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0};vc.defaultRoutes={};function rR(t,e){return t.getSortedVisibleDatasetMetas().reduce(function(n,r){const s=r.controller;return s instanceof gS&&sR(t,e,r.data)&&(!n||s.innerRadius<n.controller.innerRadius)&&s.options.circumference>=90?r:n},void 0)}function sR(t,e,n){if(!e.autoHide)return!0;for(let r=0;r<n.length;r++)if(!n[r].hidden&&t.getDataVisibility(r))return!0}function iR({chartArea:t},e,n){const{left:r,top:s,right:i,bottom:o}=t,{innerRadius:a,offsetX:l,offsetY:c}=n.controller,u=(r+i)/2+l,f=(s+o)/2+c,p={left:Math.max(u-a,r),right:Math.min(u+a,i),top:Math.max(f-a,s),bottom:Math.min(f+a,o)},m={x:(p.left+p.right)/2,y:(p.top+p.bottom)/2},v=e.spacing+e.borderWidth/2,_=a-v,k=m.y>f,C=k?s+v:o-v,A=aR(C,u,f,_);return{controllerMeta:{_centerX:u,_centerY:f,_radius:_,_counterclockwise:k,...A},point:m,radius:Math.min(a,Math.min(p.right-p.left,p.bottom-p.top)/2)}}function oR({width:t,height:e},n){const r=Math.sqrt(Math.pow(t,2)+Math.pow(e,2));return n*2/r}function aR(t,e,n,r){const s=Math.pow(n-t,2),i=Math.pow(r,2),o=e*-2,a=Math.pow(e,2)+s-i,l=Math.pow(o,2)-4*a;if(l<=0)return{_startAngle:0,_endAngle:qt};const c=(-o-Math.sqrt(l))/2,u=(-o+Math.sqrt(l))/2;return{_startAngle:od({x:e,y:n},{x:c,y:t}).angle,_endAngle:od({x:e,y:n},{x:u,y:t}).angle}}function lR(t,e){const{_centerX:n,_centerY:r,_radius:s,_startAngle:i,_endAngle:o,_counterclockwise:a,options:l}=e;t.save();const c=Or(t,l);t.fillStyle=l.backgroundColor,t.beginPath(),t.arc(n,r,s,i,o,a),t.closePath(),t.fill(),c&&t.stroke(),t.restore()}class oa extends bn{inRange(e,n,r,s){return Lb({x:e,y:n},{rect:this.getProps(["x","y","x2","y2"],s),center:this.getCenterPoint(s)},r,{rotation:this.rotation,borderWidth:this.options.borderWidth,hitTolerance:this.options.hitTolerance})}getCenterPoint(e){return Ys(this,e)}draw(e){const n=this.options,r=!In(this._visible)||this._visible;!n.display||!n.content||!r||(e.save(),mc(e,this.getCenterPoint(),this.rotation),MD(e,this),Kb(e,this,n),Yb(e,cR(this),n),e.restore())}resolveElementProperties(e,n){let r;if(Wb(n))r=Qb(e,n);else{const{centerX:a,centerY:l}=xf(e,n);r={x:a,y:l}}const s=an(n.padding),i=yc(e.ctx,n),o=zb(r,i,n,s);return{initProperties:Li(e,o,n),pointX:r.x,pointY:r.y,...o,rotation:n.rotation}}}oa.id="labelAnnotation";oa.defaults={adjustScaleRange:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:0,callout:{borderCapStyle:"butt",borderColor:void 0,borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:1,display:!1,margin:5,position:"auto",side:5,start:"50%"},color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};oa.defaultRoutes={borderColor:"color"};function cR({x:t,y:e,width:n,height:r,options:s}){const i=s.borderWidth/2,o=an(s.padding);return{x:t+o.left+i,y:e+o.top+i,width:n-o.left-o.right-s.borderWidth,height:r-o.top-o.bottom-s.borderWidth}}const Cf=(t,e,n)=>({x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}),bd=(t,e,n)=>Cf(e,n,Math.abs((t-e.y)/(n.y-e.y))).x,mm=(t,e,n)=>Cf(e,n,Math.abs((t-e.x)/(n.x-e.x))).y,mo=t=>t*t,uR=(t,e,{x:n,y:r,x2:s,y2:i},o)=>o==="y"?{start:Math.min(r,i),end:Math.max(r,i),value:e}:{start:Math.min(n,s),end:Math.max(n,s),value:t},ym=(t,e,n,r)=>(1-r)*(1-r)*t+2*(1-r)*r*e+r*r*n,_d=(t,e,n,r)=>({x:ym(t.x,e.x,n.x,r),y:ym(t.y,e.y,n.y,r)}),vm=(t,e,n,r)=>2*(1-r)*(e-t)+2*r*(n-e),bm=(t,e,n,r)=>-Math.atan2(vm(t.x,e.x,n.x,r),vm(t.y,e.y,n.y,r))+.5*ut;class aa extends bn{inRange(e,n,r,s){const i=(this.options.borderWidth+this.options.hitTolerance)/2;if(r!=="x"&&r!=="y"){const o={mouseX:e,mouseY:n},{path:a,ctx:l}=this;if(a){Or(l,this.options),l.lineWidth+=this.options.hitTolerance;const{chart:u}=this.$context,f=e*u.currentDevicePixelRatio,p=n*u.currentDevicePixelRatio,m=l.isPointInStroke(a,f,p)||wd(this,o,s);return l.restore(),m}const c=mo(i);return pR(this,o,c,s)||wd(this,o,s)}return dR(this,{mouseX:e,mouseY:n},r,{hitSize:i,useFinalPosition:s})}getCenterPoint(e){return Ys(this,e)}draw(e){const{x:n,y:r,x2:s,y2:i,cp:o,options:a}=this;if(e.save(),!Or(e,a))return e.restore();Bi(e,a);const l=Math.sqrt(Math.pow(s-n,2)+Math.pow(i-r,2));if(a.curve&&o)return xR(e,this,o,l),e.restore();const{startOpts:c,endOpts:u,startAdjust:f,endAdjust:p}=n_(this),m=Math.atan2(i-r,s-n);e.translate(n,r),e.rotate(m),e.beginPath(),e.moveTo(0+f,0),e.lineTo(l-p,0),e.shadowColor=a.borderShadowColor,e.stroke(),xd(e,0,f,c),xd(e,l,-p,u),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){const r=jD(e,n),{x:s,y:i,x2:o,y2:a}=r,l=fR(r,e.chartArea),c=l?hR({x:s,y:i},{x:o,y:a},e.chartArea):{x:s,y:i,x2:o,y2:a,width:Math.abs(o-s),height:Math.abs(a-i)};if(c.centerX=(o+s)/2,c.centerY=(a+i)/2,c.initProperties=Li(e,c,n),n.curve){const f={x:c.x,y:c.y},p={x:c.x2,y:c.y2};c.cp=wR(c,n,Oi(f,p))}const u=gR(e,c,n.label);return u._visible=l,c.elements=[{type:"label",optionScope:"label",properties:u,initProperties:c.initProperties}],c}}aa.id="lineAnnotation";const _m={backgroundColor:void 0,backgroundShadowColor:void 0,borderColor:void 0,borderDash:void 0,borderDashOffset:void 0,borderShadowColor:void 0,borderWidth:void 0,display:void 0,fill:void 0,length:void 0,shadowBlur:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,width:void 0};aa.defaults={adjustScaleRange:!0,arrowHeads:{display:!1,end:Object.assign({},_m),fill:!1,length:12,start:Object.assign({},_m),width:6},borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:2,curve:!1,controlPoint:{y:"-50%"},display:!0,endValue:void 0,init:void 0,hitTolerance:0,label:{backgroundColor:"rgba(0,0,0,0.8)",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderColor:"black",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:6,borderShadowColor:"transparent",borderWidth:0,callout:Object.assign({},oa.defaults.callout),color:"#fff",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},scaleID:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,value:void 0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};aa.descriptors={arrowHeads:{start:{_fallback:!0},end:{_fallback:!0},_fallback:!0}};aa.defaultRoutes={borderColor:"color"};function dR(t,{mouseX:e,mouseY:n},r,{hitSize:s,useFinalPosition:i}){const o=uR(e,n,t.getProps(["x","y","x2","y2"],i),r);return Fb(o,s)||wd(t,{mouseX:e,mouseY:n},i,r)}function fR({x:t,y:e,x2:n,y2:r},{top:s,right:i,bottom:o,left:a}){return!(t<a&&n<a||t>i&&n>i||e<s&&r<s||e>o&&r>o)}function wm({x:t,y:e},n,{top:r,right:s,bottom:i,left:o}){return t<o&&(e=mm(o,{x:t,y:e},n),t=o),t>s&&(e=mm(s,{x:t,y:e},n),t=s),e<r&&(t=bd(r,{x:t,y:e},n),e=r),e>i&&(t=bd(i,{x:t,y:e},n),e=i),{x:t,y:e}}function hR(t,e,n){const{x:r,y:s}=wm(t,e,n),{x:i,y:o}=wm(e,t,n);return{x:r,y:s,x2:i,y2:o,width:Math.abs(i-r),height:Math.abs(o-s)}}function pR(t,{mouseX:e,mouseY:n},r=Fs,s){const{x:i,y:o,x2:a,y2:l}=t.getProps(["x","y","x2","y2"],s),c=a-i,u=l-o,f=mo(c)+mo(u),p=f===0?-1:((e-i)*c+(n-o)*u)/f;let m,v;return p<0?(m=i,v=o):p>1?(m=a,v=l):(m=i+p*c,v=o+p*u),mo(e-m)+mo(n-v)<=r}function wd(t,{mouseX:e,mouseY:n},r,s){const i=t.label;return i.options.display&&i.inRange(e,n,s,r)}function gR(t,e,n){const r=n.borderWidth,s=an(n.padding),i=yc(t.ctx,n),o=i.width+s.width+r,a=i.height+s.height+r;return yR(e,n,{width:o,height:a,padding:s},t.chartArea)}function mR(t){const{x:e,y:n,x2:r,y2:s}=t,i=Math.atan2(s-n,r-e);return i>ut/2?i-ut:i<ut/-2?i+ut:i}function yR(t,e,n,r){const{width:s,height:i,padding:o}=n,{xAdjust:a,yAdjust:l}=e,c={x:t.x,y:t.y},u={x:t.x2,y:t.y2},f=e.rotation==="auto"?mR(t):Wt(e.rotation),p=vR(s,i,f),m=bR(t,e,{labelSize:p,padding:o},r),v=t.cp?_d(c,t.cp,u,m):Cf(c,u,m),_={size:p.w,min:r.left,max:r.right,padding:o.left},k={size:p.h,min:r.top,max:r.bottom,padding:o.top},C=km(v.x,_)+a,A=km(v.y,k)+l;return{x:C-s/2,y:A-i/2,x2:C+s/2,y2:A+i/2,centerX:C,centerY:A,pointX:v.x,pointY:v.y,width:s,height:i,rotation:gv(f)}}function vR(t,e,n){const r=Math.cos(n),s=Math.sin(n);return{w:Math.abs(t*r)+Math.abs(e*s),h:Math.abs(t*s)+Math.abs(e*r)}}function bR(t,e,n,r){let s;const i=_R(t,r);return e.position==="start"?s=xm({w:t.x2-t.x,h:t.y2-t.y},n,e,i):e.position==="end"?s=1-xm({w:t.x-t.x2,h:t.y-t.y2},n,e,i):s=_f(1,e.position),s}function xm(t,e,n,r){const{labelSize:s,padding:i}=e,o=t.w*r.dx,a=t.h*r.dy,l=o>0&&(s.w/2+i.left-r.x)/o,c=a>0&&(s.h/2+i.top-r.y)/a;return pc(Math.max(l,c),0,.25)}function _R(t,e){const{x:n,x2:r,y:s,y2:i}=t,o=Math.min(s,i)-e.top,a=Math.min(n,r)-e.left,l=e.bottom-Math.max(s,i),c=e.right-Math.max(n,r);return{x:Math.min(a,c),y:Math.min(o,l),dx:a<=c?1:-1,dy:o<=l?1:-1}}function km(t,e){const{size:n,min:r,max:s,padding:i}=e,o=n/2;return n>s-r?(s+r)/2:(r>=t-i-o&&(t=r+i+o),s<=t+i+o&&(t=s-i-o),t)}function n_(t){const e=t.options,n=e.arrowHeads&&e.arrowHeads.start,r=e.arrowHeads&&e.arrowHeads.end;return{startOpts:n,endOpts:r,startAdjust:Cm(t,n),endAdjust:Cm(t,r)}}function Cm(t,e){if(!e||!e.display)return 0;const{length:n,width:r}=e,s=t.options.borderWidth/2,i={x:n,y:r+s};return Math.abs(bd(0,i,{x:0,y:s}))}function xd(t,e,n,r){if(!r||!r.display)return;const{length:s,width:i,fill:o,backgroundColor:a,borderColor:l}=r,c=Math.abs(e-s)+n;t.beginPath(),Bi(t,r),Or(t,r),t.moveTo(c,-i),t.lineTo(e+n,0),t.lineTo(c,i),o===!0?(t.fillStyle=a||l,t.closePath(),t.fill(),t.shadowColor="transparent"):t.shadowColor=r.borderShadowColor,t.stroke()}function wR(t,e,n){const{x:r,y:s,x2:i,y2:o,centerX:a,centerY:l}=t,c=Math.atan2(o-s,i-r),u=wf(e.controlPoint,0),f={x:a+is(n,u.x,!1),y:l+is(n,u.y,!1)};return Ks(f,{x:a,y:l},c)}function Sm(t,{x:e,y:n},{angle:r,adjust:s},i){!i||!i.display||(t.save(),t.translate(e,n),t.rotate(r),xd(t,0,-s,i),t.restore())}function xR(t,e,n,r){const{x:s,y:i,x2:o,y2:a,options:l}=e,{startOpts:c,endOpts:u,startAdjust:f,endAdjust:p}=n_(e),m={x:s,y:i},v={x:o,y:a},_=bm(m,n,v,0),k=bm(m,n,v,1)-ut,C=_d(m,n,v,f/r),A=_d(m,n,v,1-p/r),P=new Path2D;t.beginPath(),P.moveTo(C.x,C.y),P.quadraticCurveTo(n.x,n.y,A.x,A.y),t.shadowColor=l.borderShadowColor,t.stroke(P),e.path=P,e.ctx=t,Sm(t,C,{angle:_,adjust:f},c),Sm(t,A,{angle:k,adjust:p},u)}class la extends bn{inRange(e,n,r,s){const i=this.options.rotation,o=(this.options.borderWidth+this.options.hitTolerance)/2;if(r!=="x"&&r!=="y")return kR({x:e,y:n},this.getProps(["width","height","centerX","centerY"],s),i,o);const{x:a,y:l,x2:c,y2:u}=this.getProps(["x","y","x2","y2"],s),f=r==="y"?{start:l,end:u}:{start:a,end:c},p=Ks({x:e,y:n},this.getCenterPoint(s),Wt(-i));return p[r]>=f.start-o-Fs&&p[r]<=f.end+o+Fs}getCenterPoint(e){return Ys(this,e)}draw(e){const{width:n,height:r,centerX:s,centerY:i,options:o}=this;e.save(),mc(e,this.getCenterPoint(),o.rotation),Bi(e,this.options),e.beginPath(),e.fillStyle=o.backgroundColor;const a=Or(e,o);e.ellipse(s,i,r/2,n/2,ut/2,0,2*ut),e.fill(),a&&(e.shadowColor=o.borderShadowColor,e.stroke()),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){return Zb(e,n)}}la.id="ellipseAnnotation";la.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,label:Object.assign({},ji.defaults.label),rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};la.defaultRoutes={borderColor:"color",backgroundColor:"color"};la.descriptors={label:{_fallback:!0}};function kR(t,e,n,r){const{width:s,height:i,centerX:o,centerY:a}=e,l=s/2,c=i/2;if(l<=0||c<=0)return!1;const u=Wt(n||0),f=Math.cos(u),p=Math.sin(u),m=Math.pow(f*(t.x-o)+p*(t.y-a),2),v=Math.pow(p*(t.x-o)-f*(t.y-a),2);return m/Math.pow(l+r,2)+v/Math.pow(c+r,2)<=1.0001}class bc extends bn{inRange(e,n,r,s){const{x:i,y:o,x2:a,y2:l,width:c}=this.getProps(["x","y","x2","y2","width"],s),u=(this.options.borderWidth+this.options.hitTolerance)/2;return r!=="x"&&r!=="y"?yD({x:e,y:n},this.getCenterPoint(s),c/2,u):Fb(r==="y"?{start:o,end:l,value:n}:{start:i,end:a,value:e},u)}getCenterPoint(e){return Ys(this,e)}draw(e){const n=this.options,r=n.borderWidth;if(n.radius<.1)return;e.save(),e.fillStyle=n.backgroundColor,Bi(e,n);const s=Or(e,n);SD(e,this,this.centerX,this.centerY),s&&!gc(n.pointStyle)&&(e.shadowColor=n.borderShadowColor,e.stroke()),e.restore(),n.borderWidth=r}resolveElementProperties(e,n){const r=Jb(e,n);return r.initProperties=Li(e,r,n),r}}bc.id="pointAnnotation";bc.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,pointStyle:"circle",radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};bc.defaultRoutes={borderColor:"color",backgroundColor:"color"};class _c extends bn{inRange(e,n,r,s){if(r!=="x"&&r!=="y")return this.options.radius>=.1&&this.elements.length>1&&SR(this.elements,e,n,s);const i=Ks({x:e,y:n},this.getCenterPoint(s),Wt(-this.options.rotation)),o=this.elements.map(c=>r==="y"?c.bY:c.bX),a=Math.min(...o),l=Math.max(...o);return i[r]>=a&&i[r]<=l}getCenterPoint(e){return Ys(this,e)}draw(e){const{elements:n,options:r}=this;e.save(),e.beginPath(),e.fillStyle=r.backgroundColor,Bi(e,r);const s=Or(e,r);let i=!0;for(const o of n)i?(e.moveTo(o.x,o.y),i=!1):e.lineTo(o.x,o.y);e.closePath(),e.fill(),s&&(e.shadowColor=r.borderShadowColor,e.stroke()),e.restore()}resolveElementProperties(e,n){const r=Jb(e,n),{sides:s,rotation:i}=n,o=[],a=2*ut/s;let l=i*Zd;for(let c=0;c<s;c++,l+=a){const u=CR(r,n,l);u.initProperties=Li(e,r,n),o.push(u)}return r.elements=o,r}}_c.id="polygonAnnotation";_c.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,point:{radius:0},radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,sides:3,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};_c.defaultRoutes={borderColor:"color",backgroundColor:"color"};function CR({centerX:t,centerY:e},{radius:n,borderWidth:r,hitTolerance:s},i){const o=(r+s)/2,a=Math.sin(i),l=Math.cos(i),c={x:t+a*n,y:e-l*n};return{type:"point",optionScope:"point",properties:{x:c.x,y:c.y,centerX:c.x,centerY:c.y,bX:t+a*(n+o),bY:e-l*(n+o)}}}function SR(t,e,n,r){let s=!1,i=t[t.length-1].getProps(["bX","bY"],r);for(const o of t){const a=o.getProps(["bX","bY"],r);a.bY>n!=i.bY>n&&e<(i.bX-a.bX)*(n-a.bY)/(i.bY-a.bY)+a.bX&&(s=!s),i=a}return s}const ns={box:ji,doughnutLabel:vc,ellipse:la,label:oa,line:aa,point:bc,polygon:_c};Object.keys(ns).forEach(t=>{Ot.describe(`elements.${ns[t].id}`,{_fallback:"plugins.annotation.common"})});const PR={update:Object.assign},AR=kf.concat(zl),Pm=(t,e)=>Je(e)?Cd(t,e):t,kd=t=>t==="color"||t==="font";function Sf(t="line"){return ns[t]?t:(console.warn(`Unknown annotation type: '${t}', defaulting to 'line'`),"line")}function ER(t,e,n,r){const s=OR(t,n.animations,r),i=e.annotations,o=DR(e.elements,i);for(let a=0;a<i.length;a++){const l=i[a],c=r_(o,a,l.type),u=l.setContext(TR(t,c,o,l)),f=c.resolveElementProperties(t,u);f.skip=IR(f),"elements"in f&&(MR(c,f.elements,u,s),delete f.elements),In(c.x)||Object.assign(c,f),Object.assign(c,f.initProperties),f.options=s_(u),s.update(c,f)}}function IR(t){return isNaN(t.x)||isNaN(t.y)}function OR(t,e,n){return n==="reset"||n==="none"||n==="resize"?PR:new uf(t,e)}function MR(t,e,n,r){const s=t.elements||(t.elements=[]);s.length=e.length;for(let i=0;i<e.length;i++){const o=e[i],a=o.properties,l=r_(s,i,o.type,o.initProperties),c=n[o.optionScope].override(o);a.options=s_(c),r.update(l,a)}}function r_(t,e,n,r){const s=ns[Sf(n)];let i=t[e];return(!i||!(i instanceof s))&&(i=t[e]=new s,Object.assign(i,r)),i}function s_(t){const e=ns[Sf(t.type)],n={};n.id=t.id,n.type=t.type,n.drawTime=t.drawTime,Object.assign(n,Cd(t,e.defaults),Cd(t,e.defaultRoutes));for(const r of AR)n[r]=t[r];return n}function Cd(t,e){const n={};for(const r of Object.keys(e)){const s=e[r],i=t[r];kd(r)&&Ct(i)?n[r]=i.map(o=>Pm(o,s)):n[r]=Pm(i,s)}return n}function TR(t,e,n,r){return e.$context||(e.$context=Object.assign(Object.create(t.getContext()),{element:e,get elements(){return n.filter(s=>s&&s.options)},id:r.id,type:"annotation"}))}function DR(t,e){const n=e.length,r=t.length;if(r<n){const s=n-r;t.splice(r,0,...new Array(s))}else r>n&&t.splice(n,r-n);return t}var RR="3.1.0";const Vr=new Map,Am=t=>t.type!=="doughnutLabel",FR=kf.concat(zl);var $R={id:"annotation",version:RR,beforeRegister(){vD("chart.js","4.0",es.version)},afterRegister(){es.register(ns)},afterUnregister(){es.unregister(ns)},beforeInit(t){Vr.set(t,{annotations:[],elements:[],visibleElements:[],listeners:{},listened:!1,moveListened:!1,hooks:{},hooked:!1,hovered:[]})},beforeUpdate(t,e,n){const r=Vr.get(t),s=r.annotations=[];let i=n.annotations;Je(i)?Object.keys(i).forEach(o=>{const a=i[o];Je(a)&&(a.id=o,s.push(a))}):Ct(i)&&s.push(...i),JD(s.filter(Am),t.scales)},afterDataLimits(t,e){const n=Vr.get(t);QD(t,e.scale,n.annotations.filter(Am).filter(r=>r.display&&r.adjustScaleRange))},afterUpdate(t,e,n){const r=Vr.get(t);HD(t,r,n),ER(t,r,n,e.mode),r.visibleElements=r.elements.filter(s=>!s.skip&&s.options.display),XD(t,r,n)},beforeDatasetsDraw(t,e,n){uo(t,"beforeDatasetsDraw",n.clip)},afterDatasetsDraw(t,e,n){uo(t,"afterDatasetsDraw",n.clip)},beforeDatasetDraw(t,e,n){uo(t,e.index,n.clip)},beforeDraw(t,e,n){uo(t,"beforeDraw",n.clip)},afterDraw(t,e,n){uo(t,"afterDraw",n.clip)},beforeEvent(t,e,n){const r=Vr.get(t);KD(r,e.event,n)&&(e.changed=!0)},afterDestroy(t){Vr.delete(t)},getAnnotations(t){const e=Vr.get(t);return e?e.elements:[]},_getAnnotationElementsAtEventForMode(t,e,n){return bf(t,e,n)},defaults:{animations:{numbers:{properties:["x","y","x2","y2","width","height","centerX","centerY","pointX","pointY","radius"],type:"number"},colors:{properties:["backgroundColor","borderColor"],type:"color"}},clip:!0,interaction:{mode:void 0,axis:void 0,intersect:void 0},common:{drawTime:"afterDatasetsDraw",init:!1,label:{}}},descriptors:{_indexable:!1,_scriptable:t=>!FR.includes(t)&&t!=="init",annotations:{_allKeys:!1,_fallback:(t,e)=>`elements.${ns[Sf(e.type)].id}`},interaction:{_fallback:!0},common:{label:{_indexable:kd,_fallback:!0},_indexable:kd}},additionalOptionScopes:[""]};function uo(t,e,n){const{ctx:r,chartArea:s}=t,i=Vr.get(t);n&&ea(r,s);const o=LR(i.visibleElements,e).sort((a,l)=>a.element.options.z-l.element.options.z);for(const a of o)BR(r,s,i,a);n&&ta(r)}function LR(t,e){const n=[];for(const r of t)if(r.options.drawTime===e&&n.push({element:r,main:!0}),r.elements&&r.elements.length)for(const s of r.elements)s.options.display&&s.options.drawTime===e&&n.push({element:s});return n}function BR(t,e,n,r){const s=r.element;r.main?(hm(n,s,"beforeDraw"),s.draw(t,e),hm(n,s,"afterDraw")):s.draw(t,e)}const jR={style:{height:"200px"}},NR=et({__name:"PriceHistoryChart",props:{pricePoints:{},transactions:{}},setup(t){es.register(eb,tb,Vv,na,Qv,Zv,Gv,$R);const e=t,n={"mtgjson.cardmarket":3,"cardmarket.priceguide":2,scryfall:1},r=He(()=>{const o=m=>{try{return new Date(m).toISOString().slice(0,10)}catch{return}},a={nonfoil:{},foil:{}};for(const m of e.pricePoints??[]){const v=m.finish||"nonfoil";if(v==="etched")continue;const _=m.date??(m.asOf?o(m.asOf):void 0);if(!_)continue;const k=n[m.provider??""]??0,C=m.asOf?new Date(m.asOf).getTime():0,A=(m.priceCent??0)/100,P=a[v],S=P[_];(!S||k>S.rank||k===S.rank&&C>S.asOfTs)&&(P[_]={value:A,rank:k,asOfTs:C})}const l=new Set([...Object.keys(a.nonfoil),...Object.keys(a.foil)]),c=Array.from(l).sort((m,v)=>m.localeCompare(v)),u=c.map(m=>a.nonfoil[m]?.value??null),f=c.map(m=>a.foil[m]?.value??null);return{labels:c.map(m=>new Date(m).toLocaleDateString()),nonfoil:u,foil:f}}),s=He(()=>({labels:r.value.labels,datasets:[{label:"Regular",backgroundColor:"rgba(13,110,253,0.15)",borderColor:"#0d6efd",pointRadius:0,data:r.value.nonfoil,fill:!1,tension:.2},{label:"Foil",backgroundColor:"rgba(32,201,151,0.15)",borderColor:"#20c997",pointRadius:0,data:r.value.foil,fill:!1,tension:.2}]})),i=He(()=>{const o=(e.transactions??[]).map(a=>({type:"line",yMin:new Be(a.unitPrice,a.currency).getDecimal(),yMax:new Be(a.unitPrice,a.currency).getDecimal(),borderColor:/buy/i.test(a.kind)?"green":"red",borderWidth:2,borderDash:[5,5],label:{content:`${a.kind} @ ${new Be(a.unitPrice,a.currency).format("de-DE")}`,enabled:!1}}));return{responsive:!0,maintainAspectRatio:!1,animation:{duration:0},scales:{y:{ticks:{callback(a){return typeof a=="number"?new Be(a*100,"EUR").format("de-DE"):a}}},x:{ticks:{maxRotation:0,autoSkip:!0}}},plugins:{legend:{display:!0},tooltip:{callbacks:{label(a){const l=a.parsed.y;return`${a.dataset.label}: ${new Be(Math.round((l??0)*100),"EUR").format("de-DE")}`}}},annotation:{annotations:o}},elements:{line:{spanGaps:!0}}}});return(o,a)=>(q(),J("div",null,[w("div",jR,[qe(Re(ib),{data:s.value,options:i.value},null,8,["data","options"])])]))}}),zR={class:"card-image-container position-relative overflow-hidden rounded",style:{"padding-bottom":"140%"}},UR={key:1,class:"placeholder-image card-img-top position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center"},qR={class:"card-body"},WR={class:"card-title fs-6 fw-medium mb-1"},VR={class:"card-text small text-muted mb-2"},HR={class:"ms-auto"},KR={key:0,class:"badge rounded-pill bg-primary-subtle text-primary-emphasis"},YR={key:1,class:"badge rounded-pill bg-success-subtle text-success-emphasis"},GR={key:2,class:"small text-muted fst-italic"},XR={key:3,class:"small text-muted fst-italic"},QR={class:"modal-dialog modal-dialog-centered modal-lg"},JR={class:"modal-content"},ZR={class:"modal-header py-2"},eF={class:"modal-body py-3"},tF={class:"row g-3 align-items-start"},nF={class:"col-lg-5"},rF={class:"card-inner",style:{"padding-bottom":"140%"}},sF={class:"card-front"},iF={key:1,class:"placeholder-image w-100 h-100 rounded-4 position-relative"},oF={class:"card-back"},aF=["src"],lF={class:"row row-cols-2 g-2 small mt-3 mb-0 meta-grid"},cF={class:"col text-end fw-semibold"},uF={class:"col text-end fw-semibold"},dF={class:"col text-end fw-semibold"},fF={class:"col text-end fw-semibold"},hF={class:"col-lg-7"},pF={class:"d-flex justify-content-between align-items-center mb-3"},gF={class:"ms-auto d-flex gap-2 align-items-center"},mF={key:0,class:"badge rounded-pill bg-primary-subtle text-primary-emphasis"},yF={key:1,class:"badge rounded-pill bg-success-subtle text-success-emphasis"},vF={key:2,class:"small text-muted fst-italic"},bF={key:3,class:"small text-muted fst-italic"},_F={key:0,class:"mb-3"},wF={key:1,class:"mb-3"},xF={class:"d-flex gap-3 small"},kF={class:"mt-2 border rounded-3 p-2 small",style:{"max-height":"30vh",overflow:"auto"}},CF={class:"row g-2 align-items-center"},SF={class:"col-6 col-md-3"},PF={class:"fw-medium"},AF={class:"col-6 col-md-3"},EF={class:"fw-medium"},IF={class:"col-6 col-md-3"},OF={class:"fw-medium"},MF={key:0,class:"col-6 col-md-3"},TF={class:"fw-medium"},DF={key:2},RF={class:"mt-2 small",style:{"max-height":"30vh",overflow:"auto"}},FF={class:"flex-grow-1"},$F={class:"fw-medium"},LF={class:"text-muted"},BF={class:"fw-semibold"},jF=et({inheritAttrs:!0,__name:"CardComponent",props:{card:{},disableModal:{type:Boolean}},setup(t){const e=Yd(),n=He(()=>e.getLatestNonfoil(s.card.id)),r=He(()=>e.getLatestFoil(s.card.id)),s=t,i=ge(!1),o=ge(!1),a=ge([]),l=ge([]),c=ge([]),u=ge(!1),f=ge(!1),p=He(()=>l.value?[...l.value].sort((P,S)=>new Date(S.happenedAt).getTime()-new Date(P.happenedAt).getTime()):[]),m=He(()=>!a.value||a.value.length===0?0:a.value.reduce((P,S)=>{if(!S.disposedAt||S.disposedQuantity&&S.disposedQuantity<S.quantity){const M=S.disposedQuantity?S.quantity-S.disposedQuantity:S.quantity;return P+M}return P},0)),v=async()=>{i.value=!0,await A(),c.value=await e.getPriceHistory(s.card.id)},_=()=>{i.value=!1},k=P=>new Date(P).toLocaleDateString(),C=(P,S)=>new Be(P,S).format("de-DE"),A=async()=>{try{a.value=await we.card_lots.where("cardId").equals(s.card.id).toArray(),l.value=await we.transactions.where("cardId").equals(s.card.id).toArray()}catch(P){console.error("Error loading card details:",P)}finally{o.value=!1}};return(P,S)=>(q(),J(Ze,null,[w("div",{class:"card h-100 card-item",onClick:S[0]||(S[0]=M=>!s.disableModal&&v())},[w("div",zR,[P.card.imageUrl?(q(),J("div",{key:0,class:"card-img-top position-absolute top-0 start-0 w-100 h-100",style:Un({backgroundImage:`url(${P.card.imageUrl})`,backgroundSize:"cover",backgroundPosition:"center"})},null,4)):(q(),J("div",UR,[...S[4]||(S[4]=[w("span",{class:"text-muted"},"Missing Image",-1)])]))]),w("div",qR,[w("h3",WR,oe(P.card.name),1),w("p",VR,oe(P.card.set)+" #"+oe(P.card.number),1),w("div",HR,[n.value?(q(),J("span",KR," Regular: "+oe(n.value.format("de-DE")),1)):ke("",!0),r.value?(q(),J("span",YR," Foil: "+oe(r.value.format("de-DE")),1)):ke("",!0),!n.value&&!r.value&&o.value?(q(),J("span",GR," Loading… ")):!n.value&&!r.value?(q(),J("span",XR," Price unavailable ")):ke("",!0)])])]),qe(Re(OT),{open:i.value,"onUpdate:open":S[3]||(S[3]=M=>i.value=M)},{default:lt(()=>[qe(Re(cD),null,{default:lt(()=>[qe(Re(iD),{class:"modal-backdrop fade show",onClick:_}),qe(Re(tD),{class:"modal d-block compact-modal",onPointerDownOutside:_,onEscapeKeyDown:_},{default:lt(()=>[w("div",QR,[w("div",JR,[w("div",ZR,[qe(Re(dD),{class:"modal-title h5 mb-0"},{default:lt(()=>[ht(oe(P.card.name),1)]),_:1}),qe(Re(TT),{"as-child":""},{default:lt(()=>[...S[5]||(S[5]=[w("button",{type:"button",class:"btn-close","aria-label":"Close"},null,-1)])]),_:1})]),w("div",eF,[w("div",tF,[w("div",nF,[w("div",{class:vt(["card-flipper position-relative",{"is-flipped":u.value}])},[w("div",rF,[w("div",sF,[P.card.imageUrl?(q(),J("div",{key:0,class:"w-100 h-100 rounded-4",style:Un({backgroundImage:`url(${P.card.imageUrl})`,backgroundSize:"cover",backgroundPosition:"center"})},null,4)):(q(),J("div",iF,[...S[6]||(S[6]=[w("div",{class:"position-absolute top-50 start-50 translate-middle"},[w("span",{class:"text-muted"},"Missing Image")],-1)])]))]),w("div",oF,[P.card.imageUrlBack?(q(),J("div",{key:0,class:"w-100 h-100 rounded-4",style:Un({backgroundImage:`url(${P.card.imageUrlBack})`,backgroundSize:"cover",backgroundPosition:"center"})},null,4)):ke("",!0)])]),P.card.layout==="transform"||P.card.layout==="modal_dfc"||P.card.layout==="reversible_card"||P.card.imageUrl&&P.card.imageUrlBack?(q(),J("button",{key:0,onClick:S[1]||(S[1]=M=>u.value=!u.value),class:"btn btn-sm btn-dark flip-button"}," Flip ")):ke("",!0)],2),w("img",{src:P.card.imageUrlBack,style:{display:"none"}},null,8,aF),w("dl",lF,[S[7]||(S[7]=w("dt",{class:"col text-muted"},"Set",-1)),w("dd",cF,oe(P.card.set)+" ("+oe(P.card.setCode)+")",1),S[8]||(S[8]=w("dt",{class:"col text-muted"},"Number",-1)),w("dd",uF,"#"+oe(P.card.number),1),S[9]||(S[9]=w("dt",{class:"col text-muted"},"Language",-1)),w("dd",dF,oe(P.card.lang),1),S[10]||(S[10]=w("dt",{class:"col text-muted"},"Finish",-1)),w("dd",fF,oe(P.card.finish),1)])]),w("div",hF,[w("div",pF,[S[11]||(S[11]=w("h3",{class:"h6 mb-0"},"Current Price",-1)),w("div",gF,[n.value?(q(),J("span",mF," Regular: "+oe(n.value.format("de-DE")),1)):ke("",!0),r.value?(q(),J("span",yF," Foil: "+oe(r.value.format("de-DE")),1)):ke("",!0),!n.value&&!r.value&&o.value?(q(),J("span",vF," Loading… ")):!n.value&&!r.value?(q(),J("span",bF," Price unavailable ")):ke("",!0)])]),c.value&&c.value.length>0?(q(),J("div",_F,[S[12]||(S[12]=w("h3",{class:"h6 mb-2"},"Price History",-1)),qe(NR,{"price-points":c.value,transactions:l.value},null,8,["price-points","transactions"])])):ke("",!0),a.value&&a.value.length?(q(),J("div",wF,[S[22]||(S[22]=w("h3",{class:"h6 mb-2"},"Your Collection",-1)),w("div",xF,[w("div",null,[S[13]||(S[13]=w("span",{class:"text-muted"},"Lots:",-1)),S[14]||(S[14]=ht()),w("strong",null,oe(a.value.length),1)]),w("div",null,[S[15]||(S[15]=w("span",{class:"text-muted"},"Cards:",-1)),S[16]||(S[16]=ht()),w("strong",null,oe(m.value),1)])]),a.value.length>2?(q(),J("button",{key:0,class:"btn btn-link btn-sm p-0 mt-1",onClick:S[2]||(S[2]=M=>f.value=!f.value)},oe(f.value?"Hide details":"Show details"),1)):ke("",!0),Ls(w("div",kF,[(q(!0),J(Ze,null,$t(a.value,M=>(q(),J("div",{key:M.id,class:"border rounded p-2 mb-2"},[w("div",CF,[w("div",SF,[S[17]||(S[17]=w("span",{class:"text-muted"},"Qty:",-1)),S[18]||(S[18]=ht()),w("span",PF,oe(M.quantity),1)]),w("div",AF,[S[19]||(S[19]=w("span",{class:"text-muted"},"Unit Cost:",-1)),w("span",EF,oe(C(M.unitCost,M.currency||"EUR")),1)]),w("div",IF,[S[20]||(S[20]=w("span",{class:"text-muted"},"Purchased:",-1)),w("span",OF,oe(k(M.purchasedAt)),1)]),M.disposedQuantity?(q(),J("div",MF,[S[21]||(S[21]=w("span",{class:"text-muted"},"Disposed:",-1)),w("span",TF,oe(M.disposedQuantity),1)])):ke("",!0)])]))),128))],512),[[$w,f.value]])])):ke("",!0),l.value&&l.value.length?(q(),J("div",DF,[S[23]||(S[23]=w("h3",{class:"h6 mb-2"},"Transaction History",-1)),w("div",RF,[(q(!0),J(Ze,null,$t(p.value,M=>(q(),J("div",{key:M.id,class:vt(["tx-item d-flex align-items-center gap-2 p-2 mb-2 rounded border",{buy:/buy/i.test(M.kind),sell:/sell/i.test(M.kind)}])},[w("span",{class:vt(["badge me-1",/buy/i.test(M.kind)?"bg-success-subtle text-success-emphasis":"bg-danger-subtle text-danger-emphasis"])},oe(M.kind),3),w("div",FF,[w("div",$F,oe(k(M.happenedAt)),1),w("div",LF,"Qty: "+oe(M.quantity),1)]),w("div",BF,oe(C(M.unitPrice,M.currency)),1)],2))),128))])])):ke("",!0)])])])])])]),_:1})]),_:1})]),_:1},8,["open"])],64))}}),i_=hn(jF,[["__scopeId","data-v-9a97e101"]]),NF={class:"container py-4"},zF={key:0,class:"text-center py-5"},UF={key:1,class:"text-center py-5"},qF={key:2},WF={class:"d-flex align-items-center justify-content-between mb-3"},VF={class:"d-flex gap-2"},HF={class:"card shadow-sm mb-4"},KF={class:"card-body"},YF={class:"d-flex align-items-start justify-content-between"},GF={class:"w-100"},XF={key:1,class:"d-flex align-items-center flex-nowrap gap-2"},QF={class:"input-group input-group-lg w-auto",style:{"max-width":"480px"}},JF={class:"d-flex flex-wrap align-items-center gap-2 mt-2"},ZF={key:0,class:"badge text-uppercase bg-info text-dark"},e$={class:"text-muted"},t$={key:1,class:"text-success d-inline-flex align-items-center"},n$={key:0,class:"alert alert-warning mt-3 py-2 mb-0"},r$={key:0,class:"text-center py-5 text-muted"},s$={key:1,class:"row row-cols-2 row-cols-md-3 row-cols-lg-4 row-cols-xl-5 row-cols-xxl-6 g-3"},i$=["onClick"],o$={key:0,class:"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-success",title:"Face card"},a$={class:"modal-dialog"},l$={class:"modal-content"},c$={class:"modal-body"},u$={class:"mb-0"},d$={class:"modal-footer"},f$=["disabled"],h$=["disabled"],p$={key:0,class:"spinner-border spinner-border-sm me-1",role:"status","aria-hidden":"true"},g$={key:4,class:"modal-backdrop fade show"},m$="https://placehold.co/200x280?text=Card+Image",y$=et({__name:"DeckDetailView",setup(t){const e=Kd(),n=nv(),r=ge(null),s=ge([]),i=ge({}),o=ge(!0),a=ge(!1),l=ge(""),c=ge(null),u=ge(!1),f=ge(!1),p=ge(!1),m=He(()=>r.value?.faceCardId?_(r.value.faceCardId):null),v=K=>K?new Date(K).toLocaleDateString():"—",_=K=>i.value[K]||{id:K,name:"Unknown Card",set:"Unknown Set",setCode:"???",number:"???",lang:"en",finish:"nonfoil",imageUrl:m$},k=()=>{r.value&&(a.value=!0,l.value=r.value.name,En(()=>{c.value?.focus(),c.value?.select()}))},C=async()=>{if(!r.value){a.value=!1;return}const K=l.value.trim();if(!K||K===r.value.name){a.value=!1;return}try{await we.decks.update(r.value.id,{name:K}),r.value.name=K}catch(j){console.error("Error updating deck title:",j),alert("Failed to update deck title. Please try again.")}finally{a.value=!1}},A=()=>{a.value=!1,l.value=r.value?.name??""},P=()=>{u.value=!u.value},S=async K=>{await M(K),u.value=!1},M=async K=>{if(r.value)try{await we.decks.update(r.value.id,{faceCardId:K}),r.value.faceCardId=K}catch(j){console.error("Error updating face card:",j),alert("Failed to update face card. Please try again.")}},T=async()=>{if(r.value)try{await we.decks.update(r.value.id,{faceCardId:void 0}),r.value.faceCardId=void 0}catch(K){console.error("Error clearing face card:",K),alert("Failed to clear face card. Please try again.")}},X=()=>{f.value=!0},V=()=>{p.value||(f.value=!1)},E=async()=>{if(!(!r.value||p.value)){p.value=!0;try{await we.deck_cards.where("deckId").equals(r.value.id).delete(),await we.decks.delete(r.value.id),V(),n.push("/decks")}catch(K){console.error("Error deleting deck:",K),alert("Failed to delete deck. Please try again.")}finally{p.value=!1}}};return Nn(async()=>{try{const K=e.params.id,j=await we.decks.get(K);if(!j)return;r.value=j,l.value=j.name;const de=await we.deck_cards.where("deckId").equals(K).toArray();s.value=de;const pe=de.map(Ae=>Ae.cardId).filter(Boolean);if(pe.length){const Ae=await we.cards.where("id").anyOf(pe).toArray();i.value=Object.fromEntries(Ae.map(Ce=>[Ce.id,Ce]))}}catch(K){console.error("Error loading deck:",K)}finally{o.value=!1}}),(K,j)=>{const de=Zl("router-link");return q(),J("div",NF,[o.value?(q(),J("div",zF,[...j[1]||(j[1]=[w("div",{class:"spinner-border",role:"status","aria-hidden":"true"},null,-1),w("div",{class:"mt-2"},"Loading deck…",-1)])])):r.value?(q(),J("div",qF,[w("div",WF,[qe(de,{to:"/decks",class:"btn btn-link px-0"},{default:lt(()=>[...j[4]||(j[4]=[ht(" ← Back to Decks ",-1)])]),_:1}),w("div",VF,[w("button",{onClick:P,class:vt(["btn",u.value?"btn-warning":"btn-primary"])},oe(u.value?"Cancel Select Mode":"Select Face Card"),3),r.value.faceCardId?(q(),J("button",{key:0,onClick:T,class:"btn btn-outline-secondary"}," Remove Face Card ")):ke("",!0),w("button",{onClick:X,class:"btn btn-outline-danger"}," Delete Deck ")])]),w("div",HF,[w("div",KF,[w("div",YF,[w("div",GF,[a.value?(q(),J("div",XF,[w("div",QF,[Ls(w("input",{ref_key:"titleInput",ref:c,"onUpdate:modelValue":j[0]||(j[0]=pe=>l.value=pe),onKeyup:[qh(C,["enter"]),qh(A,["esc"])],type:"text",class:"form-control",placeholder:"Deck title"},null,544),[[El,l.value]]),w("button",{onClick:C,class:"btn btn-primary"},"Save"),w("button",{onClick:A,class:"btn btn-outline-secondary"},"Cancel")])])):(q(),J("h1",{key:0,onClick:k,class:"h3 mb-2 editable",title:"Click to edit title"},[ht(oe(r.value.name)+" ",1),j[5]||(j[5]=w("span",{class:"ms-2 small text-muted"},"✏️",-1))])),w("div",JF,[r.value.platform?(q(),J("span",ZF,oe(r.value.platform),1)):ke("",!0),w("small",e$,"Imported: "+oe(v(r.value.importedAt)),1),m.value?(q(),J("small",t$,[...j[6]||(j[6]=[w("span",{class:"me-1"},"★",-1),ht(" Face card set ",-1)])])):ke("",!0)])])]),u.value?(q(),J("div",n$," Select mode is active — click a card below to set it as the face card. ")):ke("",!0)])]),w("div",null,[j[8]||(j[8]=w("h2",{class:"h5 mb-3"},"Cards in Deck",-1)),s.value.length===0?(q(),J("div",r$," No cards found in this deck. ")):(q(),J("div",s$,[(q(!0),J(Ze,null,$t(s.value,pe=>(q(),J("div",{key:pe.id,class:"col"},[w("div",{class:vt(["position-relative h-100",{"border border-success rounded":pe.cardId===r.value.faceCardId,"cursor-pointer":u.value}]),role:"button",onClick:Ae=>u.value?S(pe.cardId):null},[qe(i_,{card:_(pe.cardId),"disable-modal":u.value},null,8,["card","disable-modal"]),pe.cardId===r.value.faceCardId?(q(),J("span",o$,[...j[7]||(j[7]=[ht(" ★ ",-1),w("span",{class:"visually-hidden"},"Face card",-1)])])):ke("",!0)],10,i$)]))),128))]))])])):(q(),J("div",UF,[j[3]||(j[3]=w("p",{class:"mb-3"},"Deck not found.",-1)),qe(de,{to:"/decks",class:"btn btn-outline-secondary"},{default:lt(()=>[...j[2]||(j[2]=[ht("← Back to Decks",-1)])]),_:1})])),f.value?(q(),J("div",{key:3,class:"modal fade show",tabindex:"-1",style:{display:"block"},"aria-modal":"true",role:"dialog","aria-labelledby":"deleteDeckLabel",onClick:ul(V,["self"])},[w("div",a$,[w("div",l$,[w("div",{class:"modal-header"},[j[9]||(j[9]=w("h5",{id:"deleteDeckLabel",class:"modal-title"},"Delete this deck?",-1)),w("button",{type:"button",class:"btn-close","aria-label":"Close",onClick:V})]),w("div",c$,[w("p",u$,[j[10]||(j[10]=ht(" You’re about to delete ",-1)),w("strong",null,oe(r.value?.name),1),j[11]||(j[11]=ht(". This action cannot be undone. ",-1))])]),w("div",d$,[w("button",{class:"btn btn-outline-secondary",disabled:p.value,onClick:V}," Cancel ",8,f$),w("button",{class:"btn btn-danger",disabled:p.value,onClick:E},[p.value?(q(),J("span",p$)):ke("",!0),j[12]||(j[12]=ht(" Delete ",-1))],8,h$)])])])])):ke("",!0),f.value?(q(),J("div",g$)):ke("",!0)])}}}),v$=hn(y$,[["__scopeId","data-v-621ef886"]]),b$={key:0,class:"pagination-controls"},_$={class:"pagination justify-content-center"},w$=["onClick"],x$={class:"pagination-info text-center mt-2"},k$=et({__name:"PaginationComponent",props:{currentPage:{},totalItems:{},itemsPerPage:{},maxVisiblePages:{}},emits:["update:currentPage"],setup(t,{emit:e}){const n=t,r=e,s=He(()=>Math.ceil(n.totalItems/n.itemsPerPage)),i=He(()=>n.maxVisiblePages||5),o=He(()=>{const u=[],f=Math.floor(i.value/2);let p=Math.max(1,n.currentPage-f),m=Math.min(s.value,p+i.value-1);m-p+1<i.value&&(p=Math.max(1,m-i.value+1));for(let v=p;v<=m;v++)u.push(v);return u}),a=He(()=>(n.currentPage-1)*n.itemsPerPage),l=He(()=>n.currentPage*n.itemsPerPage),c=u=>{u>=1&&u<=s.value&&u!==n.currentPage&&r("update:currentPage",u)};return(u,f)=>s.value>1?(q(),J("nav",b$,[w("ul",_$,[w("li",{class:vt(["page-item",{disabled:u.currentPage===1}])},[w("a",{class:"page-link",href:"#",onClick:f[0]||(f[0]=ul(p=>c(u.currentPage-1),["prevent"]))},"Previous")],2),(q(!0),J(Ze,null,$t(o.value,p=>(q(),J("li",{key:p,class:vt(["page-item",{active:p===u.currentPage}])},[w("a",{class:"page-link",href:"#",onClick:ul(m=>c(p),["prevent"])},oe(p),9,w$)],2))),128)),w("li",{class:vt(["page-item",{disabled:u.currentPage===s.value}])},[w("a",{class:"page-link",href:"#",onClick:f[1]||(f[1]=ul(p=>c(u.currentPage+1),["prevent"]))},"Next")],2)]),w("div",x$," Showing "+oe(a.value+1)+"-"+oe(Math.min(l.value,u.totalItems))+" of "+oe(u.totalItems)+" items ",1)])):ke("",!0)}}),C$=hn(k$,[["__scopeId","data-v-7b87ee6f"]]),S$={class:"cards-view"},P$={class:"header"},A$={class:"controls"},E$={class:"search-box"},I$={class:"sort-controls"},O$={class:"page-size-controls"},M$={key:0,class:"loading"},T$={key:1,class:"empty-state"},D$={key:0},R$={key:1},F$={key:2},$$={class:"row g-4"},L$=et({__name:"CardsView",setup(t){const e=Yd(),n=Kd(),r=nv(),s=ge(""),i=ge("name"),o=ge("asc"),a=ge(parseInt(n.query.page)||1),l=ge(parseInt(n.query.itemsPerPage)||24);on(()=>n.query,m=>{a.value=parseInt(m.page)||1,l.value=parseInt(m.itemsPerPage)||24}),on([a,l],()=>{const m={};a.value!==1&&(m.page=a.value.toString()),l.value!==24&&(m.itemsPerPage=l.value.toString()),s.value&&(m.search=s.value),i.value!=="name"&&(m.sortBy=i.value),o.value!=="asc"&&(m.sortDirection=o.value),r.replace({query:m})});const c=He(()=>{const m=e.getAllCards;if(!s.value)return m;const v=s.value.toLowerCase();return m.filter(_=>_.name.toLowerCase().includes(v)||_.set.toLowerCase().includes(v)||_.number.includes(v))}),u=He(()=>{const m=[...c.value];return m.sort((v,_)=>{let k=0;switch(i.value){case"name":k=v.name.localeCompare(_.name);break;case"set":k=v.set.localeCompare(_.set);break;case"price":{const C=e.getCardPrice(v.id)?.getCents()??0,A=e.getCardPrice(_.id)?.getCents()??0;k=C-A}break;case"owned":k=0;break;default:k=v.name.localeCompare(_.name)}return o.value==="asc"?k:-k}),m}),f=He(()=>{const m=(a.value-1)*l.value,v=m+l.value;return u.value.slice(m,v)}),p=m=>{a.value=m,window.scrollTo({top:0,behavior:"smooth"})};return Nn(()=>{n.query.search&&(s.value=n.query.search),n.query.sortBy&&(i.value=n.query.sortBy),n.query.sortDirection&&(o.value=n.query.sortDirection),e.loadCards(),setTimeout(()=>{e.loadCardPrices()},0)}),(m,v)=>(q(),J("div",S$,[w("div",P$,[w("div",A$,[w("div",E$,[Ls(w("input",{"onUpdate:modelValue":v[0]||(v[0]=_=>s.value=_),type:"text",placeholder:"Search cards...",class:"form-control"},null,512),[[El,s.value]])]),w("div",I$,[Ls(w("select",{"onUpdate:modelValue":v[1]||(v[1]=_=>i.value=_),class:"form-select"},[...v[4]||(v[4]=[w("option",{value:"name"},"Name",-1),w("option",{value:"set"},"Set",-1),w("option",{value:"price"},"Price",-1),w("option",{value:"owned"},"Owned Quantity",-1)])],512),[[zh,i.value]]),w("button",{onClick:v[2]||(v[2]=_=>o.value=o.value==="asc"?"desc":"asc"),class:"btn btn-outline-primary"},oe(o.value==="asc"?"↑":"↓"),1)]),w("div",O$,[v[6]||(v[6]=w("label",{for:"itemsPerPage",class:"form-label me-2"},"Items per page:",-1)),Ls(w("select",{id:"itemsPerPage","onUpdate:modelValue":v[3]||(v[3]=_=>l.value=_),class:"form-select",style:{width:"auto"}},[...v[5]||(v[5]=[w("option",{value:12},"12",-1),w("option",{value:24},"24",-1),w("option",{value:48},"48",-1),w("option",{value:96},"96",-1)])],512),[[zh,l.value]])])])]),Re(e).loading||Re(e).loadingPrices?(q(),J("div",M$," Loading cards and prices... ")):u.value.length===0?(q(),J("div",T$,[s.value?(q(),J("p",D$,"No cards match your search.")):(q(),J("p",R$,"You don't have any cards in your collection yet."))])):(q(),J("div",F$,[w("div",$$,[(q(!0),J(Ze,null,$t(f.value,_=>(q(),J("div",{key:_.id,class:"col-xl-2 col-lg-3 col-md-4 col-sm-6"},[qe(i_,{card:_},null,8,["card"])]))),128))]),qe(C$,{"current-page":a.value,"total-items":u.value.length,"items-per-page":l.value,"onUpdate:currentPage":p},null,8,["current-page","total-items","items-per-page"])]))]))}}),B$=hn(L$,[["__scopeId","data-v-a663ac2c"]]),j$=[{path:"/",name:"home",component:EE},{path:"/import/csv",name:"csv-import",component:qE},{path:"/import/cardmarket",name:"cardmarket-import",component:DO},{path:"/import/deck",name:"deck-import",component:F2},{path:"/decks",name:"decks",component:J2},{path:"/decks/:id",name:"deck-detail",component:v$,props:!0},{path:"/cards",name:"cards",component:B$},{path:"/import/mtgjson",name:"mtgjson-import",component:i2},{path:"/import/price-guide",name:"price-guide-import",component:S2}],N$=p1({history:qx("/mtg-pwa/"),routes:j$}),z$="modulepreload",U$=function(t){return"/mtg-pwa/"+t},Em={},q$=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let c=function(u){return Promise.all(u.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};var o=c;document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=a?.nonce||a?.getAttribute("nonce");s=c(n.map(u=>{if(u=U$(u),u in Em)return;Em[u]=!0;const f=u.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${p}`))return;const m=document.createElement("link");if(m.rel=f?"stylesheet":z$,f||(m.as="script"),m.crossOrigin="",m.href=u,l&&m.setAttribute("nonce",l),document.head.appendChild(m),f)return new Promise((v,_)=>{m.addEventListener("load",v),m.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})};function W$(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:s,onRegisteredSW:i,onRegisterError:o}=t;let a,l;const c=async(f=!0)=>{await l};async function u(){if("serviceWorker"in navigator){if(a=await q$(async()=>{const{Workbox:f}=await import("./workbox-window.prod.es5-CwtvwXb3.js");return{Workbox:f}},[]).then(({Workbox:f})=>new f("/mtg-pwa/sw.js",{scope:"/mtg-pwa/",type:"classic"})).catch(f=>{o?.(f)}),!a)return;a.addEventListener("activated",f=>{(f.isUpdate||f.isExternal)&&window.location.reload()}),a.addEventListener("installed",f=>{f.isUpdate||r?.()}),a.register({immediate:e}).then(f=>{i?i("/mtg-pwa/sw.js",f):s?.(f)}).catch(f=>{o?.(f)})}}return l=u(),c}W$({immediate:!0,onRegistered(t){console.log("SW registered",t)},onRegisterError(t){console.error("SW registration error",t)}});const o_=cx(J1),V$=w1();o_.use(V$);async function H$(){o_.use(N$).mount("#app");try{setTimeout(async()=>{await fi.schedulePriceUpdate()},1e3)}catch(t){console.error("Error initializing automatic price updates:",t)}}H$();
