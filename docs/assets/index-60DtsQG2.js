(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();/**
* @vue/shared v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Sa(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const lt={},Vr=[],xn=()=>{},Gl=()=>!1,Vo=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Pa=e=>e.startsWith("onUpdate:"),xt=Object.assign,Oa=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},hf=Object.prototype.hasOwnProperty,at=(e,t)=>hf.call(e,t),Me=Array.isArray,Hr=e=>Ls(e)==="[object Map]",Ho=e=>Ls(e)==="[object Set]",Dc=e=>Ls(e)==="[object Date]",Ke=e=>typeof e=="function",ht=e=>typeof e=="string",ln=e=>typeof e=="symbol",ut=e=>e!==null&&typeof e=="object",Jl=e=>(ut(e)||Ke(e))&&Ke(e.then)&&Ke(e.catch),Xl=Object.prototype.toString,Ls=e=>Xl.call(e),mf=e=>Ls(e).slice(8,-1),Zl=e=>Ls(e)==="[object Object]",Ra=e=>ht(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,vs=Sa(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Wo=e=>{const t=Object.create(null);return(n=>t[n]||(t[n]=e(n)))},gf=/-(\w)/g,rn=Wo(e=>e.replace(gf,(t,n)=>n?n.toUpperCase():"")),yf=/\B([A-Z])/g,Er=Wo(e=>e.replace(yf,"-$1").toLowerCase()),zo=Wo(e=>e.charAt(0).toUpperCase()+e.slice(1)),xo=Wo(e=>e?`on${zo(e)}`:""),rr=(e,t)=>!Object.is(e,t),Ao=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},eu=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},Ro=e=>{const t=parseFloat(e);return isNaN(t)?e:t},vf=e=>{const t=ht(e)?Number(e):NaN;return isNaN(t)?e:t};let Tc;const Qo=()=>Tc||(Tc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Nn(e){if(Me(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],o=ht(r)?Cf(r):Nn(r);if(o)for(const a in o)t[a]=o[a]}return t}else if(ht(e)||ut(e))return e}const bf=/;(?![^(]*\))/g,_f=/:([^]+)/,wf=/\/\*[^]*?\*\//g;function Cf(e){const t={};return e.replace(wf,"").split(bf).forEach(n=>{if(n){const r=n.split(_f);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function kt(e){let t="";if(ht(e))t=e;else if(Me(e))for(let n=0;n<e.length;n++){const r=kt(e[n]);r&&(t+=r+" ")}else if(ut(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function kf(e){if(!e)return null;let{class:t,style:n}=e;return t&&!ht(t)&&(e.class=kt(t)),n&&(e.style=Nn(n)),e}const xf="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Af=Sa(xf);function tu(e){return!!e||e===""}function Ef(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=Yo(e[r],t[r]);return n}function Yo(e,t){if(e===t)return!0;let n=Dc(e),r=Dc(t);if(n||r)return n&&r?e.getTime()===t.getTime():!1;if(n=ln(e),r=ln(t),n||r)return e===t;if(n=Me(e),r=Me(t),n||r)return n&&r?Ef(e,t):!1;if(n=ut(e),r=ut(t),n||r){if(!n||!r)return!1;const o=Object.keys(e).length,a=Object.keys(t).length;if(o!==a)return!1;for(const c in e){const u=e.hasOwnProperty(c),d=t.hasOwnProperty(c);if(u&&!d||!u&&d||!Yo(e[c],t[c]))return!1}}return String(e)===String(t)}function If(e,t){return e.findIndex(n=>Yo(n,t))}const nu=e=>!!(e&&e.__v_isRef===!0),se=e=>ht(e)?e:e==null?"":Me(e)||ut(e)&&(e.toString===Xl||!Ke(e.toString))?nu(e)?se(e.value):JSON.stringify(e,ru,2):String(e),ru=(e,t)=>nu(t)?ru(e,t.value):Hr(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,o],a)=>(n[qi(r,a)+" =>"]=o,n),{})}:Ho(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>qi(n))}:ln(t)?qi(t):ut(t)&&!Me(t)&&!Zl(t)?String(t):t,qi=(e,t="")=>{var n;return ln(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Mt;class su{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Mt,!t&&Mt&&(this.index=(Mt.scopes||(Mt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=Mt;try{return Mt=this,t()}finally{Mt=n}}}on(){++this._on===1&&(this.prevScope=Mt,Mt=this)}off(){this._on>0&&--this._on===0&&(Mt=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function Go(e){return new su(e)}function $a(){return Mt}function ou(e,t=!1){Mt&&Mt.cleanups.push(e)}let dt;const ji=new WeakSet;class iu{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Mt&&Mt.active&&Mt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,ji.has(this)&&(ji.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||cu(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Fc(this),lu(this);const t=dt,n=cn;dt=this,cn=!0;try{return this.fn()}finally{uu(this),dt=t,cn=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Fa(t);this.deps=this.depsTail=void 0,Fc(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?ji.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){aa(this)&&this.run()}get dirty(){return aa(this)}}let au=0,bs,_s;function cu(e,t=!1){if(e.flags|=8,t){e.next=_s,_s=e;return}e.next=bs,bs=e}function Da(){au++}function Ta(){if(--au>0)return;if(_s){let t=_s;for(_s=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;bs;){let t=bs;for(bs=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=n}}if(e)throw e}function lu(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function uu(e){let t,n=e.depsTail,r=n;for(;r;){const o=r.prevDep;r.version===-1?(r===n&&(n=o),Fa(r),Sf(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=o}e.deps=t,e.depsTail=n}function aa(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(du(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function du(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Ps)||(e.globalVersion=Ps,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!aa(e))))return;e.flags|=2;const t=e.dep,n=dt,r=cn;dt=e,cn=!0;try{lu(e);const o=e.fn(e._value);(t.version===0||rr(o,e._value))&&(e.flags|=128,e._value=o,t.version++)}catch(o){throw t.version++,o}finally{dt=n,cn=r,uu(e),e.flags&=-3}}function Fa(e,t=!1){const{dep:n,prevSub:r,nextSub:o}=e;if(r&&(r.nextSub=o,e.prevSub=void 0),o&&(o.prevSub=r,e.nextSub=void 0),n.subs===e&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let a=n.computed.deps;a;a=a.nextDep)Fa(a,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function Sf(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let cn=!0;const fu=[];function Ln(){fu.push(cn),cn=!1}function qn(){const e=fu.pop();cn=e===void 0?!0:e}function Fc(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=dt;dt=void 0;try{t()}finally{dt=n}}}let Ps=0;class Pf{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Ma{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!dt||!cn||dt===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==dt)n=this.activeLink=new Pf(dt,this),dt.deps?(n.prevDep=dt.depsTail,dt.depsTail.nextDep=n,dt.depsTail=n):dt.deps=dt.depsTail=n,pu(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=dt.depsTail,n.nextDep=void 0,dt.depsTail.nextDep=n,dt.depsTail=n,dt.deps===n&&(dt.deps=r)}return n}trigger(t){this.version++,Ps++,this.notify(t)}notify(t){Da();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Ta()}}}function pu(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)pu(r)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const $o=new WeakMap,xr=Symbol(""),ca=Symbol(""),Os=Symbol("");function Nt(e,t,n){if(cn&&dt){let r=$o.get(e);r||$o.set(e,r=new Map);let o=r.get(n);o||(r.set(n,o=new Ma),o.map=r,o.key=n),o.track()}}function Mn(e,t,n,r,o,a){const c=$o.get(e);if(!c){Ps++;return}const u=d=>{d&&d.trigger()};if(Da(),t==="clear")c.forEach(u);else{const d=Me(e),h=d&&Ra(n);if(d&&n==="length"){const p=Number(r);c.forEach((g,b)=>{(b==="length"||b===Os||!ln(b)&&b>=p)&&u(g)})}else switch((n!==void 0||c.has(void 0))&&u(c.get(n)),h&&u(c.get(Os)),t){case"add":d?h&&u(c.get("length")):(u(c.get(xr)),Hr(e)&&u(c.get(ca)));break;case"delete":d||(u(c.get(xr)),Hr(e)&&u(c.get(ca)));break;case"set":Hr(e)&&u(c.get(xr));break}}Ta()}function Of(e,t){const n=$o.get(e);return n&&n.get(t)}function Nr(e){const t=et(e);return t===e?t:(Nt(t,"iterate",Os),an(e)?t:t.map(Rt))}function Jo(e){return Nt(e=et(e),"iterate",Os),e}const Rf={__proto__:null,[Symbol.iterator](){return Ui(this,Symbol.iterator,Rt)},concat(...e){return Nr(this).concat(...e.map(t=>Me(t)?Nr(t):t))},entries(){return Ui(this,"entries",e=>(e[1]=Rt(e[1]),e))},every(e,t){return $n(this,"every",e,t,void 0,arguments)},filter(e,t){return $n(this,"filter",e,t,n=>n.map(Rt),arguments)},find(e,t){return $n(this,"find",e,t,Rt,arguments)},findIndex(e,t){return $n(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return $n(this,"findLast",e,t,Rt,arguments)},findLastIndex(e,t){return $n(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return $n(this,"forEach",e,t,void 0,arguments)},includes(...e){return Ki(this,"includes",e)},indexOf(...e){return Ki(this,"indexOf",e)},join(e){return Nr(this).join(e)},lastIndexOf(...e){return Ki(this,"lastIndexOf",e)},map(e,t){return $n(this,"map",e,t,void 0,arguments)},pop(){return ds(this,"pop")},push(...e){return ds(this,"push",e)},reduce(e,...t){return Mc(this,"reduce",e,t)},reduceRight(e,...t){return Mc(this,"reduceRight",e,t)},shift(){return ds(this,"shift")},some(e,t){return $n(this,"some",e,t,void 0,arguments)},splice(...e){return ds(this,"splice",e)},toReversed(){return Nr(this).toReversed()},toSorted(e){return Nr(this).toSorted(e)},toSpliced(...e){return Nr(this).toSpliced(...e)},unshift(...e){return ds(this,"unshift",e)},values(){return Ui(this,"values",Rt)}};function Ui(e,t,n){const r=Jo(e),o=r[t]();return r!==e&&!an(e)&&(o._next=o.next,o.next=()=>{const a=o._next();return a.value&&(a.value=n(a.value)),a}),o}const $f=Array.prototype;function $n(e,t,n,r,o,a){const c=Jo(e),u=c!==e&&!an(e),d=c[t];if(d!==$f[t]){const g=d.apply(e,a);return u?Rt(g):g}let h=n;c!==e&&(u?h=function(g,b){return n.call(this,Rt(g),b,e)}:n.length>2&&(h=function(g,b){return n.call(this,g,b,e)}));const p=d.call(c,h,r);return u&&o?o(p):p}function Mc(e,t,n,r){const o=Jo(e);let a=n;return o!==e&&(an(e)?n.length>3&&(a=function(c,u,d){return n.call(this,c,u,d,e)}):a=function(c,u,d){return n.call(this,c,Rt(u),d,e)}),o[t](a,...r)}function Ki(e,t,n){const r=et(e);Nt(r,"iterate",Os);const o=r[t](...n);return(o===-1||o===!1)&&La(n[0])?(n[0]=et(n[0]),r[t](...n)):o}function ds(e,t,n=[]){Ln(),Da();const r=et(e)[t].apply(e,n);return Ta(),qn(),r}const Df=Sa("__proto__,__v_isRef,__isVue"),hu=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(ln));function Tf(e){ln(e)||(e=String(e));const t=et(this);return Nt(t,"has",e),t.hasOwnProperty(e)}class mu{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,r){if(n==="__v_skip")return t.__v_skip;const o=this._isReadonly,a=this._isShallow;if(n==="__v_isReactive")return!o;if(n==="__v_isReadonly")return o;if(n==="__v_isShallow")return a;if(n==="__v_raw")return r===(o?a?Vf:bu:a?vu:yu).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const c=Me(t);if(!o){let d;if(c&&(d=Rf[n]))return d;if(n==="hasOwnProperty")return Tf}const u=Reflect.get(t,n,wt(t)?t:r);return(ln(n)?hu.has(n):Df(n))||(o||Nt(t,"get",n),a)?u:wt(u)?c&&Ra(n)?u:u.value:ut(u)?o?wu(u):Ir(u):u}}class gu extends mu{constructor(t=!1){super(!1,t)}set(t,n,r,o){let a=t[n];if(!this._isShallow){const d=ir(a);if(!an(r)&&!ir(r)&&(a=et(a),r=et(r)),!Me(t)&&wt(a)&&!wt(r))return d||(a.value=r),!0}const c=Me(t)&&Ra(n)?Number(n)<t.length:at(t,n),u=Reflect.set(t,n,r,wt(t)?t:o);return t===et(o)&&(c?rr(r,a)&&Mn(t,"set",n,r):Mn(t,"add",n,r)),u}deleteProperty(t,n){const r=at(t,n);t[n];const o=Reflect.deleteProperty(t,n);return o&&r&&Mn(t,"delete",n,void 0),o}has(t,n){const r=Reflect.has(t,n);return(!ln(n)||!hu.has(n))&&Nt(t,"has",n),r}ownKeys(t){return Nt(t,"iterate",Me(t)?"length":xr),Reflect.ownKeys(t)}}class Ff extends mu{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const Mf=new gu,Bf=new Ff,Nf=new gu(!0);const la=e=>e,mo=e=>Reflect.getPrototypeOf(e);function Lf(e,t,n){return function(...r){const o=this.__v_raw,a=et(o),c=Hr(a),u=e==="entries"||e===Symbol.iterator&&c,d=e==="keys"&&c,h=o[e](...r),p=n?la:t?Do:Rt;return!t&&Nt(a,"iterate",d?ca:xr),{next(){const{value:g,done:b}=h.next();return b?{value:g,done:b}:{value:u?[p(g[0]),p(g[1])]:p(g),done:b}},[Symbol.iterator](){return this}}}}function go(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function qf(e,t){const n={get(o){const a=this.__v_raw,c=et(a),u=et(o);e||(rr(o,u)&&Nt(c,"get",o),Nt(c,"get",u));const{has:d}=mo(c),h=t?la:e?Do:Rt;if(d.call(c,o))return h(a.get(o));if(d.call(c,u))return h(a.get(u));a!==c&&a.get(o)},get size(){const o=this.__v_raw;return!e&&Nt(et(o),"iterate",xr),o.size},has(o){const a=this.__v_raw,c=et(a),u=et(o);return e||(rr(o,u)&&Nt(c,"has",o),Nt(c,"has",u)),o===u?a.has(o):a.has(o)||a.has(u)},forEach(o,a){const c=this,u=c.__v_raw,d=et(u),h=t?la:e?Do:Rt;return!e&&Nt(d,"iterate",xr),u.forEach((p,g)=>o.call(a,h(p),h(g),c))}};return xt(n,e?{add:go("add"),set:go("set"),delete:go("delete"),clear:go("clear")}:{add(o){!t&&!an(o)&&!ir(o)&&(o=et(o));const a=et(this);return mo(a).has.call(a,o)||(a.add(o),Mn(a,"add",o,o)),this},set(o,a){!t&&!an(a)&&!ir(a)&&(a=et(a));const c=et(this),{has:u,get:d}=mo(c);let h=u.call(c,o);h||(o=et(o),h=u.call(c,o));const p=d.call(c,o);return c.set(o,a),h?rr(a,p)&&Mn(c,"set",o,a):Mn(c,"add",o,a),this},delete(o){const a=et(this),{has:c,get:u}=mo(a);let d=c.call(a,o);d||(o=et(o),d=c.call(a,o)),u&&u.call(a,o);const h=a.delete(o);return d&&Mn(a,"delete",o,void 0),h},clear(){const o=et(this),a=o.size!==0,c=o.clear();return a&&Mn(o,"clear",void 0,void 0),c}}),["keys","values","entries",Symbol.iterator].forEach(o=>{n[o]=Lf(o,e,t)}),n}function Ba(e,t){const n=qf(e,t);return(r,o,a)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?r:Reflect.get(at(n,o)&&o in r?n:r,o,a)}const jf={get:Ba(!1,!1)},Uf={get:Ba(!1,!0)},Kf={get:Ba(!0,!1)};const yu=new WeakMap,vu=new WeakMap,bu=new WeakMap,Vf=new WeakMap;function Hf(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Wf(e){return e.__v_skip||!Object.isExtensible(e)?0:Hf(mf(e))}function Ir(e){return ir(e)?e:Na(e,!1,Mf,jf,yu)}function _u(e){return Na(e,!1,Nf,Uf,vu)}function wu(e){return Na(e,!0,Bf,Kf,bu)}function Na(e,t,n,r,o){if(!ut(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const a=Wf(e);if(a===0)return e;const c=o.get(e);if(c)return c;const u=new Proxy(e,a===2?r:n);return o.set(e,u),u}function sr(e){return ir(e)?sr(e.__v_raw):!!(e&&e.__v_isReactive)}function ir(e){return!!(e&&e.__v_isReadonly)}function an(e){return!!(e&&e.__v_isShallow)}function La(e){return e?!!e.__v_raw:!1}function et(e){const t=e&&e.__v_raw;return t?et(t):e}function qa(e){return!at(e,"__v_skip")&&Object.isExtensible(e)&&eu(e,"__v_skip",!0),e}const Rt=e=>ut(e)?Ir(e):e,Do=e=>ut(e)?wu(e):e;function wt(e){return e?e.__v_isRef===!0:!1}function xe(e){return ku(e,!1)}function Cu(e){return ku(e,!0)}function ku(e,t){return wt(e)?e:new zf(e,t)}class zf{constructor(t,n){this.dep=new Ma,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:et(t),this._value=n?t:Rt(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,r=this.__v_isShallow||an(t)||ir(t);t=r?t:et(t),rr(t,n)&&(this._rawValue=t,this._value=r?t:Rt(t),this.dep.trigger())}}function Ee(e){return wt(e)?e.value:e}function An(e){return Ke(e)?e():Ee(e)}const Qf={get:(e,t,n)=>t==="__v_raw"?e:Ee(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const o=e[t];return wt(o)&&!wt(n)?(o.value=n,!0):Reflect.set(e,t,n,r)}};function xu(e){return sr(e)?e:new Proxy(e,Qf)}function ja(e){const t=Me(e)?new Array(e.length):{};for(const n in e)t[n]=Gf(e,n);return t}class Yf{constructor(t,n,r){this._object=t,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return Of(et(this._object),this._key)}}function Gf(e,t,n){const r=e[t];return wt(r)?r:new Yf(e,t,n)}class Jf{constructor(t,n,r){this.fn=t,this.setter=n,this._value=void 0,this.dep=new Ma(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ps-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&dt!==this)return cu(this,!0),!0}get value(){const t=this.dep.track();return du(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Xf(e,t,n=!1){let r,o;return Ke(e)?r=e:(r=e.get,o=e.set),new Jf(r,o,n)}const yo={},To=new WeakMap;let br;function Zf(e,t=!1,n=br){if(n){let r=To.get(n);r||To.set(n,r=[]),r.push(e)}}function ep(e,t,n=lt){const{immediate:r,deep:o,once:a,scheduler:c,augmentJob:u,call:d}=n,h=E=>o?E:an(E)||o===!1||o===0?Bn(E,1):Bn(E);let p,g,b,C,P=!1,q=!1;if(wt(e)?(g=()=>e.value,P=an(e)):sr(e)?(g=()=>h(e),P=!0):Me(e)?(q=!0,P=e.some(E=>sr(E)||an(E)),g=()=>e.map(E=>{if(wt(E))return E.value;if(sr(E))return h(E);if(Ke(E))return d?d(E,2):E()})):Ke(e)?t?g=d?()=>d(e,2):e:g=()=>{if(b){Ln();try{b()}finally{qn()}}const E=br;br=p;try{return d?d(e,3,[C]):e(C)}finally{br=E}}:g=xn,t&&o){const E=g,ne=o===!0?1/0:o;g=()=>Bn(E(),ne)}const j=$a(),U=()=>{p.stop(),j&&j.active&&Oa(j.effects,p)};if(a&&t){const E=t;t=(...ne)=>{E(...ne),U()}}let Q=q?new Array(e.length).fill(yo):yo;const R=E=>{if(!(!(p.flags&1)||!p.dirty&&!E))if(t){const ne=p.run();if(o||P||(q?ne.some((ce,Ie)=>rr(ce,Q[Ie])):rr(ne,Q))){b&&b();const ce=br;br=p;try{const Ie=[ne,Q===yo?void 0:q&&Q[0]===yo?[]:Q,C];Q=ne,d?d(t,3,Ie):t(...Ie)}finally{br=ce}}}else p.run()};return u&&u(R),p=new iu(g),p.scheduler=c?()=>c(R,!1):R,C=E=>Zf(E,!1,p),b=p.onStop=()=>{const E=To.get(p);if(E){if(d)d(E,4);else for(const ne of E)ne();To.delete(p)}},t?r?R(!0):Q=p.run():c?c(R.bind(null,!0),!0):p.run(),U.pause=p.pause.bind(p),U.resume=p.resume.bind(p),U.stop=U,U}function Bn(e,t=1/0,n){if(t<=0||!ut(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,wt(e))Bn(e.value,t,n);else if(Me(e))for(let r=0;r<e.length;r++)Bn(e[r],t,n);else if(Ho(e)||Hr(e))e.forEach(r=>{Bn(r,t,n)});else if(Zl(e)){for(const r in e)Bn(e[r],t,n);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&Bn(e[r],t,n)}return e}/**
* @vue/runtime-core v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function qs(e,t,n,r){try{return r?e(...r):e()}catch(o){Xo(o,t,n)}}function un(e,t,n,r){if(Ke(e)){const o=qs(e,t,n,r);return o&&Jl(o)&&o.catch(a=>{Xo(a,t,n)}),o}if(Me(e)){const o=[];for(let a=0;a<e.length;a++)o.push(un(e[a],t,n,r));return o}}function Xo(e,t,n,r=!0){const o=t?t.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:c}=t&&t.appContext.config||lt;if(t){let u=t.parent;const d=t.proxy,h=`https://vuejs.org/error-reference/#runtime-${n}`;for(;u;){const p=u.ec;if(p){for(let g=0;g<p.length;g++)if(p[g](e,d,h)===!1)return}u=u.parent}if(a){Ln(),qs(a,null,10,[e,d,h]),qn();return}}tp(e,n,o,r,c)}function tp(e,t,n,r=!0,o=!1){if(o)throw e;console.error(e)}const Ht=[];let wn=-1;const Wr=[];let er=null,jr=0;const Au=Promise.resolve();let Fo=null;function dn(e){const t=Fo||Au;return e?t.then(this?e.bind(this):e):t}function np(e){let t=wn+1,n=Ht.length;for(;t<n;){const r=t+n>>>1,o=Ht[r],a=Rs(o);a<e||a===e&&o.flags&2?t=r+1:n=r}return t}function Ua(e){if(!(e.flags&1)){const t=Rs(e),n=Ht[Ht.length-1];!n||!(e.flags&2)&&t>=Rs(n)?Ht.push(e):Ht.splice(np(t),0,e),e.flags|=1,Eu()}}function Eu(){Fo||(Fo=Au.then(Su))}function rp(e){Me(e)?Wr.push(...e):er&&e.id===-1?er.splice(jr+1,0,e):e.flags&1||(Wr.push(e),e.flags|=1),Eu()}function Bc(e,t,n=wn+1){for(;n<Ht.length;n++){const r=Ht[n];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;Ht.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Iu(e){if(Wr.length){const t=[...new Set(Wr)].sort((n,r)=>Rs(n)-Rs(r));if(Wr.length=0,er){er.push(...t);return}for(er=t,jr=0;jr<er.length;jr++){const n=er[jr];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}er=null,jr=0}}const Rs=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Su(e){try{for(wn=0;wn<Ht.length;wn++){const t=Ht[wn];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),qs(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;wn<Ht.length;wn++){const t=Ht[wn];t&&(t.flags&=-2)}wn=-1,Ht.length=0,Iu(),Fo=null,(Ht.length||Wr.length)&&Su()}}let $t=null,Pu=null;function Mo(e){const t=$t;return $t=e,Pu=e&&e.type.__scopeId||null,t}function ot(e,t=$t,n){if(!t||e._n)return e;const r=(...o)=>{r._d&&Gc(-1);const a=Mo(t);let c;try{c=e(...o)}finally{Mo(a),r._d&&Gc(1)}return c};return r._n=!0,r._c=!0,r._d=!0,r}function $s(e,t){if($t===null)return e;const n=ri($t),r=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[a,c,u,d=lt]=t[o];a&&(Ke(a)&&(a={mounted:a,updated:a}),a.deep&&Bn(c),r.push({dir:a,instance:n,value:c,oldValue:void 0,arg:u,modifiers:d}))}return e}function mr(e,t,n,r){const o=e.dirs,a=t&&t.dirs;for(let c=0;c<o.length;c++){const u=o[c];a&&(u.oldValue=a[c].value);let d=u.dir[r];d&&(Ln(),un(d,n,8,[e.el,u,e,t]),qn())}}const Ou=Symbol("_vte"),sp=e=>e.__isTeleport,ws=e=>e&&(e.disabled||e.disabled===""),Nc=e=>e&&(e.defer||e.defer===""),Lc=e=>typeof SVGElement<"u"&&e instanceof SVGElement,qc=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,ua=(e,t)=>{const n=e&&e.to;return ht(n)?t?t(n):null:n},Ru={name:"Teleport",__isTeleport:!0,process(e,t,n,r,o,a,c,u,d,h){const{mc:p,pc:g,pbc:b,o:{insert:C,querySelector:P,createText:q,createComment:j}}=h,U=ws(t.props);let{shapeFlag:Q,children:R,dynamicChildren:E}=t;if(e==null){const ne=t.el=q(""),ce=t.anchor=q("");C(ne,n,r),C(ce,n,r);const Ie=(H,Oe)=>{Q&16&&(o&&o.isCE&&(o.ce._teleportTarget=H),p(R,H,Oe,o,a,c,u,d))},we=()=>{const H=t.target=ua(t.props,P),Oe=$u(H,t,q,C);H&&(c!=="svg"&&Lc(H)?c="svg":c!=="mathml"&&qc(H)&&(c="mathml"),U||(Ie(H,Oe),Eo(t,!1)))};U&&(Ie(n,ce),Eo(t,!0)),Nc(t.props)?(t.el.__isMounted=!1,Vt(()=>{we(),delete t.el.__isMounted},a)):we()}else{if(Nc(t.props)&&e.el.__isMounted===!1){Vt(()=>{Ru.process(e,t,n,r,o,a,c,u,d,h)},a);return}t.el=e.el,t.targetStart=e.targetStart;const ne=t.anchor=e.anchor,ce=t.target=e.target,Ie=t.targetAnchor=e.targetAnchor,we=ws(e.props),H=we?n:ce,Oe=we?ne:Ie;if(c==="svg"||Lc(ce)?c="svg":(c==="mathml"||qc(ce))&&(c="mathml"),E?(b(e.dynamicChildren,E,H,o,a,c,u),Wa(e,t,!0)):d||g(e,t,H,Oe,o,a,c,u,!1),U)we?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):vo(t,n,ne,h,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const je=t.target=ua(t.props,P);je&&vo(t,je,null,h,0)}else we&&vo(t,ce,Ie,h,1);Eo(t,U)}},remove(e,t,n,{um:r,o:{remove:o}},a){const{shapeFlag:c,children:u,anchor:d,targetStart:h,targetAnchor:p,target:g,props:b}=e;if(g&&(o(h),o(p)),a&&o(d),c&16){const C=a||!ws(b);for(let P=0;P<u.length;P++){const q=u[P];r(q,t,n,C,!!q.dynamicChildren)}}},move:vo,hydrate:op};function vo(e,t,n,{o:{insert:r},m:o},a=2){a===0&&r(e.targetAnchor,t,n);const{el:c,anchor:u,shapeFlag:d,children:h,props:p}=e,g=a===2;if(g&&r(c,t,n),(!g||ws(p))&&d&16)for(let b=0;b<h.length;b++)o(h[b],t,n,2);g&&r(u,t,n)}function op(e,t,n,r,o,a,{o:{nextSibling:c,parentNode:u,querySelector:d,insert:h,createText:p}},g){const b=t.target=ua(t.props,d);if(b){const C=ws(t.props),P=b._lpa||b.firstChild;if(t.shapeFlag&16)if(C)t.anchor=g(c(e),t,u(e),n,r,o,a),t.targetStart=P,t.targetAnchor=P&&c(P);else{t.anchor=c(e);let q=P;for(;q;){if(q&&q.nodeType===8){if(q.data==="teleport start anchor")t.targetStart=q;else if(q.data==="teleport anchor"){t.targetAnchor=q,b._lpa=t.targetAnchor&&c(t.targetAnchor);break}}q=c(q)}t.targetAnchor||$u(b,t,p,h),g(P&&c(P),t,b,n,r,o,a)}Eo(t,C)}return t.anchor&&c(t.anchor)}const ip=Ru;function Eo(e,t){const n=e.ctx;if(n&&n.ut){let r,o;for(t?(r=e.el,o=e.anchor):(r=e.targetStart,o=e.targetAnchor);r&&r!==o;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function $u(e,t,n,r){const o=t.targetStart=n(""),a=t.targetAnchor=n("");return o[Ou]=a,e&&(r(o,e),r(a,e)),a}const _r=Symbol("_leaveCb"),bo=Symbol("_enterCb");function ap(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return In(()=>{e.isMounted=!0}),Ka(()=>{e.isUnmounting=!0}),e}const on=[Function,Array],cp={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:on,onEnter:on,onAfterEnter:on,onEnterCancelled:on,onBeforeLeave:on,onLeave:on,onAfterLeave:on,onLeaveCancelled:on,onBeforeAppear:on,onAppear:on,onAfterAppear:on,onAppearCancelled:on};function lp(e,t){const{leavingVNodes:n}=e;let r=n.get(t.type);return r||(r=Object.create(null),n.set(t.type,r)),r}function da(e,t,n,r,o){const{appear:a,mode:c,persisted:u=!1,onBeforeEnter:d,onEnter:h,onAfterEnter:p,onEnterCancelled:g,onBeforeLeave:b,onLeave:C,onAfterLeave:P,onLeaveCancelled:q,onBeforeAppear:j,onAppear:U,onAfterAppear:Q,onAppearCancelled:R}=t,E=String(e.key),ne=lp(n,e),ce=(H,Oe)=>{H&&un(H,r,9,Oe)},Ie=(H,Oe)=>{const je=Oe[1];ce(H,Oe),Me(H)?H.every(de=>de.length<=1)&&je():H.length<=1&&je()},we={mode:c,persisted:u,beforeEnter(H){let Oe=d;if(!n.isMounted)if(a)Oe=j||d;else return;H[_r]&&H[_r](!0);const je=ne[E];je&&Ur(e,je)&&je.el[_r]&&je.el[_r](),ce(Oe,[H])},enter(H){let Oe=h,je=p,de=g;if(!n.isMounted)if(a)Oe=U||h,je=Q||p,de=R||g;else return;let Se=!1;const Ne=H[bo]=nt=>{Se||(Se=!0,nt?ce(de,[H]):ce(je,[H]),we.delayedLeave&&we.delayedLeave(),H[bo]=void 0)};Oe?Ie(Oe,[H,Ne]):Ne()},leave(H,Oe){const je=String(e.key);if(H[bo]&&H[bo](!0),n.isUnmounting)return Oe();ce(b,[H]);let de=!1;const Se=H[_r]=Ne=>{de||(de=!0,Oe(),Ne?ce(q,[H]):ce(P,[H]),H[_r]=void 0,ne[je]===e&&delete ne[je])};ne[je]=e,C?Ie(C,[H,Se]):Se()},clone(H){return da(H,t,n,r)}};return we}function Ds(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Ds(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Du(e,t=!1,n){let r=[],o=0;for(let a=0;a<e.length;a++){let c=e[a];const u=n==null?c.key:String(n)+String(c.key!=null?c.key:a);c.type===Xe?(c.patchFlag&128&&o++,r=r.concat(Du(c.children,t,u))):(t||c.type!==fn)&&r.push(u!=null?ar(c,{key:u}):c)}if(o>1)for(let a=0;a<r.length;a++)r[a].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function ct(e,t){return Ke(e)?xt({name:e.name},t,{setup:e}):e}function up(){const e=Sn();return e?(e.appContext.config.idPrefix||"v")+"-"+e.ids[0]+e.ids[1]++:""}function Tu(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function Cs(e,t,n,r,o=!1){if(Me(e)){e.forEach((P,q)=>Cs(P,t&&(Me(t)?t[q]:t),n,r,o));return}if(zr(r)&&!o){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Cs(e,t,n,r.component.subTree);return}const a=r.shapeFlag&4?ri(r.component):r.el,c=o?null:a,{i:u,r:d}=e,h=t&&t.r,p=u.refs===lt?u.refs={}:u.refs,g=u.setupState,b=et(g),C=g===lt?Gl:P=>at(b,P);if(h!=null&&h!==d){if(ht(h))p[h]=null,C(h)&&(g[h]=null);else if(wt(h)){h.value=null;const P=t;P.k&&(p[P.k]=null)}}if(Ke(d))qs(d,u,12,[c,p]);else{const P=ht(d),q=wt(d);if(P||q){const j=()=>{if(e.f){const U=P?C(d)?g[d]:p[d]:d.value;if(o)Me(U)&&Oa(U,a);else if(Me(U))U.includes(a)||U.push(a);else if(P)p[d]=[a],C(d)&&(g[d]=p[d]);else{const Q=[a];d.value=Q,e.k&&(p[e.k]=Q)}}else P?(p[d]=c,C(d)&&(g[d]=c)):q&&(d.value=c,e.k&&(p[e.k]=c))};c?(j.id=-1,Vt(j,n)):j()}}}Qo().requestIdleCallback;Qo().cancelIdleCallback;const zr=e=>!!e.type.__asyncLoader,Fu=e=>e.type.__isKeepAlive;function dp(e,t){Mu(e,"a",t)}function fp(e,t){Mu(e,"da",t)}function Mu(e,t,n=Lt){const r=e.__wdc||(e.__wdc=()=>{let o=n;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if(Zo(t,r,n),n){let o=n.parent;for(;o&&o.parent;)Fu(o.parent.vnode)&&pp(r,t,n,o),o=o.parent}}function pp(e,t,n,r){const o=Zo(t,e,r,!0);js(()=>{Oa(r[t],o)},n)}function Zo(e,t,n=Lt,r=!1){if(n){const o=n[e]||(n[e]=[]),a=t.__weh||(t.__weh=(...c)=>{Ln();const u=Us(n),d=un(t,n,e,c);return u(),qn(),d});return r?o.unshift(a):o.push(a),a}}const jn=e=>(t,n=Lt)=>{(!Ms||e==="sp")&&Zo(e,(...r)=>t(...r),n)},hp=jn("bm"),In=jn("m"),mp=jn("bu"),Bu=jn("u"),Ka=jn("bum"),js=jn("um"),gp=jn("sp"),yp=jn("rtg"),vp=jn("rtc");function bp(e,t=Lt){Zo("ec",e,t)}const _p="components";function ei(e,t){return Cp(_p,e,!0,t)||e}const wp=Symbol.for("v-ndc");function Cp(e,t,n=!0,r=!1){const o=$t||Lt;if(o){const a=o.type;{const u=ah(a,!1);if(u&&(u===t||u===rn(t)||u===zo(rn(t))))return a}const c=jc(o[e]||a[e],t)||jc(o.appContext[e],t);return!c&&r?a:c}}function jc(e,t){return e&&(e[t]||e[rn(t)]||e[zo(rn(t))])}function Bt(e,t,n,r){let o;const a=n,c=Me(e);if(c||ht(e)){const u=c&&sr(e);let d=!1,h=!1;u&&(d=!an(e),h=ir(e),e=Jo(e)),o=new Array(e.length);for(let p=0,g=e.length;p<g;p++)o[p]=t(d?h?Do(Rt(e[p])):Rt(e[p]):e[p],p,void 0,a)}else if(typeof e=="number"){o=new Array(e);for(let u=0;u<e;u++)o[u]=t(u+1,u,void 0,a)}else if(ut(e))if(e[Symbol.iterator])o=Array.from(e,(u,d)=>t(u,d,void 0,a));else{const u=Object.keys(e);o=new Array(u.length);for(let d=0,h=u.length;d<h;d++){const p=u[d];o[d]=t(e[p],p,d,a)}}else o=[];return o}function Gt(e,t,n={},r,o){if($t.ce||$t.parent&&zr($t.parent)&&$t.parent.ce)return K(),Pt(Xe,null,[ze("slot",n,r)],64);let a=e[t];a&&a._c&&(a._d=!1),K();const c=a&&Nu(a(n)),u=n.key||c&&c.key,d=Pt(Xe,{key:(u&&!ln(u)?u:`_${t}`)+(!c&&r?"_fb":"")},c||[],c&&e._===1?64:-2);return d.scopeId&&(d.slotScopeIds=[d.scopeId+"-s"]),a&&a._c&&(a._d=!0),d}function Nu(e){return e.some(t=>Fs(t)?!(t.type===fn||t.type===Xe&&!Nu(t.children)):!0)?e:null}const fa=e=>e?rd(e)?ri(e):fa(e.parent):null,ks=xt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>fa(e.parent),$root:e=>fa(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>qu(e),$forceUpdate:e=>e.f||(e.f=()=>{Ua(e.update)}),$nextTick:e=>e.n||(e.n=dn.bind(e.proxy)),$watch:e=>Vp.bind(e)}),Vi=(e,t)=>e!==lt&&!e.__isScriptSetup&&at(e,t),kp={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:r,data:o,props:a,accessCache:c,type:u,appContext:d}=e;let h;if(t[0]!=="$"){const C=c[t];if(C!==void 0)switch(C){case 1:return r[t];case 2:return o[t];case 4:return n[t];case 3:return a[t]}else{if(Vi(r,t))return c[t]=1,r[t];if(o!==lt&&at(o,t))return c[t]=2,o[t];if((h=e.propsOptions[0])&&at(h,t))return c[t]=3,a[t];if(n!==lt&&at(n,t))return c[t]=4,n[t];pa&&(c[t]=0)}}const p=ks[t];let g,b;if(p)return t==="$attrs"&&Nt(e.attrs,"get",""),p(e);if((g=u.__cssModules)&&(g=g[t]))return g;if(n!==lt&&at(n,t))return c[t]=4,n[t];if(b=d.config.globalProperties,at(b,t))return b[t]},set({_:e},t,n){const{data:r,setupState:o,ctx:a}=e;return Vi(o,t)?(o[t]=n,!0):r!==lt&&at(r,t)?(r[t]=n,!0):at(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(a[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:o,propsOptions:a,type:c}},u){let d,h;return!!(n[u]||e!==lt&&u[0]!=="$"&&at(e,u)||Vi(t,u)||(d=a[0])&&at(d,u)||at(r,u)||at(ks,u)||at(o.config.globalProperties,u)||(h=c.__cssModules)&&h[u])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:at(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Uc(e){return Me(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let pa=!0;function xp(e){const t=qu(e),n=e.proxy,r=e.ctx;pa=!1,t.beforeCreate&&Kc(t.beforeCreate,e,"bc");const{data:o,computed:a,methods:c,watch:u,provide:d,inject:h,created:p,beforeMount:g,mounted:b,beforeUpdate:C,updated:P,activated:q,deactivated:j,beforeDestroy:U,beforeUnmount:Q,destroyed:R,unmounted:E,render:ne,renderTracked:ce,renderTriggered:Ie,errorCaptured:we,serverPrefetch:H,expose:Oe,inheritAttrs:je,components:de,directives:Se,filters:Ne}=t;if(h&&Ap(h,r,null),c)for(const Fe in c){const J=c[Fe];Ke(J)&&(r[Fe]=J.bind(n))}if(o){const Fe=o.call(n,n);ut(Fe)&&(e.data=Ir(Fe))}if(pa=!0,a)for(const Fe in a){const J=a[Fe],W=Ke(J)?J.bind(n,n):Ke(J.get)?J.get.bind(n,n):xn,L=!Ke(J)&&Ke(J.set)?J.set.bind(n):xn,Re=tt({get:W,set:L});Object.defineProperty(r,Fe,{enumerable:!0,configurable:!0,get:()=>Re.value,set:Ce=>Re.value=Ce})}if(u)for(const Fe in u)Lu(u[Fe],r,n,Fe);if(d){const Fe=Ke(d)?d.call(n):d;Reflect.ownKeys(Fe).forEach(J=>{xs(J,Fe[J])})}p&&Kc(p,e,"c");function We(Fe,J){Me(J)?J.forEach(W=>Fe(W.bind(n))):J&&Fe(J.bind(n))}if(We(hp,g),We(In,b),We(mp,C),We(Bu,P),We(dp,q),We(fp,j),We(bp,we),We(vp,ce),We(yp,Ie),We(Ka,Q),We(js,E),We(gp,H),Me(Oe))if(Oe.length){const Fe=e.exposed||(e.exposed={});Oe.forEach(J=>{Object.defineProperty(Fe,J,{get:()=>n[J],set:W=>n[J]=W,enumerable:!0})})}else e.exposed||(e.exposed={});ne&&e.render===xn&&(e.render=ne),je!=null&&(e.inheritAttrs=je),de&&(e.components=de),Se&&(e.directives=Se),H&&Tu(e)}function Ap(e,t,n=xn){Me(e)&&(e=ha(e));for(const r in e){const o=e[r];let a;ut(o)?"default"in o?a=tn(o.from||r,o.default,!0):a=tn(o.from||r):a=tn(o),wt(a)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>a.value,set:c=>a.value=c}):t[r]=a}}function Kc(e,t,n){un(Me(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function Lu(e,t,n,r){let o=r.includes(".")?Ju(n,r):()=>n[r];if(ht(e)){const a=t[e];Ke(a)&&nn(o,a)}else if(Ke(e))nn(o,e.bind(n));else if(ut(e))if(Me(e))e.forEach(a=>Lu(a,t,n,r));else{const a=Ke(e.handler)?e.handler.bind(n):t[e.handler];Ke(a)&&nn(o,a,e)}}function qu(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:o,optionsCache:a,config:{optionMergeStrategies:c}}=e.appContext,u=a.get(t);let d;return u?d=u:!o.length&&!n&&!r?d=t:(d={},o.length&&o.forEach(h=>Bo(d,h,c,!0)),Bo(d,t,c)),ut(t)&&a.set(t,d),d}function Bo(e,t,n,r=!1){const{mixins:o,extends:a}=t;a&&Bo(e,a,n,!0),o&&o.forEach(c=>Bo(e,c,n,!0));for(const c in t)if(!(r&&c==="expose")){const u=Ep[c]||n&&n[c];e[c]=u?u(e[c],t[c]):t[c]}return e}const Ep={data:Vc,props:Hc,emits:Hc,methods:ms,computed:ms,beforeCreate:Kt,created:Kt,beforeMount:Kt,mounted:Kt,beforeUpdate:Kt,updated:Kt,beforeDestroy:Kt,beforeUnmount:Kt,destroyed:Kt,unmounted:Kt,activated:Kt,deactivated:Kt,errorCaptured:Kt,serverPrefetch:Kt,components:ms,directives:ms,watch:Sp,provide:Vc,inject:Ip};function Vc(e,t){return t?e?function(){return xt(Ke(e)?e.call(this,this):e,Ke(t)?t.call(this,this):t)}:t:e}function Ip(e,t){return ms(ha(e),ha(t))}function ha(e){if(Me(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Kt(e,t){return e?[...new Set([].concat(e,t))]:t}function ms(e,t){return e?xt(Object.create(null),e,t):t}function Hc(e,t){return e?Me(e)&&Me(t)?[...new Set([...e,...t])]:xt(Object.create(null),Uc(e),Uc(t??{})):t}function Sp(e,t){if(!e)return t;if(!t)return e;const n=xt(Object.create(null),e);for(const r in t)n[r]=Kt(e[r],t[r]);return n}function ju(){return{app:null,config:{isNativeTag:Gl,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Pp=0;function Op(e,t){return function(r,o=null){Ke(r)||(r=xt({},r)),o!=null&&!ut(o)&&(o=null);const a=ju(),c=new WeakSet,u=[];let d=!1;const h=a.app={_uid:Pp++,_component:r,_props:o,_container:null,_context:a,_instance:null,version:lh,get config(){return a.config},set config(p){},use(p,...g){return c.has(p)||(p&&Ke(p.install)?(c.add(p),p.install(h,...g)):Ke(p)&&(c.add(p),p(h,...g))),h},mixin(p){return a.mixins.includes(p)||a.mixins.push(p),h},component(p,g){return g?(a.components[p]=g,h):a.components[p]},directive(p,g){return g?(a.directives[p]=g,h):a.directives[p]},mount(p,g,b){if(!d){const C=h._ceVNode||ze(r,o);return C.appContext=a,b===!0?b="svg":b===!1&&(b=void 0),e(C,p,b),d=!0,h._container=p,p.__vue_app__=h,ri(C.component)}},onUnmount(p){u.push(p)},unmount(){d&&(un(u,h._instance,16),e(null,h._container),delete h._container.__vue_app__)},provide(p,g){return a.provides[p]=g,h},runWithContext(p){const g=Ar;Ar=h;try{return p()}finally{Ar=g}}};return h}}let Ar=null;function xs(e,t){if(Lt){let n=Lt.provides;const r=Lt.parent&&Lt.parent.provides;r===n&&(n=Lt.provides=Object.create(r)),n[e]=t}}function tn(e,t,n=!1){const r=Sn();if(r||Ar){let o=Ar?Ar._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(o&&e in o)return o[e];if(arguments.length>1)return n&&Ke(t)?t.call(r&&r.proxy):t}}function Rp(){return!!(Sn()||Ar)}const Uu={},Ku=()=>Object.create(Uu),Vu=e=>Object.getPrototypeOf(e)===Uu;function $p(e,t,n,r=!1){const o={},a=Ku();e.propsDefaults=Object.create(null),Hu(e,t,o,a);for(const c in e.propsOptions[0])c in o||(o[c]=void 0);n?e.props=r?o:_u(o):e.type.props?e.props=o:e.props=a,e.attrs=a}function Dp(e,t,n,r){const{props:o,attrs:a,vnode:{patchFlag:c}}=e,u=et(o),[d]=e.propsOptions;let h=!1;if((r||c>0)&&!(c&16)){if(c&8){const p=e.vnode.dynamicProps;for(let g=0;g<p.length;g++){let b=p[g];if(ti(e.emitsOptions,b))continue;const C=t[b];if(d)if(at(a,b))C!==a[b]&&(a[b]=C,h=!0);else{const P=rn(b);o[P]=ma(d,u,P,C,e,!1)}else C!==a[b]&&(a[b]=C,h=!0)}}}else{Hu(e,t,o,a)&&(h=!0);let p;for(const g in u)(!t||!at(t,g)&&((p=Er(g))===g||!at(t,p)))&&(d?n&&(n[g]!==void 0||n[p]!==void 0)&&(o[g]=ma(d,u,g,void 0,e,!0)):delete o[g]);if(a!==u)for(const g in a)(!t||!at(t,g))&&(delete a[g],h=!0)}h&&Mn(e.attrs,"set","")}function Hu(e,t,n,r){const[o,a]=e.propsOptions;let c=!1,u;if(t)for(let d in t){if(vs(d))continue;const h=t[d];let p;o&&at(o,p=rn(d))?!a||!a.includes(p)?n[p]=h:(u||(u={}))[p]=h:ti(e.emitsOptions,d)||(!(d in r)||h!==r[d])&&(r[d]=h,c=!0)}if(a){const d=et(n),h=u||lt;for(let p=0;p<a.length;p++){const g=a[p];n[g]=ma(o,d,g,h[g],e,!at(h,g))}}return c}function ma(e,t,n,r,o,a){const c=e[n];if(c!=null){const u=at(c,"default");if(u&&r===void 0){const d=c.default;if(c.type!==Function&&!c.skipFactory&&Ke(d)){const{propsDefaults:h}=o;if(n in h)r=h[n];else{const p=Us(o);r=h[n]=d.call(null,t),p()}}else r=d;o.ce&&o.ce._setProp(n,r)}c[0]&&(a&&!u?r=!1:c[1]&&(r===""||r===Er(n))&&(r=!0))}return r}const Tp=new WeakMap;function Wu(e,t,n=!1){const r=n?Tp:t.propsCache,o=r.get(e);if(o)return o;const a=e.props,c={},u=[];let d=!1;if(!Ke(e)){const p=g=>{d=!0;const[b,C]=Wu(g,t,!0);xt(c,b),C&&u.push(...C)};!n&&t.mixins.length&&t.mixins.forEach(p),e.extends&&p(e.extends),e.mixins&&e.mixins.forEach(p)}if(!a&&!d)return ut(e)&&r.set(e,Vr),Vr;if(Me(a))for(let p=0;p<a.length;p++){const g=rn(a[p]);Wc(g)&&(c[g]=lt)}else if(a)for(const p in a){const g=rn(p);if(Wc(g)){const b=a[p],C=c[g]=Me(b)||Ke(b)?{type:b}:xt({},b),P=C.type;let q=!1,j=!0;if(Me(P))for(let U=0;U<P.length;++U){const Q=P[U],R=Ke(Q)&&Q.name;if(R==="Boolean"){q=!0;break}else R==="String"&&(j=!1)}else q=Ke(P)&&P.name==="Boolean";C[0]=q,C[1]=j,(q||at(C,"default"))&&u.push(g)}}const h=[c,u];return ut(e)&&r.set(e,h),h}function Wc(e){return e[0]!=="$"&&!vs(e)}const Va=e=>e==="_"||e==="_ctx"||e==="$stable",Ha=e=>Me(e)?e.map(Cn):[Cn(e)],Fp=(e,t,n)=>{if(t._n)return t;const r=ot((...o)=>Ha(t(...o)),n);return r._c=!1,r},zu=(e,t,n)=>{const r=e._ctx;for(const o in e){if(Va(o))continue;const a=e[o];if(Ke(a))t[o]=Fp(o,a,r);else if(a!=null){const c=Ha(a);t[o]=()=>c}}},Qu=(e,t)=>{const n=Ha(t);e.slots.default=()=>n},Yu=(e,t,n)=>{for(const r in t)(n||!Va(r))&&(e[r]=t[r])},Mp=(e,t,n)=>{const r=e.slots=Ku();if(e.vnode.shapeFlag&32){const o=t._;o?(Yu(r,t,n),n&&eu(r,"_",o,!0)):zu(t,r)}else t&&Qu(e,t)},Bp=(e,t,n)=>{const{vnode:r,slots:o}=e;let a=!0,c=lt;if(r.shapeFlag&32){const u=t._;u?n&&u===1?a=!1:Yu(o,t,n):(a=!t.$stable,zu(t,o)),c=t}else t&&(Qu(e,t),c={default:1});if(a)for(const u in o)!Va(u)&&c[u]==null&&delete o[u]},Vt=Jp;function Np(e){return Lp(e)}function Lp(e,t){const n=Qo();n.__VUE__=!0;const{insert:r,remove:o,patchProp:a,createElement:c,createText:u,createComment:d,setText:h,setElementText:p,parentNode:g,nextSibling:b,setScopeId:C=xn,insertStaticContent:P}=e,q=(w,A,N,Z=null,re=null,te=null,me=void 0,pe=null,ue=!!A.dynamicChildren)=>{if(w===A)return;w&&!Ur(w,A)&&(Z=ee(w),Ce(w,re,te,!0),w=null),A.patchFlag===-2&&(ue=!1,A.dynamicChildren=null);const{type:oe,ref:Te,shapeFlag:ge}=A;switch(oe){case ni:j(w,A,N,Z);break;case fn:U(w,A,N,Z);break;case Wi:w==null&&Q(A,N,Z,me);break;case Xe:de(w,A,N,Z,re,te,me,pe,ue);break;default:ge&1?ne(w,A,N,Z,re,te,me,pe,ue):ge&6?Se(w,A,N,Z,re,te,me,pe,ue):(ge&64||ge&128)&&oe.process(w,A,N,Z,re,te,me,pe,ue,Pe)}Te!=null&&re?Cs(Te,w&&w.ref,te,A||w,!A):Te==null&&w&&w.ref!=null&&Cs(w.ref,null,te,w,!0)},j=(w,A,N,Z)=>{if(w==null)r(A.el=u(A.children),N,Z);else{const re=A.el=w.el;A.children!==w.children&&h(re,A.children)}},U=(w,A,N,Z)=>{w==null?r(A.el=d(A.children||""),N,Z):A.el=w.el},Q=(w,A,N,Z)=>{[w.el,w.anchor]=P(w.children,A,N,Z,w.el,w.anchor)},R=({el:w,anchor:A},N,Z)=>{let re;for(;w&&w!==A;)re=b(w),r(w,N,Z),w=re;r(A,N,Z)},E=({el:w,anchor:A})=>{let N;for(;w&&w!==A;)N=b(w),o(w),w=N;o(A)},ne=(w,A,N,Z,re,te,me,pe,ue)=>{A.type==="svg"?me="svg":A.type==="math"&&(me="mathml"),w==null?ce(A,N,Z,re,te,me,pe,ue):H(w,A,re,te,me,pe,ue)},ce=(w,A,N,Z,re,te,me,pe)=>{let ue,oe;const{props:Te,shapeFlag:ge,transition:$e,dirs:Be}=w;if(ue=w.el=c(w.type,te,Te&&Te.is,Te),ge&8?p(ue,w.children):ge&16&&we(w.children,ue,null,Z,re,Hi(w,te),me,pe),Be&&mr(w,null,Z,"created"),Ie(ue,w,w.scopeId,me,Z),Te){for(const Ge in Te)Ge!=="value"&&!vs(Ge)&&a(ue,Ge,null,Te[Ge],te,Z);"value"in Te&&a(ue,"value",null,Te.value,te),(oe=Te.onVnodeBeforeMount)&&bn(oe,Z,w)}Be&&mr(w,null,Z,"beforeMount");const Ve=qp(re,$e);Ve&&$e.beforeEnter(ue),r(ue,A,N),((oe=Te&&Te.onVnodeMounted)||Ve||Be)&&Vt(()=>{oe&&bn(oe,Z,w),Ve&&$e.enter(ue),Be&&mr(w,null,Z,"mounted")},re)},Ie=(w,A,N,Z,re)=>{if(N&&C(w,N),Z)for(let te=0;te<Z.length;te++)C(w,Z[te]);if(re){let te=re.subTree;if(A===te||Zu(te.type)&&(te.ssContent===A||te.ssFallback===A)){const me=re.vnode;Ie(w,me,me.scopeId,me.slotScopeIds,re.parent)}}},we=(w,A,N,Z,re,te,me,pe,ue=0)=>{for(let oe=ue;oe<w.length;oe++){const Te=w[oe]=pe?tr(w[oe]):Cn(w[oe]);q(null,Te,A,N,Z,re,te,me,pe)}},H=(w,A,N,Z,re,te,me)=>{const pe=A.el=w.el;let{patchFlag:ue,dynamicChildren:oe,dirs:Te}=A;ue|=w.patchFlag&16;const ge=w.props||lt,$e=A.props||lt;let Be;if(N&&gr(N,!1),(Be=$e.onVnodeBeforeUpdate)&&bn(Be,N,A,w),Te&&mr(A,w,N,"beforeUpdate"),N&&gr(N,!0),(ge.innerHTML&&$e.innerHTML==null||ge.textContent&&$e.textContent==null)&&p(pe,""),oe?Oe(w.dynamicChildren,oe,pe,N,Z,Hi(A,re),te):me||J(w,A,pe,null,N,Z,Hi(A,re),te,!1),ue>0){if(ue&16)je(pe,ge,$e,N,re);else if(ue&2&&ge.class!==$e.class&&a(pe,"class",null,$e.class,re),ue&4&&a(pe,"style",ge.style,$e.style,re),ue&8){const Ve=A.dynamicProps;for(let Ge=0;Ge<Ve.length;Ge++){const Ze=Ve[Ge],Ct=ge[Ze],At=$e[Ze];(At!==Ct||Ze==="value")&&a(pe,Ze,Ct,At,re,N)}}ue&1&&w.children!==A.children&&p(pe,A.children)}else!me&&oe==null&&je(pe,ge,$e,N,re);((Be=$e.onVnodeUpdated)||Te)&&Vt(()=>{Be&&bn(Be,N,A,w),Te&&mr(A,w,N,"updated")},Z)},Oe=(w,A,N,Z,re,te,me)=>{for(let pe=0;pe<A.length;pe++){const ue=w[pe],oe=A[pe],Te=ue.el&&(ue.type===Xe||!Ur(ue,oe)||ue.shapeFlag&198)?g(ue.el):N;q(ue,oe,Te,null,Z,re,te,me,!0)}},je=(w,A,N,Z,re)=>{if(A!==N){if(A!==lt)for(const te in A)!vs(te)&&!(te in N)&&a(w,te,A[te],null,re,Z);for(const te in N){if(vs(te))continue;const me=N[te],pe=A[te];me!==pe&&te!=="value"&&a(w,te,pe,me,re,Z)}"value"in N&&a(w,"value",A.value,N.value,re)}},de=(w,A,N,Z,re,te,me,pe,ue)=>{const oe=A.el=w?w.el:u(""),Te=A.anchor=w?w.anchor:u("");let{patchFlag:ge,dynamicChildren:$e,slotScopeIds:Be}=A;Be&&(pe=pe?pe.concat(Be):Be),w==null?(r(oe,N,Z),r(Te,N,Z),we(A.children||[],N,Te,re,te,me,pe,ue)):ge>0&&ge&64&&$e&&w.dynamicChildren?(Oe(w.dynamicChildren,$e,N,re,te,me,pe),(A.key!=null||re&&A===re.subTree)&&Wa(w,A,!0)):J(w,A,N,Te,re,te,me,pe,ue)},Se=(w,A,N,Z,re,te,me,pe,ue)=>{A.slotScopeIds=pe,w==null?A.shapeFlag&512?re.ctx.activate(A,N,Z,me,ue):Ne(A,N,Z,re,te,me,ue):nt(w,A,ue)},Ne=(w,A,N,Z,re,te,me)=>{const pe=w.component=nh(w,Z,re);if(Fu(w)&&(pe.ctx.renderer=Pe),rh(pe,!1,me),pe.asyncDep){if(re&&re.registerDep(pe,We,me),!w.el){const ue=pe.subTree=ze(fn);U(null,ue,A,N),w.placeholder=ue.el}}else We(pe,w,A,N,re,te,me)},nt=(w,A,N)=>{const Z=A.component=w.component;if(Yp(w,A,N))if(Z.asyncDep&&!Z.asyncResolved){Fe(Z,A,N);return}else Z.next=A,Z.update();else A.el=w.el,Z.vnode=A},We=(w,A,N,Z,re,te,me)=>{const pe=()=>{if(w.isMounted){let{next:ge,bu:$e,u:Be,parent:Ve,vnode:Ge}=w;{const Et=Gu(w);if(Et){ge&&(ge.el=Ge.el,Fe(w,ge,me)),Et.asyncDep.then(()=>{w.isUnmounted||pe()});return}}let Ze=ge,Ct;gr(w,!1),ge?(ge.el=Ge.el,Fe(w,ge,me)):ge=Ge,$e&&Ao($e),(Ct=ge.props&&ge.props.onVnodeBeforeUpdate)&&bn(Ct,Ve,ge,Ge),gr(w,!0);const At=Qc(w),jt=w.subTree;w.subTree=At,q(jt,At,g(jt.el),ee(jt),w,re,te),ge.el=At.el,Ze===null&&Gp(w,At.el),Be&&Vt(Be,re),(Ct=ge.props&&ge.props.onVnodeUpdated)&&Vt(()=>bn(Ct,Ve,ge,Ge),re)}else{let ge;const{el:$e,props:Be}=A,{bm:Ve,m:Ge,parent:Ze,root:Ct,type:At}=w,jt=zr(A);gr(w,!1),Ve&&Ao(Ve),!jt&&(ge=Be&&Be.onVnodeBeforeMount)&&bn(ge,Ze,A),gr(w,!0);{Ct.ce&&Ct.ce._def.shadowRoot!==!1&&Ct.ce._injectChildStyle(At);const Et=w.subTree=Qc(w);q(null,Et,N,Z,w,re,te),A.el=Et.el}if(Ge&&Vt(Ge,re),!jt&&(ge=Be&&Be.onVnodeMounted)){const Et=A;Vt(()=>bn(ge,Ze,Et),re)}(A.shapeFlag&256||Ze&&zr(Ze.vnode)&&Ze.vnode.shapeFlag&256)&&w.a&&Vt(w.a,re),w.isMounted=!0,A=N=Z=null}};w.scope.on();const ue=w.effect=new iu(pe);w.scope.off();const oe=w.update=ue.run.bind(ue),Te=w.job=ue.runIfDirty.bind(ue);Te.i=w,Te.id=w.uid,ue.scheduler=()=>Ua(Te),gr(w,!0),oe()},Fe=(w,A,N)=>{A.component=w;const Z=w.vnode.props;w.vnode=A,w.next=null,Dp(w,A.props,Z,N),Bp(w,A.children,N),Ln(),Bc(w),qn()},J=(w,A,N,Z,re,te,me,pe,ue=!1)=>{const oe=w&&w.children,Te=w?w.shapeFlag:0,ge=A.children,{patchFlag:$e,shapeFlag:Be}=A;if($e>0){if($e&128){L(oe,ge,N,Z,re,te,me,pe,ue);return}else if($e&256){W(oe,ge,N,Z,re,te,me,pe,ue);return}}Be&8?(Te&16&&mt(oe,re,te),ge!==oe&&p(N,ge)):Te&16?Be&16?L(oe,ge,N,Z,re,te,me,pe,ue):mt(oe,re,te,!0):(Te&8&&p(N,""),Be&16&&we(ge,N,Z,re,te,me,pe,ue))},W=(w,A,N,Z,re,te,me,pe,ue)=>{w=w||Vr,A=A||Vr;const oe=w.length,Te=A.length,ge=Math.min(oe,Te);let $e;for($e=0;$e<ge;$e++){const Be=A[$e]=ue?tr(A[$e]):Cn(A[$e]);q(w[$e],Be,N,null,re,te,me,pe,ue)}oe>Te?mt(w,re,te,!0,!1,ge):we(A,N,Z,re,te,me,pe,ue,ge)},L=(w,A,N,Z,re,te,me,pe,ue)=>{let oe=0;const Te=A.length;let ge=w.length-1,$e=Te-1;for(;oe<=ge&&oe<=$e;){const Be=w[oe],Ve=A[oe]=ue?tr(A[oe]):Cn(A[oe]);if(Ur(Be,Ve))q(Be,Ve,N,null,re,te,me,pe,ue);else break;oe++}for(;oe<=ge&&oe<=$e;){const Be=w[ge],Ve=A[$e]=ue?tr(A[$e]):Cn(A[$e]);if(Ur(Be,Ve))q(Be,Ve,N,null,re,te,me,pe,ue);else break;ge--,$e--}if(oe>ge){if(oe<=$e){const Be=$e+1,Ve=Be<Te?A[Be].el:Z;for(;oe<=$e;)q(null,A[oe]=ue?tr(A[oe]):Cn(A[oe]),N,Ve,re,te,me,pe,ue),oe++}}else if(oe>$e)for(;oe<=ge;)Ce(w[oe],re,te,!0),oe++;else{const Be=oe,Ve=oe,Ge=new Map;for(oe=Ve;oe<=$e;oe++){const gt=A[oe]=ue?tr(A[oe]):Cn(A[oe]);gt.key!=null&&Ge.set(gt.key,oe)}let Ze,Ct=0;const At=$e-Ve+1;let jt=!1,Et=0;const mn=new Array(At);for(oe=0;oe<At;oe++)mn[oe]=0;for(oe=Be;oe<=ge;oe++){const gt=w[oe];if(Ct>=At){Ce(gt,re,te,!0);continue}let Ae;if(gt.key!=null)Ae=Ge.get(gt.key);else for(Ze=Ve;Ze<=$e;Ze++)if(mn[Ze-Ve]===0&&Ur(gt,A[Ze])){Ae=Ze;break}Ae===void 0?Ce(gt,re,te,!0):(mn[Ae-Ve]=oe+1,Ae>=Et?Et=Ae:jt=!0,q(gt,A[Ae],N,null,re,te,me,pe,ue),Ct++)}const Pr=jt?jp(mn):Vr;for(Ze=Pr.length-1,oe=At-1;oe>=0;oe--){const gt=Ve+oe,Ae=A[gt],Un=A[gt+1],gn=gt+1<Te?Un.el||Un.placeholder:Z;mn[oe]===0?q(null,Ae,N,gn,re,te,me,pe,ue):jt&&(Ze<0||oe!==Pr[Ze]?Re(Ae,N,gn,2):Ze--)}}},Re=(w,A,N,Z,re=null)=>{const{el:te,type:me,transition:pe,children:ue,shapeFlag:oe}=w;if(oe&6){Re(w.component.subTree,A,N,Z);return}if(oe&128){w.suspense.move(A,N,Z);return}if(oe&64){me.move(w,A,N,Pe);return}if(me===Xe){r(te,A,N);for(let ge=0;ge<ue.length;ge++)Re(ue[ge],A,N,Z);r(w.anchor,A,N);return}if(me===Wi){R(w,A,N);return}if(Z!==2&&oe&1&&pe)if(Z===0)pe.beforeEnter(te),r(te,A,N),Vt(()=>pe.enter(te),re);else{const{leave:ge,delayLeave:$e,afterLeave:Be}=pe,Ve=()=>{w.ctx.isUnmounted?o(te):r(te,A,N)},Ge=()=>{te._isLeaving&&te[_r](!0),ge(te,()=>{Ve(),Be&&Be()})};$e?$e(te,Ve,Ge):Ge()}else r(te,A,N)},Ce=(w,A,N,Z=!1,re=!1)=>{const{type:te,props:me,ref:pe,children:ue,dynamicChildren:oe,shapeFlag:Te,patchFlag:ge,dirs:$e,cacheIndex:Be}=w;if(ge===-2&&(re=!1),pe!=null&&(Ln(),Cs(pe,null,N,w,!0),qn()),Be!=null&&(A.renderCache[Be]=void 0),Te&256){A.ctx.deactivate(w);return}const Ve=Te&1&&$e,Ge=!zr(w);let Ze;if(Ge&&(Ze=me&&me.onVnodeBeforeUnmount)&&bn(Ze,A,w),Te&6)qt(w.component,N,Z);else{if(Te&128){w.suspense.unmount(N,Z);return}Ve&&mr(w,null,A,"beforeUnmount"),Te&64?w.type.remove(w,A,N,Pe,Z):oe&&!oe.hasOnce&&(te!==Xe||ge>0&&ge&64)?mt(oe,A,N,!1,!0):(te===Xe&&ge&384||!re&&Te&16)&&mt(ue,A,N),Z&&Ye(w)}(Ge&&(Ze=me&&me.onVnodeUnmounted)||Ve)&&Vt(()=>{Ze&&bn(Ze,A,w),Ve&&mr(w,null,A,"unmounted")},N)},Ye=w=>{const{type:A,el:N,anchor:Z,transition:re}=w;if(A===Xe){zt(N,Z);return}if(A===Wi){E(w);return}const te=()=>{o(N),re&&!re.persisted&&re.afterLeave&&re.afterLeave()};if(w.shapeFlag&1&&re&&!re.persisted){const{leave:me,delayLeave:pe}=re,ue=()=>me(N,te);pe?pe(w.el,te,ue):ue()}else te()},zt=(w,A)=>{let N;for(;w!==A;)N=b(w),o(w),w=N;o(A)},qt=(w,A,N)=>{const{bum:Z,scope:re,job:te,subTree:me,um:pe,m:ue,a:oe}=w;zc(ue),zc(oe),Z&&Ao(Z),re.stop(),te&&(te.flags|=8,Ce(me,w,A,N)),pe&&Vt(pe,A),Vt(()=>{w.isUnmounted=!0},A)},mt=(w,A,N,Z=!1,re=!1,te=0)=>{for(let me=te;me<w.length;me++)Ce(w[me],A,N,Z,re)},ee=w=>{if(w.shapeFlag&6)return ee(w.component.subTree);if(w.shapeFlag&128)return w.suspense.next();const A=b(w.anchor||w.el),N=A&&A[Ou];return N?b(N):A};let ke=!1;const Y=(w,A,N)=>{w==null?A._vnode&&Ce(A._vnode,null,null,!0):q(A._vnode||null,w,A,null,null,null,N),A._vnode=w,ke||(ke=!0,Bc(),Iu(),ke=!1)},Pe={p:q,um:Ce,m:Re,r:Ye,mt:Ne,mc:we,pc:J,pbc:Oe,n:ee,o:e};return{render:Y,hydrate:void 0,createApp:Op(Y)}}function Hi({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function gr({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function qp(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Wa(e,t,n=!1){const r=e.children,o=t.children;if(Me(r)&&Me(o))for(let a=0;a<r.length;a++){const c=r[a];let u=o[a];u.shapeFlag&1&&!u.dynamicChildren&&((u.patchFlag<=0||u.patchFlag===32)&&(u=o[a]=tr(o[a]),u.el=c.el),!n&&u.patchFlag!==-2&&Wa(c,u)),u.type===ni&&u.patchFlag!==-1&&(u.el=c.el),u.type===fn&&!u.el&&(u.el=c.el)}}function jp(e){const t=e.slice(),n=[0];let r,o,a,c,u;const d=e.length;for(r=0;r<d;r++){const h=e[r];if(h!==0){if(o=n[n.length-1],e[o]<h){t[r]=o,n.push(r);continue}for(a=0,c=n.length-1;a<c;)u=a+c>>1,e[n[u]]<h?a=u+1:c=u;h<e[n[a]]&&(a>0&&(t[r]=n[a-1]),n[a]=r)}}for(a=n.length,c=n[a-1];a-- >0;)n[a]=c,c=t[c];return n}function Gu(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Gu(t)}function zc(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Up=Symbol.for("v-scx"),Kp=()=>tn(Up);function Xr(e,t){return za(e,null,t)}function nn(e,t,n){return za(e,t,n)}function za(e,t,n=lt){const{immediate:r,deep:o,flush:a,once:c}=n,u=xt({},n),d=t&&r||!t&&a!=="post";let h;if(Ms){if(a==="sync"){const C=Kp();h=C.__watcherHandles||(C.__watcherHandles=[])}else if(!d){const C=()=>{};return C.stop=xn,C.resume=xn,C.pause=xn,C}}const p=Lt;u.call=(C,P,q)=>un(C,p,P,q);let g=!1;a==="post"?u.scheduler=C=>{Vt(C,p&&p.suspense)}:a!=="sync"&&(g=!0,u.scheduler=(C,P)=>{P?C():Ua(C)}),u.augmentJob=C=>{t&&(C.flags|=4),g&&(C.flags|=2,p&&(C.id=p.uid,C.i=p))};const b=ep(e,t,u);return Ms&&(h?h.push(b):d&&b()),b}function Vp(e,t,n){const r=this.proxy,o=ht(e)?e.includes(".")?Ju(r,e):()=>r[e]:e.bind(r,r);let a;Ke(t)?a=t:(a=t.handler,n=t);const c=Us(this),u=za(o,a.bind(r),n);return c(),u}function Ju(e,t){const n=t.split(".");return()=>{let r=e;for(let o=0;o<n.length&&r;o++)r=r[n[o]];return r}}const Hp=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${rn(t)}Modifiers`]||e[`${Er(t)}Modifiers`];function Wp(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||lt;let o=n;const a=t.startsWith("update:"),c=a&&Hp(r,t.slice(7));c&&(c.trim&&(o=n.map(p=>ht(p)?p.trim():p)),c.number&&(o=n.map(Ro)));let u,d=r[u=xo(t)]||r[u=xo(rn(t))];!d&&a&&(d=r[u=xo(Er(t))]),d&&un(d,e,6,o);const h=r[u+"Once"];if(h){if(!e.emitted)e.emitted={};else if(e.emitted[u])return;e.emitted[u]=!0,un(h,e,6,o)}}function Xu(e,t,n=!1){const r=t.emitsCache,o=r.get(e);if(o!==void 0)return o;const a=e.emits;let c={},u=!1;if(!Ke(e)){const d=h=>{const p=Xu(h,t,!0);p&&(u=!0,xt(c,p))};!n&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}return!a&&!u?(ut(e)&&r.set(e,null),null):(Me(a)?a.forEach(d=>c[d]=null):xt(c,a),ut(e)&&r.set(e,c),c)}function ti(e,t){return!e||!Vo(t)?!1:(t=t.slice(2).replace(/Once$/,""),at(e,t[0].toLowerCase()+t.slice(1))||at(e,Er(t))||at(e,t))}function Qc(e){const{type:t,vnode:n,proxy:r,withProxy:o,propsOptions:[a],slots:c,attrs:u,emit:d,render:h,renderCache:p,props:g,data:b,setupState:C,ctx:P,inheritAttrs:q}=e,j=Mo(e);let U,Q;try{if(n.shapeFlag&4){const E=o||r,ne=E;U=Cn(h.call(ne,E,p,g,C,b,P)),Q=u}else{const E=t;U=Cn(E.length>1?E(g,{attrs:u,slots:c,emit:d}):E(g,null)),Q=t.props?u:zp(u)}}catch(E){As.length=0,Xo(E,e,1),U=ze(fn)}let R=U;if(Q&&q!==!1){const E=Object.keys(Q),{shapeFlag:ne}=R;E.length&&ne&7&&(a&&E.some(Pa)&&(Q=Qp(Q,a)),R=ar(R,Q,!1,!0))}return n.dirs&&(R=ar(R,null,!1,!0),R.dirs=R.dirs?R.dirs.concat(n.dirs):n.dirs),n.transition&&Ds(R,n.transition),U=R,Mo(j),U}const zp=e=>{let t;for(const n in e)(n==="class"||n==="style"||Vo(n))&&((t||(t={}))[n]=e[n]);return t},Qp=(e,t)=>{const n={};for(const r in e)(!Pa(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function Yp(e,t,n){const{props:r,children:o,component:a}=e,{props:c,children:u,patchFlag:d}=t,h=a.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&d>=0){if(d&1024)return!0;if(d&16)return r?Yc(r,c,h):!!c;if(d&8){const p=t.dynamicProps;for(let g=0;g<p.length;g++){const b=p[g];if(c[b]!==r[b]&&!ti(h,b))return!0}}}else return(o||u)&&(!u||!u.$stable)?!0:r===c?!1:r?c?Yc(r,c,h):!0:!!c;return!1}function Yc(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let o=0;o<r.length;o++){const a=r[o];if(t[a]!==e[a]&&!ti(n,a))return!0}return!1}function Gp({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const Zu=e=>e.__isSuspense;function Jp(e,t){t&&t.pendingBranch?Me(e)?t.effects.push(...e):t.effects.push(e):rp(e)}const Xe=Symbol.for("v-fgt"),ni=Symbol.for("v-txt"),fn=Symbol.for("v-cmt"),Wi=Symbol.for("v-stc"),As=[];let en=null;function K(e=!1){As.push(en=e?null:[])}function Xp(){As.pop(),en=As[As.length-1]||null}let Ts=1;function Gc(e,t=!1){Ts+=e,e<0&&en&&t&&(en.hasOnce=!0)}function ed(e){return e.dynamicChildren=Ts>0?en||Vr:null,Xp(),Ts>0&&en&&en.push(e),e}function X(e,t,n,r,o,a){return ed(v(e,t,n,r,o,a,!0))}function Pt(e,t,n,r,o){return ed(ze(e,t,n,r,o,!0))}function Fs(e){return e?e.__v_isVNode===!0:!1}function Ur(e,t){return e.type===t.type&&e.key===t.key}const td=({key:e})=>e??null,Io=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?ht(e)||wt(e)||Ke(e)?{i:$t,r:e,k:t,f:!!n}:e:null);function v(e,t=null,n=null,r=0,o=null,a=e===Xe?0:1,c=!1,u=!1){const d={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&td(t),ref:t&&Io(t),scopeId:Pu,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:r,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:$t};return u?(Qa(d,n),a&128&&e.normalize(d)):n&&(d.shapeFlag|=ht(n)?8:16),Ts>0&&!c&&en&&(d.patchFlag>0||a&6)&&d.patchFlag!==32&&en.push(d),d}const ze=Zp;function Zp(e,t=null,n=null,r=0,o=null,a=!1){if((!e||e===wp)&&(e=fn),Fs(e)){const u=ar(e,t,!0);return n&&Qa(u,n),Ts>0&&!a&&en&&(u.shapeFlag&6?en[en.indexOf(e)]=u:en.push(u)),u.patchFlag=-2,u}if(ch(e)&&(e=e.__vccOpts),t){t=nd(t);let{class:u,style:d}=t;u&&!ht(u)&&(t.class=kt(u)),ut(d)&&(La(d)&&!Me(d)&&(d=xt({},d)),t.style=Nn(d))}const c=ht(e)?1:Zu(e)?128:sp(e)?64:ut(e)?4:Ke(e)?2:0;return v(e,t,n,r,o,c,a,!0)}function nd(e){return e?La(e)||Vu(e)?xt({},e):e:null}function ar(e,t,n=!1,r=!1){const{props:o,ref:a,patchFlag:c,children:u,transition:d}=e,h=t?En(o||{},t):o,p={__v_isVNode:!0,__v_skip:!0,type:e.type,props:h,key:h&&td(h),ref:t&&t.ref?n&&a?Me(a)?a.concat(Io(t)):[a,Io(t)]:Io(t):a,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:u,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Xe?c===-1?16:c|16:c,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:d,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&ar(e.ssContent),ssFallback:e.ssFallback&&ar(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return d&&r&&Ds(p,d.clone(p)),p}function Wt(e=" ",t=0){return ze(ni,null,e,t)}function De(e="",t=!1){return t?(K(),Pt(fn,null,e)):ze(fn,null,e)}function Cn(e){return e==null||typeof e=="boolean"?ze(fn):Me(e)?ze(Xe,null,e.slice()):Fs(e)?tr(e):ze(ni,null,String(e))}function tr(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:ar(e)}function Qa(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(Me(t))n=16;else if(typeof t=="object")if(r&65){const o=t.default;o&&(o._c&&(o._d=!1),Qa(e,o()),o._c&&(o._d=!0));return}else{n=32;const o=t._;!o&&!Vu(t)?t._ctx=$t:o===3&&$t&&($t.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Ke(t)?(t={default:t,_ctx:$t},n=32):(t=String(t),r&64?(n=16,t=[Wt(t)]):n=8);e.children=t,e.shapeFlag|=n}function En(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const o in r)if(o==="class")t.class!==r.class&&(t.class=kt([t.class,r.class]));else if(o==="style")t.style=Nn([t.style,r.style]);else if(Vo(o)){const a=t[o],c=r[o];c&&a!==c&&!(Me(a)&&a.includes(c))&&(t[o]=a?[].concat(a,c):c)}else o!==""&&(t[o]=r[o])}return t}function bn(e,t,n,r=null){un(e,t,7,[n,r])}const eh=ju();let th=0;function nh(e,t,n){const r=e.type,o=(t?t.appContext:e.appContext)||eh,a={uid:th++,vnode:e,type:r,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new su(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Wu(r,o),emitsOptions:Xu(r,o),emit:null,emitted:null,propsDefaults:lt,inheritAttrs:r.inheritAttrs,ctx:lt,data:lt,props:lt,attrs:lt,slots:lt,refs:lt,setupState:lt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=Wp.bind(null,a),e.ce&&e.ce(a),a}let Lt=null;const Sn=()=>Lt||$t;let No,ga;{const e=Qo(),t=(n,r)=>{let o;return(o=e[n])||(o=e[n]=[]),o.push(r),a=>{o.length>1?o.forEach(c=>c(a)):o[0](a)}};No=t("__VUE_INSTANCE_SETTERS__",n=>Lt=n),ga=t("__VUE_SSR_SETTERS__",n=>Ms=n)}const Us=e=>{const t=Lt;return No(e),e.scope.on(),()=>{e.scope.off(),No(t)}},Jc=()=>{Lt&&Lt.scope.off(),No(null)};function rd(e){return e.vnode.shapeFlag&4}let Ms=!1;function rh(e,t=!1,n=!1){t&&ga(t);const{props:r,children:o}=e.vnode,a=rd(e);$p(e,r,a,t),Mp(e,o,n||t);const c=a?sh(e,t):void 0;return t&&ga(!1),c}function sh(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,kp);const{setup:r}=n;if(r){Ln();const o=e.setupContext=r.length>1?ih(e):null,a=Us(e),c=qs(r,e,0,[e.props,o]),u=Jl(c);if(qn(),a(),(u||e.sp)&&!zr(e)&&Tu(e),u){if(c.then(Jc,Jc),t)return c.then(d=>{Xc(e,d)}).catch(d=>{Xo(d,e,0)});e.asyncDep=c}else Xc(e,c)}else sd(e)}function Xc(e,t,n){Ke(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:ut(t)&&(e.setupState=xu(t)),sd(e)}function sd(e,t,n){const r=e.type;e.render||(e.render=r.render||xn);{const o=Us(e);Ln();try{xp(e)}finally{qn(),o()}}}const oh={get(e,t){return Nt(e,"get",""),e[t]}};function ih(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,oh),slots:e.slots,emit:e.emit,expose:t}}function ri(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(xu(qa(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in ks)return ks[n](e)},has(t,n){return n in t||n in ks}})):e.proxy}function ah(e,t=!0){return Ke(e)?e.displayName||e.name:e.name||t&&e.__name}function ch(e){return Ke(e)&&"__vccOpts"in e}const tt=(e,t)=>Xf(e,t,Ms);function Qr(e,t,n){const r=arguments.length;return r===2?ut(t)&&!Me(t)?Fs(t)?ze(e,null,[t]):ze(e,t):ze(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Fs(n)&&(n=[n]),ze(e,t,n))}const lh="3.5.20";/**
* @vue/runtime-dom v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ya;const Zc=typeof window<"u"&&window.trustedTypes;if(Zc)try{ya=Zc.createPolicy("vue",{createHTML:e=>e})}catch{}const od=ya?e=>ya.createHTML(e):e=>e,uh="http://www.w3.org/2000/svg",dh="http://www.w3.org/1998/Math/MathML",Fn=typeof document<"u"?document:null,el=Fn&&Fn.createElement("template"),fh={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const o=t==="svg"?Fn.createElementNS(uh,e):t==="mathml"?Fn.createElementNS(dh,e):n?Fn.createElement(e,{is:n}):Fn.createElement(e);return e==="select"&&r&&r.multiple!=null&&o.setAttribute("multiple",r.multiple),o},createText:e=>Fn.createTextNode(e),createComment:e=>Fn.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Fn.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,o,a){const c=n?n.previousSibling:t.lastChild;if(o&&(o===a||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),n),!(o===a||!(o=o.nextSibling)););else{el.innerHTML=od(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const u=el.content;if(r==="svg"||r==="mathml"){const d=u.firstChild;for(;d.firstChild;)u.appendChild(d.firstChild);u.removeChild(d)}t.insertBefore(u,n)}return[c?c.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},Yn="transition",fs="animation",Zr=Symbol("_vtc"),id={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},ph=xt({},cp,id),yr=(e,t=[])=>{Me(e)?e.forEach(n=>n(...t)):e&&e(...t)},tl=e=>e?Me(e)?e.some(t=>t.length>1):e.length>1:!1;function hh(e){const t={};for(const de in e)de in id||(t[de]=e[de]);if(e.css===!1)return t;const{name:n="v",type:r,duration:o,enterFromClass:a=`${n}-enter-from`,enterActiveClass:c=`${n}-enter-active`,enterToClass:u=`${n}-enter-to`,appearFromClass:d=a,appearActiveClass:h=c,appearToClass:p=u,leaveFromClass:g=`${n}-leave-from`,leaveActiveClass:b=`${n}-leave-active`,leaveToClass:C=`${n}-leave-to`}=e,P=mh(o),q=P&&P[0],j=P&&P[1],{onBeforeEnter:U,onEnter:Q,onEnterCancelled:R,onLeave:E,onLeaveCancelled:ne,onBeforeAppear:ce=U,onAppear:Ie=Q,onAppearCancelled:we=R}=t,H=(de,Se,Ne,nt)=>{de._enterCancelled=nt,Jn(de,Se?p:u),Jn(de,Se?h:c),Ne&&Ne()},Oe=(de,Se)=>{de._isLeaving=!1,Jn(de,g),Jn(de,C),Jn(de,b),Se&&Se()},je=de=>(Se,Ne)=>{const nt=de?Ie:Q,We=()=>H(Se,de,Ne);yr(nt,[Se,We]),nl(()=>{Jn(Se,de?d:a),_n(Se,de?p:u),tl(nt)||rl(Se,r,q,We)})};return xt(t,{onBeforeEnter(de){yr(U,[de]),_n(de,a),_n(de,c)},onBeforeAppear(de){yr(ce,[de]),_n(de,d),_n(de,h)},onEnter:je(!1),onAppear:je(!0),onLeave(de,Se){de._isLeaving=!0;const Ne=()=>Oe(de,Se);_n(de,g),de._enterCancelled?(_n(de,b),va()):(va(),_n(de,b)),nl(()=>{de._isLeaving&&(Jn(de,g),_n(de,C),tl(E)||rl(de,r,j,Ne))}),yr(E,[de,Ne])},onEnterCancelled(de){H(de,!1,void 0,!0),yr(R,[de])},onAppearCancelled(de){H(de,!0,void 0,!0),yr(we,[de])},onLeaveCancelled(de){Oe(de),yr(ne,[de])}})}function mh(e){if(e==null)return null;if(ut(e))return[zi(e.enter),zi(e.leave)];{const t=zi(e);return[t,t]}}function zi(e){return vf(e)}function _n(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[Zr]||(e[Zr]=new Set)).add(t)}function Jn(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.remove(r));const n=e[Zr];n&&(n.delete(t),n.size||(e[Zr]=void 0))}function nl(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let gh=0;function rl(e,t,n,r){const o=e._endId=++gh,a=()=>{o===e._endId&&r()};if(n!=null)return setTimeout(a,n);const{type:c,timeout:u,propCount:d}=ad(e,t);if(!c)return r();const h=c+"end";let p=0;const g=()=>{e.removeEventListener(h,b),a()},b=C=>{C.target===e&&++p>=d&&g()};setTimeout(()=>{p<d&&g()},u+1),e.addEventListener(h,b)}function ad(e,t){const n=window.getComputedStyle(e),r=P=>(n[P]||"").split(", "),o=r(`${Yn}Delay`),a=r(`${Yn}Duration`),c=sl(o,a),u=r(`${fs}Delay`),d=r(`${fs}Duration`),h=sl(u,d);let p=null,g=0,b=0;t===Yn?c>0&&(p=Yn,g=c,b=a.length):t===fs?h>0&&(p=fs,g=h,b=d.length):(g=Math.max(c,h),p=g>0?c>h?Yn:fs:null,b=p?p===Yn?a.length:d.length:0);const C=p===Yn&&/\b(transform|all)(,|$)/.test(r(`${Yn}Property`).toString());return{type:p,timeout:g,propCount:b,hasTransform:C}}function sl(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,r)=>ol(n)+ol(e[r])))}function ol(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function va(){return document.body.offsetHeight}function yh(e,t,n){const r=e[Zr];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Lo=Symbol("_vod"),cd=Symbol("_vsh"),vh={name:"show",beforeMount(e,{value:t},{transition:n}){e[Lo]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):ps(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:r}){!t!=!n&&(r?t?(r.beforeEnter(e),ps(e,!0),r.enter(e)):r.leave(e,()=>{ps(e,!1)}):ps(e,t))},beforeUnmount(e,{value:t}){ps(e,t)}};function ps(e,t){e.style.display=t?e[Lo]:"none",e[cd]=!t}const bh=Symbol(""),_h=/(^|;)\s*display\s*:/;function wh(e,t,n){const r=e.style,o=ht(n);let a=!1;if(n&&!o){if(t)if(ht(t))for(const c of t.split(";")){const u=c.slice(0,c.indexOf(":")).trim();n[u]==null&&So(r,u,"")}else for(const c in t)n[c]==null&&So(r,c,"");for(const c in n)c==="display"&&(a=!0),So(r,c,n[c])}else if(o){if(t!==n){const c=r[bh];c&&(n+=";"+c),r.cssText=n,a=_h.test(n)}}else t&&e.removeAttribute("style");Lo in e&&(e[Lo]=a?r.display:"",e[cd]&&(r.display="none"))}const il=/\s*!important$/;function So(e,t,n){if(Me(n))n.forEach(r=>So(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=Ch(e,t);il.test(n)?e.setProperty(Er(r),n.replace(il,""),"important"):e[r]=n}}const al=["Webkit","Moz","ms"],Qi={};function Ch(e,t){const n=Qi[t];if(n)return n;let r=rn(t);if(r!=="filter"&&r in e)return Qi[t]=r;r=zo(r);for(let o=0;o<al.length;o++){const a=al[o]+r;if(a in e)return Qi[t]=a}return t}const cl="http://www.w3.org/1999/xlink";function ll(e,t,n,r,o,a=Af(t)){r&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(cl,t.slice(6,t.length)):e.setAttributeNS(cl,t,n):n==null||a&&!tu(n)?e.removeAttribute(t):e.setAttribute(t,a?"":ln(n)?String(n):n)}function ul(e,t,n,r,o){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?od(n):n);return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){const u=a==="OPTION"?e.getAttribute("value")||"":e.value,d=n==null?e.type==="checkbox"?"on":"":String(n);(u!==d||!("_value"in e))&&(e.value=d),n==null&&e.removeAttribute(t),e._value=n;return}let c=!1;if(n===""||n==null){const u=typeof e[t];u==="boolean"?n=tu(n):n==null&&u==="string"?(n="",c=!0):u==="number"&&(n=0,c=!0)}try{e[t]=n}catch{}c&&e.removeAttribute(o||t)}function Cr(e,t,n,r){e.addEventListener(t,n,r)}function kh(e,t,n,r){e.removeEventListener(t,n,r)}const dl=Symbol("_vei");function xh(e,t,n,r,o=null){const a=e[dl]||(e[dl]={}),c=a[t];if(r&&c)c.value=r;else{const[u,d]=Ah(t);if(r){const h=a[t]=Sh(r,o);Cr(e,u,h,d)}else c&&(kh(e,u,c,d),a[t]=void 0)}}const fl=/(?:Once|Passive|Capture)$/;function Ah(e){let t;if(fl.test(e)){t={};let r;for(;r=e.match(fl);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Er(e.slice(2)),t]}let Yi=0;const Eh=Promise.resolve(),Ih=()=>Yi||(Eh.then(()=>Yi=0),Yi=Date.now());function Sh(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;un(Ph(r,n.value),t,5,[r])};return n.value=e,n.attached=Ih(),n}function Ph(e,t){if(Me(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>o=>!o._stopped&&r&&r(o))}else return t}const pl=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Oh=(e,t,n,r,o,a)=>{const c=o==="svg";t==="class"?yh(e,r,c):t==="style"?wh(e,n,r):Vo(t)?Pa(t)||xh(e,t,n,r,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Rh(e,t,r,c))?(ul(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&ll(e,t,r,c,a,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!ht(r))?ul(e,rn(t),r,a,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),ll(e,t,r,c))};function Rh(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&pl(t)&&Ke(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const o=e.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return pl(t)&&ht(n)?!1:t in e}const ld=new WeakMap,ud=new WeakMap,qo=Symbol("_moveCb"),hl=Symbol("_enterCb"),$h=e=>(delete e.props.mode,e),Dh=$h({name:"TransitionGroup",props:xt({},ph,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=Sn(),r=ap();let o,a;return Bu(()=>{if(!o.length)return;const c=e.moveClass||`${e.name||"v"}-move`;if(!Nh(o[0].el,n.vnode.el,c)){o=[];return}o.forEach(Fh),o.forEach(Mh);const u=o.filter(Bh);va(),u.forEach(d=>{const h=d.el,p=h.style;_n(h,c),p.transform=p.webkitTransform=p.transitionDuration="";const g=h[qo]=b=>{b&&b.target!==h||(!b||/transform$/.test(b.propertyName))&&(h.removeEventListener("transitionend",g),h[qo]=null,Jn(h,c))};h.addEventListener("transitionend",g)}),o=[]}),()=>{const c=et(e),u=hh(c);let d=c.tag||Xe;if(o=[],a)for(let h=0;h<a.length;h++){const p=a[h];p.el&&p.el instanceof Element&&(o.push(p),Ds(p,da(p,u,r,n)),ld.set(p,p.el.getBoundingClientRect()))}a=t.default?Du(t.default()):[];for(let h=0;h<a.length;h++){const p=a[h];p.key!=null&&Ds(p,da(p,u,r,n))}return ze(d,null,a)}}}),Th=Dh;function Fh(e){const t=e.el;t[qo]&&t[qo](),t[hl]&&t[hl]()}function Mh(e){ud.set(e,e.el.getBoundingClientRect())}function Bh(e){const t=ld.get(e),n=ud.get(e),r=t.left-n.left,o=t.top-n.top;if(r||o){const a=e.el.style;return a.transform=a.webkitTransform=`translate(${r}px,${o}px)`,a.transitionDuration="0s",e}}function Nh(e,t,n){const r=e.cloneNode(),o=e[Zr];o&&o.forEach(u=>{u.split(/\s+/).forEach(d=>d&&r.classList.remove(d))}),n.split(/\s+/).forEach(u=>u&&r.classList.add(u)),r.style.display="none";const a=t.nodeType===1?t:t.parentNode;a.appendChild(r);const{hasTransform:c}=ad(r);return a.removeChild(r),c}const jo=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Me(t)?n=>Ao(t,n):t};function Lh(e){e.target.composing=!0}function ml(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Yr=Symbol("_assign"),ba={created(e,{modifiers:{lazy:t,trim:n,number:r}},o){e[Yr]=jo(o);const a=r||o.props&&o.props.type==="number";Cr(e,t?"change":"input",c=>{if(c.target.composing)return;let u=e.value;n&&(u=u.trim()),a&&(u=Ro(u)),e[Yr](u)}),n&&Cr(e,"change",()=>{e.value=e.value.trim()}),t||(Cr(e,"compositionstart",Lh),Cr(e,"compositionend",ml),Cr(e,"change",ml))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:r,trim:o,number:a}},c){if(e[Yr]=jo(c),e.composing)return;const u=(a||e.type==="number")&&!/^0\d/.test(e.value)?Ro(e.value):e.value,d=t??"";u!==d&&(document.activeElement===e&&e.type!=="range"&&(r&&t===n||o&&e.value.trim()===d)||(e.value=d))}},qh={deep:!0,created(e,{value:t,modifiers:{number:n}},r){const o=Ho(t);Cr(e,"change",()=>{const a=Array.prototype.filter.call(e.options,c=>c.selected).map(c=>n?Ro(Uo(c)):Uo(c));e[Yr](e.multiple?o?new Set(a):a:a[0]),e._assigning=!0,dn(()=>{e._assigning=!1})}),e[Yr]=jo(r)},mounted(e,{value:t}){gl(e,t)},beforeUpdate(e,t,n){e[Yr]=jo(n)},updated(e,{value:t}){e._assigning||gl(e,t)}};function gl(e,t){const n=e.multiple,r=Me(t);if(!(n&&!r&&!Ho(t))){for(let o=0,a=e.options.length;o<a;o++){const c=e.options[o],u=Uo(c);if(n)if(r){const d=typeof u;d==="string"||d==="number"?c.selected=t.some(h=>String(h)===String(u)):c.selected=If(t,u)>-1}else c.selected=t.has(u);else if(Yo(Uo(c),t)){e.selectedIndex!==o&&(e.selectedIndex=o);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Uo(e){return"_value"in e?e._value:e.value}const jh=xt({patchProp:Oh},fh);let yl;function Uh(){return yl||(yl=Np(jh))}const Kh=((...e)=>{const t=Uh().createApp(...e),{mount:n}=t;return t.mount=r=>{const o=Hh(r);if(!o)return;const a=t._component;!Ke(a)&&!a.render&&!a.template&&(a.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const c=n(o,!1,Vh(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),c},t});function Vh(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Hh(e){return ht(e)?document.querySelector(e):e}const Wh="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%201024%201024'%20width='1024'%20height='1024'%3e%3cdefs%3e%3clinearGradient%20id='bgGrad'%20x1='0'%20y1='0'%20x2='1'%20y2='1'%3e%3cstop%20offset='0%25'%20stop-color='%23137ef2'/%3e%3cstop%20offset='100%25'%20stop-color='%235cb5f9'/%3e%3c/linearGradient%3e%3c!--%20Subtle%20soft%20shadow%20for%20floating%20cards%20--%3e%3cfilter%20id='softShadow'%20x='-20%25'%20y='-20%25'%20width='140%25'%20height='140%25'%3e%3cfeDropShadow%20dx='0'%20dy='14'%20stdDeviation='18'%20flood-color='%23000000'%20flood-opacity='0.22'/%3e%3c/filter%3e%3cfilter%20id='pageShadow'%20x='-20%25'%20y='-20%25'%20width='140%25'%20height='140%25'%3e%3cfeDropShadow%20dx='0'%20dy='10'%20stdDeviation='12'%20flood-color='%23000000'%20flood-opacity='0.18'/%3e%3c/filter%3e%3cfilter%20id='coinShadow'%20x='-20%25'%20y='-20%25'%20width='140%25'%20height='140%25'%3e%3cfeDropShadow%20dx='0'%20dy='10'%20stdDeviation='10'%20flood-color='%23000000'%20flood-opacity='0.25'/%3e%3c/filter%3e%3clinearGradient%20id='coinGrad'%20x1='0'%20y1='0'%20x2='0'%20y2='1'%3e%3cstop%20offset='0%25'%20stop-color='%23ffc02e'/%3e%3cstop%20offset='100%25'%20stop-color='%23ffaa19'/%3e%3c/linearGradient%3e%3clinearGradient%20id='coinRingGrad'%20x1='0'%20y1='0'%20x2='0'%20y2='1'%3e%3cstop%20offset='0%25'%20stop-color='%23FFC83A'/%3e%3cstop%20offset='100%25'%20stop-color='%23E59200'/%3e%3c/linearGradient%3e%3c/defs%3e%3c!--%20Rounded%20square%20background%20--%3e%3crect%20x='72'%20y='72'%20width='880'%20height='880'%20rx='220'%20fill='url(%23bgGrad)'/%3e%3c!--%20Back%20pages%20(slightly%20tilted)%20--%3e%3cg%20filter='url(%23softShadow)'%3e%3crect%20x='340'%20y='210'%20width='460'%20height='560'%20rx='42'%20fill='%23DDEBFF'%20opacity='0.9'%20transform='rotate(18%20750%20480)'/%3e%3crect%20x='300'%20y='230'%20width='470'%20height='560'%20rx='46'%20fill='%23EAF3FF'%20opacity='0.95'%20transform='rotate(12%20715%20490)'/%3e%3c/g%3e%3c!--%20Main%20notebook%20page%20--%3e%3cg%20filter='url(%23pageShadow)'%3e%3crect%20id='page'%20x='260'%20y='240'%20width='520'%20height='560'%20rx='54'%20fill='%23FFFFFF'/%3e%3c!--%20Inner%20card%20area%20--%3e%3crect%20x='356'%20y='322'%20width='330'%20height='420'%20rx='34'%20fill='%23EDEFF2'/%3e%3c/g%3e%3c!--%20Binder%20rings%20--%3e%3cg%3e%3ccircle%20cx='260'%20cy='360'%20r='34'%20fill='%232B2F38'/%3e%3ccircle%20cx='260'%20cy='520'%20r='34'%20fill='%232B2F38'/%3e%3ccircle%20cx='260'%20cy='680'%20r='34'%20fill='%232B2F38'/%3e%3c!--%20little%20highlights%20--%3e%3ccircle%20cx='248'%20cy='350'%20r='10'%20fill='%23FFFFFF'%20opacity='0.35'/%3e%3ccircle%20cx='248'%20cy='510'%20r='10'%20fill='%23FFFFFF'%20opacity='0.35'/%3e%3ccircle%20cx='248'%20cy='670'%20r='10'%20fill='%23FFFFFF'%20opacity='0.35'/%3e%3c/g%3e%3c!--%20Gold%20checkmark%20coin%20--%3e%3cg%20filter='url(%23coinShadow)'%3e%3c!--%20ring%20--%3e%3ccircle%20cx='690'%20cy='680'%20r='148'%20fill='url(%23coinRingGrad)'/%3e%3ccircle%20cx='690'%20cy='680'%20r='112'%20fill='url(%23coinGrad)'/%3e%3c!--%20check%20--%3e%3cg%20transform='translate(10,60)'%3e%3cpath%20d='M635%20683%20l-36%20-36%20a18%2018%200%200%201%2025%20-25%20l25%2025%2072%20-72%20a18%2018%200%201%201%2025%2025%20l-84%2084%20a18%2018%200%200%201%20-27%200z'%20fill='%23FFFFFF'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e";/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const Kr=typeof document<"u";function dd(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function zh(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&dd(e.default)}const it=Object.assign;function Gi(e,t){const n={};for(const r in t){const o=t[r];n[r]=pn(o)?o.map(e):e(o)}return n}const Es=()=>{},pn=Array.isArray,fd=/#/g,Qh=/&/g,Yh=/\//g,Gh=/=/g,Jh=/\?/g,pd=/\+/g,Xh=/%5B/g,Zh=/%5D/g,hd=/%5E/g,em=/%60/g,md=/%7B/g,tm=/%7C/g,gd=/%7D/g,nm=/%20/g;function Ya(e){return encodeURI(""+e).replace(tm,"|").replace(Xh,"[").replace(Zh,"]")}function rm(e){return Ya(e).replace(md,"{").replace(gd,"}").replace(hd,"^")}function _a(e){return Ya(e).replace(pd,"%2B").replace(nm,"+").replace(fd,"%23").replace(Qh,"%26").replace(em,"`").replace(md,"{").replace(gd,"}").replace(hd,"^")}function sm(e){return _a(e).replace(Gh,"%3D")}function om(e){return Ya(e).replace(fd,"%23").replace(Jh,"%3F")}function im(e){return e==null?"":om(e).replace(Yh,"%2F")}function Bs(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const am=/\/$/,cm=e=>e.replace(am,"");function Ji(e,t,n="/"){let r,o={},a="",c="";const u=t.indexOf("#");let d=t.indexOf("?");return u<d&&u>=0&&(d=-1),d>-1&&(r=t.slice(0,d),a=t.slice(d+1,u>-1?u:t.length),o=e(a)),u>-1&&(r=r||t.slice(0,u),c=t.slice(u,t.length)),r=fm(r??t,n),{fullPath:r+(a&&"?")+a+c,path:r,query:o,hash:Bs(c)}}function lm(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function vl(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function um(e,t,n){const r=t.matched.length-1,o=n.matched.length-1;return r>-1&&r===o&&es(t.matched[r],n.matched[o])&&yd(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function es(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function yd(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!dm(e[n],t[n]))return!1;return!0}function dm(e,t){return pn(e)?bl(e,t):pn(t)?bl(t,e):e===t}function bl(e,t){return pn(t)?e.length===t.length&&e.every((n,r)=>n===t[r]):e.length===1&&e[0]===t}function fm(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/"),o=r[r.length-1];(o===".."||o===".")&&r.push("");let a=n.length-1,c,u;for(c=0;c<r.length;c++)if(u=r[c],u!==".")if(u==="..")a>1&&a--;else break;return n.slice(0,a).join("/")+"/"+r.slice(c).join("/")}const Gn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Ns;(function(e){e.pop="pop",e.push="push"})(Ns||(Ns={}));var Is;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Is||(Is={}));function pm(e){if(!e)if(Kr){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),cm(e)}const hm=/^[^#]+#/;function mm(e,t){return e.replace(hm,"#")+t}function gm(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const si=()=>({left:window.scrollX,top:window.scrollY});function ym(e){let t;if("el"in e){const n=e.el,r=typeof n=="string"&&n.startsWith("#"),o=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!o)return;t=gm(o,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function _l(e,t){return(history.state?history.state.position-t:-1)+e}const wa=new Map;function vm(e,t){wa.set(e,t)}function bm(e){const t=wa.get(e);return wa.delete(e),t}let _m=()=>location.protocol+"//"+location.host;function vd(e,t){const{pathname:n,search:r,hash:o}=t,a=e.indexOf("#");if(a>-1){let u=o.includes(e.slice(a))?e.slice(a).length:1,d=o.slice(u);return d[0]!=="/"&&(d="/"+d),vl(d,"")}return vl(n,e)+r+o}function wm(e,t,n,r){let o=[],a=[],c=null;const u=({state:b})=>{const C=vd(e,location),P=n.value,q=t.value;let j=0;if(b){if(n.value=C,t.value=b,c&&c===P){c=null;return}j=q?b.position-q.position:0}else r(C);o.forEach(U=>{U(n.value,P,{delta:j,type:Ns.pop,direction:j?j>0?Is.forward:Is.back:Is.unknown})})};function d(){c=n.value}function h(b){o.push(b);const C=()=>{const P=o.indexOf(b);P>-1&&o.splice(P,1)};return a.push(C),C}function p(){const{history:b}=window;b.state&&b.replaceState(it({},b.state,{scroll:si()}),"")}function g(){for(const b of a)b();a=[],window.removeEventListener("popstate",u),window.removeEventListener("beforeunload",p)}return window.addEventListener("popstate",u),window.addEventListener("beforeunload",p,{passive:!0}),{pauseListeners:d,listen:h,destroy:g}}function wl(e,t,n,r=!1,o=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:o?si():null}}function Cm(e){const{history:t,location:n}=window,r={value:vd(e,n)},o={value:t.state};o.value||a(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function a(d,h,p){const g=e.indexOf("#"),b=g>-1?(n.host&&document.querySelector("base")?e:e.slice(g))+d:_m()+e+d;try{t[p?"replaceState":"pushState"](h,"",b),o.value=h}catch(C){console.error(C),n[p?"replace":"assign"](b)}}function c(d,h){const p=it({},t.state,wl(o.value.back,d,o.value.forward,!0),h,{position:o.value.position});a(d,p,!0),r.value=d}function u(d,h){const p=it({},o.value,t.state,{forward:d,scroll:si()});a(p.current,p,!0);const g=it({},wl(r.value,d,null),{position:p.position+1},h);a(d,g,!1),r.value=d}return{location:r,state:o,push:u,replace:c}}function km(e){e=pm(e);const t=Cm(e),n=wm(e,t.state,t.location,t.replace);function r(a,c=!0){c||n.pauseListeners(),history.go(a)}const o=it({location:"",base:e,go:r,createHref:mm.bind(null,e)},t,n);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>t.state.value}),o}function xm(e){return typeof e=="string"||e&&typeof e=="object"}function bd(e){return typeof e=="string"||typeof e=="symbol"}const _d=Symbol("");var Cl;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(Cl||(Cl={}));function ts(e,t){return it(new Error,{type:e,[_d]:!0},t)}function Dn(e,t){return e instanceof Error&&_d in e&&(t==null||!!(e.type&t))}const kl="[^/]+?",Am={sensitive:!1,strict:!1,start:!0,end:!0},Em=/[.+*?^${}()[\]/\\]/g;function Im(e,t){const n=it({},Am,t),r=[];let o=n.start?"^":"";const a=[];for(const h of e){const p=h.length?[]:[90];n.strict&&!h.length&&(o+="/");for(let g=0;g<h.length;g++){const b=h[g];let C=40+(n.sensitive?.25:0);if(b.type===0)g||(o+="/"),o+=b.value.replace(Em,"\\$&"),C+=40;else if(b.type===1){const{value:P,repeatable:q,optional:j,regexp:U}=b;a.push({name:P,repeatable:q,optional:j});const Q=U||kl;if(Q!==kl){C+=10;try{new RegExp(`(${Q})`)}catch(E){throw new Error(`Invalid custom RegExp for param "${P}" (${Q}): `+E.message)}}let R=q?`((?:${Q})(?:/(?:${Q}))*)`:`(${Q})`;g||(R=j&&h.length<2?`(?:/${R})`:"/"+R),j&&(R+="?"),o+=R,C+=20,j&&(C+=-8),q&&(C+=-20),Q===".*"&&(C+=-50)}p.push(C)}r.push(p)}if(n.strict&&n.end){const h=r.length-1;r[h][r[h].length-1]+=.7000000000000001}n.strict||(o+="/?"),n.end?o+="$":n.strict&&!o.endsWith("/")&&(o+="(?:/|$)");const c=new RegExp(o,n.sensitive?"":"i");function u(h){const p=h.match(c),g={};if(!p)return null;for(let b=1;b<p.length;b++){const C=p[b]||"",P=a[b-1];g[P.name]=C&&P.repeatable?C.split("/"):C}return g}function d(h){let p="",g=!1;for(const b of e){(!g||!p.endsWith("/"))&&(p+="/"),g=!1;for(const C of b)if(C.type===0)p+=C.value;else if(C.type===1){const{value:P,repeatable:q,optional:j}=C,U=P in h?h[P]:"";if(pn(U)&&!q)throw new Error(`Provided param "${P}" is an array but it is not repeatable (* or + modifiers)`);const Q=pn(U)?U.join("/"):U;if(!Q)if(j)b.length<2&&(p.endsWith("/")?p=p.slice(0,-1):g=!0);else throw new Error(`Missing required param "${P}"`);p+=Q}}return p||"/"}return{re:c,score:r,keys:a,parse:u,stringify:d}}function Sm(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function wd(e,t){let n=0;const r=e.score,o=t.score;for(;n<r.length&&n<o.length;){const a=Sm(r[n],o[n]);if(a)return a;n++}if(Math.abs(o.length-r.length)===1){if(xl(r))return 1;if(xl(o))return-1}return o.length-r.length}function xl(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const Pm={type:0,value:""},Om=/[a-zA-Z0-9_]/;function Rm(e){if(!e)return[[]];if(e==="/")return[[Pm]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(C){throw new Error(`ERR (${n})/"${h}": ${C}`)}let n=0,r=n;const o=[];let a;function c(){a&&o.push(a),a=[]}let u=0,d,h="",p="";function g(){h&&(n===0?a.push({type:0,value:h}):n===1||n===2||n===3?(a.length>1&&(d==="*"||d==="+")&&t(`A repeatable param (${h}) must be alone in its segment. eg: '/:ids+.`),a.push({type:1,value:h,regexp:p,repeatable:d==="*"||d==="+",optional:d==="*"||d==="?"})):t("Invalid state to consume buffer"),h="")}function b(){h+=d}for(;u<e.length;){if(d=e[u++],d==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:d==="/"?(h&&g(),c()):d===":"?(g(),n=1):b();break;case 4:b(),n=r;break;case 1:d==="("?n=2:Om.test(d)?b():(g(),n=0,d!=="*"&&d!=="?"&&d!=="+"&&u--);break;case 2:d===")"?p[p.length-1]=="\\"?p=p.slice(0,-1)+d:n=3:p+=d;break;case 3:g(),n=0,d!=="*"&&d!=="?"&&d!=="+"&&u--,p="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${h}"`),g(),c(),o}function $m(e,t,n){const r=Im(Rm(e.path),n),o=it(r,{record:e,parent:t,children:[],alias:[]});return t&&!o.record.aliasOf==!t.record.aliasOf&&t.children.push(o),o}function Dm(e,t){const n=[],r=new Map;t=Sl({strict:!1,end:!0,sensitive:!1},t);function o(g){return r.get(g)}function a(g,b,C){const P=!C,q=El(g);q.aliasOf=C&&C.record;const j=Sl(t,g),U=[q];if("alias"in g){const E=typeof g.alias=="string"?[g.alias]:g.alias;for(const ne of E)U.push(El(it({},q,{components:C?C.record.components:q.components,path:ne,aliasOf:C?C.record:q})))}let Q,R;for(const E of U){const{path:ne}=E;if(b&&ne[0]!=="/"){const ce=b.record.path,Ie=ce[ce.length-1]==="/"?"":"/";E.path=b.record.path+(ne&&Ie+ne)}if(Q=$m(E,b,j),C?C.alias.push(Q):(R=R||Q,R!==Q&&R.alias.push(Q),P&&g.name&&!Il(Q)&&c(g.name)),Cd(Q)&&d(Q),q.children){const ce=q.children;for(let Ie=0;Ie<ce.length;Ie++)a(ce[Ie],Q,C&&C.children[Ie])}C=C||Q}return R?()=>{c(R)}:Es}function c(g){if(bd(g)){const b=r.get(g);b&&(r.delete(g),n.splice(n.indexOf(b),1),b.children.forEach(c),b.alias.forEach(c))}else{const b=n.indexOf(g);b>-1&&(n.splice(b,1),g.record.name&&r.delete(g.record.name),g.children.forEach(c),g.alias.forEach(c))}}function u(){return n}function d(g){const b=Mm(g,n);n.splice(b,0,g),g.record.name&&!Il(g)&&r.set(g.record.name,g)}function h(g,b){let C,P={},q,j;if("name"in g&&g.name){if(C=r.get(g.name),!C)throw ts(1,{location:g});j=C.record.name,P=it(Al(b.params,C.keys.filter(R=>!R.optional).concat(C.parent?C.parent.keys.filter(R=>R.optional):[]).map(R=>R.name)),g.params&&Al(g.params,C.keys.map(R=>R.name))),q=C.stringify(P)}else if(g.path!=null)q=g.path,C=n.find(R=>R.re.test(q)),C&&(P=C.parse(q),j=C.record.name);else{if(C=b.name?r.get(b.name):n.find(R=>R.re.test(b.path)),!C)throw ts(1,{location:g,currentLocation:b});j=C.record.name,P=it({},b.params,g.params),q=C.stringify(P)}const U=[];let Q=C;for(;Q;)U.unshift(Q.record),Q=Q.parent;return{name:j,path:q,params:P,matched:U,meta:Fm(U)}}e.forEach(g=>a(g));function p(){n.length=0,r.clear()}return{addRoute:a,resolve:h,removeRoute:c,clearRoutes:p,getRoutes:u,getRecordMatcher:o}}function Al(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function El(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:Tm(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function Tm(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]=typeof n=="object"?n[r]:n;return t}function Il(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Fm(e){return e.reduce((t,n)=>it(t,n.meta),{})}function Sl(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function Mm(e,t){let n=0,r=t.length;for(;n!==r;){const a=n+r>>1;wd(e,t[a])<0?r=a:n=a+1}const o=Bm(e);return o&&(r=t.lastIndexOf(o,r-1)),r}function Bm(e){let t=e;for(;t=t.parent;)if(Cd(t)&&wd(e,t)===0)return t}function Cd({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function Nm(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let o=0;o<r.length;++o){const a=r[o].replace(pd," "),c=a.indexOf("="),u=Bs(c<0?a:a.slice(0,c)),d=c<0?null:Bs(a.slice(c+1));if(u in t){let h=t[u];pn(h)||(h=t[u]=[h]),h.push(d)}else t[u]=d}return t}function Pl(e){let t="";for(let n in e){const r=e[n];if(n=sm(n),r==null){r!==void 0&&(t+=(t.length?"&":"")+n);continue}(pn(r)?r.map(a=>a&&_a(a)):[r&&_a(r)]).forEach(a=>{a!==void 0&&(t+=(t.length?"&":"")+n,a!=null&&(t+="="+a))})}return t}function Lm(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=pn(r)?r.map(o=>o==null?null:""+o):r==null?r:""+r)}return t}const qm=Symbol(""),Ol=Symbol(""),oi=Symbol(""),Ga=Symbol(""),Ca=Symbol("");function hs(){let e=[];function t(r){return e.push(r),()=>{const o=e.indexOf(r);o>-1&&e.splice(o,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function nr(e,t,n,r,o,a=c=>c()){const c=r&&(r.enterCallbacks[o]=r.enterCallbacks[o]||[]);return()=>new Promise((u,d)=>{const h=b=>{b===!1?d(ts(4,{from:n,to:t})):b instanceof Error?d(b):xm(b)?d(ts(2,{from:t,to:b})):(c&&r.enterCallbacks[o]===c&&typeof b=="function"&&c.push(b),u())},p=a(()=>e.call(r&&r.instances[o],t,n,h));let g=Promise.resolve(p);e.length<3&&(g=g.then(h)),g.catch(b=>d(b))})}function Xi(e,t,n,r,o=a=>a()){const a=[];for(const c of e)for(const u in c.components){let d=c.components[u];if(!(t!=="beforeRouteEnter"&&!c.instances[u]))if(dd(d)){const p=(d.__vccOpts||d)[t];p&&a.push(nr(p,n,r,c,u,o))}else{let h=d();a.push(()=>h.then(p=>{if(!p)throw new Error(`Couldn't resolve component "${u}" at "${c.path}"`);const g=zh(p)?p.default:p;c.mods[u]=p,c.components[u]=g;const C=(g.__vccOpts||g)[t];return C&&nr(C,n,r,c,u,o)()}))}}return a}function Rl(e){const t=tn(oi),n=tn(Ga),r=tt(()=>{const d=Ee(e.to);return t.resolve(d)}),o=tt(()=>{const{matched:d}=r.value,{length:h}=d,p=d[h-1],g=n.matched;if(!p||!g.length)return-1;const b=g.findIndex(es.bind(null,p));if(b>-1)return b;const C=$l(d[h-2]);return h>1&&$l(p)===C&&g[g.length-1].path!==C?g.findIndex(es.bind(null,d[h-2])):b}),a=tt(()=>o.value>-1&&Hm(n.params,r.value.params)),c=tt(()=>o.value>-1&&o.value===n.matched.length-1&&yd(n.params,r.value.params));function u(d={}){if(Vm(d)){const h=t[Ee(e.replace)?"replace":"push"](Ee(e.to)).catch(Es);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>h),h}return Promise.resolve()}return{route:r,href:tt(()=>r.value.href),isActive:a,isExactActive:c,navigate:u}}function jm(e){return e.length===1?e[0]:e}const Um=ct({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Rl,setup(e,{slots:t}){const n=Ir(Rl(e)),{options:r}=tn(oi),o=tt(()=>({[Dl(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Dl(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const a=t.default&&jm(t.default(n));return e.custom?a:Qr("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:o.value},a)}}}),Km=Um;function Vm(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Hm(e,t){for(const n in t){const r=t[n],o=e[n];if(typeof r=="string"){if(r!==o)return!1}else if(!pn(o)||o.length!==r.length||r.some((a,c)=>a!==o[c]))return!1}return!0}function $l(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Dl=(e,t,n)=>e??t??n,Wm=ct({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const r=tn(Ca),o=tt(()=>e.route||r.value),a=tn(Ol,0),c=tt(()=>{let h=Ee(a);const{matched:p}=o.value;let g;for(;(g=p[h])&&!g.components;)h++;return h}),u=tt(()=>o.value.matched[c.value]);xs(Ol,tt(()=>c.value+1)),xs(qm,u),xs(Ca,o);const d=xe();return nn(()=>[d.value,u.value,e.name],([h,p,g],[b,C,P])=>{p&&(p.instances[g]=h,C&&C!==p&&h&&h===b&&(p.leaveGuards.size||(p.leaveGuards=C.leaveGuards),p.updateGuards.size||(p.updateGuards=C.updateGuards))),h&&p&&(!C||!es(p,C)||!b)&&(p.enterCallbacks[g]||[]).forEach(q=>q(h))},{flush:"post"}),()=>{const h=o.value,p=e.name,g=u.value,b=g&&g.components[p];if(!b)return Tl(n.default,{Component:b,route:h});const C=g.props[p],P=C?C===!0?h.params:typeof C=="function"?C(h):C:null,j=Qr(b,it({},P,t,{onVnodeUnmounted:U=>{U.component.isUnmounted&&(g.instances[p]=null)},ref:d}));return Tl(n.default,{Component:j,route:h})||j}}});function Tl(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const zm=Wm;function Qm(e){const t=Dm(e.routes,e),n=e.parseQuery||Nm,r=e.stringifyQuery||Pl,o=e.history,a=hs(),c=hs(),u=hs(),d=Cu(Gn);let h=Gn;Kr&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const p=Gi.bind(null,ee=>""+ee),g=Gi.bind(null,im),b=Gi.bind(null,Bs);function C(ee,ke){let Y,Pe;return bd(ee)?(Y=t.getRecordMatcher(ee),Pe=ke):Pe=ee,t.addRoute(Pe,Y)}function P(ee){const ke=t.getRecordMatcher(ee);ke&&t.removeRoute(ke)}function q(){return t.getRoutes().map(ee=>ee.record)}function j(ee){return!!t.getRecordMatcher(ee)}function U(ee,ke){if(ke=it({},ke||d.value),typeof ee=="string"){const N=Ji(n,ee,ke.path),Z=t.resolve({path:N.path},ke),re=o.createHref(N.fullPath);return it(N,Z,{params:b(Z.params),hash:Bs(N.hash),redirectedFrom:void 0,href:re})}let Y;if(ee.path!=null)Y=it({},ee,{path:Ji(n,ee.path,ke.path).path});else{const N=it({},ee.params);for(const Z in N)N[Z]==null&&delete N[Z];Y=it({},ee,{params:g(N)}),ke.params=g(ke.params)}const Pe=t.resolve(Y,ke),rt=ee.hash||"";Pe.params=p(b(Pe.params));const w=lm(r,it({},ee,{hash:rm(rt),path:Pe.path})),A=o.createHref(w);return it({fullPath:w,hash:rt,query:r===Pl?Lm(ee.query):ee.query||{}},Pe,{redirectedFrom:void 0,href:A})}function Q(ee){return typeof ee=="string"?Ji(n,ee,d.value.path):it({},ee)}function R(ee,ke){if(h!==ee)return ts(8,{from:ke,to:ee})}function E(ee){return Ie(ee)}function ne(ee){return E(it(Q(ee),{replace:!0}))}function ce(ee){const ke=ee.matched[ee.matched.length-1];if(ke&&ke.redirect){const{redirect:Y}=ke;let Pe=typeof Y=="function"?Y(ee):Y;return typeof Pe=="string"&&(Pe=Pe.includes("?")||Pe.includes("#")?Pe=Q(Pe):{path:Pe},Pe.params={}),it({query:ee.query,hash:ee.hash,params:Pe.path!=null?{}:ee.params},Pe)}}function Ie(ee,ke){const Y=h=U(ee),Pe=d.value,rt=ee.state,w=ee.force,A=ee.replace===!0,N=ce(Y);if(N)return Ie(it(Q(N),{state:typeof N=="object"?it({},rt,N.state):rt,force:w,replace:A}),ke||Y);const Z=Y;Z.redirectedFrom=ke;let re;return!w&&um(r,Pe,Y)&&(re=ts(16,{to:Z,from:Pe}),Re(Pe,Pe,!0,!1)),(re?Promise.resolve(re):Oe(Z,Pe)).catch(te=>Dn(te)?Dn(te,2)?te:L(te):J(te,Z,Pe)).then(te=>{if(te){if(Dn(te,2))return Ie(it({replace:A},Q(te.to),{state:typeof te.to=="object"?it({},rt,te.to.state):rt,force:w}),ke||Z)}else te=de(Z,Pe,!0,A,rt);return je(Z,Pe,te),te})}function we(ee,ke){const Y=R(ee,ke);return Y?Promise.reject(Y):Promise.resolve()}function H(ee){const ke=zt.values().next().value;return ke&&typeof ke.runWithContext=="function"?ke.runWithContext(ee):ee()}function Oe(ee,ke){let Y;const[Pe,rt,w]=Ym(ee,ke);Y=Xi(Pe.reverse(),"beforeRouteLeave",ee,ke);for(const N of Pe)N.leaveGuards.forEach(Z=>{Y.push(nr(Z,ee,ke))});const A=we.bind(null,ee,ke);return Y.push(A),mt(Y).then(()=>{Y=[];for(const N of a.list())Y.push(nr(N,ee,ke));return Y.push(A),mt(Y)}).then(()=>{Y=Xi(rt,"beforeRouteUpdate",ee,ke);for(const N of rt)N.updateGuards.forEach(Z=>{Y.push(nr(Z,ee,ke))});return Y.push(A),mt(Y)}).then(()=>{Y=[];for(const N of w)if(N.beforeEnter)if(pn(N.beforeEnter))for(const Z of N.beforeEnter)Y.push(nr(Z,ee,ke));else Y.push(nr(N.beforeEnter,ee,ke));return Y.push(A),mt(Y)}).then(()=>(ee.matched.forEach(N=>N.enterCallbacks={}),Y=Xi(w,"beforeRouteEnter",ee,ke,H),Y.push(A),mt(Y))).then(()=>{Y=[];for(const N of c.list())Y.push(nr(N,ee,ke));return Y.push(A),mt(Y)}).catch(N=>Dn(N,8)?N:Promise.reject(N))}function je(ee,ke,Y){u.list().forEach(Pe=>H(()=>Pe(ee,ke,Y)))}function de(ee,ke,Y,Pe,rt){const w=R(ee,ke);if(w)return w;const A=ke===Gn,N=Kr?history.state:{};Y&&(Pe||A?o.replace(ee.fullPath,it({scroll:A&&N&&N.scroll},rt)):o.push(ee.fullPath,rt)),d.value=ee,Re(ee,ke,Y,A),L()}let Se;function Ne(){Se||(Se=o.listen((ee,ke,Y)=>{if(!qt.listening)return;const Pe=U(ee),rt=ce(Pe);if(rt){Ie(it(rt,{replace:!0,force:!0}),Pe).catch(Es);return}h=Pe;const w=d.value;Kr&&vm(_l(w.fullPath,Y.delta),si()),Oe(Pe,w).catch(A=>Dn(A,12)?A:Dn(A,2)?(Ie(it(Q(A.to),{force:!0}),Pe).then(N=>{Dn(N,20)&&!Y.delta&&Y.type===Ns.pop&&o.go(-1,!1)}).catch(Es),Promise.reject()):(Y.delta&&o.go(-Y.delta,!1),J(A,Pe,w))).then(A=>{A=A||de(Pe,w,!1),A&&(Y.delta&&!Dn(A,8)?o.go(-Y.delta,!1):Y.type===Ns.pop&&Dn(A,20)&&o.go(-1,!1)),je(Pe,w,A)}).catch(Es)}))}let nt=hs(),We=hs(),Fe;function J(ee,ke,Y){L(ee);const Pe=We.list();return Pe.length?Pe.forEach(rt=>rt(ee,ke,Y)):console.error(ee),Promise.reject(ee)}function W(){return Fe&&d.value!==Gn?Promise.resolve():new Promise((ee,ke)=>{nt.add([ee,ke])})}function L(ee){return Fe||(Fe=!ee,Ne(),nt.list().forEach(([ke,Y])=>ee?Y(ee):ke()),nt.reset()),ee}function Re(ee,ke,Y,Pe){const{scrollBehavior:rt}=e;if(!Kr||!rt)return Promise.resolve();const w=!Y&&bm(_l(ee.fullPath,0))||(Pe||!Y)&&history.state&&history.state.scroll||null;return dn().then(()=>rt(ee,ke,w)).then(A=>A&&ym(A)).catch(A=>J(A,ee,ke))}const Ce=ee=>o.go(ee);let Ye;const zt=new Set,qt={currentRoute:d,listening:!0,addRoute:C,removeRoute:P,clearRoutes:t.clearRoutes,hasRoute:j,getRoutes:q,resolve:U,options:e,push:E,replace:ne,go:Ce,back:()=>Ce(-1),forward:()=>Ce(1),beforeEach:a.add,beforeResolve:c.add,afterEach:u.add,onError:We.add,isReady:W,install(ee){const ke=this;ee.component("RouterLink",Km),ee.component("RouterView",zm),ee.config.globalProperties.$router=ke,Object.defineProperty(ee.config.globalProperties,"$route",{enumerable:!0,get:()=>Ee(d)}),Kr&&!Ye&&d.value===Gn&&(Ye=!0,E(o.location).catch(rt=>{}));const Y={};for(const rt in Gn)Object.defineProperty(Y,rt,{get:()=>d.value[rt],enumerable:!0});ee.provide(oi,ke),ee.provide(Ga,_u(Y)),ee.provide(Ca,d);const Pe=ee.unmount;zt.add(ee),ee.unmount=function(){zt.delete(ee),zt.size<1&&(h=Gn,Se&&Se(),Se=null,d.value=Gn,Ye=!1,Fe=!1),Pe()}}};function mt(ee){return ee.reduce((ke,Y)=>ke.then(()=>H(Y)),Promise.resolve())}return qt}function Ym(e,t){const n=[],r=[],o=[],a=Math.max(t.matched.length,e.matched.length);for(let c=0;c<a;c++){const u=t.matched[c];u&&(e.matched.find(h=>es(h,u))?r.push(u):n.push(u));const d=e.matched[c];d&&(t.matched.find(h=>es(h,d))||o.push(d))}return[n,r,o]}function Gm(){return tn(oi)}function kd(e){return tn(Ga)}const Jm=["aria-label"],Xm={key:0},Zm={key:1},eg=ct({__name:"ThemeSwitcher",setup(e){const t=xe("light"),n=()=>{const r=t.value==="light"?"dark":"light";t.value=r,document.documentElement.setAttribute("data-theme",r),document.documentElement.setAttribute("data-bs-theme",r),localStorage.setItem("theme",r)};return In(()=>{const r=localStorage.getItem("theme"),o=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;let a="light";r?a=r:o&&(a="dark"),t.value=a,document.documentElement.setAttribute("data-theme",a),document.documentElement.setAttribute("data-bs-theme",a)}),(r,o)=>(K(),X("button",{type:"button",class:"btn btn-outline-primary",onClick:n,"aria-label":`Switch to ${t.value==="light"?"dark":"light"} mode`},[t.value==="light"?(K(),X("span",Xm,"  Dark ")):(K(),X("span",Zm,"  Light "))],8,Jm))}}),hn=(e,t)=>{const n=e.__vccOpts||e;for(const[r,o]of t)n[r]=o;return n},tg=hn(eg,[["__scopeId","data-v-c333c158"]]);/*!
 * pinia v3.0.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let xd;const ii=e=>xd=e,Ad=Symbol();function ka(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var Ss;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Ss||(Ss={}));function ng(){const e=Go(!0),t=e.run(()=>xe({}));let n=[],r=[];const o=qa({install(a){ii(o),o._a=a,a.provide(Ad,o),a.config.globalProperties.$pinia=o,r.forEach(c=>n.push(c)),r=[]},use(a){return this._a?n.push(a):r.push(a),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return o}const Ed=()=>{};function Fl(e,t,n,r=Ed){e.push(t);const o=()=>{const a=e.indexOf(t);a>-1&&(e.splice(a,1),r())};return!n&&$a()&&ou(o),o}function Lr(e,...t){e.slice().forEach(n=>{n(...t)})}const rg=e=>e(),Ml=Symbol(),Zi=Symbol();function xa(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,r)=>e.set(r,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n],o=e[n];ka(o)&&ka(r)&&e.hasOwnProperty(n)&&!wt(r)&&!sr(r)?e[n]=xa(o,r):e[n]=r}return e}const sg=Symbol();function og(e){return!ka(e)||!Object.prototype.hasOwnProperty.call(e,sg)}const{assign:Xn}=Object;function ig(e){return!!(wt(e)&&e.effect)}function ag(e,t,n,r){const{state:o,actions:a,getters:c}=t,u=n.state.value[e];let d;function h(){u||(n.state.value[e]=o?o():{});const p=ja(n.state.value[e]);return Xn(p,a,Object.keys(c||{}).reduce((g,b)=>(g[b]=qa(tt(()=>{ii(n);const C=n._s.get(e);return c[b].call(C,C)})),g),{}))}return d=Id(e,h,t,n,r,!0),d}function Id(e,t,n={},r,o,a){let c;const u=Xn({actions:{}},n),d={deep:!0};let h,p,g=[],b=[],C;const P=r.state.value[e];!a&&!P&&(r.state.value[e]={}),xe({});let q;function j(we){let H;h=p=!1,typeof we=="function"?(we(r.state.value[e]),H={type:Ss.patchFunction,storeId:e,events:C}):(xa(r.state.value[e],we),H={type:Ss.patchObject,payload:we,storeId:e,events:C});const Oe=q=Symbol();dn().then(()=>{q===Oe&&(h=!0)}),p=!0,Lr(g,H,r.state.value[e])}const U=a?function(){const{state:H}=n,Oe=H?H():{};this.$patch(je=>{Xn(je,Oe)})}:Ed;function Q(){c.stop(),g=[],b=[],r._s.delete(e)}const R=(we,H="")=>{if(Ml in we)return we[Zi]=H,we;const Oe=function(){ii(r);const je=Array.from(arguments),de=[],Se=[];function Ne(Fe){de.push(Fe)}function nt(Fe){Se.push(Fe)}Lr(b,{args:je,name:Oe[Zi],store:ne,after:Ne,onError:nt});let We;try{We=we.apply(this&&this.$id===e?this:ne,je)}catch(Fe){throw Lr(Se,Fe),Fe}return We instanceof Promise?We.then(Fe=>(Lr(de,Fe),Fe)).catch(Fe=>(Lr(Se,Fe),Promise.reject(Fe))):(Lr(de,We),We)};return Oe[Ml]=!0,Oe[Zi]=H,Oe},E={_p:r,$id:e,$onAction:Fl.bind(null,b),$patch:j,$reset:U,$subscribe(we,H={}){const Oe=Fl(g,we,H.detached,()=>je()),je=c.run(()=>nn(()=>r.state.value[e],de=>{(H.flush==="sync"?p:h)&&we({storeId:e,type:Ss.direct,events:C},de)},Xn({},d,H)));return Oe},$dispose:Q},ne=Ir(E);r._s.set(e,ne);const Ie=(r._a&&r._a.runWithContext||rg)(()=>r._e.run(()=>(c=Go()).run(()=>t({action:R}))));for(const we in Ie){const H=Ie[we];if(wt(H)&&!ig(H)||sr(H))a||(P&&og(H)&&(wt(H)?H.value=P[we]:xa(H,P[we])),r.state.value[e][we]=H);else if(typeof H=="function"){const Oe=R(H,we);Ie[we]=Oe,u.actions[we]=H}}return Xn(ne,Ie),Xn(et(ne),Ie),Object.defineProperty(ne,"$state",{get:()=>r.state.value[e],set:we=>{j(H=>{Xn(H,we)})}}),r._p.forEach(we=>{Xn(ne,c.run(()=>we({store:ne,app:r._a,pinia:r,options:u})))}),P&&a&&n.hydrate&&n.hydrate(ne.$state,P),h=!0,p=!0,ne}/*! #__NO_SIDE_EFFECTS__ */function ai(e,t,n){let r;const o=typeof t=="function";r=o?n:t;function a(c,u){const d=Rp();return c=c||(d?tn(Ad,null):null),c&&ii(c),c=xd,c._s.has(e)||(o?Id(e,t,r,c):ag(e,r,c)),c._s.get(e)}return a.$id=e,a}const Gr=ai("importStatus",()=>{const e=xe([]);return{imports:e,addImport:d=>{const h={...d,createdAt:new Date};return e.value.push(h),h.id},updateImport:(d,h)=>{const p=e.value.findIndex(g=>g.id===d);p!==-1&&(e.value[p]={...e.value[p],...h})},completeImport:(d,h)=>{const p=e.value.findIndex(g=>g.id===d);p!==-1&&(e.value[p]={...e.value[p],status:h?"failed":"completed",errorMessage:h,completedAt:new Date,progress:100})},removeImport:d=>{e.value=e.value.filter(h=>h.id!==d)},clearCompletedImports:()=>{e.value=e.value.filter(d=>d.status==="pending"||d.status==="processing")},getActiveImports:()=>e.value.filter(d=>d.status==="pending"||d.status==="processing"),getCompletedImports:()=>e.value.filter(d=>d.status==="completed"||d.status==="failed")}}),cg={key:0,class:"import-status-indicator d-flex align-items-center"},lg={class:"d-flex align-items-center"},ug={class:"me-2"},dg={class:"d-flex align-items-center"},fg={class:"fw-medium"},pg={class:"progress mt-1",style:{height:"8px",width:"150px"}},hg=["aria-valuenow"],mg={class:"small text-muted"},gg={class:"import-alerts position-fixed top-0 end-0 p-3",style:{"z-index":"1050"}},yg={class:"d-flex justify-content-between"},vg={key:0,class:"small"},bg=["onClick"],_g=ct({__name:"ImportStatusIndicator",setup(e){const t=Gr(),n=tt(()=>t.getActiveImports()),r=tt(()=>t.getCompletedImports()),o=tt(()=>n.value.length>0?n.value[0]:null),a=u=>{t.removeImport(u)};let c=null;return In(()=>{c=window.setInterval(()=>{const u=new Date;t.imports.forEach(d=>{if((d.status==="completed"||d.status==="failed")&&d.completedAt){const h=new Date(d.completedAt);u.getTime()-h.getTime()>5e3&&t.removeImport(d.id)}})},1e3)}),js(()=>{c&&clearInterval(c)}),(u,d)=>(K(),X(Xe,null,[o.value?(K(),X("div",cg,[v("div",lg,[v("div",ug,[v("div",dg,[v("span",fg,se(o.value.name),1)]),v("div",pg,[v("div",{class:"progress-bar",role:"progressbar",style:Nn({width:o.value.progress+"%"}),"aria-valuenow":o.value.progress,"aria-valuemin":"0","aria-valuemax":"100"},null,12,hg)]),v("div",mg,se(o.value.processedItems)+" / "+se(o.value.totalItems),1)])])])):De("",!0),v("div",gg,[ze(Th,{name:"alert",tag:"div"},{default:ot(()=>[(K(!0),X(Xe,null,Bt(r.value,h=>(K(),X("div",{key:h.id,class:kt(["alert",h.status==="completed"?"alert-success":"alert-danger"]),role:"alert"},[v("div",yg,[v("div",null,[v("strong",null,se(h.name),1),Wt(" "+se(h.status==="completed"?"import completed successfully!":"import failed.")+" ",1),h.errorMessage?(K(),X("div",vg,se(h.errorMessage),1)):De("",!0)]),v("button",{type:"button",class:"btn-close",onClick:p=>a(h.id)},null,8,bg)])],2))),128))]),_:1})])],64))}}),Sd=hn(_g,[["__scopeId","data-v-8120d454"]]),wg={class:"navbar navbar-expand-md navbar-light bg-body fixed-top border-bottom"},Cg={class:"container-fluid"},kg=["aria-expanded"],xg={class:"navbar-nav me-auto"},Ag={class:"nav-item"},Eg={class:"nav-item"},Ig={class:"nav-item"},Sg={class:"nav-item"},Pg={class:"d-flex align-items-center"},Og=ct({__name:"Navigation",setup(e){const t=kd(),n=tt(()=>t.name==="decks"||t.name==="deck-detail"||t.name==="deck-import"),r=xe(!1);return(o,a)=>{const c=ei("router-link");return K(),X("nav",wg,[v("div",Cg,[ze(c,{to:"/",class:"navbar-brand"},{default:ot(()=>[...a[1]||(a[1]=[v("img",{style:{"max-width":"40px"},src:Wh,alt:"logo"},null,-1),Wt(" MTG Collection Tracker ",-1)])]),_:1}),v("button",{class:"navbar-toggler",type:"button",onClick:a[0]||(a[0]=u=>r.value=!r.value),"aria-controls":"navbarNav","aria-expanded":r.value,"aria-label":"Toggle navigation"},[...a[2]||(a[2]=[v("span",{class:"navbar-toggler-icon"},null,-1)])],8,kg),v("div",{id:"navbarNav",class:kt(["collapse navbar-collapse",{show:r.value}])},[v("ul",xg,[v("li",Ag,[ze(c,{to:"/",class:kt(["nav-link",{active:Ee(t).name==="home"}])},{default:ot(()=>[...a[3]||(a[3]=[Wt(" Dashboard ",-1)])]),_:1},8,["class"])]),v("li",Eg,[ze(c,{to:"/decks",class:kt(["nav-link",{active:n.value}])},{default:ot(()=>[...a[4]||(a[4]=[Wt(" Decks ",-1)])]),_:1},8,["class"])]),v("li",Ig,[ze(c,{to:"/cards",class:kt(["nav-link",{active:Ee(t).name==="cards"}])},{default:ot(()=>[...a[5]||(a[5]=[Wt(" Cards ",-1)])]),_:1},8,["class"])]),v("li",Sg,[ze(c,{to:"/import/cardmarket",class:kt(["nav-link",{active:Ee(t).name==="cardmarket-import"}])},{default:ot(()=>[...a[6]||(a[6]=[Wt(" Cardmarket Import ",-1)])]),_:1},8,["class"])])]),v("div",Pg,[ze(Sd),ze(tg)])],2)])])}}}),Rg=hn(Og,[["__scopeId","data-v-3f898029"]]),$g={class:"container-lg",style:{"padding-top":"calc(var(--app-navbar-h) + 1.5rem)","padding-bottom":"1.5rem"}},Dg=ct({__name:"App",setup(e){return(t,n)=>{const r=ei("router-view");return K(),X(Xe,null,[ze(Rg),ze(Sd),v("main",$g,[ze(r)])],64)}}});var Tg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Fg(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Po={exports:{}},Mg=Po.exports,Bl;function Bg(){return Bl||(Bl=1,(function(e,t){(function(n,r){e.exports=r()})(Mg,function(){var n=function(s,i){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,f){l.__proto__=f}||function(l,f){for(var m in f)Object.prototype.hasOwnProperty.call(f,m)&&(l[m]=f[m])})(s,i)},r=function(){return(r=Object.assign||function(s){for(var i,l=1,f=arguments.length;l<f;l++)for(var m in i=arguments[l])Object.prototype.hasOwnProperty.call(i,m)&&(s[m]=i[m]);return s}).apply(this,arguments)};function o(s,i,l){for(var f,m=0,y=i.length;m<y;m++)!f&&m in i||((f=f||Array.prototype.slice.call(i,0,m))[m]=i[m]);return s.concat(f||Array.prototype.slice.call(i))}var a=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Tg,c=Object.keys,u=Array.isArray;function d(s,i){return typeof i!="object"||c(i).forEach(function(l){s[l]=i[l]}),s}typeof Promise>"u"||a.Promise||(a.Promise=Promise);var h=Object.getPrototypeOf,p={}.hasOwnProperty;function g(s,i){return p.call(s,i)}function b(s,i){typeof i=="function"&&(i=i(h(s))),(typeof Reflect>"u"?c:Reflect.ownKeys)(i).forEach(function(l){P(s,l,i[l])})}var C=Object.defineProperty;function P(s,i,l,f){C(s,i,d(l&&g(l,"get")&&typeof l.get=="function"?{get:l.get,set:l.set,configurable:!0}:{value:l,configurable:!0,writable:!0},f))}function q(s){return{from:function(i){return s.prototype=Object.create(i.prototype),P(s.prototype,"constructor",s),{extend:b.bind(null,s.prototype)}}}}var j=Object.getOwnPropertyDescriptor,U=[].slice;function Q(s,i,l){return U.call(s,i,l)}function R(s,i){return i(s)}function E(s){if(!s)throw new Error("Assertion Failed")}function ne(s){a.setImmediate?setImmediate(s):setTimeout(s,0)}function ce(s,i){if(typeof i=="string"&&g(s,i))return s[i];if(!i)return s;if(typeof i!="string"){for(var l=[],f=0,m=i.length;f<m;++f){var y=ce(s,i[f]);l.push(y)}return l}var _=i.indexOf(".");if(_!==-1){var k=s[i.substr(0,_)];return k==null?void 0:ce(k,i.substr(_+1))}}function Ie(s,i,l){if(s&&i!==void 0&&!("isFrozen"in Object&&Object.isFrozen(s)))if(typeof i!="string"&&"length"in i){E(typeof l!="string"&&"length"in l);for(var f=0,m=i.length;f<m;++f)Ie(s,i[f],l[f])}else{var y,_,k=i.indexOf(".");k!==-1?(y=i.substr(0,k),(_=i.substr(k+1))===""?l===void 0?u(s)&&!isNaN(parseInt(y))?s.splice(y,1):delete s[y]:s[y]=l:Ie(k=!(k=s[y])||!g(s,y)?s[y]={}:k,_,l)):l===void 0?u(s)&&!isNaN(parseInt(i))?s.splice(i,1):delete s[i]:s[i]=l}}function we(s){var i,l={};for(i in s)g(s,i)&&(l[i]=s[i]);return l}var H=[].concat;function Oe(s){return H.apply([],s)}var Ve="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Oe([8,16,32,64].map(function(s){return["Int","Uint","Float"].map(function(i){return i+s+"Array"})}))).filter(function(s){return a[s]}),je=new Set(Ve.map(function(s){return a[s]})),de=null;function Se(s){return de=new WeakMap,s=(function i(l){if(!l||typeof l!="object")return l;var f=de.get(l);if(f)return f;if(u(l)){f=[],de.set(l,f);for(var m=0,y=l.length;m<y;++m)f.push(i(l[m]))}else if(je.has(l.constructor))f=l;else{var _,k=h(l);for(_ in f=k===Object.prototype?{}:Object.create(k),de.set(l,f),l)g(l,_)&&(f[_]=i(l[_]))}return f})(s),de=null,s}var Ne={}.toString;function nt(s){return Ne.call(s).slice(8,-1)}var We=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Fe=typeof We=="symbol"?function(s){var i;return s!=null&&(i=s[We])&&i.apply(s)}:function(){return null};function J(s,i){return i=s.indexOf(i),0<=i&&s.splice(i,1),0<=i}var W={};function L(s){var i,l,f,m;if(arguments.length===1){if(u(s))return s.slice();if(this===W&&typeof s=="string")return[s];if(m=Fe(s)){for(l=[];!(f=m.next()).done;)l.push(f.value);return l}if(s==null)return[s];if(typeof(i=s.length)!="number")return[s];for(l=new Array(i);i--;)l[i]=s[i];return l}for(i=arguments.length,l=new Array(i);i--;)l[i]=arguments[i];return l}var Re=typeof Symbol<"u"?function(s){return s[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Be=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],sn=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Be),Ce={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ye(s,i){this.name=s,this.message=i}function zt(s,i){return s+". Errors: "+Object.keys(i).map(function(l){return i[l].toString()}).filter(function(l,f,m){return m.indexOf(l)===f}).join(`
`)}function qt(s,i,l,f){this.failures=i,this.failedKeys=f,this.successCount=l,this.message=zt(s,i)}function mt(s,i){this.name="BulkError",this.failures=Object.keys(i).map(function(l){return i[l]}),this.failuresByPos=i,this.message=zt(s,this.failures)}q(Ye).from(Error).extend({toString:function(){return this.name+": "+this.message}}),q(qt).from(Ye),q(mt).from(Ye);var ee=sn.reduce(function(s,i){return s[i]=i+"Error",s},{}),ke=Ye,Y=sn.reduce(function(s,i){var l=i+"Error";function f(m,y){this.name=l,m?typeof m=="string"?(this.message="".concat(m).concat(y?`
 `+y:""),this.inner=y||null):typeof m=="object"&&(this.message="".concat(m.name," ").concat(m.message),this.inner=m):(this.message=Ce[i]||l,this.inner=null)}return q(f).from(ke),s[i]=f,s},{});Y.Syntax=SyntaxError,Y.Type=TypeError,Y.Range=RangeError;var Pe=Be.reduce(function(s,i){return s[i+"Error"]=Y[i],s},{}),rt=sn.reduce(function(s,i){return["Syntax","Type","Range"].indexOf(i)===-1&&(s[i+"Error"]=Y[i]),s},{});function w(){}function A(s){return s}function N(s,i){return s==null||s===A?i:function(l){return i(s(l))}}function Z(s,i){return function(){s.apply(this,arguments),i.apply(this,arguments)}}function re(s,i){return s===w?i:function(){var l=s.apply(this,arguments);l!==void 0&&(arguments[0]=l);var f=this.onsuccess,m=this.onerror;this.onsuccess=null,this.onerror=null;var y=i.apply(this,arguments);return f&&(this.onsuccess=this.onsuccess?Z(f,this.onsuccess):f),m&&(this.onerror=this.onerror?Z(m,this.onerror):m),y!==void 0?y:l}}function te(s,i){return s===w?i:function(){s.apply(this,arguments);var l=this.onsuccess,f=this.onerror;this.onsuccess=this.onerror=null,i.apply(this,arguments),l&&(this.onsuccess=this.onsuccess?Z(l,this.onsuccess):l),f&&(this.onerror=this.onerror?Z(f,this.onerror):f)}}function me(s,i){return s===w?i:function(l){var f=s.apply(this,arguments);d(l,f);var m=this.onsuccess,y=this.onerror;return this.onsuccess=null,this.onerror=null,l=i.apply(this,arguments),m&&(this.onsuccess=this.onsuccess?Z(m,this.onsuccess):m),y&&(this.onerror=this.onerror?Z(y,this.onerror):y),f===void 0?l===void 0?void 0:l:d(f,l)}}function pe(s,i){return s===w?i:function(){return i.apply(this,arguments)!==!1&&s.apply(this,arguments)}}function ue(s,i){return s===w?i:function(){var l=s.apply(this,arguments);if(l&&typeof l.then=="function"){for(var f=this,m=arguments.length,y=new Array(m);m--;)y[m]=arguments[m];return l.then(function(){return i.apply(f,y)})}return i.apply(this,arguments)}}rt.ModifyError=qt,rt.DexieError=Ye,rt.BulkError=mt;var oe=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Te(s){oe=s}var ge={},$e=100,Ve=typeof Promise>"u"?[]:(function(){var s=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[s,h(s),s];var i=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[i,h(i),s]})(),Be=Ve[0],sn=Ve[1],Ve=Ve[2],sn=sn&&sn.then,Ge=Be&&Be.constructor,Ze=!!Ve,Ct=function(s,i){Un.push([s,i]),jt&&(queueMicrotask(Kd),jt=!1)},At=!0,jt=!0,Et=[],mn=[],Pr=A,gt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:w,pgp:!1,env:{},finalize:w},Ae=gt,Un=[],gn=0,Vs=[];function ve(s){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var i=this._PSD=Ae;if(typeof s!="function"){if(s!==ge)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&ui(this,this._value))}this._state=null,this._value=null,++i.ref,(function l(f,m){try{m(function(y){if(f._state===null){if(y===f)throw new TypeError("A promise cannot be resolved with itself.");var _=f._lib&&Or();y&&typeof y.then=="function"?l(f,function(k,I){y instanceof ve?y._then(k,I):y.then(k,I)}):(f._state=!0,f._value=y,nc(f)),_&&Rr()}},ui.bind(null,f))}catch(y){ui(f,y)}})(this,s)}var li={get:function(){var s=Ae,i=Qs;function l(f,m){var y=this,_=!s.global&&(s!==Ae||i!==Qs),k=_&&!Vn(),I=new ve(function(O,D){di(y,new tc(sc(f,s,_,k),sc(m,s,_,k),O,D,s))});return this._consoleTask&&(I._consoleTask=this._consoleTask),I}return l.prototype=ge,l},set:function(s){P(this,"then",s&&s.prototype===ge?li:{get:function(){return s},set:li.set})}};function tc(s,i,l,f,m){this.onFulfilled=typeof s=="function"?s:null,this.onRejected=typeof i=="function"?i:null,this.resolve=l,this.reject=f,this.psd=m}function ui(s,i){var l,f;mn.push(i),s._state===null&&(l=s._lib&&Or(),i=Pr(i),s._state=!1,s._value=i,f=s,Et.some(function(m){return m._value===f._value})||Et.push(f),nc(s),l&&Rr())}function nc(s){var i=s._listeners;s._listeners=[];for(var l=0,f=i.length;l<f;++l)di(s,i[l]);var m=s._PSD;--m.ref||m.finalize(),gn===0&&(++gn,Ct(function(){--gn==0&&fi()},[]))}function di(s,i){if(s._state!==null){var l=s._state?i.onFulfilled:i.onRejected;if(l===null)return(s._state?i.resolve:i.reject)(s._value);++i.psd.ref,++gn,Ct(Ud,[l,s,i])}else s._listeners.push(i)}function Ud(s,i,l){try{var f,m=i._value;!i._state&&mn.length&&(mn=[]),f=oe&&i._consoleTask?i._consoleTask.run(function(){return s(m)}):s(m),i._state||mn.indexOf(m)!==-1||(function(y){for(var _=Et.length;_;)if(Et[--_]._value===y._value)return Et.splice(_,1)})(i),l.resolve(f)}catch(y){l.reject(y)}finally{--gn==0&&fi(),--l.psd.ref||l.psd.finalize()}}function Kd(){lr(gt,function(){Or()&&Rr()})}function Or(){var s=At;return jt=At=!1,s}function Rr(){var s,i,l;do for(;0<Un.length;)for(s=Un,Un=[],l=s.length,i=0;i<l;++i){var f=s[i];f[0].apply(null,f[1])}while(0<Un.length);jt=At=!0}function fi(){var s=Et;Et=[],s.forEach(function(f){f._PSD.onunhandled.call(null,f._value,f)});for(var i=Vs.slice(0),l=i.length;l;)i[--l]()}function Hs(s){return new ve(ge,!1,s)}function pt(s,i){var l=Ae;return function(){var f=Or(),m=Ae;try{return Hn(l,!0),s.apply(this,arguments)}catch(y){i&&i(y)}finally{Hn(m,!1),f&&Rr()}}}b(ve.prototype,{then:li,_then:function(s,i){di(this,new tc(null,null,s,i,Ae))},catch:function(s){if(arguments.length===1)return this.then(null,s);var i=s,l=arguments[1];return typeof i=="function"?this.then(null,function(f){return(f instanceof i?l:Hs)(f)}):this.then(null,function(f){return(f&&f.name===i?l:Hs)(f)})},finally:function(s){return this.then(function(i){return ve.resolve(s()).then(function(){return i})},function(i){return ve.resolve(s()).then(function(){return Hs(i)})})},timeout:function(s,i){var l=this;return s<1/0?new ve(function(f,m){var y=setTimeout(function(){return m(new Y.Timeout(i))},s);l.then(f,m).finally(clearTimeout.bind(null,y))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&P(ve.prototype,Symbol.toStringTag,"Dexie.Promise"),gt.env=rc(),b(ve,{all:function(){var s=L.apply(null,arguments).map(Ys);return new ve(function(i,l){s.length===0&&i([]);var f=s.length;s.forEach(function(m,y){return ve.resolve(m).then(function(_){s[y]=_,--f||i(s)},l)})})},resolve:function(s){return s instanceof ve?s:s&&typeof s.then=="function"?new ve(function(i,l){s.then(i,l)}):new ve(ge,!0,s)},reject:Hs,race:function(){var s=L.apply(null,arguments).map(Ys);return new ve(function(i,l){s.map(function(f){return ve.resolve(f).then(i,l)})})},PSD:{get:function(){return Ae},set:function(s){return Ae=s}},totalEchoes:{get:function(){return Qs}},newPSD:Kn,usePSD:lr,scheduler:{get:function(){return Ct},set:function(s){Ct=s}},rejectionMapper:{get:function(){return Pr},set:function(s){Pr=s}},follow:function(s,i){return new ve(function(l,f){return Kn(function(m,y){var _=Ae;_.unhandleds=[],_.onunhandled=y,_.finalize=Z(function(){var k,I=this;k=function(){I.unhandleds.length===0?m():y(I.unhandleds[0])},Vs.push(function O(){k(),Vs.splice(Vs.indexOf(O),1)}),++gn,Ct(function(){--gn==0&&fi()},[])},_.finalize),s()},i,l,f)})}}),Ge&&(Ge.allSettled&&P(ve,"allSettled",function(){var s=L.apply(null,arguments).map(Ys);return new ve(function(i){s.length===0&&i([]);var l=s.length,f=new Array(l);s.forEach(function(m,y){return ve.resolve(m).then(function(_){return f[y]={status:"fulfilled",value:_}},function(_){return f[y]={status:"rejected",reason:_}}).then(function(){return--l||i(f)})})})}),Ge.any&&typeof AggregateError<"u"&&P(ve,"any",function(){var s=L.apply(null,arguments).map(Ys);return new ve(function(i,l){s.length===0&&l(new AggregateError([]));var f=s.length,m=new Array(f);s.forEach(function(y,_){return ve.resolve(y).then(function(k){return i(k)},function(k){m[_]=k,--f||l(new AggregateError(m))})})})}),Ge.withResolvers&&(ve.withResolvers=Ge.withResolvers));var It={awaits:0,echoes:0,id:0},Vd=0,Ws=[],zs=0,Qs=0,Hd=0;function Kn(s,i,l,f){var m=Ae,y=Object.create(m);return y.parent=m,y.ref=0,y.global=!1,y.id=++Hd,gt.env,y.env=Ze?{Promise:ve,PromiseProp:{value:ve,configurable:!0,writable:!0},all:ve.all,race:ve.race,allSettled:ve.allSettled,any:ve.any,resolve:ve.resolve,reject:ve.reject}:{},i&&d(y,i),++m.ref,y.finalize=function(){--this.parent.ref||this.parent.finalize()},f=lr(y,s,l,f),y.ref===0&&y.finalize(),f}function $r(){return It.id||(It.id=++Vd),++It.awaits,It.echoes+=$e,It.id}function Vn(){return!!It.awaits&&(--It.awaits==0&&(It.id=0),It.echoes=It.awaits*$e,!0)}function Ys(s){return It.echoes&&s&&s.constructor===Ge?($r(),s.then(function(i){return Vn(),i},function(i){return Vn(),bt(i)})):s}function Wd(){var s=Ws[Ws.length-1];Ws.pop(),Hn(s,!1)}function Hn(s,i){var l,f=Ae;(i?!It.echoes||zs++&&s===Ae:!zs||--zs&&s===Ae)||queueMicrotask(i?(function(m){++Qs,It.echoes&&--It.echoes!=0||(It.echoes=It.awaits=It.id=0),Ws.push(Ae),Hn(m,!0)}).bind(null,s):Wd),s!==Ae&&(Ae=s,f===gt&&(gt.env=rc()),Ze&&(l=gt.env.Promise,i=s.env,(f.global||s.global)&&(Object.defineProperty(a,"Promise",i.PromiseProp),l.all=i.all,l.race=i.race,l.resolve=i.resolve,l.reject=i.reject,i.allSettled&&(l.allSettled=i.allSettled),i.any&&(l.any=i.any))))}function rc(){var s=a.Promise;return Ze?{Promise:s,PromiseProp:Object.getOwnPropertyDescriptor(a,"Promise"),all:s.all,race:s.race,allSettled:s.allSettled,any:s.any,resolve:s.resolve,reject:s.reject}:{}}function lr(s,i,l,f,m){var y=Ae;try{return Hn(s,!0),i(l,f,m)}finally{Hn(y,!1)}}function sc(s,i,l,f){return typeof s!="function"?s:function(){var m=Ae;l&&$r(),Hn(i,!0);try{return s.apply(this,arguments)}finally{Hn(m,!1),f&&queueMicrotask(Vn)}}}function pi(s){Promise===Ge&&It.echoes===0?zs===0?s():enqueueNativeMicroTask(s):setTimeout(s,0)}(""+sn).indexOf("[native code]")===-1&&($r=Vn=w);var bt=ve.reject,ur="",On="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",oc="String expected.",Dr=[],Gs="__dbnames",hi="readonly",mi="readwrite";function dr(s,i){return s?i?function(){return s.apply(this,arguments)&&i.apply(this,arguments)}:s:i}var ic={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Js(s){return typeof s!="string"||/\./.test(s)?function(i){return i}:function(i){return i[s]===void 0&&s in i&&delete(i=Se(i))[s],i}}function ac(){throw Y.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function Qe(s,i){try{var l=cc(s),f=cc(i);if(l!==f)return l==="Array"?1:f==="Array"?-1:l==="binary"?1:f==="binary"?-1:l==="string"?1:f==="string"?-1:l==="Date"?1:f!=="Date"?NaN:-1;switch(l){case"number":case"Date":case"string":return i<s?1:s<i?-1:0;case"binary":return(function(m,y){for(var _=m.length,k=y.length,I=_<k?_:k,O=0;O<I;++O)if(m[O]!==y[O])return m[O]<y[O]?-1:1;return _===k?0:_<k?-1:1})(lc(s),lc(i));case"Array":return(function(m,y){for(var _=m.length,k=y.length,I=_<k?_:k,O=0;O<I;++O){var D=Qe(m[O],y[O]);if(D!==0)return D}return _===k?0:_<k?-1:1})(s,i)}}catch{}return NaN}function cc(s){var i=typeof s;return i!="object"?i:ArrayBuffer.isView(s)?"binary":(s=nt(s),s==="ArrayBuffer"?"binary":s)}function lc(s){return s instanceof Uint8Array?s:ArrayBuffer.isView(s)?new Uint8Array(s.buffer,s.byteOffset,s.byteLength):new Uint8Array(s)}function Xs(s,i,l){var f=s.schema.yProps;return f?(i&&0<l.numFailures&&(i=i.filter(function(m,y){return!l.failures[y]})),Promise.all(f.map(function(m){return m=m.updatesTable,i?s.db.table(m).where("k").anyOf(i).delete():s.db.table(m).clear()})).then(function(){return l})):l}var uc=(ft.prototype._trans=function(s,i,l){var f=this._tx||Ae.trans,m=this.name,y=oe&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(s==="readonly"?"read":"write"," ").concat(this.name));function _(O,D,x){if(!x.schema[m])throw new Y.NotFound("Table "+m+" not part of transaction");return i(x.idbtrans,x)}var k=Or();try{var I=f&&f.db._novip===this.db._novip?f===Ae.trans?f._promise(s,_,l):Kn(function(){return f._promise(s,_,l)},{trans:f,transless:Ae.transless||Ae}):(function O(D,x,M,S){if(D.idbdb&&(D._state.openComplete||Ae.letThrough||D._vip)){var $=D._createTransaction(x,M,D._dbSchema);try{$.create(),D._state.PR1398_maxLoop=3}catch(F){return F.name===ee.InvalidState&&D.isOpen()&&0<--D._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),D.close({disableAutoOpen:!1}),D.open().then(function(){return O(D,x,M,S)})):bt(F)}return $._promise(x,function(F,T){return Kn(function(){return Ae.trans=$,S(F,T,$)})}).then(function(F){if(x==="readwrite")try{$.idbtrans.commit()}catch{}return x==="readonly"?F:$._completion.then(function(){return F})})}if(D._state.openComplete)return bt(new Y.DatabaseClosed(D._state.dbOpenError));if(!D._state.isBeingOpened){if(!D._state.autoOpen)return bt(new Y.DatabaseClosed);D.open().catch(w)}return D._state.dbReadyPromise.then(function(){return O(D,x,M,S)})})(this.db,s,[this.name],_);return y&&(I._consoleTask=y,I=I.catch(function(O){return console.trace(O),bt(O)})),I}finally{k&&Rr()}},ft.prototype.get=function(s,i){var l=this;return s&&s.constructor===Object?this.where(s).first(i):s==null?bt(new Y.Type("Invalid argument to Table.get()")):this._trans("readonly",function(f){return l.core.get({trans:f,key:s}).then(function(m){return l.hook.reading.fire(m)})}).then(i)},ft.prototype.where=function(s){if(typeof s=="string")return new this.db.WhereClause(this,s);if(u(s))return new this.db.WhereClause(this,"[".concat(s.join("+"),"]"));var i=c(s);if(i.length===1)return this.where(i[0]).equals(s[i[0]]);var l=this.schema.indexes.concat(this.schema.primKey).filter(function(k){if(k.compound&&i.every(function(O){return 0<=k.keyPath.indexOf(O)})){for(var I=0;I<i.length;++I)if(i.indexOf(k.keyPath[I])===-1)return!1;return!0}return!1}).sort(function(k,I){return k.keyPath.length-I.keyPath.length})[0];if(l&&this.db._maxKey!==ur){var y=l.keyPath.slice(0,i.length);return this.where(y).equals(y.map(function(I){return s[I]}))}!l&&oe&&console.warn("The query ".concat(JSON.stringify(s)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(i.join("+"),"]"));var f=this.schema.idxByName;function m(k,I){return Qe(k,I)===0}var _=i.reduce(function(x,I){var O=x[0],D=x[1],x=f[I],M=s[I];return[O||x,O||!x?dr(D,x&&x.multi?function(S){return S=ce(S,I),u(S)&&S.some(function($){return m(M,$)})}:function(S){return m(M,ce(S,I))}):D]},[null,null]),y=_[0],_=_[1];return y?this.where(y.name).equals(s[y.keyPath]).filter(_):l?this.filter(_):this.where(i).equals("")},ft.prototype.filter=function(s){return this.toCollection().and(s)},ft.prototype.count=function(s){return this.toCollection().count(s)},ft.prototype.offset=function(s){return this.toCollection().offset(s)},ft.prototype.limit=function(s){return this.toCollection().limit(s)},ft.prototype.each=function(s){return this.toCollection().each(s)},ft.prototype.toArray=function(s){return this.toCollection().toArray(s)},ft.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},ft.prototype.orderBy=function(s){return new this.db.Collection(new this.db.WhereClause(this,u(s)?"[".concat(s.join("+"),"]"):s))},ft.prototype.reverse=function(){return this.toCollection().reverse()},ft.prototype.mapToClass=function(s){var i,l=this.db,f=this.name;function m(){return i!==null&&i.apply(this,arguments)||this}(this.schema.mappedClass=s).prototype instanceof ac&&((function(I,O){if(typeof O!="function"&&O!==null)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");function D(){this.constructor=I}n(I,O),I.prototype=O===null?Object.create(O):(D.prototype=O.prototype,new D)})(m,i=s),Object.defineProperty(m.prototype,"db",{get:function(){return l},enumerable:!1,configurable:!0}),m.prototype.table=function(){return f},s=m);for(var y=new Set,_=s.prototype;_;_=h(_))Object.getOwnPropertyNames(_).forEach(function(I){return y.add(I)});function k(I){if(!I)return I;var O,D=Object.create(s.prototype);for(O in I)if(!y.has(O))try{D[O]=I[O]}catch{}return D}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=k,this.hook("reading",k),s},ft.prototype.defineClass=function(){return this.mapToClass(function(s){d(this,s)})},ft.prototype.add=function(s,i){var l=this,f=this.schema.primKey,m=f.auto,y=f.keyPath,_=s;return y&&m&&(_=Js(y)(s)),this._trans("readwrite",function(k){return l.core.mutate({trans:k,type:"add",keys:i!=null?[i]:null,values:[_]})}).then(function(k){return k.numFailures?ve.reject(k.failures[0]):k.lastResult}).then(function(k){if(y)try{Ie(s,y,k)}catch{}return k})},ft.prototype.update=function(s,i){return typeof s!="object"||u(s)?this.where(":id").equals(s).modify(i):(s=ce(s,this.schema.primKey.keyPath),s===void 0?bt(new Y.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(s).modify(i))},ft.prototype.put=function(s,i){var l=this,f=this.schema.primKey,m=f.auto,y=f.keyPath,_=s;return y&&m&&(_=Js(y)(s)),this._trans("readwrite",function(k){return l.core.mutate({trans:k,type:"put",values:[_],keys:i!=null?[i]:null})}).then(function(k){return k.numFailures?ve.reject(k.failures[0]):k.lastResult}).then(function(k){if(y)try{Ie(s,y,k)}catch{}return k})},ft.prototype.delete=function(s){var i=this;return this._trans("readwrite",function(l){return i.core.mutate({trans:l,type:"delete",keys:[s]}).then(function(f){return Xs(i,[s],f)}).then(function(f){return f.numFailures?ve.reject(f.failures[0]):void 0})})},ft.prototype.clear=function(){var s=this;return this._trans("readwrite",function(i){return s.core.mutate({trans:i,type:"deleteRange",range:ic}).then(function(l){return Xs(s,null,l)})}).then(function(i){return i.numFailures?ve.reject(i.failures[0]):void 0})},ft.prototype.bulkGet=function(s){var i=this;return this._trans("readonly",function(l){return i.core.getMany({keys:s,trans:l}).then(function(f){return f.map(function(m){return i.hook.reading.fire(m)})})})},ft.prototype.bulkAdd=function(s,i,l){var f=this,m=Array.isArray(i)?i:void 0,y=(l=l||(m?void 0:i))?l.allKeys:void 0;return this._trans("readwrite",function(_){var O=f.schema.primKey,k=O.auto,O=O.keyPath;if(O&&m)throw new Y.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(m&&m.length!==s.length)throw new Y.InvalidArgument("Arguments objects and keys must have the same length");var I=s.length,O=O&&k?s.map(Js(O)):s;return f.core.mutate({trans:_,type:"add",keys:m,values:O,wantResults:y}).then(function($){var x=$.numFailures,M=$.results,S=$.lastResult,$=$.failures;if(x===0)return y?M:S;throw new mt("".concat(f.name,".bulkAdd(): ").concat(x," of ").concat(I," operations failed"),$)})})},ft.prototype.bulkPut=function(s,i,l){var f=this,m=Array.isArray(i)?i:void 0,y=(l=l||(m?void 0:i))?l.allKeys:void 0;return this._trans("readwrite",function(_){var O=f.schema.primKey,k=O.auto,O=O.keyPath;if(O&&m)throw new Y.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(m&&m.length!==s.length)throw new Y.InvalidArgument("Arguments objects and keys must have the same length");var I=s.length,O=O&&k?s.map(Js(O)):s;return f.core.mutate({trans:_,type:"put",keys:m,values:O,wantResults:y}).then(function($){var x=$.numFailures,M=$.results,S=$.lastResult,$=$.failures;if(x===0)return y?M:S;throw new mt("".concat(f.name,".bulkPut(): ").concat(x," of ").concat(I," operations failed"),$)})})},ft.prototype.bulkUpdate=function(s){var i=this,l=this.core,f=s.map(function(_){return _.key}),m=s.map(function(_){return _.changes}),y=[];return this._trans("readwrite",function(_){return l.getMany({trans:_,keys:f,cache:"clone"}).then(function(k){var I=[],O=[];s.forEach(function(x,M){var S=x.key,$=x.changes,F=k[M];if(F){for(var T=0,B=Object.keys($);T<B.length;T++){var V=B[T],z=$[V];if(V===i.schema.primKey.keyPath){if(Qe(z,S)!==0)throw new Y.Constraint("Cannot update primary key in bulkUpdate()")}else Ie(F,V,z)}y.push(M),I.push(S),O.push(F)}});var D=I.length;return l.mutate({trans:_,type:"put",keys:I,values:O,updates:{keys:f,changeSpecs:m}}).then(function(x){var M=x.numFailures,S=x.failures;if(M===0)return D;for(var $=0,F=Object.keys(S);$<F.length;$++){var T,B=F[$],V=y[Number(B)];V!=null&&(T=S[B],delete S[B],S[V]=T)}throw new mt("".concat(i.name,".bulkUpdate(): ").concat(M," of ").concat(D," operations failed"),S)})})})},ft.prototype.bulkDelete=function(s){var i=this,l=s.length;return this._trans("readwrite",function(f){return i.core.mutate({trans:f,type:"delete",keys:s}).then(function(m){return Xs(i,s,m)})}).then(function(_){var m=_.numFailures,y=_.lastResult,_=_.failures;if(m===0)return y;throw new mt("".concat(i.name,".bulkDelete(): ").concat(m," of ").concat(l," operations failed"),_)})},ft);function ft(){}function ns(s){function i(_,k){if(k){for(var I=arguments.length,O=new Array(I-1);--I;)O[I-1]=arguments[I];return l[_].subscribe.apply(null,O),s}if(typeof _=="string")return l[_]}var l={};i.addEventType=y;for(var f=1,m=arguments.length;f<m;++f)y(arguments[f]);return i;function y(_,k,I){if(typeof _!="object"){var O;k=k||pe;var D={subscribers:[],fire:I=I||w,subscribe:function(x){D.subscribers.indexOf(x)===-1&&(D.subscribers.push(x),D.fire=k(D.fire,x))},unsubscribe:function(x){D.subscribers=D.subscribers.filter(function(M){return M!==x}),D.fire=D.subscribers.reduce(k,I)}};return l[_]=i[_]=D}c(O=_).forEach(function(x){var M=O[x];if(u(M))y(x,O[x][0],O[x][1]);else{if(M!=="asap")throw new Y.InvalidArgument("Invalid event config");var S=y(x,A,function(){for(var $=arguments.length,F=new Array($);$--;)F[$]=arguments[$];S.subscribers.forEach(function(T){ne(function(){T.apply(null,F)})})})}})}}function rs(s,i){return q(i).from({prototype:s}),i}function Tr(s,i){return!(s.filter||s.algorithm||s.or)&&(i?s.justLimit:!s.replayFilter)}function gi(s,i){s.filter=dr(s.filter,i)}function yi(s,i,l){var f=s.replayFilter;s.replayFilter=f?function(){return dr(f(),i())}:i,s.justLimit=l&&!f}function Zs(s,i){if(s.isPrimKey)return i.primaryKey;var l=i.getIndexByKeyPath(s.index);if(!l)throw new Y.Schema("KeyPath "+s.index+" on object store "+i.name+" is not indexed");return l}function dc(s,i,l){var f=Zs(s,i.schema);return i.openCursor({trans:l,values:!s.keysOnly,reverse:s.dir==="prev",unique:!!s.unique,query:{index:f,range:s.range}})}function eo(s,i,l,f){var m=s.replayFilter?dr(s.filter,s.replayFilter()):s.filter;if(s.or){var y={},_=function(k,I,O){var D,x;m&&!m(I,O,function(M){return I.stop(M)},function(M){return I.fail(M)})||((x=""+(D=I.primaryKey))=="[object ArrayBuffer]"&&(x=""+new Uint8Array(D)),g(y,x)||(y[x]=!0,i(k,I,O)))};return Promise.all([s.or._iterate(_,l),fc(dc(s,f,l),s.algorithm,_,!s.keysOnly&&s.valueMapper)])}return fc(dc(s,f,l),dr(s.algorithm,m),i,!s.keysOnly&&s.valueMapper)}function fc(s,i,l,f){var m=pt(f?function(y,_,k){return l(f(y),_,k)}:l);return s.then(function(y){if(y)return y.start(function(){var _=function(){return y.continue()};i&&!i(y,function(k){return _=k},function(k){y.stop(k),_=w},function(k){y.fail(k),_=w})||m(y.value,y,function(k){return _=k}),_()})})}var ss=(pc.prototype.execute=function(s){var i=this["@@propmod"];if(i.add!==void 0){var l=i.add;if(u(l))return o(o([],u(s)?s:[],!0),l).sort();if(typeof l=="number")return(Number(s)||0)+l;if(typeof l=="bigint")try{return BigInt(s)+l}catch{return BigInt(0)+l}throw new TypeError("Invalid term ".concat(l))}if(i.remove!==void 0){var f=i.remove;if(u(f))return u(s)?s.filter(function(m){return!f.includes(m)}).sort():[];if(typeof f=="number")return Number(s)-f;if(typeof f=="bigint")try{return BigInt(s)-f}catch{return BigInt(0)-f}throw new TypeError("Invalid subtrahend ".concat(f))}return l=(l=i.replacePrefix)===null||l===void 0?void 0:l[0],l&&typeof s=="string"&&s.startsWith(l)?i.replacePrefix[1]+s.substring(l.length):s},pc);function pc(s){this["@@propmod"]=s}var zd=(st.prototype._read=function(s,i){var l=this._ctx;return l.error?l.table._trans(null,bt.bind(null,l.error)):l.table._trans("readonly",s).then(i)},st.prototype._write=function(s){var i=this._ctx;return i.error?i.table._trans(null,bt.bind(null,i.error)):i.table._trans("readwrite",s,"locked")},st.prototype._addAlgorithm=function(s){var i=this._ctx;i.algorithm=dr(i.algorithm,s)},st.prototype._iterate=function(s,i){return eo(this._ctx,s,i,this._ctx.table.core)},st.prototype.clone=function(s){var i=Object.create(this.constructor.prototype),l=Object.create(this._ctx);return s&&d(l,s),i._ctx=l,i},st.prototype.raw=function(){return this._ctx.valueMapper=null,this},st.prototype.each=function(s){var i=this._ctx;return this._read(function(l){return eo(i,s,l,i.table.core)})},st.prototype.count=function(s){var i=this;return this._read(function(l){var f=i._ctx,m=f.table.core;if(Tr(f,!0))return m.count({trans:l,query:{index:Zs(f,m.schema),range:f.range}}).then(function(_){return Math.min(_,f.limit)});var y=0;return eo(f,function(){return++y,!1},l,m).then(function(){return y})}).then(s)},st.prototype.sortBy=function(s,i){var l=s.split(".").reverse(),f=l[0],m=l.length-1;function y(I,O){return O?y(I[l[O]],O-1):I[f]}var _=this._ctx.dir==="next"?1:-1;function k(I,O){return Qe(y(I,m),y(O,m))*_}return this.toArray(function(I){return I.sort(k)}).then(i)},st.prototype.toArray=function(s){var i=this;return this._read(function(l){var f=i._ctx;if(f.dir==="next"&&Tr(f,!0)&&0<f.limit){var m=f.valueMapper,y=Zs(f,f.table.core.schema);return f.table.core.query({trans:l,limit:f.limit,values:!0,query:{index:y,range:f.range}}).then(function(k){return k=k.result,m?k.map(m):k})}var _=[];return eo(f,function(k){return _.push(k)},l,f.table.core).then(function(){return _})},s)},st.prototype.offset=function(s){var i=this._ctx;return s<=0||(i.offset+=s,Tr(i)?yi(i,function(){var l=s;return function(f,m){return l===0||(l===1?--l:m(function(){f.advance(l),l=0}),!1)}}):yi(i,function(){var l=s;return function(){return--l<0}})),this},st.prototype.limit=function(s){return this._ctx.limit=Math.min(this._ctx.limit,s),yi(this._ctx,function(){var i=s;return function(l,f,m){return--i<=0&&f(m),0<=i}},!0),this},st.prototype.until=function(s,i){return gi(this._ctx,function(l,f,m){return!s(l.value)||(f(m),i)}),this},st.prototype.first=function(s){return this.limit(1).toArray(function(i){return i[0]}).then(s)},st.prototype.last=function(s){return this.reverse().first(s)},st.prototype.filter=function(s){var i;return gi(this._ctx,function(l){return s(l.value)}),(i=this._ctx).isMatch=dr(i.isMatch,s),this},st.prototype.and=function(s){return this.filter(s)},st.prototype.or=function(s){return new this.db.WhereClause(this._ctx.table,s,this)},st.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},st.prototype.desc=function(){return this.reverse()},st.prototype.eachKey=function(s){var i=this._ctx;return i.keysOnly=!i.isMatch,this.each(function(l,f){s(f.key,f)})},st.prototype.eachUniqueKey=function(s){return this._ctx.unique="unique",this.eachKey(s)},st.prototype.eachPrimaryKey=function(s){var i=this._ctx;return i.keysOnly=!i.isMatch,this.each(function(l,f){s(f.primaryKey,f)})},st.prototype.keys=function(s){var i=this._ctx;i.keysOnly=!i.isMatch;var l=[];return this.each(function(f,m){l.push(m.key)}).then(function(){return l}).then(s)},st.prototype.primaryKeys=function(s){var i=this._ctx;if(i.dir==="next"&&Tr(i,!0)&&0<i.limit)return this._read(function(f){var m=Zs(i,i.table.core.schema);return i.table.core.query({trans:f,values:!1,limit:i.limit,query:{index:m,range:i.range}})}).then(function(f){return f.result}).then(s);i.keysOnly=!i.isMatch;var l=[];return this.each(function(f,m){l.push(m.primaryKey)}).then(function(){return l}).then(s)},st.prototype.uniqueKeys=function(s){return this._ctx.unique="unique",this.keys(s)},st.prototype.firstKey=function(s){return this.limit(1).keys(function(i){return i[0]}).then(s)},st.prototype.lastKey=function(s){return this.reverse().firstKey(s)},st.prototype.distinct=function(){var s=this._ctx,s=s.index&&s.table.schema.idxByName[s.index];if(!s||!s.multi)return this;var i={};return gi(this._ctx,function(m){var f=m.primaryKey.toString(),m=g(i,f);return i[f]=!0,!m}),this},st.prototype.modify=function(s){var i=this,l=this._ctx;return this._write(function(f){var m,y,_;_=typeof s=="function"?s:(m=c(s),y=m.length,function(B){for(var V=!1,z=0;z<y;++z){var G=m[z],ie=s[G],fe=ce(B,G);ie instanceof ss?(Ie(B,G,ie.execute(fe)),V=!0):fe!==ie&&(Ie(B,G,ie),V=!0)}return V});var k=l.table.core,x=k.schema.primaryKey,I=x.outbound,O=x.extractKey,D=200,x=i.db._options.modifyChunkSize;x&&(D=typeof x=="object"?x[k.name]||x["*"]||200:x);function M(B,G){var z=G.failures,G=G.numFailures;$+=B-G;for(var ie=0,fe=c(z);ie<fe.length;ie++){var ae=fe[ie];S.push(z[ae])}}var S=[],$=0,F=[],T=s===hc;return i.clone().primaryKeys().then(function(B){function V(G){var ie=Math.min(D,B.length-G),fe=B.slice(G,G+ie);return(T?Promise.resolve([]):k.getMany({trans:f,keys:fe,cache:"immutable"})).then(function(ae){var le=[],ye=[],he=I?[]:null,be=T?fe:[];if(!T)for(var He=0;He<ie;++He){var Je=ae[He],Ue={value:Se(Je),primKey:B[G+He]};_.call(Ue,Ue.value,Ue)!==!1&&(Ue.value==null?be.push(B[G+He]):I||Qe(O(Je),O(Ue.value))===0?(ye.push(Ue.value),I&&he.push(B[G+He])):(be.push(B[G+He]),le.push(Ue.value)))}return Promise.resolve(0<le.length&&k.mutate({trans:f,type:"add",values:le}).then(function(yt){for(var Le in yt.failures)be.splice(parseInt(Le),1);M(le.length,yt)})).then(function(){return(0<ye.length||z&&typeof s=="object")&&k.mutate({trans:f,type:"put",keys:he,values:ye,criteria:z,changeSpec:typeof s!="function"&&s,isAdditionalChunk:0<G}).then(function(yt){return M(ye.length,yt)})}).then(function(){return(0<be.length||z&&T)&&k.mutate({trans:f,type:"delete",keys:be,criteria:z,isAdditionalChunk:0<G}).then(function(yt){return Xs(l.table,be,yt)}).then(function(yt){return M(be.length,yt)})}).then(function(){return B.length>G+ie&&V(G+D)})})}var z=Tr(l)&&l.limit===1/0&&(typeof s!="function"||T)&&{index:l.index,range:l.range};return V(0).then(function(){if(0<S.length)throw new qt("Error modifying one or more objects",S,$,F);return B.length})})})},st.prototype.delete=function(){var s=this._ctx,i=s.range;return!Tr(s)||s.table.schema.yProps||!s.isPrimKey&&i.type!==3?this.modify(hc):this._write(function(l){var f=s.table.core.schema.primaryKey,m=i;return s.table.core.count({trans:l,query:{index:f,range:m}}).then(function(y){return s.table.core.mutate({trans:l,type:"deleteRange",range:m}).then(function(I){var k=I.failures,I=I.numFailures;if(I)throw new qt("Could not delete some values",Object.keys(k).map(function(O){return k[O]}),y-I);return y-I})})})},st);function st(){}var hc=function(s,i){return i.value=null};function Qd(s,i){return s<i?-1:s===i?0:1}function Yd(s,i){return i<s?-1:s===i?0:1}function Jt(s,i,l){return s=s instanceof gc?new s.Collection(s):s,s._ctx.error=new(l||TypeError)(i),s}function Fr(s){return new s.Collection(s,function(){return mc("")}).limit(0)}function to(s,i,l,f){var m,y,_,k,I,O,D,x=l.length;if(!l.every(function($){return typeof $=="string"}))return Jt(s,oc);function M($){m=$==="next"?function(T){return T.toUpperCase()}:function(T){return T.toLowerCase()},y=$==="next"?function(T){return T.toLowerCase()}:function(T){return T.toUpperCase()},_=$==="next"?Qd:Yd;var F=l.map(function(T){return{lower:y(T),upper:m(T)}}).sort(function(T,B){return _(T.lower,B.lower)});k=F.map(function(T){return T.upper}),I=F.map(function(T){return T.lower}),D=(O=$)==="next"?"":f}M("next"),s=new s.Collection(s,function(){return Wn(k[0],I[x-1]+f)}),s._ondirectionchange=function($){M($)};var S=0;return s._addAlgorithm(function($,F,T){var B=$.key;if(typeof B!="string")return!1;var V=y(B);if(i(V,I,S))return!0;for(var z=null,G=S;G<x;++G){var ie=(function(fe,ae,le,ye,he,be){for(var He=Math.min(fe.length,ye.length),Je=-1,Ue=0;Ue<He;++Ue){var yt=ae[Ue];if(yt!==ye[Ue])return he(fe[Ue],le[Ue])<0?fe.substr(0,Ue)+le[Ue]+le.substr(Ue+1):he(fe[Ue],ye[Ue])<0?fe.substr(0,Ue)+ye[Ue]+le.substr(Ue+1):0<=Je?fe.substr(0,Je)+ae[Je]+le.substr(Je+1):null;he(fe[Ue],yt)<0&&(Je=Ue)}return He<ye.length&&be==="next"?fe+le.substr(fe.length):He<fe.length&&be==="prev"?fe.substr(0,le.length):Je<0?null:fe.substr(0,Je)+ye[Je]+le.substr(Je+1)})(B,V,k[G],I[G],_,O);ie===null&&z===null?S=G+1:(z===null||0<_(z,ie))&&(z=ie)}return F(z!==null?function(){$.continue(z+D)}:T),!1}),s}function Wn(s,i,l,f){return{type:2,lower:s,upper:i,lowerOpen:l,upperOpen:f}}function mc(s){return{type:1,lower:s,upper:s}}var gc=(Object.defineProperty(St.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),St.prototype.between=function(s,i,l,f){l=l!==!1,f=f===!0;try{return 0<this._cmp(s,i)||this._cmp(s,i)===0&&(l||f)&&(!l||!f)?Fr(this):new this.Collection(this,function(){return Wn(s,i,!l,!f)})}catch{return Jt(this,On)}},St.prototype.equals=function(s){return s==null?Jt(this,On):new this.Collection(this,function(){return mc(s)})},St.prototype.above=function(s){return s==null?Jt(this,On):new this.Collection(this,function(){return Wn(s,void 0,!0)})},St.prototype.aboveOrEqual=function(s){return s==null?Jt(this,On):new this.Collection(this,function(){return Wn(s,void 0,!1)})},St.prototype.below=function(s){return s==null?Jt(this,On):new this.Collection(this,function(){return Wn(void 0,s,!1,!0)})},St.prototype.belowOrEqual=function(s){return s==null?Jt(this,On):new this.Collection(this,function(){return Wn(void 0,s)})},St.prototype.startsWith=function(s){return typeof s!="string"?Jt(this,oc):this.between(s,s+ur,!0,!0)},St.prototype.startsWithIgnoreCase=function(s){return s===""?this.startsWith(s):to(this,function(i,l){return i.indexOf(l[0])===0},[s],ur)},St.prototype.equalsIgnoreCase=function(s){return to(this,function(i,l){return i===l[0]},[s],"")},St.prototype.anyOfIgnoreCase=function(){var s=L.apply(W,arguments);return s.length===0?Fr(this):to(this,function(i,l){return l.indexOf(i)!==-1},s,"")},St.prototype.startsWithAnyOfIgnoreCase=function(){var s=L.apply(W,arguments);return s.length===0?Fr(this):to(this,function(i,l){return l.some(function(f){return i.indexOf(f)===0})},s,ur)},St.prototype.anyOf=function(){var s=this,i=L.apply(W,arguments),l=this._cmp;try{i.sort(l)}catch{return Jt(this,On)}if(i.length===0)return Fr(this);var f=new this.Collection(this,function(){return Wn(i[0],i[i.length-1])});f._ondirectionchange=function(y){l=y==="next"?s._ascending:s._descending,i.sort(l)};var m=0;return f._addAlgorithm(function(y,_,k){for(var I=y.key;0<l(I,i[m]);)if(++m===i.length)return _(k),!1;return l(I,i[m])===0||(_(function(){y.continue(i[m])}),!1)}),f},St.prototype.notEqual=function(s){return this.inAnyRange([[-1/0,s],[s,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},St.prototype.noneOf=function(){var s=L.apply(W,arguments);if(s.length===0)return new this.Collection(this);try{s.sort(this._ascending)}catch{return Jt(this,On)}var i=s.reduce(function(l,f){return l?l.concat([[l[l.length-1][1],f]]):[[-1/0,f]]},null);return i.push([s[s.length-1],this.db._maxKey]),this.inAnyRange(i,{includeLowers:!1,includeUppers:!1})},St.prototype.inAnyRange=function(B,i){var l=this,f=this._cmp,m=this._ascending,y=this._descending,_=this._min,k=this._max;if(B.length===0)return Fr(this);if(!B.every(function(V){return V[0]!==void 0&&V[1]!==void 0&&m(V[0],V[1])<=0}))return Jt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Y.InvalidArgument);var I=!i||i.includeLowers!==!1,O=i&&i.includeUppers===!0,D,x=m;function M(V,z){return x(V[0],z[0])}try{(D=B.reduce(function(V,z){for(var G=0,ie=V.length;G<ie;++G){var fe=V[G];if(f(z[0],fe[1])<0&&0<f(z[1],fe[0])){fe[0]=_(fe[0],z[0]),fe[1]=k(fe[1],z[1]);break}}return G===ie&&V.push(z),V},[])).sort(M)}catch{return Jt(this,On)}var S=0,$=O?function(V){return 0<m(V,D[S][1])}:function(V){return 0<=m(V,D[S][1])},F=I?function(V){return 0<y(V,D[S][0])}:function(V){return 0<=y(V,D[S][0])},T=$,B=new this.Collection(this,function(){return Wn(D[0][0],D[D.length-1][1],!I,!O)});return B._ondirectionchange=function(V){x=V==="next"?(T=$,m):(T=F,y),D.sort(M)},B._addAlgorithm(function(V,z,G){for(var ie,fe=V.key;T(fe);)if(++S===D.length)return z(G),!1;return!$(ie=fe)&&!F(ie)||(l._cmp(fe,D[S][1])===0||l._cmp(fe,D[S][0])===0||z(function(){x===m?V.continue(D[S][0]):V.continue(D[S][1])}),!1)}),B},St.prototype.startsWithAnyOf=function(){var s=L.apply(W,arguments);return s.every(function(i){return typeof i=="string"})?s.length===0?Fr(this):this.inAnyRange(s.map(function(i){return[i,i+ur]})):Jt(this,"startsWithAnyOf() only works with strings")},St);function St(){}function yn(s){return pt(function(i){return os(i),s(i.target.error),!1})}function os(s){s.stopPropagation&&s.stopPropagation(),s.preventDefault&&s.preventDefault()}var is="storagemutated",vi="x-storagemutated-1",zn=ns(null,is),Gd=(vn.prototype._lock=function(){return E(!Ae.global),++this._reculock,this._reculock!==1||Ae.global||(Ae.lockOwnerFor=this),this},vn.prototype._unlock=function(){if(E(!Ae.global),--this._reculock==0)for(Ae.global||(Ae.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var s=this._blockedFuncs.shift();try{lr(s[1],s[0])}catch{}}return this},vn.prototype._locked=function(){return this._reculock&&Ae.lockOwnerFor!==this},vn.prototype.create=function(s){var i=this;if(!this.mode)return this;var l=this.db.idbdb,f=this.db._state.dbOpenError;if(E(!this.idbtrans),!s&&!l)switch(f&&f.name){case"DatabaseClosedError":throw new Y.DatabaseClosed(f);case"MissingAPIError":throw new Y.MissingAPI(f.message,f);default:throw new Y.OpenFailed(f)}if(!this.active)throw new Y.TransactionInactive;return E(this._completion._state===null),(s=this.idbtrans=s||(this.db.core||l).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=pt(function(m){os(m),i._reject(s.error)}),s.onabort=pt(function(m){os(m),i.active&&i._reject(new Y.Abort(s.error)),i.active=!1,i.on("abort").fire(m)}),s.oncomplete=pt(function(){i.active=!1,i._resolve(),"mutatedParts"in s&&zn.storagemutated.fire(s.mutatedParts)}),this},vn.prototype._promise=function(s,i,l){var f=this;if(s==="readwrite"&&this.mode!=="readwrite")return bt(new Y.ReadOnly("Transaction is readonly"));if(!this.active)return bt(new Y.TransactionInactive);if(this._locked())return new ve(function(y,_){f._blockedFuncs.push([function(){f._promise(s,i,l).then(y,_)},Ae])});if(l)return Kn(function(){var y=new ve(function(_,k){f._lock();var I=i(_,k,f);I&&I.then&&I.then(_,k)});return y.finally(function(){return f._unlock()}),y._lib=!0,y});var m=new ve(function(y,_){var k=i(y,_,f);k&&k.then&&k.then(y,_)});return m._lib=!0,m},vn.prototype._root=function(){return this.parent?this.parent._root():this},vn.prototype.waitFor=function(s){var i,l=this._root(),f=ve.resolve(s);l._waitingFor?l._waitingFor=l._waitingFor.then(function(){return f}):(l._waitingFor=f,l._waitingQueue=[],i=l.idbtrans.objectStore(l.storeNames[0]),(function y(){for(++l._spinCount;l._waitingQueue.length;)l._waitingQueue.shift()();l._waitingFor&&(i.get(-1/0).onsuccess=y)})());var m=l._waitingFor;return new ve(function(y,_){f.then(function(k){return l._waitingQueue.push(pt(y.bind(null,k)))},function(k){return l._waitingQueue.push(pt(_.bind(null,k)))}).finally(function(){l._waitingFor===m&&(l._waitingFor=null)})})},vn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Y.Abort))},vn.prototype.table=function(s){var i=this._memoizedTables||(this._memoizedTables={});if(g(i,s))return i[s];var l=this.schema[s];if(!l)throw new Y.NotFound("Table "+s+" not part of transaction");return l=new this.db.Table(s,l,this),l.core=this.db.core.table(s),i[s]=l},vn);function vn(){}function bi(s,i,l,f,m,y,_,k){return{name:s,keyPath:i,unique:l,multi:f,auto:m,compound:y,src:(l&&!_?"&":"")+(f?"*":"")+(m?"++":"")+yc(i),type:k}}function yc(s){return typeof s=="string"?s:s?"["+[].join.call(s,"+")+"]":""}function _i(s,i,l){return{name:s,primKey:i,indexes:l,mappedClass:null,idxByName:(f=function(m){return[m.name,m]},l.reduce(function(m,y,_){return _=f(y,_),_&&(m[_[0]]=_[1]),m},{}))};var f}var as=function(s){try{return s.only([[]]),as=function(){return[[]]},[[]]}catch{return as=function(){return ur},ur}};function wi(s){return s==null?function(){}:typeof s=="string"?(i=s).split(".").length===1?function(l){return l[i]}:function(l){return ce(l,i)}:function(l){return ce(l,s)};var i}function vc(s){return[].slice.call(s)}var Jd=0;function cs(s){return s==null?":id":typeof s=="string"?s:"[".concat(s.join("+"),"]")}function Xd(s,i,I){function f(T){if(T.type===3)return null;if(T.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var S=T.lower,$=T.upper,F=T.lowerOpen,T=T.upperOpen;return S===void 0?$===void 0?null:i.upperBound($,!!T):$===void 0?i.lowerBound(S,!!F):i.bound(S,$,!!F,!!T)}function m(M){var S,$=M.name;return{name:$,schema:M,mutate:function(F){var T=F.trans,B=F.type,V=F.keys,z=F.values,G=F.range;return new Promise(function(ie,fe){ie=pt(ie);var ae=T.objectStore($),le=ae.keyPath==null,ye=B==="put"||B==="add";if(!ye&&B!=="delete"&&B!=="deleteRange")throw new Error("Invalid operation type: "+B);var he,be=(V||z||{length:1}).length;if(V&&z&&V.length!==z.length)throw new Error("Given keys array must have same length as given values array.");if(be===0)return ie({numFailures:0,failures:{},results:[],lastResult:void 0});function He(Ut){++yt,os(Ut)}var Je=[],Ue=[],yt=0;if(B==="deleteRange"){if(G.type===4)return ie({numFailures:yt,failures:Ue,results:[],lastResult:void 0});G.type===3?Je.push(he=ae.clear()):Je.push(he=ae.delete(f(G)))}else{var le=ye?le?[z,V]:[z,null]:[V,null],Le=le[0],Tt=le[1];if(ye)for(var Ft=0;Ft<be;++Ft)Je.push(he=Tt&&Tt[Ft]!==void 0?ae[B](Le[Ft],Tt[Ft]):ae[B](Le[Ft])),he.onerror=He;else for(Ft=0;Ft<be;++Ft)Je.push(he=ae[B](Le[Ft])),he.onerror=He}function ho(Ut){Ut=Ut.target.result,Je.forEach(function(hr,Li){return hr.error!=null&&(Ue[Li]=hr.error)}),ie({numFailures:yt,failures:Ue,results:B==="delete"?V:Je.map(function(hr){return hr.result}),lastResult:Ut})}he.onerror=function(Ut){He(Ut),ho(Ut)},he.onsuccess=ho})},getMany:function(F){var T=F.trans,B=F.keys;return new Promise(function(V,z){V=pt(V);for(var G,ie=T.objectStore($),fe=B.length,ae=new Array(fe),le=0,ye=0,he=function(Je){Je=Je.target,ae[Je._pos]=Je.result,++ye===le&&V(ae)},be=yn(z),He=0;He<fe;++He)B[He]!=null&&((G=ie.get(B[He]))._pos=He,G.onsuccess=he,G.onerror=be,++le);le===0&&V(ae)})},get:function(F){var T=F.trans,B=F.key;return new Promise(function(V,z){V=pt(V);var G=T.objectStore($).get(B);G.onsuccess=function(ie){return V(ie.target.result)},G.onerror=yn(z)})},query:(S=O,function(F){return new Promise(function(T,B){T=pt(T);var V,z,G,le=F.trans,ie=F.values,fe=F.limit,he=F.query,ae=fe===1/0?void 0:fe,ye=he.index,he=he.range,le=le.objectStore($),ye=ye.isPrimaryKey?le:le.index(ye.name),he=f(he);if(fe===0)return T({result:[]});S?((ae=ie?ye.getAll(he,ae):ye.getAllKeys(he,ae)).onsuccess=function(be){return T({result:be.target.result})},ae.onerror=yn(B)):(V=0,z=!ie&&"openKeyCursor"in ye?ye.openKeyCursor(he):ye.openCursor(he),G=[],z.onsuccess=function(be){var He=z.result;return He?(G.push(ie?He.value:He.primaryKey),++V===fe?T({result:G}):void He.continue()):T({result:G})},z.onerror=yn(B))})}),openCursor:function(F){var T=F.trans,B=F.values,V=F.query,z=F.reverse,G=F.unique;return new Promise(function(ie,fe){ie=pt(ie);var ye=V.index,ae=V.range,le=T.objectStore($),le=ye.isPrimaryKey?le:le.index(ye.name),ye=z?G?"prevunique":"prev":G?"nextunique":"next",he=!B&&"openKeyCursor"in le?le.openKeyCursor(f(ae),ye):le.openCursor(f(ae),ye);he.onerror=yn(fe),he.onsuccess=pt(function(be){var He,Je,Ue,yt,Le=he.result;Le?(Le.___id=++Jd,Le.done=!1,He=Le.continue.bind(Le),Je=(Je=Le.continuePrimaryKey)&&Je.bind(Le),Ue=Le.advance.bind(Le),yt=function(){throw new Error("Cursor not stopped")},Le.trans=T,Le.stop=Le.continue=Le.continuePrimaryKey=Le.advance=function(){throw new Error("Cursor not started")},Le.fail=pt(fe),Le.next=function(){var Tt=this,Ft=1;return this.start(function(){return Ft--?Tt.continue():Tt.stop()}).then(function(){return Tt})},Le.start=function(Tt){function Ft(){if(he.result)try{Tt()}catch(Ut){Le.fail(Ut)}else Le.done=!0,Le.start=function(){throw new Error("Cursor behind last entry")},Le.stop()}var ho=new Promise(function(Ut,hr){Ut=pt(Ut),he.onerror=yn(hr),Le.fail=hr,Le.stop=function(Li){Le.stop=Le.continue=Le.continuePrimaryKey=Le.advance=yt,Ut(Li)}});return he.onsuccess=pt(function(Ut){he.onsuccess=Ft,Ft()}),Le.continue=He,Le.continuePrimaryKey=Je,Le.advance=Ue,Ft(),ho},ie(Le)):ie(null)},fe)})},count:function(F){var T=F.query,B=F.trans,V=T.index,z=T.range;return new Promise(function(G,ie){var fe=B.objectStore($),ae=V.isPrimaryKey?fe:fe.index(V.name),fe=f(z),ae=fe?ae.count(fe):ae.count();ae.onsuccess=pt(function(le){return G(le.target.result)}),ae.onerror=yn(ie)})}}}var y,_,k,D=(_=I,k=vc((y=s).objectStoreNames),{schema:{name:y.name,tables:k.map(function(M){return _.objectStore(M)}).map(function(M){var S=M.keyPath,T=M.autoIncrement,$=u(S),F={},T={name:M.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:S==null,compound:$,keyPath:S,autoIncrement:T,unique:!0,extractKey:wi(S)},indexes:vc(M.indexNames).map(function(B){return M.index(B)}).map(function(G){var V=G.name,z=G.unique,ie=G.multiEntry,G=G.keyPath,ie={name:V,compound:u(G),keyPath:G,unique:z,multiEntry:ie,extractKey:wi(G)};return F[cs(G)]=ie}),getIndexByKeyPath:function(B){return F[cs(B)]}};return F[":id"]=T.primaryKey,S!=null&&(F[cs(S)]=T.primaryKey),T})},hasGetAll:0<k.length&&"getAll"in _.objectStore(k[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),I=D.schema,O=D.hasGetAll,D=I.tables.map(m),x={};return D.forEach(function(M){return x[M.name]=M}),{stack:"dbcore",transaction:s.transaction.bind(s),table:function(M){if(!x[M])throw new Error("Table '".concat(M,"' not found"));return x[M]},MIN_KEY:-1/0,MAX_KEY:as(i),schema:I}}function Zd(s,i,l,f){var m=l.IDBKeyRange;return l.indexedDB,{dbcore:(f=Xd(i,m,f),s.dbcore.reduce(function(y,_){return _=_.create,r(r({},y),_(y))},f))}}function no(s,f){var l=f.db,f=Zd(s._middlewares,l,s._deps,f);s.core=f.dbcore,s.tables.forEach(function(m){var y=m.name;s.core.schema.tables.some(function(_){return _.name===y})&&(m.core=s.core.table(y),s[y]instanceof s.Table&&(s[y].core=m.core))})}function ro(s,i,l,f){l.forEach(function(m){var y=f[m];i.forEach(function(_){var k=(function I(O,D){return j(O,D)||(O=h(O))&&I(O,D)})(_,m);(!k||"value"in k&&k.value===void 0)&&(_===s.Transaction.prototype||_ instanceof s.Transaction?P(_,m,{get:function(){return this.table(m)},set:function(I){C(this,m,{value:I,writable:!0,configurable:!0,enumerable:!0})}}):_[m]=new s.Table(m,y))})})}function Ci(s,i){i.forEach(function(l){for(var f in l)l[f]instanceof s.Table&&delete l[f]})}function ef(s,i){return s._cfg.version-i._cfg.version}function tf(s,i,l,f){var m=s._dbSchema;l.objectStoreNames.contains("$meta")&&!m.$meta&&(m.$meta=_i("$meta",_c("")[0],[]),s._storeNames.push("$meta"));var y=s._createTransaction("readwrite",s._storeNames,m);y.create(l),y._completion.catch(f);var _=y._reject.bind(y),k=Ae.transless||Ae;Kn(function(){return Ae.trans=y,Ae.transless=k,i!==0?(no(s,l),O=i,((I=y).storeNames.includes("$meta")?I.table("$meta").get("version").then(function(D){return D??O}):ve.resolve(O)).then(function(D){return M=D,S=y,$=l,F=[],D=(x=s)._versions,T=x._dbSchema=oo(0,x.idbdb,$),(D=D.filter(function(B){return B._cfg.version>=M})).length!==0?(D.forEach(function(B){F.push(function(){var V=T,z=B._cfg.dbschema;io(x,V,$),io(x,z,$),T=x._dbSchema=z;var G=ki(V,z);G.add.forEach(function(ye){xi($,ye[0],ye[1].primKey,ye[1].indexes)}),G.change.forEach(function(ye){if(ye.recreate)throw new Y.Upgrade("Not yet support for changing primary key");var he=$.objectStore(ye.name);ye.add.forEach(function(be){return so(he,be)}),ye.change.forEach(function(be){he.deleteIndex(be.name),so(he,be)}),ye.del.forEach(function(be){return he.deleteIndex(be)})});var ie=B._cfg.contentUpgrade;if(ie&&B._cfg.version>M){no(x,$),S._memoizedTables={};var fe=we(z);G.del.forEach(function(ye){fe[ye]=V[ye]}),Ci(x,[x.Transaction.prototype]),ro(x,[x.Transaction.prototype],c(fe),fe),S.schema=fe;var ae,le=Re(ie);return le&&$r(),G=ve.follow(function(){var ye;(ae=ie(S))&&le&&(ye=Vn.bind(null,null),ae.then(ye,ye))}),ae&&typeof ae.then=="function"?ve.resolve(ae):G.then(function(){return ae})}}),F.push(function(V){var z,G,ie=B._cfg.dbschema;z=ie,G=V,[].slice.call(G.db.objectStoreNames).forEach(function(fe){return z[fe]==null&&G.db.deleteObjectStore(fe)}),Ci(x,[x.Transaction.prototype]),ro(x,[x.Transaction.prototype],x._storeNames,x._dbSchema),S.schema=x._dbSchema}),F.push(function(V){x.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(x.idbdb.version/10)===B._cfg.version?(x.idbdb.deleteObjectStore("$meta"),delete x._dbSchema.$meta,x._storeNames=x._storeNames.filter(function(z){return z!=="$meta"})):V.objectStore("$meta").put(B._cfg.version,"version"))})}),(function B(){return F.length?ve.resolve(F.shift()(S.idbtrans)).then(B):ve.resolve()})().then(function(){bc(T,$)})):ve.resolve();var x,M,S,$,F,T}).catch(_)):(c(m).forEach(function(D){xi(l,D,m[D].primKey,m[D].indexes)}),no(s,l),void ve.follow(function(){return s.on.populate.fire(y)}).catch(_));var I,O})}function nf(s,i){bc(s._dbSchema,i),i.db.version%10!=0||i.objectStoreNames.contains("$meta")||i.db.createObjectStore("$meta").add(Math.ceil(i.db.version/10-1),"version");var l=oo(0,s.idbdb,i);io(s,s._dbSchema,i);for(var f=0,m=ki(l,s._dbSchema).change;f<m.length;f++){var y=(function(_){if(_.change.length||_.recreate)return console.warn("Unable to patch indexes of table ".concat(_.name," because it has changes on the type of index or primary key.")),{value:void 0};var k=i.objectStore(_.name);_.add.forEach(function(I){oe&&console.debug("Dexie upgrade patch: Creating missing index ".concat(_.name,".").concat(I.src)),so(k,I)})})(m[f]);if(typeof y=="object")return y.value}}function ki(s,i){var l,f={del:[],add:[],change:[]};for(l in s)i[l]||f.del.push(l);for(l in i){var m=s[l],y=i[l];if(m){var _={name:l,def:y,recreate:!1,del:[],add:[],change:[]};if(""+(m.primKey.keyPath||"")!=""+(y.primKey.keyPath||"")||m.primKey.auto!==y.primKey.auto)_.recreate=!0,f.change.push(_);else{var k=m.idxByName,I=y.idxByName,O=void 0;for(O in k)I[O]||_.del.push(O);for(O in I){var D=k[O],x=I[O];D?D.src!==x.src&&_.change.push(x):_.add.push(x)}(0<_.del.length||0<_.add.length||0<_.change.length)&&f.change.push(_)}}else f.add.push([l,y])}return f}function xi(s,i,l,f){var m=s.db.createObjectStore(i,l.keyPath?{keyPath:l.keyPath,autoIncrement:l.auto}:{autoIncrement:l.auto});return f.forEach(function(y){return so(m,y)}),m}function bc(s,i){c(s).forEach(function(l){i.db.objectStoreNames.contains(l)||(oe&&console.debug("Dexie: Creating missing table",l),xi(i,l,s[l].primKey,s[l].indexes))})}function so(s,i){s.createIndex(i.name,i.keyPath,{unique:i.unique,multiEntry:i.multi})}function oo(s,i,l){var f={};return Q(i.objectStoreNames,0).forEach(function(m){for(var y=l.objectStore(m),_=bi(yc(O=y.keyPath),O||"",!0,!1,!!y.autoIncrement,O&&typeof O!="string",!0),k=[],I=0;I<y.indexNames.length;++I){var D=y.index(y.indexNames[I]),O=D.keyPath,D=bi(D.name,O,!!D.unique,!!D.multiEntry,!1,O&&typeof O!="string",!1);k.push(D)}f[m]=_i(m,_,k)}),f}function io(s,i,l){for(var f=l.db.objectStoreNames,m=0;m<f.length;++m){var y=f[m],_=l.objectStore(y);s._hasGetAll="getAll"in _;for(var k=0;k<_.indexNames.length;++k){var I=_.indexNames[k],O=_.index(I).keyPath,D=typeof O=="string"?O:"["+Q(O).join("+")+"]";!i[y]||(O=i[y].idxByName[D])&&(O.name=I,delete i[y].idxByName[D],i[y].idxByName[I]=O)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&a.WorkerGlobalScope&&a instanceof a.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(s._hasGetAll=!1)}function _c(s){return s.split(",").map(function(i,l){var y=i.split(":"),f=(m=y[1])===null||m===void 0?void 0:m.trim(),m=(i=y[0].trim()).replace(/([&*]|\+\+)/g,""),y=/^\[/.test(m)?m.match(/^\[(.*)\]$/)[1].split("+"):m;return bi(m,y||null,/\&/.test(i),/\*/.test(i),/\+\+/.test(i),u(y),l===0,f)})}var rf=(Mr.prototype._createTableSchema=_i,Mr.prototype._parseIndexSyntax=_c,Mr.prototype._parseStoresSpec=function(s,i){var l=this;c(s).forEach(function(f){if(s[f]!==null){var m=l._parseIndexSyntax(s[f]),y=m.shift();if(!y)throw new Y.Schema("Invalid schema for table "+f+": "+s[f]);if(y.unique=!0,y.multi)throw new Y.Schema("Primary key cannot be multiEntry*");m.forEach(function(_){if(_.auto)throw new Y.Schema("Only primary key can be marked as autoIncrement (++)");if(!_.keyPath)throw new Y.Schema("Index must have a name and cannot be an empty string")}),m=l._createTableSchema(f,y,m),i[f]=m}})},Mr.prototype.stores=function(l){var i=this.db;this._cfg.storesSource=this._cfg.storesSource?d(this._cfg.storesSource,l):l;var l=i._versions,f={},m={};return l.forEach(function(y){d(f,y._cfg.storesSource),m=y._cfg.dbschema={},y._parseStoresSpec(f,m)}),i._dbSchema=m,Ci(i,[i._allTables,i,i.Transaction.prototype]),ro(i,[i._allTables,i,i.Transaction.prototype,this._cfg.tables],c(m),m),i._storeNames=c(m),this},Mr.prototype.upgrade=function(s){return this._cfg.contentUpgrade=ue(this._cfg.contentUpgrade||w,s),this},Mr);function Mr(){}function Ai(s,i){var l=s._dbNamesDB;return l||(l=s._dbNamesDB=new Rn(Gs,{addons:[],indexedDB:s,IDBKeyRange:i})).version(1).stores({dbnames:"name"}),l.table("dbnames")}function Ei(s){return s&&typeof s.databases=="function"}function Ii(s){return Kn(function(){return Ae.letThrough=!0,s()})}function Si(s){return!("from"in s)}var Dt=function(s,i){if(!this){var l=new Dt;return s&&"d"in s&&d(l,s),l}d(this,arguments.length?{d:1,from:s,to:1<arguments.length?i:s}:{d:0})};function ls(s,i,l){var f=Qe(i,l);if(!isNaN(f)){if(0<f)throw RangeError();if(Si(s))return d(s,{from:i,to:l,d:1});var m=s.l,f=s.r;if(Qe(l,s.from)<0)return m?ls(m,i,l):s.l={from:i,to:l,d:1,l:null,r:null},Cc(s);if(0<Qe(i,s.to))return f?ls(f,i,l):s.r={from:i,to:l,d:1,l:null,r:null},Cc(s);Qe(i,s.from)<0&&(s.from=i,s.l=null,s.d=f?f.d+1:1),0<Qe(l,s.to)&&(s.to=l,s.r=null,s.d=s.l?s.l.d+1:1),l=!s.r,m&&!s.l&&us(s,m),f&&l&&us(s,f)}}function us(s,i){Si(i)||(function l(f,I){var y=I.from,_=I.to,k=I.l,I=I.r;ls(f,y,_),k&&l(f,k),I&&l(f,I)})(s,i)}function wc(s,i){var l=ao(i),f=l.next();if(f.done)return!1;for(var m=f.value,y=ao(s),_=y.next(m.from),k=_.value;!f.done&&!_.done;){if(Qe(k.from,m.to)<=0&&0<=Qe(k.to,m.from))return!0;Qe(m.from,k.from)<0?m=(f=l.next(k.from)).value:k=(_=y.next(m.from)).value}return!1}function ao(s){var i=Si(s)?null:{s:0,n:s};return{next:function(l){for(var f=0<arguments.length;i;)switch(i.s){case 0:if(i.s=1,f)for(;i.n.l&&Qe(l,i.n.from)<0;)i={up:i,n:i.n.l,s:1};else for(;i.n.l;)i={up:i,n:i.n.l,s:1};case 1:if(i.s=2,!f||Qe(l,i.n.to)<=0)return{value:i.n,done:!1};case 2:if(i.n.r){i.s=3,i={up:i,n:i.n.r,s:0};continue}case 3:i=i.up}return{done:!0}}}}function Cc(s){var i,l,f=(((i=s.r)===null||i===void 0?void 0:i.d)||0)-(((l=s.l)===null||l===void 0?void 0:l.d)||0),m=1<f?"r":f<-1?"l":"";m&&(i=m=="r"?"l":"r",l=r({},s),f=s[m],s.from=f.from,s.to=f.to,s[m]=f[m],l[m]=f[i],(s[i]=l).d=kc(l)),s.d=kc(s)}function kc(l){var i=l.r,l=l.l;return(i?l?Math.max(i.d,l.d):i.d:l?l.d:0)+1}function co(s,i){return c(i).forEach(function(l){s[l]?us(s[l],i[l]):s[l]=(function f(m){var y,_,k={};for(y in m)g(m,y)&&(_=m[y],k[y]=!_||typeof _!="object"||je.has(_.constructor)?_:f(_));return k})(i[l])}),s}function Pi(s,i){return s.all||i.all||Object.keys(s).some(function(l){return i[l]&&wc(i[l],s[l])})}b(Dt.prototype,((sn={add:function(s){return us(this,s),this},addKey:function(s){return ls(this,s,s),this},addKeys:function(s){var i=this;return s.forEach(function(l){return ls(i,l,l)}),this},hasKey:function(s){var i=ao(this).next(s).value;return i&&Qe(i.from,s)<=0&&0<=Qe(i.to,s)}})[We]=function(){return ao(this)},sn));var fr={},Oi={},Ri=!1;function lo(s){co(Oi,s),Ri||(Ri=!0,setTimeout(function(){Ri=!1,$i(Oi,!(Oi={}))},0))}function $i(s,i){i===void 0&&(i=!1);var l=new Set;if(s.all)for(var f=0,m=Object.values(fr);f<m.length;f++)xc(_=m[f],s,l,i);else for(var y in s){var _,k=/^idb\:\/\/(.*)\/(.*)\//.exec(y);k&&(y=k[1],k=k[2],(_=fr["idb://".concat(y,"/").concat(k)])&&xc(_,s,l,i))}l.forEach(function(I){return I()})}function xc(s,i,l,f){for(var m=[],y=0,_=Object.entries(s.queries.query);y<_.length;y++){for(var k=_[y],I=k[0],O=[],D=0,x=k[1];D<x.length;D++){var M=x[D];Pi(i,M.obsSet)?M.subscribers.forEach(function(T){return l.add(T)}):f&&O.push(M)}f&&m.push([I,O])}if(f)for(var S=0,$=m;S<$.length;S++){var F=$[S],I=F[0],O=F[1];s.queries.query[I]=O}}function sf(s){var i=s._state,l=s._deps.indexedDB;if(i.isBeingOpened||s.idbdb)return i.dbReadyPromise.then(function(){return i.dbOpenError?bt(i.dbOpenError):s});i.isBeingOpened=!0,i.dbOpenError=null,i.openComplete=!1;var f=i.openCanceller,m=Math.round(10*s.verno),y=!1;function _(){if(i.openCanceller!==f)throw new Y.DatabaseClosed("db.open() was cancelled")}function k(){return new ve(function(M,S){if(_(),!l)throw new Y.MissingAPI;var $=s.name,F=i.autoSchema||!m?l.open($):l.open($,m);if(!F)throw new Y.MissingAPI;F.onerror=yn(S),F.onblocked=pt(s._fireOnBlocked),F.onupgradeneeded=pt(function(T){var B;D=F.transaction,i.autoSchema&&!s._options.allowEmptyDB?(F.onerror=os,D.abort(),F.result.close(),(B=l.deleteDatabase($)).onsuccess=B.onerror=pt(function(){S(new Y.NoSuchDatabase("Database ".concat($," doesnt exist")))})):(D.onerror=yn(S),T=T.oldVersion>Math.pow(2,62)?0:T.oldVersion,x=T<1,s.idbdb=F.result,y&&nf(s,D),tf(s,T/10,D,S))},S),F.onsuccess=pt(function(){D=null;var T,B,V,z,G,ie=s.idbdb=F.result,fe=Q(ie.objectStoreNames);if(0<fe.length)try{var ae=ie.transaction((z=fe).length===1?z[0]:z,"readonly");if(i.autoSchema)B=ie,V=ae,(T=s).verno=B.version/10,V=T._dbSchema=oo(0,B,V),T._storeNames=Q(B.objectStoreNames,0),ro(T,[T._allTables],c(V),V);else if(io(s,s._dbSchema,ae),((G=ki(oo(0,(G=s).idbdb,ae),G._dbSchema)).add.length||G.change.some(function(le){return le.add.length||le.change.length}))&&!y)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),ie.close(),m=ie.version+1,y=!0,M(k());no(s,ae)}catch{}Dr.push(s),ie.onversionchange=pt(function(le){i.vcFired=!0,s.on("versionchange").fire(le)}),ie.onclose=pt(function(le){s.on("close").fire(le)}),x&&(G=s._deps,ae=$,ie=G.indexedDB,G=G.IDBKeyRange,Ei(ie)||ae===Gs||Ai(ie,G).put({name:ae}).catch(w)),M()},S)}).catch(function(M){switch(M?.name){case"UnknownError":if(0<i.PR1398_maxLoop)return i.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),k();break;case"VersionError":if(0<m)return m=0,k()}return ve.reject(M)})}var I,O=i.dbReadyResolve,D=null,x=!1;return ve.race([f,(typeof navigator>"u"?ve.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(M){function S(){return indexedDB.databases().finally(M)}I=setInterval(S,100),S()}).finally(function(){return clearInterval(I)}):Promise.resolve()).then(k)]).then(function(){return _(),i.onReadyBeingFired=[],ve.resolve(Ii(function(){return s.on.ready.fire(s.vip)})).then(function M(){if(0<i.onReadyBeingFired.length){var S=i.onReadyBeingFired.reduce(ue,w);return i.onReadyBeingFired=[],ve.resolve(Ii(function(){return S(s.vip)})).then(M)}})}).finally(function(){i.openCanceller===f&&(i.onReadyBeingFired=null,i.isBeingOpened=!1)}).catch(function(M){i.dbOpenError=M;try{D&&D.abort()}catch{}return f===i.openCanceller&&s._close(),bt(M)}).finally(function(){i.openComplete=!0,O()}).then(function(){var M;return x&&(M={},s.tables.forEach(function(S){S.schema.indexes.forEach(function($){$.name&&(M["idb://".concat(s.name,"/").concat(S.name,"/").concat($.name)]=new Dt(-1/0,[[[]]]))}),M["idb://".concat(s.name,"/").concat(S.name,"/")]=M["idb://".concat(s.name,"/").concat(S.name,"/:dels")]=new Dt(-1/0,[[[]]])}),zn(is).fire(M),$i(M,!0)),s})}function Di(s){function i(y){return s.next(y)}var l=m(i),f=m(function(y){return s.throw(y)});function m(y){return function(I){var k=y(I),I=k.value;return k.done?I:I&&typeof I.then=="function"?I.then(l,f):u(I)?Promise.all(I).then(l,f):l(I)}}return m(i)()}function uo(s,i,l){for(var f=u(s)?s.slice():[s],m=0;m<l;++m)f.push(i);return f}var of={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(s){return r(r({},s),{table:function(i){var l=s.table(i),f=l.schema,m={},y=[];function _(x,M,S){var $=cs(x),F=m[$]=m[$]||[],T=x==null?0:typeof x=="string"?1:x.length,B=0<M,B=r(r({},S),{name:B?"".concat($,"(virtual-from:").concat(S.name,")"):S.name,lowLevelIndex:S,isVirtual:B,keyTail:M,keyLength:T,extractKey:wi(x),unique:!B&&S.unique});return F.push(B),B.isPrimaryKey||y.push(B),1<T&&_(T===2?x[0]:x.slice(0,T-1),M+1,S),F.sort(function(V,z){return V.keyTail-z.keyTail}),B}i=_(f.primaryKey.keyPath,0,f.primaryKey),m[":id"]=[i];for(var k=0,I=f.indexes;k<I.length;k++){var O=I[k];_(O.keyPath,0,O)}function D(x){var M,S=x.query.index;return S.isVirtual?r(r({},x),{query:{index:S.lowLevelIndex,range:(M=x.query.range,S=S.keyTail,{type:M.type===1?2:M.type,lower:uo(M.lower,M.lowerOpen?s.MAX_KEY:s.MIN_KEY,S),lowerOpen:!0,upper:uo(M.upper,M.upperOpen?s.MIN_KEY:s.MAX_KEY,S),upperOpen:!0})}}):x}return r(r({},l),{schema:r(r({},f),{primaryKey:i,indexes:y,getIndexByKeyPath:function(x){return(x=m[cs(x)])&&x[0]}}),count:function(x){return l.count(D(x))},query:function(x){return l.query(D(x))},openCursor:function(x){var M=x.query.index,S=M.keyTail,$=M.isVirtual,F=M.keyLength;return $?l.openCursor(D(x)).then(function(B){return B&&T(B)}):l.openCursor(x);function T(B){return Object.create(B,{continue:{value:function(V){V!=null?B.continue(uo(V,x.reverse?s.MAX_KEY:s.MIN_KEY,S)):x.unique?B.continue(B.key.slice(0,F).concat(x.reverse?s.MIN_KEY:s.MAX_KEY,S)):B.continue()}},continuePrimaryKey:{value:function(V,z){B.continuePrimaryKey(uo(V,s.MAX_KEY,S),z)}},primaryKey:{get:function(){return B.primaryKey}},key:{get:function(){var V=B.key;return F===1?V[0]:V.slice(0,F)}},value:{get:function(){return B.value}}})}}})}})}};function Ti(s,i,l,f){return l=l||{},f=f||"",c(s).forEach(function(m){var y,_,k;g(i,m)?(y=s[m],_=i[m],typeof y=="object"&&typeof _=="object"&&y&&_?(k=nt(y))!==nt(_)?l[f+m]=i[m]:k==="Object"?Ti(y,_,l,f+m+"."):y!==_&&(l[f+m]=i[m]):y!==_&&(l[f+m]=i[m])):l[f+m]=void 0}),c(i).forEach(function(m){g(s,m)||(l[f+m]=i[m])}),l}function Fi(s,i){return i.type==="delete"?i.keys:i.keys||i.values.map(s.extractKey)}var af={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(s){return r(r({},s),{table:function(i){var l=s.table(i),f=l.schema.primaryKey;return r(r({},l),{mutate:function(m){var y=Ae.trans,_=y.table(i).hook,k=_.deleting,I=_.creating,O=_.updating;switch(m.type){case"add":if(I.fire===w)break;return y._promise("readwrite",function(){return D(m)},!0);case"put":if(I.fire===w&&O.fire===w)break;return y._promise("readwrite",function(){return D(m)},!0);case"delete":if(k.fire===w)break;return y._promise("readwrite",function(){return D(m)},!0);case"deleteRange":if(k.fire===w)break;return y._promise("readwrite",function(){return(function x(M,S,$){return l.query({trans:M,values:!1,query:{index:f,range:S},limit:$}).then(function(F){var T=F.result;return D({type:"delete",keys:T,trans:M}).then(function(B){return 0<B.numFailures?Promise.reject(B.failures[0]):T.length<$?{failures:[],numFailures:0,lastResult:void 0}:x(M,r(r({},S),{lower:T[T.length-1],lowerOpen:!0}),$)})})})(m.trans,m.range,1e4)},!0)}return l.mutate(m);function D(x){var M,S,$,F=Ae.trans,T=x.keys||Fi(f,x);if(!T)throw new Error("Keys missing");return(x=x.type==="add"||x.type==="put"?r(r({},x),{keys:T}):r({},x)).type!=="delete"&&(x.values=o([],x.values)),x.keys&&(x.keys=o([],x.keys)),M=l,$=T,((S=x).type==="add"?Promise.resolve([]):M.getMany({trans:S.trans,keys:$,cache:"immutable"})).then(function(B){var V=T.map(function(z,G){var ie,fe,ae,le=B[G],ye={onerror:null,onsuccess:null};return x.type==="delete"?k.fire.call(ye,z,le,F):x.type==="add"||le===void 0?(ie=I.fire.call(ye,z,x.values[G],F),z==null&&ie!=null&&(x.keys[G]=z=ie,f.outbound||Ie(x.values[G],f.keyPath,z))):(ie=Ti(le,x.values[G]),(fe=O.fire.call(ye,ie,z,le,F))&&(ae=x.values[G],Object.keys(fe).forEach(function(he){g(ae,he)?ae[he]=fe[he]:Ie(ae,he,fe[he])}))),ye});return l.mutate(x).then(function(z){for(var G=z.failures,ie=z.results,fe=z.numFailures,z=z.lastResult,ae=0;ae<T.length;++ae){var le=(ie||T)[ae],ye=V[ae];le==null?ye.onerror&&ye.onerror(G[ae]):ye.onsuccess&&ye.onsuccess(x.type==="put"&&B[ae]?x.values[ae]:le)}return{failures:G,results:ie,numFailures:fe,lastResult:z}}).catch(function(z){return V.forEach(function(G){return G.onerror&&G.onerror(z)}),Promise.reject(z)})})}}})}})}};function Ac(s,i,l){try{if(!i||i.keys.length<s.length)return null;for(var f=[],m=0,y=0;m<i.keys.length&&y<s.length;++m)Qe(i.keys[m],s[y])===0&&(f.push(l?Se(i.values[m]):i.values[m]),++y);return f.length===s.length?f:null}catch{return null}}var cf={stack:"dbcore",level:-1,create:function(s){return{table:function(i){var l=s.table(i);return r(r({},l),{getMany:function(f){if(!f.cache)return l.getMany(f);var m=Ac(f.keys,f.trans._cache,f.cache==="clone");return m?ve.resolve(m):l.getMany(f).then(function(y){return f.trans._cache={keys:f.keys,values:f.cache==="clone"?Se(y):y},y})},mutate:function(f){return f.type!=="add"&&(f.trans._cache=null),l.mutate(f)}})}}}};function Ec(s,i){return s.trans.mode==="readonly"&&!!s.subscr&&!s.trans.explicit&&s.trans.db._options.cache!=="disabled"&&!i.schema.primaryKey.outbound}function Ic(s,i){switch(s){case"query":return i.values&&!i.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var lf={stack:"dbcore",level:0,name:"Observability",create:function(s){var i=s.schema.name,l=new Dt(s.MIN_KEY,s.MAX_KEY);return r(r({},s),{transaction:function(f,m,y){if(Ae.subscr&&m!=="readonly")throw new Y.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Ae.querier));return s.transaction(f,m,y)},table:function(f){var m=s.table(f),y=m.schema,_=y.primaryKey,x=y.indexes,k=_.extractKey,I=_.outbound,O=_.autoIncrement&&x.filter(function(S){return S.compound&&S.keyPath.includes(_.keyPath)}),D=r(r({},m),{mutate:function(S){function $(he){return he="idb://".concat(i,"/").concat(f,"/").concat(he),z[he]||(z[he]=new Dt)}var F,T,B,V=S.trans,z=S.mutatedParts||(S.mutatedParts={}),G=$(""),ie=$(":dels"),fe=S.type,ye=S.type==="deleteRange"?[S.range]:S.type==="delete"?[S.keys]:S.values.length<50?[Fi(_,S).filter(function(he){return he}),S.values]:[],ae=ye[0],le=ye[1],ye=S.trans._cache;return u(ae)?(G.addKeys(ae),(ye=fe==="delete"||ae.length===le.length?Ac(ae,ye):null)||ie.addKeys(ae),(ye||le)&&(F=$,T=ye,B=le,y.indexes.forEach(function(he){var be=F(he.name||"");function He(Ue){return Ue!=null?he.extractKey(Ue):null}function Je(Ue){return he.multiEntry&&u(Ue)?Ue.forEach(function(yt){return be.addKey(yt)}):be.addKey(Ue)}(T||B).forEach(function(Ue,Tt){var Le=T&&He(T[Tt]),Tt=B&&He(B[Tt]);Qe(Le,Tt)!==0&&(Le!=null&&Je(Le),Tt!=null&&Je(Tt))})}))):ae?(le={from:(le=ae.lower)!==null&&le!==void 0?le:s.MIN_KEY,to:(le=ae.upper)!==null&&le!==void 0?le:s.MAX_KEY},ie.add(le),G.add(le)):(G.add(l),ie.add(l),y.indexes.forEach(function(he){return $(he.name).add(l)})),m.mutate(S).then(function(he){return!ae||S.type!=="add"&&S.type!=="put"||(G.addKeys(he.results),O&&O.forEach(function(be){for(var He=S.values.map(function(Le){return be.extractKey(Le)}),Je=be.keyPath.findIndex(function(Le){return Le===_.keyPath}),Ue=0,yt=he.results.length;Ue<yt;++Ue)He[Ue][Je]=he.results[Ue];$(be.name).addKeys(He)})),V.mutatedParts=co(V.mutatedParts||{},z),he})}}),x=function($){var F=$.query,$=F.index,F=F.range;return[$,new Dt(($=F.lower)!==null&&$!==void 0?$:s.MIN_KEY,(F=F.upper)!==null&&F!==void 0?F:s.MAX_KEY)]},M={get:function(S){return[_,new Dt(S.key)]},getMany:function(S){return[_,new Dt().addKeys(S.keys)]},count:x,query:x,openCursor:x};return c(M).forEach(function(S){D[S]=function($){var F=Ae.subscr,T=!!F,B=Ec(Ae,m)&&Ic(S,$)?$.obsSet={}:F;if(T){var V=function(le){return le="idb://".concat(i,"/").concat(f,"/").concat(le),B[le]||(B[le]=new Dt)},z=V(""),G=V(":dels"),F=M[S]($),T=F[0],F=F[1];if((S==="query"&&T.isPrimaryKey&&!$.values?G:V(T.name||"")).add(F),!T.isPrimaryKey){if(S!=="count"){var ie=S==="query"&&I&&$.values&&m.query(r(r({},$),{values:!1}));return m[S].apply(this,arguments).then(function(le){if(S==="query"){if(I&&$.values)return ie.then(function(He){return He=He.result,z.addKeys(He),le});var ye=$.values?le.result.map(k):le.result;($.values?z:G).addKeys(ye)}else if(S==="openCursor"){var he=le,be=$.values;return he&&Object.create(he,{key:{get:function(){return G.addKey(he.primaryKey),he.key}},primaryKey:{get:function(){var He=he.primaryKey;return G.addKey(He),He}},value:{get:function(){return be&&z.addKey(he.primaryKey),he.value}}})}return le})}G.add(l)}}return m[S].apply(this,arguments)}}),D}})}};function Sc(s,i,l){if(l.numFailures===0)return i;if(i.type==="deleteRange")return null;var f=i.keys?i.keys.length:"values"in i&&i.values?i.values.length:1;return l.numFailures===f?null:(i=r({},i),u(i.keys)&&(i.keys=i.keys.filter(function(m,y){return!(y in l.failures)})),"values"in i&&u(i.values)&&(i.values=i.values.filter(function(m,y){return!(y in l.failures)})),i)}function Mi(s,i){return l=s,((f=i).lower===void 0||(f.lowerOpen?0<Qe(l,f.lower):0<=Qe(l,f.lower)))&&(s=s,(i=i).upper===void 0||(i.upperOpen?Qe(s,i.upper)<0:Qe(s,i.upper)<=0));var l,f}function Pc(s,i,M,f,m,y){if(!M||M.length===0)return s;var _=i.query.index,k=_.multiEntry,I=i.query.range,O=f.schema.primaryKey.extractKey,D=_.extractKey,x=(_.lowLevelIndex||_).extractKey,M=M.reduce(function(S,$){var F=S,T=[];if($.type==="add"||$.type==="put")for(var B=new Dt,V=$.values.length-1;0<=V;--V){var z,G=$.values[V],ie=O(G);B.hasKey(ie)||(z=D(G),(k&&u(z)?z.some(function(he){return Mi(he,I)}):Mi(z,I))&&(B.addKey(ie),T.push(G)))}switch($.type){case"add":var fe=new Dt().addKeys(i.values?S.map(function(be){return O(be)}):S),F=S.concat(i.values?T.filter(function(be){return be=O(be),!fe.hasKey(be)&&(fe.addKey(be),!0)}):T.map(function(be){return O(be)}).filter(function(be){return!fe.hasKey(be)&&(fe.addKey(be),!0)}));break;case"put":var ae=new Dt().addKeys($.values.map(function(be){return O(be)}));F=S.filter(function(be){return!ae.hasKey(i.values?O(be):be)}).concat(i.values?T:T.map(function(be){return O(be)}));break;case"delete":var le=new Dt().addKeys($.keys);F=S.filter(function(be){return!le.hasKey(i.values?O(be):be)});break;case"deleteRange":var ye=$.range;F=S.filter(function(be){return!Mi(O(be),ye)})}return F},s);return M===s?s:(M.sort(function(S,$){return Qe(x(S),x($))||Qe(O(S),O($))}),i.limit&&i.limit<1/0&&(M.length>i.limit?M.length=i.limit:s.length===i.limit&&M.length<i.limit&&(m.dirty=!0)),y?Object.freeze(M):M)}function Oc(s,i){return Qe(s.lower,i.lower)===0&&Qe(s.upper,i.upper)===0&&!!s.lowerOpen==!!i.lowerOpen&&!!s.upperOpen==!!i.upperOpen}function uf(s,i){return(function(l,f,m,y){if(l===void 0)return f!==void 0?-1:0;if(f===void 0)return 1;if((f=Qe(l,f))===0){if(m&&y)return 0;if(m)return 1;if(y)return-1}return f})(s.lower,i.lower,s.lowerOpen,i.lowerOpen)<=0&&0<=(function(l,f,m,y){if(l===void 0)return f!==void 0?1:0;if(f===void 0)return-1;if((f=Qe(l,f))===0){if(m&&y)return 0;if(m)return-1;if(y)return 1}return f})(s.upper,i.upper,s.upperOpen,i.upperOpen)}function df(s,i,l,f){s.subscribers.add(l),f.addEventListener("abort",function(){var m,y;s.subscribers.delete(l),s.subscribers.size===0&&(m=s,y=i,setTimeout(function(){m.subscribers.size===0&&J(y,m)},3e3))})}var ff={stack:"dbcore",level:0,name:"Cache",create:function(s){var i=s.schema.name;return r(r({},s),{transaction:function(l,f,m){var y,_,k=s.transaction(l,f,m);return f==="readwrite"&&(_=(y=new AbortController).signal,m=function(I){return function(){if(y.abort(),f==="readwrite"){for(var O=new Set,D=0,x=l;D<x.length;D++){var M=x[D],S=fr["idb://".concat(i,"/").concat(M)];if(S){var $=s.table(M),F=S.optimisticOps.filter(function(be){return be.trans===k});if(k._explicit&&I&&k.mutatedParts)for(var T=0,B=Object.values(S.queries.query);T<B.length;T++)for(var V=0,z=(fe=B[T]).slice();V<z.length;V++)Pi((ae=z[V]).obsSet,k.mutatedParts)&&(J(fe,ae),ae.subscribers.forEach(function(be){return O.add(be)}));else if(0<F.length){S.optimisticOps=S.optimisticOps.filter(function(be){return be.trans!==k});for(var G=0,ie=Object.values(S.queries.query);G<ie.length;G++)for(var fe,ae,le,ye=0,he=(fe=ie[G]).slice();ye<he.length;ye++)(ae=he[ye]).res!=null&&k.mutatedParts&&(I&&!ae.dirty?(le=Object.isFrozen(ae.res),le=Pc(ae.res,ae.req,F,$,ae,le),ae.dirty?(J(fe,ae),ae.subscribers.forEach(function(be){return O.add(be)})):le!==ae.res&&(ae.res=le,ae.promise=ve.resolve({result:le}))):(ae.dirty&&J(fe,ae),ae.subscribers.forEach(function(be){return O.add(be)})))}}}O.forEach(function(be){return be()})}}},k.addEventListener("abort",m(!1),{signal:_}),k.addEventListener("error",m(!1),{signal:_}),k.addEventListener("complete",m(!0),{signal:_})),k},table:function(l){var f=s.table(l),m=f.schema.primaryKey;return r(r({},f),{mutate:function(y){var _=Ae.trans;if(m.outbound||_.db._options.cache==="disabled"||_.explicit||_.idbtrans.mode!=="readwrite")return f.mutate(y);var k=fr["idb://".concat(i,"/").concat(l)];return k?(_=f.mutate(y),y.type!=="add"&&y.type!=="put"||!(50<=y.values.length||Fi(m,y).some(function(I){return I==null}))?(k.optimisticOps.push(y),y.mutatedParts&&lo(y.mutatedParts),_.then(function(I){0<I.numFailures&&(J(k.optimisticOps,y),(I=Sc(0,y,I))&&k.optimisticOps.push(I),y.mutatedParts&&lo(y.mutatedParts))}),_.catch(function(){J(k.optimisticOps,y),y.mutatedParts&&lo(y.mutatedParts)})):_.then(function(I){var O=Sc(0,r(r({},y),{values:y.values.map(function(D,x){var M;return I.failures[x]?D:(D=(M=m.keyPath)!==null&&M!==void 0&&M.includes(".")?Se(D):r({},D),Ie(D,m.keyPath,I.results[x]),D)})}),I);k.optimisticOps.push(O),queueMicrotask(function(){return y.mutatedParts&&lo(y.mutatedParts)})}),_):f.mutate(y)},query:function(y){if(!Ec(Ae,f)||!Ic("query",y))return f.query(y);var _=((O=Ae.trans)===null||O===void 0?void 0:O.db._options.cache)==="immutable",x=Ae,k=x.requery,I=x.signal,O=(function($,F,T,B){var V=fr["idb://".concat($,"/").concat(F)];if(!V)return[];if(!(F=V.queries[T]))return[null,!1,V,null];var z=F[(B.query?B.query.index.name:null)||""];if(!z)return[null,!1,V,null];switch(T){case"query":var G=z.find(function(ie){return ie.req.limit===B.limit&&ie.req.values===B.values&&Oc(ie.req.query.range,B.query.range)});return G?[G,!0,V,z]:[z.find(function(ie){return("limit"in ie.req?ie.req.limit:1/0)>=B.limit&&(!B.values||ie.req.values)&&uf(ie.req.query.range,B.query.range)}),!1,V,z];case"count":return G=z.find(function(ie){return Oc(ie.req.query.range,B.query.range)}),[G,!!G,V,z]}})(i,l,"query",y),D=O[0],x=O[1],M=O[2],S=O[3];return D&&x?D.obsSet=y.obsSet:(x=f.query(y).then(function($){var F=$.result;if(D&&(D.res=F),_){for(var T=0,B=F.length;T<B;++T)Object.freeze(F[T]);Object.freeze(F)}else $.result=Se(F);return $}).catch(function($){return S&&D&&J(S,D),Promise.reject($)}),D={obsSet:y.obsSet,promise:x,subscribers:new Set,type:"query",req:y,dirty:!1},S?S.push(D):(S=[D],(M=M||(fr["idb://".concat(i,"/").concat(l)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[y.query.index.name||""]=S)),df(D,S,k,I),D.promise.then(function($){return{result:Pc($.result,y,M?.optimisticOps,f,D,_)}})}})}})}};function fo(s,i){return new Proxy(s,{get:function(l,f,m){return f==="db"?i:Reflect.get(l,f,m)}})}var Rn=(_t.prototype.version=function(s){if(isNaN(s)||s<.1)throw new Y.Type("Given version is not a positive number");if(s=Math.round(10*s)/10,this.idbdb||this._state.isBeingOpened)throw new Y.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,s);var i=this._versions,l=i.filter(function(f){return f._cfg.version===s})[0];return l||(l=new this.Version(s),i.push(l),i.sort(ef),l.stores({}),this._state.autoSchema=!1,l)},_t.prototype._whenReady=function(s){var i=this;return this.idbdb&&(this._state.openComplete||Ae.letThrough||this._vip)?s():new ve(function(l,f){if(i._state.openComplete)return f(new Y.DatabaseClosed(i._state.dbOpenError));if(!i._state.isBeingOpened){if(!i._state.autoOpen)return void f(new Y.DatabaseClosed);i.open().catch(w)}i._state.dbReadyPromise.then(l,f)}).then(s)},_t.prototype.use=function(s){var i=s.stack,l=s.create,f=s.level,m=s.name;return m&&this.unuse({stack:i,name:m}),s=this._middlewares[i]||(this._middlewares[i]=[]),s.push({stack:i,create:l,level:f??10,name:m}),s.sort(function(y,_){return y.level-_.level}),this},_t.prototype.unuse=function(s){var i=s.stack,l=s.name,f=s.create;return i&&this._middlewares[i]&&(this._middlewares[i]=this._middlewares[i].filter(function(m){return f?m.create!==f:!!l&&m.name!==l})),this},_t.prototype.open=function(){var s=this;return lr(gt,function(){return sf(s)})},_t.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var s=this._state,i=Dr.indexOf(this);if(0<=i&&Dr.splice(i,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}s.isBeingOpened||(s.dbReadyPromise=new ve(function(l){s.dbReadyResolve=l}),s.openCanceller=new ve(function(l,f){s.cancelOpen=f}))},_t.prototype.close=function(l){var i=(l===void 0?{disableAutoOpen:!0}:l).disableAutoOpen,l=this._state;i?(l.isBeingOpened&&l.cancelOpen(new Y.DatabaseClosed),this._close(),l.autoOpen=!1,l.dbOpenError=new Y.DatabaseClosed):(this._close(),l.autoOpen=this._options.autoOpen||l.isBeingOpened,l.openComplete=!1,l.dbOpenError=null)},_t.prototype.delete=function(s){var i=this;s===void 0&&(s={disableAutoOpen:!0});var l=0<arguments.length&&typeof arguments[0]!="object",f=this._state;return new ve(function(m,y){function _(){i.close(s);var k=i._deps.indexedDB.deleteDatabase(i.name);k.onsuccess=pt(function(){var I,O,D;I=i._deps,O=i.name,D=I.indexedDB,I=I.IDBKeyRange,Ei(D)||O===Gs||Ai(D,I).delete(O).catch(w),m()}),k.onerror=yn(y),k.onblocked=i._fireOnBlocked}if(l)throw new Y.InvalidArgument("Invalid closeOptions argument to db.delete()");f.isBeingOpened?f.dbReadyPromise.then(_):_()})},_t.prototype.backendDB=function(){return this.idbdb},_t.prototype.isOpen=function(){return this.idbdb!==null},_t.prototype.hasBeenClosed=function(){var s=this._state.dbOpenError;return s&&s.name==="DatabaseClosed"},_t.prototype.hasFailed=function(){return this._state.dbOpenError!==null},_t.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(_t.prototype,"tables",{get:function(){var s=this;return c(this._allTables).map(function(i){return s._allTables[i]})},enumerable:!1,configurable:!0}),_t.prototype.transaction=function(){var s=(function(i,l,f){var m=arguments.length;if(m<2)throw new Y.InvalidArgument("Too few arguments");for(var y=new Array(m-1);--m;)y[m-1]=arguments[m];return f=y.pop(),[i,Oe(y),f]}).apply(this,arguments);return this._transaction.apply(this,s)},_t.prototype._transaction=function(s,i,l){var f=this,m=Ae.trans;m&&m.db===this&&s.indexOf("!")===-1||(m=null);var y,_,k=s.indexOf("?")!==-1;s=s.replace("!","").replace("?","");try{if(_=i.map(function(O){if(O=O instanceof f.Table?O.name:O,typeof O!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return O}),s=="r"||s===hi)y=hi;else{if(s!="rw"&&s!=mi)throw new Y.InvalidArgument("Invalid transaction mode: "+s);y=mi}if(m){if(m.mode===hi&&y===mi){if(!k)throw new Y.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");m=null}m&&_.forEach(function(O){if(m&&m.storeNames.indexOf(O)===-1){if(!k)throw new Y.SubTransaction("Table "+O+" not included in parent transaction.");m=null}}),k&&m&&!m.active&&(m=null)}}catch(O){return m?m._promise(null,function(D,x){x(O)}):bt(O)}var I=(function O(D,x,M,S,$){return ve.resolve().then(function(){var F=Ae.transless||Ae,T=D._createTransaction(x,M,D._dbSchema,S);if(T.explicit=!0,F={trans:T,transless:F},S)T.idbtrans=S.idbtrans;else try{T.create(),T.idbtrans._explicit=!0,D._state.PR1398_maxLoop=3}catch(z){return z.name===ee.InvalidState&&D.isOpen()&&0<--D._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),D.close({disableAutoOpen:!1}),D.open().then(function(){return O(D,x,M,null,$)})):bt(z)}var B,V=Re($);return V&&$r(),F=ve.follow(function(){var z;(B=$.call(T,T))&&(V?(z=Vn.bind(null,null),B.then(z,z)):typeof B.next=="function"&&typeof B.throw=="function"&&(B=Di(B)))},F),(B&&typeof B.then=="function"?ve.resolve(B).then(function(z){return T.active?z:bt(new Y.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):F.then(function(){return B})).then(function(z){return S&&T._resolve(),T._completion.then(function(){return z})}).catch(function(z){return T._reject(z),bt(z)})})}).bind(null,this,y,_,m,l);return m?m._promise(y,I,"lock"):Ae.trans?lr(Ae.transless,function(){return f._whenReady(I)}):this._whenReady(I)},_t.prototype.table=function(s){if(!g(this._allTables,s))throw new Y.InvalidTable("Table ".concat(s," does not exist"));return this._allTables[s]},_t);function _t(s,i){var l=this;this._middlewares={},this.verno=0;var f=_t.dependencies;this._options=i=r({addons:_t.addons,autoOpen:!0,indexedDB:f.indexedDB,IDBKeyRange:f.IDBKeyRange,cache:"cloned"},i),this._deps={indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange},f=i.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var m,y,_,k,I,O={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:w,dbReadyPromise:null,cancelOpen:w,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:i.autoOpen};O.dbReadyPromise=new ve(function(x){O.dbReadyResolve=x}),O.openCanceller=new ve(function(x,M){O.cancelOpen=M}),this._state=O,this.name=s,this.on=ns(this,"populate","blocked","versionchange","close",{ready:[ue,w]}),this.once=function(x,M){var S=function(){for(var $=[],F=0;F<arguments.length;F++)$[F]=arguments[F];l.on(x).unsubscribe(S),M.apply(l,$)};return l.on(x,S)},this.on.ready.subscribe=R(this.on.ready.subscribe,function(x){return function(M,S){_t.vip(function(){var $,F=l._state;F.openComplete?(F.dbOpenError||ve.resolve().then(M),S&&x(M)):F.onReadyBeingFired?(F.onReadyBeingFired.push(M),S&&x(M)):(x(M),$=l,S||x(function T(){$.on.ready.unsubscribe(M),$.on.ready.unsubscribe(T)}))})}}),this.Collection=(m=this,rs(zd.prototype,function(B,T){this.db=m;var S=ic,$=null;if(T)try{S=T()}catch(V){$=V}var F=B._ctx,T=F.table,B=T.hook.reading.fire;this._ctx={table:T,index:F.index,isPrimKey:!F.index||T.schema.primKey.keyPath&&F.index===T.schema.primKey.name,range:S,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:$,or:F.or,valueMapper:B!==A?B:null}})),this.Table=(y=this,rs(uc.prototype,function(x,M,S){this.db=y,this._tx=S,this.name=x,this.schema=M,this.hook=y._allTables[x]?y._allTables[x].hook:ns(null,{creating:[re,w],reading:[N,A],updating:[me,w],deleting:[te,w]})})),this.Transaction=(_=this,rs(Gd.prototype,function(x,M,S,$,F){var T=this;x!=="readonly"&&M.forEach(function(B){B=(B=S[B])===null||B===void 0?void 0:B.yProps,B&&(M=M.concat(B.map(function(V){return V.updatesTable})))}),this.db=_,this.mode=x,this.storeNames=M,this.schema=S,this.chromeTransactionDurability=$,this.idbtrans=null,this.on=ns(this,"complete","error","abort"),this.parent=F||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ve(function(B,V){T._resolve=B,T._reject=V}),this._completion.then(function(){T.active=!1,T.on.complete.fire()},function(B){var V=T.active;return T.active=!1,T.on.error.fire(B),T.parent?T.parent._reject(B):V&&T.idbtrans&&T.idbtrans.abort(),bt(B)})})),this.Version=(k=this,rs(rf.prototype,function(x){this.db=k,this._cfg={version:x,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(I=this,rs(gc.prototype,function(x,M,S){if(this.db=I,this._ctx={table:x,index:M===":id"?null:M,or:S},this._cmp=this._ascending=Qe,this._descending=function($,F){return Qe(F,$)},this._max=function($,F){return 0<Qe($,F)?$:F},this._min=function($,F){return Qe($,F)<0?$:F},this._IDBKeyRange=I._deps.IDBKeyRange,!this._IDBKeyRange)throw new Y.MissingAPI})),this.on("versionchange",function(x){0<x.newVersion?console.warn("Another connection wants to upgrade database '".concat(l.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(l.name,"'. Closing db now to resume the delete request.")),l.close({disableAutoOpen:!1})}),this.on("blocked",function(x){!x.newVersion||x.newVersion<x.oldVersion?console.warn("Dexie.delete('".concat(l.name,"') was blocked")):console.warn("Upgrade '".concat(l.name,"' blocked by other connection holding version ").concat(x.oldVersion/10))}),this._maxKey=as(i.IDBKeyRange),this._createTransaction=function(x,M,S,$){return new l.Transaction(x,M,S,l._options.chromeTransactionDurability,$)},this._fireOnBlocked=function(x){l.on("blocked").fire(x),Dr.filter(function(M){return M.name===l.name&&M!==l&&!M._state.vcFired}).map(function(M){return M.on("versionchange").fire(x)})},this.use(cf),this.use(ff),this.use(lf),this.use(of),this.use(af);var D=new Proxy(this,{get:function(x,M,S){if(M==="_vip")return!0;if(M==="table")return function(F){return fo(l.table(F),D)};var $=Reflect.get(x,M,S);return $ instanceof uc?fo($,D):M==="tables"?$.map(function(F){return fo(F,D)}):M==="_createTransaction"?function(){return fo($.apply(this,arguments),D)}:$}});this.vip=D,f.forEach(function(x){return x(l)})}var po,sn=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",pf=(Bi.prototype.subscribe=function(s,i,l){return this._subscribe(s&&typeof s!="function"?s:{next:s,error:i,complete:l})},Bi.prototype[sn]=function(){return this},Bi);function Bi(s){this._subscribe=s}try{po={indexedDB:a.indexedDB||a.mozIndexedDB||a.webkitIndexedDB||a.msIndexedDB,IDBKeyRange:a.IDBKeyRange||a.webkitIDBKeyRange}}catch{po={indexedDB:null,IDBKeyRange:null}}function Rc(s){var i,l=!1,f=new pf(function(m){var y=Re(s),_,k=!1,I={},O={},D={get closed(){return k},unsubscribe:function(){k||(k=!0,_&&_.abort(),x&&zn.storagemutated.unsubscribe(S))}};m.start&&m.start(D);var x=!1,M=function(){return pi($)},S=function(F){co(I,F),Pi(O,I)&&M()},$=function(){var F,T,B;!k&&po.indexedDB&&(I={},F={},_&&_.abort(),_=new AbortController,B=(function(V){var z=Or();try{y&&$r();var G=Kn(s,V);return G=y?G.finally(Vn):G}finally{z&&Rr()}})(T={subscr:F,signal:_.signal,requery:M,querier:s,trans:null}),Promise.resolve(B).then(function(V){l=!0,i=V,k||T.signal.aborted||(I={},(function(z){for(var G in z)if(g(z,G))return;return 1})(O=F)||x||(zn(is,S),x=!0),pi(function(){return!k&&m.next&&m.next(V)}))},function(V){l=!1,["DatabaseClosedError","AbortError"].includes(V?.name)||k||pi(function(){k||m.error&&m.error(V)})}))};return setTimeout(M,0),D});return f.hasValue=function(){return l},f.getValue=function(){return i},f}var pr=Rn;function Ni(s){var i=Qn;try{Qn=!0,zn.storagemutated.fire(s),$i(s,!0)}finally{Qn=i}}b(pr,r(r({},rt),{delete:function(s){return new pr(s,{addons:[]}).delete()},exists:function(s){return new pr(s,{addons:[]}).open().then(function(i){return i.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(s){try{return i=pr.dependencies,l=i.indexedDB,i=i.IDBKeyRange,(Ei(l)?Promise.resolve(l.databases()).then(function(f){return f.map(function(m){return m.name}).filter(function(m){return m!==Gs})}):Ai(l,i).toCollection().primaryKeys()).then(s)}catch{return bt(new Y.MissingAPI)}var i,l},defineClass:function(){return function(s){d(this,s)}},ignoreTransaction:function(s){return Ae.trans?lr(Ae.transless,s):s()},vip:Ii,async:function(s){return function(){try{var i=Di(s.apply(this,arguments));return i&&typeof i.then=="function"?i:ve.resolve(i)}catch(l){return bt(l)}}},spawn:function(s,i,l){try{var f=Di(s.apply(l,i||[]));return f&&typeof f.then=="function"?f:ve.resolve(f)}catch(m){return bt(m)}},currentTransaction:{get:function(){return Ae.trans||null}},waitFor:function(s,i){return i=ve.resolve(typeof s=="function"?pr.ignoreTransaction(s):s).timeout(i||6e4),Ae.trans?Ae.trans.waitFor(i):i},Promise:ve,debug:{get:function(){return oe},set:function(s){Te(s)}},derive:q,extend:d,props:b,override:R,Events:ns,on:zn,liveQuery:Rc,extendObservabilitySet:co,getByKeyPath:ce,setByKeyPath:Ie,delByKeyPath:function(s,i){typeof i=="string"?Ie(s,i,void 0):"length"in i&&[].map.call(i,function(l){Ie(s,l,void 0)})},shallowClone:we,deepClone:Se,getObjectDiff:Ti,cmp:Qe,asap:ne,minKey:-1/0,addons:[],connections:Dr,errnames:ee,dependencies:po,cache:fr,semVer:"4.2.0",version:"4.2.0".split(".").map(function(s){return parseInt(s)}).reduce(function(s,i,l){return s+i/Math.pow(10,2*l)})})),pr.maxKey=as(pr.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(zn(is,function(s){Qn||(s=new CustomEvent(vi,{detail:s}),Qn=!0,dispatchEvent(s),Qn=!1)}),addEventListener(vi,function(s){s=s.detail,Qn||Ni(s)}));var Br,Qn=!1,$c=function(){};return typeof BroadcastChannel<"u"&&(($c=function(){(Br=new BroadcastChannel(vi)).onmessage=function(s){return s.data&&Ni(s.data)}})(),typeof Br.unref=="function"&&Br.unref(),zn(is,function(s){Qn||Br.postMessage(s)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(s){if(!Rn.disableBfCache&&s.persisted){oe&&console.debug("Dexie: handling persisted pagehide"),Br?.close();for(var i=0,l=Dr;i<l.length;i++)l[i].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(s){!Rn.disableBfCache&&s.persisted&&(oe&&console.debug("Dexie: handling persisted pageshow"),$c(),Ni({all:new Dt(-1/0,[[]])}))})),ve.rejectionMapper=function(s,i){return!s||s instanceof Ye||s instanceof TypeError||s instanceof SyntaxError||!s.name||!Pe[s.name]?s:(i=new Pe[s.name](i||s.message,s),"stack"in s&&P(i,"stack",{get:function(){return this.inner.stack}}),i)},Te(oe),r(Rn,Object.freeze({__proto__:null,Dexie:Rn,liveQuery:Rc,Entity:ac,cmp:Qe,PropModification:ss,replacePrefix:function(s,i){return new ss({replacePrefix:[s,i]})},add:function(s){return new ss({add:s})},remove:function(s){return new ss({remove:s})},default:Rn,RangeSet:Dt,mergeRanges:us,rangesOverlap:wc}),{default:Rn}),Rn})})(Po)),Po.exports}var Ng=Bg();const Aa=Fg(Ng),Nl=Symbol.for("Dexie"),Ko=globalThis[Nl]||(globalThis[Nl]=Aa);if(Aa.semVer!==Ko.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Aa.semVer} and ${Ko.semVer}`);const{liveQuery:Xw,mergeRanges:Zw,rangesOverlap:e1,RangeSet:t1,cmp:n1,Entity:r1,PropModification:s1,replacePrefix:o1,add:i1,remove:a1,DexieYProvider:c1}=Ko;class Lg extends Ko{cards;card_lots;holdings;transactions;scans;decks;deck_cards;price_points;valuations;settings;scan_sale_links;constructor(){super("MtgTrackerDb"),this.version(1).stores({cards:"id, oracleId, name, set, setCode, number, lang, finish",holdings:"id, cardId, acquisitionId, source, createdAt",transactions:"id, kind, cardId, source, externalRef, happenedAt",scans:"id, cardFingerprint, cardId, source, scannedAt",decks:"id, platform, name, importedAt",deck_cards:"[deckId+cardId], deckId, cardId",price_points:"id, cardId, provider, asOf",valuations:"id, asOf",settings:"k"}),this.version(2).stores({cards:"id, oracleId, name, set, setCode, number, lang, finish, createdAt, updatedAt",holdings:"id, cardId, acquisitionId, source, createdAt, updatedAt",transactions:"id, kind, cardId, source, externalRef, happenedAt, createdAt, updatedAt",scans:"id, cardFingerprint, cardId, source, scannedAt, createdAt, updatedAt",decks:"id, platform, name, importedAt, createdAt, updatedAt",deck_cards:"[deckId+cardId], deckId, cardId, createdAt",price_points:"id, cardId, provider, asOf, createdAt",valuations:"id, asOf, createdAt",settings:"k, createdAt, updatedAt",scan_sale_links:"id, scanId, transactionId, matchedAt, createdAt"}).upgrade(async t=>{const n=new Date;await t.table("cards").toCollection().modify(r=>{r.createdAt=r.createdAt||n,r.updatedAt=r.updatedAt||n}),await t.table("holdings").toCollection().modify(r=>{r.createdAt=r.createdAt||n,r.updatedAt=r.updatedAt||n}),await t.table("transactions").toCollection().modify(r=>{r.createdAt=r.createdAt||n,r.updatedAt=r.updatedAt||n}),await t.table("scans").toCollection().modify(r=>{r.createdAt=r.createdAt||n,r.updatedAt=r.updatedAt||n}),await t.table("decks").toCollection().modify(r=>{r.createdAt=r.createdAt||n,r.updatedAt=r.updatedAt||n}),await t.table("deck_cards").toCollection().modify(r=>{r.createdAt=r.createdAt||n}),await t.table("price_points").toCollection().modify(r=>{r.createdAt=r.createdAt||n}),await t.table("valuations").toCollection().modify(r=>{r.createdAt=r.createdAt||n}),await t.table("settings").toCollection().modify(r=>{r.createdAt=r.createdAt||n,r.updatedAt=r.updatedAt||n})}),this.version(3).stores({cards:"id, oracleId, name, set, setCode, number, lang, finish, createdAt, updatedAt",holdings:"id, cardId, acquisitionId, source, createdAt, updatedAt",transactions:"id, kind, cardId, source, externalRef, happenedAt, createdAt, updatedAt",scans:"id, cardFingerprint, cardId, source, scannedAt, createdAt, updatedAt",decks:"id, platform, name, importedAt, createdAt, updatedAt",deck_cards:"[deckId+cardId], deckId, cardId, createdAt",price_points:"id, cardId, provider, currency, asOf, createdAt, [cardId+asOf], [provider+asOf]",valuations:"id, asOf, createdAt, [asOf+createdAt]",settings:"k, createdAt, updatedAt",scan_sale_links:"id, scanId, transactionId, matchedAt, createdAt"}),this.version(4).stores({cards:"id, oracleId, name, set, setCode, number, lang, finish, createdAt, updatedAt",card_lots:"id, cardId, acquisitionId, source, purchasedAt, disposedAt, createdAt, updatedAt, [cardId+purchasedAt], [acquisitionId+cardId]",holdings:"id, cardId, acquisitionId, source, createdAt, updatedAt",transactions:"id, kind, cardId, lotId, source, externalRef, happenedAt, relatedTransactionId, createdAt, updatedAt, [lotId+kind]",scans:"id, cardFingerprint, cardId, lotId, source, scannedAt, boosterPackId, createdAt, updatedAt, [lotId+scannedAt]",decks:"id, platform, name, importedAt, createdAt, updatedAt",deck_cards:"id, deckId, cardId, lotId, addedAt, removedAt, createdAt, [deckId+cardId], [lotId+addedAt]",price_points:"id, cardId, provider, currency, asOf, source, createdAt, [cardId+asOf], [provider+asOf]",valuations:"id, asOf, createdAt, [asOf+createdAt]",settings:"k, createdAt, updatedAt",scan_sale_links:"id, scanId, transactionId, quantity, matchedAt, createdAt"}).upgrade(async t=>{const n=new Date;await t.table("deck_cards").toCollection().modify(r=>{try{r.id||(r.id=`deckcard-${Date.now()}-${Math.random().toString(36).substr(2,9)}`),r.addedAt||(r.addedAt=r.createdAt||n),r.role||(r.role="main"),(!r.cardId||r.cardId==="")&&(r.cardId="unknown-card"),r.deckId||(r.deckId="unknown-deck"),typeof r.quantity!="number"&&(r.quantity=1),r.createdAt||(r.createdAt=n)}catch(o){console.error("Error upgrading deck card:",o,r);return}})}),this.version(5).stores({cards:"id, oracleId, name, set, setCode, number, lang, finish, createdAt, updatedAt",card_lots:"id, cardId, acquisitionId, source, purchasedAt, disposedAt, createdAt, updatedAt, externalRef, [cardId+purchasedAt], [acquisitionId+cardId], [externalRef]",holdings:"id, cardId, acquisitionId, source, createdAt, updatedAt",transactions:"id, kind, cardId, lotId, source, externalRef, happenedAt, relatedTransactionId, createdAt, updatedAt, [lotId+kind]",scans:"id, cardFingerprint, cardId, lotId, source, scannedAt, boosterPackId, createdAt, updatedAt, [lotId+scannedAt]",decks:"id, platform, name, importedAt, createdAt, updatedAt",deck_cards:"id, deckId, cardId, lotId, addedAt, removedAt, createdAt, [deckId+cardId], [lotId+addedAt]",price_points:"id, cardId, provider, currency, asOf, source, createdAt, [cardId+asOf], [provider+asOf]",valuations:"id, asOf, createdAt, [asOf+createdAt]",settings:"k, createdAt, updatedAt",scan_sale_links:"id, scanId, transactionId, quantity, matchedAt, createdAt"}),this.version(6).stores({cards:"id, oracleId, name, set, setCode, number, lang, finish, layout, imageUrl, imageUrlBack, createdAt, updatedAt",card_lots:"id, cardId, acquisitionId, source, purchasedAt, disposedAt, createdAt, updatedAt, externalRef, [cardId+purchasedAt], [acquisitionId+cardId], [externalRef]",holdings:"id, cardId, acquisitionId, source, createdAt, updatedAt",transactions:"id, kind, cardId, lotId, source, externalRef, happenedAt, relatedTransactionId, createdAt, updatedAt, [lotId+kind]",scans:"id, cardFingerprint, cardId, lotId, source, scannedAt, boosterPackId, createdAt, updatedAt, [lotId+scannedAt]",decks:"id, platform, name, importedAt, createdAt, updatedAt",deck_cards:"id, deckId, cardId, lotId, addedAt, removedAt, createdAt, [deckId+cardId], [lotId+addedAt]",price_points:"id, cardId, provider, currency, asOf, source, createdAt, [cardId+asOf], [provider+asOf]",valuations:"id, asOf, createdAt, [asOf+createdAt]",settings:"k, createdAt, updatedAt",scan_sale_links:"id, scanId, transactionId, quantity, matchedAt, createdAt"}).upgrade(async t=>{await t.table("cards").toCollection().modify(n=>{n.layout=n.layout||"normal"})})}}const _e=new Lg,kn={async add(e){return await _e.cards.add(e)},async getById(e){return await _e.cards.get(e)},async getAll(){return await _e.cards.toArray()},async update(e,t){return await _e.cards.update(e,t)},async delete(e){await _e.cards.delete(e)}},vt={async add(e){return await _e.card_lots.add(e)},async getById(e){return await _e.card_lots.get(e)},async getAll(){return await _e.card_lots.toArray()},async getByCardId(e){return await _e.card_lots.where("cardId").equals(e).toArray()},async getByExternalRef(e){return await _e.card_lots.where("externalRef").equals(e).toArray()},async getActiveLotsByCardId(e){return await _e.card_lots.where("cardId").equals(e).and(t=>!t.disposedAt).toArray()},async update(e,t){return await _e.card_lots.update(e,t)},async delete(e){await _e.card_lots.delete(e)}},gs={async add(e){return await _e.holdings.add(e)},async getById(e){return await _e.holdings.get(e)},async getAll(){return await _e.holdings.toArray()},async getByCardId(e){return await _e.holdings.where("cardId").equals(e).toArray()},async update(e,t){return await _e.holdings.update(e,t)},async delete(e){await _e.holdings.delete(e)}},Yt={async add(e){return await _e.transactions.add(e)},async getById(e){return await _e.transactions.get(e)},async getAll(){return await _e.transactions.toArray()},async getByCardId(e){return await _e.transactions.where("cardId").equals(e).toArray()},async getByLotId(e){return await _e.transactions.where("lotId").equals(e).toArray()},async getByKind(e){return await _e.transactions.where("kind").equals(e).toArray()},async getBuyTransactionsByCardId(e){return await _e.transactions.where("cardId").equals(e).and(t=>t.kind==="BUY").toArray()},async getSellTransactionsByCardId(e){return await _e.transactions.where("cardId").equals(e).and(t=>t.kind==="SELL").toArray()},async update(e,t){return await _e.transactions.update(e,t)},async delete(e){await _e.transactions.delete(e)}},Ea={async add(e){return await _e.price_points.add(e)},async getById(e){return await _e.price_points.get(e)},async getByCardId(e){return await _e.price_points.where("cardId").equals(e).toArray()},async update(e,t){return await _e.price_points.update(e,t)},async delete(e){await _e.price_points.delete(e)}},ea={async set(e,t){const n={k:e,v:t,createdAt:new Date,updatedAt:new Date};return await _e.settings.put(n)},async get(e){return(await _e.settings.get(e))?.v},async getAll(){return await _e.settings.toArray()},async delete(e){await _e.settings.delete(e)}};class qe{cents;currency;constructor(t,n="EUR"){this.cents=Math.round(t),this.currency=n}static parse(t,n="EUR"){if(typeof t=="number")return new qe(t*100,n);const r=t.replace(/[$\s]/g,"").replace(",","."),o=parseFloat(r);return new qe(isNaN(o)?0:o*100,n)}getCents(){return this.cents}getDecimal(){return this.cents/100}getCurrency(){return this.currency}add(t){if(this.currency!==t.currency)throw new Error("Cannot add Money values with different currencies");return new qe(this.cents+t.cents,this.currency)}subtract(t){if(this.currency!==t.currency)throw new Error("Cannot subtract Money values with different currencies");return new qe(this.cents-t.cents,this.currency)}multiply(t){return new qe(this.cents*t,this.currency)}divide(t){return new qe(this.cents/t,this.currency)}format(t="de-DE"){return new Intl.NumberFormat(t,{style:"currency",currency:this.currency,minimumFractionDigits:2,maximumFractionDigits:2}).format(this.getDecimal())}isZero(){return this.cents===0}isPositive(){return this.cents>0}isNegative(){return this.cents<0}}const Ja=ai("cards",{state:()=>({cards:{},cardPrices:{},loading:!1,loadingPrices:!1,error:null}),getters:{getCardById:e=>t=>e.cards[t],getAllCards:e=>Object.values(e.cards),getCardsBySet:e=>t=>Object.values(e.cards).filter(n=>n.setCode===t),getCardPrice:e=>t=>e.cardPrices[t]||null},actions:{async loadCards(){this.loading=!0,this.error=null;try{const e=await kn.getAll();this.cards=e.reduce((t,n)=>(t[n.id]=n,t),{})}catch(e){this.error=e instanceof Error?e.message:"Failed to load cards",console.error("Error loading cards:",e)}finally{this.loading=!1}},async loadCardPrices(){this.loadingPrices=!0,this.error=null;try{const e=await _e.price_points.toArray(),t={},n={};e.forEach(r=>{n[r.cardId]||(n[r.cardId]=[]),n[r.cardId].push(r)}),Object.keys(n).forEach(r=>{const o=n[r];if(o.length>0){o.sort((c,u)=>u.asOf.getTime()-c.asOf.getTime());const a=o[0];t[r]=new qe(a.price,a.currency)}}),this.cardPrices=t}catch(e){this.error=e instanceof Error?e.message:"Failed to load card prices",console.error("Error loading card prices:",e)}finally{this.loadingPrices=!1}},async loadCardsAndPrices(){await Promise.all([this.loadCards(),this.loadCardPrices()])},async addCard(e){try{await kn.add(e),this.cards[e.id]=e}catch(t){throw this.error=t instanceof Error?t.message:"Failed to add card",console.error("Error adding card:",t),t}},async updateCard(e,t){try{await kn.update(e,t),this.cards[e]&&(this.cards[e]={...this.cards[e],...t})}catch(n){throw this.error=n instanceof Error?n.message:"Failed to update card",console.error("Error updating card:",n),n}},async removeCard(e){try{await kn.delete(e),delete this.cards[e],delete this.cardPrices[e]}catch(t){throw this.error=t instanceof Error?t.message:"Failed to remove card",console.error("Error removing card:",t),t}}}}),qg=ai("holdings",{state:()=>({holdings:{},loading:!1,error:null}),getters:{getHoldingById:e=>t=>e.holdings[t],getAllHoldings:e=>Object.values(e.holdings),getHoldingsByCardId:e=>t=>Object.values(e.holdings).filter(n=>n.cardId===t),getTotalQuantityByCardId:e=>t=>Object.values(e.holdings).filter(n=>n.cardId===t).reduce((n,r)=>n+r.quantity,0)},actions:{async loadHoldings(){this.loading=!0,this.error=null;try{const e=await gs.getAll();this.holdings=e.reduce((t,n)=>(t[n.id]=n,t),{})}catch(e){this.error=e instanceof Error?e.message:"Failed to load holdings",console.error("Error loading holdings:",e)}finally{this.loading=!1}},async addHolding(e){try{await gs.add(e),this.holdings[e.id]=e}catch(t){throw this.error=t instanceof Error?t.message:"Failed to add holding",console.error("Error adding holding:",t),t}},async updateHolding(e,t){try{await gs.update(e,t),this.holdings[e]&&(this.holdings[e]={...this.holdings[e],...t})}catch(n){throw this.error=n instanceof Error?n.message:"Failed to update holding",console.error("Error updating holding:",n),n}},async removeHolding(e){try{await gs.delete(e),delete this.holdings[e]}catch(t){throw this.error=t instanceof Error?t.message:"Failed to remove holding",console.error("Error removing holding:",t),t}}}}),jg=ai("transactions",{state:()=>({transactions:{},loading:!1,error:null}),getters:{getTransactionById:e=>t=>e.transactions[t],getAllTransactions:e=>Object.values(e.transactions),getTransactionsByCardId:e=>t=>Object.values(e.transactions).filter(n=>n.cardId===t),getTransactionsByKind:e=>t=>Object.values(e.transactions).filter(n=>n.kind===t),getTotalValueByKind:e=>t=>Object.values(e.transactions).filter(n=>n.kind===t).reduce((n,r)=>{const o=r.unitPrice*r.quantity,a=r.fees||0,c=r.shipping||0;return t==="BUY"?n+o+a+c:n+o-a-c},0)},actions:{async loadTransactions(){this.loading=!0,this.error=null;try{const e=await Yt.getAll();this.transactions=e.reduce((t,n)=>(t[n.id]=n,t),{})}catch(e){this.error=e instanceof Error?e.message:"Failed to load transactions",console.error("Error loading transactions:",e)}finally{this.loading=!1}},async addTransaction(e){try{await Yt.add(e),this.transactions[e.id]=e}catch(t){throw this.error=t instanceof Error?t.message:"Failed to add transaction",console.error("Error adding transaction:",t),t}},async updateTransaction(e,t){try{await Yt.update(e,t),this.transactions[e]&&(this.transactions[e]={...this.transactions[e],...t})}catch(n){throw this.error=n instanceof Error?n.message:"Failed to update transaction",console.error("Error updating transaction:",n),n}},async removeTransaction(e){try{await Yt.delete(e),delete this.transactions[e]}catch(t){throw this.error=t instanceof Error?t.message:"Failed to remove transaction",console.error("Error removing transaction:",t),t}}}});class _o{static async calculateLotValue(t){if(t.cardId){const n=await Ea.getByCardId(t.cardId);if(n.length>0){n.sort((c,u)=>u.asOf.getTime()-c.asOf.getTime());const r=n[0],o=new qe(r.price,r.currency),a=t.disposedQuantity?t.quantity-t.disposedQuantity:t.quantity;return o.multiply(a)}}return new qe(0,"EUR")}static async calculateLotCostBasis(t){if(t.totalAcquisitionCostCent){const a=(t.disposedQuantity?t.quantity-t.disposedQuantity:t.quantity)/t.quantity;return new qe(t.totalAcquisitionCostCent*a,t.currency||"EUR")}const n=new qe(t.unitCost,t.currency||"EUR"),r=t.disposedQuantity?t.quantity-t.disposedQuantity:t.quantity;return n.multiply(r)}static async calculateRealizedPnL(){const t=await Yt.getByKind("SELL");let n=new qe(0,"EUR");for(const r of t){const o=new qe(r.unitPrice,r.currency).multiply(r.quantity);let a=new qe(0,"EUR");if(r.lotId){const h=await vt.getById(r.lotId);h&&(a=(h.totalAcquisitionCostCent?new qe(h.totalAcquisitionCostCent,h.currency||"EUR"):new qe(h.unitCost,h.currency||"EUR").multiply(h.quantity)).multiply(r.quantity/h.quantity))}else r.cardId&&(a=await this.calculateFIFOCostForCard(r.cardId,r.quantity));const c=new qe(r.fees,r.currency),u=new qe(r.shipping,r.currency),d=o.subtract(a).subtract(c).subtract(u);n=n.add(d)}return n}static async calculateFIFOCostForCard(t,n){const o=(await vt.getByCardId(t)).filter(u=>!u.disposedAt||u.disposedQuantity&&u.disposedQuantity<u.quantity).sort((u,d)=>u.purchasedAt.getTime()-d.purchasedAt.getTime());let a=n,c=new qe(0,"EUR");for(const u of o){if(a<=0)break;const d=u.disposedQuantity?u.quantity-u.disposedQuantity:u.quantity,h=Math.min(a,d),g=new qe(u.unitCost,u.currency||"EUR").multiply(h);c=c.add(g),a-=h}return c}static async calculatePortfolioValue(){const t=await vt.getAll();let n=new qe(0,"EUR");for(const r of t)if(!r.disposedAt||r.disposedQuantity&&r.disposedQuantity<r.quantity){const o=await this.calculateLotValue(r);n=n.add(o)}return n}static async calculateTotalCostBasis(){const t=await vt.getAll();let n=new qe(0,"EUR");for(const r of t)if(!r.disposedAt||r.disposedQuantity&&r.disposedQuantity<r.quantity){const o=await this.calculateLotCostBasis(r);n=n.add(o)}return n}static async calculateUnrealizedPnL(){const t=await this.calculatePortfolioValue(),n=await this.calculateTotalCostBasis();return t.subtract(n)}static async getActiveLots(){return(await vt.getAll()).filter(n=>!n.disposedAt||n.disposedQuantity&&n.disposedQuantity<n.quantity)}static async getOwnedQuantity(t){const n=await vt.getByCardId(t);let r=0;for(const o of n)o.disposedAt?o.disposedQuantity&&o.disposedQuantity<o.quantity&&(r+=o.quantity-o.disposedQuantity):r+=o.quantity;return r}}class wr{static calculateTrueAcquisitionCost(t,n,r,o){const a=t+n+r;return Math.round(a/o*100)}static calculateNetRevenuePerCard(t,n,r,o){const a=t-n-r;return Math.round(a/o*100)}static async getTotalFees(t,n){const r=await Yt.getAll();let o=new qe(0,"EUR");for(const a of r)t&&new Date(a.happenedAt)<t||n&&new Date(a.happenedAt)>n||(o=o.add(new qe(a.fees||0,"EUR")));return o}static async getTotalShippingCosts(t,n,r){const o=await Yt.getAll();let a=new qe(0,"EUR");for(const c of o)t==="purchase"&&c.kind!=="BUY"||t==="sale"&&c.kind!=="SELL"||n&&new Date(c.happenedAt)<n||r&&new Date(c.happenedAt)>r||(a=a.add(new qe(c.shipping||0,c.currency||"EUR")));return a}static calculateLotNetProfit(t){if(!t.disposedAt||!t.salePriceCent)return 0;const n=t.totalAcquisitionCostCent||t.unitCost*t.quantity;return(t.totalSaleRevenueCent||t.salePriceCent*t.quantity-(t.saleFeesCent||0)+(t.saleShippingCent||0))-n}static async getTotalNetProfit(){const t=await vt.getAll();let n=new qe(0,"EUR");for(const r of t)if(r.disposedAt&&r.totalNetProfitCent!==void 0)n=n.add(new qe(r.totalNetProfitCent,"EUR"));else if(r.disposedAt&&r.salePriceCent){const o=this.calculateLotNetProfit(r);n=n.add(new qe(o,"EUR"))}return n}static async getTotalRevenue(){const t=await Yt.getByKind("SELL");let n=new qe(0,"EUR");for(const r of t){const o=new qe(r.unitPrice*r.quantity,r.currency);n=n.add(o)}return n}static async getTotalCosts(){const t=await Yt.getByKind("BUY");let n=new qe(0,"EUR");for(const r of t){const o=new qe(r.unitPrice*r.quantity,r.currency),a=new qe(r.fees||0,r.currency),c=new qe(r.shipping||0,r.currency);n=n.add(o).add(a).add(c)}return n}}class Zt{static BASE_URL="https://api.scryfall.com";static lastRequestTime=0;static RATE_LIMIT_DELAY=100;static async enforceRateLimit(){const n=Date.now()-this.lastRequestTime;if(n<this.RATE_LIMIT_DELAY){const r=this.RATE_LIMIT_DELAY-n;await new Promise(o=>setTimeout(o,r))}this.lastRequestTime=Date.now()}static async getPriceById(t){try{await this.enforceRateLimit();const n=await fetch(`${this.BASE_URL}/cards/${t}`);if(!n.ok)return null;const o=(await n.json()).prices?.eur;return o?qe.parse(o,"EUR"):null}catch(n){return console.error("Error fetching price from Scryfall:",n),null}}static async getPriceBySetAndNumber(t,n){try{await this.enforceRateLimit();const r=await fetch(`${this.BASE_URL}/cards/${t}/${n}`);if(!r.ok)return null;const a=(await r.json()).prices?.eur;return a?qe.parse(a,"EUR"):null}catch(r){return console.error("Error fetching price from Scryfall:",r),null}}static async getImageUrlById(t){try{await this.enforceRateLimit();const n=await fetch(`${this.BASE_URL}/cards/${t}`);if(!n.ok)return null;const r=await n.json();return(r.layout==="transform"||r.layout==="modal_dfc"||r.layout==="reversible_card")&&r.card_faces&&r.card_faces.length===2?{front:r.card_faces[0].image_uris?.normal||r.card_faces[0].image_uris?.large||r.card_faces[0].image_uris?.small||"",back:r.card_faces[1].image_uris?.normal||r.card_faces[1].image_uris?.large||r.card_faces[1].image_uris?.small||"",layout:r.layout}:r.image_uris?{front:r.image_uris.normal||r.image_uris.large||r.image_uris.small||"",back:"",layout:r.layout||"normal"}:r.card_faces&&r.card_faces.length>0&&r.card_faces[0].image_uris?{front:r.card_faces[0].image_uris.normal||r.card_faces[0].image_uris.large||r.card_faces[0].image_uris.small||"",back:"",layout:r.layout||"normal"}:{front:r.image_uris?.normal||r.image_uris?.large||r.image_uris?.small||"",back:"",layout:r.layout||"normal"}}catch(n){return console.error("Error fetching image from Scryfall:",n),null}}static async getImageUrlBySetAndNumber(t,n){try{await this.enforceRateLimit();const r=await fetch(`${this.BASE_URL}/cards/${t}/${n}`);if(!r.ok)return null;const o=await r.json();return(o.layout==="transform"||o.layout==="modal_dfc"||o.layout==="reversible_card")&&o.card_faces&&o.card_faces.length===2?{front:o.card_faces[0].image_uris?.normal||o.card_faces[0].image_uris?.large||o.card_faces[0].image_uris?.small||"",back:o.card_faces[1].image_uris?.normal||o.card_faces[1].image_uris?.large||o.card_faces[1].image_uris?.small||"",layout:o.layout}:o.image_uris?{front:o.image_uris.normal||o.image_uris.large||o.image_uris.small||"",back:"",layout:o.layout||"normal"}:o.card_faces&&o.card_faces.length>0&&o.card_faces[0].image_uris?{front:o.card_faces[0].image_uris.normal||o.card_faces[0].image_uris.large||o.card_faces[0].image_uris.small||"",back:"",layout:o.layout||"normal"}:{front:o.image_uris?.normal||o.image_uris?.large||o.image_uris?.small||"",back:"",layout:o.layout||"normal"}}catch(r){return console.error("Error fetching image from Scryfall:",r),null}}static async getByCardmarketId(t){try{await this.enforceRateLimit();const n=await fetch(`${this.BASE_URL}/cards/cardmarket/${t}`);if(!n.ok){console.error(`Scryfall API error for cardmarket_id ${t}: ${n.status} ${n.statusText}`);try{const r=await n.text();console.error(`Scryfall API error details: ${r}`)}catch{console.error("Could not read error response body")}return null}return await n.json()}catch(n){return console.error("Error fetching card by Cardmarket ID from Scryfall:",n),null}}static async getByCardmarketIds(t){try{if(!t||t.length===0)return[];if(t.length===1){const o=await this.getByCardmarketId(t[0]);return o?[o]:[]}await this.enforceRateLimit();const n=await fetch(`${this.BASE_URL}/cards/collection`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifiers:t.map(o=>({cardmarket_id:o}))})});if(!n.ok){console.error(`Scryfall API error for batch cardmarket_ids: ${n.status} ${n.statusText}`);try{const o=await n.text();console.error(`Scryfall API error details: ${o}`)}catch{console.error("Could not read error response body")}return await this.getByCardmarketIdsIndividually(t)}return(await n.json()).data||[]}catch(n){return console.error("Error fetching cards by Cardmarket IDs from Scryfall:",n),await this.getByCardmarketIdsIndividually(t)}}static async getByCardmarketIdsIndividually(t){const n=[];for(const r of t){const o=await this.getByCardmarketId(r);o&&n.push(o)}return n}static async hydrateCard(t){try{if(t.scryfall_id){await this.enforceRateLimit();const n=await fetch(`${this.BASE_URL}/cards/${t.scryfall_id}`);if(n.ok)return await n.json()}if(t.setCode&&t.collectorNumber){await this.enforceRateLimit();const n=await fetch(`${this.BASE_URL}/cards/${t.setCode}/${t.collectorNumber}`);if(n.ok)return await n.json()}if(t.name&&t.setCode){await this.enforceRateLimit();let n=await fetch(`${this.BASE_URL}/cards/named?exact=${encodeURIComponent(t.name)}&set=${encodeURIComponent(t.setCode)}`);if(n.ok)return await n.json();if(t.version&&(await this.enforceRateLimit(),n=await fetch(`${this.BASE_URL}/cards/named?exact=${encodeURIComponent(t.name)}&set=${encodeURIComponent(t.setCode)}&include_variations=true`),n.ok))return await n.json();if(await this.enforceRateLimit(),n=await fetch(`${this.BASE_URL}/cards/named?fuzzy=${encodeURIComponent(t.name)}&set=${encodeURIComponent(t.setCode)}`),n.ok)return await n.json()}return null}catch(n){return console.error("Error hydrating card with Scryfall data:",n),null}}}class Ug{static async syncPrices(t){try{const n=new Date,r=await kn.getAll(),o=r.length;for(let a=0;a<r.length;a++){const c=r[a];try{const u=await Zt.getPriceById(c.id);if(u){const d=n.toISOString().split("T")[0],p={id:`${c.id}:scryfall:${d}`,cardId:c.id,provider:"scryfall",currency:u.getCurrency(),price:u.getCents(),asOf:n,createdAt:n};await _e.price_points.put(p)}}catch(u){console.error(`Error syncing price for card ${c.id}:`,u)}t&&t(a+1,o)}}catch(n){throw console.error("Error syncing prices:",n),n}}static async syncPriceForCard(t){try{const n=new Date,r=await kn.getById(t);if(!r){console.warn(`Card with ID ${t} not found`);return}const o=await Zt.getPriceById(r.id);if(o){const a=n.toISOString().split("T")[0],u={id:`${r.id}:scryfall:${a}`,cardId:r.id,provider:"scryfall",currency:o.getCurrency(),price:o.getCents(),asOf:n,createdAt:n};await _e.price_points.put(u)}}catch(n){throw console.error(`Error syncing price for card ${t}:`,n),n}}static async needsPriceUpdate(){try{const t=await _e.price_points.orderBy("asOf").last();if(!t)return!0;const n=new Date,r=new Date(t.asOf);return(n.getTime()-r.getTime())/(1e3*60*60)>=24}catch(t){return console.error("Error checking if price update is needed:",t),!0}}static async needsPriceUpdateForCard(t){try{const n=await Ea.getByCardId(t);if(n.length===0)return!0;n.sort((u,d)=>d.asOf.getTime()-u.asOf.getTime());const r=n[0],o=new Date,a=new Date(r.asOf);return(o.getTime()-a.getTime())/(1e3*60*60)>=24}catch(n){return console.error(`Error checking if price update is needed for card ${t}:`,n),!0}}static async getLatestPriceForCard(t){try{const n=await Ea.getByCardId(t);if(n.length===0)return null;n.sort((o,a)=>a.asOf.getTime()-o.asOf.getTime());const r=n[0];return{price:r.price,asOf:r.asOf}}catch(n){return console.error(`Error getting latest price for card ${t}:`,n),null}}}class ys{static async needsPriceUpdate(){try{const t=await ea.get("last_price_update_timestamp");if(!t)return!0;const n=Date.now(),r=new Date(t).getTime();return(n-r)/(1e3*60*60)>=24}catch(t){return console.error("Error checking if price update is needed:",t),!0}}static async schedulePriceUpdate(){try{await this.needsPriceUpdate()&&await this.updatePrices()}catch(t){throw console.error("Error scheduling price update:",t),t}}static async updatePrices(){const t=Gr(),n=t.addImport({id:`price-update-${Date.now()}`,type:"pricing",name:"Price Updates",status:"pending",progress:0,totalItems:0,processedItems:0});try{await Ug.syncPrices((o,a)=>{t.updateImport(n,{status:"processing",progress:Math.round(o/a*100),totalItems:a,processedItems:o})});const r=new Date().toISOString();await ea.set("last_price_update_timestamp",r),t.completeImport(n),console.log(`Prices updated successfully at ${r}`)}catch(r){throw console.error("Error updating prices:",r),t.completeImport(n,r instanceof Error?r.message:"Unknown error"),r}}static async getLastUpdateTime(){try{const t=await ea.get("last_price_update_timestamp");return t?new Date(t):null}catch(t){return console.error("Error getting last update time:",t),null}}static async getNextUpdateTime(){try{const t=await this.getLastUpdateTime();return t?new Date(t.getTime()+1440*60*1e3):new Date}catch(t){return console.error("Error calculating next update time:",t),null}}}const Ll=xe(null),ql=xe(null),vr=xe(!1);function Kg(){const e=o=>o?o.toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Never",t=async()=>{try{Ll.value=await ys.getLastUpdateTime(),ql.value=await ys.getNextUpdateTime()}catch(o){console.error("Error updating price info:",o)}};return{lastUpdate:Ll,nextUpdate:ql,isUpdating:vr,formatDate:e,updatePriceInfo:t,checkAndScheduleUpdate:async()=>{if(!vr.value){vr.value=!0;try{await ys.schedulePriceUpdate(),await t()}catch(o){console.error("Error scheduling price update:",o)}finally{vr.value=!1}}},forceUpdatePrices:async()=>{if(!vr.value){vr.value=!0;try{await ys.updatePrices(),await t()}catch(o){throw console.error("Error updating prices:",o),o}finally{vr.value=!1}}}}}const Vg={class:"home"},Hg={class:"price-update-info card mb-4"},Wg={class:"card-body"},zg={class:"price-update-details"},Qg={class:"update-info"},Yg={class:"value"},Gg={class:"update-info"},Jg={class:"value"},Xg={class:"update-actions"},Zg=["disabled"],ey={class:"dashboard-stats row g-4"},ty={class:"col-lg-3 col-md-6"},ny={class:"card h-100 border"},ry={class:"card-body"},sy={class:"stat-value"},oy={class:"col-lg-3 col-md-6"},iy={class:"card h-100 border"},ay={class:"card-body"},cy={class:"stat-value"},ly={class:"col-lg-3 col-md-6"},uy={class:"card h-100 border"},dy={class:"card-body"},fy={class:"col-lg-3 col-md-6"},py={class:"card h-100 border"},hy={class:"card-body"},my={class:"col-lg-3 col-md-6"},gy={class:"card h-100 border"},yy={class:"card-body"},vy={class:"stat-value text-success"},by={class:"col-lg-3 col-md-6"},_y={class:"card h-100 border"},wy={class:"card-body"},Cy={class:"stat-value text-danger"},ky={class:"col-lg-3 col-md-6"},xy={class:"card h-100 border"},Ay={class:"card-body"},Ey={class:"row mt-4"},Iy={class:"col-12"},Sy={class:"card border"},Py={class:"card-body"},Oy={class:"row"},Ry={class:"col-md-3"},$y={class:"col-md-3"},Dy={class:"col-md-3"},Ty={class:"text-danger"},Fy={class:"col-md-3"},My={class:"text-danger"},By=ct({__name:"HomeView",setup(e){const t=Ja(),n=qg(),r=jg(),{formatDate:o,checkAndScheduleUpdate:a,forceUpdatePrices:c,lastUpdate:u,nextUpdate:d,isUpdating:h}=Kg(),p=xe("0.00"),g=xe("0.00"),b=xe("0.00"),C=xe("0.00"),P=xe("0.00"),q=xe("0.00"),j=xe("0.00"),U=xe("0.00"),Q=xe("0.00"),R=xe("0.00"),E=xe("0.00"),ne=we=>we.format("de-DE"),ce=async()=>{try{await t.loadCards(),await n.loadHoldings(),await r.loadTransactions();const we=await _o.calculatePortfolioValue(),H=await _o.calculateTotalCostBasis(),Oe=await _o.calculateUnrealizedPnL(),je=await _o.calculateRealizedPnL();p.value=ne(we),g.value=ne(H),b.value=ne(Oe),C.value=ne(je);const de=await wr.getTotalRevenue(),Se=await wr.getTotalCosts(),Ne=await wr.getTotalFees(),nt=await wr.getTotalShippingCosts("purchase"),We=await wr.getTotalShippingCosts("sale"),Fe=await wr.getTotalNetProfit();P.value=ne(de),q.value=ne(Se),U.value=ne(de),Q.value=ne(Se),R.value=ne(Ne),E.value=ne(nt.subtract(We)),j.value=ne(Fe)}catch(we){console.error("Error loading dashboard data:",we)}},Ie=async()=>{try{await c(),await ce(),alert("Prices refreshed successfully")}catch(we){console.error("Error refreshing prices:",we),alert("Failed to refresh prices: "+we.message)}};return In(async()=>{await ce(),setTimeout(async()=>{await a()},0)}),(we,H)=>(K(),X("div",Vg,[H[15]||(H[15]=v("h1",null,"MTG Collection Tracker",-1)),v("div",Hg,[v("div",Wg,[H[2]||(H[2]=v("h2",{class:"card-title"},"Price Updates",-1)),v("div",zg,[v("div",Qg,[H[0]||(H[0]=v("span",{class:"label"},"Last Update:",-1)),v("span",Yg,se(Ee(o)(Ee(u))),1)]),v("div",Gg,[H[1]||(H[1]=v("span",{class:"label"},"Next Update:",-1)),v("span",Jg,se(Ee(o)(Ee(d))),1)])]),v("div",Xg,[v("button",{onClick:Ie,class:"btn btn-primary",disabled:Ee(h)},se(Ee(h)?"Updating...":"Refresh Prices Now"),9,Zg)])])]),v("div",ey,[v("div",ty,[v("div",ny,[v("div",ry,[H[3]||(H[3]=v("h2",{class:"card-title"},"Portfolio Value",-1)),v("p",sy,se(p.value),1)])])]),v("div",oy,[v("div",iy,[v("div",ay,[H[4]||(H[4]=v("h2",{class:"card-title"},"Total Cost",-1)),v("p",cy,se(g.value),1)])])]),v("div",ly,[v("div",uy,[v("div",dy,[H[5]||(H[5]=v("h2",{class:"card-title"},"Unrealized P/L",-1)),v("p",{class:kt(["stat-value",parseFloat(b.value)>=0?"positive":"negative"])},se(b.value),3)])])]),v("div",fy,[v("div",py,[v("div",hy,[H[6]||(H[6]=v("h2",{class:"card-title"},"Realized P/L",-1)),v("p",{class:kt(["stat-value",parseFloat(C.value)>=0?"positive":"negative"])},se(C.value),3)])])]),v("div",my,[v("div",gy,[v("div",yy,[H[7]||(H[7]=v("h2",{class:"card-title"},"Total Revenue",-1)),v("p",vy,se(P.value),1)])])]),v("div",by,[v("div",_y,[v("div",wy,[H[8]||(H[8]=v("h2",{class:"card-title"},"Total Costs",-1)),v("p",Cy,se(q.value),1)])])]),v("div",ky,[v("div",xy,[v("div",Ay,[H[9]||(H[9]=v("h2",{class:"card-title"},"Net Profit/Loss",-1)),v("p",{class:kt(["stat-value",parseFloat(j.value)>=0?"text-success":"text-danger"])},se(j.value),3)])])])]),v("div",Ey,[v("div",Iy,[v("div",Sy,[v("div",Py,[H[14]||(H[14]=v("h2",{class:"card-title"},"Financial Breakdown",-1)),v("div",Oy,[v("div",Ry,[H[10]||(H[10]=v("h3",null,"Sales Revenue",-1)),v("p",null,se(U.value),1)]),v("div",$y,[H[11]||(H[11]=v("h3",null,"Purchase Costs",-1)),v("p",null,se(Q.value),1)]),v("div",Dy,[H[12]||(H[12]=v("h3",null,"Fees & Commission",-1)),v("p",Ty,se(R.value),1)]),v("div",Fy,[H[13]||(H[13]=v("h3",null,"Shipping Costs",-1)),v("p",My,se(E.value),1)])])])])])])]))}}),Ny=hn(By,[["__scopeId","data-v-46167d50"]]),Qt=e=>e.toLowerCase().normalize("NFKD").replace(new RegExp("\\p{Diacritic}","gu"),"").replace(/[\s-]+/g," ").replace(/[:'"]/g,"").trim();function Jr(e){const t=new Map;for(const n of e)t.set(Qt(n.name),n);return{byName:t}}async function jl(e){const t=e.trim(),n=Qt(t),r=await Ul(),a=(await Ly()).get(n);if(a)return console.log(`Set code resolved from alias: ${t} -> ${a}`),a;const c=r.byName.get(n);if(c)return console.log(`Set code resolved from exact match: ${t} -> ${c.code}`),await Xt(n,c.code),c.code;if(/^commander:\s*/i.test(t)&&/: extras$/i.test(t)){const h=t.replace(/^commander:\s*/i,"").replace(/: extras$/i,"").trim(),p=r.byName.get(Qt(`${h} Commander`));if(p)return console.log(`Set code resolved from commander + extras nested: ${t} -> ${p.code}`),await Xt(n,p.code),p.code;const g=r.byName.get(Qt(h));if(g)return console.log(`Set code resolved from commander + extras nested (base): ${t} -> ${g.code}`),await Xt(n,g.code),g.code}if(/^commander:\s*/i.test(t)){const h=t.replace(/^commander:\s*/i,"").trim(),p=r.byName.get(Qt(`${h} Commander`));if(p)return console.log(`Set code resolved from commander rewrite (commander): ${t} -> ${p.code}`),await Xt(n,p.code),p.code;const g=r.byName.get(Qt(h));if(g)return console.log(`Set code resolved from commander rewrite (base): ${t} -> ${g.code}`),await Xt(n,g.code),g.code}if(/: extras$/i.test(t)){const h=Qt(t.replace(/: extras$/i,"")),p=r.byName.get(h);if(p)return console.log(`Set code resolved from extras suffix: ${t} -> ${p.code}`),await Xt(n,p.code),p.code}if(/^universes beyond:\s*/i.test(t)){const h=t.replace(/^universes beyond:\s*/i,"").trim();if(/: extras$/i.test(h)){const g=Qt(h.replace(/: extras$/i,"")),b=r.byName.get(g);if(b)return console.log(`Set code resolved from universes beyond + extras: ${t} -> ${b.code}`),await Xt(n,b.code),b.code}const p=r.byName.get(Qt(h));if(p)return console.log(`Set code resolved from universes beyond: ${t} -> ${p.code}`),await Xt(n,p.code),p.code}if(/^magic: the gathering -\s*/i.test(t)){const h=t.replace(/^magic: the gathering -\s*/i,"").trim();if(/: extras$/i.test(h)){const g=Qt(h.replace(/: extras$/i,"")),b=r.byName.get(g);if(b)return console.log(`Set code resolved from magic: the gathering - extras: ${t} -> ${b.code}`),await Xt(n,b.code),b.code}const p=r.byName.get(Qt(h));if(p)return console.log(`Set code resolved from magic: the gathering -: ${t} -> ${p.code}`),await Xt(n,p.code),p.code}if(/^secret lair drop series:/i.test(t)){const h=t.replace(/^secret lair drop series:/i,"").trim();if(/: extras$/i.test(h)){const g=Qt(h.replace(/: extras$/i,"")),b=r.byName.get(g);if(b)return console.log(`Set code resolved from secret lair drop series + extras: ${t} -> ${b.code}`),await Xt(n,b.code),b.code}const p=r.byName.get(Qt(h));if(p)return console.log(`Set code resolved from secret lair drop series: ${t} -> ${p.code}`),await Xt(n,p.code),p.code}console.log(`Set code unresolved: ${t}`),await Pd();const d=(await Ul()).byName.get(n);return d?(console.log(`Set code resolved from fresh exact match: ${t} -> ${d.code}`),d.code):(await Xt(n,null),null)}async function Ul(){try{const e=Date.now()-6048e5,t=await _e.settings.get("scryfall_sets_cache");return t&&t.v&&t.v.fetchedAt>e?(console.log("Using cached Scryfall sets data"),Jr(t.v.sets)):(console.log("Refreshing Scryfall sets cache (no cache or old cache)"),await Pd())}catch(e){console.error("Error in getSetIndex:",e);try{const t=await _e.settings.get("scryfall_sets_cache");if(t&&t.v)return console.log("Using old cached Scryfall sets data due to error"),Jr(t.v.sets)}catch(t){console.error("Error accessing cached Scryfall sets data:",t)}return console.log("Returning empty Scryfall sets index"),Jr([])}}async function Pd(){try{console.log("Fetching Scryfall sets data...");const e=await fetch("https://api.scryfall.com/sets");if(!e.ok)throw new Error(`Failed to fetch sets: ${e.status} ${e.statusText}`);const n=(await e.json()).data||[];return console.log(`Fetched ${n.length} Scryfall sets`),await _e.settings.put({k:"scryfall_sets_cache",v:{sets:n,fetchedAt:Date.now()},createdAt:new Date,updatedAt:new Date}),Jr(n)}catch(e){console.error("Error refreshing Scryfall sets cache:",e);try{const t=await _e.settings.get("scryfall_sets_cache");if(t&&t.v)return console.log("Using old cached Scryfall sets data due to fetch error"),Jr(t.v.sets)}catch(t){console.error("Error accessing cached Scryfall sets data:",t)}return console.log("Returning empty Scryfall sets index due to errors"),Jr([])}}async function Ly(){const e=new Map,t=await _e.settings.get("set_code_aliases");if(t&&t.v)for(const[n,r]of Object.entries(t.v))e.set(n,r);return e}async function Xt(e,t){try{const n=Qt(e),r=await _e.settings.get("set_code_aliases");let o={};r&&r.v&&(o={...r.v}),o[n]=t,await _e.settings.put({k:"set_code_aliases",v:o,createdAt:r?.createdAt||new Date,updatedAt:new Date})}catch(n){console.error("Error storing set code alias:",n)}}const Ot=[];for(let e=0;e<256;++e)Ot.push((e+256).toString(16).slice(1));function qy(e,t=0){return(Ot[e[t+0]]+Ot[e[t+1]]+Ot[e[t+2]]+Ot[e[t+3]]+"-"+Ot[e[t+4]]+Ot[e[t+5]]+"-"+Ot[e[t+6]]+Ot[e[t+7]]+"-"+Ot[e[t+8]]+Ot[e[t+9]]+"-"+Ot[e[t+10]]+Ot[e[t+11]]+Ot[e[t+12]]+Ot[e[t+13]]+Ot[e[t+14]]+Ot[e[t+15]]).toLowerCase()}let ta;const jy=new Uint8Array(16);function Uy(){if(!ta){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");ta=crypto.getRandomValues.bind(crypto)}return ta(jy)}const Ky=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Kl={randomUUID:Ky};function Vy(e,t,n){e=e||{};const r=e.random??e.rng?.()??Uy();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,qy(r)}function Oo(e,t,n){return Kl.randomUUID&&!e?Kl.randomUUID():Vy(e)}class kr{static async importCardmarketTransactions(t){const n=Gr(),r=Oo();n.addImport({id:r,type:"cardmarket",name:"Cardmarket Transactions",status:"pending",progress:0,totalItems:t.length,processedItems:0});try{const o=new Date;for(let a=0;a<t.length;a++){const c=t[a];n.updateImport(r,{status:"processing",processedItems:a+1,progress:Math.round((a+1)/t.length*100)});const u=`cardmarket:${c.reference}:${c.lineNumber}`;if(await _e.transactions.where("externalRef").equals(u).first())continue;const h=qe.parse(c.amount,"EUR"),p={id:`tx-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,kind:h.isPositive()?"SELL":"BUY",quantity:1,unitPrice:h.getCents(),fees:0,shipping:0,currency:"EUR",source:"cardmarket",externalRef:u,happenedAt:new Date(c.date),createdAt:o,updatedAt:o};await Yt.add(p)}n.completeImport(r)}catch(o){throw console.error("Error importing Cardmarket transactions:",o),n.completeImport(r,o.message),o}}static async importCardmarketOrders(t){const n=Gr(),r=Oo();n.addImport({id:r,type:"cardmarket",name:"Cardmarket Orders",status:"pending",progress:0,totalItems:t.length,processedItems:0});try{const o=new Date;for(let a=0;a<t.length;a++){const c=t[a];n.updateImport(r,{status:"processing",processedItems:a+1,progress:Math.round((a+1)/t.length*100)});const u=`cardmarket:order:${c.orderId}:${c.lineNumber}`;if(await _e.transactions.where("externalRef").equals(u).first())continue;const h=qe.parse(c.merchandiseValue,"EUR"),p=qe.parse(c.shipmentCosts,"EUR"),g=qe.parse(c.commission,"EUR"),b={id:`order-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,kind:c.direction==="sale"?"SELL":"BUY",quantity:parseInt(c.articleCount)||1,unitPrice:Math.round(h.getCents()/(parseInt(c.articleCount)||1)),fees:g.getCents(),shipping:p.getCents(),currency:"EUR",source:"cardmarket",externalRef:u,happenedAt:new Date(c.dateOfPurchase),createdAt:o,updatedAt:o};if(await Yt.add(b),c.direction==="purchase"){const C=await _e.transactions.where("externalRef").startsWith(`cardmarket:article:${c.orderId}:`).toArray();for(const P of C)if(P.lotId){const q=await vt.getById(P.lotId);if(q){const j=parseInt(c.articleCount)||1,U=P.quantity/j,Q=wr.calculateTrueAcquisitionCost(h.getCents()/100,p.getCents()/100,g.getCents()/100,j),R=Math.round(p.getCents()*U/P.quantity),E=Math.round(g.getCents()*U/P.quantity);await vt.update(q.id,{acquisitionPriceCent:Q,acquisitionFeesCent:E,acquisitionShippingCent:R,totalAcquisitionCostCent:Q+E+R,updatedAt:o})}}}if(c.direction==="sale"){const C=await _e.transactions.where("externalRef").startsWith(`cardmarket:article:${c.orderId}:`).toArray();for(const P of C)if(P.lotId){const q=await vt.getById(P.lotId);if(q){const j=parseInt(c.articleCount)||1,U=P.quantity/j,Q=Math.round(h.getCents()/j),R=Math.round(g.getCents()*U/P.quantity),E=Math.round(p.getCents()*U/P.quantity);await vt.update(q.id,{salePriceCent:Q,saleFeesCent:R,saleShippingCent:E,totalSaleRevenueCent:Q-R+E,updatedAt:o})}}}}n.completeImport(r)}catch(o){throw console.error("Error importing Cardmarket orders:",o),n.completeImport(r,o.message),o}}static async importCardmarketArticles(t){const n=Gr(),r=Oo();n.addImport({id:r,type:"cardmarket",name:"Cardmarket Articles",status:"pending",progress:0,totalItems:t.length,processedItems:0});try{const o=new Date;for(let a=0;a<t.length;a++){const c=t[a];n.updateImport(r,{status:"processing",processedItems:a+1,progress:Math.round((a+1)/t.length*100)});let u=null,d=null;if(c.productId){const j=c.productId.split(" | ").map(U=>U.trim());if(j.length===1)u=await Zt.getByCardmarketId(j[0]),console.log(JSON.stringify({product_ids:j,resolved_via:"cardmarket_id",cardmarket_id:j[0],final_uri:`/cards/cardmarket/${j[0]}`}));else if(j.length>1){const U=await Zt.getByCardmarketIds(j);U&&U.length>0&&(u=U[0],console.log(JSON.stringify({product_ids:j,resolved_via:"cardmarket_id",cardmarket_id:j[0],final_uri:"/cards/collection"})))}d=u?.id||null}const h=j=>{const U=[/-\s*(\d+[a-zA-Z]*)\s*-/i,/-\s*([IVXLCDM]+)\s*-/i,/\s+(\d+[a-zA-Z]*)\s*$/i,/\((\d+[a-zA-Z]*)\)/i];for(const Q of U){const R=j.match(Q);if(R)return R[1]}return""};let p=h(c.name);if(!d){const j=await jl(c.expansion);let U=c.name,Q=null;const R=c.name.match(/^(.+?)\s*\((V\.\d+)\)$/i);R&&(U=R[1].trim(),Q=R[2]),p=h(c.name),console.log(JSON.stringify({product_ids:c.productId?c.productId.split(" | ").map(E=>E.trim()):[],resolved_via:"set+cn",set_code:j,collector_number:p,final_uri:j?`/cards/${j}/${p}`:""})),u=await Zt.hydrateCard({name:U,setCode:j||c.expansion,collectorNumber:p,version:Q}),d=u?.id||null,d||console.log(JSON.stringify({product_ids:c.productId?c.productId.split(" | ").map(E=>E.trim()):[],resolved_via:"none",set_code:null,collector_number:"",final_uri:"",name:c.name,expansion:c.expansion}))}const g=qe.parse(c.price,"EUR");if(d)if(await kn.getById(d))try{const U=o.toISOString().split("T")[0],Q=`${d}:scryfall:${U}`;if(!await _e.price_points.get(Q)){const E=await Zt.getPriceById(d);if(E){const ne={id:Q,cardId:d,provider:"scryfall",currency:E.getCurrency(),price:E.getCents(),asOf:o,createdAt:o};await _e.price_points.put(ne)}}}catch(U){console.error(`Error checking/updating price for existing card ${d}:`,U)}else{const U=u||await Zt.hydrateCard({scryfall_id:d,name:c.name,setCode:c.expansion,collectorNumber:""}),Q=await Zt.getImageUrlById(d),R={id:d,oracleId:U?.oracle_id||u?.oracle_id||"",name:c.name,set:U?.set_name||u?.set_name||c.expansion,setCode:U?.set||u?.set||await jl(c.expansion)||"",number:U?.collector_number||u?.collector_number||p||"",lang:U?.lang||u?.lang||"en",finish:"nonfoil",layout:Q?.layout||"normal",imageUrl:Q?.front||"",imageUrlBack:Q?.back||"",createdAt:o,updatedAt:o};await kn.add(R);try{const E=await Zt.getPriceById(d);if(E){const ne=o.toISOString().split("T")[0],Ie={id:`${d}:scryfall:${ne}`,cardId:d,provider:"scryfall",currency:E.getCurrency(),price:E.getCents(),asOf:o,createdAt:o};await _e.price_points.put(Ie)}}catch(E){console.error(`Error fetching price for new card ${d}:`,E)}}let b;if(c.direction==="purchase"){const j=`cardmarket:lot:${c.shipmentId}:${c.lineNumber}`,U=await vt.getByExternalRef(j);let Q=null;if(U.length>0)Q=U[0];else{const R=await vt.getByCardId(d||"");for(const E of R)if(!(await Yt.getByLotId(E.id)).some(Ie=>Ie.kind==="BUY")){Q=E;break}}if(Q)await vt.update(Q.id,{unitCost:g.getCents(),source:"cardmarket",purchasedAt:new Date(c.dateOfPurchase),updatedAt:o,acquisitionPriceCent:g.getCents(),acquisitionFeesCent:0,acquisitionShippingCent:0,totalAcquisitionCostCent:g.getCents()}),b=Q.id;else{const R=`lot-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,E={id:R,cardId:d||"",quantity:parseInt(c.amount)||1,unitCost:g.getCents(),condition:"",language:"",foil:!1,finish:"nonfoil",source:"cardmarket",currency:"EUR",externalRef:j,purchasedAt:new Date(c.dateOfPurchase),acquisitionPriceCent:g.getCents(),acquisitionFeesCent:0,acquisitionShippingCent:0,totalAcquisitionCostCent:g.getCents(),createdAt:o,updatedAt:o};await vt.add(E),b=R}}const C=`cardmarket:article:${c.shipmentId}:${c.lineNumber}`;if(await _e.transactions.where("externalRef").equals(C).first())continue;const q={id:`article-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,kind:c.direction==="sale"?"SELL":"BUY",cardId:d||void 0,lotId:b,quantity:parseInt(c.amount)||1,unitPrice:g.getCents(),fees:0,shipping:0,currency:"EUR",source:"cardmarket",externalRef:C,happenedAt:new Date(c.dateOfPurchase),createdAt:o,updatedAt:o};await Yt.add(q)}n.completeImport(r)}catch(o){throw console.error("Error importing Cardmarket articles:",o),n.completeImport(r,o.message),o}}static async getOrCreateLotForPurchase(t,n,r,o){const a=new Date,c=await vt.getByCardId(t);for(const h of c)if(!(await Yt.getByLotId(h.id)).some(b=>b.kind==="BUY"))return await vt.update(h.id,{unitCost:r,quantity:h.quantity+n,source:"cardmarket",purchasedAt:o,updatedAt:a}),h.id;const u=`lot-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,d={id:u,cardId:t,quantity:n,unitCost:r,condition:"NM",language:"en",foil:!1,finish:"nonfoil",source:"cardmarket",currency:"EUR",purchasedAt:o,acquisitionPriceCent:r,acquisitionFeesCent:0,acquisitionShippingCent:0,totalAcquisitionCostCent:r,createdAt:a,updatedAt:a};return await vt.add(d),u}static async getLotForSale(t,n){const o=(await vt.getByCardId(t)).filter(a=>!a.disposedAt||a.disposedQuantity&&a.disposedQuantity<a.quantity).sort((a,c)=>a.purchasedAt.getTime()-c.purchasedAt.getTime());for(const a of o){const c=a.disposedQuantity?a.quantity-a.disposedQuantity:a.quantity;if(c>=n)return{lotId:a.id,remainingQuantity:c-n}}return null}static async checkForExistingImports(t){const n=[];for(const r of t){const o=`cardmarket:article:${r.shipmentId}:${r.lineNumber}`,a=await _e.transactions.where("externalRef").equals(o).first();n.push({article:r,exists:!!a})}return n}}const Hy={class:"csv-import"},Wy={class:"import-section"},zy={class:"mb-3"},Qy={class:"mb-3"},Yy={class:"mb-3"},Gy={class:"import-section"},Jy={class:"mb-3"},Xy=ct({__name:"CsvImportView",setup(e){const t=xe(null),n=(u,d)=>{t.value={type:u,message:d},setTimeout(()=>{t.value=null},5e3)},r=async u=>{const d=u.target,h=d.files?.[0];if(h)try{const g=(await h.text()).split(`
`),b=g[0].split(";").map(P=>P.trim()),C=[];for(let P=1;P<g.length;P++){const q=g[P].trim();if(!q)continue;const j=q.split(";"),U={};for(let Q=0;Q<b.length;Q++){const R=b[Q].toLowerCase(),E=j[Q]?j[Q].trim():"";switch(R){case"reference":case"referenz":case"transaktions-id":U.reference=E;break;case"date":case"datum":case"date paid":U.date=E;break;case"category":case"kategorie":U.category=E;break;case"type":case"typ":U.type=E;break;case"counterpart":case"gegenpartei":U.counterpart=E;break;case"amount":case"betrag":U.amount=E;break;case"closing balance (eur)":case"balance after":case"saldo danach (eur)":U.balanceAfter=E;break}}U.reference&&(U.currency="EUR",C.push(U))}await kr.importCardmarketTransactions(C),n("success",`Successfully imported ${C.length} transactions`),d.value=""}catch(p){console.error("Error importing transactions:",p),n("error","Failed to import transactions: "+p.message)}},o=async u=>{const d=u.target,h=d.files?.[0];if(h)try{const g=h.name.toLowerCase().includes("purchased")?"purchase":"sale",C=(await h.text()).split(`
`),P=C[0].split(";").map(j=>j.trim()),q=[];for(let j=1;j<C.length;j++){const U=C[j].trim();if(!U)continue;const Q=U.split(";"),R={};for(let E=0;E<P.length;E++){const ne=P[E].toLowerCase(),ce=Q[E]?Q[E].trim():"";switch(ne){case"order id":case"orderid":case"bestellnummer":R.orderId=ce;break;case"date of purchase":case"date":case"date of payment":case"kaufdatum":case"zahlungsdatum":R.dateOfPurchase=ce;break;case"username":case"benutzername":R.username=ce;break;case"country":case"land":R.country=ce;break;case"city":case"stadt":R.city=ce;break;case"article count":case"items":case"anzahl artikel":R.articleCount=ce;break;case"merchandise value":case"warenwert":R.merchandiseValue=ce;break;case"shipment costs":case"versandkosten":R.shipmentCosts=ce;break;case"commission":case"trustee service fee":case"provision":R.commission=ce;break;case"total value":case"gesamtwert":R.totalValue=ce;break}}R.orderId&&(R.direction=g,R.currency="EUR",q.push(R))}await kr.importCardmarketOrders(q),n("success",`Successfully imported ${q.length} ${g} orders`),d.value=""}catch(p){console.error("Error importing orders:",p),n("error","Failed to import orders: "+p.message)}},a=async u=>{const d=u.target,h=d.files?.[0];if(h)try{const g=h.name.toLowerCase().includes("purchased")?"purchase":"sale",C=(await h.text()).split(`
`),P=C[0].split(";").map(j=>j.trim()),q=[];for(let j=1;j<C.length;j++){const U=C[j].trim();if(!U)continue;const Q=U.split(";"),R={};for(let E=0;E<P.length;E++){const ne=P[E].toLowerCase(),ce=Q[E]?Q[E].trim():"";switch(ne){case"shipment nr.":case"shipment nr":case"shipment id":case"order id":case"bestellnummer":R.shipmentId=ce;break;case"date of purchase":case"date":R.dateOfPurchase=ce;break;case"product id":case"produkt id":R.productId=ce;break;case"article":case"artikel":case"localized product name":case"produktname":R.name=ce;break;case"expansion":case"erweiterung":R.expansion=ce;break;case"category":case"kategorie":R.category=ce;break;case"amount":case"anzahl":R.amount=ce;break;case"article value":case"price":case"preis":R.price=ce;break;case"total":R.total=ce;break;case"currency":R.currency=ce;break;case"comments":R.comments=ce;break}}R.shipmentId&&(R.direction=g,R.currency||(R.currency="EUR"),q.push(R))}await kr.importCardmarketArticles(q),n("success",`Successfully imported ${q.length} ${g} articles`),d.value=""}catch(p){console.error("Error importing articles:",p),n("error","Failed to import articles: "+p.message)}},c=async u=>{const d=u.target;d.files?.[0]&&(n("success","ManaBox import functionality would be implemented here"),d.value="")};return(u,d)=>(K(),X("div",Hy,[d[8]||(d[8]=v("h1",null,"Import CSV Files",-1)),v("div",Wy,[d[3]||(d[3]=v("h2",null,"Cardmarket Data",-1)),d[4]||(d[4]=v("p",null,"Import your Cardmarket transaction data to track your purchases and sales.",-1)),v("div",zy,[d[0]||(d[0]=v("label",{for:"transactions-csv",class:"form-label"}," Upload Transactions CSV ",-1)),v("input",{id:"transactions-csv",type:"file",accept:".csv",onChange:r,class:"form-control"},null,32)]),v("div",Qy,[d[1]||(d[1]=v("label",{for:"orders-csv",class:"form-label"}," Upload Orders CSV ",-1)),v("input",{id:"orders-csv",type:"file",accept:".csv",onChange:o,class:"form-control"},null,32)]),v("div",Yy,[d[2]||(d[2]=v("label",{for:"articles-csv",class:"form-label"}," Upload Articles CSV ",-1)),v("input",{id:"articles-csv",type:"file",accept:".csv",onChange:a,class:"form-control"},null,32)])]),v("div",Gy,[d[6]||(d[6]=v("h2",null,"ManaBox Scans",-1)),d[7]||(d[7]=v("p",null,"Import your ManaBox scan data to track your physical collection.",-1)),v("div",Jy,[d[5]||(d[5]=v("label",{for:"manabox-csv",class:"form-label"}," Upload ManaBox CSV ",-1)),v("input",{id:"manabox-csv",type:"file",accept:".csv",onChange:c,class:"form-control"},null,32)])]),t.value?(K(),X("div",{key:0,class:kt(["status-message",t.value.type])},se(t.value.message),3)):De("",!0)]))}}),Zy=hn(Xy,[["__scopeId","data-v-a64310e9"]]);function ev(e){return new Worker("/mtg-pwa/assets/cardmarketCsv-GHGAoa0o.js",{name:e?.name})}const tv={class:"cardmarket-wizard"},nv={class:"wizard-progress"},rv={class:"step-number"},sv={class:"step-label"},ov={class:"card"},iv={class:"card-body"},av={class:"wizard-content"},cv={key:0,class:"step-content"},lv={class:"file-upload-section"},uv={class:"mb-3"},dv={key:0,class:"files-info"},fv={class:"file-list"},pv={class:"file-name"},hv={class:"file-type"},mv={class:"file-size"},gv={key:0,class:"error-messages"},yv={key:1,class:"step-content"},vv={key:0,class:"preview-stats"},bv={class:"stat"},_v={class:"stat-value"},wv={class:"stat"},Cv={class:"stat-value"},kv={class:"stat"},xv={class:"stat-value"},Av={key:1,class:"preview-table-container"},Ev={class:"preview-table-wrapper"},Iv={class:"preview-table"},Sv={key:0},Pv={key:1},Ov={key:2},Rv={key:3},$v={key:4},Dv={key:5},Tv={key:6},Fv={key:7},Mv={key:8},Bv={key:9},Nv={key:10},Lv={key:11},qv={key:12},jv={key:13},Uv={key:14},Kv={key:0},Vv={key:1},Hv={key:2},Wv={key:3},zv={key:4},Qv={key:5},Yv={key:6},Gv={key:7},Jv={key:8},Xv={key:9},Zv={key:10},eb={key:11},tb={key:12},nb={key:13},rb={key:14},sb={key:0},ob=["colspan"],ib={key:2,class:"invalid-rows-section"},ab={class:"invalid-rows"},cb={class:"row-number"},lb={class:"row-errors"},ub={key:0,class:"more-rows"},db={key:2,class:"step-content"},fb={key:0,class:"conflicts-section"},pb={class:"conflicts-list"},hb={class:"flex-grow-1"},mb={class:"fw-medium"},gb={class:"small text-muted"},yb={key:1,class:"conflicts-section"},vb={class:"conflicts-list"},bb={class:"flex-grow-1"},_b={class:"fw-medium"},wb={class:"small text-muted"},Cb={key:3,class:"step-content"},kb={class:"summary-stats"},xb={class:"stat"},Ab={class:"stat-value"},Eb={class:"stat"},Ib={class:"stat-value"},Sb={key:0,class:"stat"},Pb={class:"stat-value"},Ob={class:"summary-details"},Rb={class:"summary-grid"},$b={class:"summary-item"},Db={class:"summary-value"},Tb={class:"summary-item"},Fb={class:"summary-value"},Mb={class:"summary-item"},Bb={class:"summary-value"},Nb={key:0,class:"import-status error"},Lb={class:"wizard-navigation pt-3"},qb=["disabled"],jb=["disabled"],Ub=ct({__name:"CardmarketImportWizard",setup(e){const t=[{key:"upload",title:"Upload"},{key:"preview",title:"Preview"},{key:"conflicts",title:"Conflicts"},{key:"summary",title:"Summary"}],n=xe(0),r=xe([]),o=xe({}),a=xe({}),c=xe({}),u=xe(!1),d=xe(null),h=xe({}),p=xe([]),g=J=>{if(J===0)return"0 Bytes";const W=1024,L=["Bytes","KB","MB","GB"],Re=Math.floor(Math.log(J)/Math.log(W));return parseFloat((J/Math.pow(W,Re)).toFixed(2))+" "+L[Re]},b=J=>new Intl.NumberFormat("en-EU",{style:"currency",currency:"EUR"}).format(J/100),C=async J=>{const L=J.target.files;if(!(!L||L.length===0)){p.value=[],r.value=Array.from(L);try{for(const Re of r.value){if(!Re.name.endsWith(".csv")){p.value.push(`File ${Re.name} is not a CSV file.`);continue}const Ce=await Re.text();o.value[Re.name]=Ce,a.value[Re.name]=nt(Re.name)}await P()}catch(Re){p.value.push("Failed to read the files: "+Re.message)}}},P=async()=>{try{c.value={};for(const[J,W]of Object.entries(o.value)){const L=a.value[J];if(L==="unknown"){console.warn(`Skipping unknown file type: ${J}`);continue}const Re=new ev;let Ce="",Ye="sale";switch(L){case"transactions":Ce="parseTransactions";break;case"sold-orders":Ce="parseOrders",Ye="sale";break;case"purchased-orders":Ce="parseOrders",Ye="purchase";break;case"sold-articles":Ce="parseArticles",Ye="sale";break;case"purchased-articles":Ce="parseArticles",Ye="purchase";break}Re.postMessage({type:Ce,data:W,direction:Ye});const zt=await new Promise((qt,mt)=>{Re.onmessage=ee=>{const{type:ke,result:Y,error:Pe}=ee.data;console.log("Worker response type:",ke),Pe?mt(new Error(Pe)):qt(Y)},Re.onerror=ee=>{mt(ee)}});c.value[L]=zt,Re.terminate()}await We()}catch(J){p.value.push("Failed to parse CSV data: "+J.message)}},q=tt(()=>n.value===0?r.value.length>0&&p.value.length===0:!0),j=async()=>{q.value&&(n.value===0&&await P(),n.value<t.length-1&&n.value++)},U=()=>{n.value>0&&n.value--},Q=async()=>{if(!u.value){u.value=!0,d.value=null;try{for(const[J,W]of Object.entries(c.value)){if(!W||W.length===0)continue;const L=Se(W,J);switch(J){case"transactions":await kr.importCardmarketTransactions(L);break;case"sold-orders":case"purchased-orders":await kr.importCardmarketOrders(L);break;case"sold-articles":case"purchased-articles":await kr.importCardmarketArticles(L);break}}d.value="Import completed successfully! Check the status indicator in the top right for details.",setTimeout(()=>{n.value=0,r.value=[],o.value={},a.value={},c.value={},p.value=[],u.value=!1,d.value=null},3e3)}catch(J){d.value="Failed to import data: "+J.message,u.value=!1}}},R=J=>Se(c.value[J]||[],J),E=J=>Se(c.value[J]||[],J).filter(L=>Fe(J,L)),ne=()=>Object.values(c.value).reduce((J,W)=>J+(W?.length||0),0),ce=()=>{let J=0;for(const[W,L]of Object.entries(c.value))L&&(J+=Se(L,W).length);return J},Ie=J=>{if(/^\d{2}\.\d{2}\.\d{4} \d{2}:\d{2}:\d{2}$/.test(J)){const Re=J.split(" ")[0].split("."),Ce=parseInt(Re[0],10),Ye=parseInt(Re[1],10)-1,zt=parseInt(Re[2],10),qt=new Date(zt,Ye,Ce);return qt.getFullYear()===zt&&qt.getMonth()===Ye&&qt.getDate()===Ce}if(/^\d{2}\.\d{2}\.\d{4}$/.test(J)){const W=J.split("."),L=parseInt(W[0],10),Re=parseInt(W[1],10)-1,Ce=parseInt(W[2],10),Ye=new Date(Ce,Re,L);return Ye.getFullYear()===Ce&&Ye.getMonth()===Re&&Ye.getDate()===L}if(/^\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}$/.test(J)){const W=new Date(J);return!isNaN(W.getTime())}if(/^\d{4}-\d{2}-\d{2}$/.test(J)){const W=new Date(J);return!isNaN(W.getTime())}return!1},we=J=>{const W=J.replace(/[$\s]/g,"").replace(",",".");return!isNaN(parseFloat(W))},H=J=>{const W=parseInt(J,10);return!isNaN(W)&&W>0};function Oe(J){switch(J){case"transactions":return"Transaction Summary";case"sold-orders":return"Sold Orders";case"purchased-orders":return"Purchased Orders";case"sold-articles":return"Sold Articles";case"purchased-articles":return"Purchased Articles";default:return"Unknown File Type"}}const je=J=>{switch(J){case"transactions":return 5;case"sold-orders":case"purchased-orders":return 6;case"sold-articles":case"purchased-articles":return 8;default:return 5}},de=(J,W)=>{const L=[];if(!J.date&&!J.dateOfPurchase)L.push("Date is required");else{const Re=J.date||J.dateOfPurchase;Ie(Re)||L.push("Invalid date format (expected DD.MM.YYYY or YYYY-MM-DD)")}return W.includes("articles")?(J.name||L.push("Card name is required"),J.expansion||L.push("Expansion/Set is required"),J.price?we(J.price)||L.push("Invalid price format (expected numeric value)"):L.push("Price is required"),J.amount?H(J.amount)||L.push("Invalid quantity (expected positive integer)"):L.push("Quantity is required"),J.shipmentId||L.push("Order ID is required")):W.includes("orders")?(J.dateOfPurchase?Ie(J.dateOfPurchase)||L.push("Invalid date format (expected DD.MM.YYYY or YYYY-MM-DD)"):L.push("Date is required"),J.orderId||L.push("Order ID is required"),J.articleCount?H(J.articleCount)||L.push("Invalid article count (expected positive integer)"):L.push("Article count is required"),J.merchandiseValue?we(J.merchandiseValue)||L.push("Invalid merchandise value format (expected numeric value)"):L.push("Merchandise value is required")):W==="transactions"&&(J.reference||L.push("Reference is required"),J.amount?we(J.amount)||L.push("Invalid amount format (expected numeric value)"):L.push("Amount is required"),J.category||L.push("Category is required"),J.type||L.push("Type is required")),L},Se=(J,W="articles")=>J.filter(L=>de(L,W).length===0),Ne=(J,W="articles")=>J.map((L,Re)=>({index:Re,row:L,errors:de(L,W)})).filter(L=>L.errors.length>0),nt=J=>{const W=J.toLowerCase();return W.includes("transaction")?"transactions":W.includes("sold orders")?"sold-orders":W.includes("purchased orders")?"purchased-orders":W.includes("sold articles")?"sold-articles":W.includes("purchased articles")?"purchased-articles":"unknown"},We=async()=>{try{h.value={};for(const[J,W]of Object.entries(c.value))if(!(!W||W.length===0)&&J.includes("articles")){const L=await kr.checkForExistingImports(W);for(const Re of L){const Ce=`${J}:${Re.article.shipmentId}:${Re.article.lineNumber}`;h.value[Ce]=Re.exists}}}catch(J){console.error("Error checking for existing imports:",J)}},Fe=(J,W)=>{const L=`${J}:${W.shipmentId}:${W.lineNumber}`;return!!h.value[L]};return(J,W)=>(K(),X("div",tv,[W[30]||(W[30]=v("h1",null,"Cardmarket Import Wizard",-1)),v("div",nv,[(K(),X(Xe,null,Bt(t,(L,Re)=>v("div",{key:L.key,class:kt(["step",{active:n.value===Re,completed:Re<n.value}])},[v("div",rv,se(Re+1),1),v("div",sv,se(L.title),1)],2)),64))]),v("div",ov,[v("div",iv,[v("div",av,[n.value===0?(K(),X("div",cv,[W[2]||(W[2]=v("h2",null,"Upload CSV Files",-1)),W[3]||(W[3]=v("p",null,"Please select all Cardmarket CSV export files to import. You can select multiple files at once.",-1)),v("div",lv,[v("div",uv,[W[0]||(W[0]=v("label",{for:"csv-files",class:"form-label"}," Choose CSV Files ",-1)),v("input",{id:"csv-files",type:"file",accept:".csv",multiple:"",onChange:C,class:"form-control"},null,32)]),r.value.length>0?(K(),X("div",dv,[W[1]||(W[1]=v("h3",null,"Uploaded Files",-1)),v("ul",fv,[(K(!0),X(Xe,null,Bt(r.value,L=>(K(),X("li",{key:L.name,class:"file-item"},[v("span",pv,se(L.name),1),v("span",hv,"("+se(nt(L.name))+")",1),v("span",mv,"- "+se(g(L.size)),1)]))),128))])])):De("",!0)]),p.value.length>0?(K(),X("div",gv,[(K(!0),X(Xe,null,Bt(p.value,L=>(K(),X("div",{key:L,class:"error-message"},se(L),1))),128))])):De("",!0)])):n.value===1?(K(),X("div",yv,[W[11]||(W[11]=v("h2",null,"Preview Data",-1)),W[12]||(W[12]=v("p",null,"Review the data that will be imported. Check for any issues before proceeding.",-1)),(K(!0),X(Xe,null,Bt(a.value,(L,Re)=>(K(),X("div",{key:Re,class:"file-preview"},[v("h3",null,se(Oe(L)),1),c.value[L]&&c.value[L].length>0?(K(),X("div",vv,[v("div",bv,[v("div",_v,se(c.value[L].length),1),W[4]||(W[4]=v("div",{class:"stat-label"},"Total Rows",-1))]),v("div",wv,[v("div",Cv,se(Se(c.value[L],L).length),1),W[5]||(W[5]=v("div",{class:"stat-label"},"Valid Rows",-1))]),v("div",kv,[v("div",xv,se(Ne(c.value[L],L).length),1),W[6]||(W[6]=v("div",{class:"stat-label"},"Invalid Rows",-1))])])):De("",!0),c.value[L]&&c.value[L].length>0?(K(),X("div",Av,[W[8]||(W[8]=v("h4",null,"Valid Data Preview",-1)),v("div",Ev,[v("table",Iv,[v("thead",null,[v("tr",null,[L==="transactions"?(K(),X("th",Sv,"Reference")):(K(),X("th",Pv,"Line")),W[7]||(W[7]=v("th",null,"Date",-1)),L.includes("articles")?(K(),X("th",Ov,"Card Name")):De("",!0),L.includes("articles")?(K(),X("th",Rv,"Expansion")):De("",!0),L.includes("articles")?(K(),X("th",$v,"Price")):De("",!0),L.includes("articles")?(K(),X("th",Dv,"Quantity")):De("",!0),L.includes("articles")?(K(),X("th",Tv,"Order ID")):De("",!0),L.includes("articles")?(K(),X("th",Fv,"Status")):De("",!0),L.includes("orders")?(K(),X("th",Mv,"Order ID")):De("",!0),L.includes("orders")?(K(),X("th",Bv,"Username")):De("",!0),L.includes("orders")?(K(),X("th",Nv,"Article Count")):De("",!0),L.includes("orders")?(K(),X("th",Lv,"Merchandise Value")):De("",!0),L==="transactions"?(K(),X("th",qv,"Category")):De("",!0),L==="transactions"?(K(),X("th",jv,"Type")):De("",!0),L==="transactions"?(K(),X("th",Uv,"Amount")):De("",!0)])]),v("tbody",null,[(K(!0),X(Xe,null,Bt(Se(c.value[L],L).slice(0,5),(Ce,Ye)=>(K(),X("tr",{key:Ye},[L==="transactions"?(K(),X("td",Kv,se(Ce.reference),1)):(K(),X("td",Vv,se(Ce.lineNumber),1)),v("td",null,se(Ce.date||Ce.dateOfPurchase),1),L.includes("articles")?(K(),X("td",Hv,se(Ce.name),1)):De("",!0),L.includes("articles")?(K(),X("td",Wv,se(Ce.expansion),1)):De("",!0),L.includes("articles")?(K(),X("td",zv,se(b(parseFloat(Ce.price.replace(/[$\s]/g,"").replace(",","."))*100)),1)):De("",!0),L.includes("articles")?(K(),X("td",Qv,se(Ce.amount),1)):De("",!0),L.includes("articles")?(K(),X("td",Yv,se(Ce.shipmentId),1)):De("",!0),L.includes("articles")?(K(),X("td",Gv,[v("span",{class:kt(Fe(L,Ce)?"text-success":"text-primary")},se(Fe(L,Ce)?"Already Imported":"New"),3)])):De("",!0),L.includes("orders")?(K(),X("td",Jv,se(Ce.orderId),1)):De("",!0),L.includes("orders")?(K(),X("td",Xv,se(Ce.username),1)):De("",!0),L.includes("orders")?(K(),X("td",Zv,se(Ce.articleCount),1)):De("",!0),L.includes("orders")?(K(),X("td",eb,se(b(parseFloat(Ce.merchandiseValue.replace(/[$\s]/g,"").replace(",","."))*100)),1)):De("",!0),L==="transactions"?(K(),X("td",tb,se(Ce.category),1)):De("",!0),L==="transactions"?(K(),X("td",nb,se(Ce.type),1)):De("",!0),L==="transactions"?(K(),X("td",rb,se(b(parseFloat(Ce.amount.replace(/[$\s]/g,"").replace(",","."))*100)),1)):De("",!0)]))),128)),Se(c.value[L],L).length>5?(K(),X("tr",sb,[v("td",{colspan:je(L),class:"more-rows-cell"}," ... and "+se(Se(c.value[L],L).length-5)+" more rows ",9,ob)])):De("",!0)])])])])):De("",!0),Ne(c.value[L],L).length>0?(K(),X("div",ib,[W[9]||(W[9]=v("h4",null,"Invalid Rows",-1)),W[10]||(W[10]=v("p",null,"The following rows have issues and will be skipped:",-1)),v("div",ab,[(K(!0),X(Xe,null,Bt(Ne(c.value[L],L).slice(0,3),(Ce,Ye)=>(K(),X("div",{key:Ye,class:"invalid-row"},[v("div",cb,"Row "+se(Ce.row.lineNumber||Ce.row.reference),1),v("div",lb,se(Ce.errors.join(", ")),1)]))),128)),Ne(c.value[L],L).length>3?(K(),X("div",ub," ... and "+se(Ne(c.value[L],L).length-3)+" more rows ",1)):De("",!0)])])):De("",!0)]))),128))])):n.value===2?(K(),X("div",db,[W[19]||(W[19]=v("h2",null,"Resolve Conflicts",-1)),W[20]||(W[20]=v("p",null,"Check for duplicate imports and resolve any conflicts.",-1)),(K(!0),X(Xe,null,Bt(a.value,(L,Re)=>(K(),X("div",{key:Re,class:"file-conflicts"},[v("h3",null,se(Oe(L)),1),L.includes("articles")&&E(L).length>0?(K(),X("div",fb,[W[14]||(W[14]=v("h4",null,"Already Imported Articles",-1)),W[15]||(W[15]=v("p",null,"The following articles have already been imported and will be skipped:",-1)),v("div",pb,[(K(!0),X(Xe,null,Bt(E(L),(Ce,Ye)=>(K(),X("div",{key:Ye,class:"d-flex justify-content-between align-items-center p-2 bg-light rounded"},[v("div",hb,[v("div",mb,se(Ce.name),1),v("div",gb,se(Ce.expansion)+"  "+se(Ce.amount)+"  "+se(b(parseFloat(Ce.price.replace(/[$\s]/g,"").replace(",","."))*100))+"  Order #"+se(Ce.shipmentId),1)]),W[13]||(W[13]=v("div",{class:"ms-3"},[v("span",{class:"text-success fw-medium"},"Already Imported")],-1))]))),128))])])):De("",!0),L.includes("articles")&&R(L).length>0?(K(),X("div",yb,[W[17]||(W[17]=v("h4",null,"New Articles to Import",-1)),W[18]||(W[18]=v("p",null,"The following articles will be imported:",-1)),v("div",vb,[(K(!0),X(Xe,null,Bt(R(L).filter(Ce=>!Fe(L,Ce)),(Ce,Ye)=>(K(),X("div",{key:Ye,class:"d-flex justify-content-between align-items-center p-2 bg-light rounded"},[v("div",bb,[v("div",_b,se(Ce.name),1),v("div",wb,se(Ce.expansion)+"  "+se(Ce.amount)+"  "+se(b(parseFloat(Ce.price.replace(/[$\s]/g,"").replace(",","."))*100))+"  Order #"+se(Ce.shipmentId),1)]),W[16]||(W[16]=v("div",{class:"ms-3"},[v("span",{class:"text-primary fw-medium"},"New")],-1))]))),128))])])):De("",!0)]))),128))])):n.value===3?(K(),X("div",Cb,[W[28]||(W[28]=v("h2",null,"Import Summary",-1)),W[29]||(W[29]=v("p",null,"Review the import summary before finalizing.",-1)),(K(!0),X(Xe,null,Bt(a.value,(L,Re)=>(K(),X("div",{key:Re,class:"file-summary"},[v("h3",null,se(Oe(L)),1),v("div",kb,[v("div",xb,[v("div",Ab,se(R(L).length),1),W[21]||(W[21]=v("div",{class:"stat-label"},"New Records",-1))]),v("div",Eb,[v("div",Ib,se(Ne(c.value[L]||[],L).length),1),W[22]||(W[22]=v("div",{class:"stat-label"},"Invalid Rows",-1))]),L.includes("articles")?(K(),X("div",Sb,[v("div",Pb,se(E(L).length),1),W[23]||(W[23]=v("div",{class:"stat-label"},"Already Imported",-1))])):De("",!0)])]))),128)),v("div",Ob,[W[27]||(W[27]=v("h3",null,"Import Details",-1)),v("div",Rb,[v("div",$b,[W[24]||(W[24]=v("div",{class:"summary-label"},"Files Uploaded",-1)),v("div",Db,se(r.value.length),1)]),v("div",Tb,[W[25]||(W[25]=v("div",{class:"summary-label"},"Total Rows Parsed",-1)),v("div",Fb,se(ne()),1)]),v("div",Mb,[W[26]||(W[26]=v("div",{class:"summary-label"},"Total Valid Rows",-1)),v("div",Bb,se(ce()),1)])])]),d.value?(K(),X("div",Nb,se(d.value),1)):De("",!0)])):De("",!0)])])]),v("div",Lb,[n.value>0?(K(),X("button",{key:0,onClick:U,class:"btn btn-secondary"}," Previous ")):De("",!0),n.value<t.length-1?(K(),X("button",{key:1,onClick:j,class:"btn btn-primary",disabled:!q.value}," Next ",8,qb)):De("",!0),n.value===t.length-1?(K(),X("button",{key:2,onClick:Q,class:"btn btn-primary",disabled:u.value},se(u.value?"Importing...":"Import Data"),9,jb)):De("",!0)])]))}}),Kb=hn(Ub,[["__scopeId","data-v-5dd0d645"]]);class Vb{static normalizeFingerprint(t){return{name:t.name.trim().toLowerCase(),setCode:t.setCode.trim().toLowerCase(),collectorNumber:t.collectorNumber.trim().toLowerCase(),finish:t.finish.trim().toLowerCase(),language:t.language.trim().toLowerCase()}}static compareFingerprints(t,n){const r=this.normalizeFingerprint(t),o=this.normalizeFingerprint(n);return r.name===o.name&&r.setCode===o.setCode&&r.collectorNumber===o.collectorNumber&&r.finish===o.finish&&r.language===o.language}static async resolveFingerprint(t){try{const n=await Zt.hydrateCard({name:t.name,setCode:t.setCode,collectorNumber:t.collectorNumber});return n&&n.id?n.id:null}catch(n){return console.error("Error resolving fingerprint:",n),null}}}class Hb{static async importDeckFromText(t,n){let r,o;try{r=Gr();const a=n.split(`
`).map(c=>c.trim()).filter(c=>c);o=Oo(),r.addImport({id:o,type:"deck",name:t,status:"pending",progress:0,totalItems:a.length,processedItems:0})}catch(a){console.warn("Could not initialize import status store:",a),r=null,o=null}try{const a=new Date,c=`deck-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,u={id:c,platform:"csv",name:t,commander:"",url:"",importedAt:a,createdAt:a,updatedAt:a};await _e.decks.add(u);const d=n.split(`
`).map(p=>p.trim()).filter(p=>p);if(console.log("Processing deck import:",{deckName:t,lineCount:d.length}),r&&o)try{r.updateImport(o,{status:"processing"})}catch(p){console.warn("Could not update import status:",p)}for(let p=0;p<d.length;p++){const b=d[p].trim();if(!b)continue;if(console.log("Processing line:",b),r&&o)try{r.updateImport(o,{processedItems:p+1,progress:Math.round((p+1)/d.length*100)})}catch(P){console.warn("Could not update import progress:",P)}const C=b.match(/^(\d+)\s+(.+?)\s*\(([^)]+)\)\s*(\d+)(?:\s*\*F\*\s*)?$/i);if(C){const[,P,q,j,U]=C,Q=parseInt(P)||1;if(console.log("Parsed card:",{quantity:Q,cardName:q,setCode:j,collectorNumber:U}),q&&j&&U){const R={name:q.trim(),setCode:j.trim(),collectorNumber:U.trim(),finish:"nonfoil",language:"en"},E=await Vb.resolveFingerprint(R);if(console.log("Resolved card ID:",E),E){const H=new Date;if(!await kn.getById(E)){const Se=await Zt.hydrateCard({scryfall_id:E,name:q.trim(),setCode:j.trim(),collectorNumber:U.trim()}),Ne=await Zt.getImageUrlById(E),nt={id:E,oracleId:Se?.oracle_id||"",name:q.trim(),set:Se?.set_name||j.trim(),setCode:Se?.set||j.trim(),number:Se?.collector_number||U.trim(),lang:Se?.lang||"en",finish:"nonfoil",layout:Ne?.layout||"normal",imageUrl:Ne?.front||"",imageUrlBack:Ne?.back||"",createdAt:H,updatedAt:H};await kn.add(nt),console.log("Added new card to database:",nt);try{const We=await Zt.getPriceById(E);if(We){const Fe=H.toISOString().split("T")[0],W={id:`${E}:scryfall:${Fe}`,cardId:E,provider:"scryfall",currency:We.getCurrency(),price:We.getCents(),asOf:H,createdAt:H};await _e.price_points.put(W)}}catch(We){console.error(`Error fetching price for new card ${E}:`,We)}}const de=(await vt.getByCardId(E)).reduce((Se,Ne)=>{if(!Ne.disposedAt||Ne.disposedQuantity&&Ne.disposedQuantity<Ne.quantity){const nt=Ne.disposedQuantity?Ne.quantity-Ne.disposedQuantity:Ne.quantity;return Se+nt}return Se},0);if(de<Q){const Se=Q-de,nt={id:`lot-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,cardId:E,quantity:Se,unitCost:0,condition:"unknown",language:"en",foil:!1,finish:"nonfoil",source:"deck_import",currency:"EUR",purchasedAt:H,createdAt:H,updatedAt:H};await vt.add(nt),console.log("Added new lot for deck import:",nt)}}let ne;const ce=await vt.getByCardId(E||"");if(ce.length>0){for(const H of ce)if((H.disposedQuantity?H.quantity-H.disposedQuantity:H.quantity)>=Q&&!H.disposedAt){ne=H.id;break}!ne&&ce.length>0&&(ne=ce[0].id)}const Ie=new Date,we={id:`deckcard-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,deckId:c||"unknown-deck",cardId:E||"unknown-card",lotId:ne,quantity:typeof Q=="number"&&Q>0?Q:1,role:"main",addedAt:Ie,createdAt:Ie};await _e.deck_cards.add(we),console.log("Added deck card:",we)}}else console.log("Line did not match expected format:",b)}const h=await _e.deck_cards.where("deckId").equals(c).count();if(console.log("Total cards imported:",h),r&&o)try{r.completeImport(o)}catch(p){console.warn("Could not complete import status:",p)}}catch(a){if(console.error("Error importing deck from text:",a),r&&o)try{r.completeImport(o,a.message)}catch(c){console.warn("Could not update import status to failed:",c)}throw a}}static async calculateDeckCoverage(t){try{const n=await _e.deck_cards.where("deckId").equals(t).toArray();let r=0,o=0;for(const c of n){r+=c.quantity;const d=(await gs.getByCardId(c.cardId)).reduce((h,p)=>h+p.quantity,0);o+=Math.min(c.quantity,d)}const a=r>0?Math.round(o/r*100):100;return{totalCards:r,ownedCards:o,coveragePercentage:a}}catch(n){throw console.error("Error calculating deck coverage:",n),n}}}const Wb={class:"deck-import"},zb={class:"import-section"},Qb={class:"mb-3"},Yb={class:"mb-3"},Gb=["disabled"],Jb={key:0,class:"status-message error"},Xb=ct({__name:"DeckImportView",setup(e){const t=xe(""),n=xe(""),r=xe(!1),o=xe(null),a=async()=>{if(!t.value.trim()){o.value="Please enter a deck name";return}if(!n.value.trim()){o.value="Please paste your decklist";return}r.value=!0,o.value=null;try{await Hb.importDeckFromText(t.value.trim(),n.value.trim()),o.value="Deck import started successfully! Check the status indicator in the top right for progress.",setTimeout(()=>{t.value="",n.value="",r.value=!1,o.value=null},3e3)}catch(c){o.value="Failed to import deck: "+c.message,r.value=!1}};return(c,u)=>(K(),X("div",Wb,[u[7]||(u[7]=v("h1",null,"Import Deck",-1)),v("div",zb,[u[4]||(u[4]=v("h2",null,"Moxfield Deck Import",-1)),u[5]||(u[5]=v("p",null,"Copy and paste your decklist from Moxfield to track which cards you own and which you're missing.",-1)),v("div",Qb,[u[2]||(u[2]=v("label",{for:"deck-name",class:"form-label"},"Deck Name",-1)),$s(v("input",{id:"deck-name","onUpdate:modelValue":u[0]||(u[0]=d=>t.value=d),type:"text",placeholder:"Enter a name for your deck",class:"form-control"},null,512),[[ba,t.value]])]),v("div",Yb,[u[3]||(u[3]=v("label",{for:"decklist",class:"form-label"},"Decklist",-1)),$s(v("textarea",{id:"decklist","onUpdate:modelValue":u[1]||(u[1]=d=>n.value=d),placeholder:`Paste your decklist here (e.g., 4 Lightning Bolt
2 Counterspell)`,rows:"10",class:"form-control"},null,512),[[ba,n.value]])]),v("button",{onClick:a,disabled:r.value,class:"btn btn-primary mb-4"},se(r.value?"Importing...":"Import Deck"),9,Gb),o.value?(K(),X("div",Jb,se(o.value),1)):De("",!0),u[6]||(u[6]=v("div",{class:"instructions"},[v("h3",null,"How to copy from Moxfield:"),v("ol",null,[v("li",null,"Open your deck on Moxfield.com"),v("li",null,'Click the "Export" button'),v("li",null,'Select "Text" format'),v("li",null,"Copy the text and paste it here")])],-1))])]))}}),Zb=hn(Xb,[["__scopeId","data-v-dde8fd34"]]),e_={class:"decks-view"},t_={class:"header"},n_={key:0,class:"loading"},r_={key:1,class:"empty-state"},s_={key:2,class:"row g-4"},o_=["onClick"],i_={class:"deck-info"},a_={class:"platform"},c_={class:"date"},l_={class:"card-count"},u_=ct({__name:"DecksView",setup(e){const t=Gm(),n=xe([]),r=xe(!0),o=xe({}),a=h=>new Date(h).toLocaleDateString(),c=h=>o.value[h]||0,u=h=>{t.push(`/decks/${h}`)},d=async()=>{try{const h=await _e.decks.toArray();n.value=h;for(const p of h){const g=await _e.deck_cards.where("deckId").equals(p.id).count();o.value[p.id]=g}}catch(h){console.error("Error loading decks:",h)}finally{r.value=!1}};return In(()=>{d()}),(h,p)=>{const g=ei("router-link");return K(),X("div",e_,[v("div",t_,[p[1]||(p[1]=v("h1",null,"Decks",-1)),ze(g,{to:"/import/deck",class:"btn btn-primary"},{default:ot(()=>[...p[0]||(p[0]=[Wt(" Import Deck ",-1)])]),_:1})]),r.value?(K(),X("div",n_," Loading decks... ")):n.value.length===0?(K(),X("div",r_,[p[3]||(p[3]=v("p",null,"You haven't imported any decks yet.",-1)),ze(g,{to:"/import/deck",class:"btn btn-primary"},{default:ot(()=>[...p[2]||(p[2]=[Wt(" Import Your First Deck ",-1)])]),_:1})])):(K(),X("div",s_,[(K(!0),X(Xe,null,Bt(n.value,b=>(K(),X("div",{key:b.id,class:"col-lg-4 col-md-6"},[v("div",{class:"deck-card h-100",onClick:C=>u(b.id)},[v("h2",null,se(b.name),1),v("p",i_,[v("span",a_,se(b.platform),1),v("span",c_,se(a(b.importedAt)),1)]),v("p",l_,se(c(b.id))+" cards",1)],8,o_)]))),128))]))])}}}),d_=hn(u_,[["__scopeId","data-v-a321a24f"]]);function Od(e,t){const n=typeof e=="string"&&!t?`${e}Context`:t,r=Symbol(n);return[c=>{const u=tn(r,c);if(u||u===null)return u;throw new Error(`Injection \`${r.toString()}\` not found. Component must be used within ${Array.isArray(e)?`one of the following components: ${e.join(", ")}`:`\`${e}\``}`)},c=>(xs(r,c),c)]}function or(){let e=document.activeElement;if(e==null)return null;for(;e!=null&&e.shadowRoot!=null&&e.shadowRoot.activeElement!=null;)e=e.shadowRoot.activeElement;return e}function Rd(e,t,n){const r=n.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&r.addEventListener(e,t,{once:!0}),r.dispatchEvent(o)}function Xa(e){return e?e.flatMap(t=>t.type===Xe?Xa(t.children):[t]):[]}const[f_,l1]=Od("ConfigProvider");function $d(e){return $a()?(ou(e),!0):!1}function p_(e){let t=!1,n;const r=Go(!0);return(...o)=>(t||(n=r.run(()=>e(...o)),t=!0),n)}function h_(e){let t=0,n,r;const o=()=>{t-=1,r&&t<=0&&(r.stop(),n=void 0,r=void 0)};return(...a)=>(t+=1,r||(r=Go(!0),n=r.run(()=>e(...a))),$d(o),n)}const Sr=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const m_=e=>typeof e<"u",g_=Object.prototype.toString,y_=e=>g_.call(e)==="[object Object]",Vl=v_();function v_(){var e,t;return Sr&&((e=window?.navigator)==null?void 0:e.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((t=window?.navigator)==null?void 0:t.maxTouchPoints)>2&&/iPad|Macintosh/.test(window?.navigator.userAgent))}function b_(e){return Sn()}function na(e){return Array.isArray(e)?e:[e]}function __(e,t){b_()&&Ka(e,t)}function w_(e,t,n){return nn(e,t,{...n,immediate:!0})}const Za=Sr?window:void 0;function ci(e){var t;const n=An(e);return(t=n?.$el)!=null?t:n}function Dd(...e){const t=[],n=()=>{t.forEach(u=>u()),t.length=0},r=(u,d,h,p)=>(u.addEventListener(d,h,p),()=>u.removeEventListener(d,h,p)),o=tt(()=>{const u=na(An(e[0])).filter(d=>d!=null);return u.every(d=>typeof d!="string")?u:void 0}),a=w_(()=>{var u,d;return[(d=(u=o.value)==null?void 0:u.map(h=>ci(h)))!=null?d:[Za].filter(h=>h!=null),na(An(o.value?e[1]:e[0])),na(Ee(o.value?e[2]:e[1])),An(o.value?e[3]:e[2])]},([u,d,h,p])=>{if(n(),!u?.length||!d?.length||!h?.length)return;const g=y_(p)?{...p}:p;t.push(...u.flatMap(b=>d.flatMap(C=>h.map(P=>r(b,C,P,g)))))},{flush:"post"}),c=()=>{a(),n()};return $d(n),c}function C_(){const e=Cu(!1),t=Sn();return t&&In(()=>{e.value=!0},t),e}function k_(e){return typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0}function x_(...e){let t,n,r={};e.length===3?(t=e[0],n=e[1],r=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,n=e[0],r=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:o=Za,eventName:a="keydown",passive:c=!1,dedupe:u=!1}=r,d=k_(t);return Dd(o,a,p=>{p.repeat&&An(u)||d(p)&&n(p)},c)}function A_(e){return JSON.parse(JSON.stringify(e))}function E_(e,t,n,r={}){var o,a,c;const{clone:u=!1,passive:d=!1,eventName:h,deep:p=!1,defaultValue:g,shouldEmit:b}=r,C=Sn(),P=n||C?.emit||((o=C?.$emit)==null?void 0:o.bind(C))||((c=(a=C?.proxy)==null?void 0:a.$emit)==null?void 0:c.bind(C?.proxy));let q=h;q=q||`update:${t.toString()}`;const j=R=>u?typeof u=="function"?u(R):A_(R):R,U=()=>m_(e[t])?j(e[t]):g,Q=R=>{b?b(R)&&P(q,R):P(q,R)};if(d){const R=U(),E=xe(R);let ne=!1;return nn(()=>e[t],ce=>{ne||(ne=!0,E.value=j(ce),dn(()=>ne=!1))}),nn(E,ce=>{!ne&&(ce!==e[t]||p)&&Q(ce)},{deep:p}),E}else return tt({get(){return U()},set(R){Q(R)}})}function ra(e){if(e===null||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);return t!==null&&t!==Object.prototype&&Object.getPrototypeOf(t)!==null||Symbol.iterator in e?!1:Symbol.toStringTag in e?Object.prototype.toString.call(e)==="[object Module]":!0}function Ia(e,t,n=".",r){if(!ra(t))return Ia(e,{},n,r);const o=Object.assign({},t);for(const a in e){if(a==="__proto__"||a==="constructor")continue;const c=e[a];c!=null&&(r&&r(o,a,c,n)||(Array.isArray(c)&&Array.isArray(o[a])?o[a]=[...c,...o[a]]:ra(c)&&ra(o[a])?o[a]=Ia(c,o[a],(n?`${n}.`:"")+a.toString(),r):o[a]=c))}return o}function I_(e){return(...t)=>t.reduce((n,r)=>Ia(n,r,"",e),{})}const S_=I_(),P_=h_(()=>{const e=xe(new Map),t=xe(),n=tt(()=>{for(const c of e.value.values())if(c)return!0;return!1}),r=f_({scrollBody:xe(!0)});let o=null;const a=()=>{document.body.style.paddingRight="",document.body.style.marginRight="",document.body.style.pointerEvents="",document.documentElement.style.removeProperty("--scrollbar-width"),document.body.style.overflow=t.value??"",Vl&&o?.(),t.value=void 0};return nn(n,(c,u)=>{if(!Sr)return;if(!c){u&&a();return}t.value===void 0&&(t.value=document.body.style.overflow);const d=window.innerWidth-document.documentElement.clientWidth,h={padding:d,margin:0},p=r.scrollBody?.value?typeof r.scrollBody.value=="object"?S_({padding:r.scrollBody.value.padding===!0?d:r.scrollBody.value.padding,margin:r.scrollBody.value.margin===!0?d:r.scrollBody.value.margin},h):h:{padding:0,margin:0};d>0&&(document.body.style.paddingRight=typeof p.padding=="number"?`${p.padding}px`:String(p.padding),document.body.style.marginRight=typeof p.margin=="number"?`${p.margin}px`:String(p.margin),document.documentElement.style.setProperty("--scrollbar-width",`${d}px`),document.body.style.overflow="hidden"),Vl&&(o=Dd(document,"touchmove",g=>R_(g),{passive:!1})),dn(()=>{document.body.style.pointerEvents="none",document.body.style.overflow="hidden"})},{immediate:!0,flush:"sync"}),e});function O_(e){const t=Math.random().toString(36).substring(2,7),n=P_();n.value.set(t,e);const r=tt({get:()=>n.value.get(t)??!1,set:o=>n.value.set(t,o)});return __(()=>{n.value.delete(t)}),r}function Td(e){const t=window.getComputedStyle(e);if(t.overflowX==="scroll"||t.overflowY==="scroll"||t.overflowX==="auto"&&e.clientWidth<e.scrollWidth||t.overflowY==="auto"&&e.clientHeight<e.scrollHeight)return!0;{const n=e.parentNode;return!(n instanceof Element)||n.tagName==="BODY"?!1:Td(n)}}function R_(e){const t=e||window.event,n=t.target;return n instanceof Element&&Td(n)?!1:t.touches.length>1?!0:(t.preventDefault&&t.cancelable&&t.preventDefault(),!1)}function ec(e){const t=Sn(),n=t?.type.emits,r={};return n?.length||console.warn(`No emitted event found. Please check component: ${t?.type.__name}`),n?.forEach(o=>{r[xo(rn(o))]=(...a)=>e(o,...a)}),r}function Pn(){const e=Sn(),t=xe(),n=tt(()=>["#text","#comment"].includes(t.value?.$el.nodeName)?t.value?.$el.nextElementSibling:ci(t)),r=Object.assign({},e.exposed),o={};for(const c in e.props)Object.defineProperty(o,c,{enumerable:!0,configurable:!0,get:()=>e.props[c]});if(Object.keys(r).length>0)for(const c in r)Object.defineProperty(o,c,{enumerable:!0,configurable:!0,get:()=>r[c]});Object.defineProperty(o,"$el",{enumerable:!0,configurable:!0,get:()=>e.vnode.el}),e.exposed=o;function a(c){t.value=c,c&&(Object.defineProperty(o,"$el",{enumerable:!0,configurable:!0,get:()=>c instanceof Element?c:c.$el}),e.exposed=o)}return{forwardRef:a,currentRef:t,currentElement:n}}var $_=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},qr=new WeakMap,wo=new WeakMap,Co={},sa=0,Fd=function(e){return e&&(e.host||Fd(e.parentNode))},D_=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=Fd(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},T_=function(e,t,n,r){var o=D_(t,Array.isArray(e)?e:[e]);Co[n]||(Co[n]=new WeakMap);var a=Co[n],c=[],u=new Set,d=new Set(o),h=function(g){!g||u.has(g)||(u.add(g),h(g.parentNode))};o.forEach(h);var p=function(g){!g||d.has(g)||Array.prototype.forEach.call(g.children,function(b){if(u.has(b))p(b);else try{var C=b.getAttribute(r),P=C!==null&&C!=="false",q=(qr.get(b)||0)+1,j=(a.get(b)||0)+1;qr.set(b,q),a.set(b,j),c.push(b),q===1&&P&&wo.set(b,!0),j===1&&b.setAttribute(n,"true"),P||b.setAttribute(r,"true")}catch(U){console.error("aria-hidden: cannot operate on ",b,U)}})};return p(t),u.clear(),sa++,function(){c.forEach(function(g){var b=qr.get(g)-1,C=a.get(g)-1;qr.set(g,b),a.set(g,C),b||(wo.has(g)||g.removeAttribute(r),wo.delete(g)),C||g.removeAttribute(n)}),sa--,sa||(qr=new WeakMap,qr=new WeakMap,wo=new WeakMap,Co={})}},F_=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),o=$_(e);return o?(r.push.apply(r,Array.from(o.querySelectorAll("[aria-live], script"))),T_(r,o,n,"aria-hidden")):function(){return null}};function M_(e){let t;nn(()=>ci(e),n=>{n?t=F_(n):t&&t()}),js(()=>{t&&t()})}function Hl(e,t="reka"){return`${t}-${up?.()}`}function B_(e,t){const n=xe(e);function r(a){return t[n.value][a]??n.value}return{state:n,dispatch:a=>{n.value=r(a)}}}function N_(e,t){const n=xe({}),r=xe("none"),o=xe(e),a=e.value?"mounted":"unmounted";let c;const u=t.value?.ownerDocument.defaultView??Za,{state:d,dispatch:h}=B_(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}}),p=j=>{if(Sr){const U=new CustomEvent(j,{bubbles:!1,cancelable:!1});t.value?.dispatchEvent(U)}};nn(e,async(j,U)=>{const Q=U!==j;if(await dn(),Q){const R=r.value,E=ko(t.value);j?(h("MOUNT"),p("enter"),E==="none"&&p("after-enter")):E==="none"||E==="undefined"||n.value?.display==="none"?(h("UNMOUNT"),p("leave"),p("after-leave")):U&&R!==E?(h("ANIMATION_OUT"),p("leave")):(h("UNMOUNT"),p("after-leave"))}},{immediate:!0});const g=j=>{const U=ko(t.value),Q=U.includes(j.animationName),R=d.value==="mounted"?"enter":"leave";if(j.target===t.value&&Q&&(p(`after-${R}`),h("ANIMATION_END"),!o.value)){const E=t.value.style.animationFillMode;t.value.style.animationFillMode="forwards",c=u?.setTimeout(()=>{t.value?.style.animationFillMode==="forwards"&&(t.value.style.animationFillMode=E)})}j.target===t.value&&U==="none"&&h("ANIMATION_END")},b=j=>{j.target===t.value&&(r.value=ko(t.value))},C=nn(t,(j,U)=>{j?(n.value=getComputedStyle(j),j.addEventListener("animationstart",b),j.addEventListener("animationcancel",g),j.addEventListener("animationend",g)):(h("ANIMATION_END"),c!==void 0&&u?.clearTimeout(c),U?.removeEventListener("animationstart",b),U?.removeEventListener("animationcancel",g),U?.removeEventListener("animationend",g))},{immediate:!0}),P=nn(d,()=>{const j=ko(t.value);r.value=d.value==="mounted"?j:"none"});return js(()=>{C(),P()}),{isPresent:tt(()=>["mounted","unmountSuspended"].includes(d.value))}}function ko(e){return e&&getComputedStyle(e).animationName||"none"}var Md=ct({name:"Presence",props:{present:{type:Boolean,required:!0},forceMount:{type:Boolean}},slots:{},setup(e,{slots:t,expose:n}){const{present:r,forceMount:o}=ja(e),a=xe(),{isPresent:c}=N_(r,a);n({present:c});let u=t.default({present:c.value});u=Xa(u||[]);const d=Sn();if(u&&u?.length>1){const h=d?.parent?.type.name?`<${d.parent.type.name} />`:"component";throw new Error([`Detected an invalid children for \`${h}\` for  \`Presence\` component.`,"","Note: Presence works similarly to `v-if` directly, but it waits for animation/transition to finished before unmounting. So it expect only one direct child of valid VNode type.","You can apply a few solutions:",["Provide a single child element so that `presence` directive attach correctly.","Ensure the first child is an actual element instead of a raw text node or comment node."].map(p=>`  - ${p}`).join(`
`)].join(`
`))}return()=>o.value||r.value||c.value?Qr(t.default({present:c.value})[0],{ref:h=>{const p=ci(h);return typeof p?.hasAttribute>"u"||(p?.hasAttribute("data-reka-popper-content-wrapper")?a.value=p.firstElementChild:a.value=p),p}}):null}});const L_=ct({name:"PrimitiveSlot",inheritAttrs:!1,setup(e,{attrs:t,slots:n}){return()=>{if(!n.default)return null;const r=Xa(n.default()),o=r.findIndex(d=>d.type!==fn);if(o===-1)return r;const a=r[o];delete a.props?.ref;const c=a.props?En(t,a.props):t,u=ar({...a,props:{}},c);return r.length===1?u:(r[o]=u,r)}}}),q_=["area","img","input"],Ks=ct({name:"Primitive",inheritAttrs:!1,props:{asChild:{type:Boolean,default:!1},as:{type:[String,Object],default:"div"}},setup(e,{attrs:t,slots:n}){const r=e.asChild?"template":e.as;return typeof r=="string"&&q_.includes(r)?()=>Qr(r,t):r!=="template"?()=>Qr(e.as,t,{default:n.default}):()=>Qr(L_,t,{default:n.default})}}),[cr,j_]=Od("DialogRoot");var U_=ct({inheritAttrs:!1,__name:"DialogRoot",props:{open:{type:Boolean,required:!1,default:void 0},defaultOpen:{type:Boolean,required:!1,default:!1},modal:{type:Boolean,required:!1,default:!0}},emits:["update:open"],setup(e,{emit:t}){const n=e,o=E_(n,"open",t,{defaultValue:n.defaultOpen,passive:n.open===void 0}),a=xe(),c=xe(),{modal:u}=ja(n);return j_({open:o,modal:u,openModal:()=>{o.value=!0},onOpenChange:d=>{o.value=d},onOpenToggle:()=>{o.value=!o.value},contentId:"",titleId:"",descriptionId:"",triggerElement:a,contentElement:c}),(d,h)=>Gt(d.$slots,"default",{open:Ee(o),close:()=>o.value=!1})}}),K_=U_,V_=ct({__name:"DialogClose",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(e){const t=e;Pn();const n=cr();return(r,o)=>(K(),Pt(Ee(Ks),En(t,{type:r.as==="button"?"button":void 0,onClick:o[0]||(o[0]=a=>Ee(n).onOpenChange(!1))}),{default:ot(()=>[Gt(r.$slots,"default")]),_:3},16,["type"]))}}),H_=V_;const W_="dismissableLayer.pointerDownOutside",z_="dismissableLayer.focusOutside";function Bd(e,t){const n=t.closest("[data-dismissable-layer]"),r=e.dataset.dismissableLayer===""?e:e.querySelector("[data-dismissable-layer]"),o=Array.from(e.ownerDocument.querySelectorAll("[data-dismissable-layer]"));return!!(n&&(r===n||o.indexOf(r)<o.indexOf(n)))}function Q_(e,t,n=!0){const r=t?.value?.ownerDocument??globalThis?.document,o=xe(!1),a=xe(()=>{});return Xr(c=>{if(!Sr||!An(n))return;const u=async h=>{const p=h.target;if(!(!t?.value||!p)){if(Bd(t.value,p)){o.value=!1;return}if(h.target&&!o.value){let C=function(){Rd(W_,e,b)};var g=C;const b={originalEvent:h};h.pointerType==="touch"?(r.removeEventListener("click",a.value),a.value=C,r.addEventListener("click",a.value,{once:!0})):C()}else r.removeEventListener("click",a.value);o.value=!1}},d=window.setTimeout(()=>{r.addEventListener("pointerdown",u)},0);c(()=>{window.clearTimeout(d),r.removeEventListener("pointerdown",u),r.removeEventListener("click",a.value)})}),{onPointerDownCapture:()=>{An(n)&&(o.value=!0)}}}function Y_(e,t,n=!0){const r=t?.value?.ownerDocument??globalThis?.document,o=xe(!1);return Xr(a=>{if(!Sr||!An(n))return;const c=async u=>{if(!t?.value)return;await dn(),await dn();const d=u.target;!t.value||!d||Bd(t.value,d)||u.target&&!o.value&&Rd(z_,e,{originalEvent:u})};r.addEventListener("focusin",c),a(()=>r.removeEventListener("focusin",c))}),{onFocusCapture:()=>{An(n)&&(o.value=!0)},onBlurCapture:()=>{An(n)&&(o.value=!1)}}}const Tn=Ir({layersRoot:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set});var G_=ct({__name:"DismissableLayer",props:{disableOutsidePointerEvents:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","dismiss"],setup(e,{emit:t}){const n=e,r=t,{forwardRef:o,currentElement:a}=Pn(),c=tt(()=>a.value?.ownerDocument??globalThis.document),u=tt(()=>Tn.layersRoot),d=tt(()=>a.value?Array.from(u.value).indexOf(a.value):-1),h=tt(()=>Tn.layersWithOutsidePointerEventsDisabled.size>0),p=tt(()=>{const P=Array.from(u.value),[q]=[...Tn.layersWithOutsidePointerEventsDisabled].slice(-1),j=P.indexOf(q);return d.value>=j}),g=Q_(async P=>{const q=[...Tn.branches].some(j=>j?.contains(P.target));!p.value||q||(r("pointerDownOutside",P),r("interactOutside",P),await dn(),P.defaultPrevented||r("dismiss"))},a),b=Y_(P=>{[...Tn.branches].some(j=>j?.contains(P.target))||(r("focusOutside",P),r("interactOutside",P),P.defaultPrevented||r("dismiss"))},a);x_("Escape",P=>{d.value===u.value.size-1&&(r("escapeKeyDown",P),P.defaultPrevented||r("dismiss"))});let C;return Xr(P=>{a.value&&(n.disableOutsidePointerEvents&&(Tn.layersWithOutsidePointerEventsDisabled.size===0&&(C=c.value.body.style.pointerEvents,c.value.body.style.pointerEvents="none"),Tn.layersWithOutsidePointerEventsDisabled.add(a.value)),u.value.add(a.value),P(()=>{n.disableOutsidePointerEvents&&Tn.layersWithOutsidePointerEventsDisabled.size===1&&(c.value.body.style.pointerEvents=C)}))}),Xr(P=>{P(()=>{a.value&&(u.value.delete(a.value),Tn.layersWithOutsidePointerEventsDisabled.delete(a.value))})}),(P,q)=>(K(),Pt(Ee(Ks),{ref:Ee(o),"as-child":P.asChild,as:P.as,"data-dismissable-layer":"",style:Nn({pointerEvents:h.value?p.value?"auto":"none":void 0}),onFocusCapture:Ee(b).onFocusCapture,onBlurCapture:Ee(b).onBlurCapture,onPointerdownCapture:Ee(g).onPointerDownCapture},{default:ot(()=>[Gt(P.$slots,"default")]),_:3},8,["as-child","as","style","onFocusCapture","onBlurCapture","onPointerdownCapture"]))}}),J_=G_;const X_=p_(()=>xe([]));function Z_(){const e=X_();return{add(t){const n=e.value[0];t!==n&&n?.pause(),e.value=Wl(e.value,t),e.value.unshift(t)},remove(t){e.value=Wl(e.value,t),e.value[0]?.resume()}}}function Wl(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function e0(e){return e.filter(t=>t.tagName!=="A")}const oa="focusScope.autoFocusOnMount",ia="focusScope.autoFocusOnUnmount",zl={bubbles:!1,cancelable:!0};function t0(e,{select:t=!1}={}){const n=or();for(const r of e)if(Zn(r,{select:t}),or()!==n)return!0}function n0(e){const t=Nd(e),n=Ql(t,e),r=Ql(t.reverse(),e);return[n,r]}function Nd(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Ql(e,t){for(const n of e)if(!r0(n,{upTo:t}))return n}function r0(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function s0(e){return e instanceof HTMLInputElement&&"select"in e}function Zn(e,{select:t=!1}={}){if(e&&e.focus){const n=or();e.focus({preventScroll:!0}),e!==n&&s0(e)&&t&&e.select()}}var o0=ct({__name:"FocusScope",props:{loop:{type:Boolean,required:!1,default:!1},trapped:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["mountAutoFocus","unmountAutoFocus"],setup(e,{emit:t}){const n=e,r=t,{currentRef:o,currentElement:a}=Pn(),c=xe(null),u=Z_(),d=Ir({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}});Xr(p=>{if(!Sr)return;const g=a.value;if(!n.trapped)return;function b(j){if(d.paused||!g)return;const U=j.target;g.contains(U)?c.value=U:Zn(c.value,{select:!0})}function C(j){if(d.paused||!g)return;const U=j.relatedTarget;U!==null&&(g.contains(U)||Zn(c.value,{select:!0}))}function P(j){g.contains(c.value)||Zn(g)}document.addEventListener("focusin",b),document.addEventListener("focusout",C);const q=new MutationObserver(P);g&&q.observe(g,{childList:!0,subtree:!0}),p(()=>{document.removeEventListener("focusin",b),document.removeEventListener("focusout",C),q.disconnect()})}),Xr(async p=>{const g=a.value;if(await dn(),!g)return;u.add(d);const b=or();if(!g.contains(b)){const P=new CustomEvent(oa,zl);g.addEventListener(oa,q=>r("mountAutoFocus",q)),g.dispatchEvent(P),P.defaultPrevented||(t0(e0(Nd(g)),{select:!0}),or()===b&&Zn(g))}p(()=>{g.removeEventListener(oa,j=>r("mountAutoFocus",j));const P=new CustomEvent(ia,zl),q=j=>{r("unmountAutoFocus",j)};g.addEventListener(ia,q),g.dispatchEvent(P),setTimeout(()=>{P.defaultPrevented||Zn(b??document.body,{select:!0}),g.removeEventListener(ia,q),u.remove(d)},0)})});function h(p){if(!n.loop&&!n.trapped||d.paused)return;const g=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,b=or();if(g&&b){const C=p.currentTarget,[P,q]=n0(C);P&&q?!p.shiftKey&&b===q?(p.preventDefault(),n.loop&&Zn(P,{select:!0})):p.shiftKey&&b===P&&(p.preventDefault(),n.loop&&Zn(q,{select:!0})):b===C&&p.preventDefault()}}return(p,g)=>(K(),Pt(Ee(Ks),{ref_key:"currentRef",ref:o,tabindex:"-1","as-child":p.asChild,as:p.as,onKeydown:h},{default:ot(()=>[Gt(p.$slots,"default")]),_:3},8,["as-child","as"]))}}),i0=o0;function a0(e){return e?"open":"closed"}var c0=ct({__name:"DialogContentImpl",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(e,{emit:t}){const n=e,r=t,o=cr(),{forwardRef:a,currentElement:c}=Pn();return o.titleId||=Hl(void 0,"reka-dialog-title"),o.descriptionId||=Hl(void 0,"reka-dialog-description"),In(()=>{o.contentElement=c,or()!==document.body&&(o.triggerElement.value=or())}),(u,d)=>(K(),Pt(Ee(i0),{"as-child":"",loop:"",trapped:n.trapFocus,onMountAutoFocus:d[5]||(d[5]=h=>r("openAutoFocus",h)),onUnmountAutoFocus:d[6]||(d[6]=h=>r("closeAutoFocus",h))},{default:ot(()=>[ze(Ee(J_),En({id:Ee(o).contentId,ref:Ee(a),as:u.as,"as-child":u.asChild,"disable-outside-pointer-events":u.disableOutsidePointerEvents,role:"dialog","aria-describedby":Ee(o).descriptionId,"aria-labelledby":Ee(o).titleId,"data-state":Ee(a0)(Ee(o).open.value)},u.$attrs,{onDismiss:d[0]||(d[0]=h=>Ee(o).onOpenChange(!1)),onEscapeKeyDown:d[1]||(d[1]=h=>r("escapeKeyDown",h)),onFocusOutside:d[2]||(d[2]=h=>r("focusOutside",h)),onInteractOutside:d[3]||(d[3]=h=>r("interactOutside",h)),onPointerDownOutside:d[4]||(d[4]=h=>r("pointerDownOutside",h))}),{default:ot(()=>[Gt(u.$slots,"default")]),_:3},16,["id","as","as-child","disable-outside-pointer-events","aria-describedby","aria-labelledby","data-state"])]),_:3},8,["trapped"]))}}),Ld=c0,l0=ct({__name:"DialogContentModal",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(e,{emit:t}){const n=e,r=t,o=cr(),a=ec(r),{forwardRef:c,currentElement:u}=Pn();return M_(u),(d,h)=>(K(),Pt(Ld,En({...n,...Ee(a)},{ref:Ee(c),"trap-focus":Ee(o).open.value,"disable-outside-pointer-events":!0,onCloseAutoFocus:h[0]||(h[0]=p=>{p.defaultPrevented||(p.preventDefault(),Ee(o).triggerElement.value?.focus())}),onPointerDownOutside:h[1]||(h[1]=p=>{const g=p.detail.originalEvent,b=g.button===0&&g.ctrlKey===!0;(g.button===2||b)&&p.preventDefault()}),onFocusOutside:h[2]||(h[2]=p=>{p.preventDefault()})}),{default:ot(()=>[Gt(d.$slots,"default")]),_:3},16,["trap-focus"]))}}),u0=l0,d0=ct({__name:"DialogContentNonModal",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(e,{emit:t}){const n=e,o=ec(t);Pn();const a=cr(),c=xe(!1),u=xe(!1);return(d,h)=>(K(),Pt(Ld,En({...n,...Ee(o)},{"trap-focus":!1,"disable-outside-pointer-events":!1,onCloseAutoFocus:h[0]||(h[0]=p=>{p.defaultPrevented||(c.value||Ee(a).triggerElement.value?.focus(),p.preventDefault()),c.value=!1,u.value=!1}),onInteractOutside:h[1]||(h[1]=p=>{p.defaultPrevented||(c.value=!0,p.detail.originalEvent.type==="pointerdown"&&(u.value=!0));const g=p.target;Ee(a).triggerElement.value?.contains(g)&&p.preventDefault(),p.detail.originalEvent.type==="focusin"&&u.value&&p.preventDefault()})}),{default:ot(()=>[Gt(d.$slots,"default")]),_:3},16))}}),f0=d0,p0=ct({__name:"DialogContent",props:{forceMount:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(e,{emit:t}){const n=e,r=t,o=cr(),a=ec(r),{forwardRef:c}=Pn();return(u,d)=>(K(),Pt(Ee(Md),{present:u.forceMount||Ee(o).open.value},{default:ot(()=>[Ee(o).modal.value?(K(),Pt(u0,En({key:0,ref:Ee(c)},{...n,...Ee(a),...u.$attrs}),{default:ot(()=>[Gt(u.$slots,"default")]),_:3},16)):(K(),Pt(f0,En({key:1,ref:Ee(c)},{...n,...Ee(a),...u.$attrs}),{default:ot(()=>[Gt(u.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),h0=p0,m0=ct({__name:"DialogOverlayImpl",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(e){const t=cr();return O_(!0),Pn(),(n,r)=>(K(),Pt(Ee(Ks),{as:n.as,"as-child":n.asChild,"data-state":Ee(t).open.value?"open":"closed",style:{"pointer-events":"auto"}},{default:ot(()=>[Gt(n.$slots,"default")]),_:3},8,["as","as-child","data-state"]))}}),g0=m0,y0=ct({__name:"DialogOverlay",props:{forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(e){const t=cr(),{forwardRef:n}=Pn();return(r,o)=>Ee(t)?.modal.value?(K(),Pt(Ee(Md),{key:0,present:r.forceMount||Ee(t).open.value},{default:ot(()=>[ze(g0,En(r.$attrs,{ref:Ee(n),as:r.as,"as-child":r.asChild}),{default:ot(()=>[Gt(r.$slots,"default")]),_:3},16,["as","as-child"])]),_:3},8,["present"])):De("v-if",!0)}}),v0=y0,b0=ct({__name:"Teleport",props:{to:{type:null,required:!1,default:"body"},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(e){const t=C_();return(n,r)=>Ee(t)||n.forceMount?(K(),Pt(ip,{key:0,to:n.to,disabled:n.disabled,defer:n.defer},[Gt(n.$slots,"default")],8,["to","disabled","defer"])):De("v-if",!0)}}),_0=b0,w0=ct({__name:"DialogPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(e){const t=e;return(n,r)=>(K(),Pt(Ee(_0),kf(nd(t)),{default:ot(()=>[Gt(n.$slots,"default")]),_:3},16))}}),C0=w0,k0=ct({__name:"DialogTitle",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"h2"}},setup(e){const t=e,n=cr();return Pn(),(r,o)=>(K(),Pt(Ee(Ks),En(t,{id:Ee(n).titleId}),{default:ot(()=>[Gt(r.$slots,"default")]),_:3},16,["id"]))}}),x0=k0;const A0={class:"card-image-container position-relative overflow-hidden rounded",style:{"padding-bottom":"140%"}},E0={key:1,class:"placeholder-image card-img-top position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center"},I0={class:"card-body"},S0={class:"card-title fs-6 fw-medium mb-1"},P0={class:"card-text small text-muted mb-2"},O0={key:0,class:"d-flex justify-content-between small"},R0={class:"text-success fw-medium"},$0={key:1,class:"small text-muted fst-italic"},D0={class:"modal-dialog modal-dialog-centered modal-lg"},T0={class:"modal-content"},F0={class:"modal-header py-2"},M0={class:"modal-body py-3"},B0={class:"row g-3 align-items-start"},N0={class:"col-lg-5"},L0={class:"card-inner",style:{"padding-bottom":"140%"}},q0={class:"card-front"},j0={key:1,class:"placeholder-image w-100 h-100 rounded-4 position-relative"},U0={class:"card-back"},K0=["src"],V0={class:"row row-cols-2 g-2 small mt-3 mb-0 meta-grid"},H0={class:"col text-end fw-semibold"},W0={class:"col text-end fw-semibold"},z0={class:"col text-end fw-semibold"},Q0={class:"col text-end fw-semibold"},Y0={class:"col-lg-7"},G0={class:"d-flex justify-content-between align-items-center mb-3"},J0={key:0,class:"h5 mb-0 text-success fw-bold"},X0={key:1,class:"small text-muted fst-italic"},Z0={key:2,class:"small text-muted fst-italic"},ew={key:0,class:"mb-3"},tw={class:"d-flex gap-3 small"},nw={class:"mt-2 border rounded-3 p-2 small",style:{"max-height":"30vh",overflow:"auto"}},rw={class:"row g-2 align-items-center"},sw={class:"col-6 col-md-3"},ow={class:"fw-medium"},iw={class:"col-6 col-md-3"},aw={class:"fw-medium"},cw={class:"col-6 col-md-3"},lw={class:"fw-medium"},uw={key:0,class:"col-6 col-md-3"},dw={class:"fw-medium"},fw={key:1},pw={class:"mt-2 small",style:{"max-height":"30vh",overflow:"auto"}},hw={class:"flex-grow-1"},mw={class:"fw-medium"},gw={class:"text-muted"},yw={class:"fw-semibold"},vw=ct({inheritAttrs:!0,__name:"CardComponent",props:{card:{}},setup(e){const t=e,n=Ja(),r=xe(!1),o=xe(null),a=xe(!1),c=xe([]),u=xe([]),d=xe(!1),h=xe(!1),p=tt(()=>u.value?[...u.value].sort((R,E)=>new Date(E.happenedAt).getTime()-new Date(R.happenedAt).getTime()):[]),g=tt(()=>{const R=n.getCardPrice(t.card.id);return R||o.value}),b=tt(()=>!c.value||c.value.length===0?0:c.value.reduce((R,E)=>{if(!E.disposedAt||E.disposedQuantity&&E.disposedQuantity<E.quantity){const ne=E.disposedQuantity?E.quantity-E.disposedQuantity:E.quantity;return R+ne}return R},0)),C=()=>{r.value=!0,setTimeout(()=>{U()},0)},P=()=>{r.value=!1},q=R=>new Date(R).toLocaleDateString(),j=(R,E)=>new qe(R,E).format("de-DE"),U=async()=>{try{await Q(),c.value=await _e.card_lots.where("cardId").equals(t.card.id).toArray(),u.value=await _e.transactions.where("cardId").equals(t.card.id).toArray()}catch(R){console.error("Error loading card details:",R)}},Q=async()=>{a.value=!0;try{const R=await _e.price_points.where("cardId").equals(t.card.id).toArray();if(R.length>0){R.sort((ne,ce)=>ce.asOf.getTime()-ne.asOf.getTime());const E=R[0];o.value=new qe(E.price,E.currency)}}catch(R){console.error("Error loading current price:",R)}finally{a.value=!1}};return(R,E)=>(K(),X(Xe,null,[v("div",{class:"card h-100 card-item",onClick:C},[v("div",A0,[R.card.imageUrl?(K(),X("div",{key:0,class:"card-img-top position-absolute top-0 start-0 w-100 h-100",style:Nn({backgroundImage:`url(${R.card.imageUrl})`,backgroundSize:"cover",backgroundPosition:"center"})},null,4)):(K(),X("div",E0,[...E[3]||(E[3]=[v("span",{class:"text-muted"},"Missing Image",-1)])]))]),v("div",I0,[v("h3",S0,se(R.card.name),1),v("p",P0,se(R.card.set)+" #"+se(R.card.number),1),g.value?(K(),X("div",O0,[E[4]||(E[4]=v("span",{class:"text-muted"},"Current:",-1)),v("span",R0,se(g.value.format("de-DE")),1)])):a.value||Ee(n).loadingPrices?(K(),X("div",$0," Loading... ")):De("",!0)])]),ze(Ee(K_),{open:r.value,"onUpdate:open":E[2]||(E[2]=ne=>r.value=ne)},{default:ot(()=>[ze(Ee(C0),null,{default:ot(()=>[ze(Ee(v0),{class:"modal-backdrop fade show",onClick:P}),ze(Ee(h0),{class:"modal d-block compact-modal",onPointerDownOutside:P,onEscapeKeyDown:P},{default:ot(()=>[v("div",D0,[v("div",T0,[v("div",F0,[ze(Ee(x0),{class:"modal-title h5 mb-0"},{default:ot(()=>[Wt(se(R.card.name),1)]),_:1}),ze(Ee(H_),{"as-child":""},{default:ot(()=>[...E[5]||(E[5]=[v("button",{type:"button",class:"btn-close","aria-label":"Close"},null,-1)])]),_:1})]),v("div",M0,[v("div",B0,[v("div",N0,[v("div",{class:kt(["card-flipper position-relative",{"is-flipped":d.value}])},[v("div",L0,[v("div",q0,[R.card.imageUrl?(K(),X("div",{key:0,class:"w-100 h-100 rounded-4",style:Nn({backgroundImage:`url(${R.card.imageUrl})`,backgroundSize:"cover",backgroundPosition:"center"})},null,4)):(K(),X("div",j0,[...E[6]||(E[6]=[v("div",{class:"position-absolute top-50 start-50 translate-middle"},[v("span",{class:"text-muted"},"Missing Image")],-1)])]))]),v("div",U0,[R.card.imageUrlBack?(K(),X("div",{key:0,class:"w-100 h-100 rounded-4",style:Nn({backgroundImage:`url(${R.card.imageUrlBack})`,backgroundSize:"cover",backgroundPosition:"center"})},null,4)):De("",!0)])]),R.card.layout==="transform"||R.card.layout==="modal_dfc"||R.card.layout==="reversible_card"||R.card.imageUrl&&R.card.imageUrlBack?(K(),X("button",{key:0,onClick:E[0]||(E[0]=ne=>d.value=!d.value),class:"btn btn-sm btn-dark flip-button"}," Flip ")):De("",!0)],2),v("img",{src:R.card.imageUrlBack,style:{display:"none"}},null,8,K0),v("dl",V0,[E[7]||(E[7]=v("dt",{class:"col text-muted"},"Set",-1)),v("dd",H0,se(R.card.set)+" ("+se(R.card.setCode)+")",1),E[8]||(E[8]=v("dt",{class:"col text-muted"},"Number",-1)),v("dd",W0,"#"+se(R.card.number),1),E[9]||(E[9]=v("dt",{class:"col text-muted"},"Language",-1)),v("dd",z0,se(R.card.lang),1),E[10]||(E[10]=v("dt",{class:"col text-muted"},"Finish",-1)),v("dd",Q0,se(R.card.finish),1)])]),v("div",Y0,[v("div",G0,[E[11]||(E[11]=v("h3",{class:"h6 mb-0"},"Current Price",-1)),o.value?(K(),X("span",J0,se(o.value.format("de-DE")),1)):a.value?(K(),X("span",X0,"Loading")):(K(),X("span",Z0,"Price unavailable"))]),c.value&&c.value.length?(K(),X("div",ew,[E[21]||(E[21]=v("h3",{class:"h6 mb-2"},"Your Collection",-1)),v("div",tw,[v("div",null,[E[12]||(E[12]=v("span",{class:"text-muted"},"Lots:",-1)),E[13]||(E[13]=Wt()),v("strong",null,se(c.value.length),1)]),v("div",null,[E[14]||(E[14]=v("span",{class:"text-muted"},"Cards:",-1)),E[15]||(E[15]=Wt()),v("strong",null,se(b.value),1)])]),c.value.length>2?(K(),X("button",{key:0,class:"btn btn-link btn-sm p-0 mt-1",onClick:E[1]||(E[1]=ne=>h.value=!h.value)},se(h.value?"Hide details":"Show details"),1)):De("",!0),$s(v("div",nw,[(K(!0),X(Xe,null,Bt(c.value,ne=>(K(),X("div",{key:ne.id,class:"border rounded p-2 mb-2"},[v("div",rw,[v("div",sw,[E[16]||(E[16]=v("span",{class:"text-muted"},"Qty:",-1)),E[17]||(E[17]=Wt()),v("span",ow,se(ne.quantity),1)]),v("div",iw,[E[18]||(E[18]=v("span",{class:"text-muted"},"Unit Cost:",-1)),v("span",aw,se(j(ne.unitCost,ne.currency||"EUR")),1)]),v("div",cw,[E[19]||(E[19]=v("span",{class:"text-muted"},"Purchased:",-1)),v("span",lw,se(q(ne.purchasedAt)),1)]),ne.disposedQuantity?(K(),X("div",uw,[E[20]||(E[20]=v("span",{class:"text-muted"},"Disposed:",-1)),v("span",dw,se(ne.disposedQuantity),1)])):De("",!0)])]))),128))],512),[[vh,h.value]])])):De("",!0),u.value&&u.value.length?(K(),X("div",fw,[E[22]||(E[22]=v("h3",{class:"h6 mb-2"},"Transaction History",-1)),v("div",pw,[(K(!0),X(Xe,null,Bt(p.value,ne=>(K(),X("div",{key:ne.id,class:kt(["tx-item d-flex align-items-center gap-2 p-2 mb-2 rounded border",{buy:/buy/i.test(ne.kind),sell:/sell/i.test(ne.kind)}])},[v("span",{class:kt(["badge me-1",/buy/i.test(ne.kind)?"bg-success-subtle text-success-emphasis":"bg-danger-subtle text-danger-emphasis"])},se(ne.kind),3),v("div",hw,[v("div",mw,se(q(ne.happenedAt)),1),v("div",gw,"Qty: "+se(ne.quantity),1)]),v("div",yw,se(j(ne.unitPrice,ne.currency)),1)],2))),128))])])):De("",!0)])])])])])]),_:1})]),_:1})]),_:1},8,["open"])],64))}}),qd=hn(vw,[["__scopeId","data-v-193691d3"]]),bw={class:"deck-detail-view"},_w={key:0,class:"loading"},ww={key:1,class:"deck-detail"},Cw={class:"deck-header"},kw={class:"deck-meta"},xw={class:"platform"},Aw={class:"date"},Ew={class:"cards-section"},Iw={key:0,class:"empty-state"},Sw={key:1,class:"cards-grid"},Pw={key:2,class:"error"},Ow=ct({__name:"DeckDetailView",setup(e){const t=kd(),n=xe(null),r=xe([]),o=xe({}),a=xe(!0),c=h=>new Date(h).toLocaleDateString(),u=h=>o.value[h]||{id:h,name:"Unknown Card",set:"Unknown Set",setCode:"???",number:"???",lang:"en",finish:"nonfoil",imageUrl:"https://placehold.co/200x280?text=Card+Image"},d=async()=>{try{const h=t.params.id,p=await _e.decks.get(h);if(!p)return;n.value=p;const g=await _e.deck_cards.where("deckId").equals(h).toArray();r.value=g;const b=g.map(C=>C.cardId).filter(C=>C);if(b.length>0){const C=await _e.cards.where("id").anyOf(b).toArray();o.value=Object.fromEntries(C.map(P=>[P.id,P]))}}catch(h){console.error("Error loading deck:",h)}finally{a.value=!1}};return In(()=>{d()}),(h,p)=>{const g=ei("router-link");return K(),X("div",bw,[a.value?(K(),X("div",_w," Loading deck... ")):n.value?(K(),X("div",ww,[v("div",Cw,[ze(g,{to:"/decks",class:"back-link"},{default:ot(()=>[...p[0]||(p[0]=[Wt("  Back to Decks ",-1)])]),_:1}),v("h1",null,se(n.value.name),1),v("p",kw,[v("span",xw,se(n.value.platform),1),v("span",Aw,"Imported: "+se(c(n.value.importedAt)),1)])]),v("div",Ew,[p[2]||(p[2]=v("h2",null,"Cards in Deck",-1)),r.value.length===0?(K(),X("div",Iw,[...p[1]||(p[1]=[v("p",null,"No cards found in this deck.",-1)])])):(K(),X("div",Sw,[(K(!0),X(Xe,null,Bt(r.value,b=>(K(),Pt(qd,{key:b.id,card:u(b.cardId)},null,8,["card"]))),128))]))])])):(K(),X("div",Pw,[p[4]||(p[4]=v("p",null,"Deck not found.",-1)),ze(g,{to:"/decks",class:"back-link"},{default:ot(()=>[...p[3]||(p[3]=[Wt("  Back to Decks ",-1)])]),_:1})]))])}}}),Rw=hn(Ow,[["__scopeId","data-v-aee401d9"]]),$w={class:"cards-view"},Dw={class:"header"},Tw={class:"controls"},Fw={class:"search-box"},Mw={class:"sort-controls"},Bw={key:0,class:"loading"},Nw={key:1,class:"empty-state"},Lw={key:0},qw={key:1},jw={key:2,class:"row g-4"},Uw=ct({__name:"CardsView",setup(e){const t=Ja(),n=xe(""),r=xe("name"),o=xe("asc"),a=tt(()=>{const u=t.getAllCards;if(!n.value)return u;const d=n.value.toLowerCase();return u.filter(h=>h.name.toLowerCase().includes(d)||h.set.toLowerCase().includes(d)||h.number.includes(d))}),c=tt(()=>{const u=[...a.value];return u.sort((d,h)=>{let p=0;switch(r.value){case"name":p=d.name.localeCompare(h.name);break;case"set":p=d.set.localeCompare(h.set);break;case"price":{const g=t.getCardPrice(d.id)?.getCents()??0,b=t.getCardPrice(h.id)?.getCents()??0;p=g-b}break;case"owned":p=0;break;default:p=d.name.localeCompare(h.name)}return o.value==="asc"?p:-p}),u});return In(()=>{t.loadCards(),setTimeout(()=>{t.loadCardPrices()},0)}),(u,d)=>(K(),X("div",$w,[v("div",Dw,[v("div",Tw,[v("div",Fw,[$s(v("input",{"onUpdate:modelValue":d[0]||(d[0]=h=>n.value=h),type:"text",placeholder:"Search cards...",class:"form-control"},null,512),[[ba,n.value]])]),v("div",Mw,[$s(v("select",{"onUpdate:modelValue":d[1]||(d[1]=h=>r.value=h),class:"form-select"},[...d[3]||(d[3]=[v("option",{value:"name"},"Name",-1),v("option",{value:"set"},"Set",-1),v("option",{value:"price"},"Price",-1),v("option",{value:"owned"},"Owned Quantity",-1)])],512),[[qh,r.value]]),v("button",{onClick:d[2]||(d[2]=h=>o.value=o.value==="asc"?"desc":"asc"),class:"btn btn-outline-primary"},se(o.value==="asc"?"":""),1)])])]),Ee(t).loading||Ee(t).loadingPrices?(K(),X("div",Bw," Loading cards and prices... ")):c.value.length===0?(K(),X("div",Nw,[n.value?(K(),X("p",Lw,"No cards match your search.")):(K(),X("p",qw,"You don't have any cards in your collection yet."))])):(K(),X("div",jw,[(K(!0),X(Xe,null,Bt(c.value,h=>(K(),X("div",{key:h.id,class:"col-xl-2 col-lg-3 col-md-4 col-sm-6"},[ze(qd,{card:h},null,8,["card"])]))),128))]))]))}}),Kw=hn(Uw,[["__scopeId","data-v-db0371b5"]]),Vw=[{path:"/",name:"home",component:Ny},{path:"/import/csv",name:"csv-import",component:Zy},{path:"/import/cardmarket",name:"cardmarket-import",component:Kb},{path:"/import/deck",name:"deck-import",component:Zb},{path:"/decks",name:"decks",component:d_},{path:"/decks/:id",name:"deck-detail",component:Rw,props:!0},{path:"/cards",name:"cards",component:Kw}],Hw=Qm({history:km("/mtg-pwa/"),routes:Vw}),Ww="modulepreload",zw=function(e){return"/mtg-pwa/"+e},Yl={},Qw=function(t,n,r){let o=Promise.resolve();if(n&&n.length>0){let h=function(p){return Promise.all(p.map(g=>Promise.resolve(g).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};var c=h;document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=u?.nonce||u?.getAttribute("nonce");o=h(n.map(p=>{if(p=zw(p),p in Yl)return;Yl[p]=!0;const g=p.endsWith(".css"),b=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${b}`))return;const C=document.createElement("link");if(C.rel=g?"stylesheet":Ww,g||(C.as="script"),C.crossOrigin="",C.href=p,d&&C.setAttribute("nonce",d),document.head.appendChild(C),g)return new Promise((P,q)=>{C.addEventListener("load",P),C.addEventListener("error",()=>q(new Error(`Unable to preload CSS for ${p}`)))})}))}function a(u){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=u,window.dispatchEvent(d),!d.defaultPrevented)throw u}return o.then(u=>{for(const d of u||[])d.status==="rejected"&&a(d.reason);return t().catch(a)})};function Yw(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:o,onRegisteredSW:a,onRegisterError:c}=e;let u,d;const h=async(g=!0)=>{await d};async function p(){if("serviceWorker"in navigator){if(u=await Qw(async()=>{const{Workbox:g}=await import("./workbox-window.prod.es5-CwtvwXb3.js");return{Workbox:g}},[]).then(({Workbox:g})=>new g("/mtg-pwa/sw.js",{scope:"/mtg-pwa/",type:"classic"})).catch(g=>{c?.(g)}),!u)return;u.addEventListener("activated",g=>{(g.isUpdate||g.isExternal)&&window.location.reload()}),u.addEventListener("installed",g=>{g.isUpdate||r?.()}),u.register({immediate:t}).then(g=>{a?a("/mtg-pwa/sw.js",g):o?.(g)}).catch(g=>{c?.(g)})}}return d=p(),h}Yw({immediate:!0,onRegistered(e){console.log("SW registered",e)},onRegisterError(e){console.error("SW registration error",e)}});const jd=Kh(Dg),Gw=ng();jd.use(Gw);async function Jw(){jd.use(Hw).mount("#app");try{setTimeout(async()=>{await ys.schedulePriceUpdate()},1e3)}catch(e){console.error("Error initializing automatic price updates:",e)}}Jw();
