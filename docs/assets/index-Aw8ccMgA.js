(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();/**
* @vue/shared v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Id(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const mt={},gi=[],os=()=>{},Dm=()=>!1,Wl=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Ed=t=>t.startsWith("onUpdate:"),Bt=Object.assign,Od=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},F_=Object.prototype.hasOwnProperty,ft=(t,e)=>F_.call(t,e),ze=Array.isArray,mi=t=>Go(t)==="[object Map]",Vl=t=>Go(t)==="[object Set]",oh=t=>Go(t)==="[object Date]",Ye=t=>typeof t=="function",At=t=>typeof t=="string",Wn=t=>typeof t=="symbol",yt=t=>t!==null&&typeof t=="object",Rm=t=>(yt(t)||Ye(t))&&Ye(t.then)&&Ye(t.catch),$m=Object.prototype.toString,Go=t=>$m.call(t),L_=t=>Go(t).slice(8,-1),Fm=t=>Go(t)==="[object Object]",Md=t=>At(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,yo=Id(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Hl=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},B_=/-(\w)/g,En=Hl(t=>t.replace(B_,(e,n)=>n?n.toUpperCase():"")),j_=/\B([A-Z])/g,or=Hl(t=>t.replace(j_,"-$1").toLowerCase()),Kl=Hl(t=>t.charAt(0).toUpperCase()+t.slice(1)),il=Hl(t=>t?`on${Kl(t)}`:""),Qs=(t,e)=>!Object.is(t,e),ol=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},Lm=(t,e,n,s=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:s,value:n})},vl=t=>{const e=parseFloat(t);return isNaN(e)?t:e},N_=t=>{const e=At(t)?Number(t):NaN;return isNaN(e)?t:e};let ah;const Yl=()=>ah||(ah=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function An(t){if(ze(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],r=At(s)?W_(s):An(s);if(r)for(const i in r)e[i]=r[i]}return e}else if(At(t)||yt(t))return t}const z_=/;(?![^(]*\))/g,U_=/:([^]+)/,q_=/\/\*[^]*?\*\//g;function W_(t){const e={};return t.replace(q_,"").split(z_).forEach(n=>{if(n){const s=n.split(U_);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function Pt(t){let e="";if(At(t))e=t;else if(ze(t))for(let n=0;n<t.length;n++){const s=Pt(t[n]);s&&(e+=s+" ")}else if(yt(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function V_(t){if(!t)return null;let{class:e,style:n}=t;return e&&!At(e)&&(t.class=Pt(e)),n&&(t.style=An(n)),t}const H_="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",K_=Id(H_);function Bm(t){return!!t||t===""}function Y_(t,e){if(t.length!==e.length)return!1;let n=!0;for(let s=0;n&&s<t.length;s++)n=Gl(t[s],e[s]);return n}function Gl(t,e){if(t===e)return!0;let n=oh(t),s=oh(e);if(n||s)return n&&s?t.getTime()===e.getTime():!1;if(n=Wn(t),s=Wn(e),n||s)return t===e;if(n=ze(t),s=ze(e),n||s)return n&&s?Y_(t,e):!1;if(n=yt(t),s=yt(e),n||s){if(!n||!s)return!1;const r=Object.keys(t).length,i=Object.keys(e).length;if(r!==i)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!Gl(t[o],e[o]))return!1}}return String(t)===String(e)}function G_(t,e){return t.findIndex(n=>Gl(n,e))}const jm=t=>!!(t&&t.__v_isRef===!0),oe=t=>At(t)?t:t==null?"":ze(t)||yt(t)&&(t.toString===$m||!Ye(t.toString))?jm(t)?oe(t.value):JSON.stringify(t,Nm,2):String(t),Nm=(t,e)=>jm(e)?Nm(t,e.value):mi(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,r],i)=>(n[eu(s,i)+" =>"]=r,n),{})}:Vl(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>eu(n))}:Wn(e)?eu(e):yt(e)&&!ze(e)&&!Fm(e)?String(e):e,eu=(t,e="")=>{var n;return Wn(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let sn;class zm{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=sn,!e&&sn&&(this.index=(sn.scopes||(sn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=sn;try{return sn=this,e()}finally{sn=n}}}on(){++this._on===1&&(this.prevScope=sn,sn=this)}off(){this._on>0&&--this._on===0&&(sn=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function Xl(t){return new zm(t)}function Td(){return sn}function Um(t,e=!1){sn&&sn.cleanups.push(t)}let vt;const tu=new WeakSet;class qm{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,sn&&sn.active&&sn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,tu.has(this)&&(tu.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Vm(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,lh(this),Hm(this);const e=vt,n=qn;vt=this,qn=!0;try{return this.fn()}finally{Km(this),vt=e,qn=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)$d(e);this.deps=this.depsTail=void 0,lh(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?tu.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Uu(this)&&this.run()}get dirty(){return Uu(this)}}let Wm=0,vo,bo;function Vm(t,e=!1){if(t.flags|=8,e){t.next=bo,bo=t;return}t.next=vo,vo=t}function Dd(){Wm++}function Rd(){if(--Wm>0)return;if(bo){let e=bo;for(bo=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;vo;){let e=vo;for(vo=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){t||(t=s)}e=n}}if(t)throw t}function Hm(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Km(t){let e,n=t.depsTail,s=n;for(;s;){const r=s.prevDep;s.version===-1?(s===n&&(n=r),$d(s),X_(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=r}t.deps=e,t.depsTail=n}function Uu(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Ym(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Ym(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Do)||(t.globalVersion=Do,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Uu(t))))return;t.flags|=2;const e=t.dep,n=vt,s=qn;vt=t,qn=!0;try{Hm(t);const r=t.fn(t._value);(e.version===0||Qs(r,t._value))&&(t.flags|=128,t._value=r,e.version++)}catch(r){throw e.version++,r}finally{vt=n,qn=s,Km(t),t.flags&=-3}}function $d(t,e=!1){const{dep:n,prevSub:s,nextSub:r}=t;if(s&&(s.nextSub=r,t.prevSub=void 0),r&&(r.prevSub=s,t.nextSub=void 0),n.subs===t&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)$d(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function X_(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let qn=!0;const Gm=[];function Is(){Gm.push(qn),qn=!1}function Es(){const t=Gm.pop();qn=t===void 0?!0:t}function lh(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=vt;vt=void 0;try{e()}finally{vt=n}}}let Do=0;class Q_{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Fd{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!vt||!qn||vt===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==vt)n=this.activeLink=new Q_(vt,this),vt.deps?(n.prevDep=vt.depsTail,vt.depsTail.nextDep=n,vt.depsTail=n):vt.deps=vt.depsTail=n,Xm(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=vt.depsTail,n.nextDep=void 0,vt.depsTail.nextDep=n,vt.depsTail=n,vt.deps===n&&(vt.deps=s)}return n}trigger(e){this.version++,Do++,this.notify(e)}notify(e){Dd();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Rd()}}}function Xm(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)Xm(s)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const bl=new WeakMap,$r=Symbol(""),qu=Symbol(""),Ro=Symbol("");function rn(t,e,n){if(qn&&vt){let s=bl.get(t);s||bl.set(t,s=new Map);let r=s.get(n);r||(s.set(n,r=new Fd),r.map=s,r.key=n),r.track()}}function Cs(t,e,n,s,r,i){const o=bl.get(t);if(!o){Do++;return}const a=l=>{l&&l.trigger()};if(Dd(),e==="clear")o.forEach(a);else{const l=ze(t),c=l&&Md(n);if(l&&n==="length"){const u=Number(s);o.forEach((f,p)=>{(p==="length"||p===Ro||!Wn(p)&&p>=u)&&a(f)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),c&&a(o.get(Ro)),e){case"add":l?c&&a(o.get("length")):(a(o.get($r)),mi(t)&&a(o.get(qu)));break;case"delete":l||(a(o.get($r)),mi(t)&&a(o.get(qu)));break;case"set":mi(t)&&a(o.get($r));break}}Rd()}function J_(t,e){const n=bl.get(t);return n&&n.get(e)}function ri(t){const e=tt(t);return e===t?e:(rn(e,"iterate",Ro),zn(t)?e:e.map(Gt))}function Ql(t){return rn(t=tt(t),"iterate",Ro),t}const Z_={__proto__:null,[Symbol.iterator](){return nu(this,Symbol.iterator,Gt)},concat(...t){return ri(this).concat(...t.map(e=>ze(e)?ri(e):e))},entries(){return nu(this,"entries",t=>(t[1]=Gt(t[1]),t))},every(t,e){return hs(this,"every",t,e,void 0,arguments)},filter(t,e){return hs(this,"filter",t,e,n=>n.map(Gt),arguments)},find(t,e){return hs(this,"find",t,e,Gt,arguments)},findIndex(t,e){return hs(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return hs(this,"findLast",t,e,Gt,arguments)},findLastIndex(t,e){return hs(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return hs(this,"forEach",t,e,void 0,arguments)},includes(...t){return su(this,"includes",t)},indexOf(...t){return su(this,"indexOf",t)},join(t){return ri(this).join(t)},lastIndexOf(...t){return su(this,"lastIndexOf",t)},map(t,e){return hs(this,"map",t,e,void 0,arguments)},pop(){return Gi(this,"pop")},push(...t){return Gi(this,"push",t)},reduce(t,...e){return ch(this,"reduce",t,e)},reduceRight(t,...e){return ch(this,"reduceRight",t,e)},shift(){return Gi(this,"shift")},some(t,e){return hs(this,"some",t,e,void 0,arguments)},splice(...t){return Gi(this,"splice",t)},toReversed(){return ri(this).toReversed()},toSorted(t){return ri(this).toSorted(t)},toSpliced(...t){return ri(this).toSpliced(...t)},unshift(...t){return Gi(this,"unshift",t)},values(){return nu(this,"values",Gt)}};function nu(t,e,n){const s=Ql(t),r=s[e]();return s!==t&&!zn(t)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.value&&(i.value=n(i.value)),i}),r}const e0=Array.prototype;function hs(t,e,n,s,r,i){const o=Ql(t),a=o!==t&&!zn(t),l=o[e];if(l!==e0[e]){const f=l.apply(t,i);return a?Gt(f):f}let c=n;o!==t&&(a?c=function(f,p){return n.call(this,Gt(f),p,t)}:n.length>2&&(c=function(f,p){return n.call(this,f,p,t)}));const u=l.call(o,c,s);return a&&r?r(u):u}function ch(t,e,n,s){const r=Ql(t);let i=n;return r!==t&&(zn(t)?n.length>3&&(i=function(o,a,l){return n.call(this,o,a,l,t)}):i=function(o,a,l){return n.call(this,o,Gt(a),l,t)}),r[e](i,...s)}function su(t,e,n){const s=tt(t);rn(s,"iterate",Ro);const r=s[e](...n);return(r===-1||r===!1)&&Xo(n[0])?(n[0]=tt(n[0]),s[e](...n)):r}function Gi(t,e,n=[]){Is(),Dd();const s=tt(t)[e].apply(t,n);return Rd(),Es(),s}const t0=Id("__proto__,__v_isRef,__isVue"),Qm=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Wn));function n0(t){Wn(t)||(t=String(t));const e=tt(this);return rn(e,"has",t),e.hasOwnProperty(t)}class Jm{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,s){if(n==="__v_skip")return e.__v_skip;const r=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return i;if(n==="__v_raw")return s===(r?i?f0:ny:i?ty:ey).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=ze(e);if(!r){let l;if(o&&(l=Z_[n]))return l;if(n==="hasOwnProperty")return n0}const a=Reflect.get(e,n,Dt(e)?e:s);return(Wn(n)?Qm.has(n):t0(n))||(r||rn(e,"get",n),i)?a:Dt(a)?o&&Md(n)?a:a.value:yt(a)?r?ry(a):qr(a):a}}class Zm extends Jm{constructor(e=!1){super(!1,e)}set(e,n,s,r){let i=e[n];if(!this._isShallow){const l=sr(i);if(!zn(s)&&!sr(s)&&(i=tt(i),s=tt(s)),!ze(e)&&Dt(i)&&!Dt(s))return l||(i.value=s),!0}const o=ze(e)&&Md(n)?Number(n)<e.length:ft(e,n),a=Reflect.set(e,n,s,Dt(e)?e:r);return e===tt(r)&&(o?Qs(s,i)&&Cs(e,"set",n,s):Cs(e,"add",n,s)),a}deleteProperty(e,n){const s=ft(e,n);e[n];const r=Reflect.deleteProperty(e,n);return r&&s&&Cs(e,"delete",n,void 0),r}has(e,n){const s=Reflect.has(e,n);return(!Wn(n)||!Qm.has(n))&&rn(e,"has",n),s}ownKeys(e){return rn(e,"iterate",ze(e)?"length":$r),Reflect.ownKeys(e)}}class s0 extends Jm{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const r0=new Zm,i0=new s0,o0=new Zm(!0);const Wu=t=>t,Da=t=>Reflect.getPrototypeOf(t);function a0(t,e,n){return function(...s){const r=this.__v_raw,i=tt(r),o=mi(i),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=r[t](...s),u=n?Wu:e?_l:Gt;return!e&&rn(i,"iterate",l?qu:$r),{next(){const{value:f,done:p}=c.next();return p?{value:f,done:p}:{value:a?[u(f[0]),u(f[1])]:u(f),done:p}},[Symbol.iterator](){return this}}}}function Ra(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function l0(t,e){const n={get(r){const i=this.__v_raw,o=tt(i),a=tt(r);t||(Qs(r,a)&&rn(o,"get",r),rn(o,"get",a));const{has:l}=Da(o),c=e?Wu:t?_l:Gt;if(l.call(o,r))return c(i.get(r));if(l.call(o,a))return c(i.get(a));i!==o&&i.get(r)},get size(){const r=this.__v_raw;return!t&&rn(tt(r),"iterate",$r),r.size},has(r){const i=this.__v_raw,o=tt(i),a=tt(r);return t||(Qs(r,a)&&rn(o,"has",r),rn(o,"has",a)),r===a?i.has(r):i.has(r)||i.has(a)},forEach(r,i){const o=this,a=o.__v_raw,l=tt(a),c=e?Wu:t?_l:Gt;return!t&&rn(l,"iterate",$r),a.forEach((u,f)=>r.call(i,c(u),c(f),o))}};return Bt(n,t?{add:Ra("add"),set:Ra("set"),delete:Ra("delete"),clear:Ra("clear")}:{add(r){!e&&!zn(r)&&!sr(r)&&(r=tt(r));const i=tt(this);return Da(i).has.call(i,r)||(i.add(r),Cs(i,"add",r,r)),this},set(r,i){!e&&!zn(i)&&!sr(i)&&(i=tt(i));const o=tt(this),{has:a,get:l}=Da(o);let c=a.call(o,r);c||(r=tt(r),c=a.call(o,r));const u=l.call(o,r);return o.set(r,i),c?Qs(i,u)&&Cs(o,"set",r,i):Cs(o,"add",r,i),this},delete(r){const i=tt(this),{has:o,get:a}=Da(i);let l=o.call(i,r);l||(r=tt(r),l=o.call(i,r)),a&&a.call(i,r);const c=i.delete(r);return l&&Cs(i,"delete",r,void 0),c},clear(){const r=tt(this),i=r.size!==0,o=r.clear();return i&&Cs(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=a0(r,t,e)}),n}function Ld(t,e){const n=l0(t,e);return(s,r,i)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?s:Reflect.get(ft(n,r)&&r in s?n:s,r,i)}const c0={get:Ld(!1,!1)},u0={get:Ld(!1,!0)},d0={get:Ld(!0,!1)};const ey=new WeakMap,ty=new WeakMap,ny=new WeakMap,f0=new WeakMap;function h0(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function p0(t){return t.__v_skip||!Object.isExtensible(t)?0:h0(L_(t))}function qr(t){return sr(t)?t:Bd(t,!1,r0,c0,ey)}function sy(t){return Bd(t,!1,o0,u0,ty)}function ry(t){return Bd(t,!0,i0,d0,ny)}function Bd(t,e,n,s,r){if(!yt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=p0(t);if(i===0)return t;const o=r.get(t);if(o)return o;const a=new Proxy(t,i===2?s:n);return r.set(t,a),a}function Js(t){return sr(t)?Js(t.__v_raw):!!(t&&t.__v_isReactive)}function sr(t){return!!(t&&t.__v_isReadonly)}function zn(t){return!!(t&&t.__v_isShallow)}function Xo(t){return t?!!t.__v_raw:!1}function tt(t){const e=t&&t.__v_raw;return e?tt(e):t}function jd(t){return!ft(t,"__v_skip")&&Object.isExtensible(t)&&Lm(t,"__v_skip",!0),t}const Gt=t=>yt(t)?qr(t):t,_l=t=>yt(t)?ry(t):t;function Dt(t){return t?t.__v_isRef===!0:!1}function he(t){return iy(t,!1)}function Jl(t){return iy(t,!0)}function iy(t,e){return Dt(t)?t:new g0(t,e)}class g0{constructor(e,n){this.dep=new Fd,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:tt(e),this._value=n?e:Gt(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,s=this.__v_isShallow||zn(e)||sr(e);e=s?e:tt(e),Qs(e,n)&&(this._rawValue=e,this._value=s?e:Gt(e),this.dep.trigger())}}function $e(t){return Dt(t)?t.value:t}function as(t){return Ye(t)?t():$e(t)}const m0={get:(t,e,n)=>e==="__v_raw"?t:$e(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const r=t[e];return Dt(r)&&!Dt(n)?(r.value=n,!0):Reflect.set(t,e,n,s)}};function oy(t){return Js(t)?t:new Proxy(t,m0)}function Nd(t){const e=ze(t)?new Array(t.length):{};for(const n in t)e[n]=v0(t,n);return e}class y0{constructor(e,n,s){this._object=e,this._key=n,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return J_(tt(this._object),this._key)}}function v0(t,e,n){const s=t[e];return Dt(s)?s:new y0(t,e,n)}class b0{constructor(e,n,s){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Fd(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Do-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&vt!==this)return Vm(this,!0),!0}get value(){const e=this.dep.track();return Ym(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function _0(t,e,n=!1){let s,r;return Ye(t)?s=t:(s=t.get,r=t.set),new b0(s,r,n)}const $a={},wl=new WeakMap;let Ar;function w0(t,e=!1,n=Ar){if(n){let s=wl.get(n);s||wl.set(n,s=[]),s.push(t)}}function x0(t,e,n=mt){const{immediate:s,deep:r,once:i,scheduler:o,augmentJob:a,call:l}=n,c=C=>r?C:zn(C)||r===!1||r===0?Ps(C,1):Ps(C);let u,f,p,m,v=!1,_=!1;if(Dt(t)?(f=()=>t.value,v=zn(t)):Js(t)?(f=()=>c(t),v=!0):ze(t)?(_=!0,v=t.some(C=>Js(C)||zn(C)),f=()=>t.map(C=>{if(Dt(C))return C.value;if(Js(C))return c(C);if(Ye(C))return l?l(C,2):C()})):Ye(t)?e?f=l?()=>l(t,2):t:f=()=>{if(p){Is();try{p()}finally{Es()}}const C=Ar;Ar=u;try{return l?l(t,3,[m]):t(m)}finally{Ar=C}}:f=os,e&&r){const C=f,I=r===!0?1/0:r;f=()=>Ps(C(),I)}const k=Td(),S=()=>{u.stop(),k&&k.active&&Od(k.effects,u)};if(i&&e){const C=e;e=(...I)=>{C(...I),S()}}let P=_?new Array(t.length).fill($a):$a;const E=C=>{if(!(!(u.flags&1)||!u.dirty&&!C))if(e){const I=u.run();if(r||v||(_?I.some((T,G)=>Qs(T,P[G])):Qs(I,P))){p&&p();const T=Ar;Ar=u;try{const G=[I,P===$a?void 0:_&&P[0]===$a?[]:P,m];P=I,l?l(e,3,G):e(...G)}finally{Ar=T}}}else u.run()};return a&&a(E),u=new qm(f),u.scheduler=o?()=>o(E,!1):E,m=C=>w0(C,!1,u),p=u.onStop=()=>{const C=wl.get(u);if(C){if(l)l(C,4);else for(const I of C)I();wl.delete(u)}},e?s?E(!0):P=u.run():o?o(E.bind(null,!0),!0):u.run(),S.pause=u.pause.bind(u),S.resume=u.resume.bind(u),S.stop=S,S}function Ps(t,e=1/0,n){if(e<=0||!yt(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,Dt(t))Ps(t.value,e,n);else if(ze(t))for(let s=0;s<t.length;s++)Ps(t[s],e,n);else if(Vl(t)||mi(t))t.forEach(s=>{Ps(s,e,n)});else if(Fm(t)){for(const s in t)Ps(t[s],e,n);for(const s of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,s)&&Ps(t[s],e,n)}return t}/**
* @vue/runtime-core v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Qo(t,e,n,s){try{return s?t(...s):t()}catch(r){Zl(r,e,n)}}function Vn(t,e,n,s){if(Ye(t)){const r=Qo(t,e,n,s);return r&&Rm(r)&&r.catch(i=>{Zl(i,e,n)}),r}if(ze(t)){const r=[];for(let i=0;i<t.length;i++)r.push(Vn(t[i],e,n,s));return r}}function Zl(t,e,n,s=!0){const r=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||mt;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const u=a.ec;if(u){for(let f=0;f<u.length;f++)if(u[f](t,l,c)===!1)return}a=a.parent}if(i){Is(),Qo(i,null,10,[t,l,c]),Es();return}}k0(t,n,r,s,o)}function k0(t,e,n,s=!0,r=!1){if(r)throw t;console.error(t)}const hn=[];let ns=-1;const yi=[];let Hs=null,ci=0;const ay=Promise.resolve();let xl=null;function an(t){const e=xl||ay;return t?e.then(this?t.bind(this):t):e}function S0(t){let e=ns+1,n=hn.length;for(;e<n;){const s=e+n>>>1,r=hn[s],i=$o(r);i<t||i===t&&r.flags&2?e=s+1:n=s}return e}function zd(t){if(!(t.flags&1)){const e=$o(t),n=hn[hn.length-1];!n||!(t.flags&2)&&e>=$o(n)?hn.push(t):hn.splice(S0(e),0,t),t.flags|=1,ly()}}function ly(){xl||(xl=ay.then(uy))}function C0(t){ze(t)?yi.push(...t):Hs&&t.id===-1?Hs.splice(ci+1,0,t):t.flags&1||(yi.push(t),t.flags|=1),ly()}function uh(t,e,n=ns+1){for(;n<hn.length;n++){const s=hn[n];if(s&&s.flags&2){if(t&&s.id!==t.uid)continue;hn.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function cy(t){if(yi.length){const e=[...new Set(yi)].sort((n,s)=>$o(n)-$o(s));if(yi.length=0,Hs){Hs.push(...e);return}for(Hs=e,ci=0;ci<Hs.length;ci++){const n=Hs[ci];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Hs=null,ci=0}}const $o=t=>t.id==null?t.flags&2?-1:1/0:t.id;function uy(t){try{for(ns=0;ns<hn.length;ns++){const e=hn[ns];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Qo(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;ns<hn.length;ns++){const e=hn[ns];e&&(e.flags&=-2)}ns=-1,hn.length=0,cy(),xl=null,(hn.length||yi.length)&&uy()}}let Xt=null,dy=null;function kl(t){const e=Xt;return Xt=t,dy=t&&t.type.__scopeId||null,e}function at(t,e=Xt,n){if(!e||t._n)return t;const s=(...r)=>{s._d&&kh(-1);const i=kl(e);let o;try{o=t(...r)}finally{kl(i),s._d&&kh(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function Fr(t,e){if(Xt===null)return t;const n=rc(Xt),s=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[i,o,a,l=mt]=e[r];i&&(Ye(i)&&(i={mounted:i,updated:i}),i.deep&&Ps(o),s.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function gr(t,e,n,s){const r=t.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];i&&(a.oldValue=i[o].value);let l=a.dir[s];l&&(Is(),Vn(l,n,8,[t.el,a,t,e]),Es())}}const fy=Symbol("_vte"),P0=t=>t.__isTeleport,_o=t=>t&&(t.disabled||t.disabled===""),dh=t=>t&&(t.defer||t.defer===""),fh=t=>typeof SVGElement<"u"&&t instanceof SVGElement,hh=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,Vu=(t,e)=>{const n=t&&t.to;return At(n)?e?e(n):null:n},hy={name:"Teleport",__isTeleport:!0,process(t,e,n,s,r,i,o,a,l,c){const{mc:u,pc:f,pbc:p,o:{insert:m,querySelector:v,createText:_,createComment:k}}=c,S=_o(e.props);let{shapeFlag:P,children:E,dynamicChildren:C}=e;if(t==null){const I=e.el=_(""),T=e.anchor=_("");m(I,n,s),m(T,n,s);const G=(A,Z)=>{P&16&&(r&&r.isCE&&(r.ce._teleportTarget=A),u(E,A,Z,r,i,o,a,l))},V=()=>{const A=e.target=Vu(e.props,v),Z=py(A,e,_,m);A&&(o!=="svg"&&fh(A)?o="svg":o!=="mathml"&&hh(A)&&(o="mathml"),S||(G(A,Z),al(e,!1)))};S&&(G(n,T),al(e,!0)),dh(e.props)?(e.el.__isMounted=!1,fn(()=>{V(),delete e.el.__isMounted},i)):V()}else{if(dh(e.props)&&t.el.__isMounted===!1){fn(()=>{hy.process(t,e,n,s,r,i,o,a,l,c)},i);return}e.el=t.el,e.targetStart=t.targetStart;const I=e.anchor=t.anchor,T=e.target=t.target,G=e.targetAnchor=t.targetAnchor,V=_o(t.props),A=V?n:T,Z=V?I:G;if(o==="svg"||fh(T)?o="svg":(o==="mathml"||hh(T))&&(o="mathml"),C?(p(t.dynamicChildren,C,A,r,i,o,a),Wd(t,e,!0)):l||f(t,e,A,Z,r,i,o,a,!1),S)V?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):Fa(e,n,I,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const K=e.target=Vu(e.props,v);K&&Fa(e,K,null,c,0)}else V&&Fa(e,T,G,c,1);al(e,S)}},remove(t,e,n,{um:s,o:{remove:r}},i){const{shapeFlag:o,children:a,anchor:l,targetStart:c,targetAnchor:u,target:f,props:p}=t;if(f&&(r(c),r(u)),i&&r(l),o&16){const m=i||!_o(p);for(let v=0;v<a.length;v++){const _=a[v];s(_,e,n,m,!!_.dynamicChildren)}}},move:Fa,hydrate:A0};function Fa(t,e,n,{o:{insert:s},m:r},i=2){i===0&&s(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:c,props:u}=t,f=i===2;if(f&&s(o,e,n),(!f||_o(u))&&l&16)for(let p=0;p<c.length;p++)r(c[p],e,n,2);f&&s(a,e,n)}function A0(t,e,n,s,r,i,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:c,createText:u}},f){const p=e.target=Vu(e.props,l);if(p){const m=_o(e.props),v=p._lpa||p.firstChild;if(e.shapeFlag&16)if(m)e.anchor=f(o(t),e,a(t),n,s,r,i),e.targetStart=v,e.targetAnchor=v&&o(v);else{e.anchor=o(t);let _=v;for(;_;){if(_&&_.nodeType===8){if(_.data==="teleport start anchor")e.targetStart=_;else if(_.data==="teleport anchor"){e.targetAnchor=_,p._lpa=e.targetAnchor&&o(e.targetAnchor);break}}_=o(_)}e.targetAnchor||py(p,e,u,c),f(v&&o(v),e,p,n,s,r,i)}al(e,m)}return e.anchor&&o(e.anchor)}const I0=hy;function al(t,e){const n=t.ctx;if(n&&n.ut){let s,r;for(e?(s=t.el,r=t.anchor):(s=t.targetStart,r=t.targetAnchor);s&&s!==r;)s.nodeType===1&&s.setAttribute("data-v-owner",n.uid),s=s.nextSibling;n.ut()}}function py(t,e,n,s){const r=e.targetStart=n(""),i=e.targetAnchor=n("");return r[fy]=i,t&&(s(r,t),s(i,t)),i}const Ir=Symbol("_leaveCb"),La=Symbol("_enterCb");function E0(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Mn(()=>{t.isMounted=!0}),tc(()=>{t.isUnmounting=!0}),t}const Dn=[Function,Array],O0={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Dn,onEnter:Dn,onAfterEnter:Dn,onEnterCancelled:Dn,onBeforeLeave:Dn,onLeave:Dn,onAfterLeave:Dn,onLeaveCancelled:Dn,onBeforeAppear:Dn,onAppear:Dn,onAfterAppear:Dn,onAppearCancelled:Dn};function M0(t,e){const{leavingVNodes:n}=t;let s=n.get(e.type);return s||(s=Object.create(null),n.set(e.type,s)),s}function Hu(t,e,n,s,r){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:u,onEnterCancelled:f,onBeforeLeave:p,onLeave:m,onAfterLeave:v,onLeaveCancelled:_,onBeforeAppear:k,onAppear:S,onAfterAppear:P,onAppearCancelled:E}=e,C=String(t.key),I=M0(n,t),T=(A,Z)=>{A&&Vn(A,s,9,Z)},G=(A,Z)=>{const K=Z[1];T(A,Z),ze(A)?A.every(j=>j.length<=1)&&K():A.length<=1&&K()},V={mode:o,persisted:a,beforeEnter(A){let Z=l;if(!n.isMounted)if(i)Z=k||l;else return;A[Ir]&&A[Ir](!0);const K=I[C];K&&ui(t,K)&&K.el[Ir]&&K.el[Ir](),T(Z,[A])},enter(A){let Z=c,K=u,j=f;if(!n.isMounted)if(i)Z=S||c,K=P||u,j=E||f;else return;let de=!1;const ge=A[La]=Ae=>{de||(de=!0,Ae?T(j,[A]):T(K,[A]),V.delayedLeave&&V.delayedLeave(),A[La]=void 0)};Z?G(Z,[A,ge]):ge()},leave(A,Z){const K=String(t.key);if(A[La]&&A[La](!0),n.isUnmounting)return Z();T(p,[A]);let j=!1;const de=A[Ir]=ge=>{j||(j=!0,Z(),ge?T(_,[A]):T(v,[A]),A[Ir]=void 0,I[K]===t&&delete I[K])};I[K]=t,m?G(m,[A,de]):de()},clone(A){return Hu(A,e,n,s)}};return V}function Fo(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Fo(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function gy(t,e=!1,n){let s=[],r=0;for(let i=0;i<t.length;i++){let o=t[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===et?(o.patchFlag&128&&r++,s=s.concat(gy(o.children,e,a))):(e||o.type!==Hn)&&s.push(a!=null?rr(o,{key:a}):o)}if(r>1)for(let i=0;i<s.length;i++)s[i].patchFlag=-2;return s}/*! #__NO_SIDE_EFFECTS__ */function Ze(t,e){return Ye(t)?Bt({name:t.name},e,{setup:t}):t}function T0(){const t=cs();return t?(t.appContext.config.idPrefix||"v")+"-"+t.ids[0]+t.ids[1]++:""}function my(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function wo(t,e,n,s,r=!1){if(ze(t)){t.forEach((v,_)=>wo(v,e&&(ze(e)?e[_]:e),n,s,r));return}if(vi(s)&&!r){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&wo(t,e,n,s.component.subTree);return}const i=s.shapeFlag&4?rc(s.component):s.el,o=r?null:i,{i:a,r:l}=t,c=e&&e.r,u=a.refs===mt?a.refs={}:a.refs,f=a.setupState,p=tt(f),m=f===mt?Dm:v=>ft(p,v);if(c!=null&&c!==l){if(At(c))u[c]=null,m(c)&&(f[c]=null);else if(Dt(c)){c.value=null;const v=e;v.k&&(u[v.k]=null)}}if(Ye(l))Qo(l,a,12,[o,u]);else{const v=At(l),_=Dt(l);if(v||_){const k=()=>{if(t.f){const S=v?m(l)?f[l]:u[l]:l.value;if(r)ze(S)&&Od(S,i);else if(ze(S))S.includes(i)||S.push(i);else if(v)u[l]=[i],m(l)&&(f[l]=u[l]);else{const P=[i];l.value=P,t.k&&(u[t.k]=P)}}else v?(u[l]=o,m(l)&&(f[l]=o)):_&&(l.value=o,t.k&&(u[t.k]=o))};o?(k.id=-1,fn(k,n)):k()}}}Yl().requestIdleCallback;Yl().cancelIdleCallback;const vi=t=>!!t.type.__asyncLoader,yy=t=>t.type.__isKeepAlive;function D0(t,e){vy(t,"a",e)}function R0(t,e){vy(t,"da",e)}function vy(t,e,n=on){const s=t.__wdc||(t.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(ec(e,s,n),n){let r=n.parent;for(;r&&r.parent;)yy(r.parent.vnode)&&$0(s,e,n,r),r=r.parent}}function $0(t,e,n,s){const r=ec(e,t,s,!0);$i(()=>{Od(s[e],r)},n)}function ec(t,e,n=on,s=!1){if(n){const r=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{Is();const a=Jo(n),l=Vn(e,n,t,o);return a(),Es(),l});return s?r.unshift(i):r.push(i),i}}const Ms=t=>(e,n=on)=>{(!jo||t==="sp")&&ec(t,(...s)=>e(...s),n)},F0=Ms("bm"),Mn=Ms("m"),L0=Ms("bu"),by=Ms("u"),tc=Ms("bum"),$i=Ms("um"),B0=Ms("sp"),j0=Ms("rtg"),N0=Ms("rtc");function z0(t,e=on){ec("ec",t,e)}const U0="components";function Si(t,e){return W0(U0,t,!0,e)||t}const q0=Symbol.for("v-ndc");function W0(t,e,n=!0,s=!1){const r=Xt||on;if(r){const i=r.type;{const a=Ew(i,!1);if(a&&(a===e||a===En(e)||a===Kl(En(e))))return i}const o=ph(r[t]||i[t],e)||ph(r.appContext[t],e);return!o&&s?i:o}}function ph(t,e){return t&&(t[e]||t[En(e)]||t[Kl(En(e))])}function Ft(t,e,n,s){let r;const i=n,o=ze(t);if(o||At(t)){const a=o&&Js(t);let l=!1,c=!1;a&&(l=!zn(t),c=sr(t),t=Ql(t)),r=new Array(t.length);for(let u=0,f=t.length;u<f;u++)r[u]=e(l?c?_l(Gt(t[u])):Gt(t[u]):t[u],u,void 0,i)}else if(typeof t=="number"){r=new Array(t);for(let a=0;a<t;a++)r[a]=e(a+1,a,void 0,i)}else if(yt(t))if(t[Symbol.iterator])r=Array.from(t,(a,l)=>e(a,l,void 0,i));else{const a=Object.keys(t);r=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const u=a[l];r[l]=e(t[u],u,l,i)}}else r=[];return r}function bn(t,e,n={},s,r){if(Xt.ce||Xt.parent&&vi(Xt.parent)&&Xt.parent.ce)return q(),Jt(et,null,[qe("slot",n,s)],64);let i=t[e];i&&i._c&&(i._d=!1),q();const o=i&&_y(i(n)),a=n.key||o&&o.key,l=Jt(et,{key:(a&&!Wn(a)?a:`_${e}`)+(!o&&s?"_fb":"")},o||[],o&&t._===1?64:-2);return l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),i&&i._c&&(i._d=!0),l}function _y(t){return t.some(e=>Bo(e)?!(e.type===Hn||e.type===et&&!_y(e.children)):!0)?t:null}const Ku=t=>t?Ny(t)?rc(t):Ku(t.parent):null,xo=Bt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Ku(t.parent),$root:t=>Ku(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>xy(t),$forceUpdate:t=>t.f||(t.f=()=>{zd(t.update)}),$nextTick:t=>t.n||(t.n=an.bind(t.proxy)),$watch:t=>fw.bind(t)}),ru=(t,e)=>t!==mt&&!t.__isScriptSetup&&ft(t,e),V0={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:s,data:r,props:i,accessCache:o,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const m=o[e];if(m!==void 0)switch(m){case 1:return s[e];case 2:return r[e];case 4:return n[e];case 3:return i[e]}else{if(ru(s,e))return o[e]=1,s[e];if(r!==mt&&ft(r,e))return o[e]=2,r[e];if((c=t.propsOptions[0])&&ft(c,e))return o[e]=3,i[e];if(n!==mt&&ft(n,e))return o[e]=4,n[e];Yu&&(o[e]=0)}}const u=xo[e];let f,p;if(u)return e==="$attrs"&&rn(t.attrs,"get",""),u(t);if((f=a.__cssModules)&&(f=f[e]))return f;if(n!==mt&&ft(n,e))return o[e]=4,n[e];if(p=l.config.globalProperties,ft(p,e))return p[e]},set({_:t},e,n){const{data:s,setupState:r,ctx:i}=t;return ru(r,e)?(r[e]=n,!0):s!==mt&&ft(s,e)?(s[e]=n,!0):ft(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:r,propsOptions:i,type:o}},a){let l,c;return!!(n[a]||t!==mt&&a[0]!=="$"&&ft(t,a)||ru(e,a)||(l=i[0])&&ft(l,a)||ft(s,a)||ft(xo,a)||ft(r.config.globalProperties,a)||(c=o.__cssModules)&&c[a])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:ft(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function gh(t){return ze(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Yu=!0;function H0(t){const e=xy(t),n=t.proxy,s=t.ctx;Yu=!1,e.beforeCreate&&mh(e.beforeCreate,t,"bc");const{data:r,computed:i,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:f,mounted:p,beforeUpdate:m,updated:v,activated:_,deactivated:k,beforeDestroy:S,beforeUnmount:P,destroyed:E,unmounted:C,render:I,renderTracked:T,renderTriggered:G,errorCaptured:V,serverPrefetch:A,expose:Z,inheritAttrs:K,components:j,directives:de,filters:ge}=e;if(c&&K0(c,s,null),o)for(const Pe in o){const te=o[Pe];Ye(te)&&(s[Pe]=te.bind(n))}if(r){const Pe=r.call(n,n);yt(Pe)&&(t.data=qr(Pe))}if(Yu=!0,i)for(const Pe in i){const te=i[Pe],ee=Ye(te)?te.bind(n,n):Ye(te.get)?te.get.bind(n,n):os,Y=!Ye(te)&&Ye(te.set)?te.set.bind(n):os,Le=He({get:ee,set:Y});Object.defineProperty(s,Pe,{enumerable:!0,configurable:!0,get:()=>Le.value,set:_e=>Le.value=_e})}if(a)for(const Pe in a)wy(a[Pe],s,n,Pe);if(l){const Pe=Ye(l)?l.call(n):l;Reflect.ownKeys(Pe).forEach(te=>{ko(te,Pe[te])})}u&&mh(u,t,"c");function Se(Pe,te){ze(te)?te.forEach(ee=>Pe(ee.bind(n))):te&&Pe(te.bind(n))}if(Se(F0,f),Se(Mn,p),Se(L0,m),Se(by,v),Se(D0,_),Se(R0,k),Se(z0,V),Se(N0,T),Se(j0,G),Se(tc,P),Se($i,C),Se(B0,A),ze(Z))if(Z.length){const Pe=t.exposed||(t.exposed={});Z.forEach(te=>{Object.defineProperty(Pe,te,{get:()=>n[te],set:ee=>n[te]=ee,enumerable:!0})})}else t.exposed||(t.exposed={});I&&t.render===os&&(t.render=I),K!=null&&(t.inheritAttrs=K),j&&(t.components=j),de&&(t.directives=de),A&&my(t)}function K0(t,e,n=os){ze(t)&&(t=Gu(t));for(const s in t){const r=t[s];let i;yt(r)?"default"in r?i=In(r.from||s,r.default,!0):i=In(r.from||s):i=In(r),Dt(i)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[s]=i}}function mh(t,e,n){Vn(ze(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function wy(t,e,n,s){let r=s.includes(".")?Dy(n,s):()=>n[s];if(At(t)){const i=e[t];Ye(i)&&Ht(r,i)}else if(Ye(t))Ht(r,t.bind(n));else if(yt(t))if(ze(t))t.forEach(i=>wy(i,e,n,s));else{const i=Ye(t.handler)?t.handler.bind(n):e[t.handler];Ye(i)&&Ht(r,i,t)}}function xy(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let l;return a?l=a:!r.length&&!n&&!s?l=e:(l={},r.length&&r.forEach(c=>Sl(l,c,o,!0)),Sl(l,e,o)),yt(e)&&i.set(e,l),l}function Sl(t,e,n,s=!1){const{mixins:r,extends:i}=e;i&&Sl(t,i,n,!0),r&&r.forEach(o=>Sl(t,o,n,!0));for(const o in e)if(!(s&&o==="expose")){const a=Y0[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const Y0={data:yh,props:vh,emits:vh,methods:fo,computed:fo,beforeCreate:dn,created:dn,beforeMount:dn,mounted:dn,beforeUpdate:dn,updated:dn,beforeDestroy:dn,beforeUnmount:dn,destroyed:dn,unmounted:dn,activated:dn,deactivated:dn,errorCaptured:dn,serverPrefetch:dn,components:fo,directives:fo,watch:X0,provide:yh,inject:G0};function yh(t,e){return e?t?function(){return Bt(Ye(t)?t.call(this,this):t,Ye(e)?e.call(this,this):e)}:e:t}function G0(t,e){return fo(Gu(t),Gu(e))}function Gu(t){if(ze(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function dn(t,e){return t?[...new Set([].concat(t,e))]:e}function fo(t,e){return t?Bt(Object.create(null),t,e):e}function vh(t,e){return t?ze(t)&&ze(e)?[...new Set([...t,...e])]:Bt(Object.create(null),gh(t),gh(e??{})):e}function X0(t,e){if(!t)return e;if(!e)return t;const n=Bt(Object.create(null),t);for(const s in e)n[s]=dn(t[s],e[s]);return n}function ky(){return{app:null,config:{isNativeTag:Dm,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Q0=0;function J0(t,e){return function(s,r=null){Ye(s)||(s=Bt({},s)),r!=null&&!yt(r)&&(r=null);const i=ky(),o=new WeakSet,a=[];let l=!1;const c=i.app={_uid:Q0++,_component:s,_props:r,_container:null,_context:i,_instance:null,version:Uy,get config(){return i.config},set config(u){},use(u,...f){return o.has(u)||(u&&Ye(u.install)?(o.add(u),u.install(c,...f)):Ye(u)&&(o.add(u),u(c,...f))),c},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),c},component(u,f){return f?(i.components[u]=f,c):i.components[u]},directive(u,f){return f?(i.directives[u]=f,c):i.directives[u]},mount(u,f,p){if(!l){const m=c._ceVNode||qe(s,r);return m.appContext=i,p===!0?p="svg":p===!1&&(p=void 0),t(m,u,p),l=!0,c._container=u,u.__vue_app__=c,rc(m.component)}},onUnmount(u){a.push(u)},unmount(){l&&(Vn(a,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(u,f){return i.provides[u]=f,c},runWithContext(u){const f=Lr;Lr=c;try{return u()}finally{Lr=f}}};return c}}let Lr=null;function ko(t,e){if(on){let n=on.provides;const s=on.parent&&on.parent.provides;s===n&&(n=on.provides=Object.create(s)),n[t]=e}}function In(t,e,n=!1){const s=cs();if(s||Lr){let r=Lr?Lr._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&t in r)return r[t];if(arguments.length>1)return n&&Ye(e)?e.call(s&&s.proxy):e}}function Z0(){return!!(cs()||Lr)}const Sy={},Cy=()=>Object.create(Sy),Py=t=>Object.getPrototypeOf(t)===Sy;function ew(t,e,n,s=!1){const r={},i=Cy();t.propsDefaults=Object.create(null),Ay(t,e,r,i);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);n?t.props=s?r:sy(r):t.type.props?t.props=r:t.props=i,t.attrs=i}function tw(t,e,n,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=t,a=tt(r),[l]=t.propsOptions;let c=!1;if((s||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let f=0;f<u.length;f++){let p=u[f];if(nc(t.emitsOptions,p))continue;const m=e[p];if(l)if(ft(i,p))m!==i[p]&&(i[p]=m,c=!0);else{const v=En(p);r[v]=Xu(l,a,v,m,t,!1)}else m!==i[p]&&(i[p]=m,c=!0)}}}else{Ay(t,e,r,i)&&(c=!0);let u;for(const f in a)(!e||!ft(e,f)&&((u=or(f))===f||!ft(e,u)))&&(l?n&&(n[f]!==void 0||n[u]!==void 0)&&(r[f]=Xu(l,a,f,void 0,t,!0)):delete r[f]);if(i!==a)for(const f in i)(!e||!ft(e,f))&&(delete i[f],c=!0)}c&&Cs(t.attrs,"set","")}function Ay(t,e,n,s){const[r,i]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(yo(l))continue;const c=e[l];let u;r&&ft(r,u=En(l))?!i||!i.includes(u)?n[u]=c:(a||(a={}))[u]=c:nc(t.emitsOptions,l)||(!(l in s)||c!==s[l])&&(s[l]=c,o=!0)}if(i){const l=tt(n),c=a||mt;for(let u=0;u<i.length;u++){const f=i[u];n[f]=Xu(r,l,f,c[f],t,!ft(c,f))}}return o}function Xu(t,e,n,s,r,i){const o=t[n];if(o!=null){const a=ft(o,"default");if(a&&s===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Ye(l)){const{propsDefaults:c}=r;if(n in c)s=c[n];else{const u=Jo(r);s=c[n]=l.call(null,e),u()}}else s=l;r.ce&&r.ce._setProp(n,s)}o[0]&&(i&&!a?s=!1:o[1]&&(s===""||s===or(n))&&(s=!0))}return s}const nw=new WeakMap;function Iy(t,e,n=!1){const s=n?nw:e.propsCache,r=s.get(t);if(r)return r;const i=t.props,o={},a=[];let l=!1;if(!Ye(t)){const u=f=>{l=!0;const[p,m]=Iy(f,e,!0);Bt(o,p),m&&a.push(...m)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!i&&!l)return yt(t)&&s.set(t,gi),gi;if(ze(i))for(let u=0;u<i.length;u++){const f=En(i[u]);bh(f)&&(o[f]=mt)}else if(i)for(const u in i){const f=En(u);if(bh(f)){const p=i[u],m=o[f]=ze(p)||Ye(p)?{type:p}:Bt({},p),v=m.type;let _=!1,k=!0;if(ze(v))for(let S=0;S<v.length;++S){const P=v[S],E=Ye(P)&&P.name;if(E==="Boolean"){_=!0;break}else E==="String"&&(k=!1)}else _=Ye(v)&&v.name==="Boolean";m[0]=_,m[1]=k,(_||ft(m,"default"))&&a.push(f)}}const c=[o,a];return yt(t)&&s.set(t,c),c}function bh(t){return t[0]!=="$"&&!yo(t)}const Ud=t=>t==="_"||t==="_ctx"||t==="$stable",qd=t=>ze(t)?t.map(is):[is(t)],sw=(t,e,n)=>{if(e._n)return e;const s=at((...r)=>qd(e(...r)),n);return s._c=!1,s},Ey=(t,e,n)=>{const s=t._ctx;for(const r in t){if(Ud(r))continue;const i=t[r];if(Ye(i))e[r]=sw(r,i,s);else if(i!=null){const o=qd(i);e[r]=()=>o}}},Oy=(t,e)=>{const n=qd(e);t.slots.default=()=>n},My=(t,e,n)=>{for(const s in e)(n||!Ud(s))&&(t[s]=e[s])},rw=(t,e,n)=>{const s=t.slots=Cy();if(t.vnode.shapeFlag&32){const r=e._;r?(My(s,e,n),n&&Lm(s,"_",r,!0)):Ey(e,s)}else e&&Oy(t,e)},iw=(t,e,n)=>{const{vnode:s,slots:r}=t;let i=!0,o=mt;if(s.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:My(r,e,n):(i=!e.$stable,Ey(e,r)),o=e}else e&&(Oy(t,e),o={default:1});if(i)for(const a in r)!Ud(a)&&o[a]==null&&delete r[a]},fn=bw;function ow(t){return aw(t)}function aw(t,e){const n=Yl();n.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:f,nextSibling:p,setScopeId:m=os,insertStaticContent:v}=t,_=(M,$,Q,le=null,ue=null,ce=null,Ie=void 0,xe=null,ve=!!$.dynamicChildren)=>{if(M===$)return;M&&!ui(M,$)&&(le=ae(M),_e(M,ue,ce,!0),M=null),$.patchFlag===-2&&(ve=!1,$.dynamicChildren=null);const{type:fe,ref:Ne,shapeFlag:Ee}=$;switch(fe){case sc:k(M,$,Q,le);break;case Hn:S(M,$,Q,le);break;case ll:M==null&&P($,Q,le,Ie);break;case et:j(M,$,Q,le,ue,ce,Ie,xe,ve);break;default:Ee&1?I(M,$,Q,le,ue,ce,Ie,xe,ve):Ee&6?de(M,$,Q,le,ue,ce,Ie,xe,ve):(Ee&64||Ee&128)&&fe.process(M,$,Q,le,ue,ce,Ie,xe,ve,Fe)}Ne!=null&&ue?wo(Ne,M&&M.ref,ce,$||M,!$):Ne==null&&M&&M.ref!=null&&wo(M.ref,null,ce,M,!0)},k=(M,$,Q,le)=>{if(M==null)s($.el=a($.children),Q,le);else{const ue=$.el=M.el;$.children!==M.children&&c(ue,$.children)}},S=(M,$,Q,le)=>{M==null?s($.el=l($.children||""),Q,le):$.el=M.el},P=(M,$,Q,le)=>{[M.el,M.anchor]=v(M.children,$,Q,le,M.el,M.anchor)},E=({el:M,anchor:$},Q,le)=>{let ue;for(;M&&M!==$;)ue=p(M),s(M,Q,le),M=ue;s($,Q,le)},C=({el:M,anchor:$})=>{let Q;for(;M&&M!==$;)Q=p(M),r(M),M=Q;r($)},I=(M,$,Q,le,ue,ce,Ie,xe,ve)=>{$.type==="svg"?Ie="svg":$.type==="math"&&(Ie="mathml"),M==null?T($,Q,le,ue,ce,Ie,xe,ve):A(M,$,ue,ce,Ie,xe,ve)},T=(M,$,Q,le,ue,ce,Ie,xe)=>{let ve,fe;const{props:Ne,shapeFlag:Ee,transition:je,dirs:Ue}=M;if(ve=M.el=o(M.type,ce,Ne&&Ne.is,Ne),Ee&8?u(ve,M.children):Ee&16&&V(M.children,ve,null,le,ue,iu(M,ce),Ie,xe),Ue&&gr(M,null,le,"created"),G(ve,M,M.scopeId,Ie,le),Ne){for(const it in Ne)it!=="value"&&!yo(it)&&i(ve,it,null,Ne[it],ce,le);"value"in Ne&&i(ve,"value",null,Ne.value,ce),(fe=Ne.onVnodeBeforeMount)&&Jn(fe,le,M)}Ue&&gr(M,null,le,"beforeMount");const Ge=lw(ue,je);Ge&&je.beforeEnter(ve),s(ve,$,Q),((fe=Ne&&Ne.onVnodeMounted)||Ge||Ue)&&fn(()=>{fe&&Jn(fe,le,M),Ge&&je.enter(ve),Ue&&gr(M,null,le,"mounted")},ue)},G=(M,$,Q,le,ue)=>{if(Q&&m(M,Q),le)for(let ce=0;ce<le.length;ce++)m(M,le[ce]);if(ue){let ce=ue.subTree;if($===ce||$y(ce.type)&&(ce.ssContent===$||ce.ssFallback===$)){const Ie=ue.vnode;G(M,Ie,Ie.scopeId,Ie.slotScopeIds,ue.parent)}}},V=(M,$,Q,le,ue,ce,Ie,xe,ve=0)=>{for(let fe=ve;fe<M.length;fe++){const Ne=M[fe]=xe?Ks(M[fe]):is(M[fe]);_(null,Ne,$,Q,le,ue,ce,Ie,xe)}},A=(M,$,Q,le,ue,ce,Ie)=>{const xe=$.el=M.el;let{patchFlag:ve,dynamicChildren:fe,dirs:Ne}=$;ve|=M.patchFlag&16;const Ee=M.props||mt,je=$.props||mt;let Ue;if(Q&&mr(Q,!1),(Ue=je.onVnodeBeforeUpdate)&&Jn(Ue,Q,$,M),Ne&&gr($,M,Q,"beforeUpdate"),Q&&mr(Q,!0),(Ee.innerHTML&&je.innerHTML==null||Ee.textContent&&je.textContent==null)&&u(xe,""),fe?Z(M.dynamicChildren,fe,xe,Q,le,iu($,ue),ce):Ie||te(M,$,xe,null,Q,le,iu($,ue),ce,!1),ve>0){if(ve&16)K(xe,Ee,je,Q,ue);else if(ve&2&&Ee.class!==je.class&&i(xe,"class",null,je.class,ue),ve&4&&i(xe,"style",Ee.style,je.style,ue),ve&8){const Ge=$.dynamicProps;for(let it=0;it<Ge.length;it++){const lt=Ge[it],Rt=Ee[lt],jt=je[lt];(jt!==Rt||lt==="value")&&i(xe,lt,Rt,jt,ue,Q)}}ve&1&&M.children!==$.children&&u(xe,$.children)}else!Ie&&fe==null&&K(xe,Ee,je,Q,ue);((Ue=je.onVnodeUpdated)||Ne)&&fn(()=>{Ue&&Jn(Ue,Q,$,M),Ne&&gr($,M,Q,"updated")},le)},Z=(M,$,Q,le,ue,ce,Ie)=>{for(let xe=0;xe<$.length;xe++){const ve=M[xe],fe=$[xe],Ne=ve.el&&(ve.type===et||!ui(ve,fe)||ve.shapeFlag&198)?f(ve.el):Q;_(ve,fe,Ne,null,le,ue,ce,Ie,!0)}},K=(M,$,Q,le,ue)=>{if($!==Q){if($!==mt)for(const ce in $)!yo(ce)&&!(ce in Q)&&i(M,ce,$[ce],null,ue,le);for(const ce in Q){if(yo(ce))continue;const Ie=Q[ce],xe=$[ce];Ie!==xe&&ce!=="value"&&i(M,ce,xe,Ie,ue,le)}"value"in Q&&i(M,"value",$.value,Q.value,ue)}},j=(M,$,Q,le,ue,ce,Ie,xe,ve)=>{const fe=$.el=M?M.el:a(""),Ne=$.anchor=M?M.anchor:a("");let{patchFlag:Ee,dynamicChildren:je,slotScopeIds:Ue}=$;Ue&&(xe=xe?xe.concat(Ue):Ue),M==null?(s(fe,Q,le),s(Ne,Q,le),V($.children||[],Q,Ne,ue,ce,Ie,xe,ve)):Ee>0&&Ee&64&&je&&M.dynamicChildren?(Z(M.dynamicChildren,je,Q,ue,ce,Ie,xe),($.key!=null||ue&&$===ue.subTree)&&Wd(M,$,!0)):te(M,$,Q,Ne,ue,ce,Ie,xe,ve)},de=(M,$,Q,le,ue,ce,Ie,xe,ve)=>{$.slotScopeIds=xe,M==null?$.shapeFlag&512?ue.ctx.activate($,Q,le,Ie,ve):ge($,Q,le,ue,ce,Ie,ve):Ae(M,$,ve)},ge=(M,$,Q,le,ue,ce,Ie)=>{const xe=M.component=Sw(M,le,ue);if(yy(M)&&(xe.ctx.renderer=Fe),Cw(xe,!1,Ie),xe.asyncDep){if(ue&&ue.registerDep(xe,Se,Ie),!M.el){const ve=xe.subTree=qe(Hn);S(null,ve,$,Q),M.placeholder=ve.el}}else Se(xe,M,$,Q,ue,ce,Ie)},Ae=(M,$,Q)=>{const le=$.component=M.component;if(yw(M,$,Q))if(le.asyncDep&&!le.asyncResolved){Pe(le,$,Q);return}else le.next=$,le.update();else $.el=M.el,le.vnode=$},Se=(M,$,Q,le,ue,ce,Ie)=>{const xe=()=>{if(M.isMounted){let{next:Ee,bu:je,u:Ue,parent:Ge,vnode:it}=M;{const Nt=Ty(M);if(Nt){Ee&&(Ee.el=it.el,Pe(M,Ee,Ie)),Nt.asyncDep.then(()=>{M.isUnmounted||xe()});return}}let lt=Ee,Rt;mr(M,!1),Ee?(Ee.el=it.el,Pe(M,Ee,Ie)):Ee=it,je&&ol(je),(Rt=Ee.props&&Ee.props.onVnodeBeforeUpdate)&&Jn(Rt,Ge,Ee,it),mr(M,!0);const jt=wh(M),cn=M.subTree;M.subTree=jt,_(cn,jt,f(cn.el),ae(cn),M,ue,ce),Ee.el=jt.el,lt===null&&vw(M,jt.el),Ue&&fn(Ue,ue),(Rt=Ee.props&&Ee.props.onVnodeUpdated)&&fn(()=>Jn(Rt,Ge,Ee,it),ue)}else{let Ee;const{el:je,props:Ue}=$,{bm:Ge,m:it,parent:lt,root:Rt,type:jt}=M,cn=vi($);mr(M,!1),Ge&&ol(Ge),!cn&&(Ee=Ue&&Ue.onVnodeBeforeMount)&&Jn(Ee,lt,$),mr(M,!0);{Rt.ce&&Rt.ce._def.shadowRoot!==!1&&Rt.ce._injectChildStyle(jt);const Nt=M.subTree=wh(M);_(null,Nt,Q,le,M,ue,ce),$.el=Nt.el}if(it&&fn(it,ue),!cn&&(Ee=Ue&&Ue.onVnodeMounted)){const Nt=$;fn(()=>Jn(Ee,lt,Nt),ue)}($.shapeFlag&256||lt&&vi(lt.vnode)&&lt.vnode.shapeFlag&256)&&M.a&&fn(M.a,ue),M.isMounted=!0,$=Q=le=null}};M.scope.on();const ve=M.effect=new qm(xe);M.scope.off();const fe=M.update=ve.run.bind(ve),Ne=M.job=ve.runIfDirty.bind(ve);Ne.i=M,Ne.id=M.uid,ve.scheduler=()=>zd(Ne),mr(M,!0),fe()},Pe=(M,$,Q)=>{$.component=M;const le=M.vnode.props;M.vnode=$,M.next=null,tw(M,$.props,le,Q),iw(M,$.children,Q),Is(),uh(M),Es()},te=(M,$,Q,le,ue,ce,Ie,xe,ve=!1)=>{const fe=M&&M.children,Ne=M?M.shapeFlag:0,Ee=$.children,{patchFlag:je,shapeFlag:Ue}=$;if(je>0){if(je&128){Y(fe,Ee,Q,le,ue,ce,Ie,xe,ve);return}else if(je&256){ee(fe,Ee,Q,le,ue,ce,Ie,xe,ve);return}}Ue&8?(Ne&16&&rt(fe,ue,ce),Ee!==fe&&u(Q,Ee)):Ne&16?Ue&16?Y(fe,Ee,Q,le,ue,ce,Ie,xe,ve):rt(fe,ue,ce,!0):(Ne&8&&u(Q,""),Ue&16&&V(Ee,Q,le,ue,ce,Ie,xe,ve))},ee=(M,$,Q,le,ue,ce,Ie,xe,ve)=>{M=M||gi,$=$||gi;const fe=M.length,Ne=$.length,Ee=Math.min(fe,Ne);let je;for(je=0;je<Ee;je++){const Ue=$[je]=ve?Ks($[je]):is($[je]);_(M[je],Ue,Q,null,ue,ce,Ie,xe,ve)}fe>Ne?rt(M,ue,ce,!0,!1,Ee):V($,Q,le,ue,ce,Ie,xe,ve,Ee)},Y=(M,$,Q,le,ue,ce,Ie,xe,ve)=>{let fe=0;const Ne=$.length;let Ee=M.length-1,je=Ne-1;for(;fe<=Ee&&fe<=je;){const Ue=M[fe],Ge=$[fe]=ve?Ks($[fe]):is($[fe]);if(ui(Ue,Ge))_(Ue,Ge,Q,null,ue,ce,Ie,xe,ve);else break;fe++}for(;fe<=Ee&&fe<=je;){const Ue=M[Ee],Ge=$[je]=ve?Ks($[je]):is($[je]);if(ui(Ue,Ge))_(Ue,Ge,Q,null,ue,ce,Ie,xe,ve);else break;Ee--,je--}if(fe>Ee){if(fe<=je){const Ue=je+1,Ge=Ue<Ne?$[Ue].el:le;for(;fe<=je;)_(null,$[fe]=ve?Ks($[fe]):is($[fe]),Q,Ge,ue,ce,Ie,xe,ve),fe++}}else if(fe>je)for(;fe<=Ee;)_e(M[fe],ue,ce,!0),fe++;else{const Ue=fe,Ge=fe,it=new Map;for(fe=Ge;fe<=je;fe++){const It=$[fe]=ve?Ks($[fe]):is($[fe]);It.key!=null&&it.set(It.key,fe)}let lt,Rt=0;const jt=je-Ge+1;let cn=!1,Nt=0;const Yn=new Array(jt);for(fe=0;fe<jt;fe++)Yn[fe]=0;for(fe=Ue;fe<=Ee;fe++){const It=M[fe];if(Rt>=jt){_e(It,ue,ce,!0);continue}let Re;if(It.key!=null)Re=it.get(It.key);else for(lt=Ge;lt<=je;lt++)if(Yn[lt-Ge]===0&&ui(It,$[lt])){Re=lt;break}Re===void 0?_e(It,ue,ce,!0):(Yn[Re-Ge]=fe+1,Re>=Nt?Nt=Re:cn=!0,_(It,$[Re],Q,null,ue,ce,Ie,xe,ve),Rt++)}const Gr=cn?cw(Yn):gi;for(lt=Gr.length-1,fe=jt-1;fe>=0;fe--){const It=Ge+fe,Re=$[It],Ts=$[It+1],Gn=It+1<Ne?Ts.el||Ts.placeholder:le;Yn[fe]===0?_(null,Re,Q,Gn,ue,ce,Ie,xe,ve):cn&&(lt<0||fe!==Gr[lt]?Le(Re,Q,Gn,2):lt--)}}},Le=(M,$,Q,le,ue=null)=>{const{el:ce,type:Ie,transition:xe,children:ve,shapeFlag:fe}=M;if(fe&6){Le(M.component.subTree,$,Q,le);return}if(fe&128){M.suspense.move($,Q,le);return}if(fe&64){Ie.move(M,$,Q,Fe);return}if(Ie===et){s(ce,$,Q);for(let Ee=0;Ee<ve.length;Ee++)Le(ve[Ee],$,Q,le);s(M.anchor,$,Q);return}if(Ie===ll){E(M,$,Q);return}if(le!==2&&fe&1&&xe)if(le===0)xe.beforeEnter(ce),s(ce,$,Q),fn(()=>xe.enter(ce),ue);else{const{leave:Ee,delayLeave:je,afterLeave:Ue}=xe,Ge=()=>{M.ctx.isUnmounted?r(ce):s(ce,$,Q)},it=()=>{ce._isLeaving&&ce[Ir](!0),Ee(ce,()=>{Ge(),Ue&&Ue()})};je?je(ce,Ge,it):it()}else s(ce,$,Q)},_e=(M,$,Q,le=!1,ue=!1)=>{const{type:ce,props:Ie,ref:xe,children:ve,dynamicChildren:fe,shapeFlag:Ne,patchFlag:Ee,dirs:je,cacheIndex:Ue}=M;if(Ee===-2&&(ue=!1),xe!=null&&(Is(),wo(xe,null,Q,M,!0),Es()),Ue!=null&&($.renderCache[Ue]=void 0),Ne&256){$.ctx.deactivate(M);return}const Ge=Ne&1&&je,it=!vi(M);let lt;if(it&&(lt=Ie&&Ie.onVnodeBeforeUnmount)&&Jn(lt,$,M),Ne&6)gt(M.component,Q,le);else{if(Ne&128){M.suspense.unmount(Q,le);return}Ge&&gr(M,null,$,"beforeUnmount"),Ne&64?M.type.remove(M,$,Q,Fe,le):fe&&!fe.hasOnce&&(ce!==et||Ee>0&&Ee&64)?rt(fe,$,Q,!1,!0):(ce===et&&Ee&384||!ue&&Ne&16)&&rt(ve,$,Q),le&&We(M)}(it&&(lt=Ie&&Ie.onVnodeUnmounted)||Ge)&&fn(()=>{lt&&Jn(lt,$,M),Ge&&gr(M,null,$,"unmounted")},Q)},We=M=>{const{type:$,el:Q,anchor:le,transition:ue}=M;if($===et){wt(Q,le);return}if($===ll){C(M);return}const ce=()=>{r(Q),ue&&!ue.persisted&&ue.afterLeave&&ue.afterLeave()};if(M.shapeFlag&1&&ue&&!ue.persisted){const{leave:Ie,delayLeave:xe}=ue,ve=()=>Ie(Q,ce);xe?xe(M.el,ce,ve):ve()}else ce()},wt=(M,$)=>{let Q;for(;M!==$;)Q=p(M),r(M),M=Q;r($)},gt=(M,$,Q)=>{const{bum:le,scope:ue,job:ce,subTree:Ie,um:xe,m:ve,a:fe}=M;_h(ve),_h(fe),le&&ol(le),ue.stop(),ce&&(ce.flags|=8,_e(Ie,M,$,Q)),xe&&fn(xe,$),fn(()=>{M.isUnmounted=!0},$)},rt=(M,$,Q,le=!1,ue=!1,ce=0)=>{for(let Ie=ce;Ie<M.length;Ie++)_e(M[Ie],$,Q,le,ue)},ae=M=>{if(M.shapeFlag&6)return ae(M.component.subTree);if(M.shapeFlag&128)return M.suspense.next();const $=p(M.anchor||M.el),Q=$&&$[fy];return Q?p(Q):$};let Me=!1;const se=(M,$,Q)=>{M==null?$._vnode&&_e($._vnode,null,null,!0):_($._vnode||null,M,$,null,null,null,Q),$._vnode=M,Me||(Me=!0,uh(),cy(),Me=!1)},Fe={p:_,um:_e,m:Le,r:We,mt:ge,mc:V,pc:te,pbc:Z,n:ae,o:t};return{render:se,hydrate:void 0,createApp:J0(se)}}function iu({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function mr({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function lw(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Wd(t,e,n=!1){const s=t.children,r=e.children;if(ze(s)&&ze(r))for(let i=0;i<s.length;i++){const o=s[i];let a=r[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[i]=Ks(r[i]),a.el=o.el),!n&&a.patchFlag!==-2&&Wd(o,a)),a.type===sc&&a.patchFlag!==-1&&(a.el=o.el),a.type===Hn&&!a.el&&(a.el=o.el)}}function cw(t){const e=t.slice(),n=[0];let s,r,i,o,a;const l=t.length;for(s=0;s<l;s++){const c=t[s];if(c!==0){if(r=n[n.length-1],t[r]<c){e[s]=r,n.push(s);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<c?i=a+1:o=a;c<t[n[i]]&&(i>0&&(e[s]=n[i-1]),n[i]=s)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function Ty(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Ty(e)}function _h(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const uw=Symbol.for("v-scx"),dw=()=>In(uw);function Ci(t,e){return Vd(t,null,e)}function Ht(t,e,n){return Vd(t,e,n)}function Vd(t,e,n=mt){const{immediate:s,deep:r,flush:i,once:o}=n,a=Bt({},n),l=e&&s||!e&&i!=="post";let c;if(jo){if(i==="sync"){const m=dw();c=m.__watcherHandles||(m.__watcherHandles=[])}else if(!l){const m=()=>{};return m.stop=os,m.resume=os,m.pause=os,m}}const u=on;a.call=(m,v,_)=>Vn(m,u,v,_);let f=!1;i==="post"?a.scheduler=m=>{fn(m,u&&u.suspense)}:i!=="sync"&&(f=!0,a.scheduler=(m,v)=>{v?m():zd(m)}),a.augmentJob=m=>{e&&(m.flags|=4),f&&(m.flags|=2,u&&(m.id=u.uid,m.i=u))};const p=x0(t,e,a);return jo&&(c?c.push(p):l&&p()),p}function fw(t,e,n){const s=this.proxy,r=At(t)?t.includes(".")?Dy(s,t):()=>s[t]:t.bind(s,s);let i;Ye(e)?i=e:(i=e.handler,n=e);const o=Jo(this),a=Vd(r,i.bind(s),n);return o(),a}function Dy(t,e){const n=e.split(".");return()=>{let s=t;for(let r=0;r<n.length&&s;r++)s=s[n[r]];return s}}const hw=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${En(e)}Modifiers`]||t[`${or(e)}Modifiers`];function pw(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||mt;let r=n;const i=e.startsWith("update:"),o=i&&hw(s,e.slice(7));o&&(o.trim&&(r=n.map(u=>At(u)?u.trim():u)),o.number&&(r=n.map(vl)));let a,l=s[a=il(e)]||s[a=il(En(e))];!l&&i&&(l=s[a=il(or(e))]),l&&Vn(l,t,6,r);const c=s[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Vn(c,t,6,r)}}function Ry(t,e,n=!1){const s=e.emitsCache,r=s.get(t);if(r!==void 0)return r;const i=t.emits;let o={},a=!1;if(!Ye(t)){const l=c=>{const u=Ry(c,e,!0);u&&(a=!0,Bt(o,u))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!a?(yt(t)&&s.set(t,null),null):(ze(i)?i.forEach(l=>o[l]=null):Bt(o,i),yt(t)&&s.set(t,o),o)}function nc(t,e){return!t||!Wl(e)?!1:(e=e.slice(2).replace(/Once$/,""),ft(t,e[0].toLowerCase()+e.slice(1))||ft(t,or(e))||ft(t,e))}function wh(t){const{type:e,vnode:n,proxy:s,withProxy:r,propsOptions:[i],slots:o,attrs:a,emit:l,render:c,renderCache:u,props:f,data:p,setupState:m,ctx:v,inheritAttrs:_}=t,k=kl(t);let S,P;try{if(n.shapeFlag&4){const C=r||s,I=C;S=is(c.call(I,C,u,f,m,p,v)),P=a}else{const C=e;S=is(C.length>1?C(f,{attrs:a,slots:o,emit:l}):C(f,null)),P=e.props?a:gw(a)}}catch(C){So.length=0,Zl(C,t,1),S=qe(Hn)}let E=S;if(P&&_!==!1){const C=Object.keys(P),{shapeFlag:I}=E;C.length&&I&7&&(i&&C.some(Ed)&&(P=mw(P,i)),E=rr(E,P,!1,!0))}return n.dirs&&(E=rr(E,null,!1,!0),E.dirs=E.dirs?E.dirs.concat(n.dirs):n.dirs),n.transition&&Fo(E,n.transition),S=E,kl(k),S}const gw=t=>{let e;for(const n in t)(n==="class"||n==="style"||Wl(n))&&((e||(e={}))[n]=t[n]);return e},mw=(t,e)=>{const n={};for(const s in t)(!Ed(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function yw(t,e,n){const{props:s,children:r,component:i}=t,{props:o,children:a,patchFlag:l}=e,c=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return s?xh(s,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let f=0;f<u.length;f++){const p=u[f];if(o[p]!==s[p]&&!nc(c,p))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?xh(s,o,c):!0:!!o;return!1}function xh(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(e[i]!==t[i]&&!nc(n,i))return!0}return!1}function vw({vnode:t,parent:e},n){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=n,e=e.parent;else break}}const $y=t=>t.__isSuspense;function bw(t,e){e&&e.pendingBranch?ze(t)?e.effects.push(...t):e.effects.push(t):C0(t)}const et=Symbol.for("v-fgt"),sc=Symbol.for("v-txt"),Hn=Symbol.for("v-cmt"),ll=Symbol.for("v-stc"),So=[];let Cn=null;function q(t=!1){So.push(Cn=t?null:[])}function _w(){So.pop(),Cn=So[So.length-1]||null}let Lo=1;function kh(t,e=!1){Lo+=t,t<0&&Cn&&e&&(Cn.hasOnce=!0)}function Fy(t){return t.dynamicChildren=Lo>0?Cn||gi:null,_w(),Lo>0&&Cn&&Cn.push(t),t}function J(t,e,n,s,r,i){return Fy(w(t,e,n,s,r,i,!0))}function Jt(t,e,n,s,r){return Fy(qe(t,e,n,s,r,!0))}function Bo(t){return t?t.__v_isVNode===!0:!1}function ui(t,e){return t.type===e.type&&t.key===e.key}const Ly=({key:t})=>t??null,cl=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?At(t)||Dt(t)||Ye(t)?{i:Xt,r:t,k:e,f:!!n}:t:null);function w(t,e=null,n=null,s=0,r=null,i=t===et?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Ly(e),ref:e&&cl(e),scopeId:dy,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Xt};return a?(Hd(l,n),i&128&&t.normalize(l)):n&&(l.shapeFlag|=At(n)?8:16),Lo>0&&!o&&Cn&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Cn.push(l),l}const qe=ww;function ww(t,e=null,n=null,s=0,r=null,i=!1){if((!t||t===q0)&&(t=Hn),Bo(t)){const a=rr(t,e,!0);return n&&Hd(a,n),Lo>0&&!i&&Cn&&(a.shapeFlag&6?Cn[Cn.indexOf(t)]=a:Cn.push(a)),a.patchFlag=-2,a}if(Ow(t)&&(t=t.__vccOpts),e){e=By(e);let{class:a,style:l}=e;a&&!At(a)&&(e.class=Pt(a)),yt(l)&&(Xo(l)&&!ze(l)&&(l=Bt({},l)),e.style=An(l))}const o=At(t)?1:$y(t)?128:P0(t)?64:yt(t)?4:Ye(t)?2:0;return w(t,e,n,s,r,o,i,!0)}function By(t){return t?Xo(t)||Py(t)?Bt({},t):t:null}function rr(t,e,n=!1,s=!1){const{props:r,ref:i,patchFlag:o,children:a,transition:l}=t,c=e?ls(r||{},e):r,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&Ly(c),ref:e&&e.ref?n&&i?ze(i)?i.concat(cl(e)):[i,cl(e)]:cl(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==et?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&rr(t.ssContent),ssFallback:t.ssFallback&&rr(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&s&&Fo(u,l.clone(u)),u}function bt(t=" ",e=0){return qe(sc,null,t,e)}function jy(t,e){const n=qe(ll,null,t);return n.staticCount=e,n}function ke(t="",e=!1){return e?(q(),Jt(Hn,null,t)):qe(Hn,null,t)}function is(t){return t==null||typeof t=="boolean"?qe(Hn):ze(t)?qe(et,null,t.slice()):Bo(t)?Ks(t):qe(sc,null,String(t))}function Ks(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:rr(t)}function Hd(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(ze(e))n=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),Hd(t,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!Py(e)?e._ctx=Xt:r===3&&Xt&&(Xt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Ye(e)?(e={default:e,_ctx:Xt},n=32):(e=String(e),s&64?(n=16,e=[bt(e)]):n=8);t.children=e,t.shapeFlag|=n}function ls(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=Pt([e.class,s.class]));else if(r==="style")e.style=An([e.style,s.style]);else if(Wl(r)){const i=e[r],o=s[r];o&&i!==o&&!(ze(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=s[r])}return e}function Jn(t,e,n,s=null){Vn(t,e,7,[n,s])}const xw=ky();let kw=0;function Sw(t,e,n){const s=t.type,r=(e?e.appContext:t.appContext)||xw,i={uid:kw++,vnode:t,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new zm(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Iy(s,r),emitsOptions:Ry(s,r),emit:null,emitted:null,propsDefaults:mt,inheritAttrs:s.inheritAttrs,ctx:mt,data:mt,props:mt,attrs:mt,slots:mt,refs:mt,setupState:mt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=pw.bind(null,i),t.ce&&t.ce(i),i}let on=null;const cs=()=>on||Xt;let Cl,Qu;{const t=Yl(),e=(n,s)=>{let r;return(r=t[n])||(r=t[n]=[]),r.push(s),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};Cl=e("__VUE_INSTANCE_SETTERS__",n=>on=n),Qu=e("__VUE_SSR_SETTERS__",n=>jo=n)}const Jo=t=>{const e=on;return Cl(t),t.scope.on(),()=>{t.scope.off(),Cl(e)}},Sh=()=>{on&&on.scope.off(),Cl(null)};function Ny(t){return t.vnode.shapeFlag&4}let jo=!1;function Cw(t,e=!1,n=!1){e&&Qu(e);const{props:s,children:r}=t.vnode,i=Ny(t);ew(t,s,i,e),rw(t,r,n||e);const o=i?Pw(t,e):void 0;return e&&Qu(!1),o}function Pw(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,V0);const{setup:s}=n;if(s){Is();const r=t.setupContext=s.length>1?Iw(t):null,i=Jo(t),o=Qo(s,t,0,[t.props,r]),a=Rm(o);if(Es(),i(),(a||t.sp)&&!vi(t)&&my(t),a){if(o.then(Sh,Sh),e)return o.then(l=>{Ch(t,l)}).catch(l=>{Zl(l,t,0)});t.asyncDep=o}else Ch(t,o)}else zy(t)}function Ch(t,e,n){Ye(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:yt(e)&&(t.setupState=oy(e)),zy(t)}function zy(t,e,n){const s=t.type;t.render||(t.render=s.render||os);{const r=Jo(t);Is();try{H0(t)}finally{Es(),r()}}}const Aw={get(t,e){return rn(t,"get",""),t[e]}};function Iw(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,Aw),slots:t.slots,emit:t.emit,expose:e}}function rc(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(oy(jd(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in xo)return xo[n](t)},has(e,n){return n in e||n in xo}})):t.proxy}function Ew(t,e=!0){return Ye(t)?t.displayName||t.name:t.name||e&&t.__name}function Ow(t){return Ye(t)&&"__vccOpts"in t}const He=(t,e)=>_0(t,e,jo);function As(t,e,n){const s=arguments.length;return s===2?yt(e)&&!ze(e)?Bo(e)?qe(t,null,[e]):qe(t,e):qe(t,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&Bo(n)&&(n=[n]),qe(t,e,n))}const Uy="3.5.20";/**
* @vue/runtime-dom v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ju;const Ph=typeof window<"u"&&window.trustedTypes;if(Ph)try{Ju=Ph.createPolicy("vue",{createHTML:t=>t})}catch{}const qy=Ju?t=>Ju.createHTML(t):t=>t,Mw="http://www.w3.org/2000/svg",Tw="http://www.w3.org/1998/Math/MathML",ks=typeof document<"u"?document:null,Ah=ks&&ks.createElement("template"),Dw={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const r=e==="svg"?ks.createElementNS(Mw,t):e==="mathml"?ks.createElementNS(Tw,t):n?ks.createElement(t,{is:n}):ks.createElement(t);return t==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:t=>ks.createTextNode(t),createComment:t=>ks.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>ks.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,r,i){const o=n?n.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),n),!(r===i||!(r=r.nextSibling)););else{Ah.innerHTML=qy(s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t);const a=Ah.content;if(s==="svg"||s==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},js="transition",Xi="animation",Pi=Symbol("_vtc"),Wy={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Rw=Bt({},O0,Wy),yr=(t,e=[])=>{ze(t)?t.forEach(n=>n(...e)):t&&t(...e)},Ih=t=>t?ze(t)?t.some(e=>e.length>1):t.length>1:!1;function $w(t){const e={};for(const j in t)j in Wy||(e[j]=t[j]);if(t.css===!1)return e;const{name:n="v",type:s,duration:r,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=i,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:m=`${n}-leave-to`}=t,v=Fw(r),_=v&&v[0],k=v&&v[1],{onBeforeEnter:S,onEnter:P,onEnterCancelled:E,onLeave:C,onLeaveCancelled:I,onBeforeAppear:T=S,onAppear:G=P,onAppearCancelled:V=E}=e,A=(j,de,ge,Ae)=>{j._enterCancelled=Ae,Us(j,de?u:a),Us(j,de?c:o),ge&&ge()},Z=(j,de)=>{j._isLeaving=!1,Us(j,f),Us(j,m),Us(j,p),de&&de()},K=j=>(de,ge)=>{const Ae=j?G:P,Se=()=>A(de,j,ge);yr(Ae,[de,Se]),Eh(()=>{Us(de,j?l:i),es(de,j?u:a),Ih(Ae)||Oh(de,s,_,Se)})};return Bt(e,{onBeforeEnter(j){yr(S,[j]),es(j,i),es(j,o)},onBeforeAppear(j){yr(T,[j]),es(j,l),es(j,c)},onEnter:K(!1),onAppear:K(!0),onLeave(j,de){j._isLeaving=!0;const ge=()=>Z(j,de);es(j,f),j._enterCancelled?(es(j,p),Zu()):(Zu(),es(j,p)),Eh(()=>{j._isLeaving&&(Us(j,f),es(j,m),Ih(C)||Oh(j,s,k,ge))}),yr(C,[j,ge])},onEnterCancelled(j){A(j,!1,void 0,!0),yr(E,[j])},onAppearCancelled(j){A(j,!0,void 0,!0),yr(V,[j])},onLeaveCancelled(j){Z(j),yr(I,[j])}})}function Fw(t){if(t==null)return null;if(yt(t))return[ou(t.enter),ou(t.leave)];{const e=ou(t);return[e,e]}}function ou(t){return N_(t)}function es(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[Pi]||(t[Pi]=new Set)).add(e)}function Us(t,e){e.split(/\s+/).forEach(s=>s&&t.classList.remove(s));const n=t[Pi];n&&(n.delete(e),n.size||(t[Pi]=void 0))}function Eh(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let Lw=0;function Oh(t,e,n,s){const r=t._endId=++Lw,i=()=>{r===t._endId&&s()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:a,propCount:l}=Vy(t,e);if(!o)return s();const c=o+"end";let u=0;const f=()=>{t.removeEventListener(c,p),i()},p=m=>{m.target===t&&++u>=l&&f()};setTimeout(()=>{u<l&&f()},a+1),t.addEventListener(c,p)}function Vy(t,e){const n=window.getComputedStyle(t),s=v=>(n[v]||"").split(", "),r=s(`${js}Delay`),i=s(`${js}Duration`),o=Mh(r,i),a=s(`${Xi}Delay`),l=s(`${Xi}Duration`),c=Mh(a,l);let u=null,f=0,p=0;e===js?o>0&&(u=js,f=o,p=i.length):e===Xi?c>0&&(u=Xi,f=c,p=l.length):(f=Math.max(o,c),u=f>0?o>c?js:Xi:null,p=u?u===js?i.length:l.length:0);const m=u===js&&/\b(transform|all)(,|$)/.test(s(`${js}Property`).toString());return{type:u,timeout:f,propCount:p,hasTransform:m}}function Mh(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,s)=>Th(n)+Th(t[s])))}function Th(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function Zu(){return document.body.offsetHeight}function Bw(t,e,n){const s=t[Pi];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Pl=Symbol("_vod"),Hy=Symbol("_vsh"),jw={name:"show",beforeMount(t,{value:e},{transition:n}){t[Pl]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Qi(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:s}){!e!=!n&&(s?e?(s.beforeEnter(t),Qi(t,!0),s.enter(t)):s.leave(t,()=>{Qi(t,!1)}):Qi(t,e))},beforeUnmount(t,{value:e}){Qi(t,e)}};function Qi(t,e){t.style.display=e?t[Pl]:"none",t[Hy]=!e}const Nw=Symbol(""),zw=/(^|;)\s*display\s*:/;function Uw(t,e,n){const s=t.style,r=At(n);let i=!1;if(n&&!r){if(e)if(At(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&ul(s,a,"")}else for(const o in e)n[o]==null&&ul(s,o,"");for(const o in n)o==="display"&&(i=!0),ul(s,o,n[o])}else if(r){if(e!==n){const o=s[Nw];o&&(n+=";"+o),s.cssText=n,i=zw.test(n)}}else e&&t.removeAttribute("style");Pl in t&&(t[Pl]=i?s.display:"",t[Hy]&&(s.display="none"))}const Dh=/\s*!important$/;function ul(t,e,n){if(ze(n))n.forEach(s=>ul(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=qw(t,e);Dh.test(n)?t.setProperty(or(s),n.replace(Dh,""),"important"):t[s]=n}}const Rh=["Webkit","Moz","ms"],au={};function qw(t,e){const n=au[e];if(n)return n;let s=En(e);if(s!=="filter"&&s in t)return au[e]=s;s=Kl(s);for(let r=0;r<Rh.length;r++){const i=Rh[r]+s;if(i in t)return au[e]=i}return e}const $h="http://www.w3.org/1999/xlink";function Fh(t,e,n,s,r,i=K_(e)){s&&e.startsWith("xlink:")?n==null?t.removeAttributeNS($h,e.slice(6,e.length)):t.setAttributeNS($h,e,n):n==null||i&&!Bm(n)?t.removeAttribute(e):t.setAttribute(e,i?"":Wn(n)?String(n):n)}function Lh(t,e,n,s,r){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?qy(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=Bm(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(r||e)}function Tr(t,e,n,s){t.addEventListener(e,n,s)}function Ww(t,e,n,s){t.removeEventListener(e,n,s)}const Bh=Symbol("_vei");function Vw(t,e,n,s,r=null){const i=t[Bh]||(t[Bh]={}),o=i[e];if(s&&o)o.value=s;else{const[a,l]=Hw(e);if(s){const c=i[e]=Gw(s,r);Tr(t,a,c,l)}else o&&(Ww(t,a,o,l),i[e]=void 0)}}const jh=/(?:Once|Passive|Capture)$/;function Hw(t){let e;if(jh.test(t)){e={};let s;for(;s=t.match(jh);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):or(t.slice(2)),e]}let lu=0;const Kw=Promise.resolve(),Yw=()=>lu||(Kw.then(()=>lu=0),lu=Date.now());function Gw(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;Vn(Xw(s,n.value),e,5,[s])};return n.value=t,n.attached=Yw(),n}function Xw(t,e){if(ze(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const Nh=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Qw=(t,e,n,s,r,i)=>{const o=r==="svg";e==="class"?Bw(t,s,o):e==="style"?Uw(t,n,s):Wl(e)?Ed(e)||Vw(t,e,n,s,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Jw(t,e,s,o))?(Lh(t,e,s),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Fh(t,e,s,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!At(s))?Lh(t,En(e),s,i,e):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),Fh(t,e,s,o))};function Jw(t,e,n,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&Nh(e)&&Ye(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return Nh(e)&&At(n)?!1:e in t}const Ky=new WeakMap,Yy=new WeakMap,Al=Symbol("_moveCb"),zh=Symbol("_enterCb"),Zw=t=>(delete t.props.mode,t),ex=Zw({name:"TransitionGroup",props:Bt({},Rw,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=cs(),s=E0();let r,i;return by(()=>{if(!r.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!ix(r[0].el,n.vnode.el,o)){r=[];return}r.forEach(nx),r.forEach(sx);const a=r.filter(rx);Zu(),a.forEach(l=>{const c=l.el,u=c.style;es(c,o),u.transform=u.webkitTransform=u.transitionDuration="";const f=c[Al]=p=>{p&&p.target!==c||(!p||/transform$/.test(p.propertyName))&&(c.removeEventListener("transitionend",f),c[Al]=null,Us(c,o))};c.addEventListener("transitionend",f)}),r=[]}),()=>{const o=tt(t),a=$w(o);let l=o.tag||et;if(r=[],i)for(let c=0;c<i.length;c++){const u=i[c];u.el&&u.el instanceof Element&&(r.push(u),Fo(u,Hu(u,a,s,n)),Ky.set(u,u.el.getBoundingClientRect()))}i=e.default?gy(e.default()):[];for(let c=0;c<i.length;c++){const u=i[c];u.key!=null&&Fo(u,Hu(u,a,s,n))}return qe(l,null,i)}}}),tx=ex;function nx(t){const e=t.el;e[Al]&&e[Al](),e[zh]&&e[zh]()}function sx(t){Yy.set(t,t.el.getBoundingClientRect())}function rx(t){const e=Ky.get(t),n=Yy.get(t),s=e.left-n.left,r=e.top-n.top;if(s||r){const i=t.el.style;return i.transform=i.webkitTransform=`translate(${s}px,${r}px)`,i.transitionDuration="0s",t}}function ix(t,e,n){const s=t.cloneNode(),r=t[Pi];r&&r.forEach(a=>{a.split(/\s+/).forEach(l=>l&&s.classList.remove(l))}),n.split(/\s+/).forEach(a=>a&&s.classList.add(a)),s.style.display="none";const i=e.nodeType===1?e:e.parentNode;i.appendChild(s);const{hasTransform:o}=Vy(s);return i.removeChild(s),o}const Il=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ze(e)?n=>ol(e,n):e};function ox(t){t.target.composing=!0}function Uh(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const bi=Symbol("_assign"),El={created(t,{modifiers:{lazy:e,trim:n,number:s}},r){t[bi]=Il(r);const i=s||r.props&&r.props.type==="number";Tr(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),i&&(a=vl(a)),t[bi](a)}),n&&Tr(t,"change",()=>{t.value=t.value.trim()}),e||(Tr(t,"compositionstart",ox),Tr(t,"compositionend",Uh),Tr(t,"change",Uh))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:s,trim:r,number:i}},o){if(t[bi]=Il(o),t.composing)return;const a=(i||t.type==="number")&&!/^0\d/.test(t.value)?vl(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(s&&e===n||r&&t.value.trim()===l)||(t.value=l))}},qh={deep:!0,created(t,{value:e,modifiers:{number:n}},s){const r=Vl(e);Tr(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?vl(Ol(o)):Ol(o));t[bi](t.multiple?r?new Set(i):i:i[0]),t._assigning=!0,an(()=>{t._assigning=!1})}),t[bi]=Il(s)},mounted(t,{value:e}){Wh(t,e)},beforeUpdate(t,e,n){t[bi]=Il(n)},updated(t,{value:e}){t._assigning||Wh(t,e)}};function Wh(t,e){const n=t.multiple,s=ze(e);if(!(n&&!s&&!Vl(e))){for(let r=0,i=t.options.length;r<i;r++){const o=t.options[r],a=Ol(o);if(n)if(s){const l=typeof a;l==="string"||l==="number"?o.selected=e.some(c=>String(c)===String(a)):o.selected=G_(e,a)>-1}else o.selected=e.has(a);else if(Gl(Ol(o),e)){t.selectedIndex!==r&&(t.selectedIndex=r);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Ol(t){return"_value"in t?t._value:t.value}const ax=["ctrl","shift","alt","meta"],lx={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>ax.some(n=>t[`${n}Key`]&&!e.includes(n))},dl=(t,e)=>{const n=t._withMods||(t._withMods={}),s=e.join(".");return n[s]||(n[s]=((r,...i)=>{for(let o=0;o<e.length;o++){const a=lx[e[o]];if(a&&a(r,e))return}return t(r,...i)}))},cx={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Vh=(t,e)=>{const n=t._withKeys||(t._withKeys={}),s=e.join(".");return n[s]||(n[s]=(r=>{if(!("key"in r))return;const i=or(r.key);if(e.some(o=>o===i||cx[o]===i))return t(r)}))},ux=Bt({patchProp:Qw},Dw);let Hh;function dx(){return Hh||(Hh=ow(ux))}const fx=((...t)=>{const e=dx().createApp(...t),{mount:n}=e;return e.mount=s=>{const r=px(s);if(!r)return;const i=e._component;!Ye(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=n(r,!1,hx(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e});function hx(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function px(t){return At(t)?document.querySelector(t):t}const gx="/mtg-pwa/icons/icon-256.png";/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const di=typeof document<"u";function Gy(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function mx(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&Gy(t.default)}const dt=Object.assign;function cu(t,e){const n={};for(const s in e){const r=e[s];n[s]=Kn(r)?r.map(t):t(r)}return n}const Co=()=>{},Kn=Array.isArray,Xy=/#/g,yx=/&/g,vx=/\//g,bx=/=/g,_x=/\?/g,Qy=/\+/g,wx=/%5B/g,xx=/%5D/g,Jy=/%5E/g,kx=/%60/g,Zy=/%7B/g,Sx=/%7C/g,ev=/%7D/g,Cx=/%20/g;function Kd(t){return encodeURI(""+t).replace(Sx,"|").replace(wx,"[").replace(xx,"]")}function Px(t){return Kd(t).replace(Zy,"{").replace(ev,"}").replace(Jy,"^")}function ed(t){return Kd(t).replace(Qy,"%2B").replace(Cx,"+").replace(Xy,"%23").replace(yx,"%26").replace(kx,"`").replace(Zy,"{").replace(ev,"}").replace(Jy,"^")}function Ax(t){return ed(t).replace(bx,"%3D")}function Ix(t){return Kd(t).replace(Xy,"%23").replace(_x,"%3F")}function Ex(t){return t==null?"":Ix(t).replace(vx,"%2F")}function No(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const Ox=/\/$/,Mx=t=>t.replace(Ox,"");function uu(t,e,n="/"){let s,r={},i="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(s=e.slice(0,l),i=e.slice(l+1,a>-1?a:e.length),r=t(i)),a>-1&&(s=s||e.slice(0,a),o=e.slice(a,e.length)),s=$x(s??e,n),{fullPath:s+(i&&"?")+i+o,path:s,query:r,hash:No(o)}}function Tx(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Kh(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function Dx(t,e,n){const s=e.matched.length-1,r=n.matched.length-1;return s>-1&&s===r&&Ai(e.matched[s],n.matched[r])&&tv(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Ai(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function tv(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!Rx(t[n],e[n]))return!1;return!0}function Rx(t,e){return Kn(t)?Yh(t,e):Kn(e)?Yh(e,t):t===e}function Yh(t,e){return Kn(e)?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function $x(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),s=t.split("/"),r=s[s.length-1];(r===".."||r===".")&&s.push("");let i=n.length-1,o,a;for(o=0;o<s.length;o++)if(a=s[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+s.slice(o).join("/")}const Ns={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var zo;(function(t){t.pop="pop",t.push="push"})(zo||(zo={}));var Po;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Po||(Po={}));function Fx(t){if(!t)if(di){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),Mx(t)}const Lx=/^[^#]+#/;function Bx(t,e){return t.replace(Lx,"#")+e}function jx(t,e){const n=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:e.behavior,left:s.left-n.left-(e.left||0),top:s.top-n.top-(e.top||0)}}const ic=()=>({left:window.scrollX,top:window.scrollY});function Nx(t){let e;if("el"in t){const n=t.el,s=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;e=jx(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Gh(t,e){return(history.state?history.state.position-e:-1)+t}const td=new Map;function zx(t,e){td.set(t,e)}function Ux(t){const e=td.get(t);return td.delete(t),e}let qx=()=>location.protocol+"//"+location.host;function nv(t,e){const{pathname:n,search:s,hash:r}=e,i=t.indexOf("#");if(i>-1){let a=r.includes(t.slice(i))?t.slice(i).length:1,l=r.slice(a);return l[0]!=="/"&&(l="/"+l),Kh(l,"")}return Kh(n,t)+s+r}function Wx(t,e,n,s){let r=[],i=[],o=null;const a=({state:p})=>{const m=nv(t,location),v=n.value,_=e.value;let k=0;if(p){if(n.value=m,e.value=p,o&&o===v){o=null;return}k=_?p.position-_.position:0}else s(m);r.forEach(S=>{S(n.value,v,{delta:k,type:zo.pop,direction:k?k>0?Po.forward:Po.back:Po.unknown})})};function l(){o=n.value}function c(p){r.push(p);const m=()=>{const v=r.indexOf(p);v>-1&&r.splice(v,1)};return i.push(m),m}function u(){const{history:p}=window;p.state&&p.replaceState(dt({},p.state,{scroll:ic()}),"")}function f(){for(const p of i)p();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:f}}function Xh(t,e,n,s=!1,r=!1){return{back:t,current:e,forward:n,replaced:s,position:window.history.length,scroll:r?ic():null}}function Vx(t){const{history:e,location:n}=window,s={value:nv(t,n)},r={value:e.state};r.value||i(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,c,u){const f=t.indexOf("#"),p=f>-1?(n.host&&document.querySelector("base")?t:t.slice(f))+l:qx()+t+l;try{e[u?"replaceState":"pushState"](c,"",p),r.value=c}catch(m){console.error(m),n[u?"replace":"assign"](p)}}function o(l,c){const u=dt({},e.state,Xh(r.value.back,l,r.value.forward,!0),c,{position:r.value.position});i(l,u,!0),s.value=l}function a(l,c){const u=dt({},r.value,e.state,{forward:l,scroll:ic()});i(u.current,u,!0);const f=dt({},Xh(s.value,l,null),{position:u.position+1},c);i(l,f,!1),s.value=l}return{location:s,state:r,push:a,replace:o}}function Hx(t){t=Fx(t);const e=Vx(t),n=Wx(t,e.state,e.location,e.replace);function s(i,o=!0){o||n.pauseListeners(),history.go(i)}const r=dt({location:"",base:t,go:s,createHref:Bx.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function Kx(t){return typeof t=="string"||t&&typeof t=="object"}function sv(t){return typeof t=="string"||typeof t=="symbol"}const rv=Symbol("");var Qh;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Qh||(Qh={}));function Ii(t,e){return dt(new Error,{type:t,[rv]:!0},e)}function ps(t,e){return t instanceof Error&&rv in t&&(e==null||!!(t.type&e))}const Jh="[^/]+?",Yx={sensitive:!1,strict:!1,start:!0,end:!0},Gx=/[.+*?^${}()[\]/\\]/g;function Xx(t,e){const n=dt({},Yx,e),s=[];let r=n.start?"^":"";const i=[];for(const c of t){const u=c.length?[]:[90];n.strict&&!c.length&&(r+="/");for(let f=0;f<c.length;f++){const p=c[f];let m=40+(n.sensitive?.25:0);if(p.type===0)f||(r+="/"),r+=p.value.replace(Gx,"\\$&"),m+=40;else if(p.type===1){const{value:v,repeatable:_,optional:k,regexp:S}=p;i.push({name:v,repeatable:_,optional:k});const P=S||Jh;if(P!==Jh){m+=10;try{new RegExp(`(${P})`)}catch(C){throw new Error(`Invalid custom RegExp for param "${v}" (${P}): `+C.message)}}let E=_?`((?:${P})(?:/(?:${P}))*)`:`(${P})`;f||(E=k&&c.length<2?`(?:/${E})`:"/"+E),k&&(E+="?"),r+=E,m+=20,k&&(m+=-8),_&&(m+=-20),P===".*"&&(m+=-50)}u.push(m)}s.push(u)}if(n.strict&&n.end){const c=s.length-1;s[c][s[c].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function a(c){const u=c.match(o),f={};if(!u)return null;for(let p=1;p<u.length;p++){const m=u[p]||"",v=i[p-1];f[v.name]=m&&v.repeatable?m.split("/"):m}return f}function l(c){let u="",f=!1;for(const p of t){(!f||!u.endsWith("/"))&&(u+="/"),f=!1;for(const m of p)if(m.type===0)u+=m.value;else if(m.type===1){const{value:v,repeatable:_,optional:k}=m,S=v in c?c[v]:"";if(Kn(S)&&!_)throw new Error(`Provided param "${v}" is an array but it is not repeatable (* or + modifiers)`);const P=Kn(S)?S.join("/"):S;if(!P)if(k)p.length<2&&(u.endsWith("/")?u=u.slice(0,-1):f=!0);else throw new Error(`Missing required param "${v}"`);u+=P}}return u||"/"}return{re:o,score:s,keys:i,parse:a,stringify:l}}function Qx(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=e[n]-t[n];if(s)return s;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function iv(t,e){let n=0;const s=t.score,r=e.score;for(;n<s.length&&n<r.length;){const i=Qx(s[n],r[n]);if(i)return i;n++}if(Math.abs(r.length-s.length)===1){if(Zh(s))return 1;if(Zh(r))return-1}return r.length-s.length}function Zh(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const Jx={type:0,value:""},Zx=/[a-zA-Z0-9_]/;function e1(t){if(!t)return[[]];if(t==="/")return[[Jx]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(m){throw new Error(`ERR (${n})/"${c}": ${m}`)}let n=0,s=n;const r=[];let i;function o(){i&&r.push(i),i=[]}let a=0,l,c="",u="";function f(){c&&(n===0?i.push({type:0,value:c}):n===1||n===2||n===3?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function p(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){s=n,n=4;continue}switch(n){case 0:l==="/"?(c&&f(),o()):l===":"?(f(),n=1):p();break;case 4:p(),n=s;break;case 1:l==="("?n=2:Zx.test(l)?p():(f(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:n=3:u+=l;break;case 3:f(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${c}"`),f(),o(),r}function t1(t,e,n){const s=Xx(e1(t.path),n),r=dt(s,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function n1(t,e){const n=[],s=new Map;e=sp({strict:!1,end:!0,sensitive:!1},e);function r(f){return s.get(f)}function i(f,p,m){const v=!m,_=tp(f);_.aliasOf=m&&m.record;const k=sp(e,f),S=[_];if("alias"in f){const C=typeof f.alias=="string"?[f.alias]:f.alias;for(const I of C)S.push(tp(dt({},_,{components:m?m.record.components:_.components,path:I,aliasOf:m?m.record:_})))}let P,E;for(const C of S){const{path:I}=C;if(p&&I[0]!=="/"){const T=p.record.path,G=T[T.length-1]==="/"?"":"/";C.path=p.record.path+(I&&G+I)}if(P=t1(C,p,k),m?m.alias.push(P):(E=E||P,E!==P&&E.alias.push(P),v&&f.name&&!np(P)&&o(f.name)),ov(P)&&l(P),_.children){const T=_.children;for(let G=0;G<T.length;G++)i(T[G],P,m&&m.children[G])}m=m||P}return E?()=>{o(E)}:Co}function o(f){if(sv(f)){const p=s.get(f);p&&(s.delete(f),n.splice(n.indexOf(p),1),p.children.forEach(o),p.alias.forEach(o))}else{const p=n.indexOf(f);p>-1&&(n.splice(p,1),f.record.name&&s.delete(f.record.name),f.children.forEach(o),f.alias.forEach(o))}}function a(){return n}function l(f){const p=i1(f,n);n.splice(p,0,f),f.record.name&&!np(f)&&s.set(f.record.name,f)}function c(f,p){let m,v={},_,k;if("name"in f&&f.name){if(m=s.get(f.name),!m)throw Ii(1,{location:f});k=m.record.name,v=dt(ep(p.params,m.keys.filter(E=>!E.optional).concat(m.parent?m.parent.keys.filter(E=>E.optional):[]).map(E=>E.name)),f.params&&ep(f.params,m.keys.map(E=>E.name))),_=m.stringify(v)}else if(f.path!=null)_=f.path,m=n.find(E=>E.re.test(_)),m&&(v=m.parse(_),k=m.record.name);else{if(m=p.name?s.get(p.name):n.find(E=>E.re.test(p.path)),!m)throw Ii(1,{location:f,currentLocation:p});k=m.record.name,v=dt({},p.params,f.params),_=m.stringify(v)}const S=[];let P=m;for(;P;)S.unshift(P.record),P=P.parent;return{name:k,path:_,params:v,matched:S,meta:r1(S)}}t.forEach(f=>i(f));function u(){n.length=0,s.clear()}return{addRoute:i,resolve:c,removeRoute:o,clearRoutes:u,getRoutes:a,getRecordMatcher:r}}function ep(t,e){const n={};for(const s of e)s in t&&(n[s]=t[s]);return n}function tp(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:s1(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function s1(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const s in t.components)e[s]=typeof n=="object"?n[s]:n;return e}function np(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function r1(t){return t.reduce((e,n)=>dt(e,n.meta),{})}function sp(t,e){const n={};for(const s in t)n[s]=s in e?e[s]:t[s];return n}function i1(t,e){let n=0,s=e.length;for(;n!==s;){const i=n+s>>1;iv(t,e[i])<0?s=i:n=i+1}const r=o1(t);return r&&(s=e.lastIndexOf(r,s-1)),s}function o1(t){let e=t;for(;e=e.parent;)if(ov(e)&&iv(t,e)===0)return e}function ov({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function a1(t){const e={};if(t===""||t==="?")return e;const s=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<s.length;++r){const i=s[r].replace(Qy," "),o=i.indexOf("="),a=No(o<0?i:i.slice(0,o)),l=o<0?null:No(i.slice(o+1));if(a in e){let c=e[a];Kn(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function rp(t){let e="";for(let n in t){const s=t[n];if(n=Ax(n),s==null){s!==void 0&&(e+=(e.length?"&":"")+n);continue}(Kn(s)?s.map(i=>i&&ed(i)):[s&&ed(s)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function l1(t){const e={};for(const n in t){const s=t[n];s!==void 0&&(e[n]=Kn(s)?s.map(r=>r==null?null:""+r):s==null?s:""+s)}return e}const c1=Symbol(""),ip=Symbol(""),oc=Symbol(""),Yd=Symbol(""),nd=Symbol("");function Ji(){let t=[];function e(s){return t.push(s),()=>{const r=t.indexOf(s);r>-1&&t.splice(r,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Ys(t,e,n,s,r,i=o=>o()){const o=s&&(s.enterCallbacks[r]=s.enterCallbacks[r]||[]);return()=>new Promise((a,l)=>{const c=p=>{p===!1?l(Ii(4,{from:n,to:e})):p instanceof Error?l(p):Kx(p)?l(Ii(2,{from:e,to:p})):(o&&s.enterCallbacks[r]===o&&typeof p=="function"&&o.push(p),a())},u=i(()=>t.call(s&&s.instances[r],e,n,c));let f=Promise.resolve(u);t.length<3&&(f=f.then(c)),f.catch(p=>l(p))})}function du(t,e,n,s,r=i=>i()){const i=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(Gy(l)){const u=(l.__vccOpts||l)[e];u&&i.push(Ys(u,n,s,o,a,r))}else{let c=l();i.push(()=>c.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const f=mx(u)?u.default:u;o.mods[a]=u,o.components[a]=f;const m=(f.__vccOpts||f)[e];return m&&Ys(m,n,s,o,a,r)()}))}}return i}function op(t){const e=In(oc),n=In(Yd),s=He(()=>{const l=$e(t.to);return e.resolve(l)}),r=He(()=>{const{matched:l}=s.value,{length:c}=l,u=l[c-1],f=n.matched;if(!u||!f.length)return-1;const p=f.findIndex(Ai.bind(null,u));if(p>-1)return p;const m=ap(l[c-2]);return c>1&&ap(u)===m&&f[f.length-1].path!==m?f.findIndex(Ai.bind(null,l[c-2])):p}),i=He(()=>r.value>-1&&p1(n.params,s.value.params)),o=He(()=>r.value>-1&&r.value===n.matched.length-1&&tv(n.params,s.value.params));function a(l={}){if(h1(l)){const c=e[$e(t.replace)?"replace":"push"]($e(t.to)).catch(Co);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:s,href:He(()=>s.value.href),isActive:i,isExactActive:o,navigate:a}}function u1(t){return t.length===1?t[0]:t}const d1=Ze({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:op,setup(t,{slots:e}){const n=qr(op(t)),{options:s}=In(oc),r=He(()=>({[lp(t.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[lp(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&u1(e.default(n));return t.custom?i:As("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},i)}}}),f1=d1;function h1(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function p1(t,e){for(const n in e){const s=e[n],r=t[n];if(typeof s=="string"){if(s!==r)return!1}else if(!Kn(r)||r.length!==s.length||s.some((i,o)=>i!==r[o]))return!1}return!0}function ap(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const lp=(t,e,n)=>t??e??n,g1=Ze({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const s=In(nd),r=He(()=>t.route||s.value),i=In(ip,0),o=He(()=>{let c=$e(i);const{matched:u}=r.value;let f;for(;(f=u[c])&&!f.components;)c++;return c}),a=He(()=>r.value.matched[o.value]);ko(ip,He(()=>o.value+1)),ko(c1,a),ko(nd,r);const l=he();return Ht(()=>[l.value,a.value,t.name],([c,u,f],[p,m,v])=>{u&&(u.instances[f]=c,m&&m!==u&&c&&c===p&&(u.leaveGuards.size||(u.leaveGuards=m.leaveGuards),u.updateGuards.size||(u.updateGuards=m.updateGuards))),c&&u&&(!m||!Ai(u,m)||!p)&&(u.enterCallbacks[f]||[]).forEach(_=>_(c))},{flush:"post"}),()=>{const c=r.value,u=t.name,f=a.value,p=f&&f.components[u];if(!p)return cp(n.default,{Component:p,route:c});const m=f.props[u],v=m?m===!0?c.params:typeof m=="function"?m(c):m:null,k=As(p,dt({},v,e,{onVnodeUnmounted:S=>{S.component.isUnmounted&&(f.instances[u]=null)},ref:l}));return cp(n.default,{Component:k,route:c})||k}}});function cp(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const m1=g1;function y1(t){const e=n1(t.routes,t),n=t.parseQuery||a1,s=t.stringifyQuery||rp,r=t.history,i=Ji(),o=Ji(),a=Ji(),l=Jl(Ns);let c=Ns;di&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=cu.bind(null,ae=>""+ae),f=cu.bind(null,Ex),p=cu.bind(null,No);function m(ae,Me){let se,Fe;return sv(ae)?(se=e.getRecordMatcher(ae),Fe=Me):Fe=ae,e.addRoute(Fe,se)}function v(ae){const Me=e.getRecordMatcher(ae);Me&&e.removeRoute(Me)}function _(){return e.getRoutes().map(ae=>ae.record)}function k(ae){return!!e.getRecordMatcher(ae)}function S(ae,Me){if(Me=dt({},Me||l.value),typeof ae=="string"){const Q=uu(n,ae,Me.path),le=e.resolve({path:Q.path},Me),ue=r.createHref(Q.fullPath);return dt(Q,le,{params:p(le.params),hash:No(Q.hash),redirectedFrom:void 0,href:ue})}let se;if(ae.path!=null)se=dt({},ae,{path:uu(n,ae.path,Me.path).path});else{const Q=dt({},ae.params);for(const le in Q)Q[le]==null&&delete Q[le];se=dt({},ae,{params:f(Q)}),Me.params=f(Me.params)}const Fe=e.resolve(se,Me),nt=ae.hash||"";Fe.params=u(p(Fe.params));const M=Tx(s,dt({},ae,{hash:Px(nt),path:Fe.path})),$=r.createHref(M);return dt({fullPath:M,hash:nt,query:s===rp?l1(ae.query):ae.query||{}},Fe,{redirectedFrom:void 0,href:$})}function P(ae){return typeof ae=="string"?uu(n,ae,l.value.path):dt({},ae)}function E(ae,Me){if(c!==ae)return Ii(8,{from:Me,to:ae})}function C(ae){return G(ae)}function I(ae){return C(dt(P(ae),{replace:!0}))}function T(ae){const Me=ae.matched[ae.matched.length-1];if(Me&&Me.redirect){const{redirect:se}=Me;let Fe=typeof se=="function"?se(ae):se;return typeof Fe=="string"&&(Fe=Fe.includes("?")||Fe.includes("#")?Fe=P(Fe):{path:Fe},Fe.params={}),dt({query:ae.query,hash:ae.hash,params:Fe.path!=null?{}:ae.params},Fe)}}function G(ae,Me){const se=c=S(ae),Fe=l.value,nt=ae.state,M=ae.force,$=ae.replace===!0,Q=T(se);if(Q)return G(dt(P(Q),{state:typeof Q=="object"?dt({},nt,Q.state):nt,force:M,replace:$}),Me||se);const le=se;le.redirectedFrom=Me;let ue;return!M&&Dx(s,Fe,se)&&(ue=Ii(16,{to:le,from:Fe}),Le(Fe,Fe,!0,!1)),(ue?Promise.resolve(ue):Z(le,Fe)).catch(ce=>ps(ce)?ps(ce,2)?ce:Y(ce):te(ce,le,Fe)).then(ce=>{if(ce){if(ps(ce,2))return G(dt({replace:$},P(ce.to),{state:typeof ce.to=="object"?dt({},nt,ce.to.state):nt,force:M}),Me||le)}else ce=j(le,Fe,!0,$,nt);return K(le,Fe,ce),ce})}function V(ae,Me){const se=E(ae,Me);return se?Promise.reject(se):Promise.resolve()}function A(ae){const Me=wt.values().next().value;return Me&&typeof Me.runWithContext=="function"?Me.runWithContext(ae):ae()}function Z(ae,Me){let se;const[Fe,nt,M]=v1(ae,Me);se=du(Fe.reverse(),"beforeRouteLeave",ae,Me);for(const Q of Fe)Q.leaveGuards.forEach(le=>{se.push(Ys(le,ae,Me))});const $=V.bind(null,ae,Me);return se.push($),rt(se).then(()=>{se=[];for(const Q of i.list())se.push(Ys(Q,ae,Me));return se.push($),rt(se)}).then(()=>{se=du(nt,"beforeRouteUpdate",ae,Me);for(const Q of nt)Q.updateGuards.forEach(le=>{se.push(Ys(le,ae,Me))});return se.push($),rt(se)}).then(()=>{se=[];for(const Q of M)if(Q.beforeEnter)if(Kn(Q.beforeEnter))for(const le of Q.beforeEnter)se.push(Ys(le,ae,Me));else se.push(Ys(Q.beforeEnter,ae,Me));return se.push($),rt(se)}).then(()=>(ae.matched.forEach(Q=>Q.enterCallbacks={}),se=du(M,"beforeRouteEnter",ae,Me,A),se.push($),rt(se))).then(()=>{se=[];for(const Q of o.list())se.push(Ys(Q,ae,Me));return se.push($),rt(se)}).catch(Q=>ps(Q,8)?Q:Promise.reject(Q))}function K(ae,Me,se){a.list().forEach(Fe=>A(()=>Fe(ae,Me,se)))}function j(ae,Me,se,Fe,nt){const M=E(ae,Me);if(M)return M;const $=Me===Ns,Q=di?history.state:{};se&&(Fe||$?r.replace(ae.fullPath,dt({scroll:$&&Q&&Q.scroll},nt)):r.push(ae.fullPath,nt)),l.value=ae,Le(ae,Me,se,$),Y()}let de;function ge(){de||(de=r.listen((ae,Me,se)=>{if(!gt.listening)return;const Fe=S(ae),nt=T(Fe);if(nt){G(dt(nt,{replace:!0,force:!0}),Fe).catch(Co);return}c=Fe;const M=l.value;di&&zx(Gh(M.fullPath,se.delta),ic()),Z(Fe,M).catch($=>ps($,12)?$:ps($,2)?(G(dt(P($.to),{force:!0}),Fe).then(Q=>{ps(Q,20)&&!se.delta&&se.type===zo.pop&&r.go(-1,!1)}).catch(Co),Promise.reject()):(se.delta&&r.go(-se.delta,!1),te($,Fe,M))).then($=>{$=$||j(Fe,M,!1),$&&(se.delta&&!ps($,8)?r.go(-se.delta,!1):se.type===zo.pop&&ps($,20)&&r.go(-1,!1)),K(Fe,M,$)}).catch(Co)}))}let Ae=Ji(),Se=Ji(),Pe;function te(ae,Me,se){Y(ae);const Fe=Se.list();return Fe.length?Fe.forEach(nt=>nt(ae,Me,se)):console.error(ae),Promise.reject(ae)}function ee(){return Pe&&l.value!==Ns?Promise.resolve():new Promise((ae,Me)=>{Ae.add([ae,Me])})}function Y(ae){return Pe||(Pe=!ae,ge(),Ae.list().forEach(([Me,se])=>ae?se(ae):Me()),Ae.reset()),ae}function Le(ae,Me,se,Fe){const{scrollBehavior:nt}=t;if(!di||!nt)return Promise.resolve();const M=!se&&Ux(Gh(ae.fullPath,0))||(Fe||!se)&&history.state&&history.state.scroll||null;return an().then(()=>nt(ae,Me,M)).then($=>$&&Nx($)).catch($=>te($,ae,Me))}const _e=ae=>r.go(ae);let We;const wt=new Set,gt={currentRoute:l,listening:!0,addRoute:m,removeRoute:v,clearRoutes:e.clearRoutes,hasRoute:k,getRoutes:_,resolve:S,options:t,push:C,replace:I,go:_e,back:()=>_e(-1),forward:()=>_e(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:Se.add,isReady:ee,install(ae){const Me=this;ae.component("RouterLink",f1),ae.component("RouterView",m1),ae.config.globalProperties.$router=Me,Object.defineProperty(ae.config.globalProperties,"$route",{enumerable:!0,get:()=>$e(l)}),di&&!We&&l.value===Ns&&(We=!0,C(r.location).catch(nt=>{}));const se={};for(const nt in Ns)Object.defineProperty(se,nt,{get:()=>l.value[nt],enumerable:!0});ae.provide(oc,Me),ae.provide(Yd,sy(se)),ae.provide(nd,l);const Fe=ae.unmount;wt.add(ae),ae.unmount=function(){wt.delete(ae),wt.size<1&&(c=Ns,de&&de(),de=null,l.value=Ns,We=!1,Pe=!1),Fe()}}};function rt(ae){return ae.reduce((Me,se)=>Me.then(()=>A(se)),Promise.resolve())}return gt}function v1(t,e){const n=[],s=[],r=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(c=>Ai(c,a))?s.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(c=>Ai(c,l))||r.push(l))}return[n,s,r]}function av(){return In(oc)}function Gd(t){return In(Yd)}const b1=["aria-label"],_1={key:0,class:"icon-sun"},w1={key:1,class:"icon-moon"},x1=Ze({__name:"ThemeSwitcher",setup(t){const e=he("light"),n=()=>{const s=e.value==="light"?"dark":"light";e.value=s,document.documentElement.setAttribute("data-theme",s),document.documentElement.setAttribute("data-bs-theme",s),localStorage.setItem("theme",s)};return Mn(()=>{const s=localStorage.getItem("theme"),r=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;let i="light";s?i=s:r&&(i="dark"),e.value=i,document.documentElement.setAttribute("data-theme",i),document.documentElement.setAttribute("data-bs-theme",i)}),(s,r)=>(q(),J("button",{type:"button",class:"btn-icon",onClick:n,"aria-label":`Switch to ${e.value==="light"?"dark":"light"} mode`},[e.value==="dark"?(q(),J("span",_1,[...r[0]||(r[0]=[jy('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-e843c561><circle cx="12" cy="12" r="5" data-v-e843c561></circle><line x1="12" y1="1" x2="12" y2="3" data-v-e843c561></line><line x1="12" y1="21" x2="12" y2="23" data-v-e843c561></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64" data-v-e843c561></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78" data-v-e843c561></line><line x1="1" y1="12" x2="3" y2="12" data-v-e843c561></line><line x1="21" y1="12" x2="23" y2="12" data-v-e843c561></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36" data-v-e843c561></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22" data-v-e843c561></line></svg>',1)])])):(q(),J("span",w1,[...r[1]||(r[1]=[w("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[w("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})],-1)])]))],8,b1))}}),pn=(t,e)=>{const n=t.__vccOpts||t;for(const[s,r]of e)n[s]=r;return n},k1=pn(x1,[["__scopeId","data-v-e843c561"]]);/*!
 * pinia v3.0.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let lv;const ac=t=>lv=t,cv=Symbol();function sd(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Ao;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Ao||(Ao={}));function S1(){const t=Xl(!0),e=t.run(()=>he({}));let n=[],s=[];const r=jd({install(i){ac(r),r._a=i,i.provide(cv,r),i.config.globalProperties.$pinia=r,s.forEach(o=>n.push(o)),s=[]},use(i){return this._a?n.push(i):s.push(i),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return r}const uv=()=>{};function up(t,e,n,s=uv){t.push(e);const r=()=>{const i=t.indexOf(e);i>-1&&(t.splice(i,1),s())};return!n&&Td()&&Um(r),r}function ii(t,...e){t.slice().forEach(n=>{n(...e)})}const C1=t=>t(),dp=Symbol(),fu=Symbol();function rd(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,s)=>t.set(s,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const s=e[n],r=t[n];sd(r)&&sd(s)&&t.hasOwnProperty(n)&&!Dt(s)&&!Js(s)?t[n]=rd(r,s):t[n]=s}return t}const P1=Symbol();function A1(t){return!sd(t)||!Object.prototype.hasOwnProperty.call(t,P1)}const{assign:qs}=Object;function I1(t){return!!(Dt(t)&&t.effect)}function E1(t,e,n,s){const{state:r,actions:i,getters:o}=e,a=n.state.value[t];let l;function c(){a||(n.state.value[t]=r?r():{});const u=Nd(n.state.value[t]);return qs(u,i,Object.keys(o||{}).reduce((f,p)=>(f[p]=jd(He(()=>{ac(n);const m=n._s.get(t);return o[p].call(m,m)})),f),{}))}return l=dv(t,c,e,n,s,!0),l}function dv(t,e,n={},s,r,i){let o;const a=qs({actions:{}},n),l={deep:!0};let c,u,f=[],p=[],m;const v=s.state.value[t];!i&&!v&&(s.state.value[t]={}),he({});let _;function k(V){let A;c=u=!1,typeof V=="function"?(V(s.state.value[t]),A={type:Ao.patchFunction,storeId:t,events:m}):(rd(s.state.value[t],V),A={type:Ao.patchObject,payload:V,storeId:t,events:m});const Z=_=Symbol();an().then(()=>{_===Z&&(c=!0)}),u=!0,ii(f,A,s.state.value[t])}const S=i?function(){const{state:A}=n,Z=A?A():{};this.$patch(K=>{qs(K,Z)})}:uv;function P(){o.stop(),f=[],p=[],s._s.delete(t)}const E=(V,A="")=>{if(dp in V)return V[fu]=A,V;const Z=function(){ac(s);const K=Array.from(arguments),j=[],de=[];function ge(Pe){j.push(Pe)}function Ae(Pe){de.push(Pe)}ii(p,{args:K,name:Z[fu],store:I,after:ge,onError:Ae});let Se;try{Se=V.apply(this&&this.$id===t?this:I,K)}catch(Pe){throw ii(de,Pe),Pe}return Se instanceof Promise?Se.then(Pe=>(ii(j,Pe),Pe)).catch(Pe=>(ii(de,Pe),Promise.reject(Pe))):(ii(j,Se),Se)};return Z[dp]=!0,Z[fu]=A,Z},C={_p:s,$id:t,$onAction:up.bind(null,p),$patch:k,$reset:S,$subscribe(V,A={}){const Z=up(f,V,A.detached,()=>K()),K=o.run(()=>Ht(()=>s.state.value[t],j=>{(A.flush==="sync"?u:c)&&V({storeId:t,type:Ao.direct,events:m},j)},qs({},l,A)));return Z},$dispose:P},I=qr(C);s._s.set(t,I);const G=(s._a&&s._a.runWithContext||C1)(()=>s._e.run(()=>(o=Xl()).run(()=>e({action:E}))));for(const V in G){const A=G[V];if(Dt(A)&&!I1(A)||Js(A))i||(v&&A1(A)&&(Dt(A)?A.value=v[V]:rd(A,v[V])),s.state.value[t][V]=A);else if(typeof A=="function"){const Z=E(A,V);G[V]=Z,a.actions[V]=A}}return qs(I,G),qs(tt(I),G),Object.defineProperty(I,"$state",{get:()=>s.state.value[t],set:V=>{k(A=>{qs(A,V)})}}),s._p.forEach(V=>{qs(I,o.run(()=>V({store:I,app:s._a,pinia:s,options:a})))}),v&&i&&n.hydrate&&n.hydrate(I.$state,v),c=!0,u=!0,I}/*! #__NO_SIDE_EFFECTS__ */function lc(t,e,n){let s;const r=typeof e=="function";s=r?n:e;function i(o,a){const l=Z0();return o=o||(l?In(cv,null):null),o&&ac(o),o=lv,o._s.has(t)||(r?dv(t,e,s,o):E1(t,s,o)),o._s.get(t)}return i.$id=t,i}const _i=lc("importStatus",()=>{const t=he([]);return{imports:t,addImport:l=>{const c={...l,createdAt:new Date};return t.value.push(c),c.id},updateImport:(l,c)=>{const u=t.value.findIndex(f=>f.id===l);u!==-1&&(t.value[u]={...t.value[u],...c})},completeImport:(l,c)=>{const u=t.value.findIndex(f=>f.id===l);u!==-1&&(t.value[u]={...t.value[u],status:c?"failed":"completed",errorMessage:c,completedAt:new Date,progress:100})},removeImport:l=>{t.value=t.value.filter(c=>c.id!==l)},clearCompletedImports:()=>{t.value=t.value.filter(l=>l.status==="pending"||l.status==="processing")},getActiveImports:()=>t.value.filter(l=>l.status==="pending"||l.status==="processing"),getCompletedImports:()=>t.value.filter(l=>l.status==="completed"||l.status==="failed")}}),O1={key:0,class:"import-status-indicator",style:{width:"200px"}},M1={class:"d-flex justify-content-between align-items-baseline"},T1=["title"],D1={class:"small text-muted flex-shrink-0 ms-2"},R1={class:"progress mt-1"},$1=["aria-valuenow"],F1={class:"import-alerts position-fixed top-0 end-0 p-3",style:{"z-index":"1050"}},L1={class:"d-flex justify-content-between"},B1={key:0,class:"small"},j1=["onClick"],N1=Ze({__name:"ImportStatusIndicator",setup(t){const e=_i(),n=He(()=>e.getActiveImports()),s=He(()=>e.getCompletedImports()),r=He(()=>n.value.length>0?n.value[0]:null),i=a=>{e.removeImport(a)};let o=null;return Mn(()=>{o=window.setInterval(()=>{const a=new Date;e.imports.forEach(l=>{if((l.status==="completed"||l.status==="failed")&&l.completedAt){const c=new Date(l.completedAt);a.getTime()-c.getTime()>5e3&&e.removeImport(l.id)}})},1e3)}),$i(()=>{o&&clearInterval(o)}),(a,l)=>(q(),J(et,null,[r.value?(q(),J("div",O1,[w("div",M1,[w("span",{class:"fw-medium small text-truncate",title:r.value.name},oe(r.value.name),9,T1),w("span",D1,oe(r.value.processedItems)+" / "+oe(r.value.totalItems),1)]),w("div",R1,[w("div",{class:"progress-bar",role:"progressbar",style:An({width:r.value.progress+"%"}),"aria-valuenow":r.value.progress,"aria-valuemin":"0","aria-valuemax":"100"},null,12,$1)])])):ke("",!0),w("div",F1,[qe(tx,{name:"alert",tag:"div"},{default:at(()=>[(q(!0),J(et,null,Ft(s.value,c=>(q(),J("div",{key:c.id,class:Pt(["alert",c.status==="completed"?"alert-success":"alert-danger"]),role:"alert"},[w("div",L1,[w("div",null,[w("strong",null,oe(c.name),1),bt(" "+oe(c.status==="completed"?"import completed successfully!":"import failed.")+" ",1),c.errorMessage?(q(),J("div",B1,oe(c.errorMessage),1)):ke("",!0)]),w("button",{type:"button",class:"btn-close",onClick:u=>i(c.id)},null,8,j1)])],2))),128))]),_:1})])],64))}}),z1=pn(N1,[["__scopeId","data-v-0987b82f"]]),U1={class:"navbar navbar-expand-md navbar-light glass fixed-top"},q1={class:"container-fluid"},W1=["aria-expanded"],V1={class:"nav-item"},H1={class:"nav-item"},K1={class:"nav-item"},Y1={class:"nav-item"},G1={class:"d-flex align-items-center"},X1=Ze({__name:"Navigation",setup(t){const e=Gd(),n=He(()=>e.name==="decks"||e.name==="deck-detail"||e.name==="deck-import"),s=he(!1),r=()=>{s.value=!s.value},i=he(null),o=he(null);let a=null;function l(m){const v=i.value,_=o.value;if(!v||!_||!m)return;const k=v.getBoundingClientRect(),S=m.getBoundingClientRect(),P=12,E=Math.max(32,Math.round(S.height*.72)),C=Math.max(S.width+P*2,80),I=S.left-k.left+v.scrollLeft-P,T=S.top-k.top+v.scrollTop+(S.height-E)/2;_.style.setProperty("--_x",`${I}px`),_.style.setProperty("--_y",`${T}px`),_.style.setProperty("--_w",`${C}px`),_.style.setProperty("--_h",`${E}px`),_.style.opacity="1";const G=getComputedStyle(m).color||getComputedStyle(document.documentElement).getPropertyValue("--bs-primary")||"#0d6efd";_.style.setProperty("--nav-accent",G.trim())}function c(){return i.value?.querySelector(".nav-link.active")}function u(){const m=c();m&&l(m)}function f(m){const v=m.currentTarget;v&&l(v)}function p(){i.value&&(a=new ResizeObserver(()=>u()),a.observe(i.value),window.addEventListener("resize",u,{passive:!0}))}return Mn(async()=>{await an();const m=c()||i.value?.querySelector(".nav-link");m&&l(m),p()}),tc(()=>{a&&i.value&&a.unobserve(i.value),window.removeEventListener("resize",u)}),Ht(()=>e.fullPath,()=>an().then(u)),Ht(s,()=>an().then(u)),(m,v)=>{const _=Si("router-link");return q(),J("nav",U1,[w("div",q1,[qe(_,{to:"/",class:"navbar-brand"},{default:at(()=>[...v[0]||(v[0]=[w("img",{style:{"max-width":"48px"},src:gx,alt:"logo"},null,-1),bt(" MTG Collection Tracker ",-1)])]),_:1}),w("button",{class:"navbar-toggler",type:"button",onClick:r,"aria-controls":"navbarNav","aria-expanded":s.value,"aria-label":"Toggle navigation"},[...v[1]||(v[1]=[w("span",{class:"navbar-toggler-icon"},null,-1)])],8,W1),w("div",{id:"navbarNav",class:Pt(["collapse navbar-collapse",{show:s.value}])},[w("ul",{class:"navbar-nav me-auto",ref_key:"navList",ref:i,onMouseleave:u},[w("div",{class:"nav-bubble",ref_key:"bubble",ref:o,"aria-hidden":"true"},null,512),w("li",V1,[qe(_,{to:"/",class:Pt(["nav-link",{active:$e(e).name==="home"}]),onMouseenter:f,onFocusin:f},{default:at(()=>[...v[2]||(v[2]=[bt("Dashboard",-1)])]),_:1},8,["class"])]),w("li",H1,[qe(_,{to:"/decks",class:Pt(["nav-link",{active:n.value}]),onMouseenter:f,onFocusin:f},{default:at(()=>[...v[3]||(v[3]=[bt("Decks",-1)])]),_:1},8,["class"])]),w("li",K1,[qe(_,{to:"/cards",class:Pt(["nav-link",{active:$e(e).name==="cards"}]),onMouseenter:f,onFocusin:f},{default:at(()=>[...v[4]||(v[4]=[bt("Cards",-1)])]),_:1},8,["class"])]),w("li",Y1,[qe(_,{to:"/import",class:Pt(["nav-link",{active:$e(e).path.startsWith("/import")}]),onMouseenter:f,onFocusin:f},{default:at(()=>[...v[5]||(v[5]=[bt("Data Import",-1)])]),_:1},8,["class"])])],544),w("div",G1,[qe(z1),qe(k1)])],2)])])}}}),Q1={class:"noise-overlay","aria-hidden":"true"},J1=Ze({__name:"NoiseOverlay",setup(t){return(e,n)=>(q(),J("div",Q1))}}),Z1=pn(J1,[["__scopeId","data-v-63a7b15c"]]),ek={class:"container-lg",style:{"padding-top":"calc(var(--app-navbar-h) + 1.5rem)","padding-bottom":"1.5rem"}},tk=Ze({__name:"App",setup(t){return(e,n)=>{const s=Si("router-view");return q(),J(et,null,[qe(Z1),qe(X1),w("main",ek,[qe(s)])],64)}}});var nk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function sk(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function s(){var r=!1;try{r=this instanceof s}catch{}return r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(s){var r=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(n,s,r.get?r:{enumerable:!0,get:function(){return t[s]}})}),n}var fl={exports:{}},rk=fl.exports,fp;function ik(){return fp||(fp=1,(function(t,e){(function(n,s){t.exports=s()})(rk,function(){var n=function(d,h){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,y){g.__proto__=y}||function(g,y){for(var b in y)Object.prototype.hasOwnProperty.call(y,b)&&(g[b]=y[b])})(d,h)},s=function(){return(s=Object.assign||function(d){for(var h,g=1,y=arguments.length;g<y;g++)for(var b in h=arguments[g])Object.prototype.hasOwnProperty.call(h,b)&&(d[b]=h[b]);return d}).apply(this,arguments)};function r(d,h,g){for(var y,b=0,x=h.length;b<x;b++)!y&&b in h||((y=y||Array.prototype.slice.call(h,0,b))[b]=h[b]);return d.concat(y||Array.prototype.slice.call(h))}var i=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:nk,o=Object.keys,a=Array.isArray;function l(d,h){return typeof h!="object"||o(h).forEach(function(g){d[g]=h[g]}),d}typeof Promise>"u"||i.Promise||(i.Promise=Promise);var c=Object.getPrototypeOf,u={}.hasOwnProperty;function f(d,h){return u.call(d,h)}function p(d,h){typeof h=="function"&&(h=h(c(d))),(typeof Reflect>"u"?o:Reflect.ownKeys)(h).forEach(function(g){v(d,g,h[g])})}var m=Object.defineProperty;function v(d,h,g,y){m(d,h,l(g&&f(g,"get")&&typeof g.get=="function"?{get:g.get,set:g.set,configurable:!0}:{value:g,configurable:!0,writable:!0},y))}function _(d){return{from:function(h){return d.prototype=Object.create(h.prototype),v(d.prototype,"constructor",d),{extend:p.bind(null,d.prototype)}}}}var k=Object.getOwnPropertyDescriptor,S=[].slice;function P(d,h,g){return S.call(d,h,g)}function E(d,h){return h(d)}function C(d){if(!d)throw new Error("Assertion Failed")}function I(d){i.setImmediate?setImmediate(d):setTimeout(d,0)}function T(d,h){if(typeof h=="string"&&f(d,h))return d[h];if(!h)return d;if(typeof h!="string"){for(var g=[],y=0,b=h.length;y<b;++y){var x=T(d,h[y]);g.push(x)}return g}var O=h.indexOf(".");if(O!==-1){var D=d[h.substr(0,O)];return D==null?void 0:T(D,h.substr(O+1))}}function G(d,h,g){if(d&&h!==void 0&&!("isFrozen"in Object&&Object.isFrozen(d)))if(typeof h!="string"&&"length"in h){C(typeof g!="string"&&"length"in g);for(var y=0,b=h.length;y<b;++y)G(d,h[y],g[y])}else{var x,O,D=h.indexOf(".");D!==-1?(x=h.substr(0,D),(O=h.substr(D+1))===""?g===void 0?a(d)&&!isNaN(parseInt(x))?d.splice(x,1):delete d[x]:d[x]=g:G(D=!(D=d[x])||!f(d,x)?d[x]={}:D,O,g)):g===void 0?a(d)&&!isNaN(parseInt(h))?d.splice(h,1):delete d[h]:d[h]=g}}function V(d){var h,g={};for(h in d)f(d,h)&&(g[h]=d[h]);return g}var A=[].concat;function Z(d){return A.apply([],d)}var Ge="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Z([8,16,32,64].map(function(d){return["Int","Uint","Float"].map(function(h){return h+d+"Array"})}))).filter(function(d){return i[d]}),K=new Set(Ge.map(function(d){return i[d]})),j=null;function de(d){return j=new WeakMap,d=(function h(g){if(!g||typeof g!="object")return g;var y=j.get(g);if(y)return y;if(a(g)){y=[],j.set(g,y);for(var b=0,x=g.length;b<x;++b)y.push(h(g[b]))}else if(K.has(g.constructor))y=g;else{var O,D=c(g);for(O in y=D===Object.prototype?{}:Object.create(D),j.set(g,y),g)f(g,O)&&(y[O]=h(g[O]))}return y})(d),j=null,d}var ge={}.toString;function Ae(d){return ge.call(d).slice(8,-1)}var Se=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Pe=typeof Se=="symbol"?function(d){var h;return d!=null&&(h=d[Se])&&h.apply(d)}:function(){return null};function te(d,h){return h=d.indexOf(h),0<=h&&d.splice(h,1),0<=h}var ee={};function Y(d){var h,g,y,b;if(arguments.length===1){if(a(d))return d.slice();if(this===ee&&typeof d=="string")return[d];if(b=Pe(d)){for(g=[];!(y=b.next()).done;)g.push(y.value);return g}if(d==null)return[d];if(typeof(h=d.length)!="number")return[d];for(g=new Array(h);h--;)g[h]=d[h];return g}for(h=arguments.length,g=new Array(h);h--;)g[h]=arguments[h];return g}var Le=typeof Symbol<"u"?function(d){return d[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Ue=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Tn=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Ue),_e={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function We(d,h){this.name=d,this.message=h}function wt(d,h){return d+". Errors: "+Object.keys(h).map(function(g){return h[g].toString()}).filter(function(g,y,b){return b.indexOf(g)===y}).join(`
`)}function gt(d,h,g,y){this.failures=h,this.failedKeys=y,this.successCount=g,this.message=wt(d,h)}function rt(d,h){this.name="BulkError",this.failures=Object.keys(h).map(function(g){return h[g]}),this.failuresByPos=h,this.message=wt(d,this.failures)}_(We).from(Error).extend({toString:function(){return this.name+": "+this.message}}),_(gt).from(We),_(rt).from(We);var ae=Tn.reduce(function(d,h){return d[h]=h+"Error",d},{}),Me=We,se=Tn.reduce(function(d,h){var g=h+"Error";function y(b,x){this.name=g,b?typeof b=="string"?(this.message="".concat(b).concat(x?`
 `+x:""),this.inner=x||null):typeof b=="object"&&(this.message="".concat(b.name," ").concat(b.message),this.inner=b):(this.message=_e[h]||g,this.inner=null)}return _(y).from(Me),d[h]=y,d},{});se.Syntax=SyntaxError,se.Type=TypeError,se.Range=RangeError;var Fe=Ue.reduce(function(d,h){return d[h+"Error"]=se[h],d},{}),nt=Tn.reduce(function(d,h){return["Syntax","Type","Range"].indexOf(h)===-1&&(d[h+"Error"]=se[h]),d},{});function M(){}function $(d){return d}function Q(d,h){return d==null||d===$?h:function(g){return h(d(g))}}function le(d,h){return function(){d.apply(this,arguments),h.apply(this,arguments)}}function ue(d,h){return d===M?h:function(){var g=d.apply(this,arguments);g!==void 0&&(arguments[0]=g);var y=this.onsuccess,b=this.onerror;this.onsuccess=null,this.onerror=null;var x=h.apply(this,arguments);return y&&(this.onsuccess=this.onsuccess?le(y,this.onsuccess):y),b&&(this.onerror=this.onerror?le(b,this.onerror):b),x!==void 0?x:g}}function ce(d,h){return d===M?h:function(){d.apply(this,arguments);var g=this.onsuccess,y=this.onerror;this.onsuccess=this.onerror=null,h.apply(this,arguments),g&&(this.onsuccess=this.onsuccess?le(g,this.onsuccess):g),y&&(this.onerror=this.onerror?le(y,this.onerror):y)}}function Ie(d,h){return d===M?h:function(g){var y=d.apply(this,arguments);l(g,y);var b=this.onsuccess,x=this.onerror;return this.onsuccess=null,this.onerror=null,g=h.apply(this,arguments),b&&(this.onsuccess=this.onsuccess?le(b,this.onsuccess):b),x&&(this.onerror=this.onerror?le(x,this.onerror):x),y===void 0?g===void 0?void 0:g:l(y,g)}}function xe(d,h){return d===M?h:function(){return h.apply(this,arguments)!==!1&&d.apply(this,arguments)}}function ve(d,h){return d===M?h:function(){var g=d.apply(this,arguments);if(g&&typeof g.then=="function"){for(var y=this,b=arguments.length,x=new Array(b);b--;)x[b]=arguments[b];return g.then(function(){return h.apply(y,x)})}return h.apply(this,arguments)}}nt.ModifyError=gt,nt.DexieError=We,nt.BulkError=rt;var fe=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Ne(d){fe=d}var Ee={},je=100,Ge=typeof Promise>"u"?[]:(function(){var d=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[d,c(d),d];var h=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[h,c(h),d]})(),Ue=Ge[0],Tn=Ge[1],Ge=Ge[2],Tn=Tn&&Tn.then,it=Ue&&Ue.constructor,lt=!!Ge,Rt=function(d,h){Ts.push([d,h]),cn&&(queueMicrotask(f_),cn=!1)},jt=!0,cn=!0,Nt=[],Yn=[],Gr=$,It={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:M,pgp:!1,env:{},finalize:M},Re=It,Ts=[],Gn=0,ca=[];function Te(d){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var h=this._PSD=Re;if(typeof d!="function"){if(d!==Ee)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Sc(this,this._value))}this._state=null,this._value=null,++h.ref,(function g(y,b){try{b(function(x){if(y._state===null){if(x===y)throw new TypeError("A promise cannot be resolved with itself.");var O=y._lib&&Xr();x&&typeof x.then=="function"?g(y,function(D,F){x instanceof Te?x._then(D,F):x.then(D,F)}):(y._state=!0,y._value=x,Ef(y)),O&&Qr()}},Sc.bind(null,y))}catch(x){Sc(y,x)}})(this,d)}var kc={get:function(){var d=Re,h=ha;function g(y,b){var x=this,O=!d.global&&(d!==Re||h!==ha),D=O&&!Rs(),F=new Te(function(B,z){Cc(x,new If(Mf(y,d,O,D),Mf(b,d,O,D),B,z,d))});return this._consoleTask&&(F._consoleTask=this._consoleTask),F}return g.prototype=Ee,g},set:function(d){v(this,"then",d&&d.prototype===Ee?kc:{get:function(){return d},set:kc.set})}};function If(d,h,g,y,b){this.onFulfilled=typeof d=="function"?d:null,this.onRejected=typeof h=="function"?h:null,this.resolve=g,this.reject=y,this.psd=b}function Sc(d,h){var g,y;Yn.push(h),d._state===null&&(g=d._lib&&Xr(),h=Gr(h),d._state=!1,d._value=h,y=d,Nt.some(function(b){return b._value===y._value})||Nt.push(y),Ef(d),g&&Qr())}function Ef(d){var h=d._listeners;d._listeners=[];for(var g=0,y=h.length;g<y;++g)Cc(d,h[g]);var b=d._PSD;--b.ref||b.finalize(),Gn===0&&(++Gn,Rt(function(){--Gn==0&&Pc()},[]))}function Cc(d,h){if(d._state!==null){var g=d._state?h.onFulfilled:h.onRejected;if(g===null)return(d._state?h.resolve:h.reject)(d._value);++h.psd.ref,++Gn,Rt(d_,[g,d,h])}else d._listeners.push(h)}function d_(d,h,g){try{var y,b=h._value;!h._state&&Yn.length&&(Yn=[]),y=fe&&h._consoleTask?h._consoleTask.run(function(){return d(b)}):d(b),h._state||Yn.indexOf(b)!==-1||(function(x){for(var O=Nt.length;O;)if(Nt[--O]._value===x._value)return Nt.splice(O,1)})(h),g.resolve(y)}catch(x){g.reject(x)}finally{--Gn==0&&Pc(),--g.psd.ref||g.psd.finalize()}}function f_(){cr(It,function(){Xr()&&Qr()})}function Xr(){var d=jt;return cn=jt=!1,d}function Qr(){var d,h,g;do for(;0<Ts.length;)for(d=Ts,Ts=[],g=d.length,h=0;h<g;++h){var y=d[h];y[0].apply(null,y[1])}while(0<Ts.length);cn=jt=!0}function Pc(){var d=Nt;Nt=[],d.forEach(function(y){y._PSD.onunhandled.call(null,y._value,y)});for(var h=ca.slice(0),g=h.length;g;)h[--g]()}function ua(d){return new Te(Ee,!1,d)}function Ct(d,h){var g=Re;return function(){var y=Xr(),b=Re;try{return $s(g,!0),d.apply(this,arguments)}catch(x){h&&h(x)}finally{$s(b,!1),y&&Qr()}}}p(Te.prototype,{then:kc,_then:function(d,h){Cc(this,new If(null,null,d,h,Re))},catch:function(d){if(arguments.length===1)return this.then(null,d);var h=d,g=arguments[1];return typeof h=="function"?this.then(null,function(y){return(y instanceof h?g:ua)(y)}):this.then(null,function(y){return(y&&y.name===h?g:ua)(y)})},finally:function(d){return this.then(function(h){return Te.resolve(d()).then(function(){return h})},function(h){return Te.resolve(d()).then(function(){return ua(h)})})},timeout:function(d,h){var g=this;return d<1/0?new Te(function(y,b){var x=setTimeout(function(){return b(new se.Timeout(h))},d);g.then(y,b).finally(clearTimeout.bind(null,x))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&v(Te.prototype,Symbol.toStringTag,"Dexie.Promise"),It.env=Of(),p(Te,{all:function(){var d=Y.apply(null,arguments).map(pa);return new Te(function(h,g){d.length===0&&h([]);var y=d.length;d.forEach(function(b,x){return Te.resolve(b).then(function(O){d[x]=O,--y||h(d)},g)})})},resolve:function(d){return d instanceof Te?d:d&&typeof d.then=="function"?new Te(function(h,g){d.then(h,g)}):new Te(Ee,!0,d)},reject:ua,race:function(){var d=Y.apply(null,arguments).map(pa);return new Te(function(h,g){d.map(function(y){return Te.resolve(y).then(h,g)})})},PSD:{get:function(){return Re},set:function(d){return Re=d}},totalEchoes:{get:function(){return ha}},newPSD:Ds,usePSD:cr,scheduler:{get:function(){return Rt},set:function(d){Rt=d}},rejectionMapper:{get:function(){return Gr},set:function(d){Gr=d}},follow:function(d,h){return new Te(function(g,y){return Ds(function(b,x){var O=Re;O.unhandleds=[],O.onunhandled=x,O.finalize=le(function(){var D,F=this;D=function(){F.unhandleds.length===0?b():x(F.unhandleds[0])},ca.push(function B(){D(),ca.splice(ca.indexOf(B),1)}),++Gn,Rt(function(){--Gn==0&&Pc()},[])},O.finalize),d()},h,g,y)})}}),it&&(it.allSettled&&v(Te,"allSettled",function(){var d=Y.apply(null,arguments).map(pa);return new Te(function(h){d.length===0&&h([]);var g=d.length,y=new Array(g);d.forEach(function(b,x){return Te.resolve(b).then(function(O){return y[x]={status:"fulfilled",value:O}},function(O){return y[x]={status:"rejected",reason:O}}).then(function(){return--g||h(y)})})})}),it.any&&typeof AggregateError<"u"&&v(Te,"any",function(){var d=Y.apply(null,arguments).map(pa);return new Te(function(h,g){d.length===0&&g(new AggregateError([]));var y=d.length,b=new Array(y);d.forEach(function(x,O){return Te.resolve(x).then(function(D){return h(D)},function(D){b[O]=D,--y||g(new AggregateError(b))})})})}),it.withResolvers&&(Te.withResolvers=it.withResolvers));var zt={awaits:0,echoes:0,id:0},h_=0,da=[],fa=0,ha=0,p_=0;function Ds(d,h,g,y){var b=Re,x=Object.create(b);return x.parent=b,x.ref=0,x.global=!1,x.id=++p_,It.env,x.env=lt?{Promise:Te,PromiseProp:{value:Te,configurable:!0,writable:!0},all:Te.all,race:Te.race,allSettled:Te.allSettled,any:Te.any,resolve:Te.resolve,reject:Te.reject}:{},h&&l(x,h),++b.ref,x.finalize=function(){--this.parent.ref||this.parent.finalize()},y=cr(x,d,g,y),x.ref===0&&x.finalize(),y}function Jr(){return zt.id||(zt.id=++h_),++zt.awaits,zt.echoes+=je,zt.id}function Rs(){return!!zt.awaits&&(--zt.awaits==0&&(zt.id=0),zt.echoes=zt.awaits*je,!0)}function pa(d){return zt.echoes&&d&&d.constructor===it?(Jr(),d.then(function(h){return Rs(),h},function(h){return Rs(),Mt(h)})):d}function g_(){var d=da[da.length-1];da.pop(),$s(d,!1)}function $s(d,h){var g,y=Re;(h?!zt.echoes||fa++&&d===Re:!fa||--fa&&d===Re)||queueMicrotask(h?(function(b){++ha,zt.echoes&&--zt.echoes!=0||(zt.echoes=zt.awaits=zt.id=0),da.push(Re),$s(b,!0)}).bind(null,d):g_),d!==Re&&(Re=d,y===It&&(It.env=Of()),lt&&(g=It.env.Promise,h=d.env,(y.global||d.global)&&(Object.defineProperty(i,"Promise",h.PromiseProp),g.all=h.all,g.race=h.race,g.resolve=h.resolve,g.reject=h.reject,h.allSettled&&(g.allSettled=h.allSettled),h.any&&(g.any=h.any))))}function Of(){var d=i.Promise;return lt?{Promise:d,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:d.all,race:d.race,allSettled:d.allSettled,any:d.any,resolve:d.resolve,reject:d.reject}:{}}function cr(d,h,g,y,b){var x=Re;try{return $s(d,!0),h(g,y,b)}finally{$s(x,!1)}}function Mf(d,h,g,y){return typeof d!="function"?d:function(){var b=Re;g&&Jr(),$s(h,!0);try{return d.apply(this,arguments)}finally{$s(b,!1),y&&queueMicrotask(Rs)}}}function Ac(d){Promise===it&&zt.echoes===0?fa===0?d():enqueueNativeMicroTask(d):setTimeout(d,0)}(""+Tn).indexOf("[native code]")===-1&&(Jr=Rs=M);var Mt=Te.reject,ur="",ds="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Tf="String expected.",Zr=[],ga="__dbnames",Ic="readonly",Ec="readwrite";function dr(d,h){return d?h?function(){return d.apply(this,arguments)&&h.apply(this,arguments)}:d:h}var Df={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function ma(d){return typeof d!="string"||/\./.test(d)?function(h){return h}:function(h){return h[d]===void 0&&d in h&&delete(h=de(h))[d],h}}function Rf(){throw se.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function st(d,h){try{var g=$f(d),y=$f(h);if(g!==y)return g==="Array"?1:y==="Array"?-1:g==="binary"?1:y==="binary"?-1:g==="string"?1:y==="string"?-1:g==="Date"?1:y!=="Date"?NaN:-1;switch(g){case"number":case"Date":case"string":return h<d?1:d<h?-1:0;case"binary":return(function(b,x){for(var O=b.length,D=x.length,F=O<D?O:D,B=0;B<F;++B)if(b[B]!==x[B])return b[B]<x[B]?-1:1;return O===D?0:O<D?-1:1})(Ff(d),Ff(h));case"Array":return(function(b,x){for(var O=b.length,D=x.length,F=O<D?O:D,B=0;B<F;++B){var z=st(b[B],x[B]);if(z!==0)return z}return O===D?0:O<D?-1:1})(d,h)}}catch{}return NaN}function $f(d){var h=typeof d;return h!="object"?h:ArrayBuffer.isView(d)?"binary":(d=Ae(d),d==="ArrayBuffer"?"binary":d)}function Ff(d){return d instanceof Uint8Array?d:ArrayBuffer.isView(d)?new Uint8Array(d.buffer,d.byteOffset,d.byteLength):new Uint8Array(d)}function ya(d,h,g){var y=d.schema.yProps;return y?(h&&0<g.numFailures&&(h=h.filter(function(b,x){return!g.failures[x]})),Promise.all(y.map(function(b){return b=b.updatesTable,h?d.db.table(b).where("k").anyOf(h).delete():d.db.table(b).clear()})).then(function(){return g})):g}var Lf=(xt.prototype._trans=function(d,h,g){var y=this._tx||Re.trans,b=this.name,x=fe&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(d==="readonly"?"read":"write"," ").concat(this.name));function O(B,z,R){if(!R.schema[b])throw new se.NotFound("Table "+b+" not part of transaction");return h(R.idbtrans,R)}var D=Xr();try{var F=y&&y.db._novip===this.db._novip?y===Re.trans?y._promise(d,O,g):Ds(function(){return y._promise(d,O,g)},{trans:y,transless:Re.transless||Re}):(function B(z,R,H,L){if(z.idbdb&&(z._state.openComplete||Re.letThrough||z._vip)){var N=z._createTransaction(R,H,z._dbSchema);try{N.create(),z._state.PR1398_maxLoop=3}catch(W){return W.name===ae.InvalidState&&z.isOpen()&&0<--z._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),z.close({disableAutoOpen:!1}),z.open().then(function(){return B(z,R,H,L)})):Mt(W)}return N._promise(R,function(W,U){return Ds(function(){return Re.trans=N,L(W,U,N)})}).then(function(W){if(R==="readwrite")try{N.idbtrans.commit()}catch{}return R==="readonly"?W:N._completion.then(function(){return W})})}if(z._state.openComplete)return Mt(new se.DatabaseClosed(z._state.dbOpenError));if(!z._state.isBeingOpened){if(!z._state.autoOpen)return Mt(new se.DatabaseClosed);z.open().catch(M)}return z._state.dbReadyPromise.then(function(){return B(z,R,H,L)})})(this.db,d,[this.name],O);return x&&(F._consoleTask=x,F=F.catch(function(B){return console.trace(B),Mt(B)})),F}finally{D&&Qr()}},xt.prototype.get=function(d,h){var g=this;return d&&d.constructor===Object?this.where(d).first(h):d==null?Mt(new se.Type("Invalid argument to Table.get()")):this._trans("readonly",function(y){return g.core.get({trans:y,key:d}).then(function(b){return g.hook.reading.fire(b)})}).then(h)},xt.prototype.where=function(d){if(typeof d=="string")return new this.db.WhereClause(this,d);if(a(d))return new this.db.WhereClause(this,"[".concat(d.join("+"),"]"));var h=o(d);if(h.length===1)return this.where(h[0]).equals(d[h[0]]);var g=this.schema.indexes.concat(this.schema.primKey).filter(function(D){if(D.compound&&h.every(function(B){return 0<=D.keyPath.indexOf(B)})){for(var F=0;F<h.length;++F)if(h.indexOf(D.keyPath[F])===-1)return!1;return!0}return!1}).sort(function(D,F){return D.keyPath.length-F.keyPath.length})[0];if(g&&this.db._maxKey!==ur){var x=g.keyPath.slice(0,h.length);return this.where(x).equals(x.map(function(F){return d[F]}))}!g&&fe&&console.warn("The query ".concat(JSON.stringify(d)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(h.join("+"),"]"));var y=this.schema.idxByName;function b(D,F){return st(D,F)===0}var O=h.reduce(function(R,F){var B=R[0],z=R[1],R=y[F],H=d[F];return[B||R,B||!R?dr(z,R&&R.multi?function(L){return L=T(L,F),a(L)&&L.some(function(N){return b(H,N)})}:function(L){return b(H,T(L,F))}):z]},[null,null]),x=O[0],O=O[1];return x?this.where(x.name).equals(d[x.keyPath]).filter(O):g?this.filter(O):this.where(h).equals("")},xt.prototype.filter=function(d){return this.toCollection().and(d)},xt.prototype.count=function(d){return this.toCollection().count(d)},xt.prototype.offset=function(d){return this.toCollection().offset(d)},xt.prototype.limit=function(d){return this.toCollection().limit(d)},xt.prototype.each=function(d){return this.toCollection().each(d)},xt.prototype.toArray=function(d){return this.toCollection().toArray(d)},xt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},xt.prototype.orderBy=function(d){return new this.db.Collection(new this.db.WhereClause(this,a(d)?"[".concat(d.join("+"),"]"):d))},xt.prototype.reverse=function(){return this.toCollection().reverse()},xt.prototype.mapToClass=function(d){var h,g=this.db,y=this.name;function b(){return h!==null&&h.apply(this,arguments)||this}(this.schema.mappedClass=d).prototype instanceof Rf&&((function(F,B){if(typeof B!="function"&&B!==null)throw new TypeError("Class extends value "+String(B)+" is not a constructor or null");function z(){this.constructor=F}n(F,B),F.prototype=B===null?Object.create(B):(z.prototype=B.prototype,new z)})(b,h=d),Object.defineProperty(b.prototype,"db",{get:function(){return g},enumerable:!1,configurable:!0}),b.prototype.table=function(){return y},d=b);for(var x=new Set,O=d.prototype;O;O=c(O))Object.getOwnPropertyNames(O).forEach(function(F){return x.add(F)});function D(F){if(!F)return F;var B,z=Object.create(d.prototype);for(B in F)if(!x.has(B))try{z[B]=F[B]}catch{}return z}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=D,this.hook("reading",D),d},xt.prototype.defineClass=function(){return this.mapToClass(function(d){l(this,d)})},xt.prototype.add=function(d,h){var g=this,y=this.schema.primKey,b=y.auto,x=y.keyPath,O=d;return x&&b&&(O=ma(x)(d)),this._trans("readwrite",function(D){return g.core.mutate({trans:D,type:"add",keys:h!=null?[h]:null,values:[O]})}).then(function(D){return D.numFailures?Te.reject(D.failures[0]):D.lastResult}).then(function(D){if(x)try{G(d,x,D)}catch{}return D})},xt.prototype.update=function(d,h){return typeof d!="object"||a(d)?this.where(":id").equals(d).modify(h):(d=T(d,this.schema.primKey.keyPath),d===void 0?Mt(new se.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(d).modify(h))},xt.prototype.put=function(d,h){var g=this,y=this.schema.primKey,b=y.auto,x=y.keyPath,O=d;return x&&b&&(O=ma(x)(d)),this._trans("readwrite",function(D){return g.core.mutate({trans:D,type:"put",values:[O],keys:h!=null?[h]:null})}).then(function(D){return D.numFailures?Te.reject(D.failures[0]):D.lastResult}).then(function(D){if(x)try{G(d,x,D)}catch{}return D})},xt.prototype.delete=function(d){var h=this;return this._trans("readwrite",function(g){return h.core.mutate({trans:g,type:"delete",keys:[d]}).then(function(y){return ya(h,[d],y)}).then(function(y){return y.numFailures?Te.reject(y.failures[0]):void 0})})},xt.prototype.clear=function(){var d=this;return this._trans("readwrite",function(h){return d.core.mutate({trans:h,type:"deleteRange",range:Df}).then(function(g){return ya(d,null,g)})}).then(function(h){return h.numFailures?Te.reject(h.failures[0]):void 0})},xt.prototype.bulkGet=function(d){var h=this;return this._trans("readonly",function(g){return h.core.getMany({keys:d,trans:g}).then(function(y){return y.map(function(b){return h.hook.reading.fire(b)})})})},xt.prototype.bulkAdd=function(d,h,g){var y=this,b=Array.isArray(h)?h:void 0,x=(g=g||(b?void 0:h))?g.allKeys:void 0;return this._trans("readwrite",function(O){var B=y.schema.primKey,D=B.auto,B=B.keyPath;if(B&&b)throw new se.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(b&&b.length!==d.length)throw new se.InvalidArgument("Arguments objects and keys must have the same length");var F=d.length,B=B&&D?d.map(ma(B)):d;return y.core.mutate({trans:O,type:"add",keys:b,values:B,wantResults:x}).then(function(N){var R=N.numFailures,H=N.results,L=N.lastResult,N=N.failures;if(R===0)return x?H:L;throw new rt("".concat(y.name,".bulkAdd(): ").concat(R," of ").concat(F," operations failed"),N)})})},xt.prototype.bulkPut=function(d,h,g){var y=this,b=Array.isArray(h)?h:void 0,x=(g=g||(b?void 0:h))?g.allKeys:void 0;return this._trans("readwrite",function(O){var B=y.schema.primKey,D=B.auto,B=B.keyPath;if(B&&b)throw new se.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(b&&b.length!==d.length)throw new se.InvalidArgument("Arguments objects and keys must have the same length");var F=d.length,B=B&&D?d.map(ma(B)):d;return y.core.mutate({trans:O,type:"put",keys:b,values:B,wantResults:x}).then(function(N){var R=N.numFailures,H=N.results,L=N.lastResult,N=N.failures;if(R===0)return x?H:L;throw new rt("".concat(y.name,".bulkPut(): ").concat(R," of ").concat(F," operations failed"),N)})})},xt.prototype.bulkUpdate=function(d){var h=this,g=this.core,y=d.map(function(O){return O.key}),b=d.map(function(O){return O.changes}),x=[];return this._trans("readwrite",function(O){return g.getMany({trans:O,keys:y,cache:"clone"}).then(function(D){var F=[],B=[];d.forEach(function(R,H){var L=R.key,N=R.changes,W=D[H];if(W){for(var U=0,X=Object.keys(N);U<X.length;U++){var ne=X[U],re=N[ne];if(ne===h.schema.primKey.keyPath){if(st(re,L)!==0)throw new se.Constraint("Cannot update primary key in bulkUpdate()")}else G(W,ne,re)}x.push(H),F.push(L),B.push(W)}});var z=F.length;return g.mutate({trans:O,type:"put",keys:F,values:B,updates:{keys:y,changeSpecs:b}}).then(function(R){var H=R.numFailures,L=R.failures;if(H===0)return z;for(var N=0,W=Object.keys(L);N<W.length;N++){var U,X=W[N],ne=x[Number(X)];ne!=null&&(U=L[X],delete L[X],L[ne]=U)}throw new rt("".concat(h.name,".bulkUpdate(): ").concat(H," of ").concat(z," operations failed"),L)})})})},xt.prototype.bulkDelete=function(d){var h=this,g=d.length;return this._trans("readwrite",function(y){return h.core.mutate({trans:y,type:"delete",keys:d}).then(function(b){return ya(h,d,b)})}).then(function(O){var b=O.numFailures,x=O.lastResult,O=O.failures;if(b===0)return x;throw new rt("".concat(h.name,".bulkDelete(): ").concat(b," of ").concat(g," operations failed"),O)})},xt);function xt(){}function Ni(d){function h(O,D){if(D){for(var F=arguments.length,B=new Array(F-1);--F;)B[F-1]=arguments[F];return g[O].subscribe.apply(null,B),d}if(typeof O=="string")return g[O]}var g={};h.addEventType=x;for(var y=1,b=arguments.length;y<b;++y)x(arguments[y]);return h;function x(O,D,F){if(typeof O!="object"){var B;D=D||xe;var z={subscribers:[],fire:F=F||M,subscribe:function(R){z.subscribers.indexOf(R)===-1&&(z.subscribers.push(R),z.fire=D(z.fire,R))},unsubscribe:function(R){z.subscribers=z.subscribers.filter(function(H){return H!==R}),z.fire=z.subscribers.reduce(D,F)}};return g[O]=h[O]=z}o(B=O).forEach(function(R){var H=B[R];if(a(H))x(R,B[R][0],B[R][1]);else{if(H!=="asap")throw new se.InvalidArgument("Invalid event config");var L=x(R,$,function(){for(var N=arguments.length,W=new Array(N);N--;)W[N]=arguments[N];L.subscribers.forEach(function(U){I(function(){U.apply(null,W)})})})}})}}function zi(d,h){return _(h).from({prototype:d}),h}function ei(d,h){return!(d.filter||d.algorithm||d.or)&&(h?d.justLimit:!d.replayFilter)}function Oc(d,h){d.filter=dr(d.filter,h)}function Mc(d,h,g){var y=d.replayFilter;d.replayFilter=y?function(){return dr(y(),h())}:h,d.justLimit=g&&!y}function va(d,h){if(d.isPrimKey)return h.primaryKey;var g=h.getIndexByKeyPath(d.index);if(!g)throw new se.Schema("KeyPath "+d.index+" on object store "+h.name+" is not indexed");return g}function Bf(d,h,g){var y=va(d,h.schema);return h.openCursor({trans:g,values:!d.keysOnly,reverse:d.dir==="prev",unique:!!d.unique,query:{index:y,range:d.range}})}function ba(d,h,g,y){var b=d.replayFilter?dr(d.filter,d.replayFilter()):d.filter;if(d.or){var x={},O=function(D,F,B){var z,R;b&&!b(F,B,function(H){return F.stop(H)},function(H){return F.fail(H)})||((R=""+(z=F.primaryKey))=="[object ArrayBuffer]"&&(R=""+new Uint8Array(z)),f(x,R)||(x[R]=!0,h(D,F,B)))};return Promise.all([d.or._iterate(O,g),jf(Bf(d,y,g),d.algorithm,O,!d.keysOnly&&d.valueMapper)])}return jf(Bf(d,y,g),dr(d.algorithm,b),h,!d.keysOnly&&d.valueMapper)}function jf(d,h,g,y){var b=Ct(y?function(x,O,D){return g(y(x),O,D)}:g);return d.then(function(x){if(x)return x.start(function(){var O=function(){return x.continue()};h&&!h(x,function(D){return O=D},function(D){x.stop(D),O=M},function(D){x.fail(D),O=M})||b(x.value,x,function(D){return O=D}),O()})})}var Ui=(Nf.prototype.execute=function(d){var h=this["@@propmod"];if(h.add!==void 0){var g=h.add;if(a(g))return r(r([],a(d)?d:[],!0),g).sort();if(typeof g=="number")return(Number(d)||0)+g;if(typeof g=="bigint")try{return BigInt(d)+g}catch{return BigInt(0)+g}throw new TypeError("Invalid term ".concat(g))}if(h.remove!==void 0){var y=h.remove;if(a(y))return a(d)?d.filter(function(b){return!y.includes(b)}).sort():[];if(typeof y=="number")return Number(d)-y;if(typeof y=="bigint")try{return BigInt(d)-y}catch{return BigInt(0)-y}throw new TypeError("Invalid subtrahend ".concat(y))}return g=(g=h.replacePrefix)===null||g===void 0?void 0:g[0],g&&typeof d=="string"&&d.startsWith(g)?h.replacePrefix[1]+d.substring(g.length):d},Nf);function Nf(d){this["@@propmod"]=d}var m_=(ct.prototype._read=function(d,h){var g=this._ctx;return g.error?g.table._trans(null,Mt.bind(null,g.error)):g.table._trans("readonly",d).then(h)},ct.prototype._write=function(d){var h=this._ctx;return h.error?h.table._trans(null,Mt.bind(null,h.error)):h.table._trans("readwrite",d,"locked")},ct.prototype._addAlgorithm=function(d){var h=this._ctx;h.algorithm=dr(h.algorithm,d)},ct.prototype._iterate=function(d,h){return ba(this._ctx,d,h,this._ctx.table.core)},ct.prototype.clone=function(d){var h=Object.create(this.constructor.prototype),g=Object.create(this._ctx);return d&&l(g,d),h._ctx=g,h},ct.prototype.raw=function(){return this._ctx.valueMapper=null,this},ct.prototype.each=function(d){var h=this._ctx;return this._read(function(g){return ba(h,d,g,h.table.core)})},ct.prototype.count=function(d){var h=this;return this._read(function(g){var y=h._ctx,b=y.table.core;if(ei(y,!0))return b.count({trans:g,query:{index:va(y,b.schema),range:y.range}}).then(function(O){return Math.min(O,y.limit)});var x=0;return ba(y,function(){return++x,!1},g,b).then(function(){return x})}).then(d)},ct.prototype.sortBy=function(d,h){var g=d.split(".").reverse(),y=g[0],b=g.length-1;function x(F,B){return B?x(F[g[B]],B-1):F[y]}var O=this._ctx.dir==="next"?1:-1;function D(F,B){return st(x(F,b),x(B,b))*O}return this.toArray(function(F){return F.sort(D)}).then(h)},ct.prototype.toArray=function(d){var h=this;return this._read(function(g){var y=h._ctx;if(y.dir==="next"&&ei(y,!0)&&0<y.limit){var b=y.valueMapper,x=va(y,y.table.core.schema);return y.table.core.query({trans:g,limit:y.limit,values:!0,query:{index:x,range:y.range}}).then(function(D){return D=D.result,b?D.map(b):D})}var O=[];return ba(y,function(D){return O.push(D)},g,y.table.core).then(function(){return O})},d)},ct.prototype.offset=function(d){var h=this._ctx;return d<=0||(h.offset+=d,ei(h)?Mc(h,function(){var g=d;return function(y,b){return g===0||(g===1?--g:b(function(){y.advance(g),g=0}),!1)}}):Mc(h,function(){var g=d;return function(){return--g<0}})),this},ct.prototype.limit=function(d){return this._ctx.limit=Math.min(this._ctx.limit,d),Mc(this._ctx,function(){var h=d;return function(g,y,b){return--h<=0&&y(b),0<=h}},!0),this},ct.prototype.until=function(d,h){return Oc(this._ctx,function(g,y,b){return!d(g.value)||(y(b),h)}),this},ct.prototype.first=function(d){return this.limit(1).toArray(function(h){return h[0]}).then(d)},ct.prototype.last=function(d){return this.reverse().first(d)},ct.prototype.filter=function(d){var h;return Oc(this._ctx,function(g){return d(g.value)}),(h=this._ctx).isMatch=dr(h.isMatch,d),this},ct.prototype.and=function(d){return this.filter(d)},ct.prototype.or=function(d){return new this.db.WhereClause(this._ctx.table,d,this)},ct.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},ct.prototype.desc=function(){return this.reverse()},ct.prototype.eachKey=function(d){var h=this._ctx;return h.keysOnly=!h.isMatch,this.each(function(g,y){d(y.key,y)})},ct.prototype.eachUniqueKey=function(d){return this._ctx.unique="unique",this.eachKey(d)},ct.prototype.eachPrimaryKey=function(d){var h=this._ctx;return h.keysOnly=!h.isMatch,this.each(function(g,y){d(y.primaryKey,y)})},ct.prototype.keys=function(d){var h=this._ctx;h.keysOnly=!h.isMatch;var g=[];return this.each(function(y,b){g.push(b.key)}).then(function(){return g}).then(d)},ct.prototype.primaryKeys=function(d){var h=this._ctx;if(h.dir==="next"&&ei(h,!0)&&0<h.limit)return this._read(function(y){var b=va(h,h.table.core.schema);return h.table.core.query({trans:y,values:!1,limit:h.limit,query:{index:b,range:h.range}})}).then(function(y){return y.result}).then(d);h.keysOnly=!h.isMatch;var g=[];return this.each(function(y,b){g.push(b.primaryKey)}).then(function(){return g}).then(d)},ct.prototype.uniqueKeys=function(d){return this._ctx.unique="unique",this.keys(d)},ct.prototype.firstKey=function(d){return this.limit(1).keys(function(h){return h[0]}).then(d)},ct.prototype.lastKey=function(d){return this.reverse().firstKey(d)},ct.prototype.distinct=function(){var d=this._ctx,d=d.index&&d.table.schema.idxByName[d.index];if(!d||!d.multi)return this;var h={};return Oc(this._ctx,function(b){var y=b.primaryKey.toString(),b=f(h,y);return h[y]=!0,!b}),this},ct.prototype.modify=function(d){var h=this,g=this._ctx;return this._write(function(y){var b,x,O;O=typeof d=="function"?d:(b=o(d),x=b.length,function(X){for(var ne=!1,re=0;re<x;++re){var ie=b[re],pe=d[ie],be=T(X,ie);pe instanceof Ui?(G(X,ie,pe.execute(be)),ne=!0):be!==pe&&(G(X,ie,pe),ne=!0)}return ne});var D=g.table.core,R=D.schema.primaryKey,F=R.outbound,B=R.extractKey,z=200,R=h.db._options.modifyChunkSize;R&&(z=typeof R=="object"?R[D.name]||R["*"]||200:R);function H(X,ie){var re=ie.failures,ie=ie.numFailures;N+=X-ie;for(var pe=0,be=o(re);pe<be.length;pe++){var me=be[pe];L.push(re[me])}}var L=[],N=0,W=[],U=d===zf;return h.clone().primaryKeys().then(function(X){function ne(ie){var pe=Math.min(z,X.length-ie),be=X.slice(ie,ie+pe);return(U?Promise.resolve([]):D.getMany({trans:y,keys:be,cache:"immutable"})).then(function(me){var ye=[],Oe=[],Ce=F?[]:null,De=U?be:[];if(!U)for(var Xe=0;Xe<pe;++Xe){var ot=me[Xe],Ke={value:de(ot),primKey:X[ie+Xe]};O.call(Ke,Ke.value,Ke)!==!1&&(Ke.value==null?De.push(X[ie+Xe]):F||st(B(ot),B(Ke.value))===0?(Oe.push(Ke.value),F&&Ce.push(X[ie+Xe])):(De.push(X[ie+Xe]),ye.push(Ke.value)))}return Promise.resolve(0<ye.length&&D.mutate({trans:y,type:"add",values:ye}).then(function(Et){for(var Ve in Et.failures)De.splice(parseInt(Ve),1);H(ye.length,Et)})).then(function(){return(0<Oe.length||re&&typeof d=="object")&&D.mutate({trans:y,type:"put",keys:Ce,values:Oe,criteria:re,changeSpec:typeof d!="function"&&d,isAdditionalChunk:0<ie}).then(function(Et){return H(Oe.length,Et)})}).then(function(){return(0<De.length||re&&U)&&D.mutate({trans:y,type:"delete",keys:De,criteria:re,isAdditionalChunk:0<ie}).then(function(Et){return ya(g.table,De,Et)}).then(function(Et){return H(De.length,Et)})}).then(function(){return X.length>ie+pe&&ne(ie+z)})})}var re=ei(g)&&g.limit===1/0&&(typeof d!="function"||U)&&{index:g.index,range:g.range};return ne(0).then(function(){if(0<L.length)throw new gt("Error modifying one or more objects",L,N,W);return X.length})})})},ct.prototype.delete=function(){var d=this._ctx,h=d.range;return!ei(d)||d.table.schema.yProps||!d.isPrimKey&&h.type!==3?this.modify(zf):this._write(function(g){var y=d.table.core.schema.primaryKey,b=h;return d.table.core.count({trans:g,query:{index:y,range:b}}).then(function(x){return d.table.core.mutate({trans:g,type:"deleteRange",range:b}).then(function(F){var D=F.failures,F=F.numFailures;if(F)throw new gt("Could not delete some values",Object.keys(D).map(function(B){return D[B]}),x-F);return x-F})})})},ct);function ct(){}var zf=function(d,h){return h.value=null};function y_(d,h){return d<h?-1:d===h?0:1}function v_(d,h){return h<d?-1:d===h?0:1}function wn(d,h,g){return d=d instanceof qf?new d.Collection(d):d,d._ctx.error=new(g||TypeError)(h),d}function ti(d){return new d.Collection(d,function(){return Uf("")}).limit(0)}function _a(d,h,g,y){var b,x,O,D,F,B,z,R=g.length;if(!g.every(function(N){return typeof N=="string"}))return wn(d,Tf);function H(N){b=N==="next"?function(U){return U.toUpperCase()}:function(U){return U.toLowerCase()},x=N==="next"?function(U){return U.toLowerCase()}:function(U){return U.toUpperCase()},O=N==="next"?y_:v_;var W=g.map(function(U){return{lower:x(U),upper:b(U)}}).sort(function(U,X){return O(U.lower,X.lower)});D=W.map(function(U){return U.upper}),F=W.map(function(U){return U.lower}),z=(B=N)==="next"?"":y}H("next"),d=new d.Collection(d,function(){return Fs(D[0],F[R-1]+y)}),d._ondirectionchange=function(N){H(N)};var L=0;return d._addAlgorithm(function(N,W,U){var X=N.key;if(typeof X!="string")return!1;var ne=x(X);if(h(ne,F,L))return!0;for(var re=null,ie=L;ie<R;++ie){var pe=(function(be,me,ye,Oe,Ce,De){for(var Xe=Math.min(be.length,Oe.length),ot=-1,Ke=0;Ke<Xe;++Ke){var Et=me[Ke];if(Et!==Oe[Ke])return Ce(be[Ke],ye[Ke])<0?be.substr(0,Ke)+ye[Ke]+ye.substr(Ke+1):Ce(be[Ke],Oe[Ke])<0?be.substr(0,Ke)+Oe[Ke]+ye.substr(Ke+1):0<=ot?be.substr(0,ot)+me[ot]+ye.substr(ot+1):null;Ce(be[Ke],Et)<0&&(ot=Ke)}return Xe<Oe.length&&De==="next"?be+ye.substr(be.length):Xe<be.length&&De==="prev"?be.substr(0,ye.length):ot<0?null:be.substr(0,ot)+Oe[ot]+ye.substr(ot+1)})(X,ne,D[ie],F[ie],O,B);pe===null&&re===null?L=ie+1:(re===null||0<O(re,pe))&&(re=pe)}return W(re!==null?function(){N.continue(re+z)}:U),!1}),d}function Fs(d,h,g,y){return{type:2,lower:d,upper:h,lowerOpen:g,upperOpen:y}}function Uf(d){return{type:1,lower:d,upper:d}}var qf=(Object.defineProperty(Ut.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Ut.prototype.between=function(d,h,g,y){g=g!==!1,y=y===!0;try{return 0<this._cmp(d,h)||this._cmp(d,h)===0&&(g||y)&&(!g||!y)?ti(this):new this.Collection(this,function(){return Fs(d,h,!g,!y)})}catch{return wn(this,ds)}},Ut.prototype.equals=function(d){return d==null?wn(this,ds):new this.Collection(this,function(){return Uf(d)})},Ut.prototype.above=function(d){return d==null?wn(this,ds):new this.Collection(this,function(){return Fs(d,void 0,!0)})},Ut.prototype.aboveOrEqual=function(d){return d==null?wn(this,ds):new this.Collection(this,function(){return Fs(d,void 0,!1)})},Ut.prototype.below=function(d){return d==null?wn(this,ds):new this.Collection(this,function(){return Fs(void 0,d,!1,!0)})},Ut.prototype.belowOrEqual=function(d){return d==null?wn(this,ds):new this.Collection(this,function(){return Fs(void 0,d)})},Ut.prototype.startsWith=function(d){return typeof d!="string"?wn(this,Tf):this.between(d,d+ur,!0,!0)},Ut.prototype.startsWithIgnoreCase=function(d){return d===""?this.startsWith(d):_a(this,function(h,g){return h.indexOf(g[0])===0},[d],ur)},Ut.prototype.equalsIgnoreCase=function(d){return _a(this,function(h,g){return h===g[0]},[d],"")},Ut.prototype.anyOfIgnoreCase=function(){var d=Y.apply(ee,arguments);return d.length===0?ti(this):_a(this,function(h,g){return g.indexOf(h)!==-1},d,"")},Ut.prototype.startsWithAnyOfIgnoreCase=function(){var d=Y.apply(ee,arguments);return d.length===0?ti(this):_a(this,function(h,g){return g.some(function(y){return h.indexOf(y)===0})},d,ur)},Ut.prototype.anyOf=function(){var d=this,h=Y.apply(ee,arguments),g=this._cmp;try{h.sort(g)}catch{return wn(this,ds)}if(h.length===0)return ti(this);var y=new this.Collection(this,function(){return Fs(h[0],h[h.length-1])});y._ondirectionchange=function(x){g=x==="next"?d._ascending:d._descending,h.sort(g)};var b=0;return y._addAlgorithm(function(x,O,D){for(var F=x.key;0<g(F,h[b]);)if(++b===h.length)return O(D),!1;return g(F,h[b])===0||(O(function(){x.continue(h[b])}),!1)}),y},Ut.prototype.notEqual=function(d){return this.inAnyRange([[-1/0,d],[d,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Ut.prototype.noneOf=function(){var d=Y.apply(ee,arguments);if(d.length===0)return new this.Collection(this);try{d.sort(this._ascending)}catch{return wn(this,ds)}var h=d.reduce(function(g,y){return g?g.concat([[g[g.length-1][1],y]]):[[-1/0,y]]},null);return h.push([d[d.length-1],this.db._maxKey]),this.inAnyRange(h,{includeLowers:!1,includeUppers:!1})},Ut.prototype.inAnyRange=function(X,h){var g=this,y=this._cmp,b=this._ascending,x=this._descending,O=this._min,D=this._max;if(X.length===0)return ti(this);if(!X.every(function(ne){return ne[0]!==void 0&&ne[1]!==void 0&&b(ne[0],ne[1])<=0}))return wn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",se.InvalidArgument);var F=!h||h.includeLowers!==!1,B=h&&h.includeUppers===!0,z,R=b;function H(ne,re){return R(ne[0],re[0])}try{(z=X.reduce(function(ne,re){for(var ie=0,pe=ne.length;ie<pe;++ie){var be=ne[ie];if(y(re[0],be[1])<0&&0<y(re[1],be[0])){be[0]=O(be[0],re[0]),be[1]=D(be[1],re[1]);break}}return ie===pe&&ne.push(re),ne},[])).sort(H)}catch{return wn(this,ds)}var L=0,N=B?function(ne){return 0<b(ne,z[L][1])}:function(ne){return 0<=b(ne,z[L][1])},W=F?function(ne){return 0<x(ne,z[L][0])}:function(ne){return 0<=x(ne,z[L][0])},U=N,X=new this.Collection(this,function(){return Fs(z[0][0],z[z.length-1][1],!F,!B)});return X._ondirectionchange=function(ne){R=ne==="next"?(U=N,b):(U=W,x),z.sort(H)},X._addAlgorithm(function(ne,re,ie){for(var pe,be=ne.key;U(be);)if(++L===z.length)return re(ie),!1;return!N(pe=be)&&!W(pe)||(g._cmp(be,z[L][1])===0||g._cmp(be,z[L][0])===0||re(function(){R===b?ne.continue(z[L][0]):ne.continue(z[L][1])}),!1)}),X},Ut.prototype.startsWithAnyOf=function(){var d=Y.apply(ee,arguments);return d.every(function(h){return typeof h=="string"})?d.length===0?ti(this):this.inAnyRange(d.map(function(h){return[h,h+ur]})):wn(this,"startsWithAnyOf() only works with strings")},Ut);function Ut(){}function Xn(d){return Ct(function(h){return qi(h),d(h.target.error),!1})}function qi(d){d.stopPropagation&&d.stopPropagation(),d.preventDefault&&d.preventDefault()}var Wi="storagemutated",Tc="x-storagemutated-1",Ls=Ni(null,Wi),b_=(Qn.prototype._lock=function(){return C(!Re.global),++this._reculock,this._reculock!==1||Re.global||(Re.lockOwnerFor=this),this},Qn.prototype._unlock=function(){if(C(!Re.global),--this._reculock==0)for(Re.global||(Re.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var d=this._blockedFuncs.shift();try{cr(d[1],d[0])}catch{}}return this},Qn.prototype._locked=function(){return this._reculock&&Re.lockOwnerFor!==this},Qn.prototype.create=function(d){var h=this;if(!this.mode)return this;var g=this.db.idbdb,y=this.db._state.dbOpenError;if(C(!this.idbtrans),!d&&!g)switch(y&&y.name){case"DatabaseClosedError":throw new se.DatabaseClosed(y);case"MissingAPIError":throw new se.MissingAPI(y.message,y);default:throw new se.OpenFailed(y)}if(!this.active)throw new se.TransactionInactive;return C(this._completion._state===null),(d=this.idbtrans=d||(this.db.core||g).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Ct(function(b){qi(b),h._reject(d.error)}),d.onabort=Ct(function(b){qi(b),h.active&&h._reject(new se.Abort(d.error)),h.active=!1,h.on("abort").fire(b)}),d.oncomplete=Ct(function(){h.active=!1,h._resolve(),"mutatedParts"in d&&Ls.storagemutated.fire(d.mutatedParts)}),this},Qn.prototype._promise=function(d,h,g){var y=this;if(d==="readwrite"&&this.mode!=="readwrite")return Mt(new se.ReadOnly("Transaction is readonly"));if(!this.active)return Mt(new se.TransactionInactive);if(this._locked())return new Te(function(x,O){y._blockedFuncs.push([function(){y._promise(d,h,g).then(x,O)},Re])});if(g)return Ds(function(){var x=new Te(function(O,D){y._lock();var F=h(O,D,y);F&&F.then&&F.then(O,D)});return x.finally(function(){return y._unlock()}),x._lib=!0,x});var b=new Te(function(x,O){var D=h(x,O,y);D&&D.then&&D.then(x,O)});return b._lib=!0,b},Qn.prototype._root=function(){return this.parent?this.parent._root():this},Qn.prototype.waitFor=function(d){var h,g=this._root(),y=Te.resolve(d);g._waitingFor?g._waitingFor=g._waitingFor.then(function(){return y}):(g._waitingFor=y,g._waitingQueue=[],h=g.idbtrans.objectStore(g.storeNames[0]),(function x(){for(++g._spinCount;g._waitingQueue.length;)g._waitingQueue.shift()();g._waitingFor&&(h.get(-1/0).onsuccess=x)})());var b=g._waitingFor;return new Te(function(x,O){y.then(function(D){return g._waitingQueue.push(Ct(x.bind(null,D)))},function(D){return g._waitingQueue.push(Ct(O.bind(null,D)))}).finally(function(){g._waitingFor===b&&(g._waitingFor=null)})})},Qn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new se.Abort))},Qn.prototype.table=function(d){var h=this._memoizedTables||(this._memoizedTables={});if(f(h,d))return h[d];var g=this.schema[d];if(!g)throw new se.NotFound("Table "+d+" not part of transaction");return g=new this.db.Table(d,g,this),g.core=this.db.core.table(d),h[d]=g},Qn);function Qn(){}function Dc(d,h,g,y,b,x,O,D){return{name:d,keyPath:h,unique:g,multi:y,auto:b,compound:x,src:(g&&!O?"&":"")+(y?"*":"")+(b?"++":"")+Wf(h),type:D}}function Wf(d){return typeof d=="string"?d:d?"["+[].join.call(d,"+")+"]":""}function Rc(d,h,g){return{name:d,primKey:h,indexes:g,mappedClass:null,idxByName:(y=function(b){return[b.name,b]},g.reduce(function(b,x,O){return O=y(x,O),O&&(b[O[0]]=O[1]),b},{}))};var y}var Vi=function(d){try{return d.only([[]]),Vi=function(){return[[]]},[[]]}catch{return Vi=function(){return ur},ur}};function $c(d){return d==null?function(){}:typeof d=="string"?(h=d).split(".").length===1?function(g){return g[h]}:function(g){return T(g,h)}:function(g){return T(g,d)};var h}function Vf(d){return[].slice.call(d)}var __=0;function Hi(d){return d==null?":id":typeof d=="string"?d:"[".concat(d.join("+"),"]")}function w_(d,h,F){function y(U){if(U.type===3)return null;if(U.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var L=U.lower,N=U.upper,W=U.lowerOpen,U=U.upperOpen;return L===void 0?N===void 0?null:h.upperBound(N,!!U):N===void 0?h.lowerBound(L,!!W):h.bound(L,N,!!W,!!U)}function b(H){var L,N=H.name;return{name:N,schema:H,mutate:function(W){var U=W.trans,X=W.type,ne=W.keys,re=W.values,ie=W.range;return new Promise(function(pe,be){pe=Ct(pe);var me=U.objectStore(N),ye=me.keyPath==null,Oe=X==="put"||X==="add";if(!Oe&&X!=="delete"&&X!=="deleteRange")throw new Error("Invalid operation type: "+X);var Ce,De=(ne||re||{length:1}).length;if(ne&&re&&ne.length!==re.length)throw new Error("Given keys array must have same length as given values array.");if(De===0)return pe({numFailures:0,failures:{},results:[],lastResult:void 0});function Xe(un){++Et,qi(un)}var ot=[],Ke=[],Et=0;if(X==="deleteRange"){if(ie.type===4)return pe({numFailures:Et,failures:Ke,results:[],lastResult:void 0});ie.type===3?ot.push(Ce=me.clear()):ot.push(Ce=me.delete(y(ie)))}else{var ye=Oe?ye?[re,ne]:[re,null]:[ne,null],Ve=ye[0],en=ye[1];if(Oe)for(var tn=0;tn<De;++tn)ot.push(Ce=en&&en[tn]!==void 0?me[X](Ve[tn],en[tn]):me[X](Ve[tn])),Ce.onerror=Xe;else for(tn=0;tn<De;++tn)ot.push(Ce=me[X](Ve[tn])),Ce.onerror=Xe}function Ta(un){un=un.target.result,ot.forEach(function(pr,Zc){return pr.error!=null&&(Ke[Zc]=pr.error)}),pe({numFailures:Et,failures:Ke,results:X==="delete"?ne:ot.map(function(pr){return pr.result}),lastResult:un})}Ce.onerror=function(un){Xe(un),Ta(un)},Ce.onsuccess=Ta})},getMany:function(W){var U=W.trans,X=W.keys;return new Promise(function(ne,re){ne=Ct(ne);for(var ie,pe=U.objectStore(N),be=X.length,me=new Array(be),ye=0,Oe=0,Ce=function(ot){ot=ot.target,me[ot._pos]=ot.result,++Oe===ye&&ne(me)},De=Xn(re),Xe=0;Xe<be;++Xe)X[Xe]!=null&&((ie=pe.get(X[Xe]))._pos=Xe,ie.onsuccess=Ce,ie.onerror=De,++ye);ye===0&&ne(me)})},get:function(W){var U=W.trans,X=W.key;return new Promise(function(ne,re){ne=Ct(ne);var ie=U.objectStore(N).get(X);ie.onsuccess=function(pe){return ne(pe.target.result)},ie.onerror=Xn(re)})},query:(L=B,function(W){return new Promise(function(U,X){U=Ct(U);var ne,re,ie,ye=W.trans,pe=W.values,be=W.limit,Ce=W.query,me=be===1/0?void 0:be,Oe=Ce.index,Ce=Ce.range,ye=ye.objectStore(N),Oe=Oe.isPrimaryKey?ye:ye.index(Oe.name),Ce=y(Ce);if(be===0)return U({result:[]});L?((me=pe?Oe.getAll(Ce,me):Oe.getAllKeys(Ce,me)).onsuccess=function(De){return U({result:De.target.result})},me.onerror=Xn(X)):(ne=0,re=!pe&&"openKeyCursor"in Oe?Oe.openKeyCursor(Ce):Oe.openCursor(Ce),ie=[],re.onsuccess=function(De){var Xe=re.result;return Xe?(ie.push(pe?Xe.value:Xe.primaryKey),++ne===be?U({result:ie}):void Xe.continue()):U({result:ie})},re.onerror=Xn(X))})}),openCursor:function(W){var U=W.trans,X=W.values,ne=W.query,re=W.reverse,ie=W.unique;return new Promise(function(pe,be){pe=Ct(pe);var Oe=ne.index,me=ne.range,ye=U.objectStore(N),ye=Oe.isPrimaryKey?ye:ye.index(Oe.name),Oe=re?ie?"prevunique":"prev":ie?"nextunique":"next",Ce=!X&&"openKeyCursor"in ye?ye.openKeyCursor(y(me),Oe):ye.openCursor(y(me),Oe);Ce.onerror=Xn(be),Ce.onsuccess=Ct(function(De){var Xe,ot,Ke,Et,Ve=Ce.result;Ve?(Ve.___id=++__,Ve.done=!1,Xe=Ve.continue.bind(Ve),ot=(ot=Ve.continuePrimaryKey)&&ot.bind(Ve),Ke=Ve.advance.bind(Ve),Et=function(){throw new Error("Cursor not stopped")},Ve.trans=U,Ve.stop=Ve.continue=Ve.continuePrimaryKey=Ve.advance=function(){throw new Error("Cursor not started")},Ve.fail=Ct(be),Ve.next=function(){var en=this,tn=1;return this.start(function(){return tn--?en.continue():en.stop()}).then(function(){return en})},Ve.start=function(en){function tn(){if(Ce.result)try{en()}catch(un){Ve.fail(un)}else Ve.done=!0,Ve.start=function(){throw new Error("Cursor behind last entry")},Ve.stop()}var Ta=new Promise(function(un,pr){un=Ct(un),Ce.onerror=Xn(pr),Ve.fail=pr,Ve.stop=function(Zc){Ve.stop=Ve.continue=Ve.continuePrimaryKey=Ve.advance=Et,un(Zc)}});return Ce.onsuccess=Ct(function(un){Ce.onsuccess=tn,tn()}),Ve.continue=Xe,Ve.continuePrimaryKey=ot,Ve.advance=Ke,tn(),Ta},pe(Ve)):pe(null)},be)})},count:function(W){var U=W.query,X=W.trans,ne=U.index,re=U.range;return new Promise(function(ie,pe){var be=X.objectStore(N),me=ne.isPrimaryKey?be:be.index(ne.name),be=y(re),me=be?me.count(be):me.count();me.onsuccess=Ct(function(ye){return ie(ye.target.result)}),me.onerror=Xn(pe)})}}}var x,O,D,z=(O=F,D=Vf((x=d).objectStoreNames),{schema:{name:x.name,tables:D.map(function(H){return O.objectStore(H)}).map(function(H){var L=H.keyPath,U=H.autoIncrement,N=a(L),W={},U={name:H.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:L==null,compound:N,keyPath:L,autoIncrement:U,unique:!0,extractKey:$c(L)},indexes:Vf(H.indexNames).map(function(X){return H.index(X)}).map(function(ie){var ne=ie.name,re=ie.unique,pe=ie.multiEntry,ie=ie.keyPath,pe={name:ne,compound:a(ie),keyPath:ie,unique:re,multiEntry:pe,extractKey:$c(ie)};return W[Hi(ie)]=pe}),getIndexByKeyPath:function(X){return W[Hi(X)]}};return W[":id"]=U.primaryKey,L!=null&&(W[Hi(L)]=U.primaryKey),U})},hasGetAll:0<D.length&&"getAll"in O.objectStore(D[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),F=z.schema,B=z.hasGetAll,z=F.tables.map(b),R={};return z.forEach(function(H){return R[H.name]=H}),{stack:"dbcore",transaction:d.transaction.bind(d),table:function(H){if(!R[H])throw new Error("Table '".concat(H,"' not found"));return R[H]},MIN_KEY:-1/0,MAX_KEY:Vi(h),schema:F}}function x_(d,h,g,y){var b=g.IDBKeyRange;return g.indexedDB,{dbcore:(y=w_(h,b,y),d.dbcore.reduce(function(x,O){return O=O.create,s(s({},x),O(x))},y))}}function wa(d,y){var g=y.db,y=x_(d._middlewares,g,d._deps,y);d.core=y.dbcore,d.tables.forEach(function(b){var x=b.name;d.core.schema.tables.some(function(O){return O.name===x})&&(b.core=d.core.table(x),d[x]instanceof d.Table&&(d[x].core=b.core))})}function xa(d,h,g,y){g.forEach(function(b){var x=y[b];h.forEach(function(O){var D=(function F(B,z){return k(B,z)||(B=c(B))&&F(B,z)})(O,b);(!D||"value"in D&&D.value===void 0)&&(O===d.Transaction.prototype||O instanceof d.Transaction?v(O,b,{get:function(){return this.table(b)},set:function(F){m(this,b,{value:F,writable:!0,configurable:!0,enumerable:!0})}}):O[b]=new d.Table(b,x))})})}function Fc(d,h){h.forEach(function(g){for(var y in g)g[y]instanceof d.Table&&delete g[y]})}function k_(d,h){return d._cfg.version-h._cfg.version}function S_(d,h,g,y){var b=d._dbSchema;g.objectStoreNames.contains("$meta")&&!b.$meta&&(b.$meta=Rc("$meta",Kf("")[0],[]),d._storeNames.push("$meta"));var x=d._createTransaction("readwrite",d._storeNames,b);x.create(g),x._completion.catch(y);var O=x._reject.bind(x),D=Re.transless||Re;Ds(function(){return Re.trans=x,Re.transless=D,h!==0?(wa(d,g),B=h,((F=x).storeNames.includes("$meta")?F.table("$meta").get("version").then(function(z){return z??B}):Te.resolve(B)).then(function(z){return H=z,L=x,N=g,W=[],z=(R=d)._versions,U=R._dbSchema=Sa(0,R.idbdb,N),(z=z.filter(function(X){return X._cfg.version>=H})).length!==0?(z.forEach(function(X){W.push(function(){var ne=U,re=X._cfg.dbschema;Ca(R,ne,N),Ca(R,re,N),U=R._dbSchema=re;var ie=Lc(ne,re);ie.add.forEach(function(Oe){Bc(N,Oe[0],Oe[1].primKey,Oe[1].indexes)}),ie.change.forEach(function(Oe){if(Oe.recreate)throw new se.Upgrade("Not yet support for changing primary key");var Ce=N.objectStore(Oe.name);Oe.add.forEach(function(De){return ka(Ce,De)}),Oe.change.forEach(function(De){Ce.deleteIndex(De.name),ka(Ce,De)}),Oe.del.forEach(function(De){return Ce.deleteIndex(De)})});var pe=X._cfg.contentUpgrade;if(pe&&X._cfg.version>H){wa(R,N),L._memoizedTables={};var be=V(re);ie.del.forEach(function(Oe){be[Oe]=ne[Oe]}),Fc(R,[R.Transaction.prototype]),xa(R,[R.Transaction.prototype],o(be),be),L.schema=be;var me,ye=Le(pe);return ye&&Jr(),ie=Te.follow(function(){var Oe;(me=pe(L))&&ye&&(Oe=Rs.bind(null,null),me.then(Oe,Oe))}),me&&typeof me.then=="function"?Te.resolve(me):ie.then(function(){return me})}}),W.push(function(ne){var re,ie,pe=X._cfg.dbschema;re=pe,ie=ne,[].slice.call(ie.db.objectStoreNames).forEach(function(be){return re[be]==null&&ie.db.deleteObjectStore(be)}),Fc(R,[R.Transaction.prototype]),xa(R,[R.Transaction.prototype],R._storeNames,R._dbSchema),L.schema=R._dbSchema}),W.push(function(ne){R.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(R.idbdb.version/10)===X._cfg.version?(R.idbdb.deleteObjectStore("$meta"),delete R._dbSchema.$meta,R._storeNames=R._storeNames.filter(function(re){return re!=="$meta"})):ne.objectStore("$meta").put(X._cfg.version,"version"))})}),(function X(){return W.length?Te.resolve(W.shift()(L.idbtrans)).then(X):Te.resolve()})().then(function(){Hf(U,N)})):Te.resolve();var R,H,L,N,W,U}).catch(O)):(o(b).forEach(function(z){Bc(g,z,b[z].primKey,b[z].indexes)}),wa(d,g),void Te.follow(function(){return d.on.populate.fire(x)}).catch(O));var F,B})}function C_(d,h){Hf(d._dbSchema,h),h.db.version%10!=0||h.objectStoreNames.contains("$meta")||h.db.createObjectStore("$meta").add(Math.ceil(h.db.version/10-1),"version");var g=Sa(0,d.idbdb,h);Ca(d,d._dbSchema,h);for(var y=0,b=Lc(g,d._dbSchema).change;y<b.length;y++){var x=(function(O){if(O.change.length||O.recreate)return console.warn("Unable to patch indexes of table ".concat(O.name," because it has changes on the type of index or primary key.")),{value:void 0};var D=h.objectStore(O.name);O.add.forEach(function(F){fe&&console.debug("Dexie upgrade patch: Creating missing index ".concat(O.name,".").concat(F.src)),ka(D,F)})})(b[y]);if(typeof x=="object")return x.value}}function Lc(d,h){var g,y={del:[],add:[],change:[]};for(g in d)h[g]||y.del.push(g);for(g in h){var b=d[g],x=h[g];if(b){var O={name:g,def:x,recreate:!1,del:[],add:[],change:[]};if(""+(b.primKey.keyPath||"")!=""+(x.primKey.keyPath||"")||b.primKey.auto!==x.primKey.auto)O.recreate=!0,y.change.push(O);else{var D=b.idxByName,F=x.idxByName,B=void 0;for(B in D)F[B]||O.del.push(B);for(B in F){var z=D[B],R=F[B];z?z.src!==R.src&&O.change.push(R):O.add.push(R)}(0<O.del.length||0<O.add.length||0<O.change.length)&&y.change.push(O)}}else y.add.push([g,x])}return y}function Bc(d,h,g,y){var b=d.db.createObjectStore(h,g.keyPath?{keyPath:g.keyPath,autoIncrement:g.auto}:{autoIncrement:g.auto});return y.forEach(function(x){return ka(b,x)}),b}function Hf(d,h){o(d).forEach(function(g){h.db.objectStoreNames.contains(g)||(fe&&console.debug("Dexie: Creating missing table",g),Bc(h,g,d[g].primKey,d[g].indexes))})}function ka(d,h){d.createIndex(h.name,h.keyPath,{unique:h.unique,multiEntry:h.multi})}function Sa(d,h,g){var y={};return P(h.objectStoreNames,0).forEach(function(b){for(var x=g.objectStore(b),O=Dc(Wf(B=x.keyPath),B||"",!0,!1,!!x.autoIncrement,B&&typeof B!="string",!0),D=[],F=0;F<x.indexNames.length;++F){var z=x.index(x.indexNames[F]),B=z.keyPath,z=Dc(z.name,B,!!z.unique,!!z.multiEntry,!1,B&&typeof B!="string",!1);D.push(z)}y[b]=Rc(b,O,D)}),y}function Ca(d,h,g){for(var y=g.db.objectStoreNames,b=0;b<y.length;++b){var x=y[b],O=g.objectStore(x);d._hasGetAll="getAll"in O;for(var D=0;D<O.indexNames.length;++D){var F=O.indexNames[D],B=O.index(F).keyPath,z=typeof B=="string"?B:"["+P(B).join("+")+"]";!h[x]||(B=h[x].idxByName[z])&&(B.name=F,delete h[x].idxByName[z],h[x].idxByName[F]=B)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(d._hasGetAll=!1)}function Kf(d){return d.split(",").map(function(h,g){var x=h.split(":"),y=(b=x[1])===null||b===void 0?void 0:b.trim(),b=(h=x[0].trim()).replace(/([&*]|\+\+)/g,""),x=/^\[/.test(b)?b.match(/^\[(.*)\]$/)[1].split("+"):b;return Dc(b,x||null,/\&/.test(h),/\*/.test(h),/\+\+/.test(h),a(x),g===0,y)})}var P_=(ni.prototype._createTableSchema=Rc,ni.prototype._parseIndexSyntax=Kf,ni.prototype._parseStoresSpec=function(d,h){var g=this;o(d).forEach(function(y){if(d[y]!==null){var b=g._parseIndexSyntax(d[y]),x=b.shift();if(!x)throw new se.Schema("Invalid schema for table "+y+": "+d[y]);if(x.unique=!0,x.multi)throw new se.Schema("Primary key cannot be multiEntry*");b.forEach(function(O){if(O.auto)throw new se.Schema("Only primary key can be marked as autoIncrement (++)");if(!O.keyPath)throw new se.Schema("Index must have a name and cannot be an empty string")}),b=g._createTableSchema(y,x,b),h[y]=b}})},ni.prototype.stores=function(g){var h=this.db;this._cfg.storesSource=this._cfg.storesSource?l(this._cfg.storesSource,g):g;var g=h._versions,y={},b={};return g.forEach(function(x){l(y,x._cfg.storesSource),b=x._cfg.dbschema={},x._parseStoresSpec(y,b)}),h._dbSchema=b,Fc(h,[h._allTables,h,h.Transaction.prototype]),xa(h,[h._allTables,h,h.Transaction.prototype,this._cfg.tables],o(b),b),h._storeNames=o(b),this},ni.prototype.upgrade=function(d){return this._cfg.contentUpgrade=ve(this._cfg.contentUpgrade||M,d),this},ni);function ni(){}function jc(d,h){var g=d._dbNamesDB;return g||(g=d._dbNamesDB=new fs(ga,{addons:[],indexedDB:d,IDBKeyRange:h})).version(1).stores({dbnames:"name"}),g.table("dbnames")}function Nc(d){return d&&typeof d.databases=="function"}function zc(d){return Ds(function(){return Re.letThrough=!0,d()})}function Uc(d){return!("from"in d)}var Zt=function(d,h){if(!this){var g=new Zt;return d&&"d"in d&&l(g,d),g}l(this,arguments.length?{d:1,from:d,to:1<arguments.length?h:d}:{d:0})};function Ki(d,h,g){var y=st(h,g);if(!isNaN(y)){if(0<y)throw RangeError();if(Uc(d))return l(d,{from:h,to:g,d:1});var b=d.l,y=d.r;if(st(g,d.from)<0)return b?Ki(b,h,g):d.l={from:h,to:g,d:1,l:null,r:null},Gf(d);if(0<st(h,d.to))return y?Ki(y,h,g):d.r={from:h,to:g,d:1,l:null,r:null},Gf(d);st(h,d.from)<0&&(d.from=h,d.l=null,d.d=y?y.d+1:1),0<st(g,d.to)&&(d.to=g,d.r=null,d.d=d.l?d.l.d+1:1),g=!d.r,b&&!d.l&&Yi(d,b),y&&g&&Yi(d,y)}}function Yi(d,h){Uc(h)||(function g(y,F){var x=F.from,O=F.to,D=F.l,F=F.r;Ki(y,x,O),D&&g(y,D),F&&g(y,F)})(d,h)}function Yf(d,h){var g=Pa(h),y=g.next();if(y.done)return!1;for(var b=y.value,x=Pa(d),O=x.next(b.from),D=O.value;!y.done&&!O.done;){if(st(D.from,b.to)<=0&&0<=st(D.to,b.from))return!0;st(b.from,D.from)<0?b=(y=g.next(D.from)).value:D=(O=x.next(b.from)).value}return!1}function Pa(d){var h=Uc(d)?null:{s:0,n:d};return{next:function(g){for(var y=0<arguments.length;h;)switch(h.s){case 0:if(h.s=1,y)for(;h.n.l&&st(g,h.n.from)<0;)h={up:h,n:h.n.l,s:1};else for(;h.n.l;)h={up:h,n:h.n.l,s:1};case 1:if(h.s=2,!y||st(g,h.n.to)<=0)return{value:h.n,done:!1};case 2:if(h.n.r){h.s=3,h={up:h,n:h.n.r,s:0};continue}case 3:h=h.up}return{done:!0}}}}function Gf(d){var h,g,y=(((h=d.r)===null||h===void 0?void 0:h.d)||0)-(((g=d.l)===null||g===void 0?void 0:g.d)||0),b=1<y?"r":y<-1?"l":"";b&&(h=b=="r"?"l":"r",g=s({},d),y=d[b],d.from=y.from,d.to=y.to,d[b]=y[b],g[b]=y[h],(d[h]=g).d=Xf(g)),d.d=Xf(d)}function Xf(g){var h=g.r,g=g.l;return(h?g?Math.max(h.d,g.d):h.d:g?g.d:0)+1}function Aa(d,h){return o(h).forEach(function(g){d[g]?Yi(d[g],h[g]):d[g]=(function y(b){var x,O,D={};for(x in b)f(b,x)&&(O=b[x],D[x]=!O||typeof O!="object"||K.has(O.constructor)?O:y(O));return D})(h[g])}),d}function qc(d,h){return d.all||h.all||Object.keys(d).some(function(g){return h[g]&&Yf(h[g],d[g])})}p(Zt.prototype,((Tn={add:function(d){return Yi(this,d),this},addKey:function(d){return Ki(this,d,d),this},addKeys:function(d){var h=this;return d.forEach(function(g){return Ki(h,g,g)}),this},hasKey:function(d){var h=Pa(this).next(d).value;return h&&st(h.from,d)<=0&&0<=st(h.to,d)}})[Se]=function(){return Pa(this)},Tn));var fr={},Wc={},Vc=!1;function Ia(d){Aa(Wc,d),Vc||(Vc=!0,setTimeout(function(){Vc=!1,Hc(Wc,!(Wc={}))},0))}function Hc(d,h){h===void 0&&(h=!1);var g=new Set;if(d.all)for(var y=0,b=Object.values(fr);y<b.length;y++)Qf(O=b[y],d,g,h);else for(var x in d){var O,D=/^idb\:\/\/(.*)\/(.*)\//.exec(x);D&&(x=D[1],D=D[2],(O=fr["idb://".concat(x,"/").concat(D)])&&Qf(O,d,g,h))}g.forEach(function(F){return F()})}function Qf(d,h,g,y){for(var b=[],x=0,O=Object.entries(d.queries.query);x<O.length;x++){for(var D=O[x],F=D[0],B=[],z=0,R=D[1];z<R.length;z++){var H=R[z];qc(h,H.obsSet)?H.subscribers.forEach(function(U){return g.add(U)}):y&&B.push(H)}y&&b.push([F,B])}if(y)for(var L=0,N=b;L<N.length;L++){var W=N[L],F=W[0],B=W[1];d.queries.query[F]=B}}function A_(d){var h=d._state,g=d._deps.indexedDB;if(h.isBeingOpened||d.idbdb)return h.dbReadyPromise.then(function(){return h.dbOpenError?Mt(h.dbOpenError):d});h.isBeingOpened=!0,h.dbOpenError=null,h.openComplete=!1;var y=h.openCanceller,b=Math.round(10*d.verno),x=!1;function O(){if(h.openCanceller!==y)throw new se.DatabaseClosed("db.open() was cancelled")}function D(){return new Te(function(H,L){if(O(),!g)throw new se.MissingAPI;var N=d.name,W=h.autoSchema||!b?g.open(N):g.open(N,b);if(!W)throw new se.MissingAPI;W.onerror=Xn(L),W.onblocked=Ct(d._fireOnBlocked),W.onupgradeneeded=Ct(function(U){var X;z=W.transaction,h.autoSchema&&!d._options.allowEmptyDB?(W.onerror=qi,z.abort(),W.result.close(),(X=g.deleteDatabase(N)).onsuccess=X.onerror=Ct(function(){L(new se.NoSuchDatabase("Database ".concat(N," doesnt exist")))})):(z.onerror=Xn(L),U=U.oldVersion>Math.pow(2,62)?0:U.oldVersion,R=U<1,d.idbdb=W.result,x&&C_(d,z),S_(d,U/10,z,L))},L),W.onsuccess=Ct(function(){z=null;var U,X,ne,re,ie,pe=d.idbdb=W.result,be=P(pe.objectStoreNames);if(0<be.length)try{var me=pe.transaction((re=be).length===1?re[0]:re,"readonly");if(h.autoSchema)X=pe,ne=me,(U=d).verno=X.version/10,ne=U._dbSchema=Sa(0,X,ne),U._storeNames=P(X.objectStoreNames,0),xa(U,[U._allTables],o(ne),ne);else if(Ca(d,d._dbSchema,me),((ie=Lc(Sa(0,(ie=d).idbdb,me),ie._dbSchema)).add.length||ie.change.some(function(ye){return ye.add.length||ye.change.length}))&&!x)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),pe.close(),b=pe.version+1,x=!0,H(D());wa(d,me)}catch{}Zr.push(d),pe.onversionchange=Ct(function(ye){h.vcFired=!0,d.on("versionchange").fire(ye)}),pe.onclose=Ct(function(ye){d.on("close").fire(ye)}),R&&(ie=d._deps,me=N,pe=ie.indexedDB,ie=ie.IDBKeyRange,Nc(pe)||me===ga||jc(pe,ie).put({name:me}).catch(M)),H()},L)}).catch(function(H){switch(H?.name){case"UnknownError":if(0<h.PR1398_maxLoop)return h.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),D();break;case"VersionError":if(0<b)return b=0,D()}return Te.reject(H)})}var F,B=h.dbReadyResolve,z=null,R=!1;return Te.race([y,(typeof navigator>"u"?Te.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(H){function L(){return indexedDB.databases().finally(H)}F=setInterval(L,100),L()}).finally(function(){return clearInterval(F)}):Promise.resolve()).then(D)]).then(function(){return O(),h.onReadyBeingFired=[],Te.resolve(zc(function(){return d.on.ready.fire(d.vip)})).then(function H(){if(0<h.onReadyBeingFired.length){var L=h.onReadyBeingFired.reduce(ve,M);return h.onReadyBeingFired=[],Te.resolve(zc(function(){return L(d.vip)})).then(H)}})}).finally(function(){h.openCanceller===y&&(h.onReadyBeingFired=null,h.isBeingOpened=!1)}).catch(function(H){h.dbOpenError=H;try{z&&z.abort()}catch{}return y===h.openCanceller&&d._close(),Mt(H)}).finally(function(){h.openComplete=!0,B()}).then(function(){var H;return R&&(H={},d.tables.forEach(function(L){L.schema.indexes.forEach(function(N){N.name&&(H["idb://".concat(d.name,"/").concat(L.name,"/").concat(N.name)]=new Zt(-1/0,[[[]]]))}),H["idb://".concat(d.name,"/").concat(L.name,"/")]=H["idb://".concat(d.name,"/").concat(L.name,"/:dels")]=new Zt(-1/0,[[[]]])}),Ls(Wi).fire(H),Hc(H,!0)),d})}function Kc(d){function h(x){return d.next(x)}var g=b(h),y=b(function(x){return d.throw(x)});function b(x){return function(F){var D=x(F),F=D.value;return D.done?F:F&&typeof F.then=="function"?F.then(g,y):a(F)?Promise.all(F).then(g,y):g(F)}}return b(h)()}function Ea(d,h,g){for(var y=a(d)?d.slice():[d],b=0;b<g;++b)y.push(h);return y}var I_={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(d){return s(s({},d),{table:function(h){var g=d.table(h),y=g.schema,b={},x=[];function O(R,H,L){var N=Hi(R),W=b[N]=b[N]||[],U=R==null?0:typeof R=="string"?1:R.length,X=0<H,X=s(s({},L),{name:X?"".concat(N,"(virtual-from:").concat(L.name,")"):L.name,lowLevelIndex:L,isVirtual:X,keyTail:H,keyLength:U,extractKey:$c(R),unique:!X&&L.unique});return W.push(X),X.isPrimaryKey||x.push(X),1<U&&O(U===2?R[0]:R.slice(0,U-1),H+1,L),W.sort(function(ne,re){return ne.keyTail-re.keyTail}),X}h=O(y.primaryKey.keyPath,0,y.primaryKey),b[":id"]=[h];for(var D=0,F=y.indexes;D<F.length;D++){var B=F[D];O(B.keyPath,0,B)}function z(R){var H,L=R.query.index;return L.isVirtual?s(s({},R),{query:{index:L.lowLevelIndex,range:(H=R.query.range,L=L.keyTail,{type:H.type===1?2:H.type,lower:Ea(H.lower,H.lowerOpen?d.MAX_KEY:d.MIN_KEY,L),lowerOpen:!0,upper:Ea(H.upper,H.upperOpen?d.MIN_KEY:d.MAX_KEY,L),upperOpen:!0})}}):R}return s(s({},g),{schema:s(s({},y),{primaryKey:h,indexes:x,getIndexByKeyPath:function(R){return(R=b[Hi(R)])&&R[0]}}),count:function(R){return g.count(z(R))},query:function(R){return g.query(z(R))},openCursor:function(R){var H=R.query.index,L=H.keyTail,N=H.isVirtual,W=H.keyLength;return N?g.openCursor(z(R)).then(function(X){return X&&U(X)}):g.openCursor(R);function U(X){return Object.create(X,{continue:{value:function(ne){ne!=null?X.continue(Ea(ne,R.reverse?d.MAX_KEY:d.MIN_KEY,L)):R.unique?X.continue(X.key.slice(0,W).concat(R.reverse?d.MIN_KEY:d.MAX_KEY,L)):X.continue()}},continuePrimaryKey:{value:function(ne,re){X.continuePrimaryKey(Ea(ne,d.MAX_KEY,L),re)}},primaryKey:{get:function(){return X.primaryKey}},key:{get:function(){var ne=X.key;return W===1?ne[0]:ne.slice(0,W)}},value:{get:function(){return X.value}}})}}})}})}};function Yc(d,h,g,y){return g=g||{},y=y||"",o(d).forEach(function(b){var x,O,D;f(h,b)?(x=d[b],O=h[b],typeof x=="object"&&typeof O=="object"&&x&&O?(D=Ae(x))!==Ae(O)?g[y+b]=h[b]:D==="Object"?Yc(x,O,g,y+b+"."):x!==O&&(g[y+b]=h[b]):x!==O&&(g[y+b]=h[b])):g[y+b]=void 0}),o(h).forEach(function(b){f(d,b)||(g[y+b]=h[b])}),g}function Gc(d,h){return h.type==="delete"?h.keys:h.keys||h.values.map(d.extractKey)}var E_={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(d){return s(s({},d),{table:function(h){var g=d.table(h),y=g.schema.primaryKey;return s(s({},g),{mutate:function(b){var x=Re.trans,O=x.table(h).hook,D=O.deleting,F=O.creating,B=O.updating;switch(b.type){case"add":if(F.fire===M)break;return x._promise("readwrite",function(){return z(b)},!0);case"put":if(F.fire===M&&B.fire===M)break;return x._promise("readwrite",function(){return z(b)},!0);case"delete":if(D.fire===M)break;return x._promise("readwrite",function(){return z(b)},!0);case"deleteRange":if(D.fire===M)break;return x._promise("readwrite",function(){return(function R(H,L,N){return g.query({trans:H,values:!1,query:{index:y,range:L},limit:N}).then(function(W){var U=W.result;return z({type:"delete",keys:U,trans:H}).then(function(X){return 0<X.numFailures?Promise.reject(X.failures[0]):U.length<N?{failures:[],numFailures:0,lastResult:void 0}:R(H,s(s({},L),{lower:U[U.length-1],lowerOpen:!0}),N)})})})(b.trans,b.range,1e4)},!0)}return g.mutate(b);function z(R){var H,L,N,W=Re.trans,U=R.keys||Gc(y,R);if(!U)throw new Error("Keys missing");return(R=R.type==="add"||R.type==="put"?s(s({},R),{keys:U}):s({},R)).type!=="delete"&&(R.values=r([],R.values)),R.keys&&(R.keys=r([],R.keys)),H=g,N=U,((L=R).type==="add"?Promise.resolve([]):H.getMany({trans:L.trans,keys:N,cache:"immutable"})).then(function(X){var ne=U.map(function(re,ie){var pe,be,me,ye=X[ie],Oe={onerror:null,onsuccess:null};return R.type==="delete"?D.fire.call(Oe,re,ye,W):R.type==="add"||ye===void 0?(pe=F.fire.call(Oe,re,R.values[ie],W),re==null&&pe!=null&&(R.keys[ie]=re=pe,y.outbound||G(R.values[ie],y.keyPath,re))):(pe=Yc(ye,R.values[ie]),(be=B.fire.call(Oe,pe,re,ye,W))&&(me=R.values[ie],Object.keys(be).forEach(function(Ce){f(me,Ce)?me[Ce]=be[Ce]:G(me,Ce,be[Ce])}))),Oe});return g.mutate(R).then(function(re){for(var ie=re.failures,pe=re.results,be=re.numFailures,re=re.lastResult,me=0;me<U.length;++me){var ye=(pe||U)[me],Oe=ne[me];ye==null?Oe.onerror&&Oe.onerror(ie[me]):Oe.onsuccess&&Oe.onsuccess(R.type==="put"&&X[me]?R.values[me]:ye)}return{failures:ie,results:pe,numFailures:be,lastResult:re}}).catch(function(re){return ne.forEach(function(ie){return ie.onerror&&ie.onerror(re)}),Promise.reject(re)})})}}})}})}};function Jf(d,h,g){try{if(!h||h.keys.length<d.length)return null;for(var y=[],b=0,x=0;b<h.keys.length&&x<d.length;++b)st(h.keys[b],d[x])===0&&(y.push(g?de(h.values[b]):h.values[b]),++x);return y.length===d.length?y:null}catch{return null}}var O_={stack:"dbcore",level:-1,create:function(d){return{table:function(h){var g=d.table(h);return s(s({},g),{getMany:function(y){if(!y.cache)return g.getMany(y);var b=Jf(y.keys,y.trans._cache,y.cache==="clone");return b?Te.resolve(b):g.getMany(y).then(function(x){return y.trans._cache={keys:y.keys,values:y.cache==="clone"?de(x):x},x})},mutate:function(y){return y.type!=="add"&&(y.trans._cache=null),g.mutate(y)}})}}}};function Zf(d,h){return d.trans.mode==="readonly"&&!!d.subscr&&!d.trans.explicit&&d.trans.db._options.cache!=="disabled"&&!h.schema.primaryKey.outbound}function eh(d,h){switch(d){case"query":return h.values&&!h.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var M_={stack:"dbcore",level:0,name:"Observability",create:function(d){var h=d.schema.name,g=new Zt(d.MIN_KEY,d.MAX_KEY);return s(s({},d),{transaction:function(y,b,x){if(Re.subscr&&b!=="readonly")throw new se.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Re.querier));return d.transaction(y,b,x)},table:function(y){var b=d.table(y),x=b.schema,O=x.primaryKey,R=x.indexes,D=O.extractKey,F=O.outbound,B=O.autoIncrement&&R.filter(function(L){return L.compound&&L.keyPath.includes(O.keyPath)}),z=s(s({},b),{mutate:function(L){function N(Ce){return Ce="idb://".concat(h,"/").concat(y,"/").concat(Ce),re[Ce]||(re[Ce]=new Zt)}var W,U,X,ne=L.trans,re=L.mutatedParts||(L.mutatedParts={}),ie=N(""),pe=N(":dels"),be=L.type,Oe=L.type==="deleteRange"?[L.range]:L.type==="delete"?[L.keys]:L.values.length<50?[Gc(O,L).filter(function(Ce){return Ce}),L.values]:[],me=Oe[0],ye=Oe[1],Oe=L.trans._cache;return a(me)?(ie.addKeys(me),(Oe=be==="delete"||me.length===ye.length?Jf(me,Oe):null)||pe.addKeys(me),(Oe||ye)&&(W=N,U=Oe,X=ye,x.indexes.forEach(function(Ce){var De=W(Ce.name||"");function Xe(Ke){return Ke!=null?Ce.extractKey(Ke):null}function ot(Ke){return Ce.multiEntry&&a(Ke)?Ke.forEach(function(Et){return De.addKey(Et)}):De.addKey(Ke)}(U||X).forEach(function(Ke,en){var Ve=U&&Xe(U[en]),en=X&&Xe(X[en]);st(Ve,en)!==0&&(Ve!=null&&ot(Ve),en!=null&&ot(en))})}))):me?(ye={from:(ye=me.lower)!==null&&ye!==void 0?ye:d.MIN_KEY,to:(ye=me.upper)!==null&&ye!==void 0?ye:d.MAX_KEY},pe.add(ye),ie.add(ye)):(ie.add(g),pe.add(g),x.indexes.forEach(function(Ce){return N(Ce.name).add(g)})),b.mutate(L).then(function(Ce){return!me||L.type!=="add"&&L.type!=="put"||(ie.addKeys(Ce.results),B&&B.forEach(function(De){for(var Xe=L.values.map(function(Ve){return De.extractKey(Ve)}),ot=De.keyPath.findIndex(function(Ve){return Ve===O.keyPath}),Ke=0,Et=Ce.results.length;Ke<Et;++Ke)Xe[Ke][ot]=Ce.results[Ke];N(De.name).addKeys(Xe)})),ne.mutatedParts=Aa(ne.mutatedParts||{},re),Ce})}}),R=function(N){var W=N.query,N=W.index,W=W.range;return[N,new Zt((N=W.lower)!==null&&N!==void 0?N:d.MIN_KEY,(W=W.upper)!==null&&W!==void 0?W:d.MAX_KEY)]},H={get:function(L){return[O,new Zt(L.key)]},getMany:function(L){return[O,new Zt().addKeys(L.keys)]},count:R,query:R,openCursor:R};return o(H).forEach(function(L){z[L]=function(N){var W=Re.subscr,U=!!W,X=Zf(Re,b)&&eh(L,N)?N.obsSet={}:W;if(U){var ne=function(ye){return ye="idb://".concat(h,"/").concat(y,"/").concat(ye),X[ye]||(X[ye]=new Zt)},re=ne(""),ie=ne(":dels"),W=H[L](N),U=W[0],W=W[1];if((L==="query"&&U.isPrimaryKey&&!N.values?ie:ne(U.name||"")).add(W),!U.isPrimaryKey){if(L!=="count"){var pe=L==="query"&&F&&N.values&&b.query(s(s({},N),{values:!1}));return b[L].apply(this,arguments).then(function(ye){if(L==="query"){if(F&&N.values)return pe.then(function(Xe){return Xe=Xe.result,re.addKeys(Xe),ye});var Oe=N.values?ye.result.map(D):ye.result;(N.values?re:ie).addKeys(Oe)}else if(L==="openCursor"){var Ce=ye,De=N.values;return Ce&&Object.create(Ce,{key:{get:function(){return ie.addKey(Ce.primaryKey),Ce.key}},primaryKey:{get:function(){var Xe=Ce.primaryKey;return ie.addKey(Xe),Xe}},value:{get:function(){return De&&re.addKey(Ce.primaryKey),Ce.value}}})}return ye})}ie.add(g)}}return b[L].apply(this,arguments)}}),z}})}};function th(d,h,g){if(g.numFailures===0)return h;if(h.type==="deleteRange")return null;var y=h.keys?h.keys.length:"values"in h&&h.values?h.values.length:1;return g.numFailures===y?null:(h=s({},h),a(h.keys)&&(h.keys=h.keys.filter(function(b,x){return!(x in g.failures)})),"values"in h&&a(h.values)&&(h.values=h.values.filter(function(b,x){return!(x in g.failures)})),h)}function Xc(d,h){return g=d,((y=h).lower===void 0||(y.lowerOpen?0<st(g,y.lower):0<=st(g,y.lower)))&&(d=d,(h=h).upper===void 0||(h.upperOpen?st(d,h.upper)<0:st(d,h.upper)<=0));var g,y}function nh(d,h,H,y,b,x){if(!H||H.length===0)return d;var O=h.query.index,D=O.multiEntry,F=h.query.range,B=y.schema.primaryKey.extractKey,z=O.extractKey,R=(O.lowLevelIndex||O).extractKey,H=H.reduce(function(L,N){var W=L,U=[];if(N.type==="add"||N.type==="put")for(var X=new Zt,ne=N.values.length-1;0<=ne;--ne){var re,ie=N.values[ne],pe=B(ie);X.hasKey(pe)||(re=z(ie),(D&&a(re)?re.some(function(Ce){return Xc(Ce,F)}):Xc(re,F))&&(X.addKey(pe),U.push(ie)))}switch(N.type){case"add":var be=new Zt().addKeys(h.values?L.map(function(De){return B(De)}):L),W=L.concat(h.values?U.filter(function(De){return De=B(De),!be.hasKey(De)&&(be.addKey(De),!0)}):U.map(function(De){return B(De)}).filter(function(De){return!be.hasKey(De)&&(be.addKey(De),!0)}));break;case"put":var me=new Zt().addKeys(N.values.map(function(De){return B(De)}));W=L.filter(function(De){return!me.hasKey(h.values?B(De):De)}).concat(h.values?U:U.map(function(De){return B(De)}));break;case"delete":var ye=new Zt().addKeys(N.keys);W=L.filter(function(De){return!ye.hasKey(h.values?B(De):De)});break;case"deleteRange":var Oe=N.range;W=L.filter(function(De){return!Xc(B(De),Oe)})}return W},d);return H===d?d:(H.sort(function(L,N){return st(R(L),R(N))||st(B(L),B(N))}),h.limit&&h.limit<1/0&&(H.length>h.limit?H.length=h.limit:d.length===h.limit&&H.length<h.limit&&(b.dirty=!0)),x?Object.freeze(H):H)}function sh(d,h){return st(d.lower,h.lower)===0&&st(d.upper,h.upper)===0&&!!d.lowerOpen==!!h.lowerOpen&&!!d.upperOpen==!!h.upperOpen}function T_(d,h){return(function(g,y,b,x){if(g===void 0)return y!==void 0?-1:0;if(y===void 0)return 1;if((y=st(g,y))===0){if(b&&x)return 0;if(b)return 1;if(x)return-1}return y})(d.lower,h.lower,d.lowerOpen,h.lowerOpen)<=0&&0<=(function(g,y,b,x){if(g===void 0)return y!==void 0?1:0;if(y===void 0)return-1;if((y=st(g,y))===0){if(b&&x)return 0;if(b)return-1;if(x)return 1}return y})(d.upper,h.upper,d.upperOpen,h.upperOpen)}function D_(d,h,g,y){d.subscribers.add(g),y.addEventListener("abort",function(){var b,x;d.subscribers.delete(g),d.subscribers.size===0&&(b=d,x=h,setTimeout(function(){b.subscribers.size===0&&te(x,b)},3e3))})}var R_={stack:"dbcore",level:0,name:"Cache",create:function(d){var h=d.schema.name;return s(s({},d),{transaction:function(g,y,b){var x,O,D=d.transaction(g,y,b);return y==="readwrite"&&(O=(x=new AbortController).signal,b=function(F){return function(){if(x.abort(),y==="readwrite"){for(var B=new Set,z=0,R=g;z<R.length;z++){var H=R[z],L=fr["idb://".concat(h,"/").concat(H)];if(L){var N=d.table(H),W=L.optimisticOps.filter(function(De){return De.trans===D});if(D._explicit&&F&&D.mutatedParts)for(var U=0,X=Object.values(L.queries.query);U<X.length;U++)for(var ne=0,re=(be=X[U]).slice();ne<re.length;ne++)qc((me=re[ne]).obsSet,D.mutatedParts)&&(te(be,me),me.subscribers.forEach(function(De){return B.add(De)}));else if(0<W.length){L.optimisticOps=L.optimisticOps.filter(function(De){return De.trans!==D});for(var ie=0,pe=Object.values(L.queries.query);ie<pe.length;ie++)for(var be,me,ye,Oe=0,Ce=(be=pe[ie]).slice();Oe<Ce.length;Oe++)(me=Ce[Oe]).res!=null&&D.mutatedParts&&(F&&!me.dirty?(ye=Object.isFrozen(me.res),ye=nh(me.res,me.req,W,N,me,ye),me.dirty?(te(be,me),me.subscribers.forEach(function(De){return B.add(De)})):ye!==me.res&&(me.res=ye,me.promise=Te.resolve({result:ye}))):(me.dirty&&te(be,me),me.subscribers.forEach(function(De){return B.add(De)})))}}}B.forEach(function(De){return De()})}}},D.addEventListener("abort",b(!1),{signal:O}),D.addEventListener("error",b(!1),{signal:O}),D.addEventListener("complete",b(!0),{signal:O})),D},table:function(g){var y=d.table(g),b=y.schema.primaryKey;return s(s({},y),{mutate:function(x){var O=Re.trans;if(b.outbound||O.db._options.cache==="disabled"||O.explicit||O.idbtrans.mode!=="readwrite")return y.mutate(x);var D=fr["idb://".concat(h,"/").concat(g)];return D?(O=y.mutate(x),x.type!=="add"&&x.type!=="put"||!(50<=x.values.length||Gc(b,x).some(function(F){return F==null}))?(D.optimisticOps.push(x),x.mutatedParts&&Ia(x.mutatedParts),O.then(function(F){0<F.numFailures&&(te(D.optimisticOps,x),(F=th(0,x,F))&&D.optimisticOps.push(F),x.mutatedParts&&Ia(x.mutatedParts))}),O.catch(function(){te(D.optimisticOps,x),x.mutatedParts&&Ia(x.mutatedParts)})):O.then(function(F){var B=th(0,s(s({},x),{values:x.values.map(function(z,R){var H;return F.failures[R]?z:(z=(H=b.keyPath)!==null&&H!==void 0&&H.includes(".")?de(z):s({},z),G(z,b.keyPath,F.results[R]),z)})}),F);D.optimisticOps.push(B),queueMicrotask(function(){return x.mutatedParts&&Ia(x.mutatedParts)})}),O):y.mutate(x)},query:function(x){if(!Zf(Re,y)||!eh("query",x))return y.query(x);var O=((B=Re.trans)===null||B===void 0?void 0:B.db._options.cache)==="immutable",R=Re,D=R.requery,F=R.signal,B=(function(N,W,U,X){var ne=fr["idb://".concat(N,"/").concat(W)];if(!ne)return[];if(!(W=ne.queries[U]))return[null,!1,ne,null];var re=W[(X.query?X.query.index.name:null)||""];if(!re)return[null,!1,ne,null];switch(U){case"query":var ie=re.find(function(pe){return pe.req.limit===X.limit&&pe.req.values===X.values&&sh(pe.req.query.range,X.query.range)});return ie?[ie,!0,ne,re]:[re.find(function(pe){return("limit"in pe.req?pe.req.limit:1/0)>=X.limit&&(!X.values||pe.req.values)&&T_(pe.req.query.range,X.query.range)}),!1,ne,re];case"count":return ie=re.find(function(pe){return sh(pe.req.query.range,X.query.range)}),[ie,!!ie,ne,re]}})(h,g,"query",x),z=B[0],R=B[1],H=B[2],L=B[3];return z&&R?z.obsSet=x.obsSet:(R=y.query(x).then(function(N){var W=N.result;if(z&&(z.res=W),O){for(var U=0,X=W.length;U<X;++U)Object.freeze(W[U]);Object.freeze(W)}else N.result=de(W);return N}).catch(function(N){return L&&z&&te(L,z),Promise.reject(N)}),z={obsSet:x.obsSet,promise:R,subscribers:new Set,type:"query",req:x,dirty:!1},L?L.push(z):(L=[z],(H=H||(fr["idb://".concat(h,"/").concat(g)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[x.query.index.name||""]=L)),D_(z,L,D,F),z.promise.then(function(N){return{result:nh(N.result,x,H?.optimisticOps,y,z,O)}})}})}})}};function Oa(d,h){return new Proxy(d,{get:function(g,y,b){return y==="db"?h:Reflect.get(g,y,b)}})}var fs=(Tt.prototype.version=function(d){if(isNaN(d)||d<.1)throw new se.Type("Given version is not a positive number");if(d=Math.round(10*d)/10,this.idbdb||this._state.isBeingOpened)throw new se.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,d);var h=this._versions,g=h.filter(function(y){return y._cfg.version===d})[0];return g||(g=new this.Version(d),h.push(g),h.sort(k_),g.stores({}),this._state.autoSchema=!1,g)},Tt.prototype._whenReady=function(d){var h=this;return this.idbdb&&(this._state.openComplete||Re.letThrough||this._vip)?d():new Te(function(g,y){if(h._state.openComplete)return y(new se.DatabaseClosed(h._state.dbOpenError));if(!h._state.isBeingOpened){if(!h._state.autoOpen)return void y(new se.DatabaseClosed);h.open().catch(M)}h._state.dbReadyPromise.then(g,y)}).then(d)},Tt.prototype.use=function(d){var h=d.stack,g=d.create,y=d.level,b=d.name;return b&&this.unuse({stack:h,name:b}),d=this._middlewares[h]||(this._middlewares[h]=[]),d.push({stack:h,create:g,level:y??10,name:b}),d.sort(function(x,O){return x.level-O.level}),this},Tt.prototype.unuse=function(d){var h=d.stack,g=d.name,y=d.create;return h&&this._middlewares[h]&&(this._middlewares[h]=this._middlewares[h].filter(function(b){return y?b.create!==y:!!g&&b.name!==g})),this},Tt.prototype.open=function(){var d=this;return cr(It,function(){return A_(d)})},Tt.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var d=this._state,h=Zr.indexOf(this);if(0<=h&&Zr.splice(h,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}d.isBeingOpened||(d.dbReadyPromise=new Te(function(g){d.dbReadyResolve=g}),d.openCanceller=new Te(function(g,y){d.cancelOpen=y}))},Tt.prototype.close=function(g){var h=(g===void 0?{disableAutoOpen:!0}:g).disableAutoOpen,g=this._state;h?(g.isBeingOpened&&g.cancelOpen(new se.DatabaseClosed),this._close(),g.autoOpen=!1,g.dbOpenError=new se.DatabaseClosed):(this._close(),g.autoOpen=this._options.autoOpen||g.isBeingOpened,g.openComplete=!1,g.dbOpenError=null)},Tt.prototype.delete=function(d){var h=this;d===void 0&&(d={disableAutoOpen:!0});var g=0<arguments.length&&typeof arguments[0]!="object",y=this._state;return new Te(function(b,x){function O(){h.close(d);var D=h._deps.indexedDB.deleteDatabase(h.name);D.onsuccess=Ct(function(){var F,B,z;F=h._deps,B=h.name,z=F.indexedDB,F=F.IDBKeyRange,Nc(z)||B===ga||jc(z,F).delete(B).catch(M),b()}),D.onerror=Xn(x),D.onblocked=h._fireOnBlocked}if(g)throw new se.InvalidArgument("Invalid closeOptions argument to db.delete()");y.isBeingOpened?y.dbReadyPromise.then(O):O()})},Tt.prototype.backendDB=function(){return this.idbdb},Tt.prototype.isOpen=function(){return this.idbdb!==null},Tt.prototype.hasBeenClosed=function(){var d=this._state.dbOpenError;return d&&d.name==="DatabaseClosed"},Tt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Tt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Tt.prototype,"tables",{get:function(){var d=this;return o(this._allTables).map(function(h){return d._allTables[h]})},enumerable:!1,configurable:!0}),Tt.prototype.transaction=function(){var d=(function(h,g,y){var b=arguments.length;if(b<2)throw new se.InvalidArgument("Too few arguments");for(var x=new Array(b-1);--b;)x[b-1]=arguments[b];return y=x.pop(),[h,Z(x),y]}).apply(this,arguments);return this._transaction.apply(this,d)},Tt.prototype._transaction=function(d,h,g){var y=this,b=Re.trans;b&&b.db===this&&d.indexOf("!")===-1||(b=null);var x,O,D=d.indexOf("?")!==-1;d=d.replace("!","").replace("?","");try{if(O=h.map(function(B){if(B=B instanceof y.Table?B.name:B,typeof B!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return B}),d=="r"||d===Ic)x=Ic;else{if(d!="rw"&&d!=Ec)throw new se.InvalidArgument("Invalid transaction mode: "+d);x=Ec}if(b){if(b.mode===Ic&&x===Ec){if(!D)throw new se.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");b=null}b&&O.forEach(function(B){if(b&&b.storeNames.indexOf(B)===-1){if(!D)throw new se.SubTransaction("Table "+B+" not included in parent transaction.");b=null}}),D&&b&&!b.active&&(b=null)}}catch(B){return b?b._promise(null,function(z,R){R(B)}):Mt(B)}var F=(function B(z,R,H,L,N){return Te.resolve().then(function(){var W=Re.transless||Re,U=z._createTransaction(R,H,z._dbSchema,L);if(U.explicit=!0,W={trans:U,transless:W},L)U.idbtrans=L.idbtrans;else try{U.create(),U.idbtrans._explicit=!0,z._state.PR1398_maxLoop=3}catch(re){return re.name===ae.InvalidState&&z.isOpen()&&0<--z._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),z.close({disableAutoOpen:!1}),z.open().then(function(){return B(z,R,H,null,N)})):Mt(re)}var X,ne=Le(N);return ne&&Jr(),W=Te.follow(function(){var re;(X=N.call(U,U))&&(ne?(re=Rs.bind(null,null),X.then(re,re)):typeof X.next=="function"&&typeof X.throw=="function"&&(X=Kc(X)))},W),(X&&typeof X.then=="function"?Te.resolve(X).then(function(re){return U.active?re:Mt(new se.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):W.then(function(){return X})).then(function(re){return L&&U._resolve(),U._completion.then(function(){return re})}).catch(function(re){return U._reject(re),Mt(re)})})}).bind(null,this,x,O,b,g);return b?b._promise(x,F,"lock"):Re.trans?cr(Re.transless,function(){return y._whenReady(F)}):this._whenReady(F)},Tt.prototype.table=function(d){if(!f(this._allTables,d))throw new se.InvalidTable("Table ".concat(d," does not exist"));return this._allTables[d]},Tt);function Tt(d,h){var g=this;this._middlewares={},this.verno=0;var y=Tt.dependencies;this._options=h=s({addons:Tt.addons,autoOpen:!0,indexedDB:y.indexedDB,IDBKeyRange:y.IDBKeyRange,cache:"cloned"},h),this._deps={indexedDB:h.indexedDB,IDBKeyRange:h.IDBKeyRange},y=h.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var b,x,O,D,F,B={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:M,dbReadyPromise:null,cancelOpen:M,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:h.autoOpen};B.dbReadyPromise=new Te(function(R){B.dbReadyResolve=R}),B.openCanceller=new Te(function(R,H){B.cancelOpen=H}),this._state=B,this.name=d,this.on=Ni(this,"populate","blocked","versionchange","close",{ready:[ve,M]}),this.once=function(R,H){var L=function(){for(var N=[],W=0;W<arguments.length;W++)N[W]=arguments[W];g.on(R).unsubscribe(L),H.apply(g,N)};return g.on(R,L)},this.on.ready.subscribe=E(this.on.ready.subscribe,function(R){return function(H,L){Tt.vip(function(){var N,W=g._state;W.openComplete?(W.dbOpenError||Te.resolve().then(H),L&&R(H)):W.onReadyBeingFired?(W.onReadyBeingFired.push(H),L&&R(H)):(R(H),N=g,L||R(function U(){N.on.ready.unsubscribe(H),N.on.ready.unsubscribe(U)}))})}}),this.Collection=(b=this,zi(m_.prototype,function(X,U){this.db=b;var L=Df,N=null;if(U)try{L=U()}catch(ne){N=ne}var W=X._ctx,U=W.table,X=U.hook.reading.fire;this._ctx={table:U,index:W.index,isPrimKey:!W.index||U.schema.primKey.keyPath&&W.index===U.schema.primKey.name,range:L,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:N,or:W.or,valueMapper:X!==$?X:null}})),this.Table=(x=this,zi(Lf.prototype,function(R,H,L){this.db=x,this._tx=L,this.name=R,this.schema=H,this.hook=x._allTables[R]?x._allTables[R].hook:Ni(null,{creating:[ue,M],reading:[Q,$],updating:[Ie,M],deleting:[ce,M]})})),this.Transaction=(O=this,zi(b_.prototype,function(R,H,L,N,W){var U=this;R!=="readonly"&&H.forEach(function(X){X=(X=L[X])===null||X===void 0?void 0:X.yProps,X&&(H=H.concat(X.map(function(ne){return ne.updatesTable})))}),this.db=O,this.mode=R,this.storeNames=H,this.schema=L,this.chromeTransactionDurability=N,this.idbtrans=null,this.on=Ni(this,"complete","error","abort"),this.parent=W||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Te(function(X,ne){U._resolve=X,U._reject=ne}),this._completion.then(function(){U.active=!1,U.on.complete.fire()},function(X){var ne=U.active;return U.active=!1,U.on.error.fire(X),U.parent?U.parent._reject(X):ne&&U.idbtrans&&U.idbtrans.abort(),Mt(X)})})),this.Version=(D=this,zi(P_.prototype,function(R){this.db=D,this._cfg={version:R,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(F=this,zi(qf.prototype,function(R,H,L){if(this.db=F,this._ctx={table:R,index:H===":id"?null:H,or:L},this._cmp=this._ascending=st,this._descending=function(N,W){return st(W,N)},this._max=function(N,W){return 0<st(N,W)?N:W},this._min=function(N,W){return st(N,W)<0?N:W},this._IDBKeyRange=F._deps.IDBKeyRange,!this._IDBKeyRange)throw new se.MissingAPI})),this.on("versionchange",function(R){0<R.newVersion?console.warn("Another connection wants to upgrade database '".concat(g.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(g.name,"'. Closing db now to resume the delete request.")),g.close({disableAutoOpen:!1})}),this.on("blocked",function(R){!R.newVersion||R.newVersion<R.oldVersion?console.warn("Dexie.delete('".concat(g.name,"') was blocked")):console.warn("Upgrade '".concat(g.name,"' blocked by other connection holding version ").concat(R.oldVersion/10))}),this._maxKey=Vi(h.IDBKeyRange),this._createTransaction=function(R,H,L,N){return new g.Transaction(R,H,L,g._options.chromeTransactionDurability,N)},this._fireOnBlocked=function(R){g.on("blocked").fire(R),Zr.filter(function(H){return H.name===g.name&&H!==g&&!H._state.vcFired}).map(function(H){return H.on("versionchange").fire(R)})},this.use(O_),this.use(R_),this.use(M_),this.use(I_),this.use(E_);var z=new Proxy(this,{get:function(R,H,L){if(H==="_vip")return!0;if(H==="table")return function(W){return Oa(g.table(W),z)};var N=Reflect.get(R,H,L);return N instanceof Lf?Oa(N,z):H==="tables"?N.map(function(W){return Oa(W,z)}):H==="_createTransaction"?function(){return Oa(N.apply(this,arguments),z)}:N}});this.vip=z,y.forEach(function(R){return R(g)})}var Ma,Tn=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",$_=(Qc.prototype.subscribe=function(d,h,g){return this._subscribe(d&&typeof d!="function"?d:{next:d,error:h,complete:g})},Qc.prototype[Tn]=function(){return this},Qc);function Qc(d){this._subscribe=d}try{Ma={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch{Ma={indexedDB:null,IDBKeyRange:null}}function rh(d){var h,g=!1,y=new $_(function(b){var x=Le(d),O,D=!1,F={},B={},z={get closed(){return D},unsubscribe:function(){D||(D=!0,O&&O.abort(),R&&Ls.storagemutated.unsubscribe(L))}};b.start&&b.start(z);var R=!1,H=function(){return Ac(N)},L=function(W){Aa(F,W),qc(B,F)&&H()},N=function(){var W,U,X;!D&&Ma.indexedDB&&(F={},W={},O&&O.abort(),O=new AbortController,X=(function(ne){var re=Xr();try{x&&Jr();var ie=Ds(d,ne);return ie=x?ie.finally(Rs):ie}finally{re&&Qr()}})(U={subscr:W,signal:O.signal,requery:H,querier:d,trans:null}),Promise.resolve(X).then(function(ne){g=!0,h=ne,D||U.signal.aborted||(F={},(function(re){for(var ie in re)if(f(re,ie))return;return 1})(B=W)||R||(Ls(Wi,L),R=!0),Ac(function(){return!D&&b.next&&b.next(ne)}))},function(ne){g=!1,["DatabaseClosedError","AbortError"].includes(ne?.name)||D||Ac(function(){D||b.error&&b.error(ne)})}))};return setTimeout(H,0),z});return y.hasValue=function(){return g},y.getValue=function(){return h},y}var hr=fs;function Jc(d){var h=Bs;try{Bs=!0,Ls.storagemutated.fire(d),Hc(d,!0)}finally{Bs=h}}p(hr,s(s({},nt),{delete:function(d){return new hr(d,{addons:[]}).delete()},exists:function(d){return new hr(d,{addons:[]}).open().then(function(h){return h.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(d){try{return h=hr.dependencies,g=h.indexedDB,h=h.IDBKeyRange,(Nc(g)?Promise.resolve(g.databases()).then(function(y){return y.map(function(b){return b.name}).filter(function(b){return b!==ga})}):jc(g,h).toCollection().primaryKeys()).then(d)}catch{return Mt(new se.MissingAPI)}var h,g},defineClass:function(){return function(d){l(this,d)}},ignoreTransaction:function(d){return Re.trans?cr(Re.transless,d):d()},vip:zc,async:function(d){return function(){try{var h=Kc(d.apply(this,arguments));return h&&typeof h.then=="function"?h:Te.resolve(h)}catch(g){return Mt(g)}}},spawn:function(d,h,g){try{var y=Kc(d.apply(g,h||[]));return y&&typeof y.then=="function"?y:Te.resolve(y)}catch(b){return Mt(b)}},currentTransaction:{get:function(){return Re.trans||null}},waitFor:function(d,h){return h=Te.resolve(typeof d=="function"?hr.ignoreTransaction(d):d).timeout(h||6e4),Re.trans?Re.trans.waitFor(h):h},Promise:Te,debug:{get:function(){return fe},set:function(d){Ne(d)}},derive:_,extend:l,props:p,override:E,Events:Ni,on:Ls,liveQuery:rh,extendObservabilitySet:Aa,getByKeyPath:T,setByKeyPath:G,delByKeyPath:function(d,h){typeof h=="string"?G(d,h,void 0):"length"in h&&[].map.call(h,function(g){G(d,g,void 0)})},shallowClone:V,deepClone:de,getObjectDiff:Yc,cmp:st,asap:I,minKey:-1/0,addons:[],connections:Zr,errnames:ae,dependencies:Ma,cache:fr,semVer:"4.2.0",version:"4.2.0".split(".").map(function(d){return parseInt(d)}).reduce(function(d,h,g){return d+h/Math.pow(10,2*g)})})),hr.maxKey=Vi(hr.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Ls(Wi,function(d){Bs||(d=new CustomEvent(Tc,{detail:d}),Bs=!0,dispatchEvent(d),Bs=!1)}),addEventListener(Tc,function(d){d=d.detail,Bs||Jc(d)}));var si,Bs=!1,ih=function(){};return typeof BroadcastChannel<"u"&&((ih=function(){(si=new BroadcastChannel(Tc)).onmessage=function(d){return d.data&&Jc(d.data)}})(),typeof si.unref=="function"&&si.unref(),Ls(Wi,function(d){Bs||si.postMessage(d)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(d){if(!fs.disableBfCache&&d.persisted){fe&&console.debug("Dexie: handling persisted pagehide"),si?.close();for(var h=0,g=Zr;h<g.length;h++)g[h].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(d){!fs.disableBfCache&&d.persisted&&(fe&&console.debug("Dexie: handling persisted pageshow"),ih(),Jc({all:new Zt(-1/0,[[]])}))})),Te.rejectionMapper=function(d,h){return!d||d instanceof We||d instanceof TypeError||d instanceof SyntaxError||!d.name||!Fe[d.name]?d:(h=new Fe[d.name](h||d.message,d),"stack"in d&&v(h,"stack",{get:function(){return this.inner.stack}}),h)},Ne(fe),s(fs,Object.freeze({__proto__:null,Dexie:fs,liveQuery:rh,Entity:Rf,cmp:st,PropModification:Ui,replacePrefix:function(d,h){return new Ui({replacePrefix:[d,h]})},add:function(d){return new Ui({add:d})},remove:function(d){return new Ui({remove:d})},default:fs,RangeSet:Zt,mergeRanges:Yi,rangesOverlap:Yf}),{default:fs}),fs})})(fl)),fl.exports}var ok=ik();const id=fv(ok),hp=Symbol.for("Dexie"),Ml=globalThis[hp]||(globalThis[hp]=id);if(id.semVer!==Ml.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${id.semVer} and ${Ml.semVer}`);const{liveQuery:JF,mergeRanges:ZF,rangesOverlap:eL,RangeSet:tL,cmp:nL,Entity:sL,PropModification:rL,replacePrefix:iL,add:oL,remove:aL,DexieYProvider:lL}=Ml;class ak extends Ml{cards;card_lots;transactions;scans;decks;deck_cards;price_points;valuations;settings;scan_sale_links;constructor(){super("MtgTrackerDb"),this.version(1).stores({cards:"id, oracleId, name, set, setCode, number, lang, finish",transactions:"id, kind, cardId, source, externalRef, happenedAt",scans:"id, cardFingerprint, cardId, source, scannedAt",decks:"id, platform, name, importedAt",deck_cards:"[deckId+cardId], deckId, cardId",price_points:"id, cardId, provider, asOf",valuations:"id, asOf",settings:"k"}),this.version(2).stores({cards:"id, oracleId, name, set, setCode, number, lang, finish, createdAt, updatedAt",transactions:"id, kind, cardId, source, externalRef, happenedAt, createdAt, updatedAt",scans:"id, cardFingerprint, cardId, source, scannedAt, createdAt, updatedAt",decks:"id, platform, name, importedAt, createdAt, updatedAt",deck_cards:"[deckId+cardId], deckId, cardId, createdAt",price_points:"id, cardId, provider, asOf, createdAt",valuations:"id, asOf, createdAt",settings:"k, createdAt, updatedAt",scan_sale_links:"id, scanId, transactionId, matchedAt, createdAt"}).upgrade(async e=>{const n=new Date;await e.table("cards").toCollection().modify(s=>{s.createdAt=s.createdAt||n,s.updatedAt=s.updatedAt||n}),await e.table("transactions").toCollection().modify(s=>{s.createdAt=s.createdAt||n,s.updatedAt=s.updatedAt||n}),await e.table("scans").toCollection().modify(s=>{s.createdAt=s.createdAt||n,s.updatedAt=s.updatedAt||n}),await e.table("decks").toCollection().modify(s=>{s.createdAt=s.createdAt||n,s.updatedAt=s.updatedAt||n}),await e.table("deck_cards").toCollection().modify(s=>{s.createdAt=s.createdAt||n}),await e.table("price_points").toCollection().modify(s=>{s.createdAt=s.createdAt||n}),await e.table("valuations").toCollection().modify(s=>{s.createdAt=s.createdAt||n}),await e.table("settings").toCollection().modify(s=>{s.createdAt=s.createdAt||n,s.updatedAt=s.updatedAt||n})}),this.version(3).stores({cards:"id, oracleId, name, set, setCode, number, lang, finish, createdAt, updatedAt",transactions:"id, kind, cardId, source, externalRef, happenedAt, createdAt, updatedAt",scans:"id, cardFingerprint, cardId, source, scannedAt, createdAt, updatedAt",decks:"id, platform, name, importedAt, createdAt, updatedAt",deck_cards:"[deckId+cardId], deckId, cardId, createdAt",price_points:"id, cardId, provider, currency, asOf, createdAt, [cardId+asOf], [provider+asOf]",valuations:"id, asOf, createdAt, [asOf+createdAt]",settings:"k, createdAt, updatedAt",scan_sale_links:"id, scanId, transactionId, matchedAt, createdAt"}),this.version(4).stores({cards:"id, oracleId, name, set, setCode, number, lang, finish, createdAt, updatedAt",card_lots:"id, cardId, acquisitionId, source, purchasedAt, disposedAt, createdAt, updatedAt, [cardId+purchasedAt], [acquisitionId+cardId]",transactions:"id, kind, cardId, lotId, source, externalRef, happenedAt, relatedTransactionId, createdAt, updatedAt, [lotId+kind]",scans:"id, cardFingerprint, cardId, lotId, source, scannedAt, boosterPackId, createdAt, updatedAt, [lotId+scannedAt]",decks:"id, platform, name, importedAt, createdAt, updatedAt",deck_cards:"id, deckId, cardId, lotId, addedAt, removedAt, createdAt, [deckId+cardId], [lotId+addedAt]",price_points:"id, cardId, provider, currency, asOf, source, createdAt, [cardId+asOf], [provider+asOf]",valuations:"id, asOf, createdAt, [asOf+createdAt]",settings:"k, createdAt, updatedAt",scan_sale_links:"id, scanId, transactionId, quantity, matchedAt, createdAt"}).upgrade(async e=>{const n=new Date;await e.table("deck_cards").toCollection().modify(s=>{try{s.id||(s.id=`deckcard-${Date.now()}-${Math.random().toString(36).substr(2,9)}`),s.addedAt||(s.addedAt=s.createdAt||n),s.role||(s.role="main"),(!s.cardId||s.cardId==="")&&(s.cardId="unknown-card"),s.deckId||(s.deckId="unknown-deck"),typeof s.quantity!="number"&&(s.quantity=1),s.createdAt||(s.createdAt=n)}catch(r){console.error("Error upgrading deck card:",r,s);return}})}),this.version(5).stores({cards:"id, oracleId, name, set, setCode, number, lang, finish, createdAt, updatedAt",card_lots:"id, cardId, acquisitionId, source, purchasedAt, disposedAt, createdAt, updatedAt, externalRef, [cardId+purchasedAt], [acquisitionId+cardId], [externalRef]",transactions:"id, kind, cardId, lotId, source, externalRef, happenedAt, relatedTransactionId, createdAt, updatedAt, [lotId+kind]",scans:"id, cardFingerprint, cardId, lotId, source, scannedAt, boosterPackId, createdAt, updatedAt, [lotId+scannedAt]",decks:"id, platform, name, importedAt, createdAt, updatedAt",deck_cards:"id, deckId, cardId, lotId, addedAt, removedAt, createdAt, [deckId+cardId], [lotId+addedAt]",price_points:"id, cardId, provider, currency, asOf, source, createdAt, [cardId+asOf], [provider+asOf]",valuations:"id, asOf, createdAt, [asOf+createdAt]",settings:"k, createdAt, updatedAt",scan_sale_links:"id, scanId, transactionId, quantity, matchedAt, createdAt"}),this.version(6).stores({cards:"id, oracleId, name, set, setCode, number, lang, finish, layout, imageUrl, imageUrlBack, createdAt, updatedAt",card_lots:"id, cardId, acquisitionId, source, purchasedAt, disposedAt, createdAt, updatedAt, externalRef, [cardId+purchasedAt], [acquisitionId+cardId], [externalRef]",transactions:"id, kind, cardId, lotId, source, externalRef, happenedAt, relatedTransactionId, createdAt, updatedAt, [lotId+kind]",scans:"id, cardFingerprint, cardId, lotId, source, scannedAt, boosterPackId, createdAt, updatedAt, [lotId+scannedAt]",decks:"id, platform, name, importedAt, createdAt, updatedAt",deck_cards:"id, deckId, cardId, lotId, addedAt, removedAt, createdAt, [deckId+cardId], [lotId+addedAt]",price_points:"id, cardId, provider, currency, asOf, source, createdAt, [cardId+asOf], [provider+asOf]",valuations:"id, asOf, createdAt, [asOf+createdAt]",settings:"k, createdAt, updatedAt",scan_sale_links:"id, scanId, transactionId, quantity, matchedAt, createdAt"}).upgrade(async e=>{await e.table("cards").toCollection().modify(n=>{n.layout=n.layout||"normal"})}),this.version(7).stores({holdings:null}),this.version(8).stores({cards:"id, oracleId, name, set, setCode, number, lang, finish, layout, imageUrl, imageUrlBack, cardmarketId, createdAt, updatedAt",card_lots:"id, cardId, acquisitionId, source, purchasedAt, disposedAt, createdAt, updatedAt, externalRef, [cardId+purchasedAt], [acquisitionId+cardId], [externalRef]",transactions:"id, kind, cardId, lotId, source, externalRef, happenedAt, relatedTransactionId, createdAt, updatedAt, [lotId+kind]",scans:"id, cardFingerprint, cardId, lotId, source, scannedAt, boosterPackId, createdAt, updatedAt, [lotId+scannedAt]",decks:"id, platform, name, importedAt, createdAt, updatedAt",deck_cards:"id, deckId, cardId, lotId, addedAt, removedAt, createdAt, [deckId+cardId], [lotId+addedAt]",price_points:"id, cardId, provider, finish, date, currency, priceCent, asOf, createdAt, [cardId+date], [cardId+asOf], [provider+asOf], [cardId+provider+finish+date]",valuations:"id, asOf, createdAt, [asOf+createdAt]",settings:"k, createdAt, updatedAt",scan_sale_links:"id, scanId, transactionId, quantity, matchedAt, createdAt"}).upgrade(async e=>{const n=e.table("price_points"),s=await n.toArray();for(const r of s){if(r.priceCent==null&&r.price!=null){const f=typeof r.price=="number"&&r.price<1e3;r.priceCent=f?Math.round(r.price*100):r.price,delete r.price}let i=r.finish??"nonfoil",o=r.date??(r.asOf?new Date(r.asOf).toISOString().slice(0,10):void 0);const a=String(r.id??"").split(":"),l=a[2],c=a[3]??a[2];(l==="foil"||l==="etched")&&(i=l),/^\d{4}-\d{2}-\d{2}$/.test(c)&&(o=c);let u="scryfall";r.source&&(r.source==="mtgjson"?u="mtgjson.cardmarket":r.source==="cardmarket"?u="cardmarket.priceguide":u="scryfall"),r.finish=i,r.provider=u,r.date=o??new Date().toISOString().slice(0,10),r.currency=r.currency??"EUR",r.createdAt=r.createdAt??new Date,r.asOf=r.asOf??new Date,r.id=`${r.cardId}:${u}:${i}:${r.date}`,await n.put(r)}})}}const we=new ak,Bn={async add(t){return await we.cards.add(t)},async getById(t){return await we.cards.get(t)},async getAll(){return await we.cards.toArray()},async getByCardmarketIds(t){return await we.cards.where("cardmarketId").anyOf(t).toArray()},async update(t,e){return await we.cards.update(t,e)},async delete(t){await we.cards.delete(t)}},$t={async add(t){return await we.card_lots.add(t)},async getById(t){return await we.card_lots.get(t)},async getAll(){return await we.card_lots.toArray()},async getByCardId(t){return await we.card_lots.where("cardId").equals(t).toArray()},async getByExternalRef(t){return await we.card_lots.where("externalRef").equals(t).toArray()},async getActiveLotsByCardId(t){return await we.card_lots.where("cardId").equals(t).and(e=>!e.disposedAt).toArray()},async update(t,e){return await we.card_lots.update(t,e)},async delete(t){await we.card_lots.delete(t)}},Pn={async add(t){return await we.transactions.add(t)},async getById(t){return await we.transactions.get(t)},async getAll(){return await we.transactions.toArray()},async getByCardId(t){return await we.transactions.where("cardId").equals(t).toArray()},async getByLotId(t){return await we.transactions.where("lotId").equals(t).toArray()},async getByKind(t){return await we.transactions.where("kind").equals(t).toArray()},async getBuyTransactionsByCardId(t){return await we.transactions.where("cardId").equals(t).and(e=>e.kind==="BUY").toArray()},async getSellTransactionsByCardId(t){return await we.transactions.where("cardId").equals(t).and(e=>e.kind==="SELL").toArray()},async update(t,e){return await we.transactions.update(t,e)},async delete(t){await we.transactions.delete(t)}},Ba={async add(t){return await we.price_points.add(t)},async getById(t){return await we.price_points.get(t)},async getByCardId(t){return await we.price_points.where("cardId").equals(t).toArray()},async getByCardIdAndDate(t,e){return await we.price_points.where("[cardId+date]").equals([t,e]).toArray()},async getByCardIdAndSourceAndFinishAndDate(t,e,n,s){return await we.price_points.where("[cardId+source+finish+date]").equals([t,e,n,s]).toArray()},async update(t,e){return await we.price_points.update(t,e)},async bulkPut(t){await we.price_points.bulkPut(t)},async delete(t){await we.price_points.delete(t)}},od={async add(t){return await we.valuations.add(t)},async getById(t){return await we.valuations.get(t)},async getAll(){return await we.valuations.toArray()},async update(t,e){return await we.valuations.update(t,e)},async delete(t){await we.valuations.delete(t)}},Br={async set(t,e){const n={k:t,v:e,createdAt:new Date,updatedAt:new Date};return await we.settings.put(n)},async get(t){return(await we.settings.get(t))?.v},async getAll(){return await we.settings.toArray()},async delete(t){await we.settings.delete(t)}};class Be{cents;currency;constructor(e,n="EUR"){this.cents=Math.round(e),this.currency=n}static parse(e,n="EUR"){if(typeof e=="number")return new Be(e*100,n);const s=e.replace(/[$\s]/g,"").replace(",","."),r=parseFloat(s);return new Be(isNaN(r)?0:r*100,n)}getCents(){return this.cents}getDecimal(){return this.cents/100}getCurrency(){return this.currency}add(e){if(this.currency!==e.currency)throw new Error("Cannot add Money values with different currencies");return new Be(this.cents+e.cents,this.currency)}subtract(e){if(this.currency!==e.currency)throw new Error("Cannot subtract Money values with different currencies");return new Be(this.cents-e.cents,this.currency)}multiply(e){return new Be(this.cents*e,this.currency)}divide(e){return new Be(this.cents/e,this.currency)}format(e="de-DE"){return new Intl.NumberFormat(e,{style:"currency",currency:this.currency,minimumFractionDigits:2,maximumFractionDigits:2}).format(this.getDecimal())}isZero(){return this.cents===0}isPositive(){return this.cents>0}isNegative(){return this.cents<0}}const lk="mtgjson.idMap.v1",ck={"mtgjson.cardmarket":3,"cardmarket.priceguide":2,scryfall:1},Xd=lc("cards",{state:()=>({cards:{},cardPrices:{},cardLatest:{},idMap:null,loading:!1,loadingPrices:!1,error:null}),getters:{getCardById:t=>e=>t.cards[e],getAllCards:t=>Object.values(t.cards),getCardsBySet:t=>e=>Object.values(t.cards).filter(n=>n.setCode===e),getCardPrice:t=>e=>t.cardPrices[e]||null,getLatestNonfoil:t=>e=>t.cardLatest[e]?.nonfoil||null,getLatestFoil:t=>e=>t.cardLatest[e]?.foil||null},actions:{async loadCards(){this.loading=!0,this.error=null;try{const t=await Bn.getAll();this.cards=t.reduce((e,n)=>(e[n.id]=n,e),{})}catch(t){this.error=t instanceof Error?t.message:"Failed to load cards",console.error("Error loading cards:",t)}finally{this.loading=!1}},async ensureIdMap(){if(!this.idMap)try{this.idMap=await Br.get(lk)??null}catch(t){console.warn("[cardsStore] Could not load id map",t),this.idMap=null}},uuidForCard(t){const e=this.idMap;if(!e)return null;const n=e[t.id]||(t.oracleId?e[t.oracleId]:void 0);return n?String(n).toLowerCase():null},_pickLatestForFinish(t,e){const n=a=>{try{return new Date(a).toISOString().slice(0,10)}catch{return}},s={};for(const a of t){if((a.finish??"nonfoil")!==e)continue;const c=a.date??(a.asOf?n(a.asOf):void 0);if(!c)continue;const u=ck[a.provider??""]??0,f=a.asOf?new Date(a.asOf).getTime():0,p=s[c];(!p||u>p.rank||u===p.rank&&f>p.asOfTs)&&(s[c]={priceCent:a.priceCent,currency:a.currency??"EUR",rank:u,asOfTs:f})}const r=Object.keys(s);if(!r.length)return null;const i=r.sort((a,l)=>a.localeCompare(l)).at(-1),o=s[i];return new Be(o.priceCent,o.currency)},async loadLatestForCard(t){const e=this.cards[t];if(!e)return;const s=(await we.price_points.where("cardId").equals(t).toArray()).map(a=>({date:a.date,asOf:a.asOf,provider:a.provider,finish:a.finish??"nonfoil",priceCent:a.priceCent,currency:a.currency??"EUR"})),r=this._pickLatestForFinish(s,"nonfoil"),i=this._pickLatestForFinish(s,"foil");this.cardLatest[t]={nonfoil:r||void 0,foil:i||void 0};const o=(e.finish==="foil"?i:r)||i||r||null;o?this.cardPrices[t]=o:delete this.cardPrices[t]},async loadCardPrices(){this.loadingPrices=!0,this.error=null;try{Object.keys(this.cards).length||await this.loadCards(),await this.ensureIdMap();const t=Object.values(this.cards),e=8;for(let n=0;n<t.length;n+=e){const s=t.slice(n,n+e);await Promise.all(s.map(r=>this.loadLatestForCard(r.id)))}}catch(t){this.error=t instanceof Error?t.message:"Failed to load card prices",console.error("Error loading card prices:",t)}finally{this.loadingPrices=!1}},async getPriceHistory(t){if(!this.cards[t])return[];const n=r=>{try{return new Date(r).toISOString().slice(0,10)}catch{return}};return(await we.price_points.where("cardId").equals(t).toArray()).map(r=>({...r,date:r.date??(r.asOf?n(r.asOf):void 0)})).filter(r=>typeof r.date=="string").sort((r,i)=>r.date.localeCompare(i.date))},async loadCardsAndPrices(){await this.loadCards(),await this.loadCardPrices()},async addCard(t){await Bn.add(t),this.cards[t.id]=t},async updateCard(t,e){await Bn.update(t,e),this.cards[t]&&(this.cards[t]={...this.cards[t],...e})},async removeCard(t){await Bn.delete(t),delete this.cards[t],delete this.cardPrices[t],delete this.cardLatest[t]}}}),uk=lc("holdings",{state:()=>({holdings:{},loading:!1,error:null}),getters:{getHoldingByCardId:t=>e=>t.holdings[e],getAllHoldings:t=>Object.values(t.holdings),getTotalQuantityByCardId:t=>e=>t.holdings[e]?.quantity||0},actions:{async loadHoldings(){this.loading=!0,this.error=null;try{const t=await $t.getAll(),n=(await Bn.getAll()).reduce((r,i)=>(r[i.id]=i,r),{}),s={};for(const r of t){if(r.disposedAt)continue;const i=s[r.cardId],o=r.quantity-(r.disposedQuantity||0);i?(i.quantity+=o,i.totalCost+=r.totalAcquisitionCostCent||r.unitCost*o,i.averageCost=i.totalCost/i.quantity):s[r.cardId]={cardId:r.cardId,quantity:o,totalCost:r.totalAcquisitionCostCent||r.unitCost*o,averageCost:r.totalAcquisitionCostCent?r.totalAcquisitionCostCent/r.quantity:r.unitCost,card:n[r.cardId]}}this.holdings=s}catch(t){this.error=t instanceof Error?t.message:"Failed to load holdings",console.error("Error loading holdings:",t)}finally{this.loading=!1}}}}),dk=lc("transactions",{state:()=>({transactions:{},loading:!1,error:null}),getters:{getTransactionById:t=>e=>t.transactions[e],getAllTransactions:t=>Object.values(t.transactions),getTransactionsByCardId:t=>e=>Object.values(t.transactions).filter(n=>n.cardId===e),getTransactionsByKind:t=>e=>Object.values(t.transactions).filter(n=>n.kind===e),getTotalValueByKind:t=>e=>Object.values(t.transactions).filter(n=>n.kind===e).reduce((n,s)=>{const r=s.unitPrice*s.quantity,i=s.fees||0,o=s.shipping||0;return e==="BUY"?n+r+i+o:n+r-i-o},0)},actions:{async loadTransactions(){this.loading=!0,this.error=null;try{const t=await Pn.getAll();this.transactions=t.reduce((e,n)=>(e[n.id]=n,e),{})}catch(t){this.error=t instanceof Error?t.message:"Failed to load transactions",console.error("Error loading transactions:",t)}finally{this.loading=!1}},async addTransaction(t){try{await Pn.add(t),this.transactions[t.id]=t}catch(e){throw this.error=e instanceof Error?e.message:"Failed to add transaction",console.error("Error adding transaction:",e),e}},async updateTransaction(t,e){try{await Pn.update(t,e),this.transactions[t]&&(this.transactions[t]={...this.transactions[t],...e})}catch(n){throw this.error=n instanceof Error?n.message:"Failed to update transaction",console.error("Error updating transaction:",n),n}},async removeTransaction(t){try{await Pn.delete(t),delete this.transactions[t]}catch(e){throw this.error=e instanceof Error?e.message:"Failed to remove transaction",console.error("Error removing transaction:",e),e}}}});class ad{static PROVIDER_PRECEDENCE=["cardmarket.priceguide","mtgjson.cardmarket","scryfall"];static async getLatestPriceForCard(e){try{const n=await Ba.getByCardId(e);if(n.length===0)return null;const s=this.sortPricePointsByPrecedence(n);if(s.length===0)return null;const r=s[0];return{price:new Be(r.priceCent,r.currency),asOf:r.asOf,provider:r.provider}}catch(n){return console.error(`Error getting latest price for card ${e}:`,n),null}}static async getPricePointsForCard(e,n){try{let s=await Ba.getByCardId(e);return n?.source&&(s=s.filter(r=>r.provider===n.source)),n?.finish&&(s=s.filter(r=>r.finish===n.finish)),n?.startDate&&(s=s.filter(r=>new Date(r.asOf)>=n.startDate)),n?.endDate&&(s=s.filter(r=>new Date(r.asOf)<=n.endDate)),s=this.sortPricePointsByPrecedence(s),n?.limit&&(s=s.slice(0,n.limit)),s}catch(s){return console.error(`Error getting price points for card ${e}:`,s),[]}}static async getPriceForDate(e,n){try{const s=n.toISOString().split("T")[0];let r=await Ba.getByCardIdAndDate(e,s);if(r.length===0||(r=this.sortPricePointsByPrecedence(r),r.length===0))return null;const i=r[0];return{price:new Be(i.priceCent,i.currency),provider:i.provider,finish:i.finish}}catch(s){return console.error(`Error getting price for card ${e} on date ${n.toISOString().split("T")[0]}:`,s),null}}static async getPriceForDateAndFinish(e,n,s){try{const r=n.toISOString().split("T")[0];let i=await Ba.getByCardIdAndDate(e,r);if(i.length===0||(i=i.filter(a=>a.finish===s),i.length===0)||(i=this.sortPricePointsByPrecedence(i),i.length===0))return null;const o=i[0];return{price:new Be(o.priceCent,o.currency),provider:o.provider}}catch(r){return console.error(`Error getting price for card ${e} on date ${n.toISOString().split("T")[0]} with finish ${s}:`,r),null}}static sortPricePointsByPrecedence(e){return e.sort((n,s)=>{const r=this.PROVIDER_PRECEDENCE.indexOf(n.provider),i=this.PROVIDER_PRECEDENCE.indexOf(s.provider),o=r===-1?1/0:r,a=i===-1?1/0:i;return o!==a?o-a:new Date(s.asOf).getTime()-new Date(n.asOf).getTime()})}static getSourcePrecedence(e){const n=this.PROVIDER_PRECEDENCE.indexOf(e);return n===-1?1/0:n}}class Gs{static async calculateLotValue(e){if(e.cardId){const n=await ad.getLatestPriceForCard(e.cardId);if(n){const s=n.price,r=e.disposedQuantity?e.quantity-e.disposedQuantity:e.quantity;return s.multiply(r)}}return new Be(0,"EUR")}static async calculateLotCostBasis(e){if(e.totalAcquisitionCostCent){const i=(e.disposedQuantity?e.quantity-e.disposedQuantity:e.quantity)/e.quantity;return new Be(e.totalAcquisitionCostCent*i,e.currency||"EUR")}const n=new Be(e.unitCost,e.currency||"EUR"),s=e.disposedQuantity?e.quantity-e.disposedQuantity:e.quantity;return n.multiply(s)}static async calculateRealizedPnL(){const e=await Pn.getByKind("SELL");let n=new Be(0,"EUR");for(const s of e){const r=new Be(s.unitPrice,s.currency).multiply(s.quantity);let i=new Be(0,"EUR");if(s.lotId){const c=await $t.getById(s.lotId);c&&(i=(c.totalAcquisitionCostCent?new Be(c.totalAcquisitionCostCent,c.currency||"EUR"):new Be(c.unitCost,c.currency||"EUR").multiply(c.quantity)).multiply(s.quantity/c.quantity))}else s.cardId&&(i=await this.calculateFIFOCostForCard(s.cardId,s.quantity));const o=new Be(s.fees,s.currency),a=new Be(s.shipping,s.currency),l=r.subtract(i).subtract(o).subtract(a);n=n.add(l)}return n}static async calculateFIFOCostForCard(e,n){const r=(await $t.getByCardId(e)).filter(a=>!a.disposedAt||a.disposedQuantity&&a.disposedQuantity<a.quantity).sort((a,l)=>a.purchasedAt.getTime()-l.purchasedAt.getTime());let i=n,o=new Be(0,"EUR");for(const a of r){if(i<=0)break;const l=a.disposedQuantity?a.quantity-a.disposedQuantity:a.quantity,c=Math.min(i,l),f=new Be(a.unitCost,a.currency||"EUR").multiply(c);o=o.add(f),i-=c}return o}static async calculatePortfolioValue(){const e=await $t.getAll();let n=new Be(0,"EUR");for(const s of e)if(!s.disposedAt||s.disposedQuantity&&s.disposedQuantity<s.quantity){const r=await this.calculateLotValue(s);n=n.add(r)}return n}static async calculateTotalCostBasis(){const e=await $t.getAll();let n=new Be(0,"EUR");for(const s of e)if(!s.disposedAt||s.disposedQuantity&&s.disposedQuantity<s.quantity){const r=await this.calculateLotCostBasis(s);n=n.add(r)}return n}static async calculateUnrealizedPnL(){const e=await this.calculatePortfolioValue(),n=await this.calculateTotalCostBasis();return e.subtract(n)}static async getActiveLots(){return(await $t.getAll()).filter(n=>!n.disposedAt||n.disposedQuantity&&n.disposedQuantity<n.quantity)}static async getOwnedQuantity(e){const n=await $t.getByCardId(e);let s=0;for(const r of n)r.disposedAt?r.disposedQuantity&&r.disposedQuantity<r.quantity&&(s+=r.quantity-r.disposedQuantity):s+=r.quantity;return s}static async createValuationSnapshot(){try{const e=new Date;if(e.setHours(0,0,0,0),(await od.getAll()).find(l=>{const c=new Date(l.asOf);return c.setHours(0,0,0,0),c.getTime()===e.getTime()})){console.log("Valuation snapshot for today already exists");return}const r=await this.calculatePortfolioValue(),i=await this.calculateTotalCostBasis(),o=await this.calculateRealizedPnL(),a={id:`valuation-${Date.now()}`,asOf:new Date,totalValue:r.getCents(),totalCostBasis:i.getCents(),realizedPnLToDate:o.getCents(),createdAt:new Date};await od.add(a),console.log("Valuation snapshot created:",a)}catch(e){throw console.error("Error creating valuation snapshot:",e),e}}}class Er{static calculateTrueAcquisitionCost(e,n,s,r){const i=e+n+s;return Math.round(i/r*100)}static calculateNetRevenuePerCard(e,n,s,r){const i=e-n-s;return Math.round(i/r*100)}static async getTotalFees(e,n){const s=await Pn.getAll();let r=new Be(0,"EUR");for(const i of s)e&&new Date(i.happenedAt)<e||n&&new Date(i.happenedAt)>n||(r=r.add(new Be(i.fees||0,"EUR")));return r}static async getTotalShippingCosts(e,n,s){const r=await Pn.getAll();let i=new Be(0,"EUR");for(const o of r)e==="purchase"&&o.kind!=="BUY"||e==="sale"&&o.kind!=="SELL"||n&&new Date(o.happenedAt)<n||s&&new Date(o.happenedAt)>s||(i=i.add(new Be(o.shipping||0,o.currency||"EUR")));return i}static calculateLotNetProfit(e){if(!e.disposedAt||!e.salePriceCent)return 0;const n=e.totalAcquisitionCostCent||e.unitCost*e.quantity;return(e.totalSaleRevenueCent||e.salePriceCent*e.quantity-(e.saleFeesCent||0)+(e.saleShippingCent||0))-n}static async getTotalNetProfit(){const e=await $t.getAll();let n=new Be(0,"EUR");for(const s of e)if(s.disposedAt&&s.totalNetProfitCent!==void 0)n=n.add(new Be(s.totalNetProfitCent,"EUR"));else if(s.disposedAt&&s.salePriceCent){const r=this.calculateLotNetProfit(s);n=n.add(new Be(r,"EUR"))}return n}static async getTotalRevenue(){const e=await Pn.getByKind("SELL");let n=new Be(0,"EUR");for(const s of e){const r=new Be(s.unitPrice*s.quantity,s.currency);n=n.add(r)}return n}static async getTotalCosts(){const e=await Pn.getByKind("BUY");let n=new Be(0,"EUR");for(const s of e){const r=new Be(s.unitPrice*s.quantity,s.currency),i=new Be(s.fees||0,s.currency),o=new Be(s.shipping||0,s.currency);n=n.add(r).add(i).add(o)}return n}}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Zo(t){return t+.5|0}const Xs=(t,e,n)=>Math.max(Math.min(t,n),e);function ho(t){return Xs(Zo(t*2.55),0,255)}function Zs(t){return Xs(Zo(t*255),0,255)}function Ss(t){return Xs(Zo(t/2.55)/100,0,1)}function pp(t){return Xs(Zo(t*100),0,100)}const Rn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},ld=[..."0123456789ABCDEF"],fk=t=>ld[t&15],hk=t=>ld[(t&240)>>4]+ld[t&15],ja=t=>(t&240)>>4===(t&15),pk=t=>ja(t.r)&&ja(t.g)&&ja(t.b)&&ja(t.a);function gk(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Rn[t[1]]*17,g:255&Rn[t[2]]*17,b:255&Rn[t[3]]*17,a:e===5?Rn[t[4]]*17:255}:(e===7||e===9)&&(n={r:Rn[t[1]]<<4|Rn[t[2]],g:Rn[t[3]]<<4|Rn[t[4]],b:Rn[t[5]]<<4|Rn[t[6]],a:e===9?Rn[t[7]]<<4|Rn[t[8]]:255})),n}const mk=(t,e)=>t<255?e(t):"";function yk(t){var e=pk(t)?fk:hk;return t?"#"+e(t.r)+e(t.g)+e(t.b)+mk(t.a,e):void 0}const vk=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function hv(t,e,n){const s=e*Math.min(n,1-n),r=(i,o=(i+t/30)%12)=>n-s*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function bk(t,e,n){const s=(r,i=(r+t/60)%6)=>n-n*e*Math.max(Math.min(i,4-i,1),0);return[s(5),s(3),s(1)]}function _k(t,e,n){const s=hv(t,1,.5);let r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)s[r]*=1-e-n,s[r]+=e;return s}function wk(t,e,n,s,r){return t===r?(e-n)/s+(e<n?6:0):e===r?(n-t)/s+2:(t-e)/s+4}function Qd(t){const n=t.r/255,s=t.g/255,r=t.b/255,i=Math.max(n,s,r),o=Math.min(n,s,r),a=(i+o)/2;let l,c,u;return i!==o&&(u=i-o,c=a>.5?u/(2-i-o):u/(i+o),l=wk(n,s,r,u,i),l=l*60+.5),[l|0,c||0,a]}function Jd(t,e,n,s){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,s)).map(Zs)}function Zd(t,e,n){return Jd(hv,t,e,n)}function xk(t,e,n){return Jd(_k,t,e,n)}function kk(t,e,n){return Jd(bk,t,e,n)}function pv(t){return(t%360+360)%360}function Sk(t){const e=vk.exec(t);let n=255,s;if(!e)return;e[5]!==s&&(n=e[6]?ho(+e[5]):Zs(+e[5]));const r=pv(+e[2]),i=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?s=xk(r,i,o):e[1]==="hsv"?s=kk(r,i,o):s=Zd(r,i,o),{r:s[0],g:s[1],b:s[2],a:n}}function Ck(t,e){var n=Qd(t);n[0]=pv(n[0]+e),n=Zd(n),t.r=n[0],t.g=n[1],t.b=n[2]}function Pk(t){if(!t)return;const e=Qd(t),n=e[0],s=pp(e[1]),r=pp(e[2]);return t.a<255?`hsla(${n}, ${s}%, ${r}%, ${Ss(t.a)})`:`hsl(${n}, ${s}%, ${r}%)`}const gp={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},mp={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Ak(){const t={},e=Object.keys(mp),n=Object.keys(gp);let s,r,i,o,a;for(s=0;s<e.length;s++){for(o=a=e[s],r=0;r<n.length;r++)i=n[r],a=a.replace(i,gp[i]);i=parseInt(mp[o],16),t[a]=[i>>16&255,i>>8&255,i&255]}return t}let Na;function Ik(t){Na||(Na=Ak(),Na.transparent=[0,0,0,0]);const e=Na[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const Ek=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Ok(t){const e=Ek.exec(t);let n=255,s,r,i;if(e){if(e[7]!==s){const o=+e[7];n=e[8]?ho(o):Xs(o*255,0,255)}return s=+e[1],r=+e[3],i=+e[5],s=255&(e[2]?ho(s):Xs(s,0,255)),r=255&(e[4]?ho(r):Xs(r,0,255)),i=255&(e[6]?ho(i):Xs(i,0,255)),{r:s,g:r,b:i,a:n}}}function Mk(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Ss(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const hu=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,oi=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function Tk(t,e,n){const s=oi(Ss(t.r)),r=oi(Ss(t.g)),i=oi(Ss(t.b));return{r:Zs(hu(s+n*(oi(Ss(e.r))-s))),g:Zs(hu(r+n*(oi(Ss(e.g))-r))),b:Zs(hu(i+n*(oi(Ss(e.b))-i))),a:t.a+n*(e.a-t.a)}}function za(t,e,n){if(t){let s=Qd(t);s[e]=Math.max(0,Math.min(s[e]+s[e]*n,e===0?360:1)),s=Zd(s),t.r=s[0],t.g=s[1],t.b=s[2]}}function gv(t,e){return t&&Object.assign(e||{},t)}function yp(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Zs(t[3]))):(e=gv(t,{r:0,g:0,b:0,a:1}),e.a=Zs(e.a)),e}function Dk(t){return t.charAt(0)==="r"?Ok(t):Sk(t)}class Uo{constructor(e){if(e instanceof Uo)return e;const n=typeof e;let s;n==="object"?s=yp(e):n==="string"&&(s=gk(e)||Ik(e)||Dk(e)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var e=gv(this._rgb);return e&&(e.a=Ss(e.a)),e}set rgb(e){this._rgb=yp(e)}rgbString(){return this._valid?Mk(this._rgb):void 0}hexString(){return this._valid?yk(this._rgb):void 0}hslString(){return this._valid?Pk(this._rgb):void 0}mix(e,n){if(e){const s=this.rgb,r=e.rgb;let i;const o=n===i?.5:n,a=2*o-1,l=s.a-r.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;i=1-c,s.r=255&c*s.r+i*r.r+.5,s.g=255&c*s.g+i*r.g+.5,s.b=255&c*s.b+i*r.b+.5,s.a=o*s.a+(1-o)*r.a,this.rgb=s}return this}interpolate(e,n){return e&&(this._rgb=Tk(this._rgb,e._rgb,n)),this}clone(){return new Uo(this.rgb)}alpha(e){return this._rgb.a=Zs(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Zo(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return za(this._rgb,2,e),this}darken(e){return za(this._rgb,2,-e),this}saturate(e){return za(this._rgb,1,e),this}desaturate(e){return za(this._rgb,1,-e),this}rotate(e){return Ck(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function gs(){}const Rk=(()=>{let t=0;return()=>t++})();function _t(t){return t==null}function kt(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Je(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Kt(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Zn(t,e){return Kt(t)?t:e}function Qe(t,e){return typeof t>"u"?e:t}const $k=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,mv=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function pt(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function ht(t,e,n,s){let r,i,o;if(kt(t))for(i=t.length,r=0;r<i;r++)e.call(n,t[r],r);else if(Je(t))for(o=Object.keys(t),i=o.length,r=0;r<i;r++)e.call(n,t[o[r]],o[r])}function Tl(t,e){let n,s,r,i;if(!t||!e||t.length!==e.length)return!1;for(n=0,s=t.length;n<s;++n)if(r=t[n],i=e[n],r.datasetIndex!==i.datasetIndex||r.index!==i.index)return!1;return!0}function Dl(t){if(kt(t))return t.map(Dl);if(Je(t)){const e=Object.create(null),n=Object.keys(t),s=n.length;let r=0;for(;r<s;++r)e[n[r]]=Dl(t[n[r]]);return e}return t}function yv(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function Fk(t,e,n,s){if(!yv(t))return;const r=e[t],i=n[t];Je(r)&&Je(i)?qo(r,i,s):e[t]=Dl(i)}function qo(t,e,n){const s=kt(e)?e:[e],r=s.length;if(!Je(t))return t;n=n||{};const i=n.merger||Fk;let o;for(let a=0;a<r;++a){if(o=s[a],!Je(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)i(l[c],t,o,n)}return t}function Io(t,e){return qo(t,e,{merger:Lk})}function Lk(t,e,n){if(!yv(t))return;const s=e[t],r=n[t];Je(s)&&Je(r)?Io(s,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Dl(r))}const vp={"":t=>t,x:t=>t.x,y:t=>t.y};function Bk(t){const e=t.split("."),n=[];let s="";for(const r of e)s+=r,s.endsWith("\\")?s=s.slice(0,-1)+".":(n.push(s),s="");return n}function jk(t){const e=Bk(t);return n=>{for(const s of e){if(s==="")break;n=n&&n[s]}return n}}function Wo(t,e){return(vp[e]||(vp[e]=jk(e)))(t)}function ef(t){return t.charAt(0).toUpperCase()+t.slice(1)}const On=t=>typeof t<"u",vn=t=>typeof t=="function",bp=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function Nk(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const ut=Math.PI,qt=2*ut,zk=qt+ut,Rl=Number.POSITIVE_INFINITY,tf=ut/180,Qt=ut/2,Fn=ut/4,$l=ut*2/3,vv=Math.log10,Ei=Math.sign;function Eo(t,e,n){return Math.abs(t-e)<n}function _p(t){const e=Math.round(t);t=Eo(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(vv(t))),s=t/n;return(s<=1?1:s<=2?2:s<=5?5:10)*n}function Uk(t){const e=[],n=Math.sqrt(t);let s;for(s=1;s<n;s++)t%s===0&&(e.push(s),e.push(t/s));return n===(n|0)&&e.push(n),e.sort((r,i)=>r-i).pop(),e}function qk(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Nr(t){return!qk(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function Wk(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function Vk(t,e,n){let s,r,i;for(s=0,r=t.length;s<r;s++)i=t[s][n],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function Wt(t){return t*(ut/180)}function bv(t){return t*(180/ut)}function wp(t){if(!Kt(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function cd(t,e){const n=e.x-t.x,s=e.y-t.y,r=Math.sqrt(n*n+s*s);let i=Math.atan2(s,n);return i<-.5*ut&&(i+=qt),{angle:i,distance:r}}function Oi(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Hk(t,e){return(t-e+zk)%qt-ut}function rs(t){return(t%qt+qt)%qt}function Fl(t,e,n,s){const r=rs(t),i=rs(e),o=rs(n),a=rs(i-r),l=rs(o-r),c=rs(r-i),u=rs(r-o);return r===i||r===o||s&&i===o||a>l&&c<u}function jn(t,e,n){return Math.max(e,Math.min(n,t))}function Kk(t){return jn(t,-32768,32767)}function hi(t,e,n,s=1e-6){return t>=Math.min(e,n)-s&&t<=Math.max(e,n)+s}function nf(t,e,n){n=n||(o=>t[o]<e);let s=t.length-1,r=0,i;for(;s-r>1;)i=r+s>>1,n(i)?r=i:s=i;return{lo:r,hi:s}}const Dr=(t,e,n,s)=>nf(t,n,s?r=>{const i=t[r][e];return i<n||i===n&&t[r+1][e]===n}:r=>t[r][e]<n),Yk=(t,e,n)=>nf(t,n,s=>t[s][e]>=n);function Gk(t,e,n){let s=0,r=t.length;for(;s<r&&t[s]<e;)s++;for(;r>s&&t[r-1]>n;)r--;return s>0||r<t.length?t.slice(s,r):t}const _v=["push","pop","shift","splice","unshift"];function Xk(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),_v.forEach(n=>{const s="_onData"+ef(n),r=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...i){const o=r.apply(this,i);return t._chartjs.listeners.forEach(a=>{typeof a[s]=="function"&&a[s](...i)}),o}})})}function xp(t,e){const n=t._chartjs;if(!n)return;const s=n.listeners,r=s.indexOf(e);r!==-1&&s.splice(r,1),!(s.length>0)&&(_v.forEach(i=>{delete t[i]}),delete t._chartjs)}function Qk(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const wv=(function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame})();function xv(t,e){let n=[],s=!1;return function(...r){n=r,s||(s=!0,wv.call(window,()=>{s=!1,t.apply(e,n)}))}}function Jk(t,e){let n;return function(...s){return e?(clearTimeout(n),n=setTimeout(t,e,s)):t.apply(this,s),e}}const sf=t=>t==="start"?"left":t==="end"?"right":"center",nn=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,Zk=(t,e,n,s)=>t===(s?"left":"right")?n:t==="center"?(e+n)/2:e;function eS(t,e,n){const s=e.length;let r=0,i=s;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=o.axis,{min:f,max:p,minDefined:m,maxDefined:v}=o.getUserBounds();if(m){if(r=Math.min(Dr(l,u,f).lo,n?s:Dr(e,u,o.getPixelForValue(f)).lo),c){const _=l.slice(0,r+1).reverse().findIndex(k=>!_t(k[a.axis]));r-=Math.max(0,_)}r=jn(r,0,s-1)}if(v){let _=Math.max(Dr(l,o.axis,p,!0).hi+1,n?0:Dr(e,u,o.getPixelForValue(p),!0).hi+1);if(c){const k=l.slice(_-1).findIndex(S=>!_t(S[a.axis]));_+=Math.max(0,k)}i=jn(_,r,s)-r}else i=s-r}return{start:r,count:i}}function tS(t){const{xScale:e,yScale:n,_scaleRanges:s}=t,r={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!s)return t._scaleRanges=r,!0;const i=s.xmin!==e.min||s.xmax!==e.max||s.ymin!==n.min||s.ymax!==n.max;return Object.assign(s,r),i}const Ua=t=>t===0||t===1,kp=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*qt/n)),Sp=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*qt/n)+1,Oo={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Qt)+1,easeOutSine:t=>Math.sin(t*Qt),easeInOutSine:t=>-.5*(Math.cos(ut*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Ua(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Ua(t)?t:kp(t,.075,.3),easeOutElastic:t=>Ua(t)?t:Sp(t,.075,.3),easeInOutElastic(t){return Ua(t)?t:t<.5?.5*kp(t*2,.1125,.45):.5+.5*Sp(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Oo.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Oo.easeInBounce(t*2)*.5:Oo.easeOutBounce(t*2-1)*.5+.5};function rf(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Cp(t){return rf(t)?t:new Uo(t)}function pu(t){return rf(t)?t:new Uo(t).saturate(.5).darken(.1).hexString()}const nS=["x","y","borderWidth","radius","tension"],sS=["color","borderColor","backgroundColor"];function rS(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:sS},numbers:{type:"number",properties:nS}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function iS(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Pp=new Map;function oS(t,e){e=e||{};const n=t+JSON.stringify(e);let s=Pp.get(n);return s||(s=new Intl.NumberFormat(t,e),Pp.set(n,s)),s}function of(t,e,n){return oS(e,n).format(t)}const aS={values(t){return kt(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const s=this.chart.options.locale;let r,i=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(r="scientific"),i=lS(t,n)}const o=vv(Math.abs(i)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),of(t,s,l)}};function lS(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var kv={formatters:aS};function cS(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:kv.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const zr=Object.create(null),ud=Object.create(null);function Mo(t,e){if(!e)return t;const n=e.split(".");for(let s=0,r=n.length;s<r;++s){const i=n[s];t=t[i]||(t[i]=Object.create(null))}return t}function gu(t,e,n){return typeof e=="string"?qo(Mo(t,e),n):qo(Mo(t,""),e)}class uS{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,r)=>pu(r.backgroundColor),this.hoverBorderColor=(s,r)=>pu(r.borderColor),this.hoverColor=(s,r)=>pu(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return gu(this,e,n)}get(e){return Mo(this,e)}describe(e,n){return gu(ud,e,n)}override(e,n){return gu(zr,e,n)}route(e,n,s,r){const i=Mo(this,e),o=Mo(this,s),a="_"+n;Object.defineProperties(i,{[a]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[r];return Je(l)?Object.assign({},c,l):Qe(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var Ot=new uS({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[rS,iS,cS]);function dS(t){return!t||_t(t.size)||_t(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Ap(t,e,n,s,r){let i=e[r];return i||(i=e[r]=t.measureText(r).width,n.push(r)),i>s&&(s=i),s}function vr(t,e,n){const s=t.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((e-r)*s)/s+r}function Ip(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function dd(t,e,n,s){Sv(t,e,n,s,null)}function Sv(t,e,n,s,r){let i,o,a,l,c,u,f,p;const m=e.pointStyle,v=e.rotation,_=e.radius;let k=(v||0)*tf;if(m&&typeof m=="object"&&(i=m.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(n,s),t.rotate(k),t.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),t.restore();return}if(!(isNaN(_)||_<=0)){switch(t.beginPath(),m){default:r?t.ellipse(n,s,r/2,_,0,0,qt):t.arc(n,s,_,0,qt),t.closePath();break;case"triangle":u=r?r/2:_,t.moveTo(n+Math.sin(k)*u,s-Math.cos(k)*_),k+=$l,t.lineTo(n+Math.sin(k)*u,s-Math.cos(k)*_),k+=$l,t.lineTo(n+Math.sin(k)*u,s-Math.cos(k)*_),t.closePath();break;case"rectRounded":c=_*.516,l=_-c,o=Math.cos(k+Fn)*l,f=Math.cos(k+Fn)*(r?r/2-c:l),a=Math.sin(k+Fn)*l,p=Math.sin(k+Fn)*(r?r/2-c:l),t.arc(n-f,s-a,c,k-ut,k-Qt),t.arc(n+p,s-o,c,k-Qt,k),t.arc(n+f,s+a,c,k,k+Qt),t.arc(n-p,s+o,c,k+Qt,k+ut),t.closePath();break;case"rect":if(!v){l=Math.SQRT1_2*_,u=r?r/2:l,t.rect(n-u,s-l,2*u,2*l);break}k+=Fn;case"rectRot":f=Math.cos(k)*(r?r/2:_),o=Math.cos(k)*_,a=Math.sin(k)*_,p=Math.sin(k)*(r?r/2:_),t.moveTo(n-f,s-a),t.lineTo(n+p,s-o),t.lineTo(n+f,s+a),t.lineTo(n-p,s+o),t.closePath();break;case"crossRot":k+=Fn;case"cross":f=Math.cos(k)*(r?r/2:_),o=Math.cos(k)*_,a=Math.sin(k)*_,p=Math.sin(k)*(r?r/2:_),t.moveTo(n-f,s-a),t.lineTo(n+f,s+a),t.moveTo(n+p,s-o),t.lineTo(n-p,s+o);break;case"star":f=Math.cos(k)*(r?r/2:_),o=Math.cos(k)*_,a=Math.sin(k)*_,p=Math.sin(k)*(r?r/2:_),t.moveTo(n-f,s-a),t.lineTo(n+f,s+a),t.moveTo(n+p,s-o),t.lineTo(n-p,s+o),k+=Fn,f=Math.cos(k)*(r?r/2:_),o=Math.cos(k)*_,a=Math.sin(k)*_,p=Math.sin(k)*(r?r/2:_),t.moveTo(n-f,s-a),t.lineTo(n+f,s+a),t.moveTo(n+p,s-o),t.lineTo(n-p,s+o);break;case"line":o=r?r/2:Math.cos(k)*_,a=Math.sin(k)*_,t.moveTo(n-o,s-a),t.lineTo(n+o,s+a);break;case"dash":t.moveTo(n,s),t.lineTo(n+Math.cos(k)*(r?r/2:_),s+Math.sin(k)*_);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Vo(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function ea(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function ta(t){t.restore()}function fS(t,e,n,s,r){if(!e)return t.lineTo(n.x,n.y);if(r==="middle"){const i=(e.x+n.x)/2;t.lineTo(i,e.y),t.lineTo(i,n.y)}else r==="after"!=!!s?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function hS(t,e,n,s){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(s?e.cp1x:e.cp2x,s?e.cp1y:e.cp2y,s?n.cp2x:n.cp1x,s?n.cp2y:n.cp1y,n.x,n.y)}function pS(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),_t(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function gS(t,e,n,s,r){if(r.strikethrough||r.underline){const i=t.measureText(s),o=e-i.actualBoundingBoxLeft,a=e+i.actualBoundingBoxRight,l=n-i.actualBoundingBoxAscent,c=n+i.actualBoundingBoxDescent,u=r.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function mS(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Ho(t,e,n,s,r,i={}){const o=kt(e)?e:[e],a=i.strokeWidth>0&&i.strokeColor!=="";let l,c;for(t.save(),t.font=r.string,pS(t,i),l=0;l<o.length;++l)c=o[l],i.backdrop&&mS(t,i.backdrop),a&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),_t(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(c,n,s,i.maxWidth)),t.fillText(c,n,s,i.maxWidth),gS(t,n,s,c,i),s+=Number(r.lineHeight);t.restore()}function Ll(t,e){const{x:n,y:s,w:r,h:i,radius:o}=e;t.arc(n+o.topLeft,s+o.topLeft,o.topLeft,1.5*ut,ut,!0),t.lineTo(n,s+i-o.bottomLeft),t.arc(n+o.bottomLeft,s+i-o.bottomLeft,o.bottomLeft,ut,Qt,!0),t.lineTo(n+r-o.bottomRight,s+i),t.arc(n+r-o.bottomRight,s+i-o.bottomRight,o.bottomRight,Qt,0,!0),t.lineTo(n+r,s+o.topRight),t.arc(n+r-o.topRight,s+o.topRight,o.topRight,0,-Qt,!0),t.lineTo(n+o.topLeft,s)}const yS=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,vS=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function bS(t,e){const n=(""+t).match(yS);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const _S=t=>+t||0;function Cv(t,e){const n={},s=Je(e),r=s?Object.keys(e):e,i=Je(t)?s?o=>Qe(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of r)n[o]=_S(i(o));return n}function wS(t){return Cv(t,{top:"y",right:"x",bottom:"y",left:"x"})}function wi(t){return Cv(t,["topLeft","topRight","bottomLeft","bottomRight"])}function ln(t){const e=wS(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Lt(t,e){t=t||{},e=e||Ot.font;let n=Qe(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let s=Qe(t.style,e.style);s&&!(""+s).match(vS)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const r={family:Qe(t.family,e.family),lineHeight:bS(Qe(t.lineHeight,e.lineHeight),n),size:n,style:s,weight:Qe(t.weight,e.weight),string:""};return r.string=dS(r),r}function qa(t,e,n,s){let r,i,o;for(r=0,i=t.length;r<i;++r)if(o=t[r],o!==void 0&&o!==void 0)return o}function xS(t,e,n){const{min:s,max:r}=t,i=mv(e,(r-s)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(s,-Math.abs(i)),max:o(r,i)}}function Wr(t,e){return Object.assign(Object.create(t),e)}function af(t,e=[""],n,s,r=()=>t[0]){const i=n||t;typeof s>"u"&&(s=Ev("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:s,_getTarget:r,override:a=>af([a,...t],e,i,s)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return Av(a,l,()=>OS(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return Op(a).includes(l)},ownKeys(a){return Op(a)},set(a,l,c){const u=a._storage||(a._storage=r());return a[l]=u[l]=c,delete a._keys,!0}})}function Mi(t,e,n,s){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:Pv(t,s),setContext:i=>Mi(t,i,n,s),override:i=>Mi(t.override(i),e,n,s)};return new Proxy(r,{deleteProperty(i,o){return delete i[o],delete t[o],!0},get(i,o,a){return Av(i,o,()=>SS(i,o,a))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(i,o,a){return t[o]=a,delete i[o],!0}})}function Pv(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:s=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:s,isScriptable:vn(n)?n:()=>n,isIndexable:vn(s)?s:()=>s}}const kS=(t,e)=>t?t+ef(e):e,lf=(t,e)=>Je(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function Av(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const s=n();return t[e]=s,s}function SS(t,e,n){const{_proxy:s,_context:r,_subProxy:i,_descriptors:o}=t;let a=s[e];return vn(a)&&o.isScriptable(e)&&(a=CS(e,a,t,n)),kt(a)&&a.length&&(a=PS(e,a,t,o.isIndexable)),lf(e,a)&&(a=Mi(a,r,i&&i[e],o)),a}function CS(t,e,n,s){const{_proxy:r,_context:i,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(i,o||s);return a.delete(t),lf(t,l)&&(l=cf(r._scopes,r,t,l)),l}function PS(t,e,n,s){const{_proxy:r,_context:i,_subProxy:o,_descriptors:a}=n;if(typeof i.index<"u"&&s(t))return e[i.index%e.length];if(Je(e[0])){const l=e,c=r._scopes.filter(u=>u!==l);e=[];for(const u of l){const f=cf(c,r,t,u);e.push(Mi(f,i,o&&o[t],a))}}return e}function Iv(t,e,n){return vn(t)?t(e,n):t}const AS=(t,e)=>t===!0?e:typeof t=="string"?Wo(e,t):void 0;function IS(t,e,n,s,r){for(const i of e){const o=AS(n,i);if(o){t.add(o);const a=Iv(o._fallback,n,r);if(typeof a<"u"&&a!==n&&a!==s)return a}else if(o===!1&&typeof s<"u"&&n!==s)return null}return!1}function cf(t,e,n,s){const r=e._rootScopes,i=Iv(e._fallback,n,s),o=[...t,...r],a=new Set;a.add(s);let l=Ep(a,o,n,i||n,s);return l===null||typeof i<"u"&&i!==n&&(l=Ep(a,o,i,l,s),l===null)?!1:af(Array.from(a),[""],r,i,()=>ES(e,n,s))}function Ep(t,e,n,s,r){for(;n;)n=IS(t,e,n,s,r);return n}function ES(t,e,n){const s=t._getTarget();e in s||(s[e]={});const r=s[e];return kt(r)&&Je(n)?n:r||{}}function OS(t,e,n,s){let r;for(const i of e)if(r=Ev(kS(i,t),n),typeof r<"u")return lf(t,r)?cf(n,s,t,r):r}function Ev(t,e){for(const n of e){if(!n)continue;const s=n[t];if(typeof s<"u")return s}}function Op(t){let e=t._keys;return e||(e=t._keys=MS(t._scopes)),e}function MS(t){const e=new Set;for(const n of t)for(const s of Object.keys(n).filter(r=>!r.startsWith("_")))e.add(s);return Array.from(e)}const TS=Number.EPSILON||1e-14,Ti=(t,e)=>e<t.length&&!t[e].skip&&t[e],Ov=t=>t==="x"?"y":"x";function DS(t,e,n,s){const r=t.skip?e:t,i=e,o=n.skip?e:n,a=Oi(i,r),l=Oi(o,i);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const f=s*c,p=s*u;return{previous:{x:i.x-f*(o.x-r.x),y:i.y-f*(o.y-r.y)},next:{x:i.x+p*(o.x-r.x),y:i.y+p*(o.y-r.y)}}}function RS(t,e,n){const s=t.length;let r,i,o,a,l,c=Ti(t,0);for(let u=0;u<s-1;++u)if(l=c,c=Ti(t,u+1),!(!l||!c)){if(Eo(e[u],0,TS)){n[u]=n[u+1]=0;continue}r=n[u]/e[u],i=n[u+1]/e[u],a=Math.pow(r,2)+Math.pow(i,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=r*o*e[u],n[u+1]=i*o*e[u])}}function $S(t,e,n="x"){const s=Ov(n),r=t.length;let i,o,a,l=Ti(t,0);for(let c=0;c<r;++c){if(o=a,a=l,l=Ti(t,c+1),!a)continue;const u=a[n],f=a[s];o&&(i=(u-o[n])/3,a[`cp1${n}`]=u-i,a[`cp1${s}`]=f-i*e[c]),l&&(i=(l[n]-u)/3,a[`cp2${n}`]=u+i,a[`cp2${s}`]=f+i*e[c])}}function FS(t,e="x"){const n=Ov(e),s=t.length,r=Array(s).fill(0),i=Array(s);let o,a,l,c=Ti(t,0);for(o=0;o<s;++o)if(a=l,l=c,c=Ti(t,o+1),!!l){if(c){const u=c[e]-l[e];r[o]=u!==0?(c[n]-l[n])/u:0}i[o]=a?c?Ei(r[o-1])!==Ei(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}RS(t,r,i),$S(t,i,e)}function Wa(t,e,n){return Math.max(Math.min(t,n),e)}function LS(t,e){let n,s,r,i,o,a=Vo(t[0],e);for(n=0,s=t.length;n<s;++n)o=i,i=a,a=n<s-1&&Vo(t[n+1],e),i&&(r=t[n],o&&(r.cp1x=Wa(r.cp1x,e.left,e.right),r.cp1y=Wa(r.cp1y,e.top,e.bottom)),a&&(r.cp2x=Wa(r.cp2x,e.left,e.right),r.cp2y=Wa(r.cp2y,e.top,e.bottom)))}function BS(t,e,n,s,r){let i,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")FS(t,r);else{let c=s?t[t.length-1]:t[0];for(i=0,o=t.length;i<o;++i)a=t[i],l=DS(c,a,t[Math.min(i+1,o-(s?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&LS(t,n)}function uf(){return typeof window<"u"&&typeof document<"u"}function df(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Bl(t,e,n){let s;return typeof t=="string"?(s=parseInt(t,10),t.indexOf("%")!==-1&&(s=s/100*e.parentNode[n])):s=t,s}const cc=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function jS(t,e){return cc(t).getPropertyValue(e)}const NS=["top","right","bottom","left"];function jr(t,e,n){const s={};n=n?"-"+n:"";for(let r=0;r<4;r++){const i=NS[r];s[i]=parseFloat(t[e+"-"+i+n])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const zS=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function US(t,e){const n=t.touches,s=n&&n.length?n[0]:t,{offsetX:r,offsetY:i}=s;let o=!1,a,l;if(zS(r,i,t.target))a=r,l=i;else{const c=e.getBoundingClientRect();a=s.clientX-c.left,l=s.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Or(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:s}=e,r=cc(n),i=r.boxSizing==="border-box",o=jr(r,"padding"),a=jr(r,"border","width"),{x:l,y:c,box:u}=US(t,n),f=o.left+(u&&a.left),p=o.top+(u&&a.top);let{width:m,height:v}=e;return i&&(m-=o.width+a.width,v-=o.height+a.height),{x:Math.round((l-f)/m*n.width/s),y:Math.round((c-p)/v*n.height/s)}}function qS(t,e,n){let s,r;if(e===void 0||n===void 0){const i=t&&df(t);if(!i)e=t.clientWidth,n=t.clientHeight;else{const o=i.getBoundingClientRect(),a=cc(i),l=jr(a,"border","width"),c=jr(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,s=Bl(a.maxWidth,i,"clientWidth"),r=Bl(a.maxHeight,i,"clientHeight")}}return{width:e,height:n,maxWidth:s||Rl,maxHeight:r||Rl}}const Va=t=>Math.round(t*10)/10;function WS(t,e,n,s){const r=cc(t),i=jr(r,"margin"),o=Bl(r.maxWidth,t,"clientWidth")||Rl,a=Bl(r.maxHeight,t,"clientHeight")||Rl,l=qS(t,e,n);let{width:c,height:u}=l;if(r.boxSizing==="content-box"){const p=jr(r,"border","width"),m=jr(r,"padding");c-=m.width+p.width,u-=m.height+p.height}return c=Math.max(0,c-i.width),u=Math.max(0,s?c/s:u-i.height),c=Va(Math.min(c,o,l.maxWidth)),u=Va(Math.min(u,a,l.maxHeight)),c&&!u&&(u=Va(c/2)),(e!==void 0||n!==void 0)&&s&&l.height&&u>l.height&&(u=l.height,c=Va(Math.floor(u*s))),{width:c,height:u}}function Mp(t,e,n){const s=e||1,r=Math.floor(t.height*s),i=Math.floor(t.width*s);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==s||o.height!==r||o.width!==i?(t.currentDevicePixelRatio=s,o.height=r,o.width=i,t.ctx.setTransform(s,0,0,s,0,0),!0):!1}const VS=(function(){let t=!1;try{const e={get passive(){return t=!0,!1}};uf()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t})();function Tp(t,e){const n=jS(t,e),s=n&&n.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function Mr(t,e,n,s){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function HS(t,e,n,s){return{x:t.x+n*(e.x-t.x),y:s==="middle"?n<.5?t.y:e.y:s==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function KS(t,e,n,s){const r={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},o=Mr(t,r,n),a=Mr(r,i,n),l=Mr(i,e,n),c=Mr(o,a,n),u=Mr(a,l,n);return Mr(c,u,n)}const YS=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,s){return n-s},leftForLtr(n,s){return n-s}}},GS=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function xi(t,e,n){return t?YS(e,n):GS()}function Mv(t,e){let n,s;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,s=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=s)}function Tv(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Dv(t){return t==="angle"?{between:Fl,compare:Hk,normalize:rs}:{between:hi,compare:(e,n)=>e-n,normalize:e=>e}}function Dp({start:t,end:e,count:n,loop:s,style:r}){return{start:t%n,end:e%n,loop:s&&(e-t+1)%n===0,style:r}}function XS(t,e,n){const{property:s,start:r,end:i}=n,{between:o,normalize:a}=Dv(s),l=e.length;let{start:c,end:u,loop:f}=t,p,m;if(f){for(c+=l,u+=l,p=0,m=l;p<m&&o(a(e[c%l][s]),r,i);++p)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:f,style:t.style}}function Rv(t,e,n){if(!n)return[t];const{property:s,start:r,end:i}=n,o=e.length,{compare:a,between:l,normalize:c}=Dv(s),{start:u,end:f,loop:p,style:m}=XS(t,e,n),v=[];let _=!1,k=null,S,P,E;const C=()=>l(r,E,S)&&a(r,E)!==0,I=()=>a(i,S)===0||l(i,E,S),T=()=>_||C(),G=()=>!_||I();for(let V=u,A=u;V<=f;++V)P=e[V%o],!P.skip&&(S=c(P[s]),S!==E&&(_=l(S,r,i),k===null&&T()&&(k=a(S,r)===0?V:A),k!==null&&G()&&(v.push(Dp({start:k,end:V,loop:p,count:o,style:m})),k=null),A=V,E=S));return k!==null&&v.push(Dp({start:k,end:f,loop:p,count:o,style:m})),v}function $v(t,e){const n=[],s=t.segments;for(let r=0;r<s.length;r++){const i=Rv(s[r],t.points,e);i.length&&n.push(...i)}return n}function QS(t,e,n,s){let r=0,i=e-1;if(n&&!s)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,n&&(i+=r);i>r&&t[i%e].skip;)i--;return i%=e,{start:r,end:i}}function JS(t,e,n,s){const r=t.length,i=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%r];c.skip||c.stop?a.skip||(s=!1,i.push({start:e%r,end:(l-1)%r,loop:s}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&i.push({start:e%r,end:o%r,loop:s}),i}function ZS(t,e){const n=t.points,s=t.options.spanGaps,r=n.length;if(!r)return[];const i=!!t._loop,{start:o,end:a}=QS(n,r,i,s);if(s===!0)return Rp(t,[{start:o,end:a,loop:i}],n,e);const l=a<o?a+r:a,c=!!t._fullLoop&&o===0&&a===r-1;return Rp(t,JS(n,o,l,c),n,e)}function Rp(t,e,n,s){return!s||!s.setContext||!n?e:eC(t,e,n,s)}function eC(t,e,n,s){const r=t._chart.getContext(),i=$p(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let u=i,f=e[0].start,p=f;function m(v,_,k,S){const P=a?-1:1;if(v!==_){for(v+=l;n[v%l].skip;)v-=P;for(;n[_%l].skip;)_+=P;v%l!==_%l&&(c.push({start:v%l,end:_%l,loop:k,style:S}),u=S,f=_%l)}}for(const v of e){f=a?f:v.start;let _=n[f%l],k;for(p=f+1;p<=v.end;p++){const S=n[p%l];k=$p(s.setContext(Wr(r,{type:"segment",p0:_,p1:S,p0DataIndex:(p-1)%l,p1DataIndex:p%l,datasetIndex:o}))),tC(k,u)&&m(f,p-1,v.loop,u),_=S,u=k}f<p-1&&m(f,p-1,v.loop,u)}return c}function $p(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function tC(t,e){if(!e)return!1;const n=[],s=function(r,i){return rf(i)?(n.includes(i)||n.push(i),n.indexOf(i)):i};return JSON.stringify(t,s)!==JSON.stringify(e,s)}function Ha(t,e,n){return t.options.clip?t[n]:e[n]}function nC(t,e){const{xScale:n,yScale:s}=t;return n&&s?{left:Ha(n,e,"left"),right:Ha(n,e,"right"),top:Ha(s,e,"top"),bottom:Ha(s,e,"bottom")}:e}function Fv(t,e){const n=e._clip;if(n.disabled)return!1;const s=nC(e,t.chartArea);return{left:n.left===!1?0:s.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:s.right+(n.right===!0?0:n.right),top:n.top===!1?0:s.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:s.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class sC{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,s,r){const i=n.listeners[r],o=n.duration;i.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(s-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=wv.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((s,r)=>{if(!s.running||!s.items.length)return;const i=s.items;let o=i.length-1,a=!1,l;for(;o>=0;--o)l=i[o],l._active?(l._total>s.duration&&(s.duration=l._total),l.tick(e),a=!0):(i[o]=i[i.length-1],i.pop());a&&(r.draw(),this._notify(r,s,e,"progress")),i.length||(s.running=!1,this._notify(r,s,e,"complete"),s.initial=!1),n+=i.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let s=n.get(e);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,s)),s}listen(e,n,s){this._getAnims(e).listeners[n].push(s)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((s,r)=>Math.max(s,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const s=n.items;let r=s.length-1;for(;r>=0;--r)s[r].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var ws=new sC;const Fp="transparent",rC={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const s=Cp(t||Fp),r=s.valid&&Cp(e||Fp);return r&&r.valid?r.mix(s,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class iC{constructor(e,n,s,r){const i=n[s];r=qa([e.to,r,i,e.from]);const o=qa([e.from,i,r]);this._active=!0,this._fn=e.fn||rC[e.type||typeof o],this._easing=Oo[e.easing]||Oo.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=s,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,n,s){if(this._active){this._notify(!1);const r=this._target[this._prop],i=s-this._start,o=this._duration-i;this._start=s,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=qa([e.to,n,r,e.from]),this._from=qa([e.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,s=this._duration,r=this._prop,i=this._from,o=this._loop,a=this._to;let l;if(this._active=i!==a&&(o||n<s),!this._active){this._target[r]=a,this._notify(!0);return}if(n<0){this._target[r]=i;return}l=n/s%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(i,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,s)=>{e.push({res:n,rej:s})})}_notify(e){const n=e?"res":"rej",s=this._promises||[];for(let r=0;r<s.length;r++)s[r][n]()}}class ff{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Je(e))return;const n=Object.keys(Ot.animation),s=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const i=e[r];if(!Je(i))return;const o={};for(const a of n)o[a]=i[a];(kt(i.properties)&&i.properties||[r]).forEach(a=>{(a===r||!s.has(a))&&s.set(a,o)})})}_animateOptions(e,n){const s=n.options,r=aC(e,s);if(!r)return[];const i=this._createAnimations(r,s);return s.$shared&&oC(e.options.$animations,s).then(()=>{e.options=s},()=>{}),i}_createAnimations(e,n){const s=this._properties,r=[],i=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){r.push(...this._animateOptions(e,n));continue}const u=n[c];let f=i[c];const p=s.get(c);if(f)if(p&&f.active()){f.update(p,u,a);continue}else f.cancel();if(!p||!p.duration){e[c]=u;continue}i[c]=f=new iC(p,e,c,u),r.push(f)}return r}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const s=this._createAnimations(e,n);if(s.length)return ws.add(this._chart,s),!0}}function oC(t,e){const n=[],s=Object.keys(e);for(let r=0;r<s.length;r++){const i=t[s[r]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function aC(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function Lp(t,e){const n=t&&t.options||{},s=n.reverse,r=n.min===void 0?e:0,i=n.max===void 0?e:0;return{start:s?i:r,end:s?r:i}}function lC(t,e,n){if(n===!1)return!1;const s=Lp(t,n),r=Lp(e,n);return{top:r.end,right:s.end,bottom:r.start,left:s.start}}function cC(t){let e,n,s,r;return Je(t)?(e=t.top,n=t.right,s=t.bottom,r=t.left):e=n=s=r=t,{top:e,right:n,bottom:s,left:r,disabled:t===!1}}function Lv(t,e){const n=[],s=t._getSortedDatasetMetas(e);let r,i;for(r=0,i=s.length;r<i;++r)n.push(s[r].index);return n}function Bp(t,e,n,s={}){const r=t.keys,i=s.mode==="single";let o,a,l,c;if(e===null)return;let u=!1;for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===n){if(u=!0,s.all)continue;break}c=t.values[l],Kt(c)&&(i||e===0||Ei(e)===Ei(c))&&(e+=c)}return!u&&!s.all?0:e}function uC(t,e){const{iScale:n,vScale:s}=e,r=n.axis==="x"?"x":"y",i=s.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[r]:u,[i]:t[u]};return a}function mu(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function dC(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function fC(t){const{min:e,max:n,minDefined:s,maxDefined:r}=t.getUserBounds();return{min:s?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function hC(t,e,n){const s=t[e]||(t[e]={});return s[n]||(s[n]={})}function jp(t,e,n,s){for(const r of e.getMatchingVisibleMetas(s).reverse()){const i=t[r.index];if(n&&i>0||!n&&i<0)return r.index}return null}function Np(t,e){const{chart:n,_cachedMeta:s}=t,r=n._stacks||(n._stacks={}),{iScale:i,vScale:o,index:a}=s,l=i.axis,c=o.axis,u=dC(i,o,s),f=e.length;let p;for(let m=0;m<f;++m){const v=e[m],{[l]:_,[c]:k}=v,S=v._stacks||(v._stacks={});p=S[c]=hC(r,u,_),p[a]=k,p._top=jp(p,o,!0,s.type),p._bottom=jp(p,o,!1,s.type);const P=p._visualValues||(p._visualValues={});P[a]=k}}function yu(t,e){const n=t.scales;return Object.keys(n).filter(s=>n[s].axis===e).shift()}function pC(t,e){return Wr(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function gC(t,e,n){return Wr(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Zi(t,e){const n=t.controller.index,s=t.vScale&&t.vScale.axis;if(s){e=e||t._parsed;for(const r of e){const i=r._stacks;if(!i||i[s]===void 0||i[s][n]===void 0)return;delete i[s][n],i[s]._visualValues!==void 0&&i[s]._visualValues[n]!==void 0&&delete i[s]._visualValues[n]}}}const vu=t=>t==="reset"||t==="none",zp=(t,e)=>e?t:Object.assign({},t),mC=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:Lv(n,!0),values:null};class hf{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=mu(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Zi(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,s=this.getDataset(),r=(f,p,m,v)=>f==="x"?p:f==="r"?v:m,i=n.xAxisID=Qe(s.xAxisID,yu(e,"x")),o=n.yAxisID=Qe(s.yAxisID,yu(e,"y")),a=n.rAxisID=Qe(s.rAxisID,yu(e,"r")),l=n.indexAxis,c=n.iAxisID=r(l,i,o,a),u=n.vAxisID=r(l,o,i,a);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&xp(this._data,this),e._stacked&&Zi(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),s=this._data;if(Je(n)){const r=this._cachedMeta;this._data=uC(n,r)}else if(s!==n){if(s){xp(s,this);const r=this._cachedMeta;Zi(r),r._parsed=[]}n&&Object.isExtensible(n)&&Xk(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,s=this.getDataset();let r=!1;this._dataCheck();const i=n._stacked;n._stacked=mu(n.vScale,n),n.stack!==s.stack&&(r=!0,Zi(n),n.stack=s.stack),this._resyncElements(e),(r||i!==n._stacked)&&(Np(this,n._parsed),n._stacked=mu(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),s=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:s,_data:r}=this,{iScale:i,_stacked:o}=s,a=i.axis;let l=e===0&&n===r.length?!0:s._sorted,c=e>0&&s._parsed[e-1],u,f,p;if(this._parsing===!1)s._parsed=r,s._sorted=!0,p=r;else{kt(r[e])?p=this.parseArrayData(s,r,e,n):Je(r[e])?p=this.parseObjectData(s,r,e,n):p=this.parsePrimitiveData(s,r,e,n);const m=()=>f[a]===null||c&&f[a]<c[a];for(u=0;u<n;++u)s._parsed[u+e]=f=p[u],l&&(m()&&(l=!1),c=f);s._sorted=l}o&&Np(this,p)}parsePrimitiveData(e,n,s,r){const{iScale:i,vScale:o}=e,a=i.axis,l=o.axis,c=i.getLabels(),u=i===o,f=new Array(r);let p,m,v;for(p=0,m=r;p<m;++p)v=p+s,f[p]={[a]:u||i.parse(c[v],v),[l]:o.parse(n[v],v)};return f}parseArrayData(e,n,s,r){const{xScale:i,yScale:o}=e,a=new Array(r);let l,c,u,f;for(l=0,c=r;l<c;++l)u=l+s,f=n[u],a[l]={x:i.parse(f[0],u),y:o.parse(f[1],u)};return a}parseObjectData(e,n,s,r){const{xScale:i,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(r);let u,f,p,m;for(u=0,f=r;u<f;++u)p=u+s,m=n[p],c[u]={x:i.parse(Wo(m,a),p),y:o.parse(Wo(m,l),p)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,s){const r=this.chart,i=this._cachedMeta,o=n[e.axis],a={keys:Lv(r,!0),values:n._stacks[e.axis]._visualValues};return Bp(a,o,i.index,{mode:s})}updateRangeFromParsed(e,n,s,r){const i=s[n.axis];let o=i===null?NaN:i;const a=r&&s._stacks[n.axis];r&&a&&(r.values=a,o=Bp(r,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const s=this._cachedMeta,r=s._parsed,i=s._sorted&&e===s.iScale,o=r.length,a=this._getOtherScale(e),l=mC(n,s,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:f}=fC(a);let p,m;function v(){m=r[p];const _=m[a.axis];return!Kt(m[e.axis])||u>_||f<_}for(p=0;p<o&&!(!v()&&(this.updateRangeFromParsed(c,e,m,l),i));++p);if(i){for(p=o-1;p>=0;--p)if(!v()){this.updateRangeFromParsed(c,e,m,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,s=[];let r,i,o;for(r=0,i=n.length;r<i;++r)o=n[r][e.axis],Kt(o)&&s.push(o);return s}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,s=n.iScale,r=n.vScale,i=this.getParsed(e);return{label:s?""+s.getLabelForValue(i[s.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=cC(Qe(this.options.clip,lC(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,s=this._cachedMeta,r=s.data||[],i=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||r.length-a,c=this.options.drawActiveElementsOnTop;let u;for(s.dataset&&s.dataset.draw(e,i,a,l),u=a;u<a+l;++u){const f=r[u];f.hidden||(f.active&&c?o.push(f):f.draw(e,i))}for(u=0;u<o.length;++u)o[u].draw(e,i)}getStyle(e,n){const s=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(e||0,s)}getContext(e,n,s){const r=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];i=o.$context||(o.$context=gC(this.getContext(),e,o)),i.parsed=this.getParsed(e),i.raw=r.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=pC(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=s,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",s){const r=n==="active",i=this._cachedDataOpts,o=e+"-"+n,a=i[o],l=this.enableOptionSharing&&On(s);if(a)return zp(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),f=r?[`${e}Hover`,"hover",e,""]:[e,""],p=c.getOptionScopes(this.getDataset(),u),m=Object.keys(Ot.elements[e]),v=()=>this.getContext(s,r,n),_=c.resolveNamedOptions(p,m,v,f);return _.$shared&&(_.$shared=l,i[o]=Object.freeze(zp(_,l))),_}_resolveAnimations(e,n,s){const r=this.chart,i=this._cachedDataOpts,o=`animation-${n}`,a=i[o];if(a)return a;let l;if(r.options.animation!==!1){const u=this.chart.config,f=u.datasetAnimationScopeKeys(this._type,n),p=u.getOptionScopes(this.getDataset(),f);l=u.createResolver(p,this.getContext(e,s,n))}const c=new ff(r,l&&l.animations);return l&&l._cacheable&&(i[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||vu(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const s=this.resolveDataElementOptions(e,n),r=this._sharedOptions,i=this.getSharedOptions(s),o=this.includeOptions(n,i)||i!==r;return this.updateSharedOptions(i,n,s),{sharedOptions:i,includeOptions:o}}updateElement(e,n,s,r){vu(r)?Object.assign(e,s):this._resolveAnimations(n,r).update(e,s)}updateSharedOptions(e,n,s){e&&!vu(n)&&this._resolveAnimations(void 0,n).update(e,s)}_setStyle(e,n,s,r){e.active=r;const i=this.getStyle(n,r);this._resolveAnimations(n,s,r).update(e,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(e,n,s){this._setStyle(e,s,"active",!1)}setHoverStyle(e,n,s){this._setStyle(e,s,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,s=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const r=s.length,i=n.length,o=Math.min(i,r);o&&this.parse(0,o),i>r?this._insertElements(r,i-r,e):i<r&&this._removeElements(i,r-i)}_insertElements(e,n,s=!0){const r=this._cachedMeta,i=r.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(i),a=e;a<o;++a)i[a]=new this.dataElementType;this._parsing&&l(r._parsed),this.parse(e,n),s&&this.updateElements(i,e,n,"reset")}updateElements(e,n,s,r){}_removeElements(e,n){const s=this._cachedMeta;if(this._parsing){const r=s._parsed.splice(e,n);s._stacked&&Zi(s,r)}s.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,s,r]=e;this[n](s,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const s=arguments.length-2;s&&this._sync(["_insertElements",e,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function yC(t,e,n){let s=1,r=1,i=0,o=0;if(e<qt){const a=t,l=a+e,c=Math.cos(a),u=Math.sin(a),f=Math.cos(l),p=Math.sin(l),m=(E,C,I)=>Fl(E,a,l,!0)?1:Math.max(C,C*n,I,I*n),v=(E,C,I)=>Fl(E,a,l,!0)?-1:Math.min(C,C*n,I,I*n),_=m(0,c,f),k=m(Qt,u,p),S=v(ut,c,f),P=v(ut+Qt,u,p);s=(_-S)/2,r=(k-P)/2,i=-(_+S)/2,o=-(k+P)/2}return{ratioX:s,ratioY:r,offsetX:i,offsetY:o}}class vC extends hf{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:s,color:r}}=e.legend.options;return n.labels.map((i,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:i,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:r,lineWidth:l.borderWidth,pointStyle:s,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,s){s.chart.toggleDataVisibility(n.index),s.chart.update()}}}};constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const s=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=s;else{let i=l=>+s[l];if(Je(s[e])){const{key:l="value"}=this._parsing;i=c=>+Wo(s[c],l)}let o,a;for(o=e,a=e+n;o<a;++o)r._parsed[o]=i(o)}}_getRotation(){return Wt(this.options.rotation-90)}_getCircumference(){return Wt(this.options.circumference)}_getRotationExtents(){let e=qt,n=-qt;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const r=this.chart.getDatasetMeta(s).controller,i=r._getRotation(),o=r._getCircumference();e=Math.min(e,i),n=Math.max(n,i+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:s}=n,r=this._cachedMeta,i=r.data,o=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,a=Math.max((Math.min(s.width,s.height)-o)/2,0),l=Math.min($k(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:f}=this._getRotationExtents(),{ratioX:p,ratioY:m,offsetX:v,offsetY:_}=yC(f,u,l),k=(s.width-o)/p,S=(s.height-o)/m,P=Math.max(Math.min(k,S)/2,0),E=mv(this.options.radius,P),C=Math.max(E*l,0),I=(E-C)/this._getVisibleDatasetWeightTotal();this.offsetX=v*E,this.offsetY=_*E,r.total=this.calculateTotal(),this.outerRadius=E-I*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-I*c,0),this.updateElements(i,0,i.length,e)}_circumference(e,n){const s=this.options,r=this._cachedMeta,i=this._getCircumference();return n&&s.animation.animateRotate||!this.chart.getDataVisibility(e)||r._parsed[e]===null||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*i/qt)}updateElements(e,n,s,r){const i=r==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,u=(a.left+a.right)/2,f=(a.top+a.bottom)/2,p=i&&c.animateScale,m=p?0:this.innerRadius,v=p?0:this.outerRadius,{sharedOptions:_,includeOptions:k}=this._getSharedOptions(n,r);let S=this._getRotation(),P;for(P=0;P<n;++P)S+=this._circumference(P,i);for(P=n;P<n+s;++P){const E=this._circumference(P,i),C=e[P],I={x:u+this.offsetX,y:f+this.offsetY,startAngle:S,endAngle:S+E,circumference:E,outerRadius:v,innerRadius:m};k&&(I.options=_||this.resolveDataElementOptions(P,C.active?"active":r)),S+=E,this.updateElement(C,P,I,r)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let s=0,r;for(r=0;r<n.length;r++){const i=e._parsed[r];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(r)&&!n[r].hidden&&(s+=Math.abs(i))}return s}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?qt*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,s=this.chart,r=s.data.labels||[],i=of(n._parsed[e],s.options.locale);return{label:r[e]||"",value:i}}getMaxBorderWidth(e){let n=0;const s=this.chart;let r,i,o,a,l;if(!e){for(r=0,i=s.data.datasets.length;r<i;++r)if(s.isDatasetVisible(r)){o=s.getDatasetMeta(r),e=o.data,a=o.controller;break}}if(!e)return 0;for(r=0,i=e.length;r<i;++r)l=a.resolveDataElementOptions(r),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let s=0,r=e.length;s<r;++s){const i=this.resolveDataElementOptions(s);n=Math.max(n,i.offset||0,i.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let s=0;s<e;++s)this.chart.isDatasetVisible(s)&&(n+=this._getRingWeight(s));return n}_getRingWeight(e){return Math.max(Qe(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class bC extends hf{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:s,data:r=[],_dataset:i}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=eS(n,r,o);this._drawStart=a,this._drawCount=l,tS(n)&&(a=0,l=r.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!i._decimated,s.points=r;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(s,void 0,{animated:!o,options:c},e),this.updateElements(r,a,l,e)}updateElements(e,n,s,r){const i=r==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:f}=this._getSharedOptions(n,r),p=o.axis,m=a.axis,{spanGaps:v,segment:_}=this.options,k=Nr(v)?v:Number.POSITIVE_INFINITY,S=this.chart._animationsDisabled||i||r==="none",P=n+s,E=e.length;let C=n>0&&this.getParsed(n-1);for(let I=0;I<E;++I){const T=e[I],G=S?T:{};if(I<n||I>=P){G.skip=!0;continue}const V=this.getParsed(I),A=_t(V[m]),Z=G[p]=o.getPixelForValue(V[p],I),K=G[m]=i||A?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,V,l):V[m],I);G.skip=isNaN(Z)||isNaN(K)||A,G.stop=I>0&&Math.abs(V[p]-C[p])>k,_&&(G.parsed=V,G.raw=c.data[I]),f&&(G.options=u||this.resolveDataElementOptions(I,T.active?"active":r)),S||this.updateElement(T,I,G,r),C=V}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,s=n.options&&n.options.borderWidth||0,r=e.data||[];if(!r.length)return s;const i=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(s,i,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}function br(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class pf{static override(e){Object.assign(pf.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return br()}parse(){return br()}format(){return br()}add(){return br()}diff(){return br()}startOf(){return br()}endOf(){return br()}}var _C={_date:pf};function wC(t,e,n,s){const{controller:r,data:i,_sorted:o}=t,a=r._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&i.length){const c=a._reversePixels?Yk:Dr;if(s){if(r._sharedOptions){const u=i[0],f=typeof u.getRange=="function"&&u.getRange(e);if(f){const p=c(i,e,n-f),m=c(i,e,n+f);return{lo:p.lo,hi:m.hi}}}}else{const u=c(i,e,n);if(l){const{vScale:f}=r._cachedMeta,{_parsed:p}=t,m=p.slice(0,u.lo+1).reverse().findIndex(_=>!_t(_[f.axis]));u.lo-=Math.max(0,m);const v=p.slice(u.hi).findIndex(_=>!_t(_[f.axis]));u.hi+=Math.max(0,v)}return u}}return{lo:0,hi:i.length-1}}function uc(t,e,n,s,r){const i=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=i.length;a<l;++a){const{index:c,data:u}=i[a],{lo:f,hi:p}=wC(i[a],e,o,r);for(let m=f;m<=p;++m){const v=u[m];v.skip||s(v,c,m)}}}function xC(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(s,r){const i=e?Math.abs(s.x-r.x):0,o=n?Math.abs(s.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function bu(t,e,n,s,r){const i=[];return!r&&!t.isPointInArea(e)||uc(t,n,e,function(a,l,c){!r&&!Vo(a,t.chartArea,0)||a.inRange(e.x,e.y,s)&&i.push({element:a,datasetIndex:l,index:c})},!0),i}function kC(t,e,n,s){let r=[];function i(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],s),{angle:f}=cd(o,{x:e.x,y:e.y});Fl(f,c,u)&&r.push({element:o,datasetIndex:a,index:l})}return uc(t,n,e,i),r}function SC(t,e,n,s,r,i){let o=[];const a=xC(n);let l=Number.POSITIVE_INFINITY;function c(u,f,p){const m=u.inRange(e.x,e.y,r);if(s&&!m)return;const v=u.getCenterPoint(r);if(!(!!i||t.isPointInArea(v))&&!m)return;const k=a(e,v);k<l?(o=[{element:u,datasetIndex:f,index:p}],l=k):k===l&&o.push({element:u,datasetIndex:f,index:p})}return uc(t,n,e,c),o}function _u(t,e,n,s,r,i){return!i&&!t.isPointInArea(e)?[]:n==="r"&&!s?kC(t,e,n,r):SC(t,e,n,s,r,i)}function Up(t,e,n,s,r){const i=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return uc(t,n,e,(l,c,u)=>{l[o]&&l[o](e[n],r)&&(i.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,r))}),s&&!a?[]:i}var CC={modes:{index(t,e,n,s){const r=Or(e,t),i=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?bu(t,r,i,s,o):_u(t,r,i,!1,s,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,f=c.data[u];f&&!f.skip&&l.push({element:f,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,s){const r=Or(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?bu(t,r,i,s,o):_u(t,r,i,!1,s,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,s){const r=Or(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return bu(t,r,i,s,o)},nearest(t,e,n,s){const r=Or(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return _u(t,r,i,n.intersect,s,o)},x(t,e,n,s){const r=Or(e,t);return Up(t,r,"x",n.intersect,s)},y(t,e,n,s){const r=Or(e,t);return Up(t,r,"y",n.intersect,s)}}};const Bv=["left","top","right","bottom"];function eo(t,e){return t.filter(n=>n.pos===e)}function qp(t,e){return t.filter(n=>Bv.indexOf(n.pos)===-1&&n.box.axis===e)}function to(t,e){return t.sort((n,s)=>{const r=e?s:n,i=e?n:s;return r.weight===i.weight?r.index-i.index:r.weight-i.weight})}function PC(t){const e=[];let n,s,r,i,o,a;for(n=0,s=(t||[]).length;n<s;++n)r=t[n],{position:i,options:{stack:o,stackWeight:a=1}}=r,e.push({index:n,box:r,pos:i,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&i+o,stackWeight:a});return e}function AC(t){const e={};for(const n of t){const{stack:s,pos:r,stackWeight:i}=n;if(!s||!Bv.includes(r))continue;const o=e[s]||(e[s]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}function IC(t,e){const n=AC(t),{vBoxMaxWidth:s,hBoxMaxHeight:r}=e;let i,o,a;for(i=0,o=t.length;i<o;++i){a=t[i];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*s:l&&e.availableWidth,a.height=r):(a.width=s,a.height=u?u*r:l&&e.availableHeight)}return n}function EC(t){const e=PC(t),n=to(e.filter(c=>c.box.fullSize),!0),s=to(eo(e,"left"),!0),r=to(eo(e,"right")),i=to(eo(e,"top"),!0),o=to(eo(e,"bottom")),a=qp(e,"x"),l=qp(e,"y");return{fullSize:n,leftAndTop:s.concat(i),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:eo(e,"chartArea"),vertical:s.concat(r).concat(l),horizontal:i.concat(o).concat(a)}}function Wp(t,e,n,s){return Math.max(t[n],e[n])+Math.max(t[s],e[s])}function jv(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function OC(t,e,n,s){const{pos:r,box:i}=n,o=t.maxPadding;if(!Je(r)){n.size&&(t[r]-=n.size);const f=s[n.stack]||{size:0,count:1};f.size=Math.max(f.size,n.horizontal?i.height:i.width),n.size=f.size/f.count,t[r]+=n.size}i.getPadding&&jv(o,i.getPadding());const a=Math.max(0,e.outerWidth-Wp(o,t,"left","right")),l=Math.max(0,e.outerHeight-Wp(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function MC(t){const e=t.maxPadding;function n(s){const r=Math.max(e[s]-t[s],0);return t[s]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function TC(t,e){const n=e.maxPadding;function s(r){const i={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{i[o]=Math.max(e[o],n[o])}),i}return s(t?["left","right"]:["top","bottom"])}function po(t,e,n,s){const r=[];let i,o,a,l,c,u;for(i=0,o=t.length,c=0;i<o;++i){a=t[i],l=a.box,l.update(a.width||e.w,a.height||e.h,TC(a.horizontal,e));const{same:f,other:p}=OC(e,n,a,s);c|=f&&r.length,u=u||p,l.fullSize||r.push(a)}return c&&po(r,e,n,s)||u}function Ka(t,e,n,s,r){t.top=n,t.left=e,t.right=e+s,t.bottom=n+r,t.width=s,t.height=r}function Vp(t,e,n,s){const r=n.padding;let{x:i,y:o}=e;for(const a of t){const l=a.box,c=s[a.stack]||{placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const f=e.w*u,p=c.size||l.height;On(c.start)&&(o=c.start),l.fullSize?Ka(l,r.left,o,n.outerWidth-r.right-r.left,p):Ka(l,e.left+c.placed,o,f,p),c.start=o,c.placed+=f,o=l.bottom}else{const f=e.h*u,p=c.size||l.width;On(c.start)&&(i=c.start),l.fullSize?Ka(l,i,r.top,p,n.outerHeight-r.bottom-r.top):Ka(l,i,e.top+c.placed,p,f),c.start=i,c.placed+=f,i=l.right}}e.x=i,e.y=o}var Nn={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,s){if(!t)return;const r=ln(t.options.layout.padding),i=Math.max(e-r.width,0),o=Math.max(n-r.height,0),a=EC(t.boxes),l=a.vertical,c=a.horizontal;ht(t.boxes,_=>{typeof _.beforeLayout=="function"&&_.beforeLayout()});const u=l.reduce((_,k)=>k.box.options&&k.box.options.display===!1?_:_+1,0)||1,f=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/u,hBoxMaxHeight:o/2}),p=Object.assign({},r);jv(p,ln(s));const m=Object.assign({maxPadding:p,w:i,h:o,x:r.left,y:r.top},r),v=IC(l.concat(c),f);po(a.fullSize,m,f,v),po(l,m,f,v),po(c,m,f,v)&&po(l,m,f,v),MC(m),Vp(a.leftAndTop,m,f,v),m.x+=m.w,m.y+=m.h,Vp(a.rightAndBottom,m,f,v),t.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},ht(a.chartArea,_=>{const k=_.box;Object.assign(k,t.chartArea),k.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class Nv{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,s){}removeEventListener(e,n,s){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,s,r){return n=Math.max(0,n||e.width),s=s||e.height,{width:n,height:Math.max(0,r?Math.floor(n/r):s)}}isAttached(e){return!0}updateConfig(e){}}class DC extends Nv{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const hl="$chartjs",RC={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Hp=t=>t===null||t==="";function $C(t,e){const n=t.style,s=t.getAttribute("height"),r=t.getAttribute("width");if(t[hl]={initial:{height:s,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Hp(r)){const i=Tp(t,"width");i!==void 0&&(t.width=i)}if(Hp(s))if(t.style.height==="")t.height=t.width/(e||2);else{const i=Tp(t,"height");i!==void 0&&(t.height=i)}return t}const zv=VS?{passive:!0}:!1;function FC(t,e,n){t&&t.addEventListener(e,n,zv)}function LC(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,zv)}function BC(t,e){const n=RC[t.type]||t.type,{x:s,y:r}=Or(t,e);return{type:n,chart:e,native:t,x:s!==void 0?s:null,y:r!==void 0?r:null}}function jl(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function jC(t,e,n){const s=t.canvas,r=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||jl(a.addedNodes,s),o=o&&!jl(a.removedNodes,s);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function NC(t,e,n){const s=t.canvas,r=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||jl(a.removedNodes,s),o=o&&!jl(a.addedNodes,s);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const Ko=new Map;let Kp=0;function Uv(){const t=window.devicePixelRatio;t!==Kp&&(Kp=t,Ko.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function zC(t,e){Ko.size||window.addEventListener("resize",Uv),Ko.set(t,e)}function UC(t){Ko.delete(t),Ko.size||window.removeEventListener("resize",Uv)}function qC(t,e,n){const s=t.canvas,r=s&&df(s);if(!r)return;const i=xv((a,l)=>{const c=r.clientWidth;n(a,l),c<r.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||i(c,u)});return o.observe(r),zC(t,i),o}function wu(t,e,n){n&&n.disconnect(),e==="resize"&&UC(t)}function WC(t,e,n){const s=t.canvas,r=xv(i=>{t.ctx!==null&&n(BC(i,t))},t);return FC(s,e,r),r}class VC extends Nv{acquireContext(e,n){const s=e&&e.getContext&&e.getContext("2d");return s&&s.canvas===e?($C(e,n),s):null}releaseContext(e){const n=e.canvas;if(!n[hl])return!1;const s=n[hl].initial;["height","width"].forEach(i=>{const o=s[i];_t(o)?n.removeAttribute(i):n.setAttribute(i,o)});const r=s.style||{};return Object.keys(r).forEach(i=>{n.style[i]=r[i]}),n.width=n.width,delete n[hl],!0}addEventListener(e,n,s){this.removeEventListener(e,n);const r=e.$proxies||(e.$proxies={}),o={attach:jC,detach:NC,resize:qC}[n]||WC;r[n]=o(e,n,s)}removeEventListener(e,n){const s=e.$proxies||(e.$proxies={}),r=s[n];if(!r)return;({attach:wu,detach:wu,resize:wu}[n]||LC)(e,n,r),s[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,s,r){return WS(e,n,s,r)}isAttached(e){const n=e&&df(e);return!!(n&&n.isConnected)}}function HC(t){return!uf()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?DC:VC}let _n=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:n,y:s}=this.getProps(["x","y"],e);return{x:n,y:s}}hasValue(){return Nr(this.x)&&Nr(this.y)}getProps(e,n){const s=this.$animations;if(!n||!s)return this;const r={};return e.forEach(i=>{r[i]=s[i]&&s[i].active()?s[i]._to:this[i]}),r}};function KC(t,e){const n=t.options.ticks,s=YC(t),r=Math.min(n.maxTicksLimit||s,s),i=n.major.enabled?XC(e):[],o=i.length,a=i[0],l=i[o-1],c=[];if(o>r)return QC(e,c,i,o/r),c;const u=GC(i,e,r);if(o>0){let f,p;const m=o>1?Math.round((l-a)/(o-1)):null;for(Ya(e,c,u,_t(m)?0:a-m,a),f=0,p=o-1;f<p;f++)Ya(e,c,u,i[f],i[f+1]);return Ya(e,c,u,l,_t(m)?e.length:l+m),c}return Ya(e,c,u),c}function YC(t){const e=t.options.offset,n=t._tickSize(),s=t._length/n+(e?0:1),r=t._maxLength/n;return Math.floor(Math.min(s,r))}function GC(t,e,n){const s=JC(t),r=e.length/n;if(!s)return Math.max(r,1);const i=Uk(s);for(let o=0,a=i.length-1;o<a;o++){const l=i[o];if(l>r)return l}return Math.max(r,1)}function XC(t){const e=[];let n,s;for(n=0,s=t.length;n<s;n++)t[n].major&&e.push(n);return e}function QC(t,e,n,s){let r=0,i=n[0],o;for(s=Math.ceil(s),o=0;o<t.length;o++)o===i&&(e.push(t[o]),r++,i=n[r*s])}function Ya(t,e,n,s,r){const i=Qe(s,0),o=Math.min(Qe(r,t.length),t.length);let a=0,l,c,u;for(n=Math.ceil(n),r&&(l=r-s,n=l/Math.floor(l/n)),u=i;u<0;)a++,u=Math.round(i+a*n);for(c=Math.max(i,0);c<o;c++)c===u&&(e.push(t[c]),a++,u=Math.round(i+a*n))}function JC(t){const e=t.length;let n,s;if(e<2)return!1;for(s=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==s)return!1;return s}const ZC=t=>t==="left"?"right":t==="right"?"left":t,Yp=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,Gp=(t,e)=>Math.min(e||t,t);function Xp(t,e){const n=[],s=t.length/e,r=t.length;let i=0;for(;i<r;i+=s)n.push(t[Math.floor(i)]);return n}function eP(t,e,n){const s=t.ticks.length,r=Math.min(e,s-1),i=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(r),c;if(!(n&&(s===1?c=Math.max(l-i,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(r-1))/2,l+=r<e?c:-c,l<i-a||l>o+a)))return l}function tP(t,e){ht(t,n=>{const s=n.gc,r=s.length/2;let i;if(r>e){for(i=0;i<r;++i)delete n.data[s[i]];s.splice(0,r)}})}function no(t){return t.drawTicks?t.tickLength:0}function Qp(t,e){if(!t.display)return 0;const n=Lt(t.font,e),s=ln(t.padding);return(kt(t.text)?t.text.length:1)*n.lineHeight+s.height}function nP(t,e){return Wr(t,{scale:e,type:"scale"})}function sP(t,e,n){return Wr(t,{tick:n,index:e,type:"tick"})}function rP(t,e,n){let s=sf(t);return(n&&e!=="right"||!n&&e==="right")&&(s=ZC(s)),s}function iP(t,e,n,s){const{top:r,left:i,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let f=0,p,m,v;const _=o-r,k=a-i;if(t.isHorizontal()){if(m=nn(s,i,a),Je(n)){const S=Object.keys(n)[0],P=n[S];v=u[S].getPixelForValue(P)+_-e}else n==="center"?v=(c.bottom+c.top)/2+_-e:v=Yp(t,n,e);p=a-i}else{if(Je(n)){const S=Object.keys(n)[0],P=n[S];m=u[S].getPixelForValue(P)-k+e}else n==="center"?m=(c.left+c.right)/2-k+e:m=Yp(t,n,e);v=nn(s,o,r),f=n==="left"?-Qt:Qt}return{titleX:m,titleY:v,maxWidth:p,rotation:f}}class Fi extends _n{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:s,_suggestedMax:r}=this;return e=Zn(e,Number.POSITIVE_INFINITY),n=Zn(n,Number.NEGATIVE_INFINITY),s=Zn(s,Number.POSITIVE_INFINITY),r=Zn(r,Number.NEGATIVE_INFINITY),{min:Zn(e,s),max:Zn(n,r),minDefined:Kt(e),maxDefined:Kt(n)}}getMinMax(e){let{min:n,max:s,minDefined:r,maxDefined:i}=this.getUserBounds(),o;if(r&&i)return{min:n,max:s};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),r||(n=Math.min(n,o.min)),i||(s=Math.max(s,o.max));return n=i&&n>s?s:n,s=r&&n>s?n:s,{min:Zn(n,Zn(s,n)),max:Zn(s,Zn(n,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){pt(this.options.beforeUpdate,[this])}update(e,n,s){const{beginAtZero:r,grace:i,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=xS(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Xp(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=KC(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,s;this.isHorizontal()?(n=this.left,s=this.right):(n=this.top,s=this.bottom,e=!e),this._startPixel=n,this._endPixel=s,this._reversePixels=e,this._length=s-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){pt(this.options.afterUpdate,[this])}beforeSetDimensions(){pt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){pt(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),pt(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){pt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let s,r,i;for(s=0,r=e.length;s<r;s++)i=e[s],i.label=pt(n.callback,[i.value,s,e],this)}afterTickToLabelConversion(){pt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){pt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,s=Gp(this.ticks.length,e.ticks.maxTicksLimit),r=n.minRotation||0,i=n.maxRotation;let o=r,a,l,c;if(!this._isVisible()||!n.display||r>=i||s<=1||!this.isHorizontal()){this.labelRotation=r;return}const u=this._getLabelSizes(),f=u.widest.width,p=u.highest.height,m=jn(this.chart.width-f,0,this.maxWidth);a=e.offset?this.maxWidth/s:m/(s-1),f+6>a&&(a=m/(s-(e.offset?.5:1)),l=this.maxHeight-no(e.grid)-n.padding-Qp(e.title,this.chart.options.font),c=Math.sqrt(f*f+p*p),o=bv(Math.min(Math.asin(jn((u.highest.height+6)/a,-1,1)),Math.asin(jn(l/c,-1,1))-Math.asin(jn(p/c,-1,1)))),o=Math.max(r,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){pt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){pt(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:s,title:r,grid:i}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=Qp(r,n.options.font);if(a?(e.width=this.maxWidth,e.height=no(i)+l):(e.height=this.maxHeight,e.width=no(i)+l),s.display&&this.ticks.length){const{first:c,last:u,widest:f,highest:p}=this._getLabelSizes(),m=s.padding*2,v=Wt(this.labelRotation),_=Math.cos(v),k=Math.sin(v);if(a){const S=s.mirror?0:k*f.width+_*p.height;e.height=Math.min(this.maxHeight,e.height+S+m)}else{const S=s.mirror?0:_*f.width+k*p.height;e.width=Math.min(this.maxWidth,e.width+S+m)}this._calculatePadding(c,u,k,_)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,s,r){const{ticks:{align:i,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let p=0,m=0;l?c?(p=r*e.width,m=s*n.height):(p=s*e.height,m=r*n.width):i==="start"?m=n.width:i==="end"?p=e.width:i!=="inner"&&(p=e.width/2,m=n.width/2),this.paddingLeft=Math.max((p-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((m-f+o)*this.width/(this.width-f),0)}else{let u=n.height/2,f=e.height/2;i==="start"?(u=0,f=e.height):i==="end"&&(u=n.height,f=0),this.paddingTop=u+o,this.paddingBottom=f+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){pt(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,s;for(n=0,s=e.length;n<s;n++)_t(e[n].label)&&(e.splice(n,1),s--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let s=this.ticks;n<s.length&&(s=Xp(s,n)),this._labelSizes=e=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,s){const{ctx:r,_longestTextCache:i}=this,o=[],a=[],l=Math.floor(n/Gp(n,s));let c=0,u=0,f,p,m,v,_,k,S,P,E,C,I;for(f=0;f<n;f+=l){if(v=e[f].label,_=this._resolveTickFontOptions(f),r.font=k=_.string,S=i[k]=i[k]||{data:{},gc:[]},P=_.lineHeight,E=C=0,!_t(v)&&!kt(v))E=Ap(r,S.data,S.gc,E,v),C=P;else if(kt(v))for(p=0,m=v.length;p<m;++p)I=v[p],!_t(I)&&!kt(I)&&(E=Ap(r,S.data,S.gc,E,I),C+=P);o.push(E),a.push(C),c=Math.max(E,c),u=Math.max(C,u)}tP(i,n);const T=o.indexOf(c),G=a.indexOf(u),V=A=>({width:o[A]||0,height:a[A]||0});return{first:V(0),last:V(n-1),widest:V(T),highest:V(G),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return Kk(this._alignToPixels?vr(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const s=n[e];return s.$context||(s.$context=sP(this.getContext(),e,s))}return this.$context||(this.$context=nP(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Wt(this.labelRotation),s=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,a=i?i.widest.width+o:0,l=i?i.highest.height+o:0;return this.isHorizontal()?l*s>a*r?a/s:l/r:l*r<a*s?l/s:a/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,s=this.chart,r=this.options,{grid:i,position:o,border:a}=r,l=i.offset,c=this.isHorizontal(),f=this.ticks.length+(l?1:0),p=no(i),m=[],v=a.setContext(this.getContext()),_=v.display?v.width:0,k=_/2,S=function(Se){return vr(s,Se,_)};let P,E,C,I,T,G,V,A,Z,K,j,de;if(o==="top")P=S(this.bottom),G=this.bottom-p,A=P-k,K=S(e.top)+k,de=e.bottom;else if(o==="bottom")P=S(this.top),K=e.top,de=S(e.bottom)-k,G=P+k,A=this.top+p;else if(o==="left")P=S(this.right),T=this.right-p,V=P-k,Z=S(e.left)+k,j=e.right;else if(o==="right")P=S(this.left),Z=e.left,j=S(e.right)-k,T=P+k,V=this.left+p;else if(n==="x"){if(o==="center")P=S((e.top+e.bottom)/2+.5);else if(Je(o)){const Se=Object.keys(o)[0],Pe=o[Se];P=S(this.chart.scales[Se].getPixelForValue(Pe))}K=e.top,de=e.bottom,G=P+k,A=G+p}else if(n==="y"){if(o==="center")P=S((e.left+e.right)/2);else if(Je(o)){const Se=Object.keys(o)[0],Pe=o[Se];P=S(this.chart.scales[Se].getPixelForValue(Pe))}T=P-k,V=T-p,Z=e.left,j=e.right}const ge=Qe(r.ticks.maxTicksLimit,f),Ae=Math.max(1,Math.ceil(f/ge));for(E=0;E<f;E+=Ae){const Se=this.getContext(E),Pe=i.setContext(Se),te=a.setContext(Se),ee=Pe.lineWidth,Y=Pe.color,Le=te.dash||[],_e=te.dashOffset,We=Pe.tickWidth,wt=Pe.tickColor,gt=Pe.tickBorderDash||[],rt=Pe.tickBorderDashOffset;C=eP(this,E,l),C!==void 0&&(I=vr(s,C,ee),c?T=V=Z=j=I:G=A=K=de=I,m.push({tx1:T,ty1:G,tx2:V,ty2:A,x1:Z,y1:K,x2:j,y2:de,width:ee,color:Y,borderDash:Le,borderDashOffset:_e,tickWidth:We,tickColor:wt,tickBorderDash:gt,tickBorderDashOffset:rt}))}return this._ticksLength=f,this._borderValue=P,m}_computeLabelItems(e){const n=this.axis,s=this.options,{position:r,ticks:i}=s,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:f}=i,p=no(s.grid),m=p+u,v=f?-u:m,_=-Wt(this.labelRotation),k=[];let S,P,E,C,I,T,G,V,A,Z,K,j,de="middle";if(r==="top")T=this.bottom-v,G=this._getXAxisLabelAlignment();else if(r==="bottom")T=this.top+v,G=this._getXAxisLabelAlignment();else if(r==="left"){const Ae=this._getYAxisLabelAlignment(p);G=Ae.textAlign,I=Ae.x}else if(r==="right"){const Ae=this._getYAxisLabelAlignment(p);G=Ae.textAlign,I=Ae.x}else if(n==="x"){if(r==="center")T=(e.top+e.bottom)/2+m;else if(Je(r)){const Ae=Object.keys(r)[0],Se=r[Ae];T=this.chart.scales[Ae].getPixelForValue(Se)+m}G=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")I=(e.left+e.right)/2-m;else if(Je(r)){const Ae=Object.keys(r)[0],Se=r[Ae];I=this.chart.scales[Ae].getPixelForValue(Se)}G=this._getYAxisLabelAlignment(p).textAlign}n==="y"&&(l==="start"?de="top":l==="end"&&(de="bottom"));const ge=this._getLabelSizes();for(S=0,P=a.length;S<P;++S){E=a[S],C=E.label;const Ae=i.setContext(this.getContext(S));V=this.getPixelForTick(S)+i.labelOffset,A=this._resolveTickFontOptions(S),Z=A.lineHeight,K=kt(C)?C.length:1;const Se=K/2,Pe=Ae.color,te=Ae.textStrokeColor,ee=Ae.textStrokeWidth;let Y=G;o?(I=V,G==="inner"&&(S===P-1?Y=this.options.reverse?"left":"right":S===0?Y=this.options.reverse?"right":"left":Y="center"),r==="top"?c==="near"||_!==0?j=-K*Z+Z/2:c==="center"?j=-ge.highest.height/2-Se*Z+Z:j=-ge.highest.height+Z/2:c==="near"||_!==0?j=Z/2:c==="center"?j=ge.highest.height/2-Se*Z:j=ge.highest.height-K*Z,f&&(j*=-1),_!==0&&!Ae.showLabelBackdrop&&(I+=Z/2*Math.sin(_))):(T=V,j=(1-K)*Z/2);let Le;if(Ae.showLabelBackdrop){const _e=ln(Ae.backdropPadding),We=ge.heights[S],wt=ge.widths[S];let gt=j-_e.top,rt=0-_e.left;switch(de){case"middle":gt-=We/2;break;case"bottom":gt-=We;break}switch(G){case"center":rt-=wt/2;break;case"right":rt-=wt;break;case"inner":S===P-1?rt-=wt:S>0&&(rt-=wt/2);break}Le={left:rt,top:gt,width:wt+_e.width,height:We+_e.height,color:Ae.backdropColor}}k.push({label:C,font:A,textOffset:j,options:{rotation:_,color:Pe,strokeColor:te,strokeWidth:ee,textAlign:Y,textBaseline:de,translation:[I,T],backdrop:Le}})}return k}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Wt(this.labelRotation))return e==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:s,mirror:r,padding:i}}=this.options,o=this._getLabelSizes(),a=e+i,l=o.widest.width;let c,u;return n==="left"?r?(u=this.right+i,s==="near"?c="left":s==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,s==="near"?c="right":s==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?r?(u=this.left+i,s==="near"?c="right":s==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,s==="near"?c="left":s==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:s,top:r,width:i,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(s,r,i,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(i=>i.value===e);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const n=this.options.grid,s=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const a=(l,c,u)=>{!u.width||!u.color||(s.save(),s.lineWidth=u.width,s.strokeStyle=u.color,s.setLineDash(u.borderDash||[]),s.lineDashOffset=u.borderDashOffset,s.beginPath(),s.moveTo(l.x,l.y),s.lineTo(c.x,c.y),s.stroke(),s.restore())};if(n.display)for(i=0,o=r.length;i<o;++i){const l=r[i];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:s,grid:r}}=this,i=s.setContext(this.getContext()),o=s.display?i.width:0;if(!o)return;const a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,f,p;this.isHorizontal()?(c=vr(e,this.left,o)-o/2,u=vr(e,this.right,a)+a/2,f=p=l):(f=vr(e,this.top,o)-o/2,p=vr(e,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(c,f),n.lineTo(u,p),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const s=this.ctx,r=this._computeLabelArea();r&&ea(s,r);const i=this.getLabelItems(e);for(const o of i){const a=o.options,l=o.font,c=o.label,u=o.textOffset;Ho(s,c,0,u,l,a)}r&&ta(s)}drawTitle(){const{ctx:e,options:{position:n,title:s,reverse:r}}=this;if(!s.display)return;const i=Lt(s.font),o=ln(s.padding),a=s.align;let l=i.lineHeight/2;n==="bottom"||n==="center"||Je(n)?(l+=o.bottom,kt(s.text)&&(l+=i.lineHeight*(s.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:f,rotation:p}=iP(this,l,n,a);Ho(e,s.text,0,0,i,{color:s.color,maxWidth:f,rotation:p,textAlign:rP(a,n,r),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,s=Qe(e.grid&&e.grid.z,-1),r=Qe(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Fi.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:s,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",r=[];let i,o;for(i=0,o=n.length;i<o;++i){const a=n[i];a[s]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Lt(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Ga{constructor(e,n,s){this.type=e,this.scope=n,this.override=s,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let s;lP(n)&&(s=this.register(n));const r=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in r||(r[i]=e,oP(e,o,s),this.override&&Ot.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,s=e.id,r=this.scope;s in n&&delete n[s],r&&s in Ot[r]&&(delete Ot[r][s],this.override&&delete zr[s])}}function oP(t,e,n){const s=qo(Object.create(null),[n?Ot.get(n):{},Ot.get(e),t.defaults]);Ot.set(e,s),t.defaultRoutes&&aP(e,t.defaultRoutes),t.descriptors&&Ot.describe(e,t.descriptors)}function aP(t,e){Object.keys(e).forEach(n=>{const s=n.split("."),r=s.pop(),i=[t].concat(s).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");Ot.route(i,r,l,a)})}function lP(t){return"id"in t&&"defaults"in t}class cP{constructor(){this.controllers=new Ga(hf,"datasets",!0),this.elements=new Ga(_n,"elements"),this.plugins=new Ga(Object,"plugins"),this.scales=new Ga(Fi,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,s){[...n].forEach(r=>{const i=s||this._getRegistryForType(r);s||i.isForType(r)||i===this.plugins&&r.id?this._exec(e,i,r):ht(r,o=>{const a=s||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,s){const r=ef(e);pt(s["before"+r],[],s),n[e](s),pt(s["after"+r],[],s)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const s=this._typedRegistries[n];if(s.isForType(e))return s}return this.plugins}_get(e,n,s){const r=n.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+s+".");return r}}var ss=new cP;class uP{constructor(){this._init=[]}notify(e,n,s,r){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(i,e,n,s);return n==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,s,r){r=r||{};for(const i of e){const o=i.plugin,a=o[s],l=[n,r,i.options];if(pt(a,l,o)===!1&&r.cancelable)return!1}return!0}invalidate(){_t(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const s=e&&e.config,r=Qe(s.options&&s.options.plugins,{}),i=dP(s);return r===!1&&!n?[]:hP(e,i,r,n)}_notifyStateChanges(e){const n=this._oldCache||[],s=this._cache,r=(i,o)=>i.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(r(n,s),e,"stop"),this._notify(r(s,n),e,"start")}}function dP(t){const e={},n=[],s=Object.keys(ss.plugins.items);for(let i=0;i<s.length;i++)n.push(ss.getPlugin(s[i]));const r=t.plugins||[];for(let i=0;i<r.length;i++){const o=r[i];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function fP(t,e){return!e&&t===!1?null:t===!0?{}:t}function hP(t,{plugins:e,localIds:n},s,r){const i=[],o=t.getContext();for(const a of e){const l=a.id,c=fP(s[l],r);c!==null&&i.push({plugin:a,options:pP(t.config,{plugin:a,local:n[l]},c,o)})}return i}function pP(t,{plugin:e,local:n},s,r){const i=t.pluginScopeKeys(e),o=t.getOptionScopes(s,i);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function fd(t,e){const n=Ot.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function gP(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function mP(t,e){return t===e?"_index_":"_value_"}function Jp(t){if(t==="x"||t==="y"||t==="r")return t}function yP(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function hd(t,...e){if(Jp(t))return t;for(const n of e){const s=n.axis||yP(n.position)||t.length>1&&Jp(t[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function Zp(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function vP(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(s=>s.xAxisID===t||s.yAxisID===t);if(n.length)return Zp(t,"x",n[0])||Zp(t,"y",n[0])}return{}}function bP(t,e){const n=zr[t.type]||{scales:{}},s=e.scales||{},r=fd(t.type,e),i=Object.create(null);return Object.keys(s).forEach(o=>{const a=s[o];if(!Je(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=hd(o,a,vP(o,t),Ot.scales[a.type]),c=mP(l,r),u=n.scales||{};i[o]=Io(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||fd(a,e),u=(zr[a]||{}).scales||{};Object.keys(u).forEach(f=>{const p=gP(f,l),m=o[p+"AxisID"]||p;i[m]=i[m]||Object.create(null),Io(i[m],[{axis:p},s[m],u[f]])})}),Object.keys(i).forEach(o=>{const a=i[o];Io(a,[Ot.scales[a.type],Ot.scale])}),i}function qv(t){const e=t.options||(t.options={});e.plugins=Qe(e.plugins,{}),e.scales=bP(t,e)}function Wv(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function _P(t){return t=t||{},t.data=Wv(t.data),qv(t),t}const eg=new Map,Vv=new Set;function Xa(t,e){let n=eg.get(t);return n||(n=e(),eg.set(t,n),Vv.add(n)),n}const so=(t,e,n)=>{const s=Wo(e,n);s!==void 0&&t.add(s)};class wP{constructor(e){this._config=_P(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Wv(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),qv(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Xa(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Xa(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Xa(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,s=this.type;return Xa(`${s}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const s=this._scopeCache;let r=s.get(e);return(!r||n)&&(r=new Map,s.set(e,r)),r}getOptionScopes(e,n,s){const{options:r,type:i}=this,o=this._cachedScopes(e,s),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(f=>so(l,e,f))),u.forEach(f=>so(l,r,f)),u.forEach(f=>so(l,zr[i]||{},f)),u.forEach(f=>so(l,Ot,f)),u.forEach(f=>so(l,ud,f))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),Vv.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,zr[n]||{},Ot.datasets[n]||{},{type:n},Ot,ud]}resolveNamedOptions(e,n,s,r=[""]){const i={$shared:!0},{resolver:o,subPrefixes:a}=tg(this._resolverCache,e,r);let l=o;if(kP(o,n)){i.$shared=!1,s=vn(s)?s():s;const c=this.createResolver(e,s,a);l=Mi(o,s,c)}for(const c of n)i[c]=l[c];return i}createResolver(e,n,s=[""],r){const{resolver:i}=tg(this._resolverCache,e,s);return Je(n)?Mi(i,n,void 0,r):i}}function tg(t,e,n){let s=t.get(e);s||(s=new Map,t.set(e,s));const r=n.join();let i=s.get(r);return i||(i={resolver:af(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},s.set(r,i)),i}const xP=t=>Je(t)&&Object.getOwnPropertyNames(t).some(e=>vn(t[e]));function kP(t,e){const{isScriptable:n,isIndexable:s}=Pv(t);for(const r of e){const i=n(r),o=s(r),a=(o||i)&&t[r];if(i&&(vn(a)||xP(a))||o&&kt(a))return!0}return!1}var SP="4.5.0";const CP=["top","bottom","left","right","chartArea"];function ng(t,e){return t==="top"||t==="bottom"||CP.indexOf(t)===-1&&e==="x"}function sg(t,e){return function(n,s){return n[t]===s[t]?n[e]-s[e]:n[t]-s[t]}}function rg(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),pt(n&&n.onComplete,[t],e)}function PP(t){const e=t.chart,n=e.options.animation;pt(n&&n.onProgress,[t],e)}function Hv(t){return uf()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const pl={},ig=t=>{const e=Hv(t);return Object.values(pl).filter(n=>n.canvas===e).pop()};function AP(t,e,n){const s=Object.keys(t);for(const r of s){const i=+r;if(i>=e){const o=t[r];delete t[r],(n>0||i>e)&&(t[i+n]=o)}}}function IP(t,e,n,s){return!n||t.type==="mouseout"?null:s?e:t}let er=class{static defaults=Ot;static instances=pl;static overrides=zr;static registry=ss;static version=SP;static getChart=ig;static register(...e){ss.add(...e),og()}static unregister(...e){ss.remove(...e),og()}constructor(e,n){const s=this.config=new wP(n),r=Hv(e),i=ig(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||HC(r)),this.platform.updateConfig(s);const a=this.platform.acquireContext(r,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=Rk(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new uP,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Jk(f=>this.update(f),o.resizeDelay||0),this._dataChanges=[],pl[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}ws.listen(this,"complete",rg),ws.listen(this,"progress",PP),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:s,height:r,_aspectRatio:i}=this;return _t(e)?n&&i?i:r?s/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return ss}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Mp(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Ip(this.canvas,this.ctx),this}stop(){return ws.stop(this),this}resize(e,n){ws.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const s=this.options,r=this.canvas,i=s.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,n,i),a=s.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Mp(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),pt(s.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};ht(n,(s,r)=>{s.id=r})}buildOrUpdateScales(){const e=this.options,n=e.scales,s=this.scales,r=Object.keys(s).reduce((o,a)=>(o[a]=!1,o),{});let i=[];n&&(i=i.concat(Object.keys(n).map(o=>{const a=n[o],l=hd(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),ht(i,o=>{const a=o.options,l=a.id,c=hd(l,a),u=Qe(a.type,o.dtype);(a.position===void 0||ng(a.position,c)!==ng(o.dposition))&&(a.position=o.dposition),r[l]=!0;let f=null;if(l in s&&s[l].type===u)f=s[l];else{const p=ss.getScale(u);f=new p({id:l,type:u,ctx:this.ctx,chart:this}),s[f.id]=f}f.init(a,e)}),ht(r,(o,a)=>{o||delete s[a]}),ht(s,o=>{Nn.configure(this,o,o.options),Nn.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,s=e.length;if(e.sort((r,i)=>r.index-i.index),s>n){for(let r=n;r<s;++r)this._destroyDatasetMeta(r);e.splice(n,s-n)}this._sortedMetasets=e.slice(0).sort(sg("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((s,r)=>{n.filter(i=>i===s._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let s,r;for(this._removeUnreferencedMetasets(),s=0,r=n.length;s<r;s++){const i=n[s];let o=this.getDatasetMeta(s);const a=i.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(s),o=this.getDatasetMeta(s)),o.type=a,o.indexAxis=i.indexAxis||fd(a,this.options),o.order=i.order||0,o.index=s,o.label=""+i.label,o.visible=this.isDatasetVisible(s),o.controller)o.controller.updateIndex(s),o.controller.linkScales();else{const l=ss.getController(a),{datasetElementType:c,dataElementType:u}=Ot.datasets[a];Object.assign(l,{dataElementType:ss.getElement(u),datasetElementType:c&&ss.getElement(c)}),o.controller=new l(this,s),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){ht(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const s=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:f}=this.getDatasetMeta(c),p=!r&&i.indexOf(f)===-1;f.buildOrUpdateElements(p),o=Math.max(+f.getMaxOverflow(),o)}o=this._minPadding=s.layout.autoPadding?o:0,this._updateLayout(o),r||ht(i,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(sg("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){ht(this.scales,e=>{Nn.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),s=new Set(e.events);(!bp(n,s)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:s,start:r,count:i}of n){const o=s==="_removeElements"?-i:i;AP(e,r,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,s=i=>new Set(e.filter(o=>o[0]===i).map((o,a)=>a+","+o.splice(1).join(","))),r=s(0);for(let i=1;i<n;i++)if(!bp(r,s(i)))return;return Array.from(r).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Nn.update(this,this.width,this.height,e);const n=this.chartArea,s=n.width<=0||n.height<=0;this._layers=[],ht(this.boxes,r=>{s&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,i)=>{r._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,s=this.data.datasets.length;n<s;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,s=this.data.datasets.length;n<s;++n)this._updateDataset(n,vn(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const s=this.getDatasetMeta(e),r={meta:s,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(s.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ws.has(this)?this.attached&&!ws.running(this)&&ws.start(this):(this.draw(),rg({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:s,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,s=[];let r,i;for(r=0,i=n.length;r<i;++r){const o=n[r];(!e||o.visible)&&s.push(o)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,s={meta:e,index:e.index,cancelable:!0},r=Fv(this,e);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(r&&ea(n,r),e.controller.draw(),r&&ta(n),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(e){return Vo(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,s,r){const i=CC.modes[n];return typeof i=="function"?i(this,e,s,r):[]}getDatasetMeta(e){const n=this.data.datasets[e],s=this._metasets;let r=s.filter(i=>i&&i._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},s.push(r)),r}getContext(){return this.$context||(this.$context=Wr(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const s=this.getDatasetMeta(e);return typeof s.hidden=="boolean"?!s.hidden:!n.hidden}setDatasetVisibility(e,n){const s=this.getDatasetMeta(e);s.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,s){const r=s?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,r);On(n)?(i.data[n].hidden=!s,this.update()):(this.setDatasetVisibility(e,s),o.update(i,{visible:s}),this.update(a=>a.datasetIndex===e?r:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),ws.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Ip(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete pl[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,s=(i,o)=>{n.addEventListener(this,i,o),e[i]=o},r=(i,o,a)=>{i.offsetX=o,i.offsetY=a,this._eventHandler(i)};ht(this.options.events,i=>s(i,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,s=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},r=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},i=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{r("attach",a),this.attached=!0,this.resize(),s("resize",i),s("detach",o)};o=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),s("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){ht(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},ht(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,s){const r=s?"set":"remove";let i,o,a,l;for(n==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],s=e.map(({datasetIndex:i,index:o})=>{const a=this.getDatasetMeta(i);if(!a)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:a.data[o],index:o}});!Tl(s,n)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,n))}notifyPlugins(e,n,s){return this._plugins.notify(this,e,n,s)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,s){const r=this.options.hover,i=(l,c)=>l.filter(u=>!c.some(f=>u.datasetIndex===f.datasetIndex&&u.index===f.index)),o=i(n,e),a=s?e:i(e,n);o.length&&this.updateHoverStyle(o,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,n){const s={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},r=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",s,r)===!1)return;const i=this._handleEvent(e,n,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,r),(i||s.changed)&&this.render(),this}_handleEvent(e,n,s){const{_active:r=[],options:i}=this,o=n,a=this._getActiveElements(e,r,s,o),l=Nk(e),c=IP(e,this._lastEvent,s,l);s&&(this._lastEvent=null,pt(i.onHover,[e,a,this],this),l&&pt(i.onClick,[e,a,this],this));const u=!Tl(a,r);return(u||n)&&(this._active=a,this._updateHoverStyles(a,r,n)),this._lastEvent=c,u}_getActiveElements(e,n,s,r){if(e.type==="mouseout")return[];if(!s)return n;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,r)}};function og(){return ht(er.instances,t=>t._plugins.invalidate())}function Kv(t,e,n=e){t.lineCap=Qe(n.borderCapStyle,e.borderCapStyle),t.setLineDash(Qe(n.borderDash,e.borderDash)),t.lineDashOffset=Qe(n.borderDashOffset,e.borderDashOffset),t.lineJoin=Qe(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Qe(n.borderWidth,e.borderWidth),t.strokeStyle=Qe(n.borderColor,e.borderColor)}function EP(t,e,n){t.lineTo(n.x,n.y)}function OP(t){return t.stepped?fS:t.tension||t.cubicInterpolationMode==="monotone"?hS:EP}function Yv(t,e,n={}){const s=t.length,{start:r=0,end:i=s-1}=n,{start:o,end:a}=e,l=Math.max(r,o),c=Math.min(i,a),u=r<o&&i<o||r>a&&i>a;return{count:s,start:l,loop:e.loop,ilen:c<l&&!u?s+c-l:c-l}}function MP(t,e,n,s){const{points:r,options:i}=e,{count:o,start:a,loop:l,ilen:c}=Yv(r,n,s),u=OP(i);let{move:f=!0,reverse:p}=s||{},m,v,_;for(m=0;m<=c;++m)v=r[(a+(p?c-m:m))%o],!v.skip&&(f?(t.moveTo(v.x,v.y),f=!1):u(t,_,v,p,i.stepped),_=v);return l&&(v=r[(a+(p?c:0))%o],u(t,_,v,p,i.stepped)),!!l}function TP(t,e,n,s){const r=e.points,{count:i,start:o,ilen:a}=Yv(r,n,s),{move:l=!0,reverse:c}=s||{};let u=0,f=0,p,m,v,_,k,S;const P=C=>(o+(c?a-C:C))%i,E=()=>{_!==k&&(t.lineTo(u,k),t.lineTo(u,_),t.lineTo(u,S))};for(l&&(m=r[P(0)],t.moveTo(m.x,m.y)),p=0;p<=a;++p){if(m=r[P(p)],m.skip)continue;const C=m.x,I=m.y,T=C|0;T===v?(I<_?_=I:I>k&&(k=I),u=(f*u+C)/++f):(E(),t.lineTo(C,I),v=T,f=0,_=k=I),S=I}E()}function pd(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?TP:MP}function DP(t){return t.stepped?HS:t.tension||t.cubicInterpolationMode==="monotone"?KS:Mr}function RP(t,e,n,s){let r=e._path;r||(r=e._path=new Path2D,e.path(r,n,s)&&r.closePath()),Kv(t,e.options),t.stroke(r)}function $P(t,e,n,s){const{segments:r,options:i}=e,o=pd(e);for(const a of r)Kv(t,i,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+s-1})&&t.closePath(),t.stroke()}const FP=typeof Path2D=="function";function LP(t,e,n,s){FP&&!e.options.segment?RP(t,e,n,s):$P(t,e,n,s)}class na extends _n{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const r=s.spanGaps?this._loop:this._fullLoop;BS(this._points,s,e,r,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=ZS(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,s=e.length;return s&&n[e[s-1].end]}interpolate(e,n){const s=this.options,r=e[n],i=this.points,o=$v(this,{property:n,start:r,end:r});if(!o.length)return;const a=[],l=DP(s);let c,u;for(c=0,u=o.length;c<u;++c){const{start:f,end:p}=o[c],m=i[f],v=i[p];if(m===v){a.push(m);continue}const _=Math.abs((r-m[n])/(v[n]-m[n])),k=l(m,v,_,s.stepped);k[n]=e[n],a.push(k)}return a.length===1?a[0]:a}pathSegment(e,n,s){return pd(this)(e,this,n,s)}path(e,n,s){const r=this.segments,i=pd(this);let o=this._loop;n=n||0,s=s||this.points.length-n;for(const a of r)o&=i(e,this,a,{start:n,end:n+s-1});return!!o}draw(e,n,s,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),LP(e,this,s,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function ag(t,e,n,s){const r=t.options,{[n]:i}=t.getProps([n],s);return Math.abs(e-i)<r.radius+r.hitRadius}class Gv extends _n{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,n,s){const r=this.options,{x:i,y:o}=this.getProps(["x","y"],s);return Math.pow(e-i,2)+Math.pow(n-o,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(e,n){return ag(this,e,"x",n)}inYRange(e,n){return ag(this,e,"y",n)}getCenterPoint(e){const{x:n,y:s}=this.getProps(["x","y"],e);return{x:n,y:s}}size(e){e=e||this.options||{};let n=e.radius||0;n=Math.max(n,n&&e.hoverRadius||0);const s=n&&e.borderWidth||0;return(n+s)*2}draw(e,n){const s=this.options;this.skip||s.radius<.1||!Vo(this,n,this.size(s)/2)||(e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.fillStyle=s.backgroundColor,dd(e,s,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function BP(t,e,n){const s=t.segments,r=t.points,i=e.points,o=[];for(const a of s){let{start:l,end:c}=a;c=dc(l,c,r);const u=gd(n,r[l],r[c],a.loop);if(!e.segments){o.push({source:a,target:u,start:r[l],end:r[c]});continue}const f=$v(e,u);for(const p of f){const m=gd(n,i[p.start],i[p.end],p.loop),v=Rv(a,r,m);for(const _ of v)o.push({source:_,target:p,start:{[n]:lg(u,m,"start",Math.max)},end:{[n]:lg(u,m,"end",Math.min)}})}}return o}function gd(t,e,n,s){if(s)return;let r=e[t],i=n[t];return t==="angle"&&(r=rs(r),i=rs(i)),{property:t,start:r,end:i}}function jP(t,e){const{x:n=null,y:s=null}=t||{},r=e.points,i=[];return e.segments.forEach(({start:o,end:a})=>{a=dc(o,a,r);const l=r[o],c=r[a];s!==null?(i.push({x:l.x,y:s}),i.push({x:c.x,y:s})):n!==null&&(i.push({x:n,y:l.y}),i.push({x:n,y:c.y}))}),i}function dc(t,e,n){for(;e>t;e--){const s=n[e];if(!isNaN(s.x)&&!isNaN(s.y))break}return e}function lg(t,e,n,s){return t&&e?s(t[n],e[n]):t?t[n]:e?e[n]:0}function Xv(t,e){let n=[],s=!1;return kt(t)?(s=!0,n=t):n=jP(t,e),n.length?new na({points:n,options:{tension:0},_loop:s,_fullLoop:s}):null}function cg(t){return t&&t.fill!==!1}function NP(t,e,n){let r=t[e].fill;const i=[e];let o;if(!n)return r;for(;r!==!1&&i.indexOf(r)===-1;){if(!Kt(r))return r;if(o=t[r],!o)return!1;if(o.visible)return r;i.push(r),r=o.fill}return!1}function zP(t,e,n){const s=VP(t);if(Je(s))return isNaN(s.value)?!1:s;let r=parseFloat(s);return Kt(r)&&Math.floor(r)===r?UP(s[0],e,r,n):["origin","start","end","stack","shape"].indexOf(s)>=0&&s}function UP(t,e,n,s){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=s?!1:n}function qP(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:Je(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function WP(t,e,n){let s;return t==="start"?s=n:t==="end"?s=e.options.reverse?e.min:e.max:Je(t)?s=t.value:s=e.getBaseValue(),s}function VP(t){const e=t.options,n=e.fill;let s=Qe(n&&n.target,n);return s===void 0&&(s=!!e.backgroundColor),s===!1||s===null?!1:s===!0?"origin":s}function HP(t){const{scale:e,index:n,line:s}=t,r=[],i=s.segments,o=s.points,a=KP(e,n);a.push(Xv({x:null,y:e.bottom},s));for(let l=0;l<i.length;l++){const c=i[l];for(let u=c.start;u<=c.end;u++)YP(r,o[u],a)}return new na({points:r,options:{}})}function KP(t,e){const n=[],s=t.getMatchingVisibleMetas("line");for(let r=0;r<s.length;r++){const i=s[r];if(i.index===e)break;i.hidden||n.unshift(i.dataset)}return n}function YP(t,e,n){const s=[];for(let r=0;r<n.length;r++){const i=n[r],{first:o,last:a,point:l}=GP(i,e,"x");if(!(!l||o&&a)){if(o)s.unshift(l);else if(t.push(l),!a)break}}t.push(...s)}function GP(t,e,n){const s=t.interpolate(e,n);if(!s)return{};const r=s[n],i=t.segments,o=t.points;let a=!1,l=!1;for(let c=0;c<i.length;c++){const u=i[c],f=o[u.start][n],p=o[u.end][n];if(hi(r,f,p)){a=r===f,l=r===p;break}}return{first:a,last:l,point:s}}class Qv{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,s){const{x:r,y:i,radius:o}=this;return n=n||{start:0,end:qt},e.arc(r,i,o,n.end,n.start,!0),!s.bounds}interpolate(e){const{x:n,y:s,radius:r}=this,i=e.angle;return{x:n+Math.cos(i)*r,y:s+Math.sin(i)*r,angle:i}}}function XP(t){const{chart:e,fill:n,line:s}=t;if(Kt(n))return QP(e,n);if(n==="stack")return HP(t);if(n==="shape")return!0;const r=JP(t);return r instanceof Qv?r:Xv(r,s)}function QP(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function JP(t){return(t.scale||{}).getPointPositionForValue?eA(t):ZP(t)}function ZP(t){const{scale:e={},fill:n}=t,s=qP(n,e);if(Kt(s)){const r=e.isHorizontal();return{x:r?s:null,y:r?null:s}}return null}function eA(t){const{scale:e,fill:n}=t,s=e.options,r=e.getLabels().length,i=s.reverse?e.max:e.min,o=WP(n,e,i),a=[];if(s.grid.circular){const l=e.getPointPositionForValue(0,i);return new Qv({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<r;++l)a.push(e.getPointPositionForValue(l,o));return a}function xu(t,e,n){const s=XP(e),{chart:r,index:i,line:o,scale:a,axis:l}=e,c=o.options,u=c.fill,f=c.backgroundColor,{above:p=f,below:m=f}=u||{},v=r.getDatasetMeta(i),_=Fv(r,v);s&&o.points.length&&(ea(t,n),tA(t,{line:o,target:s,above:p,below:m,area:n,scale:a,axis:l,clip:_}),ta(t))}function tA(t,e){const{line:n,target:s,above:r,below:i,area:o,scale:a,clip:l}=e,c=n._loop?"angle":e.axis;t.save();let u=i;i!==r&&(c==="x"?(ug(t,s,o.top),ku(t,{line:n,target:s,color:r,scale:a,property:c,clip:l}),t.restore(),t.save(),ug(t,s,o.bottom)):c==="y"&&(dg(t,s,o.left),ku(t,{line:n,target:s,color:i,scale:a,property:c,clip:l}),t.restore(),t.save(),dg(t,s,o.right),u=r)),ku(t,{line:n,target:s,color:u,scale:a,property:c,clip:l}),t.restore()}function ug(t,e,n){const{segments:s,points:r}=e;let i=!0,o=!1;t.beginPath();for(const a of s){const{start:l,end:c}=a,u=r[l],f=r[dc(l,c,r)];i?(t.moveTo(u.x,u.y),i=!1):(t.lineTo(u.x,n),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(f.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function dg(t,e,n){const{segments:s,points:r}=e;let i=!0,o=!1;t.beginPath();for(const a of s){const{start:l,end:c}=a,u=r[l],f=r[dc(l,c,r)];i?(t.moveTo(u.x,u.y),i=!1):(t.lineTo(n,u.y),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(n,f.y)}t.lineTo(n,e.first().y),t.closePath(),t.clip()}function ku(t,e){const{line:n,target:s,property:r,color:i,scale:o,clip:a}=e,l=BP(n,s,r);for(const{source:c,target:u,start:f,end:p}of l){const{style:{backgroundColor:m=i}={}}=c,v=s!==!0;t.save(),t.fillStyle=m,nA(t,o,a,v&&gd(r,f,p)),t.beginPath();const _=!!n.pathSegment(t,c);let k;if(v){_?t.closePath():fg(t,s,p,r);const S=!!s.pathSegment(t,u,{move:_,reverse:!0});k=_&&S,k||fg(t,s,f,r)}t.closePath(),t.fill(k?"evenodd":"nonzero"),t.restore()}}function nA(t,e,n,s){const r=e.chart.chartArea,{property:i,start:o,end:a}=s||{};if(i==="x"||i==="y"){let l,c,u,f;i==="x"?(l=o,c=r.top,u=a,f=r.bottom):(l=r.left,c=o,u=r.right,f=a),t.beginPath(),n&&(l=Math.max(l,n.left),u=Math.min(u,n.right),c=Math.max(c,n.top),f=Math.min(f,n.bottom)),t.rect(l,c,u-l,f-c),t.clip()}}function fg(t,e,n,s){const r=e.interpolate(n,s);r&&t.lineTo(r.x,r.y)}var sA={id:"filler",afterDatasetsUpdate(t,e,n){const s=(t.data.datasets||[]).length,r=[];let i,o,a,l;for(o=0;o<s;++o)i=t.getDatasetMeta(o),a=i.dataset,l=null,a&&a.options&&a instanceof na&&(l={visible:t.isDatasetVisible(o),index:o,fill:zP(a,o,s),chart:t,axis:i.controller.options.indexAxis,scale:i.vScale,line:a}),i.$filler=l,r.push(l);for(o=0;o<s;++o)l=r[o],!(!l||l.fill===!1)&&(l.fill=NP(r,o,n.propagate))},beforeDraw(t,e,n){const s=n.drawTime==="beforeDraw",r=t.getSortedVisibleDatasetMetas(),i=t.chartArea;for(let o=r.length-1;o>=0;--o){const a=r[o].$filler;a&&(a.line.updateControlPoints(i,a.axis),s&&a.fill&&xu(t.ctx,a,i))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const s=t.getSortedVisibleDatasetMetas();for(let r=s.length-1;r>=0;--r){const i=s[r].$filler;cg(i)&&xu(t.ctx,i,t.chartArea)}},beforeDatasetDraw(t,e,n){const s=e.meta.$filler;!cg(s)||n.drawTime!=="beforeDatasetDraw"||xu(t.ctx,s,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const hg=(t,e)=>{let{boxHeight:n=e,boxWidth:s=e}=t;return t.usePointStyle&&(n=Math.min(n,e),s=t.pointStyleWidth||Math.min(s,e)),{boxWidth:s,boxHeight:n,itemHeight:Math.max(e,n)}},rA=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class pg extends _n{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,s){this.maxWidth=e,this.maxHeight=n,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=pt(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(s=>e.filter(s,this.chart.data))),e.sort&&(n=n.sort((s,r)=>e.sort(s,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const s=e.labels,r=Lt(s.font),i=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=hg(s,i);let c,u;n.font=r.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,i,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,r,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,s,r){const{ctx:i,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=r+a;let f=e;i.textAlign="left",i.textBaseline="middle";let p=-1,m=-u;return this.legendItems.forEach((v,_)=>{const k=s+n/2+i.measureText(v.text).width;(_===0||c[c.length-1]+k+2*a>o)&&(f+=u,c[c.length-(_>0?0:1)]=0,m+=u,p++),l[_]={left:0,top:m,row:p,width:k,height:r},c[c.length-1]+=k+a}),f}_fitCols(e,n,s,r){const{ctx:i,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let f=a,p=0,m=0,v=0,_=0;return this.legendItems.forEach((k,S)=>{const{itemWidth:P,itemHeight:E}=iA(s,n,i,k,r);S>0&&m+E+2*a>u&&(f+=p+a,c.push({width:p,height:m}),v+=p+a,_++,p=m=0),l[S]={left:v,top:m,col:_,width:P,height:E},p=Math.max(p,P),m+=E+a}),f+=p,c.push({width:p,height:m}),f}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:s,labels:{padding:r},rtl:i}}=this,o=xi(i,this.left,this.width);if(this.isHorizontal()){let a=0,l=nn(s,this.left+r,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=nn(s,this.left+r,this.right-this.lineWidths[a])),c.top+=this.top+e+r,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+r}else{let a=0,l=nn(s,this.top+e+r,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=nn(s,this.top+e+r,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+r,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;ea(e,this),this._draw(),ta(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:s,ctx:r}=this,{align:i,labels:o}=e,a=Ot.color,l=xi(e.rtl,this.left,this.width),c=Lt(o.font),{padding:u}=o,f=c.size,p=f/2;let m;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=c.string;const{boxWidth:v,boxHeight:_,itemHeight:k}=hg(o,f),S=function(T,G,V){if(isNaN(v)||v<=0||isNaN(_)||_<0)return;r.save();const A=Qe(V.lineWidth,1);if(r.fillStyle=Qe(V.fillStyle,a),r.lineCap=Qe(V.lineCap,"butt"),r.lineDashOffset=Qe(V.lineDashOffset,0),r.lineJoin=Qe(V.lineJoin,"miter"),r.lineWidth=A,r.strokeStyle=Qe(V.strokeStyle,a),r.setLineDash(Qe(V.lineDash,[])),o.usePointStyle){const Z={radius:_*Math.SQRT2/2,pointStyle:V.pointStyle,rotation:V.rotation,borderWidth:A},K=l.xPlus(T,v/2),j=G+p;Sv(r,Z,K,j,o.pointStyleWidth&&v)}else{const Z=G+Math.max((f-_)/2,0),K=l.leftForLtr(T,v),j=wi(V.borderRadius);r.beginPath(),Object.values(j).some(de=>de!==0)?Ll(r,{x:K,y:Z,w:v,h:_,radius:j}):r.rect(K,Z,v,_),r.fill(),A!==0&&r.stroke()}r.restore()},P=function(T,G,V){Ho(r,V.text,T,G+k/2,c,{strikethrough:V.hidden,textAlign:l.textAlign(V.textAlign)})},E=this.isHorizontal(),C=this._computeTitleHeight();E?m={x:nn(i,this.left+u,this.right-s[0]),y:this.top+u+C,line:0}:m={x:this.left+u,y:nn(i,this.top+C+u,this.bottom-n[0].height),line:0},Mv(this.ctx,e.textDirection);const I=k+u;this.legendItems.forEach((T,G)=>{r.strokeStyle=T.fontColor,r.fillStyle=T.fontColor;const V=r.measureText(T.text).width,A=l.textAlign(T.textAlign||(T.textAlign=o.textAlign)),Z=v+p+V;let K=m.x,j=m.y;l.setWidth(this.width),E?G>0&&K+Z+u>this.right&&(j=m.y+=I,m.line++,K=m.x=nn(i,this.left+u,this.right-s[m.line])):G>0&&j+I>this.bottom&&(K=m.x=K+n[m.line].width+u,m.line++,j=m.y=nn(i,this.top+C+u,this.bottom-n[m.line].height));const de=l.x(K);if(S(de,j,T),K=Zk(A,K+v+p,E?K+Z:this.right,e.rtl),P(l.x(K),j,T),E)m.x+=Z+u;else if(typeof T.text!="string"){const ge=c.lineHeight;m.y+=Jv(T,ge)+u}else m.y+=I}),Tv(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,s=Lt(n.font),r=ln(n.padding);if(!n.display)return;const i=xi(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=s.size/2,c=r.top+l;let u,f=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),u=this.top+c,f=nn(e.align,f,this.right-p);else{const v=this.columnSizes.reduce((_,k)=>Math.max(_,k.height),0);u=c+nn(e.align,this.top,this.bottom-v-e.labels.padding-this._computeTitleHeight())}const m=nn(a,f,f+p);o.textAlign=i.textAlign(sf(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=s.string,Ho(o,n.text,m,u,s)}_computeTitleHeight(){const e=this.options.title,n=Lt(e.font),s=ln(e.padding);return e.display?n.lineHeight+s.height:0}_getLegendItemAt(e,n){let s,r,i;if(hi(e,this.left,this.right)&&hi(n,this.top,this.bottom)){for(i=this.legendHitBoxes,s=0;s<i.length;++s)if(r=i[s],hi(e,r.left,r.left+r.width)&&hi(n,r.top,r.top+r.height))return this.legendItems[s]}return null}handleEvent(e){const n=this.options;if(!lA(e.type,n))return;const s=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,i=rA(r,s);r&&!i&&pt(n.onLeave,[e,r,this],this),this._hoveredItem=s,s&&!i&&pt(n.onHover,[e,s,this],this)}else s&&pt(n.onClick,[e,s,this],this)}}function iA(t,e,n,s,r){const i=oA(s,t,e,n),o=aA(r,s,e.lineHeight);return{itemWidth:i,itemHeight:o}}function oA(t,e,n,s){let r=t.text;return r&&typeof r!="string"&&(r=r.reduce((i,o)=>i.length>o.length?i:o)),e+n.size/2+s.measureText(r).width}function aA(t,e,n){let s=t;return typeof e.text!="string"&&(s=Jv(e,n)),s}function Jv(t,e){const n=t.text?t.text.length:0;return e*n}function lA(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var Zv={id:"legend",_element:pg,start(t,e,n){const s=t.legend=new pg({ctx:t.ctx,options:n,chart:t});Nn.configure(t,s,n),Nn.addBox(t,s)},stop(t){Nn.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const s=t.legend;Nn.configure(t,s,n),s.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const s=e.datasetIndex,r=n.chart;r.isDatasetVisible(s)?(r.hide(s),e.hidden=!0):(r.show(s),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:s,textAlign:r,color:i,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=ln(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:i,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:s||c.pointStyle,rotation:c.rotation,textAlign:r||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class eb extends _n{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const r=kt(s.text)?s.text.length:1;this._padding=ln(s.padding);const i=r*Lt(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:s,bottom:r,right:i,options:o}=this,a=o.align;let l=0,c,u,f;return this.isHorizontal()?(u=nn(a,s,i),f=n+e,c=i-s):(o.position==="left"?(u=s+e,f=nn(a,r,n),l=ut*-.5):(u=i-e,f=nn(a,n,r),l=ut*.5),c=r-n),{titleX:u,titleY:f,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const s=Lt(n.font),i=s.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(i);Ho(e,n.text,0,0,s,{color:n.color,maxWidth:l,rotation:c,textAlign:sf(n.align),textBaseline:"middle",translation:[o,a]})}}function cA(t,e){const n=new eb({ctx:t.ctx,options:e,chart:t});Nn.configure(t,n,e),Nn.addBox(t,n),t.titleBlock=n}var tb={id:"title",_element:eb,start(t,e,n){cA(t,n)},stop(t){const e=t.titleBlock;Nn.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const s=t.titleBlock;Nn.configure(t,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const go={average(t){if(!t.length)return!1;let e,n,s=new Set,r=0,i=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();s.add(l.x),r+=l.y,++i}}return i===0||s.size===0?!1:{x:[...s].reduce((a,l)=>a+l)/s.size,y:r/i}},nearest(t,e){if(!t.length)return!1;let n=e.x,s=e.y,r=Number.POSITIVE_INFINITY,i,o,a;for(i=0,o=t.length;i<o;++i){const l=t[i].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=Oi(e,c);u<r&&(r=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,s=l.y}return{x:n,y:s}}};function ts(t,e){return e&&(kt(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function xs(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function uA(t,e){const{element:n,datasetIndex:s,index:r}=e,i=t.getDatasetMeta(s).controller,{label:o,value:a}=i.getLabelAndValue(r);return{chart:t,label:o,parsed:i.getParsed(r),raw:t.data.datasets[s].data[r],formattedValue:a,dataset:i.getDataset(),dataIndex:r,datasetIndex:s,element:n}}function gg(t,e){const n=t.chart.ctx,{body:s,footer:r,title:i}=t,{boxWidth:o,boxHeight:a}=e,l=Lt(e.bodyFont),c=Lt(e.titleFont),u=Lt(e.footerFont),f=i.length,p=r.length,m=s.length,v=ln(e.padding);let _=v.height,k=0,S=s.reduce((C,I)=>C+I.before.length+I.lines.length+I.after.length,0);if(S+=t.beforeBody.length+t.afterBody.length,f&&(_+=f*c.lineHeight+(f-1)*e.titleSpacing+e.titleMarginBottom),S){const C=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;_+=m*C+(S-m)*l.lineHeight+(S-1)*e.bodySpacing}p&&(_+=e.footerMarginTop+p*u.lineHeight+(p-1)*e.footerSpacing);let P=0;const E=function(C){k=Math.max(k,n.measureText(C).width+P)};return n.save(),n.font=c.string,ht(t.title,E),n.font=l.string,ht(t.beforeBody.concat(t.afterBody),E),P=e.displayColors?o+2+e.boxPadding:0,ht(s,C=>{ht(C.before,E),ht(C.lines,E),ht(C.after,E)}),P=0,n.font=u.string,ht(t.footer,E),n.restore(),k+=v.width,{width:k,height:_}}function dA(t,e){const{y:n,height:s}=e;return n<s/2?"top":n>t.height-s/2?"bottom":"center"}function fA(t,e,n,s){const{x:r,width:i}=s,o=n.caretSize+n.caretPadding;if(t==="left"&&r+i+o>e.width||t==="right"&&r-i-o<0)return!0}function hA(t,e,n,s){const{x:r,width:i}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return s==="center"?c=r<=(a+l)/2?"left":"right":r<=i/2?c="left":r>=o-i/2&&(c="right"),fA(c,t,e,n)&&(c="center"),c}function mg(t,e,n){const s=n.yAlign||e.yAlign||dA(t,n);return{xAlign:n.xAlign||e.xAlign||hA(t,e,n,s),yAlign:s}}function pA(t,e){let{x:n,width:s}=t;return e==="right"?n-=s:e==="center"&&(n-=s/2),n}function gA(t,e,n){let{y:s,height:r}=t;return e==="top"?s+=n:e==="bottom"?s-=r+n:s-=r/2,s}function yg(t,e,n,s){const{caretSize:r,caretPadding:i,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=r+i,{topLeft:u,topRight:f,bottomLeft:p,bottomRight:m}=wi(o);let v=pA(e,a);const _=gA(e,l,c);return l==="center"?a==="left"?v+=c:a==="right"&&(v-=c):a==="left"?v-=Math.max(u,p)+r:a==="right"&&(v+=Math.max(f,m)+r),{x:jn(v,0,s.width-e.width),y:jn(_,0,s.height-e.height)}}function Qa(t,e,n){const s=ln(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-s.right:t.x+s.left}function vg(t){return ts([],xs(t))}function mA(t,e,n){return Wr(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function bg(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const nb={beforeTitle:gs,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,s=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(s>0&&e.dataIndex<s)return n[e.dataIndex]}return""},afterTitle:gs,beforeBody:gs,beforeLabel:gs,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return _t(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:gs,afterBody:gs,beforeFooter:gs,footer:gs,afterFooter:gs};function gn(t,e,n,s){const r=t[e].call(n,s);return typeof r>"u"?nb[e].call(n,s):r}class _g extends _n{static positioners=go;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,s=this.options.setContext(this.getContext()),r=s.enabled&&n.options.animation&&s.animations,i=new ff(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=mA(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:s}=n,r=gn(s,"beforeTitle",this,e),i=gn(s,"title",this,e),o=gn(s,"afterTitle",this,e);let a=[];return a=ts(a,xs(r)),a=ts(a,xs(i)),a=ts(a,xs(o)),a}getBeforeBody(e,n){return vg(gn(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:s}=n,r=[];return ht(e,i=>{const o={before:[],lines:[],after:[]},a=bg(s,i);ts(o.before,xs(gn(a,"beforeLabel",this,i))),ts(o.lines,gn(a,"label",this,i)),ts(o.after,xs(gn(a,"afterLabel",this,i))),r.push(o)}),r}getAfterBody(e,n){return vg(gn(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:s}=n,r=gn(s,"beforeFooter",this,e),i=gn(s,"footer",this,e),o=gn(s,"afterFooter",this,e);let a=[];return a=ts(a,xs(r)),a=ts(a,xs(i)),a=ts(a,xs(o)),a}_createItems(e){const n=this._active,s=this.chart.data,r=[],i=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(uA(this.chart,n[l]));return e.filter&&(a=a.filter((u,f,p)=>e.filter(u,f,p,s))),e.itemSort&&(a=a.sort((u,f)=>e.itemSort(u,f,s))),ht(a,u=>{const f=bg(e.callbacks,u);r.push(gn(f,"labelColor",this,u)),i.push(gn(f,"labelPointStyle",this,u)),o.push(gn(f,"labelTextColor",this,u))}),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const s=this.options.setContext(this.getContext()),r=this._active;let i,o=[];if(!r.length)this.opacity!==0&&(i={opacity:0});else{const a=go[s.position].call(this,r,this._eventPosition);o=this._createItems(s),this.title=this.getTitle(o,s),this.beforeBody=this.getBeforeBody(o,s),this.body=this.getBody(o,s),this.afterBody=this.getAfterBody(o,s),this.footer=this.getFooter(o,s);const l=this._size=gg(this,s),c=Object.assign({},a,l),u=mg(this.chart,s,c),f=yg(s,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,i={opacity:1,x:f.x,y:f.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,s,r){const i=this.getCaretPosition(e,s,r);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(e,n,s){const{xAlign:r,yAlign:i}=this,{caretSize:o,cornerRadius:a}=s,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:f}=wi(a),{x:p,y:m}=e,{width:v,height:_}=n;let k,S,P,E,C,I;return i==="center"?(C=m+_/2,r==="left"?(k=p,S=k-o,E=C+o,I=C-o):(k=p+v,S=k+o,E=C-o,I=C+o),P=k):(r==="left"?S=p+Math.max(l,u)+o:r==="right"?S=p+v-Math.max(c,f)-o:S=this.caretX,i==="top"?(E=m,C=E-o,k=S-o,P=S+o):(E=m+_,C=E+o,k=S+o,P=S-o),I=E),{x1:k,x2:S,x3:P,y1:E,y2:C,y3:I}}drawTitle(e,n,s){const r=this.title,i=r.length;let o,a,l;if(i){const c=xi(s.rtl,this.x,this.width);for(e.x=Qa(this,s.titleAlign,s),n.textAlign=c.textAlign(s.titleAlign),n.textBaseline="middle",o=Lt(s.titleFont),a=s.titleSpacing,n.fillStyle=s.titleColor,n.font=o.string,l=0;l<i;++l)n.fillText(r[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===i&&(e.y+=s.titleMarginBottom-a)}}_drawColorBox(e,n,s,r,i){const o=this.labelColors[s],a=this.labelPointStyles[s],{boxHeight:l,boxWidth:c}=i,u=Lt(i.bodyFont),f=Qa(this,"left",i),p=r.x(f),m=l<u.lineHeight?(u.lineHeight-l)/2:0,v=n.y+m;if(i.usePointStyle){const _={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},k=r.leftForLtr(p,c)+c/2,S=v+l/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,dd(e,_,k,S),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,dd(e,_,k,S)}else{e.lineWidth=Je(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const _=r.leftForLtr(p,c),k=r.leftForLtr(r.xPlus(p,1),c-2),S=wi(o.borderRadius);Object.values(S).some(P=>P!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,Ll(e,{x:_,y:v,w:c,h:l,radius:S}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Ll(e,{x:k,y:v+1,w:c-2,h:l-2,radius:S}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(_,v,c,l),e.strokeRect(_,v,c,l),e.fillStyle=o.backgroundColor,e.fillRect(k,v+1,c-2,l-2))}e.fillStyle=this.labelTextColors[s]}drawBody(e,n,s){const{body:r}=this,{bodySpacing:i,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=s,f=Lt(s.bodyFont);let p=f.lineHeight,m=0;const v=xi(s.rtl,this.x,this.width),_=function(V){n.fillText(V,v.x(e.x+m),e.y+p/2),e.y+=p+i},k=v.textAlign(o);let S,P,E,C,I,T,G;for(n.textAlign=o,n.textBaseline="middle",n.font=f.string,e.x=Qa(this,k,s),n.fillStyle=s.bodyColor,ht(this.beforeBody,_),m=a&&k!=="right"?o==="center"?c/2+u:c+2+u:0,C=0,T=r.length;C<T;++C){for(S=r[C],P=this.labelTextColors[C],n.fillStyle=P,ht(S.before,_),E=S.lines,a&&E.length&&(this._drawColorBox(n,e,C,v,s),p=Math.max(f.lineHeight,l)),I=0,G=E.length;I<G;++I)_(E[I]),p=f.lineHeight;ht(S.after,_)}m=0,p=f.lineHeight,ht(this.afterBody,_),e.y-=i}drawFooter(e,n,s){const r=this.footer,i=r.length;let o,a;if(i){const l=xi(s.rtl,this.x,this.width);for(e.x=Qa(this,s.footerAlign,s),e.y+=s.footerMarginTop,n.textAlign=l.textAlign(s.footerAlign),n.textBaseline="middle",o=Lt(s.footerFont),n.fillStyle=s.footerColor,n.font=o.string,a=0;a<i;++a)n.fillText(r[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+s.footerSpacing}}drawBackground(e,n,s,r){const{xAlign:i,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=s,{topLeft:f,topRight:p,bottomLeft:m,bottomRight:v}=wi(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(a+f,l),o==="top"&&this.drawCaret(e,n,s,r),n.lineTo(a+c-p,l),n.quadraticCurveTo(a+c,l,a+c,l+p),o==="center"&&i==="right"&&this.drawCaret(e,n,s,r),n.lineTo(a+c,l+u-v),n.quadraticCurveTo(a+c,l+u,a+c-v,l+u),o==="bottom"&&this.drawCaret(e,n,s,r),n.lineTo(a+m,l+u),n.quadraticCurveTo(a,l+u,a,l+u-m),o==="center"&&i==="left"&&this.drawCaret(e,n,s,r),n.lineTo(a,l+f),n.quadraticCurveTo(a,l,a+f,l),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,s=this.$animations,r=s&&s.x,i=s&&s.y;if(r||i){const o=go[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=gg(this,e),l=Object.assign({},o,this._size),c=mg(n,e,l),u=yg(e,l,c,n);(r._to!==u.x||i._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const o=ln(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=s,this.drawBackground(i,e,r,n),Mv(e,n.textDirection),i.y+=o.top,this.drawTitle(i,e,n),this.drawBody(i,e,n),this.drawFooter(i,e,n),Tv(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const s=this._active,r=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),i=!Tl(s,r),o=this._positionChanged(r,n);(i||o)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,s=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],o=this._getActiveElements(e,i,n,s),a=this._positionChanged(o,e),l=n||!Tl(o,i)||a;return l&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,s,r){const i=this.options;if(e.type==="mouseout")return[];if(!r)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,i.mode,i,s);return i.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:s,caretY:r,options:i}=this,o=go[i.position].call(this,e,n);return o!==!1&&(s!==o.x||r!==o.y)}}var sb={id:"tooltip",_element:_g,positioners:go,afterInit(t,e,n){n&&(t.tooltip=new _g({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:nb},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const yA=(t,e,n,s)=>(typeof e=="string"?(n=t.push(e)-1,s.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function vA(t,e,n,s){const r=t.indexOf(e);if(r===-1)return yA(t,e,n,s);const i=t.lastIndexOf(e);return r!==i?n:r}const bA=(t,e)=>t===null?null:jn(Math.round(t),0,e);function wg(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class rb extends Fi{static id="category";static defaults={ticks:{callback:wg}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const s=this.getLabels();for(const{index:r,label:i}of n)s[r]===i&&s.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(_t(e))return null;const s=this.getLabels();return n=isFinite(n)&&s[n]===e?n:vA(s,e,Qe(n,e),this._addedLabels),bA(n,s.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:s,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(s=0),n||(r=this.getLabels().length-1)),this.min=s,this.max=r}buildTicks(){const e=this.min,n=this.max,s=this.options.offset,r=[];let i=this.getLabels();i=e===0&&n===i.length-1?i:i.slice(e,n+1),this._valueRange=Math.max(i.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let o=e;o<=n;o++)r.push({value:o});return r}getLabelForValue(e){return wg.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function _A(t,e){const n=[],{bounds:r,step:i,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:f,includeBounds:p}=t,m=i||1,v=u-1,{min:_,max:k}=e,S=!_t(o),P=!_t(a),E=!_t(c),C=(k-_)/(f+1);let I=_p((k-_)/v/m)*m,T,G,V,A;if(I<1e-14&&!S&&!P)return[{value:_},{value:k}];A=Math.ceil(k/I)-Math.floor(_/I),A>v&&(I=_p(A*I/v/m)*m),_t(l)||(T=Math.pow(10,l),I=Math.ceil(I*T)/T),r==="ticks"?(G=Math.floor(_/I)*I,V=Math.ceil(k/I)*I):(G=_,V=k),S&&P&&i&&Wk((a-o)/i,I/1e3)?(A=Math.round(Math.min((a-o)/I,u)),I=(a-o)/A,G=o,V=a):E?(G=S?o:G,V=P?a:V,A=c-1,I=(V-G)/A):(A=(V-G)/I,Eo(A,Math.round(A),I/1e3)?A=Math.round(A):A=Math.ceil(A));const Z=Math.max(wp(I),wp(G));T=Math.pow(10,_t(l)?Z:l),G=Math.round(G*T)/T,V=Math.round(V*T)/T;let K=0;for(S&&(p&&G!==o?(n.push({value:o}),G<o&&K++,Eo(Math.round((G+K*I)*T)/T,o,xg(o,C,t))&&K++):G<o&&K++);K<A;++K){const j=Math.round((G+K*I)*T)/T;if(P&&j>a)break;n.push({value:j})}return P&&p&&V!==a?n.length&&Eo(n[n.length-1].value,a,xg(a,C,t))?n[n.length-1].value=a:n.push({value:a}):(!P||V===a)&&n.push({value:V}),n}function xg(t,e,{horizontal:n,minRotation:s}){const r=Wt(s),i=(n?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+t).length;return Math.min(e/i,o)}class wA extends Fi{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return _t(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:s}=this.getUserBounds();let{min:r,max:i}=this;const o=l=>r=n?r:l,a=l=>i=s?i:l;if(e){const l=Ei(r),c=Ei(i);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(r===i){let l=i===0?1:Math.abs(i*.05);a(i+l),e||o(r-l)}this.min=r,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:s}=e,r;return s?(r=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let s=this.getTickLimit();s=Math.max(2,s);const r={maxTicks:s,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},i=this._range||this,o=_A(r,i);return e.bounds==="ticks"&&Vk(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,s=this.max;if(super.configure(),this.options.offset&&e.length){const r=(s-n)/Math.max(e.length-1,1)/2;n-=r,s+=r}this._startValue=n,this._endValue=s,this._valueRange=s-n}getLabelForValue(e){return of(e,this.chart.options.locale,this.options.ticks.format)}}class ib extends wA{static id="linear";static defaults={ticks:{callback:kv.formatters.numeric}};determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Kt(e)?e:0,this.max=Kt(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,s=Wt(this.options.ticks.minRotation),r=(e?Math.sin(s):Math.cos(s))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,i.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const fc={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},yn=Object.keys(fc);function kg(t,e){return t-e}function Sg(t,e){if(_t(e))return null;const n=t._adapter,{parser:s,round:r,isoWeekday:i}=t._parseOpts;let o=e;return typeof s=="function"&&(o=s(o)),Kt(o)||(o=typeof s=="string"?n.parse(o,s):n.parse(o)),o===null?null:(r&&(o=r==="week"&&(Nr(i)||i===!0)?n.startOf(o,"isoWeek",i):n.startOf(o,r)),+o)}function Cg(t,e,n,s){const r=yn.length;for(let i=yn.indexOf(t);i<r-1;++i){const o=fc[yn[i]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=s)return yn[i]}return yn[r-1]}function xA(t,e,n,s,r){for(let i=yn.length-1;i>=yn.indexOf(n);i--){const o=yn[i];if(fc[o].common&&t._adapter.diff(r,s,o)>=e-1)return o}return yn[n?yn.indexOf(n):0]}function kA(t){for(let e=yn.indexOf(t)+1,n=yn.length;e<n;++e)if(fc[yn[e]].common)return yn[e]}function Pg(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:s,hi:r}=nf(n,e),i=n[s]>=e?n[s]:n[r];t[i]=!0}}function SA(t,e,n,s){const r=t._adapter,i=+r.startOf(e[0].value,s),o=e[e.length-1].value;let a,l;for(a=i;a<=o;a=+r.add(a,1,s))l=n[a],l>=0&&(e[l].major=!0);return e}function Ag(t,e,n){const s=[],r={},i=e.length;let o,a;for(o=0;o<i;++o)a=e[o],r[a]=o,s.push({value:a,major:!1});return i===0||!n?s:SA(t,s,r,n)}class Ig extends Fi{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const s=e.time||(e.time={}),r=this._adapter=new _C._date(e.adapters.date);r.init(n),Io(s.displayFormats,r.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:Sg(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,s=e.time.unit||"day";let{min:r,max:i,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(r=Math.min(r,c.min)),!a&&!isNaN(c.max)&&(i=Math.max(i,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),r=Kt(r)&&!isNaN(r)?r:+n.startOf(Date.now(),s),i=Kt(i)&&!isNaN(i)?i:+n.endOf(Date.now(),s)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],s=e[e.length-1]),{min:n,max:s}}buildTicks(){const e=this.options,n=e.time,s=e.ticks,r=s.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,o=this.max,a=Gk(r,i,o);return this._unit=n.unit||(s.autoSkip?Cg(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):xA(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:kA(this._unit),this.initOffsets(r),e.reverse&&a.reverse(),Ag(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,s=0,r,i;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?n=1-r:n=(this.getDecimalForValue(e[1])-r)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?s=i:s=(i-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=jn(n,0,o),s=jn(s,0,o),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){const e=this._adapter,n=this.min,s=this.max,r=this.options,i=r.time,o=i.unit||Cg(i.minUnit,n,s,this._getLabelCapacity(n)),a=Qe(r.ticks.stepSize,1),l=o==="week"?i.isoWeekday:!1,c=Nr(l)||l===!0,u={};let f=n,p,m;if(c&&(f=+e.startOf(f,"isoWeek",l)),f=+e.startOf(f,c?"day":o),e.diff(s,n,o)>1e5*a)throw new Error(n+" and "+s+" are too far apart with stepSize of "+a+" "+o);const v=r.ticks.source==="data"&&this.getDataTimestamps();for(p=f,m=0;p<s;p=+e.add(p,a,o),m++)Pg(u,p,v);return(p===s||r.bounds==="ticks"||m===1)&&Pg(u,p,v),Object.keys(u).sort(kg).map(_=>+_)}getLabelForValue(e){const n=this._adapter,s=this.options.time;return s.tooltipFormat?n.format(e,s.tooltipFormat):n.format(e,s.displayFormats.datetime)}format(e,n){const r=this.options.time.displayFormats,i=this._unit,o=n||r[i];return this._adapter.format(e,o)}_tickFormatFunction(e,n,s,r){const i=this.options,o=i.ticks.callback;if(o)return pt(o,[e,n,s],this);const a=i.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],f=c&&a[c],p=s[n],m=c&&f&&p&&p.major;return this._adapter.format(e,r||(m?f:u))}generateTickLabels(e){let n,s,r;for(n=0,s=e.length;n<s;++n)r=e[n],r.label=this._tickFormatFunction(r.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,s=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+s)*n.factor)}getValueForPixel(e){const n=this._offsets,s=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+s*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,s=this.ctx.measureText(e).width,r=Wt(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(r),o=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:s*i+a*o,h:s*o+a*i}}_getLabelCapacity(e){const n=this.options.time,s=n.displayFormats,r=s[n.unit]||s.millisecond,i=this._tickFormatFunction(e,0,Ag(this,[e],this._majorUnit),r),o=this._getLabelSize(i),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,s;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,s=r.length;n<s;++n)e=e.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,s;if(e.length)return e;const r=this.getLabels();for(n=0,s=r.length;n<s;++n)e.push(Sg(this,r[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Qk(e.sort(kg))}}function Ja(t,e,n){let s=0,r=t.length-1,i,o,a,l;n?(e>=t[s].pos&&e<=t[r].pos&&({lo:s,hi:r}=Dr(t,"pos",e)),{pos:i,time:a}=t[s],{pos:o,time:l}=t[r]):(e>=t[s].time&&e<=t[r].time&&({lo:s,hi:r}=Dr(t,"time",e)),{time:i,pos:a}=t[s],{time:o,pos:l}=t[r]);const c=o-i;return c?a+(l-a)*(e-i)/c:a}class dL extends Ig{static id="timeseries";static defaults=Ig.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Ja(n,this.min),this._tableRange=Ja(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:s}=this,r=[],i=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=s&&r.push(c);if(r.length<2)return[{time:n,pos:0},{time:s,pos:1}];for(o=0,a=r.length;o<a;++o)u=r[o+1],l=r[o-1],c=r[o],Math.round((u+l)/2)!==c&&i.push({time:c,pos:o/(a-1)});return i}_generate(){const e=this.min,n=this.max;let s=super.getDataTimestamps();return(!s.includes(e)||!s.length)&&s.splice(0,0,e),(!s.includes(n)||s.length===1)&&s.push(n),s.sort((r,i)=>r-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),s=this.getLabelTimestamps();return n.length&&s.length?e=this.normalize(n.concat(s)):e=n.length?n:s,e=this._cache.all=e,e}getDecimalForValue(e){return(Ja(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,s=this.getDecimalForPixel(e)/n.factor-n.end;return Ja(this._table,s*this._tableRange+this._minPos,!0)}}const ob={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},CA={ariaLabel:{type:String},ariaDescribedby:{type:String}},PA={type:{type:String,required:!0},destroyDelay:{type:Number,default:0},...ob,...CA},AA=Uy[0]==="2"?(t,e)=>Object.assign(t,{attrs:e}):(t,e)=>Object.assign(t,e);function ai(t){return Xo(t)?tt(t):t}function IA(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t;return Xo(e)?new Proxy(t,{}):t}function EA(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function ab(t,e){t.labels=e}function lb(t,e,n){const s=[];t.datasets=e.map(r=>{const i=t.datasets.find(o=>o[n]===r[n]);return!i||!r.data||s.includes(i)?{...r}:(s.push(i),Object.assign(i,r),i)})}function OA(t,e){const n={labels:[],datasets:[]};return ab(n,t.labels),lb(n,t.datasets,e),n}const MA=Ze({props:PA,setup(t,e){let{expose:n,slots:s}=e;const r=he(null),i=Jl(null);n({chart:i});const o=()=>{if(!r.value)return;const{type:c,data:u,options:f,plugins:p,datasetIdKey:m}=t,v=OA(u,m),_=IA(v,u);i.value=new er(r.value,{type:c,data:_,options:{...f},plugins:p})},a=()=>{const c=tt(i.value);c&&(t.destroyDelay>0?setTimeout(()=>{c.destroy(),i.value=null},t.destroyDelay):(c.destroy(),i.value=null))},l=c=>{c.update(t.updateMode)};return Mn(o),$i(a),Ht([()=>t.options,()=>t.data],(c,u)=>{let[f,p]=c,[m,v]=u;const _=tt(i.value);if(!_)return;let k=!1;if(f){const S=ai(f),P=ai(m);S&&S!==P&&(EA(_,S),k=!0)}if(p){const S=ai(p.labels),P=ai(v.labels),E=ai(p.datasets),C=ai(v.datasets);S!==P&&(ab(_.config.data,S),k=!0),E&&E!==C&&(lb(_.config.data,E,t.datasetIdKey),k=!0)}k&&an(()=>{l(_)})},{deep:!0}),()=>As("canvas",{role:"img",ariaLabel:t.ariaLabel,ariaDescribedby:t.ariaDescribedby,ref:r},[As("p",{},[s.default?s.default():""])])}});function TA(t,e){return er.register(e),Ze({props:ob,setup(n,s){let{expose:r}=s;const i=Jl(null),o=a=>{i.value=a?.chart};return r({chart:i}),()=>As(MA,AA({ref:o},{type:t,...n}))}})}const cb=TA("line",bC),DA={class:"chart-container"},RA=Ze({__name:"PortfolioValueChart",setup(t){er.register(rb,ib,Gv,na,tb,sb,Zv,sA);const e=he([]),n=He(()=>{const r=[...e.value].sort((a,l)=>new Date(a.asOf).getTime()-new Date(l.asOf).getTime()),i=r.map(a=>new Date(a.asOf).toLocaleDateString()),o=r.map(a=>new Be(a.totalValue,"EUR").getDecimal());return{labels:i,datasets:[{label:"Portfolio Value",backgroundColor:"rgba(75, 192, 192, 0.2)",borderColor:"rgba(75, 192, 192, 1)",data:o,fill:!0,tension:.4}]}}),s={responsive:!0,maintainAspectRatio:!1,scales:{y:{ticks:{callback:function(r){return typeof r=="number"?new Be(r*100,"EUR").format("de-DE"):r}}}},plugins:{legend:{display:!1}}};return Mn(async()=>{try{e.value=await od.getAll()}catch(r){console.error("Error fetching valuation data:",r)}}),(r,i)=>(q(),J("div",DA,[qe($e(cb),{data:n.value,options:s},null,8,["data"])]))}}),$A=pn(RA,[["__scopeId","data-v-7346e7bf"]]);class Ln{static BASE_URL="https://api.scryfall.com";static lastRequestTime=0;static RATE_LIMIT_DELAY=100;static async enforceRateLimit(){const n=Date.now()-this.lastRequestTime;if(n<this.RATE_LIMIT_DELAY){const s=this.RATE_LIMIT_DELAY-n;await new Promise(r=>setTimeout(r,s))}this.lastRequestTime=Date.now()}static async getPriceById(e){try{await this.enforceRateLimit();const n=await fetch(`${this.BASE_URL}/cards/${e}`);if(!n.ok)return null;const r=(await n.json()).prices?.eur;return r?Be.parse(r,"EUR"):null}catch(n){return console.error("Error fetching price from Scryfall:",n),null}}static async getPriceBySetAndNumber(e,n){try{await this.enforceRateLimit();const s=await fetch(`${this.BASE_URL}/cards/${e}/${n}`);if(!s.ok)return null;const i=(await s.json()).prices?.eur;return i?Be.parse(i,"EUR"):null}catch(s){return console.error("Error fetching price from Scryfall:",s),null}}static async getImageUrlById(e){try{await this.enforceRateLimit();const n=await fetch(`${this.BASE_URL}/cards/${e}`);if(!n.ok)return null;const s=await n.json();return(s.layout==="transform"||s.layout==="modal_dfc"||s.layout==="reversible_card")&&s.card_faces&&s.card_faces.length===2?{front:s.card_faces[0].image_uris?.normal||s.card_faces[0].image_uris?.large||s.card_faces[0].image_uris?.small||"",back:s.card_faces[1].image_uris?.normal||s.card_faces[1].image_uris?.large||s.card_faces[1].image_uris?.small||"",layout:s.layout}:s.image_uris?{front:s.image_uris.normal||s.image_uris.large||s.image_uris.small||"",back:"",layout:s.layout||"normal"}:s.card_faces&&s.card_faces.length>0&&s.card_faces[0].image_uris?{front:s.card_faces[0].image_uris.normal||s.card_faces[0].image_uris.large||s.card_faces[0].image_uris.small||"",back:"",layout:s.layout||"normal"}:{front:s.image_uris?.normal||s.image_uris?.large||s.image_uris?.small||"",back:"",layout:s.layout||"normal"}}catch(n){return console.error("Error fetching image from Scryfall:",n),null}}static async getImageUrlBySetAndNumber(e,n){try{await this.enforceRateLimit();const s=await fetch(`${this.BASE_URL}/cards/${e}/${n}`);if(!s.ok)return null;const r=await s.json();return(r.layout==="transform"||r.layout==="modal_dfc"||r.layout==="reversible_card")&&r.card_faces&&r.card_faces.length===2?{front:r.card_faces[0].image_uris?.normal||r.card_faces[0].image_uris?.large||r.card_faces[0].image_uris?.small||"",back:r.card_faces[1].image_uris?.normal||r.card_faces[1].image_uris?.large||r.card_faces[1].image_uris?.small||"",layout:r.layout}:r.image_uris?{front:r.image_uris.normal||r.image_uris.large||r.image_uris.small||"",back:"",layout:r.layout||"normal"}:r.card_faces&&r.card_faces.length>0&&r.card_faces[0].image_uris?{front:r.card_faces[0].image_uris.normal||r.card_faces[0].image_uris.large||r.card_faces[0].image_uris.small||"",back:"",layout:r.layout||"normal"}:{front:r.image_uris?.normal||r.image_uris?.large||r.image_uris?.small||"",back:"",layout:r.layout||"normal"}}catch(s){return console.error("Error fetching image from Scryfall:",s),null}}static async getByCardmarketId(e){try{await this.enforceRateLimit();const n=await fetch(`${this.BASE_URL}/cards/cardmarket/${e}`);if(!n.ok){console.error(`Scryfall API error for cardmarket_id ${e}: ${n.status} ${n.statusText}`);try{const s=await n.text();console.error(`Scryfall API error details: ${s}`)}catch{console.error("Could not read error response body")}return null}return await n.json()}catch(n){return console.error("Error fetching card by Cardmarket ID from Scryfall:",n),null}}static async getByCardmarketIds(e){try{if(!e||e.length===0)return[];if(e.length===1){const r=await this.getByCardmarketId(e[0]);return r?[r]:[]}await this.enforceRateLimit();const n=await fetch(`${this.BASE_URL}/cards/collection`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifiers:e.map(r=>({cardmarket_id:r}))})});if(!n.ok){console.error(`Scryfall API error for batch cardmarket_ids: ${n.status} ${n.statusText}`);try{const r=await n.text();console.error(`Scryfall API error details: ${r}`)}catch{console.error("Could not read error response body")}return await this.getByCardmarketIdsIndividually(e)}return(await n.json()).data||[]}catch(n){return console.error("Error fetching cards by Cardmarket IDs from Scryfall:",n),await this.getByCardmarketIdsIndividually(e)}}static async getPricesByIds(e){try{if(!e||e.length===0)return[];if(e.length===1){const i=await this.getPriceById(e[0]);return i?[{[e[0]]:{eur:i.getCents()/100}}]:[]}await this.enforceRateLimit();const n=await fetch(`${this.BASE_URL}/cards/collection`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifiers:e.map(i=>({id:i}))})});if(!n.ok){console.error(`Scryfall API error for batch price fetching: ${n.status} ${n.statusText}`);try{const i=await n.text();console.error(`Scryfall API error details: ${i}`)}catch{console.error("Could not read error response body")}return await this.getPricesByIdsIndividually(e)}const s=await n.json(),r=[];if(s.data&&Array.isArray(s.data))for(const i of s.data)i.id&&i.prices&&r.push({[i.id]:{eur:i.prices.eur?parseFloat(i.prices.eur):void 0,eur_foil:i.prices.eur_foil?parseFloat(i.prices.eur_foil):void 0}});return r}catch(n){return console.error("Error fetching prices by Scryfall IDs from Scryfall:",n),await this.getPricesByIdsIndividually(e)}}static async getPricesByIdsIndividually(e){const n=[];for(const s of e)try{const r=await fetch(`${this.BASE_URL}/cards/${s}`);if(r.ok){const i=await r.json();i.prices&&n.push({[s]:{eur:i.prices.eur?parseFloat(i.prices.eur):void 0,eur_foil:i.prices.eur_foil?parseFloat(i.prices.eur_foil):void 0}})}}catch(r){console.error(`Error fetching price for card ${s}:`,r)}return n}static async getByCardmarketIdsIndividually(e){const n=[];for(const s of e){const r=await this.getByCardmarketId(s);r&&n.push(r)}return n}static async hydrateCard(e){try{if(e.scryfall_id){await this.enforceRateLimit();const n=await fetch(`${this.BASE_URL}/cards/${e.scryfall_id}`);if(n.ok)return await n.json()}if(e.setCode&&e.collectorNumber){await this.enforceRateLimit();const n=await fetch(`${this.BASE_URL}/cards/${e.setCode}/${e.collectorNumber}`);if(n.ok)return await n.json()}if(e.name&&e.setCode){await this.enforceRateLimit();let n=await fetch(`${this.BASE_URL}/cards/named?exact=${encodeURIComponent(e.name)}&set=${encodeURIComponent(e.setCode)}`);if(n.ok)return await n.json();if(e.version&&(await this.enforceRateLimit(),n=await fetch(`${this.BASE_URL}/cards/named?exact=${encodeURIComponent(e.name)}&set=${encodeURIComponent(e.setCode)}&include_variations=true`),n.ok))return await n.json();if(await this.enforceRateLimit(),n=await fetch(`${this.BASE_URL}/cards/named?fuzzy=${encodeURIComponent(e.name)}&set=${encodeURIComponent(e.setCode)}`),n.ok)return await n.json()}return null}catch(n){return console.error("Error hydrating card with Scryfall data:",n),null}}}class FA{static BATCH_SIZE=75;static async syncPrices(e){try{const n=new Date,s=n.toISOString().split("T")[0],r=await Bn.getAll(),i=r.length;let o=0;for(let a=0;a<r.length;a+=this.BATCH_SIZE){const l=r.slice(a,a+this.BATCH_SIZE),c=l.map(u=>u.id);try{const u=await Ln.getPricesByIds(c);for(const f of u)for(const[p,m]of Object.entries(f)){if(m.eur!==void 0){const v=Be.parse(m.eur.toString(),"EUR"),_="nonfoil",S={id:`${p}:scryfall:${_}:${s}`,cardId:p,provider:"scryfall",finish:_,date:s,currency:"EUR",priceCent:v.getCents(),asOf:n,createdAt:n};await we.price_points.put(S)}if(m.eur_foil!==void 0){const v=Be.parse(m.eur_foil.toString(),"EUR"),k={id:`${p}:scryfall:foil:${s}`,cardId:p,provider:"scryfall",finish:"foil",date:s,currency:"EUR",priceCent:v.getCents(),asOf:n,createdAt:n};await we.price_points.put(k)}o++,e&&e(o,i)}}catch(u){console.error(`Error syncing prices for batch starting at index ${a}:`,u),o+=l.length,e&&e(o,i)}}try{await Gs.createValuationSnapshot(),console.log("Valuation snapshot created after price update")}catch(a){console.error("Error creating valuation snapshot after price update:",a)}}catch(n){throw console.error("Error syncing prices:",n),n}}static async syncPriceForCard(e){try{const n=new Date,s=n.toISOString().split("T")[0],r=await Bn.getById(e);if(!r){console.warn(`Card with ID ${e} not found`);return}const i=await Ln.getPricesByIds([r.id]);if(i.length>0){const a=i[0][r.id];if(a.eur!==void 0){const l=Be.parse(a.eur.toString(),"EUR"),u={id:`${r.id}:scryfall:nonfoil:${s}`,cardId:r.id,provider:"scryfall",finish:"nonfoil",date:s,currency:"EUR",priceCent:l.getCents(),asOf:n,createdAt:n};await we.price_points.put(u)}if(a.eur_foil!==void 0){const l=Be.parse(a.eur_foil.toString(),"EUR"),u={id:`${r.id}:scryfall:foil:${s}`,cardId:r.id,provider:"scryfall",finish:"foil",date:s,currency:"EUR",priceCent:l.getCents(),asOf:n,createdAt:n};await we.price_points.put(u)}}}catch(n){throw console.error(`Error syncing price for card ${e}:`,n),n}}static async needsPriceUpdate(){try{const e=await we.price_points.orderBy("asOf").last();if(!e)return!0;const n=new Date,s=new Date(e.asOf);return(n.getTime()-s.getTime())/(1e3*60*60)>=24}catch(e){return console.error("Error checking if price update is needed:",e),!0}}static async needsPriceUpdateForCard(e){try{const n=await ad.getLatestPriceForCard(e);if(!n)return!0;const s=new Date,r=new Date(n.asOf);return(s.getTime()-r.getTime())/(1e3*60*60)>=24}catch(n){return console.error(`Error checking if price update is needed for card ${e}:`,n),!0}}static async getLatestPriceForCard(e){try{const n=await ad.getLatestPriceForCard(e);return n?{price:n.price.getCents(),asOf:n.asOf,provider:n.provider}:null}catch(n){return console.error(`Error getting latest price for card ${e}:`,n),null}}}class fi{static async needsPriceUpdate(){try{const e=await Br.get("last_price_update_timestamp");if(!e)return!0;const n=Date.now(),s=new Date(e).getTime();return(n-s)/(1e3*60*60)>=24}catch(e){return console.error("Error checking if price update is needed:",e),!0}}static async schedulePriceUpdate(){try{await this.needsPriceUpdate()&&await this.updatePrices()}catch(e){throw console.error("Error scheduling price update:",e),e}}static async updatePrices(){const e=_i(),n=e.addImport({id:`price-update-${Date.now()}`,type:"pricing",name:"Price Updates",status:"pending",progress:0,totalItems:0,processedItems:0});try{await FA.syncPrices((r,i)=>{e.updateImport(n,{status:"processing",progress:Math.round(r/i*100),totalItems:i,processedItems:r})});const s=new Date().toISOString();await Br.set("last_price_update_timestamp",s),await Gs.createValuationSnapshot(),e.completeImport(n),console.log(`Prices updated successfully at ${s}`)}catch(s){throw console.error("Error updating prices:",s),e.completeImport(n,s instanceof Error?s.message:"Unknown error"),s}}static async getLastUpdateTime(){try{const e=await Br.get("last_price_update_timestamp");return e?new Date(e):null}catch(e){return console.error("Error getting last update time:",e),null}}static async getNextUpdateTime(){try{const e=await this.getLastUpdateTime();return e?new Date(e.getTime()+1440*60*1e3):new Date}catch(e){return console.error("Error calculating next update time:",e),null}}}const Eg=he(null),Og=he(null),_r=he(!1);function LA(){const t=r=>r?r.toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Never",e=async()=>{try{Eg.value=await fi.getLastUpdateTime(),Og.value=await fi.getNextUpdateTime()}catch(r){console.error("Error updating price info:",r)}};return{lastUpdate:Eg,nextUpdate:Og,isUpdating:_r,formatDate:t,updatePriceInfo:e,checkAndScheduleUpdate:async()=>{if(!_r.value){_r.value=!0;try{await fi.needsPriceUpdate()&&(await fi.schedulePriceUpdate(),await Gs.createValuationSnapshot()),await e()}catch(r){console.error("Error scheduling price update:",r)}finally{_r.value=!1}}},forceUpdatePrices:async()=>{if(!_r.value){_r.value=!0;try{await fi.updatePrices(),await Gs.createValuationSnapshot(),await e()}catch(r){throw console.error("Error updating prices:",r),r}finally{_r.value=!1}}}}}const BA={class:"home"},jA={class:"row"},NA={class:"col-lg-9"},zA={class:"card glass-panel mb-4"},UA={class:"card-body"},qA={class:"col-lg-3"},WA={class:"card glass-panel mb-4"},VA={class:"card-body"},HA={class:"small text-muted mb-1"},KA={class:"col-md-3"},YA={class:"d-flex justify-content-between"},GA=["disabled"],XA={class:"card glass-panel"},QA={class:"card-body"},JA={class:"small"},ZA={class:"d-flex justify-content-between"},eI={class:"fw-medium"},tI={class:"d-flex justify-content-between"},nI={class:"fw-medium"},sI={class:"d-flex justify-content-between"},rI={class:"row g-4"},iI={class:"col-lg-3 col-md-6"},oI={class:"card glass-panel h-100"},aI={class:"card-body"},lI={class:"col-lg-3 col-md-6"},cI={class:"card glass-panel h-100"},uI={class:"card-body"},dI={class:"col-lg-3 col-md-6"},fI={class:"card glass-panel h-100"},hI={class:"card-body"},pI={class:"stat-value text-success"},gI={class:"col-lg-3 col-md-6"},mI={class:"card glass-panel h-100"},yI={class:"card-body"},vI={class:"stat-value text-danger"},bI={class:"row mt-4"},_I={class:"col-12"},wI={class:"card glass-panel"},xI={class:"card-body"},kI={class:"row"},SI={class:"col-md-3"},CI={class:"stat-value text-success"},PI={class:"col-md-3"},AI={class:"stat-value text-danger"},II={class:"col-md-3"},EI={class:"stat-value text-danger"},OI={class:"col-md-3"},MI={class:"stat-value text-danger"},TI=Ze({__name:"HomeView",setup(t){const e=Xd(),n=uk(),s=dk(),{formatDate:r,checkAndScheduleUpdate:i,forceUpdatePrices:o,lastUpdate:a,nextUpdate:l,isUpdating:c}=LA(),u=he("0.00"),f=he("0.00"),p=he("0.00"),m=he("0.00"),v=he("0.00"),_=he("0.00"),k=he("0.00"),S=he("0.00"),P=he("0.00"),E=he("0.00"),C=he("0.00"),I=V=>V.format("de-DE"),T=async()=>{try{await e.loadCards(),await n.loadHoldings(),await s.loadTransactions();const V=await Gs.calculatePortfolioValue(),A=await Gs.calculateTotalCostBasis(),Z=await Gs.calculateUnrealizedPnL(),K=await Gs.calculateRealizedPnL();u.value=I(V),f.value=I(A),p.value=I(Z),m.value=I(K);const j=await Er.getTotalRevenue(),de=await Er.getTotalCosts(),ge=await Er.getTotalFees(),Ae=await Er.getTotalShippingCosts("purchase"),Se=await Er.getTotalShippingCosts("sale"),Pe=await Er.getTotalNetProfit();v.value=I(j),_.value=I(de),S.value=I(j),P.value=I(de),E.value=I(ge),C.value=I(Ae.subtract(Se)),k.value=I(Pe)}catch(V){console.error("Error loading dashboard data:",V)}},G=async()=>{try{await o(),await T()}catch(V){console.error("Error refreshing prices:",V)}};return Mn(async()=>{await T(),setTimeout(async()=>{await i()},0)}),(V,A)=>(q(),J("div",BA,[w("div",jA,[A[6]||(A[6]=w("div",{class:"col-12"},[w("h1",{class:"mb-4"},"MTG Collection Tracker")],-1)),w("div",NA,[w("div",zA,[w("div",UA,[A[0]||(A[0]=w("h5",{class:"card-title"},"Portfolio Value Over Time",-1)),qe($A)])])]),w("div",qA,[w("div",WA,[w("div",VA,[A[1]||(A[1]=w("h5",{class:"card-title"},"Price Updates",-1)),w("div",HA," Last: "+oe($e(r)($e(a)))+" | Next: "+oe($e(r)($e(l))),1),w("div",KA,[w("div",YA,[w("button",{onClick:G,class:"btn btn-glass-panel",disabled:$e(c)},oe($e(c)?"Updating...":"Refresh Now"),9,GA)])])])]),w("div",XA,[w("div",QA,[A[5]||(A[5]=w("h5",{class:"card-title"},"Quick Stats",-1)),w("div",JA,[w("div",ZA,[A[2]||(A[2]=w("span",{class:"text-muted"},"Portfolio Value:",-1)),w("span",eI,oe(u.value),1)]),w("div",tI,[A[3]||(A[3]=w("span",{class:"text-muted"},"Total Cost:",-1)),w("span",nI,oe(f.value),1)]),w("div",sI,[A[4]||(A[4]=w("span",{class:"text-muted"},"Net Profit/Loss:",-1)),w("span",{class:Pt(["fw-medium",parseFloat(k.value)>=0?"text-success":"text-danger"])},oe(k.value),3)])])])])])]),w("div",rI,[w("div",iI,[w("div",oI,[w("div",aI,[A[7]||(A[7]=w("h5",{class:"card-title"},"Unrealized P/L",-1)),w("p",{class:Pt(["stat-value",parseFloat(p.value)>=0?"positive":"negative"])},oe(p.value),3)])])]),w("div",lI,[w("div",cI,[w("div",uI,[A[8]||(A[8]=w("h5",{class:"card-title"},"Realized P/L",-1)),w("p",{class:Pt(["stat-value",parseFloat(m.value)>=0?"positive":"negative"])},oe(m.value),3)])])]),w("div",dI,[w("div",fI,[w("div",hI,[A[9]||(A[9]=w("h5",{class:"card-title"},"Total Revenue",-1)),w("p",pI,oe(v.value),1)])])]),w("div",gI,[w("div",mI,[w("div",yI,[A[10]||(A[10]=w("h5",{class:"card-title"},"Total Costs",-1)),w("p",vI,oe(_.value),1)])])])]),w("div",bI,[w("div",_I,[w("div",wI,[w("div",xI,[A[15]||(A[15]=w("h5",{class:"card-title"},"Financial Breakdown",-1)),w("div",kI,[w("div",SI,[A[11]||(A[11]=w("h6",{class:"text-muted"},"Sales Revenue",-1)),w("p",CI,oe(S.value),1)]),w("div",PI,[A[12]||(A[12]=w("h6",{class:"text-muted"},"Purchase Costs",-1)),w("p",AI,oe(P.value),1)]),w("div",II,[A[13]||(A[13]=w("h6",{class:"text-muted"},"Fees & Commission",-1)),w("p",EI,oe(E.value),1)]),w("div",OI,[A[14]||(A[14]=w("h6",{class:"text-muted"},"Shipping Costs",-1)),w("p",MI,oe(C.value),1)])])])])])])]))}}),DI=pn(TI,[["__scopeId","data-v-1bfe579a"]]),RI={class:"data-import-view"},$I={class:"nav nav-tabs"},FI={class:"nav-item"},LI={class:"nav-item"},BI={class:"nav-item"},jI={class:"tab-content pt-3"},NI=Ze({__name:"DataImportView",setup(t){return(e,n)=>{const s=Si("router-link"),r=Si("router-view");return q(),J("div",RI,[n[3]||(n[3]=w("h1",null,"Data Import",-1)),n[4]||(n[4]=w("p",null,"Import your collection and price data from various sources.",-1)),w("ul",$I,[w("li",FI,[qe(s,{to:"/import/cardmarket",class:"nav-link","active-class":"active"},{default:at(()=>[...n[0]||(n[0]=[bt(" Cardmarket CSV ",-1)])]),_:1})]),w("li",LI,[qe(s,{to:"/import/mtgjson",class:"nav-link","active-class":"active"},{default:at(()=>[...n[1]||(n[1]=[bt(" MTGJSON Prices ",-1)])]),_:1})]),w("li",BI,[qe(s,{to:"/import/price-guide",class:"nav-link","active-class":"active"},{default:at(()=>[...n[2]||(n[2]=[bt(" Cardmarket Price Guide ",-1)])]),_:1})])]),w("div",jI,[qe(r)])])}}}),zI=pn(NI,[["__scopeId","data-v-fe631b93"]]);function UI(t){return new Worker("/mtg-pwa/assets/cardmarketCsv-CzsXSO1k.js",{name:t?.name})}const mn=t=>t.toLowerCase().normalize("NFKD").replace(new RegExp("\\p{Diacritic}","gu"),"").replace(/[\s-]+/g," ").replace(/[:'"]/g,"").trim();function ki(t){const e=new Map;for(const n of t)e.set(mn(n.name),n);return{byName:e}}async function Mg(t){const e=t.trim(),n=mn(e),s=await Tg(),i=(await qI()).get(n);if(i)return console.log(`Set code resolved from alias: ${e} -> ${i}`),i;const o=s.byName.get(n);if(o)return console.log(`Set code resolved from exact match: ${e} -> ${o.code}`),await xn(n,o.code),o.code;if(/^commander:\s*/i.test(e)&&/: extras$/i.test(e)){const c=e.replace(/^commander:\s*/i,"").replace(/: extras$/i,"").trim(),u=s.byName.get(mn(`${c} Commander`));if(u)return console.log(`Set code resolved from commander + extras nested: ${e} -> ${u.code}`),await xn(n,u.code),u.code;const f=s.byName.get(mn(c));if(f)return console.log(`Set code resolved from commander + extras nested (base): ${e} -> ${f.code}`),await xn(n,f.code),f.code}if(/^commander:\s*/i.test(e)){const c=e.replace(/^commander:\s*/i,"").trim(),u=s.byName.get(mn(`${c} Commander`));if(u)return console.log(`Set code resolved from commander rewrite (commander): ${e} -> ${u.code}`),await xn(n,u.code),u.code;const f=s.byName.get(mn(c));if(f)return console.log(`Set code resolved from commander rewrite (base): ${e} -> ${f.code}`),await xn(n,f.code),f.code}if(/: extras$/i.test(e)){const c=mn(e.replace(/: extras$/i,"")),u=s.byName.get(c);if(u)return console.log(`Set code resolved from extras suffix: ${e} -> ${u.code}`),await xn(n,u.code),u.code}if(/^universes beyond:\s*/i.test(e)){const c=e.replace(/^universes beyond:\s*/i,"").trim();if(/: extras$/i.test(c)){const f=mn(c.replace(/: extras$/i,"")),p=s.byName.get(f);if(p)return console.log(`Set code resolved from universes beyond + extras: ${e} -> ${p.code}`),await xn(n,p.code),p.code}const u=s.byName.get(mn(c));if(u)return console.log(`Set code resolved from universes beyond: ${e} -> ${u.code}`),await xn(n,u.code),u.code}if(/^magic: the gathering -\s*/i.test(e)){const c=e.replace(/^magic: the gathering -\s*/i,"").trim();if(/: extras$/i.test(c)){const f=mn(c.replace(/: extras$/i,"")),p=s.byName.get(f);if(p)return console.log(`Set code resolved from magic: the gathering - extras: ${e} -> ${p.code}`),await xn(n,p.code),p.code}const u=s.byName.get(mn(c));if(u)return console.log(`Set code resolved from magic: the gathering -: ${e} -> ${u.code}`),await xn(n,u.code),u.code}if(/^secret lair drop series:/i.test(e)){const c=e.replace(/^secret lair drop series:/i,"").trim();if(/: extras$/i.test(c)){const f=mn(c.replace(/: extras$/i,"")),p=s.byName.get(f);if(p)return console.log(`Set code resolved from secret lair drop series + extras: ${e} -> ${p.code}`),await xn(n,p.code),p.code}const u=s.byName.get(mn(c));if(u)return console.log(`Set code resolved from secret lair drop series: ${e} -> ${u.code}`),await xn(n,u.code),u.code}console.log(`Set code unresolved: ${e}`),await ub();const l=(await Tg()).byName.get(n);return l?(console.log(`Set code resolved from fresh exact match: ${e} -> ${l.code}`),l.code):(await xn(n,null),null)}async function Tg(){try{const t=Date.now()-6048e5,e=await we.settings.get("scryfall_sets_cache");return e&&e.v&&e.v.fetchedAt>t?(console.log("Using cached Scryfall sets data"),ki(e.v.sets)):(console.log("Refreshing Scryfall sets cache (no cache or old cache)"),await ub())}catch(t){console.error("Error in getSetIndex:",t);try{const e=await we.settings.get("scryfall_sets_cache");if(e&&e.v)return console.log("Using old cached Scryfall sets data due to error"),ki(e.v.sets)}catch(e){console.error("Error accessing cached Scryfall sets data:",e)}return console.log("Returning empty Scryfall sets index"),ki([])}}async function ub(){try{console.log("Fetching Scryfall sets data...");const t=await fetch("https://api.scryfall.com/sets");if(!t.ok)throw new Error(`Failed to fetch sets: ${t.status} ${t.statusText}`);const n=(await t.json()).data||[];return console.log(`Fetched ${n.length} Scryfall sets`),await we.settings.put({k:"scryfall_sets_cache",v:{sets:n,fetchedAt:Date.now()},createdAt:new Date,updatedAt:new Date}),ki(n)}catch(t){console.error("Error refreshing Scryfall sets cache:",t);try{const e=await we.settings.get("scryfall_sets_cache");if(e&&e.v)return console.log("Using old cached Scryfall sets data due to fetch error"),ki(e.v.sets)}catch(e){console.error("Error accessing cached Scryfall sets data:",e)}return console.log("Returning empty Scryfall sets index due to errors"),ki([])}}async function qI(){const t=new Map,e=await we.settings.get("set_code_aliases");if(e&&e.v)for(const[n,s]of Object.entries(e.v))t.set(n,s);return t}async function xn(t,e){try{const n=mn(t),s=await we.settings.get("set_code_aliases");let r={};s&&s.v&&(r={...s.v}),r[n]=e,await we.settings.put({k:"set_code_aliases",v:r,createdAt:s?.createdAt||new Date,updatedAt:new Date})}catch(n){console.error("Error storing set code alias:",n)}}const Yt=[];for(let t=0;t<256;++t)Yt.push((t+256).toString(16).slice(1));function WI(t,e=0){return(Yt[t[e+0]]+Yt[t[e+1]]+Yt[t[e+2]]+Yt[t[e+3]]+"-"+Yt[t[e+4]]+Yt[t[e+5]]+"-"+Yt[t[e+6]]+Yt[t[e+7]]+"-"+Yt[t[e+8]]+Yt[t[e+9]]+"-"+Yt[t[e+10]]+Yt[t[e+11]]+Yt[t[e+12]]+Yt[t[e+13]]+Yt[t[e+14]]+Yt[t[e+15]]).toLowerCase()}let Su;const VI=new Uint8Array(16);function HI(){if(!Su){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Su=crypto.getRandomValues.bind(crypto)}return Su(VI)}const KI=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Dg={randomUUID:KI};function YI(t,e,n){t=t||{};const s=t.random??t.rng?.()??HI();if(s.length<16)throw new Error("Random bytes length must be >= 16");return s[6]=s[6]&15|64,s[8]=s[8]&63|128,WI(s)}function gl(t,e,n){return Dg.randomUUID&&!t?Dg.randomUUID():YI(t)}class Za{static async importCardmarketTransactions(e){const n=_i(),s=gl();n.addImport({id:s,type:"cardmarket",name:"Cardmarket Transactions",status:"pending",progress:0,totalItems:e.length,processedItems:0});try{const r=new Date;for(let i=0;i<e.length;i++){const o=e[i];n.updateImport(s,{status:"processing",processedItems:i+1,progress:Math.round((i+1)/e.length*100)});const a=`cardmarket:${o.reference}:${o.lineNumber}`;if(await we.transactions.where("externalRef").equals(a).first())continue;const c=Be.parse(o.amount,"EUR"),u={id:`tx-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,kind:c.isPositive()?"SELL":"BUY",quantity:1,unitPrice:c.getCents(),fees:0,shipping:0,currency:"EUR",source:"cardmarket",externalRef:a,happenedAt:new Date(o.date),createdAt:r,updatedAt:r};await Pn.add(u)}n.completeImport(s)}catch(r){throw console.error("Error importing Cardmarket transactions:",r),n.completeImport(s,r.message),r}}static async importCardmarketOrders(e){const n=_i(),s=gl();n.addImport({id:s,type:"cardmarket",name:"Cardmarket Orders",status:"pending",progress:0,totalItems:e.length,processedItems:0});try{const r=new Date;for(let i=0;i<e.length;i++){const o=e[i];n.updateImport(s,{status:"processing",processedItems:i+1,progress:Math.round((i+1)/e.length*100)});const a=`cardmarket:order:${o.orderId}:${o.lineNumber}`;if(await we.transactions.where("externalRef").equals(a).first())continue;const c=Be.parse(o.merchandiseValue,"EUR"),u=Be.parse(o.shipmentCosts,"EUR"),f=Be.parse(o.commission,"EUR"),p={id:`order-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,kind:o.direction==="sale"?"SELL":"BUY",quantity:parseInt(o.articleCount)||1,unitPrice:Math.round(c.getCents()/(parseInt(o.articleCount)||1)),fees:f.getCents(),shipping:u.getCents(),currency:"EUR",source:"cardmarket",externalRef:a,happenedAt:new Date(o.dateOfPurchase),createdAt:r,updatedAt:r};if(await Pn.add(p),o.direction==="purchase"){const m=await we.transactions.where("externalRef").startsWith(`cardmarket:article:${o.orderId}:`).toArray();for(const v of m)if(v.lotId){const _=await $t.getById(v.lotId);if(_){const k=parseInt(o.articleCount)||1,S=v.quantity/k,P=Er.calculateTrueAcquisitionCost(c.getCents()/100,u.getCents()/100,f.getCents()/100,k),E=Math.round(u.getCents()*S/v.quantity),C=Math.round(f.getCents()*S/v.quantity);await $t.update(_.id,{acquisitionPriceCent:P,acquisitionFeesCent:C,acquisitionShippingCent:E,totalAcquisitionCostCent:P+C+E,updatedAt:r})}}}if(o.direction==="sale"){const m=await we.transactions.where("externalRef").startsWith(`cardmarket:article:${o.orderId}:`).toArray();for(const v of m)if(v.lotId){const _=await $t.getById(v.lotId);if(_){const k=parseInt(o.articleCount)||1,S=v.quantity/k,P=Math.round(c.getCents()/k),E=Math.round(f.getCents()*S/v.quantity),C=Math.round(u.getCents()*S/v.quantity);await $t.update(_.id,{salePriceCent:P,saleFeesCent:E,saleShippingCent:C,totalSaleRevenueCent:P-E+C,updatedAt:r})}}}}n.completeImport(s)}catch(r){throw console.error("Error importing Cardmarket orders:",r),n.completeImport(s,r.message),r}}static async importCardmarketArticles(e){const n=_i(),s=gl();n.addImport({id:s,type:"cardmarket",name:"Cardmarket Articles",status:"pending",progress:0,totalItems:e.length,processedItems:0});try{const r=new Date;for(let i=0;i<e.length;i++){const o=e[i];n.updateImport(s,{status:"processing",processedItems:i+1,progress:Math.round((i+1)/e.length*100)});const{cardId:a,cardData:l}=await this.resolveCard(o),c=Be.parse(o.price,"EUR");a&&await this.ensureCardInDb(a,l,o);let u;o.direction==="purchase"&&(u=await this.getOrCreateLotForPurchase(a,c,o)),await this.createTransactionForArticle(o,a,u,c,r)}n.completeImport(s)}catch(r){throw console.error("Error importing Cardmarket articles:",r),n.completeImport(s,r.message),r}}static async resolveCard(e){let n=null,s=null;if(e.productId){const r=e.productId.split(" | ").map(i=>i.trim());if(r.length===1)n=await Ln.getByCardmarketId(r[0]),console.log(JSON.stringify({product_ids:r,resolved_via:"cardmarket_id",cardmarket_id:r[0],final_uri:`/cards/cardmarket/${r[0]}`}));else if(r.length>1){const i=await Ln.getByCardmarketIds(r);i&&i.length>0&&(n=i[0],console.log(JSON.stringify({product_ids:r,resolved_via:"cardmarket_id",cardmarket_id:r[0],final_uri:"/cards/collection"})))}s=n?.id||null}if(!s){const r=await Mg(e.expansion),i=this.extractCollectorNumber(e.name);let o=e.name,a=null;const l=e.name.match(/^(.+?)\s*\((V\.\d+)\)$/i);l&&(o=l[1].trim(),a=l[2]),console.log(JSON.stringify({product_ids:e.productId?e.productId.split(" | ").map(c=>c.trim()):[],resolved_via:"set+cn",set_code:r,collector_number:i,final_uri:r?`/cards/${r}/${i}`:""})),n=await Ln.hydrateCard({name:o,setCode:r||e.expansion,collectorNumber:i,version:a}),s=n?.id||null,s||console.log(JSON.stringify({product_ids:e.productId?e.productId.split(" | ").map(c=>c.trim()):[],resolved_via:"none",set_code:null,collector_number:"",final_uri:"",name:e.name,expansion:e.expansion}))}return{cardId:s,cardData:n}}static extractCollectorNumber(e){const n=[/-\s*(\d+[a-zA-Z]*)\s*-/i,/-\s*([IVXLCDM]+)\s*-/i,/\s+(\d+[a-zA-Z]*)\s*$/i,/\((\d+[a-zA-Z]*)\)/i];for(const s of n){const r=e.match(s);if(r)return r[1]}return""}static async ensureCardInDb(e,n,s){if(await Bn.getById(e))await this.updatePriceForCard(e);else{const i=n||await Ln.hydrateCard({scryfall_id:e,name:s.name,setCode:s.expansion,collectorNumber:""}),o=await Ln.getImageUrlById(e),a={id:e,oracleId:i?.oracle_id||n?.oracle_id||"",name:s.name,set:i?.set_name||n?.set_name||s.expansion,setCode:i?.set||n?.set||await Mg(s.expansion)||"",number:i?.collector_number||n?.collector_number||this.extractCollectorNumber(s.name)||"",lang:i?.lang||n?.lang||"en",finish:"nonfoil",layout:o?.layout||"normal",imageUrl:o?.front||"",imageUrlBack:o?.back||"",cardmarketId:typeof i?.cardmarket_id=="number"?i.cardmarket_id:void 0,createdAt:new Date,updatedAt:new Date};await Bn.add(a),await this.updatePriceForCard(e)}}static async updatePriceForCard(e){try{const n=new Date,s=n.toISOString().split("T")[0],r=`${e}:scryfall:${s}`;if(!await we.price_points.get(r)){const o=await Ln.getPriceById(e);if(o){const a={id:r,cardId:e,provider:"scryfall",finish:"nonfoil",date:n.toISOString().split("T")[0],currency:"EUR",priceCent:o.getCents(),asOf:n,createdAt:n};await we.price_points.put(a)}}}catch(n){console.error(`Error checking/updating price for existing card ${e}:`,n)}}static async getOrCreateLotForPurchase(e,n,s){const r=new Date,i=`cardmarket:lot:${s.shipmentId}:${s.lineNumber}`,o=await $t.getByExternalRef(i);let a=null;if(o.length>0)a=o[0];else if(e){const l=await $t.getByCardId(e);for(const c of l)if(!(await Pn.getByLotId(c.id)).some(p=>p.kind==="BUY")){a=c;break}}if(a)return await $t.update(a.id,{unitCost:n.getCents(),source:"cardmarket",purchasedAt:new Date(s.dateOfPurchase),updatedAt:r,acquisitionPriceCent:n.getCents(),acquisitionFeesCent:0,acquisitionShippingCent:0,totalAcquisitionCostCent:n.getCents()}),a.id;{const l=`lot-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,c={id:l,cardId:e||"",quantity:parseInt(s.amount)||1,unitCost:n.getCents(),condition:"",language:"",foil:!1,finish:"nonfoil",source:"cardmarket",currency:"EUR",externalRef:i,purchasedAt:new Date(s.dateOfPurchase),acquisitionPriceCent:n.getCents(),acquisitionFeesCent:0,acquisitionShippingCent:0,totalAcquisitionCostCent:n.getCents(),createdAt:r,updatedAt:r};return await $t.add(c),l}}static async createTransactionForArticle(e,n,s,r,i){const o=`cardmarket:article:${e.shipmentId}:${e.lineNumber}`;if(await we.transactions.where("externalRef").equals(o).first())return;const l={id:`article-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,kind:e.direction==="sale"?"SELL":"BUY",cardId:n||void 0,lotId:s,quantity:parseInt(e.amount)||1,unitPrice:r.getCents(),fees:0,shipping:0,currency:"EUR",source:"cardmarket",externalRef:o,happenedAt:new Date(e.dateOfPurchase),createdAt:i,updatedAt:i};await Pn.add(l)}static async checkForExistingImports(e){const n=[];for(const s of e){const r=`cardmarket:article:${s.shipmentId}:${s.lineNumber}`,i=await we.transactions.where("externalRef").equals(r).first();n.push({article:s,exists:!!i})}return n}}const GI={class:"cardmarket-wizard"},XI={class:"wizard-progress"},QI={class:"step-number"},JI={class:"step-label"},ZI={class:"card"},eE={class:"card-body"},tE={class:"wizard-content"},nE={key:0,class:"step-content"},sE={class:"file-upload-section"},rE={class:"mb-3"},iE={key:0,class:"files-info"},oE={class:"file-list"},aE={class:"file-name"},lE={class:"file-type"},cE={class:"file-size"},uE={key:0,class:"error-messages"},dE={key:1,class:"step-content"},fE={key:0,class:"preview-stats"},hE={class:"stat"},pE={class:"stat-value"},gE={class:"stat"},mE={class:"stat-value"},yE={class:"stat"},vE={class:"stat-value"},bE={key:1,class:"preview-table-container"},_E={class:"preview-table-wrapper"},wE={class:"preview-table"},xE={key:0},kE={key:1},SE={key:2},CE={key:3},PE={key:4},AE={key:5},IE={key:6},EE={key:7},OE={key:8},ME={key:9},TE={key:10},DE={key:11},RE={key:12},$E={key:13},FE={key:14},LE={key:0},BE={key:1},jE={key:2},NE={key:3},zE={key:4},UE={key:5},qE={key:6},WE={key:7},VE={key:8},HE={key:9},KE={key:10},YE={key:11},GE={key:12},XE={key:13},QE={key:14},JE={key:0},ZE=["colspan"],eO={key:2,class:"invalid-rows-section"},tO={class:"invalid-rows"},nO={class:"row-number"},sO={class:"row-errors"},rO={key:0,class:"more-rows"},iO={key:2,class:"step-content"},oO={key:0,class:"conflicts-section"},aO={class:"conflicts-list"},lO={class:"flex-grow-1"},cO={class:"fw-medium"},uO={class:"small text-muted"},dO={key:1,class:"conflicts-section"},fO={class:"conflicts-list"},hO={class:"flex-grow-1"},pO={class:"fw-medium"},gO={class:"small text-muted"},mO={key:3,class:"step-content"},yO={class:"summary-stats"},vO={class:"stat"},bO={class:"stat-value"},_O={class:"stat"},wO={class:"stat-value"},xO={key:0,class:"stat"},kO={class:"stat-value"},SO={class:"summary-details"},CO={class:"summary-grid"},PO={class:"summary-item"},AO={class:"summary-value"},IO={class:"summary-item"},EO={class:"summary-value"},OO={class:"summary-item"},MO={class:"summary-value"},TO={key:0,class:"import-status error"},DO={class:"wizard-navigation pt-3"},RO=["disabled"],$O=["disabled"],FO=Ze({__name:"CardmarketImportWizard",setup(t){const e=[{key:"upload",title:"Upload"},{key:"preview",title:"Preview"},{key:"conflicts",title:"Conflicts"},{key:"summary",title:"Summary"}],n=he(0),s=he([]),r=he({}),i=he({}),o=he({}),a=he(!1),l=he(null),c=he({}),u=he([]),f=te=>{if(te===0)return"0 Bytes";const ee=1024,Y=["Bytes","KB","MB","GB"],Le=Math.floor(Math.log(te)/Math.log(ee));return parseFloat((te/Math.pow(ee,Le)).toFixed(2))+" "+Y[Le]},p=te=>new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(te/100),m=async te=>{const Y=te.target.files;if(!(!Y||Y.length===0)){u.value=[],s.value=Array.from(Y);try{for(const Le of s.value){if(!Le.name.endsWith(".csv")){u.value.push(`File ${Le.name} is not a CSV file.`);continue}const _e=await Le.text();r.value[Le.name]=_e,i.value[Le.name]=Ae(Le.name)}await v()}catch(Le){u.value.push("Failed to read the files: "+Le.message)}}},v=async()=>{try{o.value={};for(const[te,ee]of Object.entries(r.value)){const Y=i.value[te];if(Y==="unknown"){console.warn(`Skipping unknown file type: ${te}`);continue}const Le=new UI;let _e="",We="sale";switch(Y){case"transactions":_e="parseTransactions";break;case"sold-orders":_e="parseOrders",We="sale";break;case"purchased-orders":_e="parseOrders",We="purchase";break;case"sold-articles":_e="parseArticles",We="sale";break;case"purchased-articles":_e="parseArticles",We="purchase";break}Le.postMessage({type:_e,data:ee,direction:We});const wt=await new Promise((gt,rt)=>{Le.onmessage=ae=>{const{type:Me,result:se,error:Fe}=ae.data;console.log("Worker response type:",Me),Fe?rt(new Error(Fe)):gt(se)},Le.onerror=ae=>{rt(ae)}});o.value[Y]=wt,Le.terminate()}await Se()}catch(te){u.value.push("Failed to parse CSV data: "+te.message)}},_=He(()=>n.value===0?s.value.length>0&&u.value.length===0:!0),k=async()=>{_.value&&(n.value===0&&await v(),n.value<e.length-1&&n.value++)},S=()=>{n.value>0&&n.value--},P=async()=>{if(!a.value){a.value=!0,l.value=null;try{for(const[te,ee]of Object.entries(o.value)){if(!ee||ee.length===0)continue;const Y=de(ee,te);switch(te){case"transactions":await Za.importCardmarketTransactions(Y);break;case"sold-orders":case"purchased-orders":await Za.importCardmarketOrders(Y);break;case"sold-articles":case"purchased-articles":await Za.importCardmarketArticles(Y);break}}l.value="Import completed successfully! Check the status indicator in the top right for details.",setTimeout(()=>{n.value=0,s.value=[],r.value={},i.value={},o.value={},u.value=[],a.value=!1,l.value=null},3e3)}catch(te){l.value="Failed to import data: "+te.message,a.value=!1}}},E=te=>de(o.value[te]||[],te),C=te=>de(o.value[te]||[],te).filter(Y=>Pe(te,Y)),I=()=>Object.values(o.value).reduce((te,ee)=>te+(ee?.length||0),0),T=()=>{let te=0;for(const[ee,Y]of Object.entries(o.value))Y&&(te+=de(Y,ee).length);return te},G=te=>{if(/^\d{2}\.\d{2}\.\d{4} \d{2}:\d{2}:\d{2}$/.test(te)){const Le=te.split(" ")[0].split("."),_e=parseInt(Le[0],10),We=parseInt(Le[1],10)-1,wt=parseInt(Le[2],10),gt=new Date(wt,We,_e);return gt.getFullYear()===wt&&gt.getMonth()===We&&gt.getDate()===_e}if(/^\d{2}\.\d{2}\.\d{4}$/.test(te)){const ee=te.split("."),Y=parseInt(ee[0],10),Le=parseInt(ee[1],10)-1,_e=parseInt(ee[2],10),We=new Date(_e,Le,Y);return We.getFullYear()===_e&&We.getMonth()===Le&&We.getDate()===Y}if(/^\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}$/.test(te)){const ee=new Date(te);return!isNaN(ee.getTime())}if(/^\d{4}-\d{2}-\d{2}$/.test(te)){const ee=new Date(te);return!isNaN(ee.getTime())}return!1},V=te=>{if(te==null)return!1;if(typeof te=="number")return Number.isFinite(te);const ee=String(te).trim().replace(/[$\s]/g,"").replace(",","."),Y=Number.parseFloat(ee);return Number.isFinite(Y)},A=te=>{const ee=Number.parseInt(String(te??"").trim(),10);return Number.isFinite(ee)&&ee>0};function Z(te){switch(te){case"transactions":return"Transaction Summary";case"sold-orders":return"Sold Orders";case"purchased-orders":return"Purchased Orders";case"sold-articles":return"Sold Articles";case"purchased-articles":return"Purchased Articles";default:return"Unknown File Type"}}const K=te=>{switch(te){case"transactions":return 5;case"sold-orders":case"purchased-orders":return 6;case"sold-articles":case"purchased-articles":return 8;default:return 5}},j=(te,ee)=>{const Y=[];if(!te.date&&!te.dateOfPurchase)Y.push("Date is required");else{const Le=te.date||te.dateOfPurchase;G(Le)||Y.push("Invalid date format (expected DD.MM.YYYY or YYYY-MM-DD)")}return ee.includes("articles")?(te.name||Y.push("Card name is required"),te.expansion||Y.push("Expansion/Set is required"),te.price===void 0||te.price===null||String(te.price).trim()===""?Y.push("Price is required"):V(te.price)||Y.push("Invalid price format (expected numeric value)"),te.amount===void 0||te.amount===null||String(te.amount).trim()===""?Y.push("Quantity is required"):A(te.amount)||Y.push("Invalid quantity (expected positive integer)"),te.shipmentId||Y.push("Order ID is required")):ee.includes("orders")?(te.dateOfPurchase?G(te.dateOfPurchase)||Y.push("Invalid date format (expected DD.MM.YYYY or YYYY-MM-DD)"):Y.push("Date is required"),te.orderId||Y.push("Order ID is required"),te.articleCount?A(te.articleCount)||Y.push("Invalid article count (expected positive integer)"):Y.push("Article count is required"),te.merchandiseValue===void 0||te.merchandiseValue===null||String(te.merchandiseValue).trim()===""?Y.push("Merchandise value is required"):V(te.merchandiseValue)||Y.push("Invalid merchandise value format (expected numeric value)")):ee==="transactions"&&(te.reference||Y.push("Reference is required"),te.amount===void 0||te.amount===null||String(te.amount).trim()===""?Y.push("Amount is required"):V(te.amount)||Y.push("Invalid amount format (expected numeric value)"),te.category||Y.push("Category is required"),te.type||Y.push("Type is required")),Y},de=(te,ee="articles")=>te.filter(Y=>j(Y,ee).length===0),ge=(te,ee="articles")=>te.map((Y,Le)=>({index:Le,row:Y,errors:j(Y,ee)})).filter(Y=>Y.errors.length>0),Ae=te=>{const ee=te.toLowerCase();return ee.includes("transaction")?"transactions":ee.includes("sold orders")?"sold-orders":ee.includes("purchased orders")?"purchased-orders":ee.includes("sold articles")?"sold-articles":ee.includes("purchased articles")?"purchased-articles":"unknown"},Se=async()=>{try{c.value={};for(const[te,ee]of Object.entries(o.value))if(!(!ee||ee.length===0)&&te.includes("articles")){const Y=await Za.checkForExistingImports(ee);for(const Le of Y){const _e=`${te}:${Le.article.shipmentId}:${Le.article.lineNumber}`;c.value[_e]=Le.exists}}}catch(te){console.error("Error checking for existing imports:",te)}},Pe=(te,ee)=>{const Y=`${te}:${ee.shipmentId}:${ee.lineNumber}`;return!!c.value[Y]};return(te,ee)=>(q(),J("div",GI,[ee[29]||(ee[29]=w("h1",null,"Cardmarket Import Wizard",-1)),w("div",XI,[(q(),J(et,null,Ft(e,(Y,Le)=>w("div",{key:Y.key,class:Pt(["step",{active:n.value===Le,completed:Le<n.value}])},[w("div",QI,oe(Le+1),1),w("div",JI,oe(Y.title),1)],2)),64))]),w("div",ZI,[w("div",eE,[w("div",tE,[n.value===0?(q(),J("div",nE,[ee[2]||(ee[2]=jy('<h2 data-v-4f46dc4c>Upload CSV Files</h2><p data-v-4f46dc4c>Please select all Cardmarket CSV export files to import. You can select multiple files at once.</p><div class="alert alert-info mb-4" data-v-4f46dc4c><h3 class="alert-heading" data-v-4f46dc4c>Where to Get Cardmarket CSV Files</h3><p data-v-4f46dc4c>Cardmarket provides several types of CSV exports. For the best import results, we recommend downloading these files:</p><div class="row" data-v-4f46dc4c><div class="col-md-6" data-v-4f46dc4c><h4 data-v-4f46dc4c>1. Transaction Summary</h4><p data-v-4f46dc4c>Contains financial summary of all your transactions (sales, purchases, fees).</p><p data-v-4f46dc4c><strong data-v-4f46dc4c>Download from:</strong><br data-v-4f46dc4c> Cardmarket  My Account  Transactions  All Transactions  Download CSV</p><p class="mb-1" data-v-4f46dc4c><strong data-v-4f46dc4c>Direct link:</strong></p><a href="https://www.cardmarket.com/de/Magic/Account/Transactions/Details" target="_blank" rel="noopener noreferrer" class="btn btn-sm btn-glass-primary" data-v-4f46dc4c> Go to Transactions Page </a></div><div class="col-md-6" data-v-4f46dc4c><h4 data-v-4f46dc4c>2. Sold Articles</h4><p data-v-4f46dc4c>Contains detailed information about individual items you&#39;ve sold.</p><p data-v-4f46dc4c><strong data-v-4f46dc4c>Download from:</strong><br data-v-4f46dc4c> Cardmarket  My Account  Statistics  Sold Articles  CSV Export</p><p class="mb-1" data-v-4f46dc4c><strong data-v-4f46dc4c>Direct link:</strong></p><a href="https://www.cardmarket.com/de/Magic/Account/Statistics" target="_blank" rel="noopener noreferrer" class="btn btn-sm btn-glass-primary" data-v-4f46dc4c> Go to Statistics Page </a></div></div><div class="row mt-3" data-v-4f46dc4c><div class="col-md-6" data-v-4f46dc4c><h4 data-v-4f46dc4c>3. Purchased Articles</h4><p data-v-4f46dc4c>Contains detailed information about individual items you&#39;ve bought.</p><p data-v-4f46dc4c><strong data-v-4f46dc4c>Download from:</strong><br data-v-4f46dc4c> Cardmarket  My Account  Statistics  Purchased Articles  CSV Export</p><p class="mb-1" data-v-4f46dc4c><strong data-v-4f46dc4c>Direct link:</strong></p><a href="https://www.cardmarket.com/de/Magic/Account/Statistics" target="_blank" rel="noopener noreferrer" class="btn btn-sm btn-glass-primary" data-v-4f46dc4c> Go to Statistics Page </a></div><div class="col-md-6" data-v-4f46dc4c><h4 data-v-4f46dc4c>Optional: Order Details</h4><p data-v-4f46dc4c>Sold Orders and Purchased Orders contain redundant information. Only import if you specifically need order-level details.</p><p data-v-4f46dc4c><strong data-v-4f46dc4c>Download from:</strong><br data-v-4f46dc4c> Cardmarket  My Account  Statistics  Sold/Purchased Orders  CSV Export</p></div></div><div class="mt-3" data-v-4f46dc4c><small class="text-muted" data-v-4f46dc4c><strong data-v-4f46dc4c>Tip:</strong> The most important files are Transaction Summary, Sold Articles, and Purchased Articles. Order files (Sold Orders, Purchased Orders) contain redundant information but can be imported if needed. </small></div></div>',3)),w("div",sE,[w("div",rE,[ee[0]||(ee[0]=w("label",{for:"csv-files",class:"form-label"}," Choose CSV Files ",-1)),w("input",{id:"csv-files",type:"file",accept:".csv",multiple:"",onChange:m,class:"form-control"},null,32)]),s.value.length>0?(q(),J("div",iE,[ee[1]||(ee[1]=w("h3",null,"Uploaded Files",-1)),w("ul",oE,[(q(!0),J(et,null,Ft(s.value,Y=>(q(),J("li",{key:Y.name,class:"file-item"},[w("span",aE,oe(Y.name),1),w("span",lE,"("+oe(Ae(Y.name))+")",1),w("span",cE,"- "+oe(f(Y.size)),1)]))),128))])])):ke("",!0)]),u.value.length>0?(q(),J("div",uE,[(q(!0),J(et,null,Ft(u.value,Y=>(q(),J("div",{key:Y,class:"error-message"},oe(Y),1))),128))])):ke("",!0)])):n.value===1?(q(),J("div",dE,[ee[10]||(ee[10]=w("h2",null,"Preview Data",-1)),ee[11]||(ee[11]=w("p",null,"Review the data that will be imported. Check for any issues before proceeding.",-1)),(q(!0),J(et,null,Ft(i.value,(Y,Le)=>(q(),J("div",{key:Le,class:"file-preview"},[w("h3",null,oe(Z(Y)),1),o.value[Y]&&o.value[Y].length>0?(q(),J("div",fE,[w("div",hE,[w("div",pE,oe(o.value[Y].length),1),ee[3]||(ee[3]=w("div",{class:"stat-label"},"Total Rows",-1))]),w("div",gE,[w("div",mE,oe(de(o.value[Y],Y).length),1),ee[4]||(ee[4]=w("div",{class:"stat-label"},"Valid Rows",-1))]),w("div",yE,[w("div",vE,oe(ge(o.value[Y],Y).length),1),ee[5]||(ee[5]=w("div",{class:"stat-label"},"Invalid Rows",-1))])])):ke("",!0),o.value[Y]&&o.value[Y].length>0?(q(),J("div",bE,[ee[7]||(ee[7]=w("h4",null,"Valid Data Preview",-1)),w("div",_E,[w("table",wE,[w("thead",null,[w("tr",null,[Y==="transactions"?(q(),J("th",xE,"Reference")):(q(),J("th",kE,"Line")),ee[6]||(ee[6]=w("th",null,"Date",-1)),Y.includes("articles")?(q(),J("th",SE,"Card Name")):ke("",!0),Y.includes("articles")?(q(),J("th",CE,"Expansion")):ke("",!0),Y.includes("articles")?(q(),J("th",PE,"Price")):ke("",!0),Y.includes("articles")?(q(),J("th",AE,"Quantity")):ke("",!0),Y.includes("articles")?(q(),J("th",IE,"Order ID")):ke("",!0),Y.includes("articles")?(q(),J("th",EE,"Status")):ke("",!0),Y.includes("orders")?(q(),J("th",OE,"Order ID")):ke("",!0),Y.includes("orders")?(q(),J("th",ME,"Username")):ke("",!0),Y.includes("orders")?(q(),J("th",TE,"Article Count")):ke("",!0),Y.includes("orders")?(q(),J("th",DE,"Merchandise Value")):ke("",!0),Y==="transactions"?(q(),J("th",RE,"Category")):ke("",!0),Y==="transactions"?(q(),J("th",$E,"Type")):ke("",!0),Y==="transactions"?(q(),J("th",FE,"Amount")):ke("",!0)])]),w("tbody",null,[(q(!0),J(et,null,Ft(de(o.value[Y],Y).slice(0,5),(_e,We)=>(q(),J("tr",{key:We},[Y==="transactions"?(q(),J("td",LE,oe(_e.reference),1)):(q(),J("td",BE,oe(_e.lineNumber),1)),w("td",null,oe(_e.date||_e.dateOfPurchase),1),Y.includes("articles")?(q(),J("td",jE,oe(_e.name),1)):ke("",!0),Y.includes("articles")?(q(),J("td",NE,oe(_e.expansion),1)):ke("",!0),Y.includes("articles")?(q(),J("td",zE,oe(p(parseFloat(String(_e.price).replace(/[$\s]/g,"").replace(",","."))*100)),1)):ke("",!0),Y.includes("articles")?(q(),J("td",UE,oe(_e.amount),1)):ke("",!0),Y.includes("articles")?(q(),J("td",qE,oe(_e.shipmentId),1)):ke("",!0),Y.includes("articles")?(q(),J("td",WE,[w("span",{class:Pt(Pe(Y,_e)?"text-success":"text-primary")},oe(Pe(Y,_e)?"Already Imported":"New"),3)])):ke("",!0),Y.includes("orders")?(q(),J("td",VE,oe(_e.orderId),1)):ke("",!0),Y.includes("orders")?(q(),J("td",HE,oe(_e.username),1)):ke("",!0),Y.includes("orders")?(q(),J("td",KE,oe(_e.articleCount),1)):ke("",!0),Y.includes("orders")?(q(),J("td",YE,oe(p(parseFloat(String(_e.merchandiseValue).replace(/[$\s]/g,"").replace(",","."))*100)),1)):ke("",!0),Y==="transactions"?(q(),J("td",GE,oe(_e.category),1)):ke("",!0),Y==="transactions"?(q(),J("td",XE,oe(_e.type),1)):ke("",!0),Y==="transactions"?(q(),J("td",QE,oe(p(parseFloat(String(_e.amount).replace(/[$\s]/g,"").replace(",","."))*100)),1)):ke("",!0)]))),128)),de(o.value[Y],Y).length>5?(q(),J("tr",JE,[w("td",{colspan:K(Y),class:"more-rows-cell"}," ... and "+oe(de(o.value[Y],Y).length-5)+" more rows ",9,ZE)])):ke("",!0)])])])])):ke("",!0),ge(o.value[Y],Y).length>0?(q(),J("div",eO,[ee[8]||(ee[8]=w("h4",null,"Invalid Rows",-1)),ee[9]||(ee[9]=w("p",null,"The following rows have issues and will be skipped:",-1)),w("div",tO,[(q(!0),J(et,null,Ft(ge(o.value[Y],Y).slice(0,3),(_e,We)=>(q(),J("div",{key:We,class:"invalid-row"},[w("div",nO,"Row "+oe(_e.row.lineNumber||_e.row.reference),1),w("div",sO,oe(_e.errors.join(", ")),1)]))),128)),ge(o.value[Y],Y).length>3?(q(),J("div",rO," ... and "+oe(ge(o.value[Y],Y).length-3)+" more rows ",1)):ke("",!0)])])):ke("",!0)]))),128))])):n.value===2?(q(),J("div",iO,[ee[18]||(ee[18]=w("h2",null,"Resolve Conflicts",-1)),ee[19]||(ee[19]=w("p",null,"Check for duplicate imports and resolve any conflicts.",-1)),(q(!0),J(et,null,Ft(i.value,(Y,Le)=>(q(),J("div",{key:Le,class:"file-conflicts"},[w("h3",null,oe(Z(Y)),1),Y.includes("articles")&&C(Y).length>0?(q(),J("div",oO,[ee[13]||(ee[13]=w("h4",null,"Already Imported Articles",-1)),ee[14]||(ee[14]=w("p",null,"The following articles have already been imported and will be skipped:",-1)),w("div",aO,[(q(!0),J(et,null,Ft(C(Y),(_e,We)=>(q(),J("div",{key:We,class:"d-flex justify-content-between align-items-center p-2 bg-light rounded"},[w("div",lO,[w("div",cO,oe(_e.name),1),w("div",uO,oe(_e.expansion)+"  "+oe(_e.amount)+"  "+oe(p(parseFloat(String(_e.price).replace(/[$\s]/g,"").replace(",","."))*100))+"  Order #"+oe(_e.shipmentId),1)]),ee[12]||(ee[12]=w("div",{class:"ms-3"},[w("span",{class:"text-success fw-medium"},"Already Imported")],-1))]))),128))])])):ke("",!0),Y.includes("articles")&&E(Y).length>0?(q(),J("div",dO,[ee[16]||(ee[16]=w("h4",null,"New Articles to Import",-1)),ee[17]||(ee[17]=w("p",null,"The following articles will be imported:",-1)),w("div",fO,[(q(!0),J(et,null,Ft(E(Y).filter(_e=>!Pe(Y,_e)),(_e,We)=>(q(),J("div",{key:We,class:"d-flex justify-content-between align-items-center p-2 bg-light rounded"},[w("div",hO,[w("div",pO,oe(_e.name),1),w("div",gO,oe(_e.expansion)+"  "+oe(_e.amount)+"  "+oe(p(parseFloat(String(_e.price).replace(/[$\s]/g,"").replace(",","."))*100))+"  Order #"+oe(_e.shipmentId),1)]),ee[15]||(ee[15]=w("div",{class:"ms-3"},[w("span",{class:"text-primary fw-medium"},"New")],-1))]))),128))])])):ke("",!0)]))),128))])):n.value===3?(q(),J("div",mO,[ee[27]||(ee[27]=w("h2",null,"Import Summary",-1)),ee[28]||(ee[28]=w("p",null,"Review the import summary before finalizing.",-1)),(q(!0),J(et,null,Ft(i.value,(Y,Le)=>(q(),J("div",{key:Le,class:"file-summary"},[w("h3",null,oe(Z(Y)),1),w("div",yO,[w("div",vO,[w("div",bO,oe(E(Y).length),1),ee[20]||(ee[20]=w("div",{class:"stat-label"},"New Records",-1))]),w("div",_O,[w("div",wO,oe(ge(o.value[Y]||[],Y).length),1),ee[21]||(ee[21]=w("div",{class:"stat-label"},"Invalid Rows",-1))]),Y.includes("articles")?(q(),J("div",xO,[w("div",kO,oe(C(Y).length),1),ee[22]||(ee[22]=w("div",{class:"stat-label"},"Already Imported",-1))])):ke("",!0)])]))),128)),w("div",SO,[ee[26]||(ee[26]=w("h3",null,"Import Details",-1)),w("div",CO,[w("div",PO,[ee[23]||(ee[23]=w("div",{class:"summary-label"},"Files Uploaded",-1)),w("div",AO,oe(s.value.length),1)]),w("div",IO,[ee[24]||(ee[24]=w("div",{class:"summary-label"},"Total Rows Parsed",-1)),w("div",EO,oe(I()),1)]),w("div",OO,[ee[25]||(ee[25]=w("div",{class:"summary-label"},"Total Valid Rows",-1)),w("div",MO,oe(T()),1)])])]),l.value?(q(),J("div",TO,oe(l.value),1)):ke("",!0)])):ke("",!0)])])]),w("div",DO,[n.value>0?(q(),J("button",{key:0,onClick:S,class:"btn btn-secondary"}," Previous ")):ke("",!0),n.value<e.length-1?(q(),J("button",{key:1,onClick:k,class:"btn btn-glass-primary",disabled:!_.value}," Next ",8,RO)):ke("",!0),n.value===e.length-1?(q(),J("button",{key:2,onClick:P,class:"btn btn-glass-primary",disabled:a.value},oe(a.value?"Importing...":"Import Data"),9,$O)):ke("",!0)])]))}}),LO=pn(FO,[["__scopeId","data-v-4f46dc4c"]]);var wr={},ms={},xr={},Rg;function db(){if(Rg)return xr;Rg=1,Object.defineProperty(xr,"__esModule",{value:!0}),xr.DefaultSerializer=xr.extendSerializer=void 0;function t(s,r){const i=s.deserialize.bind(s),o=s.serialize.bind(s);return{deserialize(a){return r.deserialize(a,i)},serialize(a){return r.serialize(a,o)}}}xr.extendSerializer=t;const e={deserialize(s){return Object.assign(Error(s.message),{name:s.name,stack:s.stack})},serialize(s){return{__error_marker:"$$error",message:s.message,name:s.name,stack:s.stack}}},n=s=>s&&typeof s=="object"&&"__error_marker"in s&&s.__error_marker==="$$error";return xr.DefaultSerializer={deserialize(s){return n(s)?e.deserialize(s):s},serialize(s){return s instanceof Error?e.serialize(s):s}},xr}var $g;function Yo(){if($g)return ms;$g=1,Object.defineProperty(ms,"__esModule",{value:!0}),ms.serialize=ms.deserialize=ms.registerSerializer=void 0;const t=db();let e=t.DefaultSerializer;function n(i){e=t.extendSerializer(e,i)}ms.registerSerializer=n;function s(i){return e.deserialize(i)}ms.deserialize=s;function r(i){return e.serialize(i)}return ms.serialize=r,ms}var Cu={},ys={},kr={},Fg;function BO(){if(Fg)return kr;Fg=1,Object.defineProperty(kr,"__esModule",{value:!0}),kr.getBundleURL=kr.getBaseURL=void 0;let t;function e(){return t||(t=n()),t}kr.getBundleURL=e;function n(){try{throw new Error}catch(r){const i=(""+r.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\/\/[^)\n]+/g);if(i)return s(i[0])}return"/"}function s(r){return(""+r).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\/\/.+)?\/[^/]+(?:\?.*)?$/,"$1")+"/"}return kr.getBaseURL=s,kr}var Lg;function fb(){if(Lg)return ys;Lg=1,Object.defineProperty(ys,"__esModule",{value:!0}),ys.isWorkerRuntime=ys.getWorkerImplementation=ys.defaultPoolSize=void 0;const t=BO();ys.defaultPoolSize=typeof navigator<"u"&&navigator.hardwareConcurrency?navigator.hardwareConcurrency:4;const e=a=>/^[a-zA-Z][a-zA-Z\d+\-.]*:/.test(a);function n(a){const l=new Blob([a],{type:"application/javascript"});return URL.createObjectURL(l)}function s(){if(typeof Worker>"u")return class{constructor(){throw Error("No web worker implementation available. You might have tried to spawn a worker within a worker in a browser that doesn't support workers in workers.")}};class a extends Worker{constructor(u,f){var p,m;typeof u=="string"&&f&&f._baseURL?u=new URL(u,f._baseURL):typeof u=="string"&&!e(u)&&t.getBundleURL().match(/^file:\/\//i)&&(u=new URL(u,t.getBundleURL().replace(/\/[^\/]+$/,"/")),(!((p=f?.CORSWorkaround)!==null&&p!==void 0)||p)&&(u=n(`importScripts(${JSON.stringify(u)});`))),typeof u=="string"&&e(u)&&(!((m=f?.CORSWorkaround)!==null&&m!==void 0)||m)&&(u=n(`importScripts(${JSON.stringify(u)});`)),super(u,f)}}class l extends a{constructor(u,f){const p=window.URL.createObjectURL(u);super(p,f)}static fromText(u,f){const p=new window.Blob([u],{type:"text/javascript"});return new l(p,f)}}return{blob:l,default:a}}let r;function i(){return r||(r=s()),r}ys.getWorkerImplementation=i;function o(){const a=typeof self<"u"&&typeof Window<"u"&&self instanceof Window;return!!(typeof self<"u"&&self.postMessage&&!a)}return ys.isWorkerRuntime=o,ys}var Sr={},el={exports:{}},Pu,Bg;function jO(){if(Bg)return Pu;Bg=1;var t=1e3,e=t*60,n=e*60,s=n*24,r=s*7,i=s*365.25;Pu=function(u,f){f=f||{};var p=typeof u;if(p==="string"&&u.length>0)return o(u);if(p==="number"&&isFinite(u))return f.long?l(u):a(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))};function o(u){if(u=String(u),!(u.length>100)){var f=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(u);if(f){var p=parseFloat(f[1]),m=(f[2]||"ms").toLowerCase();switch(m){case"years":case"year":case"yrs":case"yr":case"y":return p*i;case"weeks":case"week":case"w":return p*r;case"days":case"day":case"d":return p*s;case"hours":case"hour":case"hrs":case"hr":case"h":return p*n;case"minutes":case"minute":case"mins":case"min":case"m":return p*e;case"seconds":case"second":case"secs":case"sec":case"s":return p*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return p;default:return}}}}function a(u){var f=Math.abs(u);return f>=s?Math.round(u/s)+"d":f>=n?Math.round(u/n)+"h":f>=e?Math.round(u/e)+"m":f>=t?Math.round(u/t)+"s":u+"ms"}function l(u){var f=Math.abs(u);return f>=s?c(u,f,s,"day"):f>=n?c(u,f,n,"hour"):f>=e?c(u,f,e,"minute"):f>=t?c(u,f,t,"second"):u+" ms"}function c(u,f,p,m){var v=f>=p*1.5;return Math.round(u/p)+" "+m+(v?"s":"")}return Pu}var Au,jg;function NO(){if(jg)return Au;jg=1;function t(e){s.debug=s,s.default=s,s.coerce=c,s.disable=a,s.enable=i,s.enabled=l,s.humanize=jO(),s.destroy=u,Object.keys(e).forEach(f=>{s[f]=e[f]}),s.names=[],s.skips=[],s.formatters={};function n(f){let p=0;for(let m=0;m<f.length;m++)p=(p<<5)-p+f.charCodeAt(m),p|=0;return s.colors[Math.abs(p)%s.colors.length]}s.selectColor=n;function s(f){let p,m=null,v,_;function k(...S){if(!k.enabled)return;const P=k,E=Number(new Date),C=E-(p||E);P.diff=C,P.prev=p,P.curr=E,p=E,S[0]=s.coerce(S[0]),typeof S[0]!="string"&&S.unshift("%O");let I=0;S[0]=S[0].replace(/%([a-zA-Z%])/g,(G,V)=>{if(G==="%%")return"%";I++;const A=s.formatters[V];if(typeof A=="function"){const Z=S[I];G=A.call(P,Z),S.splice(I,1),I--}return G}),s.formatArgs.call(P,S),(P.log||s.log).apply(P,S)}return k.namespace=f,k.useColors=s.useColors(),k.color=s.selectColor(f),k.extend=r,k.destroy=s.destroy,Object.defineProperty(k,"enabled",{enumerable:!0,configurable:!1,get:()=>m!==null?m:(v!==s.namespaces&&(v=s.namespaces,_=s.enabled(f)),_),set:S=>{m=S}}),typeof s.init=="function"&&s.init(k),k}function r(f,p){const m=s(this.namespace+(typeof p>"u"?":":p)+f);return m.log=this.log,m}function i(f){s.save(f),s.namespaces=f,s.names=[],s.skips=[];const p=(typeof f=="string"?f:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const m of p)m[0]==="-"?s.skips.push(m.slice(1)):s.names.push(m)}function o(f,p){let m=0,v=0,_=-1,k=0;for(;m<f.length;)if(v<p.length&&(p[v]===f[m]||p[v]==="*"))p[v]==="*"?(_=v,k=m,v++):(m++,v++);else if(_!==-1)v=_+1,k++,m=k;else return!1;for(;v<p.length&&p[v]==="*";)v++;return v===p.length}function a(){const f=[...s.names,...s.skips.map(p=>"-"+p)].join(",");return s.enable(""),f}function l(f){for(const p of s.skips)if(o(f,p))return!1;for(const p of s.names)if(o(f,p))return!0;return!1}function c(f){return f instanceof Error?f.stack||f.message:f}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return s.enable(s.load()),s}return Au=t,Au}var Ng;function gf(){return Ng||(Ng=1,(function(t,e){var n={};e.formatArgs=r,e.save=i,e.load=o,e.useColors=s,e.storage=a(),e.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function s(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let c;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(c=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(c[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function r(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const u="color: "+this.color;c.splice(1,0,u,"color: inherit");let f=0,p=0;c[0].replace(/%[a-zA-Z%]/g,m=>{m!=="%%"&&(f++,m==="%c"&&(p=f))}),c.splice(p,0,u)}e.log=console.debug||console.log||(()=>{});function i(c){try{c?e.storage.setItem("debug",c):e.storage.removeItem("debug")}catch{}}function o(){let c;try{c=e.storage.getItem("debug")||e.storage.getItem("DEBUG")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c=n.DEBUG),c}function a(){try{return localStorage}catch{}}t.exports=NO()(e);const{formatters:l}=t.exports;l.j=function(c){try{return JSON.stringify(c)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}}})(el,el.exports)),el.exports}var zO=function(t,e,n,s){function r(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(s.next(u))}catch(f){o(f)}}function l(u){try{c(s.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):r(u.value).then(a,l)}c((s=s.apply(t,e||[])).next())})};class hc{constructor(e){this._baseObserver=e,this._pendingPromises=new Set}complete(){Promise.all(this._pendingPromises).then(()=>this._baseObserver.complete()).catch(e=>this._baseObserver.error(e))}error(e){this._baseObserver.error(e)}schedule(e){const n=Promise.all(this._pendingPromises),s=[],r=o=>s.push(o),i=Promise.resolve().then(()=>zO(this,void 0,void 0,function*(){yield n,yield e(r),this._pendingPromises.delete(i);for(const o of s)this._baseObserver.next(o)})).catch(o=>{this._pendingPromises.delete(i),this._baseObserver.error(o)});this._pendingPromises.add(i)}}const hb=()=>typeof Symbol=="function",sa=t=>hb()&&!!Symbol[t],mf=t=>sa(t)?Symbol[t]:"@@"+t;sa("asyncIterator")||(Symbol.asyncIterator=Symbol.asyncIterator||Symbol.for("Symbol.asyncIterator"));const UO=mf("iterator"),md=mf("observable"),pb=mf("species");function Nl(t,e){const n=t[e];if(n!=null){if(typeof n!="function")throw new TypeError(n+" is not a function");return n}}function ro(t){let e=t.constructor;return e!==void 0&&(e=e[pb],e===null&&(e=void 0)),e!==void 0?e:Vt}function qO(t){return t instanceof Vt}function Di(t){Di.log?Di.log(t):setTimeout(()=>{throw t},0)}function ml(t){Promise.resolve().then(()=>{try{t()}catch(e){Di(e)}})}function gb(t){const e=t._cleanup;if(e!==void 0&&(t._cleanup=void 0,!!e))try{if(typeof e=="function")e();else{const n=Nl(e,"unsubscribe");n&&n.call(e)}}catch(n){Di(n)}}function yd(t){t._observer=void 0,t._queue=void 0,t._state="closed"}function WO(t){const e=t._queue;if(e){t._queue=void 0,t._state="ready";for(const n of e)if(mb(t,n.type,n.value),t._state==="closed")break}}function mb(t,e,n){t._state="running";const s=t._observer;try{const r=s?Nl(s,e):void 0;switch(e){case"next":r&&r.call(s,n);break;case"error":if(yd(t),r)r.call(s,n);else throw n;break;case"complete":yd(t),r&&r.call(s);break}}catch(r){Di(r)}t._state==="closed"?gb(t):t._state==="running"&&(t._state="ready")}function Iu(t,e,n){if(t._state!=="closed"){if(t._state==="buffering"){t._queue=t._queue||[],t._queue.push({type:e,value:n});return}if(t._state!=="ready"){t._state="buffering",t._queue=[{type:e,value:n}],ml(()=>WO(t));return}mb(t,e,n)}}class VO{constructor(e,n){this._cleanup=void 0,this._observer=e,this._queue=void 0,this._state="initializing";const s=new HO(this);try{this._cleanup=n.call(void 0,s)}catch(r){s.error(r)}this._state==="initializing"&&(this._state="ready")}get closed(){return this._state==="closed"}unsubscribe(){this._state!=="closed"&&(yd(this),gb(this))}}class HO{constructor(e){this._subscription=e}get closed(){return this._subscription._state==="closed"}next(e){Iu(this._subscription,"next",e)}error(e){Iu(this._subscription,"error",e)}complete(){Iu(this._subscription,"complete")}}class Vt{constructor(e){if(!(this instanceof Vt))throw new TypeError("Observable cannot be called as a function");if(typeof e!="function")throw new TypeError("Observable initializer must be a function");this._subscriber=e}subscribe(e,n,s){return(typeof e!="object"||e===null)&&(e={next:e,error:n,complete:s}),new VO(e,this._subscriber)}pipe(e,...n){let s=this;for(const r of[e,...n])s=r(s);return s}tap(e,n,s){const r=typeof e!="object"||e===null?{next:e,error:n,complete:s}:e;return new Vt(i=>this.subscribe({next(o){r.next&&r.next(o),i.next(o)},error(o){r.error&&r.error(o),i.error(o)},complete(){r.complete&&r.complete(),i.complete()},start(o){r.start&&r.start(o)}}))}forEach(e){return new Promise((n,s)=>{if(typeof e!="function"){s(new TypeError(e+" is not a function"));return}function r(){i.unsubscribe(),n(void 0)}const i=this.subscribe({next(o){try{e(o,r)}catch(a){s(a),i.unsubscribe()}},error(o){s(o)},complete(){n(void 0)}})})}map(e){if(typeof e!="function")throw new TypeError(e+" is not a function");const n=ro(this);return new n(s=>this.subscribe({next(r){let i=r;try{i=e(r)}catch(o){return s.error(o)}s.next(i)},error(r){s.error(r)},complete(){s.complete()}}))}filter(e){if(typeof e!="function")throw new TypeError(e+" is not a function");const n=ro(this);return new n(s=>this.subscribe({next(r){try{if(!e(r))return}catch(i){return s.error(i)}s.next(r)},error(r){s.error(r)},complete(){s.complete()}}))}reduce(e,n){if(typeof e!="function")throw new TypeError(e+" is not a function");const s=ro(this),r=arguments.length>1;let i=!1,o=n;return new s(a=>this.subscribe({next(l){const c=!i;if(i=!0,!c||r)try{o=e(o,l)}catch(u){return a.error(u)}else o=l},error(l){a.error(l)},complete(){if(!i&&!r)return a.error(new TypeError("Cannot reduce an empty sequence"));a.next(o),a.complete()}}))}concat(...e){const n=ro(this);return new n(s=>{let r,i=0;function o(a){r=a.subscribe({next(l){s.next(l)},error(l){s.error(l)},complete(){i===e.length?(r=void 0,s.complete()):o(n.from(e[i++]))}})}return o(this),()=>{r&&(r.unsubscribe(),r=void 0)}})}flatMap(e){if(typeof e!="function")throw new TypeError(e+" is not a function");const n=ro(this);return new n(s=>{const r=[],i=this.subscribe({next(a){let l;if(e)try{l=e(a)}catch(u){return s.error(u)}else l=a;const c=n.from(l).subscribe({next(u){s.next(u)},error(u){s.error(u)},complete(){const u=r.indexOf(c);u>=0&&r.splice(u,1),o()}});r.push(c)},error(a){s.error(a)},complete(){o()}});function o(){i.closed&&r.length===0&&s.complete()}return()=>{r.forEach(a=>a.unsubscribe()),i.unsubscribe()}})}[md](){return this}static from(e){const n=typeof this=="function"?this:Vt;if(e==null)throw new TypeError(e+" is not an object");const s=Nl(e,md);if(s){const r=s.call(e);if(Object(r)!==r)throw new TypeError(r+" is not an object");return qO(r)&&r.constructor===n?r:new n(i=>r.subscribe(i))}if(sa("iterator")){const r=Nl(e,UO);if(r)return new n(i=>{ml(()=>{if(!i.closed){for(const o of r.call(e))if(i.next(o),i.closed)return;i.complete()}})})}if(Array.isArray(e))return new n(r=>{ml(()=>{if(!r.closed){for(const i of e)if(r.next(i),r.closed)return;r.complete()}})});throw new TypeError(e+" is not observable")}static of(...e){const n=typeof this=="function"?this:Vt;return new n(s=>{ml(()=>{if(!s.closed){for(const r of e)if(s.next(r),s.closed)return;s.complete()}})})}static get[pb](){return this}}hb()&&Object.defineProperty(Vt,Symbol("extensions"),{value:{symbol:md,hostReportError:Di},configurable:!0});function Vr(t){typeof t=="function"?t():t&&typeof t.unsubscribe=="function"&&t.unsubscribe()}var KO=function(t,e,n,s){function r(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(s.next(u))}catch(f){o(f)}}function l(u){try{c(s.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):r(u.value).then(a,l)}c((s=s.apply(t,e||[])).next())})};function YO(t){return e=>new Vt(n=>{const s=new hc(n),r=e.subscribe({complete(){s.complete()},error(i){s.error(i)},next(i){s.schedule(o=>KO(this,void 0,void 0,function*(){(yield t(i))&&o(i)}))}});return()=>Vr(r)})}function GO(t){return t&&sa("asyncIterator")&&t[Symbol.asyncIterator]}function XO(t){return t&&sa("iterator")&&t[Symbol.iterator]}var QO=function(t,e,n,s){function r(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(s.next(u))}catch(f){o(f)}}function l(u){try{c(s.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):r(u.value).then(a,l)}c((s=s.apply(t,e||[])).next())})},JO=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof __values=="function"?__values(t):t[Symbol.iterator](),n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n);function s(i){n[i]=t[i]&&function(o){return new Promise(function(a,l){o=t[i](o),r(a,l,o.done,o.value)})}}function r(i,o,a,l){Promise.resolve(l).then(function(c){i({value:c,done:a})},o)}};function ZO(t){return e=>new Vt(n=>{const s=new hc(n),r=e.subscribe({complete(){s.complete()},error(i){s.error(i)},next(i){s.schedule(o=>QO(this,void 0,void 0,function*(){var a,l;const c=yield t(i);if(XO(c)||GO(c))try{for(var u=JO(c),f;f=yield u.next(),!f.done;){const p=f.value;o(p)}}catch(p){a={error:p}}finally{try{f&&!f.done&&(l=u.return)&&(yield l.call(u))}finally{if(a)throw a.error}}else c.map(p=>o(p))}))}});return()=>Vr(r)})}function eM(t){return new Vt(e=>{let n=0;const s=setInterval(()=>{e.next(n++)},t);return()=>clearInterval(s)})}var tM=function(t,e,n,s){function r(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(s.next(u))}catch(f){o(f)}}function l(u){try{c(s.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):r(u.value).then(a,l)}c((s=s.apply(t,e||[])).next())})};function nM(t){return e=>new Vt(n=>{const s=new hc(n),r=e.subscribe({complete(){s.complete()},error(i){s.error(i)},next(i){s.schedule(o=>tM(this,void 0,void 0,function*(){const a=yield t(i);o(a)}))}});return()=>Vr(r)})}function sM(...t){return t.length===0?Vt.from([]):new Vt(e=>{let n=0;const s=t.map(i=>i.subscribe({error(o){e.error(o),r()},next(o){e.next(o)},complete(){++n===t.length&&(e.complete(),r())}})),r=()=>{s.forEach(i=>Vr(i))};return r})}class yb extends Vt{constructor(){super(e=>(this._observers.add(e),()=>this._observers.delete(e))),this._observers=new Set}next(e){for(const n of this._observers)n.next(e)}error(e){for(const n of this._observers)n.error(e)}complete(){for(const e of this._observers)e.complete()}}function rM(t){const e=new yb;let n,s=0;return new Vt(r=>{n||(n=t.subscribe(e));const i=e.subscribe(r);return s++,()=>{s--,i.unsubscribe(),s===0&&(Vr(n),n=void 0)}})}var iM=function(t,e,n,s){function r(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(s.next(u))}catch(f){o(f)}}function l(u){try{c(s.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):r(u.value).then(a,l)}c((s=s.apply(t,e||[])).next())})};function oM(t,e){return n=>new Vt(s=>{let r,i=0;const o=new hc(s),a=n.subscribe({complete(){o.complete()},error(l){o.error(l)},next(l){o.schedule(c=>iM(this,void 0,void 0,function*(){r=yield t(i===0?typeof e>"u"?l:e:r,l,i++),c(r)}))}});return()=>Vr(a)})}const aM=Object.freeze(Object.defineProperty({__proto__:null,Observable:Vt,Subject:yb,filter:YO,flatMap:ZO,interval:eM,map:nM,merge:sM,multicast:rM,scan:oM,unsubscribe:Vr},Symbol.toStringTag,{value:"Module"})),pc=sk(aM);var io={},zg;function lM(){if(zg)return io;zg=1,Object.defineProperty(io,"__esModule",{value:!0}),io.allSettled=void 0;function t(e){return Promise.all(e.map(n=>{const s=o=>({status:"fulfilled",value:o}),r=o=>({status:"rejected",reason:o}),i=Promise.resolve(n);try{return i.then(s,r)}catch(o){return Promise.reject(o)}}))}return io.allSettled=t,io}var Eu={},Ug;function cM(){return Ug||(Ug=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.PoolEventType=void 0,(function(e){e.initialized="initialized",e.taskCanceled="taskCanceled",e.taskCompleted="taskCompleted",e.taskFailed="taskFailed",e.taskQueued="taskQueued",e.taskQueueDrained="taskQueueDrained",e.taskStart="taskStart",e.terminated="terminated"})(t.PoolEventType||(t.PoolEventType={}))})(Eu)),Eu}var oo={},kn={},qg;function yf(){return qg||(qg=1,Object.defineProperty(kn,"__esModule",{value:!0}),kn.$worker=kn.$transferable=kn.$terminate=kn.$events=kn.$errors=void 0,kn.$errors=Symbol("thread.errors"),kn.$events=Symbol("thread.events"),kn.$terminate=Symbol("thread.terminate"),kn.$transferable=Symbol("thread.transferable"),kn.$worker=Symbol("thread.worker")),kn}var Wg;function vb(){if(Wg)return oo;Wg=1,Object.defineProperty(oo,"__esModule",{value:!0}),oo.Thread=void 0;const t=yf();function e(n){throw Error(n)}return oo.Thread={errors(n){return n[t.$errors]||e("Error observable not found. Make sure to pass a thread instance as returned by the spawn() promise.")},events(n){return n[t.$events]||e("Events observable not found. Make sure to pass a thread instance as returned by the spawn() promise.")},terminate(n){return n[t.$terminate]()}},oo}var Vg;function uM(){return Vg||(Vg=1,(function(t){var e=Sr&&Sr.__awaiter||function(S,P,E,C){function I(T){return T instanceof E?T:new E(function(G){G(T)})}return new(E||(E=Promise))(function(T,G){function V(K){try{Z(C.next(K))}catch(j){G(j)}}function A(K){try{Z(C.throw(K))}catch(j){G(j)}}function Z(K){K.done?T(K.value):I(K.value).then(V,A)}Z((C=C.apply(S,P||[])).next())})},n=Sr&&Sr.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(t,"__esModule",{value:!0}),t.Pool=t.Thread=t.PoolEventType=void 0;const s=n(gf()),r=pc,i=lM(),o=fb(),a=cM();Object.defineProperty(t,"PoolEventType",{enumerable:!0,get:function(){return a.PoolEventType}});const l=vb();Object.defineProperty(t,"Thread",{enumerable:!0,get:function(){return l.Thread}});let c=1;function u(S){const P=[];for(let E=0;E<S;E++)P.push(E);return P}function f(S){return new Promise(P=>setTimeout(P,S))}function p(S,P){return S.reduce((E,C)=>[...E,...P(C)],[])}function m(S){return S.replace(/\W/g," ").trim().replace(/\s+/g,"-")}function v(S,P){return u(P).map(()=>({init:S(),runningTasks:[]}))}class _{constructor(P,E){this.eventSubject=new r.Subject,this.initErrors=[],this.isClosing=!1,this.nextTaskID=1,this.taskQueue=[];const C=typeof E=="number"?{size:E}:E||{},{size:I=o.defaultPoolSize}=C;this.debug=s.default(`threads:pool:${m(C.name||String(c++))}`),this.options=C,this.workers=v(P,I),this.eventObservable=r.multicast(r.Observable.from(this.eventSubject)),Promise.all(this.workers.map(T=>T.init)).then(()=>this.eventSubject.next({type:a.PoolEventType.initialized,size:this.workers.length}),T=>{this.debug("Error while initializing pool worker:",T),this.eventSubject.error(T),this.initErrors.push(T)})}findIdlingWorker(){const{concurrency:P=1}=this.options;return this.workers.find(E=>E.runningTasks.length<P)}runPoolTask(P,E){return e(this,void 0,void 0,function*(){const C=this.workers.indexOf(P)+1;this.debug(`Running task #${E.id} on worker #${C}...`),this.eventSubject.next({type:a.PoolEventType.taskStart,taskID:E.id,workerID:C});try{const I=yield E.run(yield P.init);this.debug(`Task #${E.id} completed successfully`),this.eventSubject.next({type:a.PoolEventType.taskCompleted,returnValue:I,taskID:E.id,workerID:C})}catch(I){this.debug(`Task #${E.id} failed`),this.eventSubject.next({type:a.PoolEventType.taskFailed,taskID:E.id,error:I,workerID:C})}})}run(P,E){return e(this,void 0,void 0,function*(){const C=e(this,void 0,void 0,function*(){const I=()=>{P.runningTasks=P.runningTasks.filter(T=>T!==C)};yield f(0);try{yield this.runPoolTask(P,E)}finally{I(),this.isClosing||this.scheduleWork()}});P.runningTasks.push(C)})}scheduleWork(){this.debug("Attempt de-queueing a task in order to run it...");const P=this.findIdlingWorker();if(!P)return;const E=this.taskQueue.shift();if(!E){this.debug("Task queue is empty"),this.eventSubject.next({type:a.PoolEventType.taskQueueDrained});return}this.run(P,E)}taskCompletion(P){return new Promise((E,C)=>{const I=this.events().subscribe(T=>{T.type===a.PoolEventType.taskCompleted&&T.taskID===P?(I.unsubscribe(),E(T.returnValue)):T.type===a.PoolEventType.taskFailed&&T.taskID===P?(I.unsubscribe(),C(T.error)):T.type===a.PoolEventType.terminated&&(I.unsubscribe(),C(Error("Pool has been terminated before task was run.")))})})}settled(P=!1){return e(this,void 0,void 0,function*(){const E=()=>p(this.workers,T=>T.runningTasks),C=[],I=this.eventObservable.subscribe(T=>{T.type===a.PoolEventType.taskFailed&&C.push(T.error)});return this.initErrors.length>0?Promise.reject(this.initErrors[0]):P&&this.taskQueue.length===0?(yield i.allSettled(E()),C):(yield new Promise((T,G)=>{const V=this.eventObservable.subscribe({next(A){A.type===a.PoolEventType.taskQueueDrained&&(V.unsubscribe(),T(void 0))},error:G})}),yield i.allSettled(E()),I.unsubscribe(),C)})}completed(P=!1){return e(this,void 0,void 0,function*(){const E=this.settled(P),C=new Promise((T,G)=>{const V=this.eventObservable.subscribe({next(A){A.type===a.PoolEventType.taskQueueDrained?(V.unsubscribe(),T(E)):A.type===a.PoolEventType.taskFailed&&(V.unsubscribe(),G(A.error))},error:G})}),I=yield Promise.race([E,C]);if(I.length>0)throw I[0]})}events(){return this.eventObservable}queue(P){const{maxQueuedJobs:E=1/0}=this.options;if(this.isClosing)throw Error("Cannot schedule pool tasks after terminate() has been called.");if(this.initErrors.length>0)throw this.initErrors[0];const C=this.nextTaskID++,I=this.taskCompletion(C);I.catch(G=>{this.debug(`Task #${C} errored:`,G)});const T={id:C,run:P,cancel:()=>{this.taskQueue.indexOf(T)!==-1&&(this.taskQueue=this.taskQueue.filter(G=>G!==T),this.eventSubject.next({type:a.PoolEventType.taskCanceled,taskID:T.id}))},then:I.then.bind(I)};if(this.taskQueue.length>=E)throw Error(`Maximum number of pool tasks queued. Refusing to queue another one.
This usually happens for one of two reasons: We are either at peak workload right now or some tasks just won't finish, thus blocking the pool.`);return this.debug(`Queueing task #${T.id}...`),this.taskQueue.push(T),this.eventSubject.next({type:a.PoolEventType.taskQueued,taskID:T.id}),this.scheduleWork(),T}terminate(P){return e(this,void 0,void 0,function*(){this.isClosing=!0,P||(yield this.completed(!0)),this.eventSubject.next({type:a.PoolEventType.terminated,remainingQueue:[...this.taskQueue]}),this.eventSubject.complete(),yield Promise.all(this.workers.map(E=>e(this,void 0,void 0,function*(){return l.Thread.terminate(yield E.init)})))})}}_.EventType=a.PoolEventType;function k(S,P){return new _(S,P)}k.EventType=a.PoolEventType,t.Pool=k})(Sr)),Sr}var vs={},ao={},Hg;function dM(){if(Hg)return ao;Hg=1,Object.defineProperty(ao,"__esModule",{value:!0}),ao.createPromiseWithResolver=void 0;const t=()=>{};function e(){let n=!1,s,r=t;return[new Promise(a=>{n?a(s):r=a}),a=>{n=!0,s=a,r(s)}]}return ao.createPromiseWithResolver=e,ao}var Ou={},Kg;function fM(){return Kg||(Kg=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.WorkerEventType=void 0,(function(e){e.internalError="internalError",e.message="message",e.termination="termination"})(t.WorkerEventType||(t.WorkerEventType={}))})(Ou)),Ou}var bs={},lo={},Yg;function hM(){if(Yg)return lo;Yg=1,Object.defineProperty(lo,"__esModule",{value:!0}),lo.ObservablePromise=void 0;const t=pc,e=()=>{},n=a=>a,s=a=>Promise.resolve().then(a);function r(a){throw a}function i(a){return a&&typeof a.then=="function"}class o extends t.Observable{constructor(l){super(c=>{const u=this,f=Object.assign(Object.assign({},c),{complete(){c.complete(),u.onCompletion()},error(p){c.error(p),u.onError(p)},next(p){c.next(p),u.onNext(p)}});try{return this.initHasRun=!0,l(f)}catch(p){f.error(p)}}),this.initHasRun=!1,this.fulfillmentCallbacks=[],this.rejectionCallbacks=[],this.firstValueSet=!1,this.state="pending"}onNext(l){this.firstValueSet||(this.firstValue=l,this.firstValueSet=!0)}onError(l){this.state="rejected",this.rejection=l;for(const c of this.rejectionCallbacks)s(()=>c(l))}onCompletion(){this.state="fulfilled";for(const l of this.fulfillmentCallbacks)s(()=>l(this.firstValue))}then(l,c){const u=l||n,f=c||r;let p=!1;return new Promise((m,v)=>{const _=S=>{if(!p){p=!0;try{m(f(S))}catch(P){v(P)}}},k=S=>{try{m(u(S))}catch(P){_(P)}};if(this.initHasRun||this.subscribe({error:_}),this.state==="fulfilled")return m(u(this.firstValue));if(this.state==="rejected")return p=!0,m(f(this.rejection));this.fulfillmentCallbacks.push(k),this.rejectionCallbacks.push(_)})}catch(l){return this.then(void 0,l)}finally(l){const c=l||e;return this.then(u=>(c(),u),()=>c())}static from(l){return i(l)?new o(c=>{const u=p=>{c.next(p),c.complete()},f=p=>{c.error(p)};l.then(u,f)}):super.from(l)}}return lo.ObservablePromise=o,lo}var Cr={},Gg;function zl(){if(Gg)return Cr;Gg=1,Object.defineProperty(Cr,"__esModule",{value:!0}),Cr.Transfer=Cr.isTransferDescriptor=void 0;const t=yf();function e(r){return!(!r||typeof r!="object")}function n(r){return r&&typeof r=="object"&&r[t.$transferable]}Cr.isTransferDescriptor=n;function s(r,i){if(!i){if(!e(r))throw Error();i=[r]}return{[t.$transferable]:!0,send:r,transferables:i}}return Cr.Transfer=s,Cr}var Mu={},Xg;function bb(){return Xg||(Xg=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.WorkerMessageType=t.MasterMessageType=void 0,(function(e){e.cancel="cancel",e.run="run"})(t.MasterMessageType||(t.MasterMessageType={})),(function(e){e.error="error",e.init="init",e.result="result",e.running="running",e.uncaughtError="uncaughtError"})(t.WorkerMessageType||(t.WorkerMessageType={}))})(Mu)),Mu}var Qg;function pM(){if(Qg)return bs;Qg=1;var t=bs&&bs.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(bs,"__esModule",{value:!0}),bs.createProxyModule=bs.createProxyFunction=void 0;const e=t(gf()),n=pc,s=Yo(),r=hM(),i=zl(),o=bb(),a=e.default("threads:master:messages");let l=1;const c=S=>Array.from(new Set(S)),u=S=>S&&S.type===o.WorkerMessageType.error,f=S=>S&&S.type===o.WorkerMessageType.result,p=S=>S&&S.type===o.WorkerMessageType.running;function m(S,P){return new n.Observable(E=>{let C;const I=(T=>{if(a("Message from worker:",T.data),!(!T.data||T.data.uid!==P)){if(p(T.data))C=T.data.resultType;else if(f(T.data))C==="promise"?(typeof T.data.payload<"u"&&E.next(s.deserialize(T.data.payload)),E.complete(),S.removeEventListener("message",I)):(T.data.payload&&E.next(s.deserialize(T.data.payload)),T.data.complete&&(E.complete(),S.removeEventListener("message",I)));else if(u(T.data)){const G=s.deserialize(T.data.error);E.error(G),S.removeEventListener("message",I)}}});return S.addEventListener("message",I),()=>{if(C==="observable"||!C){const T={type:o.MasterMessageType.cancel,uid:P};S.postMessage(T)}S.removeEventListener("message",I)}})}function v(S){if(S.length===0)return{args:[],transferables:[]};const P=[],E=[];for(const C of S)i.isTransferDescriptor(C)?(P.push(s.serialize(C.send)),E.push(...C.transferables)):P.push(s.serialize(C));return{args:P,transferables:E.length===0?E:c(E)}}function _(S,P){return((...E)=>{const C=l++,{args:I,transferables:T}=v(E),G={type:o.MasterMessageType.run,uid:C,method:P,args:I};a("Sending command to run function to worker:",G);try{S.postMessage(G,T)}catch(V){return r.ObservablePromise.from(Promise.reject(V))}return r.ObservablePromise.from(n.multicast(m(S,C)))})}bs.createProxyFunction=_;function k(S,P){const E={};for(const C of P)E[C]=_(S,C);return E}return bs.createProxyModule=k,bs}var Jg;function gM(){if(Jg)return vs;Jg=1;var t={},e=vs&&vs.__awaiter||function(T,G,V,A){function Z(K){return K instanceof V?K:new V(function(j){j(K)})}return new(V||(V=Promise))(function(K,j){function de(Se){try{Ae(A.next(Se))}catch(Pe){j(Pe)}}function ge(Se){try{Ae(A.throw(Se))}catch(Pe){j(Pe)}}function Ae(Se){Se.done?K(Se.value):Z(Se.value).then(de,ge)}Ae((A=A.apply(T,G||[])).next())})},n=vs&&vs.__importDefault||function(T){return T&&T.__esModule?T:{default:T}};Object.defineProperty(vs,"__esModule",{value:!0}),vs.spawn=void 0;const s=n(gf()),r=pc,i=Yo(),o=dM(),a=yf(),l=fM(),c=pM(),u=s.default("threads:master:messages"),f=s.default("threads:master:spawn"),p=s.default("threads:master:thread-utils"),m=T=>T&&T.type==="init",v=T=>T&&T.type==="uncaughtError",_=typeof process<"u"&&t.THREADS_WORKER_INIT_TIMEOUT?Number.parseInt(t.THREADS_WORKER_INIT_TIMEOUT,10):1e4;function k(T,G,V){return e(this,void 0,void 0,function*(){let A;const Z=new Promise((j,de)=>{A=setTimeout(()=>de(Error(V)),G)}),K=yield Promise.race([T,Z]);return clearTimeout(A),K})}function S(T){return new Promise((G,V)=>{const A=(Z=>{u("Message from worker before finishing initialization:",Z.data),m(Z.data)?(T.removeEventListener("message",A),G(Z.data)):v(Z.data)&&(T.removeEventListener("message",A),V(i.deserialize(Z.data.error)))});T.addEventListener("message",A)})}function P(T,G){return new r.Observable(V=>{const A=(K=>{const j={type:l.WorkerEventType.message,data:K.data};V.next(j)}),Z=(K=>{p("Unhandled promise rejection event in thread:",K);const j={type:l.WorkerEventType.internalError,error:Error(K.reason)};V.next(j)});T.addEventListener("message",A),T.addEventListener("unhandledrejection",Z),G.then(()=>{const K={type:l.WorkerEventType.termination};T.removeEventListener("message",A),T.removeEventListener("unhandledrejection",Z),V.next(K),V.complete()})})}function E(T){const[G,V]=o.createPromiseWithResolver();return{terminate:()=>e(this,void 0,void 0,function*(){p("Terminating worker"),yield T.terminate(),V()}),termination:G}}function C(T,G,V,A){const Z=V.filter(K=>K.type===l.WorkerEventType.internalError).map(K=>K.error);return Object.assign(T,{[a.$errors]:Z,[a.$events]:V,[a.$terminate]:A,[a.$worker]:G})}function I(T,G){return e(this,void 0,void 0,function*(){f("Initializing new thread");const V=G&&G.timeout?G.timeout:_,Z=(yield k(S(T),V,`Timeout: Did not receive an init message from worker after ${V}ms. Make sure the worker calls expose().`)).exposed,{termination:K,terminate:j}=E(T),de=P(T,K);if(Z.type==="function"){const ge=c.createProxyFunction(T);return C(ge,T,de,j)}else if(Z.type==="module"){const ge=c.createProxyModule(T,Z.methods);return C(ge,T,de,j)}else{const ge=Z.type;throw Error(`Worker init message states unexpected type of expose(): ${ge}`)}})}return vs.spawn=I,vs}var Zg;function mM(){return Zg||(Zg=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Worker=t.BlobWorker=t.isWorkerRuntime=t.Thread=t.spawn=t.Pool=void 0;const e=fb();Object.defineProperty(t,"isWorkerRuntime",{enumerable:!0,get:function(){return e.isWorkerRuntime}});var n=uM();Object.defineProperty(t,"Pool",{enumerable:!0,get:function(){return n.Pool}});var s=gM();Object.defineProperty(t,"spawn",{enumerable:!0,get:function(){return s.spawn}});var r=vb();Object.defineProperty(t,"Thread",{enumerable:!0,get:function(){return r.Thread}}),t.BlobWorker=e.getWorkerImplementation().blob,t.Worker=e.getWorkerImplementation().default})(Cu)),Cu}var Pr={},Tu,em;function yM(){return em||(em=1,Tu=t=>t?typeof Symbol.observable=="symbol"&&typeof t[Symbol.observable]=="function"?t===t[Symbol.observable]():typeof t["@@observable"]=="function"?t===t["@@observable"]():!1:!1),Tu}var tl={},tm;function vM(){if(tm)return tl;tm=1,Object.defineProperty(tl,"__esModule",{value:!0});const t=function(){const r=typeof self<"u"&&typeof Window<"u"&&self instanceof Window;return!!(typeof self<"u"&&self.postMessage&&!r)},e=function(r,i){self.postMessage(r,i)},n=function(r){const i=a=>{r(a.data)},o=()=>{self.removeEventListener("message",i)};return self.addEventListener("message",i),o};return tl.default={isWorkerRuntime:t,postMessageToMaster:e,subscribeToMasterMessages:n},tl}var nm;function bM(){return nm||(nm=1,(function(t){var e=Pr&&Pr.__awaiter||function(A,Z,K,j){function de(ge){return ge instanceof K?ge:new K(function(Ae){Ae(ge)})}return new(K||(K=Promise))(function(ge,Ae){function Se(ee){try{te(j.next(ee))}catch(Y){Ae(Y)}}function Pe(ee){try{te(j.throw(ee))}catch(Y){Ae(Y)}}function te(ee){ee.done?ge(ee.value):de(ee.value).then(Se,Pe)}te((j=j.apply(A,Z||[])).next())})},n=Pr&&Pr.__importDefault||function(A){return A&&A.__esModule?A:{default:A}};Object.defineProperty(t,"__esModule",{value:!0}),t.expose=t.isWorkerRuntime=t.Transfer=t.registerSerializer=void 0;const s=n(yM()),r=Yo(),i=zl(),o=bb(),a=n(vM());var l=Yo();Object.defineProperty(t,"registerSerializer",{enumerable:!0,get:function(){return l.registerSerializer}});var c=zl();Object.defineProperty(t,"Transfer",{enumerable:!0,get:function(){return c.Transfer}}),t.isWorkerRuntime=a.default.isWorkerRuntime;let u=!1;const f=new Map,p=A=>A&&A.type===o.MasterMessageType.cancel,m=A=>A&&A.type===o.MasterMessageType.run,v=A=>s.default(A)||_(A);function _(A){return A&&typeof A=="object"&&typeof A.subscribe=="function"}function k(A){return i.isTransferDescriptor(A)?{payload:A.send,transferables:A.transferables}:{payload:A,transferables:void 0}}function S(){const A={type:o.WorkerMessageType.init,exposed:{type:"function"}};a.default.postMessageToMaster(A)}function P(A){const Z={type:o.WorkerMessageType.init,exposed:{type:"module",methods:A}};a.default.postMessageToMaster(Z)}function E(A,Z){const{payload:K,transferables:j}=k(Z),de={type:o.WorkerMessageType.error,uid:A,error:r.serialize(K)};a.default.postMessageToMaster(de,j)}function C(A,Z,K){const{payload:j,transferables:de}=k(K),ge={type:o.WorkerMessageType.result,uid:A,complete:Z?!0:void 0,payload:j};a.default.postMessageToMaster(ge,de)}function I(A,Z){const K={type:o.WorkerMessageType.running,uid:A,resultType:Z};a.default.postMessageToMaster(K)}function T(A){try{const Z={type:o.WorkerMessageType.uncaughtError,error:r.serialize(A)};a.default.postMessageToMaster(Z)}catch(Z){console.error(`Not reporting uncaught error back to master thread as it occured while reporting an uncaught error already.
Latest error:`,Z,`
Original error:`,A)}}function G(A,Z,K){return e(this,void 0,void 0,function*(){let j;try{j=Z(...K)}catch(ge){return E(A,ge)}const de=v(j)?"observable":"promise";if(I(A,de),v(j)){const ge=j.subscribe(Ae=>C(A,!1,r.serialize(Ae)),Ae=>{E(A,r.serialize(Ae)),f.delete(A)},()=>{C(A,!0),f.delete(A)});f.set(A,ge)}else try{const ge=yield j;C(A,!0,r.serialize(ge))}catch(ge){E(A,r.serialize(ge))}})}function V(A){if(!a.default.isWorkerRuntime())throw Error("expose() called in the master thread.");if(u)throw Error("expose() called more than once. This is not possible. Pass an object to expose() if you want to expose multiple functions.");if(u=!0,typeof A=="function")a.default.subscribeToMasterMessages(Z=>{m(Z)&&!Z.method&&G(Z.uid,A,Z.args.map(r.deserialize))}),S();else if(typeof A=="object"&&A){a.default.subscribeToMasterMessages(K=>{m(K)&&K.method&&G(K.uid,A[K.method],K.args.map(r.deserialize))});const Z=Object.keys(A).filter(K=>typeof A[K]=="function");P(Z)}else throw Error(`Invalid argument passed to expose(). Expected a function or an object, got: ${A}`);a.default.subscribeToMasterMessages(Z=>{if(p(Z)){const K=Z.uid,j=f.get(K);j&&(j.unsubscribe(),f.delete(K))}})}t.expose=V,typeof self<"u"&&typeof self.addEventListener=="function"&&a.default.isWorkerRuntime()&&(self.addEventListener("error",A=>{setTimeout(()=>T(A.error||A),250)}),self.addEventListener("unhandledrejection",A=>{const Z=A.reason;Z&&typeof Z.message=="string"&&setTimeout(()=>T(Z),250)})),typeof process<"u"&&typeof process.on=="function"&&a.default.isWorkerRuntime()&&(process.on("uncaughtException",A=>{setTimeout(()=>T(A),250)}),process.on("unhandledRejection",A=>{A&&typeof A.message=="string"&&setTimeout(()=>T(A),250)}))})(Pr)),Pr}var sm;function _M(){return sm||(sm=1,(function(t){var e=wr&&wr.__createBinding||(Object.create?(function(a,l,c,u){u===void 0&&(u=c),Object.defineProperty(a,u,{enumerable:!0,get:function(){return l[c]}})}):(function(a,l,c,u){u===void 0&&(u=c),a[u]=l[c]})),n=wr&&wr.__exportStar||function(a,l){for(var c in a)c!=="default"&&!Object.prototype.hasOwnProperty.call(l,c)&&e(l,a,c)};Object.defineProperty(t,"__esModule",{value:!0}),t.Transfer=t.DefaultSerializer=t.expose=t.registerSerializer=void 0;var s=Yo();Object.defineProperty(t,"registerSerializer",{enumerable:!0,get:function(){return s.registerSerializer}}),n(mM(),t);var r=bM();Object.defineProperty(t,"expose",{enumerable:!0,get:function(){return r.expose}});var i=db();Object.defineProperty(t,"DefaultSerializer",{enumerable:!0,get:function(){return i.DefaultSerializer}});var o=zl();Object.defineProperty(t,"Transfer",{enumerable:!0,get:function(){return o.Transfer}})})(wr)),wr}var wM=_M();const ar=fv(wM);ar.registerSerializer;const _b=ar.spawn;ar.BlobWorker;ar.DefaultSerializer;ar.Pool;const wb=ar.Thread,xM=ar.Transfer;ar.Worker;function kM(t){return new Worker("/mtg-pwa/assets/MTGJSONUploadWorker-BuQfcII9.js",{name:t?.name})}var Sn=Uint8Array,pi=Uint16Array,SM=Int32Array,xb=new Sn([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),kb=new Sn([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),CM=new Sn([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Sb=function(t,e){for(var n=new pi(31),s=0;s<31;++s)n[s]=e+=1<<t[s-1];for(var r=new SM(n[30]),s=1;s<30;++s)for(var i=n[s];i<n[s+1];++i)r[i]=i-n[s]<<5|s;return{b:n,r}},Cb=Sb(xb,2),Pb=Cb.b,PM=Cb.r;Pb[28]=258,PM[258]=28;var AM=Sb(kb,0),IM=AM.b,vd=new pi(32768);for(var St=0;St<32768;++St){var zs=(St&43690)>>1|(St&21845)<<1;zs=(zs&52428)>>2|(zs&13107)<<2,zs=(zs&61680)>>4|(zs&3855)<<4,vd[St]=((zs&65280)>>8|(zs&255)<<8)>>1}var To=(function(t,e,n){for(var s=t.length,r=0,i=new pi(e);r<s;++r)t[r]&&++i[t[r]-1];var o=new pi(e);for(r=1;r<e;++r)o[r]=o[r-1]+i[r-1]<<1;var a;if(n){a=new pi(1<<e);var l=15-e;for(r=0;r<s;++r)if(t[r])for(var c=r<<4|t[r],u=e-t[r],f=o[t[r]-1]++<<u,p=f|(1<<u)-1;f<=p;++f)a[vd[f]>>l]=c}else for(a=new pi(s),r=0;r<s;++r)t[r]&&(a[r]=vd[o[t[r]-1]++]>>15-t[r]);return a}),ra=new Sn(288);for(var St=0;St<144;++St)ra[St]=8;for(var St=144;St<256;++St)ra[St]=9;for(var St=256;St<280;++St)ra[St]=7;for(var St=280;St<288;++St)ra[St]=8;var Ab=new Sn(32);for(var St=0;St<32;++St)Ab[St]=5;var EM=To(ra,9,1),OM=To(Ab,5,1),Du=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},Un=function(t,e,n){var s=e/8|0;return(t[s]|t[s+1]<<8)>>(e&7)&n},Ru=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},MM=function(t){return(t+7)/8|0},Ib=function(t,e,n){return(e==null||e<0)&&(e=0),(n==null||n>t.length)&&(n=t.length),new Sn(t.subarray(e,n))},TM=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],$n=function(t,e,n){var s=new Error(e||TM[t]);if(s.code=t,Error.captureStackTrace&&Error.captureStackTrace(s,$n),!n)throw s;return s},DM=function(t,e,n,s){var r=t.length,i=0;if(!r||e.f&&!e.l)return n||new Sn(0);var o=!n,a=o||e.i!=2,l=e.i;o&&(n=new Sn(r*3));var c=function(nt){var M=n.length;if(nt>M){var $=new Sn(Math.max(M*2,nt));$.set(n),n=$}},u=e.f||0,f=e.p||0,p=e.b||0,m=e.l,v=e.d,_=e.m,k=e.n,S=r*8;do{if(!m){u=Un(t,f,1);var P=Un(t,f+1,3);if(f+=3,P)if(P==1)m=EM,v=OM,_=9,k=5;else if(P==2){var T=Un(t,f,31)+257,G=Un(t,f+10,15)+4,V=T+Un(t,f+5,31)+1;f+=14;for(var A=new Sn(V),Z=new Sn(19),K=0;K<G;++K)Z[CM[K]]=Un(t,f+K*3,7);f+=G*3;for(var j=Du(Z),de=(1<<j)-1,ge=To(Z,j,1),K=0;K<V;){var Ae=ge[Un(t,f,de)];f+=Ae&15;var E=Ae>>4;if(E<16)A[K++]=E;else{var Se=0,Pe=0;for(E==16?(Pe=3+Un(t,f,3),f+=2,Se=A[K-1]):E==17?(Pe=3+Un(t,f,7),f+=3):E==18&&(Pe=11+Un(t,f,127),f+=7);Pe--;)A[K++]=Se}}var te=A.subarray(0,T),ee=A.subarray(T);_=Du(te),k=Du(ee),m=To(te,_,1),v=To(ee,k,1)}else $n(1);else{var E=MM(f)+4,C=t[E-4]|t[E-3]<<8,I=E+C;if(I>r){l&&$n(0);break}a&&c(p+C),n.set(t.subarray(E,I),p),e.b=p+=C,e.p=f=I*8,e.f=u;continue}if(f>S){l&&$n(0);break}}a&&c(p+131072);for(var Y=(1<<_)-1,Le=(1<<k)-1,_e=f;;_e=f){var Se=m[Ru(t,f)&Y],We=Se>>4;if(f+=Se&15,f>S){l&&$n(0);break}if(Se||$n(2),We<256)n[p++]=We;else if(We==256){_e=f,m=null;break}else{var wt=We-254;if(We>264){var K=We-257,gt=xb[K];wt=Un(t,f,(1<<gt)-1)+Pb[K],f+=gt}var rt=v[Ru(t,f)&Le],ae=rt>>4;rt||$n(3),f+=rt&15;var ee=IM[ae];if(ae>3){var gt=kb[ae];ee+=Ru(t,f)&(1<<gt)-1,f+=gt}if(f>S){l&&$n(0);break}a&&c(p+131072);var Me=p+wt;if(p<ee){var se=i-ee,Fe=Math.min(ee,Me);for(se+p<0&&$n(3);p<Fe;++p)n[p]=s[se+p]}for(;p<Me;++p)n[p]=n[p-ee]}}e.l=m,e.p=_e,e.b=p,e.f=u,m&&(u=1,e.m=_,e.d=v,e.n=k)}while(!u);return p!=n.length&&o?Ib(n,0,p):n.subarray(0,p)},RM=new Sn(0),$M=function(t){(t[0]!=31||t[1]!=139||t[2]!=8)&&$n(6,"invalid gzip data");var e=t[3],n=10;e&4&&(n+=(t[10]|t[11]<<8)+2);for(var s=(e>>3&1)+(e>>4&1);s>0;s-=!t[n++]);return n+(e&2)},FM=function(t){var e=t.length;return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0};function rm(t,e){var n=$M(t);return n+8>t.length&&$n(6,"invalid gzip data"),DM(t.subarray(n,-8),{i:2},new Sn(FM(t)),e)}var bd=typeof TextDecoder<"u"&&new TextDecoder,LM=0;try{bd.decode(RM,{stream:!0}),LM=1}catch{}var BM=function(t){for(var e="",n=0;;){var s=t[n++],r=(s>127)+(s>223)+(s>239);if(n+r>t.length)return{s:e,r:Ib(t,n-1)};r?r==3?(s=((s&15)<<18|(t[n++]&63)<<12|(t[n++]&63)<<6|t[n++]&63)-65536,e+=String.fromCharCode(55296|s>>10,56320|s&1023)):r&1?e+=String.fromCharCode((s&31)<<6|t[n++]&63):e+=String.fromCharCode((s&15)<<12|(t[n++]&63)<<6|t[n++]&63):e+=String.fromCharCode(s)}};function im(t,e){var n;if(bd)return bd.decode(t);var s=BM(t),r=s.s,n=s.r;return n.length&&$n(8),r}const $u="mtgjson.idMap.v1",jM="https://mtgjson.com/api/v5/AllIdentifiers.json.gz",NM="https://mtgjson.com/api/v5/AllPrices.json.gz";function om(t){const e={},n=t?.data??t,s=(r,i)=>{if(!r||!i)return;const o=i.identifiers??i,a=o?.scryfallId,l=o?.scryfallOracleId;a&&(e[a]=r),l&&(e[l]=r)};if(Array.isArray(n))for(const r of n){const i=r?.uuid??r?.cardId??r?.id;s(i,r)}else if(n&&typeof n=="object")for(const[r,i]of Object.entries(n))s(r,i);else throw new Error("[MTGJSONUploadService] Unrecognized AllIdentifiers format (no array/object).");if(Object.keys(e).length===0){const r=n&&typeof n=="object"?Object.keys(n).slice(0,5):[];throw console.warn("[MTGJSONUploadService] AllIdentifiers parsed but no entries found. Sample keys:",r),new Error("[MTGJSONUploadService] Parsed AllIdentifiers but produced an empty id map.")}return e}async function zM(t){try{const p=await Br.get($u);if(p&&typeof p=="object")return console.log("[MTGJSONUploadService] Using cached AllIdentifiers id map."),t({type:"downloading-all-identifiers",message:"Using cached AllIdentifiers mapping...",percentage:50}),t({type:"processing-all-identifiers",message:"Processing cached AllIdentifiers mapping...",percentage:75}),t({type:"processing-all-identifiers",message:"AllIdentifiers mapping processed",percentage:100}),p}catch(p){console.warn("[MTGJSONUploadService] Could not read cached id map:",p)}t({type:"downloading-all-identifiers",message:"Downloading AllIdentifiers.json.gz...",percentage:0}),console.log("[MTGJSONUploadService] Downloading AllIdentifiers.json.gz...");const e=await fetch(jM,{mode:"cors"});if(!e.ok)throw new Error(`[MTGJSONUploadService] Failed to fetch AllIdentifiers.json.gz: ${e.status} ${e.statusText}`);const n=e.headers.get("content-length"),s=parseInt(n||"0",10);let r=0;const i=e.body?.getReader(),o=[];if(i&&s)for(;;){const{done:p,value:m}=await i.read();if(p)break;o.push(m),r+=m.length;const v=Math.round(r/s*50);t({type:"downloading-all-identifiers",message:`Downloading AllIdentifiers.json.gz... (${Ul(r)} / ${Ul(s)})`,percentage:v})}else{const p=new Uint8Array(await e.arrayBuffer());t({type:"downloading-all-identifiers",message:"Downloaded AllIdentifiers.json.gz",percentage:50}),t({type:"processing-all-identifiers",message:"Processing AllIdentifiers mapping...",percentage:60});const m=im(rm(p)),v=JSON.parse(m),_=om(v);t({type:"processing-all-identifiers",message:"Caching AllIdentifiers mapping...",percentage:80});try{await Br.set($u,_)}catch(k){console.warn("[MTGJSONUploadService] Could not cache id map:",k)}return t({type:"processing-all-identifiers",message:"AllIdentifiers mapping processed",percentage:100}),console.log(`[MTGJSONUploadService] Built AllIdentifiers id map with ${Object.keys(_).length} entries.`),_}const a=new Uint8Array(r);let l=0;for(const p of o)a.set(p,l),l+=p.length;t({type:"downloading-all-identifiers",message:"Downloaded AllIdentifiers.json.gz",percentage:50});const c=im(rm(a)),u=JSON.parse(c);t({type:"processing-all-identifiers",message:"Processing AllIdentifiers mapping...",percentage:60});const f=om(u);t({type:"processing-all-identifiers",message:"Caching AllIdentifiers mapping...",percentage:80});try{await Br.set($u,f)}catch(p){console.warn("[MTGJSONUploadService] Could not cache id map:",p)}return t({type:"processing-all-identifiers",message:"AllIdentifiers mapping processed",percentage:100}),console.log(`[MTGJSONUploadService] Built AllIdentifiers id map with ${Object.keys(f).length} entries.`),f}class UM{static async upload(e,n){console.log(`[MTGJSONUploadService] Starting upload for file: ${e==="auto"?"AUTOMATIC DOWNLOAD":e.name}`);let s=null;try{console.log("[MTGJSONUploadService] Spawning worker..."),s=await _b(new kM,{timeout:3e5}),console.log("[MTGJSONUploadService] Worker spawned."),console.log("[MTGJSONUploadService] Fetching wanted cards from DB...");const r=await Bn.getAll();console.log(`[MTGJSONUploadService] Found ${r.length} cards.`);const i=await zM(n),o=Array.from(new Set(r.map(c=>i[c.id]||(c.oracleId?i[c.oracleId]:void 0)).filter(Boolean)));console.log(`[MTGJSONUploadService] Resolved ${o.length} MTGJSON UUIDs from ${r.length} cards.`),o.length===0&&console.warn("[MTGJSONUploadService] No MTGJSON UUIDs resolved from local cards. Check that your cards contain Scryfall ids/oracleIds and that AllIdentifiers was parsed correctly.");const a={};for(const c of r){const u=i[c.id]||(c.oracleId?i[c.oracleId]:void 0);u&&(a[u]=c.id)}let l;if(e==="auto"){console.log("[MTGJSONUploadService] Downloading AllPrices.json.gz automatically..."),n({type:"downloading-all-prices",message:"Downloading AllPrices.json.gz...",percentage:0});const c=await fetch(NM,{mode:"cors"});if(!c.ok)throw new Error(`[MTGJSONUploadService] Failed to fetch AllPrices.json.gz: ${c.status} ${c.statusText}`);const u=c.headers.get("content-length"),f=parseInt(u||"0",10);let p=0;const m=c.body?.getReader(),v=[];if(m&&f)for(;;){const{done:P,value:E}=await m.read();if(P)break;v.push(E),p+=E.length;const C=Math.round(p/f*100);n({type:"downloading-all-prices",message:`Downloading AllPrices.json.gz... (${Ul(p)} / ${Ul(f)})`,percentage:C})}else{const P=await c.arrayBuffer(),E=new Blob([P],{type:"application/gzip"});l=new File([E],"AllPrices.json.gz",{type:"application/gzip"})}const _=new Uint8Array(p);let k=0;for(const P of v)_.set(P,k),k+=P.length;const S=new Blob([_],{type:"application/gzip"});l=new File([S],"AllPrices.json.gz",{type:"application/gzip"}),console.log(`[MTGJSONUploadService] Downloaded AllPrices.json.gz (${l.size} bytes)`)}else l=e;console.log("[MTGJSONUploadService] Calling worker.upload()..."),n({type:"importing-price-points",message:"Importing price points...",percentage:0});try{const c=new MessageChannel;await s.setProgressPort(xM(c.port2,[c.port2])),c.port1.onmessage=f=>{const p=f.data;n({type:"importing-price-points",message:`Processing ${p.processedCards}/${p.totalWanted} cards  ${p.writtenPricePoints.toLocaleString()} price points`,percentage:p.percentage})};const u=await s.upload(l,o,a);console.log(`[MTGJSONUploadService] Worker finished processing. ${u.processed} cards processed, ${u.written} price points written.`),n({type:"completed",message:`Import finished! ${u.processed} cards, ${u.written.toLocaleString()} price points.`,percentage:100,processedCards:u.processed,writtenPricePoints:u.written})}catch(c){throw console.error("[MTGJSONUploadService] Worker returned an error:",c),c}}catch(r){throw console.error("[MTGJSONUploadService] An error occurred in the upload service:",r),r}finally{if(s){console.log("[MTGJSONUploadService] Terminating worker.");try{await wb.terminate(s)}catch(r){console.error("[MTGJSONUploadService] Error terminating worker:",r)}}}}}function Ul(t){if(t===0)return"0 Bytes";const e=1024,n=["Bytes","KB","MB","GB"],s=Math.floor(Math.log(t)/Math.log(e));return parseFloat((t/Math.pow(e,s)).toFixed(2))+" "+n[s]}const qM={class:"mtgjson-wizard"},WM={class:"card"},VM={class:"card-body"},HM={key:0,class:"progress-section"},KM={class:"phase-section mb-3"},YM={class:"progress"},GM=["aria-valuenow"],XM={class:"phase-message mt-1"},QM={key:0,class:"phase-section mb-3"},JM={class:"progress"},ZM=["aria-valuenow"],eT={class:"phase-message mt-1"},tT={key:1,class:"phase-section mb-3"},nT={class:"progress"},sT=["aria-valuenow"],rT={class:"phase-message mt-1"},iT={key:1,class:"alert alert-success"},oT={key:2,class:"error-messages"},aT={key:0,class:"mt-2"},lT={class:"wizard-navigation pt-3"},cT=["disabled"],uT=Ze({__name:"MtgjsonImportWizard",setup(t){const e=he(!1),n=he(!1),s=he(""),r=he(50),i=he("Using cached AllIdentifiers mapping..."),o=he(0),a=he(""),l=he(0),c=he(""),u=he(0),f=he([]),p=async()=>{if(!e.value){e.value=!0,n.value=!1,f.value=[],s.value="",r.value=0,i.value="Downloading AllIdentifiers.json.gz...",o.value=0,a.value="",l.value=0,c.value="",u.value=0;try{await UM.upload("auto",m=>{switch(s.value=m.type,m.type){case"downloading-all-identifiers":r.value=m.percentage||0,i.value=m.message;break;case"processing-all-identifiers":r.value=m.percentage||0,i.value=m.message;break;case"downloading-all-prices":o.value=m.percentage||0,a.value=m.message;break;case"importing-price-points":l.value=m.percentage||0,c.value=m.message;break;case"completed":l.value=100,c.value=m.message,u.value=m.writtenPricePoints??0,e.value=!1,n.value=!0;break}})}catch(m){f.value.push("Failed to import MTGJSON data: "+m.message),e.value=!1}}};return(m,v)=>(q(),J("div",qM,[v[5]||(v[5]=w("h1",null,"MTGJSON Price Import",-1)),v[6]||(v[6]=w("p",null,"Import historical price data from MTGJSON. This will populate the price history for your cards for the last 90 days.",-1)),w("div",WM,[w("div",VM,[v[4]||(v[4]=w("div",{class:"info-section mb-4"},[w("p",null,[w("strong",null,'What happens when you click "Import Prices":')]),w("ol",null,[w("li",null,"Download AllIdentifiers.json.gz (~160MB compressed)"),w("li",null,"Download AllPrices.json.gz (~130MB compressed)"),w("li",null,"Process the files to extract price data for your cards"),w("li",null,"Store the price history in your local database")])],-1)),e.value?(q(),J("div",HM,[w("div",KM,[v[0]||(v[0]=w("div",{class:"phase-title mb-1"},"Downloading AllIdentifiers.json.gz",-1)),w("div",YM,[w("div",{class:"progress-bar",role:"progressbar",style:An({width:r.value+"%"}),"aria-valuenow":r.value,"aria-valuemin":"0","aria-valuemax":"100"},oe(r.value)+"%",13,GM)]),w("div",XM,oe(i.value),1)]),s.value==="downloading-all-prices"||s.value==="importing-price-points"||s.value==="completed"?(q(),J("div",QM,[v[1]||(v[1]=w("div",{class:"phase-title mb-1"},"Downloading AllPrices.json.gz",-1)),w("div",JM,[w("div",{class:"progress-bar",role:"progressbar",style:An({width:o.value+"%"}),"aria-valuenow":o.value,"aria-valuemin":"0","aria-valuemax":"100"},oe(o.value)+"%",13,ZM)]),w("div",eT,oe(a.value),1)])):ke("",!0),s.value==="importing-price-points"||s.value==="completed"?(q(),J("div",tT,[v[2]||(v[2]=w("div",{class:"phase-title mb-1"},"Importing Price Points",-1)),w("div",nT,[w("div",{class:"progress-bar",role:"progressbar",style:An({width:l.value+"%"}),"aria-valuenow":l.value,"aria-valuemin":"0","aria-valuemax":"100"},oe(l.value)+"%",13,sT)]),w("div",rT,oe(c.value),1)])):ke("",!0)])):ke("",!0),n.value?(q(),J("div",iT," Import finished! Processed "+oe(u.value)+" price points. ",1)):ke("",!0),f.value.length>0?(q(),J("div",oT,[(q(!0),J(et,null,Ft(f.value,_=>(q(),J("div",{key:_,class:"error-message"},[bt(oe(_)+" ",1),_.includes("Out of Memory")||_.includes("too large")?(q(),J("div",aT,[...v[3]||(v[3]=[w("strong",null,"Solution:",-1),bt(' The MTGJSON file is too large to process in your browser. Please download the smaller "AllPricesToday.json" file from MTGJSON instead, which contains only the latest prices and is much smaller. ',-1)])])):ke("",!0)]))),128))])):ke("",!0),w("div",lT,[w("button",{onClick:p,class:"btn btn-glass-primary",disabled:e.value},oe(e.value?"Importing...":"Import Prices"),9,cT)])])])]))}}),dT=pn(uT,[["__scopeId","data-v-ff365479"]]);function fT(t){return new Worker("/mtg-pwa/assets/PriceGuideUploadWorker-oWfc4mMj.js",{name:t?.name})}class hT{static async upload(e,n){const s=await _b(new fT,{timeout:3e5});try{const r=await s.upload(e);n(r)}finally{await wb.terminate(s)}}}const pT={class:"price-guide-wizard"},gT={class:"card"},mT={class:"card-body"},yT={class:"file-upload-section"},vT={class:"mb-3"},bT={key:0,class:"files-info"},_T={class:"file-list"},wT={class:"file-item"},xT={class:"file-name"},kT={class:"file-size"},ST={key:0,class:"progress"},CT=["aria-valuenow"],PT={key:1,class:"alert alert-success"},AT={key:2,class:"error-messages"},IT={class:"wizard-navigation pt-3"},ET=["disabled"],OT=Ze({__name:"PriceGuideUploadWizard",setup(t){const e=he(null),n=he(!1),s=he(!1),r=he(0),i=he(0),o=he([]),a=u=>{const p=u.target.files;!p||p.length===0||(e.value=p[0],s.value=!1,i.value=0,o.value=[])},l=async()=>{if(!(!e.value||n.value)){n.value=!0,s.value=!1,o.value=[],r.value=0;try{await hT.upload(e.value,u=>{i.value=u,r.value=100,n.value=!1,s.value=!0})}catch(u){o.value.push("Failed to import Price Guide data: "+u.message),n.value=!1}}},c=u=>{if(u===0)return"0 Bytes";const f=1024,p=["Bytes","KB","MB","GB"],m=Math.floor(Math.log(u)/Math.log(f));return parseFloat((u/Math.pow(f,m)).toFixed(2))+" "+p[m]};return(u,f)=>(q(),J("div",pT,[f[2]||(f[2]=w("h1",null,"Cardmarket Price Guide Import",-1)),f[3]||(f[3]=w("p",null,"Import historical price data from Cardmarket Price Guide.",-1)),f[4]||(f[4]=w("div",{class:"alert alert-info"},[w("h3",{class:"alert-heading"},"Where to get the file"),w("p",null,"You can download the Price Guide CSV from your Cardmarket account.")],-1)),w("div",gT,[w("div",mT,[w("div",yT,[w("div",vT,[f[0]||(f[0]=w("label",{for:"price-guide-file",class:"form-label"}," Choose Price Guide CSV File ",-1)),w("input",{id:"price-guide-file",type:"file",accept:".csv",onChange:a,class:"form-control"},null,32)]),e.value?(q(),J("div",bT,[f[1]||(f[1]=w("h3",null,"Uploaded File",-1)),w("ul",_T,[w("li",wT,[w("span",xT,oe(e.value.name),1),w("span",kT,"- "+oe(c(e.value.size)),1)])])])):ke("",!0)]),n.value?(q(),J("div",ST,[w("div",{class:"progress-bar",role:"progressbar",style:An({width:r.value+"%"}),"aria-valuenow":r.value,"aria-valuemin":"0","aria-valuemax":"100"},oe(r.value)+"%",13,CT)])):ke("",!0),s.value?(q(),J("div",PT," Import finished! Processed "+oe(i.value)+" price points. ",1)):ke("",!0),o.value.length>0?(q(),J("div",AT,[(q(!0),J(et,null,Ft(o.value,p=>(q(),J("div",{key:p,class:"error-message"},oe(p),1))),128))])):ke("",!0),w("div",IT,[w("button",{onClick:l,class:"btn btn-glass-primary",disabled:!e.value||n.value},oe(n.value?"Importing...":"Import Prices"),9,ET)])])])]))}}),MT=pn(OT,[["__scopeId","data-v-d170427f"]]);class TT{static normalizeFingerprint(e){return{name:e.name.trim().toLowerCase(),setCode:e.setCode.trim().toLowerCase(),collectorNumber:e.collectorNumber.trim().toLowerCase(),finish:e.finish.trim().toLowerCase(),language:e.language.trim().toLowerCase()}}static compareFingerprints(e,n){const s=this.normalizeFingerprint(e),r=this.normalizeFingerprint(n);return s.name===r.name&&s.setCode===r.setCode&&s.collectorNumber===r.collectorNumber&&s.finish===r.finish&&s.language===r.language}static async resolveFingerprint(e){try{const n=await Ln.hydrateCard({name:e.name,setCode:e.setCode,collectorNumber:e.collectorNumber});return n&&n.id?n.id:null}catch(n){return console.error("Error resolving fingerprint:",n),null}}}class DT{static async importDeckFromText(e,n){let s,r;try{s=_i();const i=n.split(`
`).map(o=>o.trim()).filter(o=>o);r=gl(),s.addImport({id:r,type:"deck",name:e,status:"pending",progress:0,totalItems:i.length,processedItems:0})}catch(i){console.warn("Could not initialize import status store:",i),s=null,r=null}try{const i=new Date,o=`deck-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,a={id:o,platform:"csv",name:e,commander:"",url:"",importedAt:i,createdAt:i,updatedAt:i};await we.decks.add(a);const l=n.split(`
`).map(u=>u.trim()).filter(u=>u);if(console.log("Processing deck import:",{deckName:e,lineCount:l.length}),s&&r)try{s.updateImport(r,{status:"processing"})}catch(u){console.warn("Could not update import status:",u)}for(let u=0;u<l.length;u++){const p=l[u].trim();if(!p)continue;if(console.log("Processing line:",p),s&&r)try{s.updateImport(r,{processedItems:u+1,progress:Math.round((u+1)/l.length*100)})}catch(v){console.warn("Could not update import progress:",v)}const m=p.match(/^(\d+)\s+(.+?)\s*\(([^)]+)\)\s*(\d+)(?:\s*\*F\*\s*)?$/i);if(m){const[,v,_,k,S]=m,P=parseInt(v)||1;if(console.log("Parsed card:",{quantity:P,cardName:_,setCode:k,collectorNumber:S}),_&&k&&S){const E={name:_.trim(),setCode:k.trim(),collectorNumber:S.trim(),finish:"nonfoil",language:"en"},C=await TT.resolveFingerprint(E);if(console.log("Resolved card ID:",C),C){const A=new Date;if(!await Bn.getById(C)){const de=await Ln.hydrateCard({scryfall_id:C,name:_.trim(),setCode:k.trim(),collectorNumber:S.trim()}),ge=await Ln.getImageUrlById(C),Ae={id:C,oracleId:de?.oracle_id||"",name:_.trim(),set:de?.set_name||k.trim(),setCode:de?.set||k.trim(),number:de?.collector_number||S.trim(),lang:de?.lang||"en",finish:"nonfoil",layout:ge?.layout||"normal",imageUrl:ge?.front||"",imageUrlBack:ge?.back||"",createdAt:A,updatedAt:A};await Bn.add(Ae),console.log("Added new card to database:",Ae);try{const Se=await Ln.getPriceById(C);if(Se){const Pe=A.toISOString().split("T")[0],ee={id:`${C}:scryfall:${Pe}`,cardId:C,provider:"scryfall",finish:"nonfoil",date:A.toISOString().split("T")[0],currency:"EUR",priceCent:Se.getCents(),asOf:A,createdAt:A};await we.price_points.put(ee)}}catch(Se){console.error(`Error fetching price for new card ${C}:`,Se)}}const j=(await $t.getByCardId(C)).reduce((de,ge)=>{if(!ge.disposedAt||ge.disposedQuantity&&ge.disposedQuantity<ge.quantity){const Ae=ge.disposedQuantity?ge.quantity-ge.disposedQuantity:ge.quantity;return de+Ae}return de},0);if(j<P){const de=P-j,Ae={id:`lot-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,cardId:C,quantity:de,unitCost:0,condition:"unknown",language:"en",foil:!1,finish:"nonfoil",source:"deck_import",currency:"EUR",purchasedAt:A,createdAt:A,updatedAt:A};await $t.add(Ae),console.log("Added new lot for deck import:",Ae)}}let I;const T=await $t.getByCardId(C||"");if(T.length>0){for(const A of T)if((A.disposedQuantity?A.quantity-A.disposedQuantity:A.quantity)>=P&&!A.disposedAt){I=A.id;break}!I&&T.length>0&&(I=T[0].id)}const G=new Date,V={id:`deckcard-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,deckId:o||"unknown-deck",cardId:C||"unknown-card",lotId:I,quantity:typeof P=="number"&&P>0?P:1,role:"main",addedAt:G,createdAt:G};await we.deck_cards.add(V),console.log("Added deck card:",V)}}else console.log("Line did not match expected format:",p)}const c=await we.deck_cards.where("deckId").equals(o).count();if(console.log("Total cards imported:",c),s&&r)try{s.completeImport(r)}catch(u){console.warn("Could not complete import status:",u)}}catch(i){if(console.error("Error importing deck from text:",i),s&&r)try{s.completeImport(r,i.message)}catch(o){console.warn("Could not update import status to failed:",o)}throw i}}static async calculateDeckCoverage(e){try{const n=await we.deck_cards.where("deckId").equals(e).toArray();let s=0,r=0;for(const o of n){s+=o.quantity;const l=(await $t.getActiveLotsByCardId(o.cardId)).reduce((c,u)=>c+u.quantity,0);r+=Math.min(o.quantity,l)}const i=s>0?Math.round(r/s*100):100;return{totalCards:s,ownedCards:r,coveragePercentage:i}}catch(n){throw console.error("Error calculating deck coverage:",n),n}}}const RT={class:"deck-import"},$T={class:"import-section"},FT={class:"mb-3"},LT={class:"mb-3"},BT=["disabled"],jT={key:0,class:"status-message error"},NT=Ze({__name:"DeckImportView",setup(t){const e=he(""),n=he(""),s=he(!1),r=he(null),i=async()=>{if(!e.value.trim()){r.value="Please enter a deck name";return}if(!n.value.trim()){r.value="Please paste your decklist";return}s.value=!0,r.value=null;try{await DT.importDeckFromText(e.value.trim(),n.value.trim()),r.value="Deck import started successfully! Check the status indicator in the top right for progress.",setTimeout(()=>{e.value="",n.value="",s.value=!1,r.value=null},3e3)}catch(o){r.value="Failed to import deck: "+o.message,s.value=!1}};return(o,a)=>(q(),J("div",RT,[a[7]||(a[7]=w("h1",null,"Import Deck",-1)),w("div",$T,[a[4]||(a[4]=w("h2",null,"Moxfield Deck Import",-1)),a[5]||(a[5]=w("p",null,"Copy and paste your decklist from Moxfield to track which cards you own and which you're missing.",-1)),w("div",FT,[a[2]||(a[2]=w("label",{for:"deck-name",class:"form-label"},"Deck Name",-1)),Fr(w("input",{id:"deck-name","onUpdate:modelValue":a[0]||(a[0]=l=>e.value=l),type:"text",placeholder:"Enter a name for your deck",class:"form-control"},null,512),[[El,e.value]])]),w("div",LT,[a[3]||(a[3]=w("label",{for:"decklist",class:"form-label"},"Decklist",-1)),Fr(w("textarea",{id:"decklist","onUpdate:modelValue":a[1]||(a[1]=l=>n.value=l),placeholder:`Paste your decklist here (e.g., 4 Lightning Bolt
2 Counterspell)`,rows:"10",class:"form-control"},null,512),[[El,n.value]])]),w("button",{onClick:i,disabled:s.value,class:"btn btn-glass-primary mb-4"},oe(s.value?"Importing...":"Import Deck"),9,BT),r.value?(q(),J("div",jT,oe(r.value),1)):ke("",!0),a[6]||(a[6]=w("div",{class:"instructions"},[w("h3",null,"How to copy from Moxfield:"),w("ol",null,[w("li",null,"Open your deck on Moxfield.com"),w("li",null,'Click the "Export" button'),w("li",null,'Select "Text" format'),w("li",null,"Copy the text and paste it here")])],-1))])]))}}),zT=pn(NT,[["__scopeId","data-v-cad749f2"]]),UT={class:"container py-4"},qT={class:"d-flex align-items-center justify-content-between mb-4"},WT={key:0,class:"text-center py-5"},VT={key:1,class:"text-center py-5"},HT={key:2,class:"row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4"},KT={class:"card h-100 shadow-sm border-0 overflow-hidden position-relative"},YT={class:"card-aspect position-relative overflow-hidden"},GT=["src","alt"],XT={class:"card-body"},QT=["title"],JT={class:"d-flex align-items-center justify-content-between mb-2"},ZT={key:0,class:"badge bg-info text-dark text-uppercase"},eD={class:"text-muted"},tD={class:"fw-semibold"},nD=Ze({__name:"DecksView",setup(t){const e=he([]),n=he(!0),s=he({}),r=he({}),i=c=>c?new Date(c).toLocaleDateString():"",o=c=>s.value[c]??0,a=c=>r.value[c];return Mn(async()=>{try{const c=await we.decks.toArray();e.value=c;const u=c.map(async p=>{const m=await we.deck_cards.where("deckId").equals(p.id).count();return[p.id,m]}),f=c.map(async p=>{if(!p.faceCardId)return[p.id,null];const m=await we.cards.get(p.faceCardId);return[p.id,m?{id:m.id,name:m.name,imageUrl:m.imageUrl}:null]});(await Promise.all(u)).forEach(([p,m])=>s.value[p]=m),(await Promise.all(f)).forEach(([p,m])=>{m?r.value[p]=m:delete r.value[p]})}catch(c){console.error("Error loading decks:",c)}finally{n.value=!1}}),(c,u)=>{const f=Si("router-link");return q(),J("div",UT,[w("div",qT,[u[1]||(u[1]=w("h1",{class:"h3 mb-0"},"Decks",-1)),qe(f,{to:"/import/deck",class:"btn btn-glass-primary"},{default:at(()=>[...u[0]||(u[0]=[bt(" Import Deck ",-1)])]),_:1})]),n.value?(q(),J("div",WT,[...u[2]||(u[2]=[w("div",{class:"spinner-border",role:"status","aria-hidden":"true"},null,-1),w("div",{class:"mt-2"},"Loading decks",-1)])])):e.value.length===0?(q(),J("div",VT,[u[4]||(u[4]=w("p",{class:"text-muted mb-3"},"You haven't imported any decks yet.",-1)),qe(f,{to:"/import/deck",class:"btn btn-glass-primary"},{default:at(()=>[...u[3]||(u[3]=[bt(" Import Your First Deck ",-1)])]),_:1})])):(q(),J("div",HT,[(q(!0),J(et,null,Ft(e.value,p=>(q(),J("div",{key:p.id,class:"col"},[w("div",KT,[w("div",YT,[w("img",{src:a(p.id)?.imageUrl,alt:a(p.id)?.name||"Face card",class:"w-100 h-100 d-block img-fit-cover rounded-4"},null,8,GT)]),w("div",XT,[w("h2",{class:"h5 mb-1 text-truncate",title:p.name},oe(p.name),9,QT),w("div",JT,[p.platform?(q(),J("span",ZT,oe(p.platform),1)):ke("",!0),w("small",eD,oe(i(p.importedAt)),1)]),w("div",tD,oe(o(p.id))+" cards",1),qe(f,{class:"stretched-link",to:`/decks/${p.id}`,"aria-label":"Open deck"},null,8,["to"])])])]))),128))]))])}}}),sD=pn(nD,[["__scopeId","data-v-6b1e1265"]]);function Eb(t,e){const n=typeof t=="string"&&!e?`${t}Context`:e,s=Symbol(n);return[o=>{const a=In(s,o);if(a||a===null)return a;throw new Error(`Injection \`${s.toString()}\` not found. Component must be used within ${Array.isArray(t)?`one of the following components: ${t.join(", ")}`:`\`${t}\``}`)},o=>(ko(s,o),o)]}function tr(){let t=document.activeElement;if(t==null)return null;for(;t!=null&&t.shadowRoot!=null&&t.shadowRoot.activeElement!=null;)t=t.shadowRoot.activeElement;return t}function Ob(t,e,n){const s=n.originalEvent.target,r=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),s.dispatchEvent(r)}function vf(t){return t?t.flatMap(e=>e.type===et?vf(e.children):[e]):[]}const[rD,hL]=Eb("ConfigProvider");function Mb(t){return Td()?(Um(t),!0):!1}function iD(t){let e=!1,n;const s=Xl(!0);return(...r)=>(e||(n=s.run(()=>t(...r)),e=!0),n)}function oD(t){let e=0,n,s;const r=()=>{e-=1,s&&e<=0&&(s.stop(),n=void 0,s=void 0)};return(...i)=>(e+=1,s||(s=Xl(!0),n=s.run(()=>t(...i))),Mb(r),n)}const Hr=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const aD=t=>typeof t<"u",lD=Object.prototype.toString,cD=t=>lD.call(t)==="[object Object]",am=uD();function uD(){var t,e;return Hr&&((t=window?.navigator)==null?void 0:t.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((e=window?.navigator)==null?void 0:e.maxTouchPoints)>2&&/iPad|Macintosh/.test(window?.navigator.userAgent))}function dD(t){return cs()}function Fu(t){return Array.isArray(t)?t:[t]}function fD(t,e){dD()&&tc(t,e)}function hD(t,e,n){return Ht(t,e,{...n,immediate:!0})}const bf=Hr?window:void 0;function gc(t){var e;const n=as(t);return(e=n?.$el)!=null?e:n}function Tb(...t){const e=[],n=()=>{e.forEach(a=>a()),e.length=0},s=(a,l,c,u)=>(a.addEventListener(l,c,u),()=>a.removeEventListener(l,c,u)),r=He(()=>{const a=Fu(as(t[0])).filter(l=>l!=null);return a.every(l=>typeof l!="string")?a:void 0}),i=hD(()=>{var a,l;return[(l=(a=r.value)==null?void 0:a.map(c=>gc(c)))!=null?l:[bf].filter(c=>c!=null),Fu(as(r.value?t[1]:t[0])),Fu($e(r.value?t[2]:t[1])),as(r.value?t[3]:t[2])]},([a,l,c,u])=>{if(n(),!a?.length||!l?.length||!c?.length)return;const f=cD(u)?{...u}:u;e.push(...a.flatMap(p=>l.flatMap(m=>c.map(v=>s(p,m,v,f)))))},{flush:"post"}),o=()=>{i(),n()};return Mb(n),o}function pD(){const t=Jl(!1),e=cs();return e&&Mn(()=>{t.value=!0},e),t}function gD(t){return typeof t=="function"?t:typeof t=="string"?e=>e.key===t:Array.isArray(t)?e=>t.includes(e.key):()=>!0}function mD(...t){let e,n,s={};t.length===3?(e=t[0],n=t[1],s=t[2]):t.length===2?typeof t[1]=="object"?(e=!0,n=t[0],s=t[1]):(e=t[0],n=t[1]):(e=!0,n=t[0]);const{target:r=bf,eventName:i="keydown",passive:o=!1,dedupe:a=!1}=s,l=gD(e);return Tb(r,i,u=>{u.repeat&&as(a)||l(u)&&n(u)},o)}function yD(t){return JSON.parse(JSON.stringify(t))}function vD(t,e,n,s={}){var r,i,o;const{clone:a=!1,passive:l=!1,eventName:c,deep:u=!1,defaultValue:f,shouldEmit:p}=s,m=cs(),v=n||m?.emit||((r=m?.$emit)==null?void 0:r.bind(m))||((o=(i=m?.proxy)==null?void 0:i.$emit)==null?void 0:o.bind(m?.proxy));let _=c;_=_||`update:${e.toString()}`;const k=E=>a?typeof a=="function"?a(E):yD(E):E,S=()=>aD(t[e])?k(t[e]):f,P=E=>{p?p(E)&&v(_,E):v(_,E)};if(l){const E=S(),C=he(E);let I=!1;return Ht(()=>t[e],T=>{I||(I=!0,C.value=k(T),an(()=>I=!1))}),Ht(C,T=>{!I&&(T!==t[e]||u)&&P(T)},{deep:u}),C}else return He({get(){return S()},set(E){P(E)}})}function Lu(t){if(t===null||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e!==null&&e!==Object.prototype&&Object.getPrototypeOf(e)!==null||Symbol.iterator in t?!1:Symbol.toStringTag in t?Object.prototype.toString.call(t)==="[object Module]":!0}function _d(t,e,n=".",s){if(!Lu(e))return _d(t,{},n,s);const r=Object.assign({},e);for(const i in t){if(i==="__proto__"||i==="constructor")continue;const o=t[i];o!=null&&(s&&s(r,i,o,n)||(Array.isArray(o)&&Array.isArray(r[i])?r[i]=[...o,...r[i]]:Lu(o)&&Lu(r[i])?r[i]=_d(o,r[i],(n?`${n}.`:"")+i.toString(),s):r[i]=o))}return r}function bD(t){return(...e)=>e.reduce((n,s)=>_d(n,s,"",t),{})}const _D=bD(),wD=oD(()=>{const t=he(new Map),e=he(),n=He(()=>{for(const o of t.value.values())if(o)return!0;return!1}),s=rD({scrollBody:he(!0)});let r=null;const i=()=>{document.body.style.paddingRight="",document.body.style.marginRight="",document.body.style.pointerEvents="",document.documentElement.style.removeProperty("--scrollbar-width"),document.body.style.overflow=e.value??"",am&&r?.(),e.value=void 0};return Ht(n,(o,a)=>{if(!Hr)return;if(!o){a&&i();return}e.value===void 0&&(e.value=document.body.style.overflow);const l=window.innerWidth-document.documentElement.clientWidth,c={padding:l,margin:0},u=s.scrollBody?.value?typeof s.scrollBody.value=="object"?_D({padding:s.scrollBody.value.padding===!0?l:s.scrollBody.value.padding,margin:s.scrollBody.value.margin===!0?l:s.scrollBody.value.margin},c):c:{padding:0,margin:0};l>0&&(document.body.style.paddingRight=typeof u.padding=="number"?`${u.padding}px`:String(u.padding),document.body.style.marginRight=typeof u.margin=="number"?`${u.margin}px`:String(u.margin),document.documentElement.style.setProperty("--scrollbar-width",`${l}px`),document.body.style.overflow="hidden"),am&&(r=Tb(document,"touchmove",f=>kD(f),{passive:!1})),an(()=>{document.body.style.pointerEvents="none",document.body.style.overflow="hidden"})},{immediate:!0,flush:"sync"}),t});function xD(t){const e=Math.random().toString(36).substring(2,7),n=wD();n.value.set(e,t);const s=He({get:()=>n.value.get(e)??!1,set:r=>n.value.set(e,r)});return fD(()=>{n.value.delete(e)}),s}function Db(t){const e=window.getComputedStyle(t);if(e.overflowX==="scroll"||e.overflowY==="scroll"||e.overflowX==="auto"&&t.clientWidth<t.scrollWidth||e.overflowY==="auto"&&t.clientHeight<t.scrollHeight)return!0;{const n=t.parentNode;return!(n instanceof Element)||n.tagName==="BODY"?!1:Db(n)}}function kD(t){const e=t||window.event,n=e.target;return n instanceof Element&&Db(n)?!1:e.touches.length>1?!0:(e.preventDefault&&e.cancelable&&e.preventDefault(),!1)}function _f(t){const e=cs(),n=e?.type.emits,s={};return n?.length||console.warn(`No emitted event found. Please check component: ${e?.type.__name}`),n?.forEach(r=>{s[il(En(r))]=(...i)=>t(r,...i)}),s}function us(){const t=cs(),e=he(),n=He(()=>["#text","#comment"].includes(e.value?.$el.nodeName)?e.value?.$el.nextElementSibling:gc(e)),s=Object.assign({},t.exposed),r={};for(const o in t.props)Object.defineProperty(r,o,{enumerable:!0,configurable:!0,get:()=>t.props[o]});if(Object.keys(s).length>0)for(const o in s)Object.defineProperty(r,o,{enumerable:!0,configurable:!0,get:()=>s[o]});Object.defineProperty(r,"$el",{enumerable:!0,configurable:!0,get:()=>t.vnode.el}),t.exposed=r;function i(o){e.value=o,o&&(Object.defineProperty(r,"$el",{enumerable:!0,configurable:!0,get:()=>o instanceof Element?o:o.$el}),t.exposed=r)}return{forwardRef:i,currentRef:e,currentElement:n}}var SD=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},li=new WeakMap,nl=new WeakMap,sl={},Bu=0,Rb=function(t){return t&&(t.host||Rb(t.parentNode))},CD=function(t,e){return e.map(function(n){if(t.contains(n))return n;var s=Rb(n);return s&&t.contains(s)?s:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},PD=function(t,e,n,s){var r=CD(e,Array.isArray(t)?t:[t]);sl[n]||(sl[n]=new WeakMap);var i=sl[n],o=[],a=new Set,l=new Set(r),c=function(f){!f||a.has(f)||(a.add(f),c(f.parentNode))};r.forEach(c);var u=function(f){!f||l.has(f)||Array.prototype.forEach.call(f.children,function(p){if(a.has(p))u(p);else try{var m=p.getAttribute(s),v=m!==null&&m!=="false",_=(li.get(p)||0)+1,k=(i.get(p)||0)+1;li.set(p,_),i.set(p,k),o.push(p),_===1&&v&&nl.set(p,!0),k===1&&p.setAttribute(n,"true"),v||p.setAttribute(s,"true")}catch(S){console.error("aria-hidden: cannot operate on ",p,S)}})};return u(e),a.clear(),Bu++,function(){o.forEach(function(f){var p=li.get(f)-1,m=i.get(f)-1;li.set(f,p),i.set(f,m),p||(nl.has(f)||f.removeAttribute(s),nl.delete(f)),m||f.removeAttribute(n)}),Bu--,Bu||(li=new WeakMap,li=new WeakMap,nl=new WeakMap,sl={})}},AD=function(t,e,n){n===void 0&&(n="data-aria-hidden");var s=Array.from(Array.isArray(t)?t:[t]),r=SD(t);return r?(s.push.apply(s,Array.from(r.querySelectorAll("[aria-live], script"))),PD(s,r,n,"aria-hidden")):function(){return null}};function ID(t){let e;Ht(()=>gc(t),n=>{n?e=AD(n):e&&e()}),$i(()=>{e&&e()})}function lm(t,e="reka"){return`${e}-${T0?.()}`}function ED(t,e){const n=he(t);function s(i){return e[n.value][i]??n.value}return{state:n,dispatch:i=>{n.value=s(i)}}}function OD(t,e){const n=he({}),s=he("none"),r=he(t),i=t.value?"mounted":"unmounted";let o;const a=e.value?.ownerDocument.defaultView??bf,{state:l,dispatch:c}=ED(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}}),u=k=>{if(Hr){const S=new CustomEvent(k,{bubbles:!1,cancelable:!1});e.value?.dispatchEvent(S)}};Ht(t,async(k,S)=>{const P=S!==k;if(await an(),P){const E=s.value,C=rl(e.value);k?(c("MOUNT"),u("enter"),C==="none"&&u("after-enter")):C==="none"||C==="undefined"||n.value?.display==="none"?(c("UNMOUNT"),u("leave"),u("after-leave")):S&&E!==C?(c("ANIMATION_OUT"),u("leave")):(c("UNMOUNT"),u("after-leave"))}},{immediate:!0});const f=k=>{const S=rl(e.value),P=S.includes(k.animationName),E=l.value==="mounted"?"enter":"leave";if(k.target===e.value&&P&&(u(`after-${E}`),c("ANIMATION_END"),!r.value)){const C=e.value.style.animationFillMode;e.value.style.animationFillMode="forwards",o=a?.setTimeout(()=>{e.value?.style.animationFillMode==="forwards"&&(e.value.style.animationFillMode=C)})}k.target===e.value&&S==="none"&&c("ANIMATION_END")},p=k=>{k.target===e.value&&(s.value=rl(e.value))},m=Ht(e,(k,S)=>{k?(n.value=getComputedStyle(k),k.addEventListener("animationstart",p),k.addEventListener("animationcancel",f),k.addEventListener("animationend",f)):(c("ANIMATION_END"),o!==void 0&&a?.clearTimeout(o),S?.removeEventListener("animationstart",p),S?.removeEventListener("animationcancel",f),S?.removeEventListener("animationend",f))},{immediate:!0}),v=Ht(l,()=>{const k=rl(e.value);s.value=l.value==="mounted"?k:"none"});return $i(()=>{m(),v()}),{isPresent:He(()=>["mounted","unmountSuspended"].includes(l.value))}}function rl(t){return t&&getComputedStyle(t).animationName||"none"}var $b=Ze({name:"Presence",props:{present:{type:Boolean,required:!0},forceMount:{type:Boolean}},slots:{},setup(t,{slots:e,expose:n}){const{present:s,forceMount:r}=Nd(t),i=he(),{isPresent:o}=OD(s,i);n({present:o});let a=e.default({present:o.value});a=vf(a||[]);const l=cs();if(a&&a?.length>1){const c=l?.parent?.type.name?`<${l.parent.type.name} />`:"component";throw new Error([`Detected an invalid children for \`${c}\` for  \`Presence\` component.`,"","Note: Presence works similarly to `v-if` directly, but it waits for animation/transition to finished before unmounting. So it expect only one direct child of valid VNode type.","You can apply a few solutions:",["Provide a single child element so that `presence` directive attach correctly.","Ensure the first child is an actual element instead of a raw text node or comment node."].map(u=>`  - ${u}`).join(`
`)].join(`
`))}return()=>r.value||s.value||o.value?As(e.default({present:o.value})[0],{ref:c=>{const u=gc(c);return typeof u?.hasAttribute>"u"||(u?.hasAttribute("data-reka-popper-content-wrapper")?i.value=u.firstElementChild:i.value=u),u}}):null}});const MD=Ze({name:"PrimitiveSlot",inheritAttrs:!1,setup(t,{attrs:e,slots:n}){return()=>{if(!n.default)return null;const s=vf(n.default()),r=s.findIndex(l=>l.type!==Hn);if(r===-1)return s;const i=s[r];delete i.props?.ref;const o=i.props?ls(e,i.props):e,a=rr({...i,props:{}},o);return s.length===1?a:(s[r]=a,s)}}}),TD=["area","img","input"],ia=Ze({name:"Primitive",inheritAttrs:!1,props:{asChild:{type:Boolean,default:!1},as:{type:[String,Object],default:"div"}},setup(t,{attrs:e,slots:n}){const s=t.asChild?"template":t.as;return typeof s=="string"&&TD.includes(s)?()=>As(s,e):s!=="template"?()=>As(t.as,e,{default:n.default}):()=>As(MD,e,{default:n.default})}}),[lr,DD]=Eb("DialogRoot");var RD=Ze({inheritAttrs:!1,__name:"DialogRoot",props:{open:{type:Boolean,required:!1,default:void 0},defaultOpen:{type:Boolean,required:!1,default:!1},modal:{type:Boolean,required:!1,default:!0}},emits:["update:open"],setup(t,{emit:e}){const n=t,r=vD(n,"open",e,{defaultValue:n.defaultOpen,passive:n.open===void 0}),i=he(),o=he(),{modal:a}=Nd(n);return DD({open:r,modal:a,openModal:()=>{r.value=!0},onOpenChange:l=>{r.value=l},onOpenToggle:()=>{r.value=!r.value},contentId:"",titleId:"",descriptionId:"",triggerElement:i,contentElement:o}),(l,c)=>bn(l.$slots,"default",{open:$e(r),close:()=>r.value=!1})}}),$D=RD,FD=Ze({__name:"DialogClose",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(t){const e=t;us();const n=lr();return(s,r)=>(q(),Jt($e(ia),ls(e,{type:s.as==="button"?"button":void 0,onClick:r[0]||(r[0]=i=>$e(n).onOpenChange(!1))}),{default:at(()=>[bn(s.$slots,"default")]),_:3},16,["type"]))}}),LD=FD;const BD="dismissableLayer.pointerDownOutside",jD="dismissableLayer.focusOutside";function Fb(t,e){const n=e.closest("[data-dismissable-layer]"),s=t.dataset.dismissableLayer===""?t:t.querySelector("[data-dismissable-layer]"),r=Array.from(t.ownerDocument.querySelectorAll("[data-dismissable-layer]"));return!!(n&&(s===n||r.indexOf(s)<r.indexOf(n)))}function ND(t,e,n=!0){const s=e?.value?.ownerDocument??globalThis?.document,r=he(!1),i=he(()=>{});return Ci(o=>{if(!Hr||!as(n))return;const a=async c=>{const u=c.target;if(!(!e?.value||!u)){if(Fb(e.value,u)){r.value=!1;return}if(c.target&&!r.value){let m=function(){Ob(BD,t,p)};var f=m;const p={originalEvent:c};c.pointerType==="touch"?(s.removeEventListener("click",i.value),i.value=m,s.addEventListener("click",i.value,{once:!0})):m()}else s.removeEventListener("click",i.value);r.value=!1}},l=window.setTimeout(()=>{s.addEventListener("pointerdown",a)},0);o(()=>{window.clearTimeout(l),s.removeEventListener("pointerdown",a),s.removeEventListener("click",i.value)})}),{onPointerDownCapture:()=>{as(n)&&(r.value=!0)}}}function zD(t,e,n=!0){const s=e?.value?.ownerDocument??globalThis?.document,r=he(!1);return Ci(i=>{if(!Hr||!as(n))return;const o=async a=>{if(!e?.value)return;await an(),await an();const l=a.target;!e.value||!l||Fb(e.value,l)||a.target&&!r.value&&Ob(jD,t,{originalEvent:a})};s.addEventListener("focusin",o),i(()=>s.removeEventListener("focusin",o))}),{onFocusCapture:()=>{as(n)&&(r.value=!0)},onBlurCapture:()=>{as(n)&&(r.value=!1)}}}const _s=qr({layersRoot:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set});var UD=Ze({__name:"DismissableLayer",props:{disableOutsidePointerEvents:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","dismiss"],setup(t,{emit:e}){const n=t,s=e,{forwardRef:r,currentElement:i}=us(),o=He(()=>i.value?.ownerDocument??globalThis.document),a=He(()=>_s.layersRoot),l=He(()=>i.value?Array.from(a.value).indexOf(i.value):-1),c=He(()=>_s.layersWithOutsidePointerEventsDisabled.size>0),u=He(()=>{const v=Array.from(a.value),[_]=[..._s.layersWithOutsidePointerEventsDisabled].slice(-1),k=v.indexOf(_);return l.value>=k}),f=ND(async v=>{const _=[..._s.branches].some(k=>k?.contains(v.target));!u.value||_||(s("pointerDownOutside",v),s("interactOutside",v),await an(),v.defaultPrevented||s("dismiss"))},i),p=zD(v=>{[..._s.branches].some(k=>k?.contains(v.target))||(s("focusOutside",v),s("interactOutside",v),v.defaultPrevented||s("dismiss"))},i);mD("Escape",v=>{l.value===a.value.size-1&&(s("escapeKeyDown",v),v.defaultPrevented||s("dismiss"))});let m;return Ci(v=>{i.value&&(n.disableOutsidePointerEvents&&(_s.layersWithOutsidePointerEventsDisabled.size===0&&(m=o.value.body.style.pointerEvents,o.value.body.style.pointerEvents="none"),_s.layersWithOutsidePointerEventsDisabled.add(i.value)),a.value.add(i.value),v(()=>{n.disableOutsidePointerEvents&&_s.layersWithOutsidePointerEventsDisabled.size===1&&(o.value.body.style.pointerEvents=m)}))}),Ci(v=>{v(()=>{i.value&&(a.value.delete(i.value),_s.layersWithOutsidePointerEventsDisabled.delete(i.value))})}),(v,_)=>(q(),Jt($e(ia),{ref:$e(r),"as-child":v.asChild,as:v.as,"data-dismissable-layer":"",style:An({pointerEvents:c.value?u.value?"auto":"none":void 0}),onFocusCapture:$e(p).onFocusCapture,onBlurCapture:$e(p).onBlurCapture,onPointerdownCapture:$e(f).onPointerDownCapture},{default:at(()=>[bn(v.$slots,"default")]),_:3},8,["as-child","as","style","onFocusCapture","onBlurCapture","onPointerdownCapture"]))}}),qD=UD;const WD=iD(()=>he([]));function VD(){const t=WD();return{add(e){const n=t.value[0];e!==n&&n?.pause(),t.value=cm(t.value,e),t.value.unshift(e)},remove(e){t.value=cm(t.value,e),t.value[0]?.resume()}}}function cm(t,e){const n=[...t],s=n.indexOf(e);return s!==-1&&n.splice(s,1),n}function HD(t){return t.filter(e=>e.tagName!=="A")}const ju="focusScope.autoFocusOnMount",Nu="focusScope.autoFocusOnUnmount",um={bubbles:!1,cancelable:!0};function KD(t,{select:e=!1}={}){const n=tr();for(const s of t)if(Ws(s,{select:e}),tr()!==n)return!0}function YD(t){const e=Lb(t),n=dm(e,t),s=dm(e.reverse(),t);return[n,s]}function Lb(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const r=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||r?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function dm(t,e){for(const n of t)if(!GD(n,{upTo:e}))return n}function GD(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function XD(t){return t instanceof HTMLInputElement&&"select"in t}function Ws(t,{select:e=!1}={}){if(t&&t.focus){const n=tr();t.focus({preventScroll:!0}),t!==n&&XD(t)&&e&&t.select()}}var QD=Ze({__name:"FocusScope",props:{loop:{type:Boolean,required:!1,default:!1},trapped:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["mountAutoFocus","unmountAutoFocus"],setup(t,{emit:e}){const n=t,s=e,{currentRef:r,currentElement:i}=us(),o=he(null),a=VD(),l=qr({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}});Ci(u=>{if(!Hr)return;const f=i.value;if(!n.trapped)return;function p(k){if(l.paused||!f)return;const S=k.target;f.contains(S)?o.value=S:Ws(o.value,{select:!0})}function m(k){if(l.paused||!f)return;const S=k.relatedTarget;S!==null&&(f.contains(S)||Ws(o.value,{select:!0}))}function v(k){f.contains(o.value)||Ws(f)}document.addEventListener("focusin",p),document.addEventListener("focusout",m);const _=new MutationObserver(v);f&&_.observe(f,{childList:!0,subtree:!0}),u(()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",m),_.disconnect()})}),Ci(async u=>{const f=i.value;if(await an(),!f)return;a.add(l);const p=tr();if(!f.contains(p)){const v=new CustomEvent(ju,um);f.addEventListener(ju,_=>s("mountAutoFocus",_)),f.dispatchEvent(v),v.defaultPrevented||(KD(HD(Lb(f)),{select:!0}),tr()===p&&Ws(f))}u(()=>{f.removeEventListener(ju,k=>s("mountAutoFocus",k));const v=new CustomEvent(Nu,um),_=k=>{s("unmountAutoFocus",k)};f.addEventListener(Nu,_),f.dispatchEvent(v),setTimeout(()=>{v.defaultPrevented||Ws(p??document.body,{select:!0}),f.removeEventListener(Nu,_),a.remove(l)},0)})});function c(u){if(!n.loop&&!n.trapped||l.paused)return;const f=u.key==="Tab"&&!u.altKey&&!u.ctrlKey&&!u.metaKey,p=tr();if(f&&p){const m=u.currentTarget,[v,_]=YD(m);v&&_?!u.shiftKey&&p===_?(u.preventDefault(),n.loop&&Ws(v,{select:!0})):u.shiftKey&&p===v&&(u.preventDefault(),n.loop&&Ws(_,{select:!0})):p===m&&u.preventDefault()}}return(u,f)=>(q(),Jt($e(ia),{ref_key:"currentRef",ref:r,tabindex:"-1","as-child":u.asChild,as:u.as,onKeydown:c},{default:at(()=>[bn(u.$slots,"default")]),_:3},8,["as-child","as"]))}}),JD=QD;function ZD(t){return t?"open":"closed"}var eR=Ze({__name:"DialogContentImpl",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const n=t,s=e,r=lr(),{forwardRef:i,currentElement:o}=us();return r.titleId||=lm(void 0,"reka-dialog-title"),r.descriptionId||=lm(void 0,"reka-dialog-description"),Mn(()=>{r.contentElement=o,tr()!==document.body&&(r.triggerElement.value=tr())}),(a,l)=>(q(),Jt($e(JD),{"as-child":"",loop:"",trapped:n.trapFocus,onMountAutoFocus:l[5]||(l[5]=c=>s("openAutoFocus",c)),onUnmountAutoFocus:l[6]||(l[6]=c=>s("closeAutoFocus",c))},{default:at(()=>[qe($e(qD),ls({id:$e(r).contentId,ref:$e(i),as:a.as,"as-child":a.asChild,"disable-outside-pointer-events":a.disableOutsidePointerEvents,role:"dialog","aria-describedby":$e(r).descriptionId,"aria-labelledby":$e(r).titleId,"data-state":$e(ZD)($e(r).open.value)},a.$attrs,{onDismiss:l[0]||(l[0]=c=>$e(r).onOpenChange(!1)),onEscapeKeyDown:l[1]||(l[1]=c=>s("escapeKeyDown",c)),onFocusOutside:l[2]||(l[2]=c=>s("focusOutside",c)),onInteractOutside:l[3]||(l[3]=c=>s("interactOutside",c)),onPointerDownOutside:l[4]||(l[4]=c=>s("pointerDownOutside",c))}),{default:at(()=>[bn(a.$slots,"default")]),_:3},16,["id","as","as-child","disable-outside-pointer-events","aria-describedby","aria-labelledby","data-state"])]),_:3},8,["trapped"]))}}),Bb=eR,tR=Ze({__name:"DialogContentModal",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const n=t,s=e,r=lr(),i=_f(s),{forwardRef:o,currentElement:a}=us();return ID(a),(l,c)=>(q(),Jt(Bb,ls({...n,...$e(i)},{ref:$e(o),"trap-focus":$e(r).open.value,"disable-outside-pointer-events":!0,onCloseAutoFocus:c[0]||(c[0]=u=>{u.defaultPrevented||(u.preventDefault(),$e(r).triggerElement.value?.focus())}),onPointerDownOutside:c[1]||(c[1]=u=>{const f=u.detail.originalEvent,p=f.button===0&&f.ctrlKey===!0;(f.button===2||p)&&u.preventDefault()}),onFocusOutside:c[2]||(c[2]=u=>{u.preventDefault()})}),{default:at(()=>[bn(l.$slots,"default")]),_:3},16,["trap-focus"]))}}),nR=tR,sR=Ze({__name:"DialogContentNonModal",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const n=t,r=_f(e);us();const i=lr(),o=he(!1),a=he(!1);return(l,c)=>(q(),Jt(Bb,ls({...n,...$e(r)},{"trap-focus":!1,"disable-outside-pointer-events":!1,onCloseAutoFocus:c[0]||(c[0]=u=>{u.defaultPrevented||(o.value||$e(i).triggerElement.value?.focus(),u.preventDefault()),o.value=!1,a.value=!1}),onInteractOutside:c[1]||(c[1]=u=>{u.defaultPrevented||(o.value=!0,u.detail.originalEvent.type==="pointerdown"&&(a.value=!0));const f=u.target;$e(i).triggerElement.value?.contains(f)&&u.preventDefault(),u.detail.originalEvent.type==="focusin"&&a.value&&u.preventDefault()})}),{default:at(()=>[bn(l.$slots,"default")]),_:3},16))}}),rR=sR,iR=Ze({__name:"DialogContent",props:{forceMount:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const n=t,s=e,r=lr(),i=_f(s),{forwardRef:o}=us();return(a,l)=>(q(),Jt($e($b),{present:a.forceMount||$e(r).open.value},{default:at(()=>[$e(r).modal.value?(q(),Jt(nR,ls({key:0,ref:$e(o)},{...n,...$e(i),...a.$attrs}),{default:at(()=>[bn(a.$slots,"default")]),_:3},16)):(q(),Jt(rR,ls({key:1,ref:$e(o)},{...n,...$e(i),...a.$attrs}),{default:at(()=>[bn(a.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),oR=iR,aR=Ze({__name:"DialogOverlayImpl",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const e=lr();return xD(!0),us(),(n,s)=>(q(),Jt($e(ia),{as:n.as,"as-child":n.asChild,"data-state":$e(e).open.value?"open":"closed",style:{"pointer-events":"auto"}},{default:at(()=>[bn(n.$slots,"default")]),_:3},8,["as","as-child","data-state"]))}}),lR=aR,cR=Ze({__name:"DialogOverlay",props:{forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const e=lr(),{forwardRef:n}=us();return(s,r)=>$e(e)?.modal.value?(q(),Jt($e($b),{key:0,present:s.forceMount||$e(e).open.value},{default:at(()=>[qe(lR,ls(s.$attrs,{ref:$e(n),as:s.as,"as-child":s.asChild}),{default:at(()=>[bn(s.$slots,"default")]),_:3},16,["as","as-child"])]),_:3},8,["present"])):ke("v-if",!0)}}),uR=cR,dR=Ze({__name:"Teleport",props:{to:{type:null,required:!1,default:"body"},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(t){const e=pD();return(n,s)=>$e(e)||n.forceMount?(q(),Jt(I0,{key:0,to:n.to,disabled:n.disabled,defer:n.defer},[bn(n.$slots,"default")],8,["to","disabled","defer"])):ke("v-if",!0)}}),fR=dR,hR=Ze({__name:"DialogPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(t){const e=t;return(n,s)=>(q(),Jt($e(fR),V_(By(e)),{default:at(()=>[bn(n.$slots,"default")]),_:3},16))}}),pR=hR,gR=Ze({__name:"DialogTitle",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"h2"}},setup(t){const e=t,n=lr();return us(),(s,r)=>(q(),Jt($e(ia),ls(e,{id:$e(n).titleId}),{default:at(()=>[bn(s.$slots,"default")]),_:3},16,["id"]))}}),mR=gR;/*!
* chartjs-plugin-annotation v3.1.0
* https://www.chartjs.org/chartjs-plugin-annotation/index
 * (c) 2024 chartjs-plugin-annotation Contributors
 * Released under the MIT License
 */const fm={modes:{point(t,e){return yl(t,e,{intersect:!0})},nearest(t,e,n){return bR(t,e,n)},x(t,e,n){return yl(t,e,{intersect:n.intersect,axis:"x"})},y(t,e,n){return yl(t,e,{intersect:n.intersect,axis:"y"})}}};function wf(t,e,n){return(fm.modes[n.mode]||fm.modes.nearest)(t,e,n)}function yR(t,e,n){return n!=="x"&&n!=="y"?t.inRange(e.x,e.y,"x",!0)||t.inRange(e.x,e.y,"y",!0):t.inRange(e.x,e.y,n,!0)}function vR(t,e,n){return n==="x"?{x:t.x,y:e.y}:n==="y"?{x:e.x,y:t.y}:e}function yl(t,e,n){return t.filter(s=>n.intersect?s.inRange(e.x,e.y):yR(s,e,n.axis))}function bR(t,e,n){let s=Number.POSITIVE_INFINITY;return yl(t,e,n).reduce((r,i)=>{const o=i.getCenterPoint(),a=vR(e,o,n.axis),l=Oi(e,a);return l<s?(r=[i],s=l):l===s&&r.push(i),r},[]).sort((r,i)=>r._index-i._index).slice(0,1)}function Kr(t,e,n){const s=Math.cos(n),r=Math.sin(n),i=e.x,o=e.y;return{x:i+s*(t.x-i)-r*(t.y-o),y:o+r*(t.x-i)+s*(t.y-o)}}const _R=(t,e)=>e>t||t.length>e.length&&t.slice(0,e.length)===e,Rr=.001,mc=(t,e,n)=>Math.min(n,Math.max(e,t)),jb=(t,e)=>t.value>=t.start-e&&t.value<=t.end+e;function wR(t,e,n){for(const s of Object.keys(t))t[s]=mc(t[s],e,n);return t}function xR(t,e,n,s){return!t||!e||n<=0?!1:Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)<=Math.pow(n+s,2)}function Nb(t,{x:e,y:n,x2:s,y2:r},i,{borderWidth:o,hitTolerance:a}){const l=(o+a)/2,c=t.x>=e-l-Rr&&t.x<=s+l+Rr,u=t.y>=n-l-Rr&&t.y<=r+l+Rr;return i==="x"?c:(i==="y"||c)&&u}function zb(t,{rect:e,center:n},s,{rotation:r,borderWidth:i,hitTolerance:o}){const a=Kr(t,n,Wt(-r));return Nb(a,e,s,{borderWidth:i,hitTolerance:o})}function Yr(t,e){const{centerX:n,centerY:s}=t.getProps(["centerX","centerY"],e);return{x:n,y:s}}function kR(t,e,n,s=!0){const r=n.split(".");let i=0;for(const o of e.split(".")){const a=r[i++];if(parseInt(o,10)<parseInt(a,10))break;if(_R(a,o)){if(s)throw new Error(`${t} v${n} is not supported. v${e} or newer is required.`);return!1}}return!0}const Ub=t=>typeof t=="string"&&t.endsWith("%"),qb=t=>parseFloat(t)/100,Wb=t=>mc(qb(t),0,1),co=(t,e)=>({x:t,y:e,x2:t,y2:e,width:0,height:0}),SR={box:t=>co(t.centerX,t.centerY),doughnutLabel:t=>co(t.centerX,t.centerY),ellipse:t=>({centerX:t.centerX,centerY:t.centerX,radius:0,width:0,height:0}),label:t=>co(t.centerX,t.centerY),line:t=>co(t.x,t.y),point:t=>({centerX:t.centerX,centerY:t.centerY,radius:0,width:0,height:0}),polygon:t=>co(t.centerX,t.centerY)};function xf(t,e){return e==="start"?0:e==="end"?t:Ub(e)?Wb(e)*t:t/2}function ir(t,e,n=!0){return typeof e=="number"?e:Ub(e)?(n?Wb(e):qb(e))*t:t}function CR(t,e){const{x:n,width:s}=t,r=e.textAlign;return r==="center"?n+s/2:r==="end"||r==="right"?n+s:n}function Vb(t,e,{borderWidth:n,position:s,xAdjust:r,yAdjust:i},o){const a=Je(o),l=e.width+(a?o.width:0)+n,c=e.height+(a?o.height:0)+n,u=kf(s),f=hm(t.x,l,r,u.x),p=hm(t.y,c,i,u.y);return{x:f,y:p,x2:f+l,y2:p+c,width:l,height:c,centerX:f+l/2,centerY:p+c/2}}function kf(t,e="center"){return Je(t)?{x:Qe(t.x,e),y:Qe(t.y,e)}:(t=Qe(t,e),{x:t,y:t})}const Hb=(t,e)=>t&&t.autoFit&&e<1;function Kb(t,e){const n=t.font,s=kt(n)?n:[n];return Hb(t,e)?s.map(function(r){const i=Lt(r);return i.size=Math.floor(r.size*e),i.lineHeight=r.lineHeight,Lt(i)}):s.map(r=>Lt(r))}function Yb(t){return t&&(On(t.xValue)||On(t.yValue))}function hm(t,e,n=0,s){return t-xf(e,s)+n}function Li(t,e,n){const s=n.init;if(s){if(s===!0)return Xb(e,n)}else return;return PR(t,e,n)}function Gb(t,e,n){let s=!1;return e.forEach(r=>{vn(t[r])?(s=!0,n[r]=t[r]):On(n[r])&&delete n[r]}),s}function Xb(t,e){const n=e.type||"line";return SR[n](t)}function PR(t,e,n){const s=pt(n.init,[{chart:t,properties:e,options:n}]);if(s===!0)return Xb(e,n);if(Je(s))return s}const zu=new Map,AR=t=>isNaN(t)||t<=0,IR=t=>t.reduce(function(e,n){return e+=n.string,e},"");function yc(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object HTMLImageElement]"||e==="[object HTMLCanvasElement]"}}function vc(t,{x:e,y:n},s){s&&(t.translate(e,n),t.rotate(Wt(s)),t.translate(-e,-n))}function Os(t,e){if(e&&e.borderWidth)return t.lineCap=e.borderCapStyle||"butt",t.setLineDash(e.borderDash),t.lineDashOffset=e.borderDashOffset,t.lineJoin=e.borderJoinStyle||"miter",t.lineWidth=e.borderWidth,t.strokeStyle=e.borderColor,!0}function Bi(t,e){t.shadowColor=e.backgroundShadowColor,t.shadowBlur=e.shadowBlur,t.shadowOffsetX=e.shadowOffsetX,t.shadowOffsetY=e.shadowOffsetY}function bc(t,e){const n=e.content;if(yc(n))return{width:ir(n.width,e.width),height:ir(n.height,e.height)};const s=Kb(e),r=e.textStrokeWidth,i=kt(n)?n:[n],o=i.join()+IR(s)+r+(t._measureText?"-spriting":"");return zu.has(o)||zu.set(o,TR(t,i,s,r)),zu.get(o)}function Qb(t,e,n){const{x:s,y:r,width:i,height:o}=e;t.save(),Bi(t,n);const a=Os(t,n);t.fillStyle=n.backgroundColor,t.beginPath(),Ll(t,{x:s,y:r,w:i,h:o,radius:wR(wi(n.borderRadius),0,Math.min(i,o)/2)}),t.closePath(),t.fill(),a&&(t.shadowColor=n.borderShadowColor,t.stroke()),t.restore()}function Jb(t,e,n,s){const r=n.content;if(yc(r)){t.save(),t.globalAlpha=$R(n.opacity,r.style.opacity),t.drawImage(r,e.x,e.y,e.width,e.height),t.restore();return}const i=kt(r)?r:[r],o=Kb(n,s),a=n.color,l=kt(a)?a:[a],c=CR(e,n),u=e.y+n.textStrokeWidth/2;t.save(),t.textBaseline="middle",t.textAlign=n.textAlign,ER(t,n)&&DR(t,{x:c,y:u},i,o),RR(t,{x:c,y:u},i,{fonts:o,colors:l}),t.restore()}function ER(t,e){if(e.textStrokeWidth>0)return t.lineJoin="round",t.miterLimit=2,t.lineWidth=e.textStrokeWidth,t.strokeStyle=e.textStrokeColor,!0}function OR(t,e,n,s){const{radius:r,options:i}=e,o=i.pointStyle,a=i.rotation;let l=(a||0)*tf;if(yc(o)){t.save(),t.translate(n,s),t.rotate(l),t.drawImage(o,-o.width/2,-o.height/2,o.width,o.height),t.restore();return}AR(r)||MR(t,{x:n,y:s,radius:r,rotation:a,style:o,rad:l})}function MR(t,{x:e,y:n,radius:s,rotation:r,style:i,rad:o}){let a,l,c,u;switch(t.beginPath(),i){default:t.arc(e,n,s,0,qt),t.closePath();break;case"triangle":t.moveTo(e+Math.sin(o)*s,n-Math.cos(o)*s),o+=$l,t.lineTo(e+Math.sin(o)*s,n-Math.cos(o)*s),o+=$l,t.lineTo(e+Math.sin(o)*s,n-Math.cos(o)*s),t.closePath();break;case"rectRounded":u=s*.516,c=s-u,a=Math.cos(o+Fn)*c,l=Math.sin(o+Fn)*c,t.arc(e-a,n-l,u,o-ut,o-Qt),t.arc(e+l,n-a,u,o-Qt,o),t.arc(e+a,n+l,u,o,o+Qt),t.arc(e-l,n+a,u,o+Qt,o+ut),t.closePath();break;case"rect":if(!r){c=Math.SQRT1_2*s,t.rect(e-c,n-c,2*c,2*c);break}o+=Fn;case"rectRot":a=Math.cos(o)*s,l=Math.sin(o)*s,t.moveTo(e-a,n-l),t.lineTo(e+l,n-a),t.lineTo(e+a,n+l),t.lineTo(e-l,n+a),t.closePath();break;case"crossRot":o+=Fn;case"cross":a=Math.cos(o)*s,l=Math.sin(o)*s,t.moveTo(e-a,n-l),t.lineTo(e+a,n+l),t.moveTo(e+l,n-a),t.lineTo(e-l,n+a);break;case"star":a=Math.cos(o)*s,l=Math.sin(o)*s,t.moveTo(e-a,n-l),t.lineTo(e+a,n+l),t.moveTo(e+l,n-a),t.lineTo(e-l,n+a),o+=Fn,a=Math.cos(o)*s,l=Math.sin(o)*s,t.moveTo(e-a,n-l),t.lineTo(e+a,n+l),t.moveTo(e+l,n-a),t.lineTo(e-l,n+a);break;case"line":a=Math.cos(o)*s,l=Math.sin(o)*s,t.moveTo(e-a,n-l),t.lineTo(e+a,n+l);break;case"dash":t.moveTo(e,n),t.lineTo(e+Math.cos(o)*s,n+Math.sin(o)*s);break}t.fill()}function TR(t,e,n,s){t.save();const r=e.length;let i=0,o=s;for(let a=0;a<r;a++){const l=n[Math.min(a,n.length-1)];t.font=l.string;const c=e[a];i=Math.max(i,t.measureText(c).width+s),o+=l.lineHeight}return t.restore(),{width:i,height:o}}function DR(t,{x:e,y:n},s,r){t.beginPath();let i=0;s.forEach(function(o,a){const l=r[Math.min(a,r.length-1)],c=l.lineHeight;t.font=l.string,t.strokeText(o,e,n+c/2+i),i+=c}),t.stroke()}function RR(t,{x:e,y:n},s,{fonts:r,colors:i}){let o=0;s.forEach(function(a,l){const c=i[Math.min(l,i.length-1)],u=r[Math.min(l,r.length-1)],f=u.lineHeight;t.beginPath(),t.font=u.string,t.fillStyle=c,t.fillText(a,e,n+f/2+o),o+=f,t.fill()})}function $R(t,e){const n=Nr(t)?t:e;return Nr(n)?mc(n,0,1):1}const Zb=["left","bottom","top","right"];function FR(t,e){const{pointX:n,pointY:s,options:r}=e,i=r.callout,o=i&&i.display&&zR(e,i);if(!o||qR(e,i,o))return;if(t.save(),t.beginPath(),!Os(t,i))return t.restore();const{separatorStart:l,separatorEnd:c}=LR(e,o),{sideStart:u,sideEnd:f}=jR(e,o,l);(i.margin>0||r.borderWidth===0)&&(t.moveTo(l.x,l.y),t.lineTo(c.x,c.y)),t.moveTo(u.x,u.y),t.lineTo(f.x,f.y);const p=Kr({x:n,y:s},e.getCenterPoint(),Wt(-e.rotation));t.lineTo(p.x,p.y),t.stroke(),t.restore()}function LR(t,e){const{x:n,y:s,x2:r,y2:i}=t,o=BR(t,e);let a,l;return e==="left"||e==="right"?(a={x:n+o,y:s},l={x:a.x,y:i}):(a={x:n,y:s+o},l={x:r,y:a.y}),{separatorStart:a,separatorEnd:l}}function BR(t,e){const{width:n,height:s,options:r}=t,i=r.callout.margin+r.borderWidth/2;return e==="right"?n+i:e==="bottom"?s+i:-i}function jR(t,e,n){const{y:s,width:r,height:i,options:o}=t,a=o.callout.start,l=NR(e,o.callout);let c,u;return e==="left"||e==="right"?(c={x:n.x,y:s+ir(i,a)},u={x:c.x+l,y:c.y}):(c={x:n.x+ir(r,a),y:n.y},u={x:c.x,y:c.y+l}),{sideStart:c,sideEnd:u}}function NR(t,e){const n=e.side;return t==="left"||t==="top"?-n:n}function zR(t,e){const n=e.position;return Zb.includes(n)?n:UR(t,e)}function UR(t,e){const{x:n,y:s,x2:r,y2:i,width:o,height:a,pointX:l,pointY:c,centerX:u,centerY:f,rotation:p}=t,m={x:u,y:f},v=e.start,_=ir(o,v),k=ir(a,v),S=[n,n+_,n+_,r],P=[s+k,i,s,i],E=[];for(let C=0;C<4;C++){const I=Kr({x:S[C],y:P[C]},m,Wt(p));E.push({position:Zb[C],distance:Oi(I,{x:l,y:c})})}return E.sort((C,I)=>C.distance-I.distance)[0].position}function qR(t,e,n){const{pointX:s,pointY:r}=t,i=e.margin;let o=s,a=r;return n==="left"?o+=i:n==="right"?o-=i:n==="top"?a+=i:n==="bottom"&&(a-=i),t.inRange(o,a)}const pm={xScaleID:{min:"xMin",max:"xMax",start:"left",end:"right",startProp:"x",endProp:"x2"},yScaleID:{min:"yMin",max:"yMax",start:"bottom",end:"top",startProp:"y",endProp:"y2"}};function Ri(t,e,n){return e=typeof e=="number"?e:t.parse(e),Kt(e)?t.getPixelForValue(e):n}function Ur(t,e,n){const s=e[n];if(s||n==="scaleID")return s;const r=n.charAt(0),i=Object.values(t).filter(o=>o.axis&&o.axis===r);return i.length?i[0].id:r}function e_(t,e){if(t){const n=t.options.reverse,s=Ri(t,e.min,n?e.end:e.start),r=Ri(t,e.max,n?e.start:e.end);return{start:s,end:r}}}function t_(t,e){const{chartArea:n,scales:s}=t,r=s[Ur(s,e,"xScaleID")],i=s[Ur(s,e,"yScaleID")];let o=n.width/2,a=n.height/2;return r&&(o=Ri(r,e.xValue,r.left+r.width/2)),i&&(a=Ri(i,e.yValue,i.top+i.height/2)),{x:o,y:a}}function Sf(t,e){const n=t.scales,s=n[Ur(n,e,"xScaleID")],r=n[Ur(n,e,"yScaleID")];if(!s&&!r)return{};let{left:i,right:o}=s||t.chartArea,{top:a,bottom:l}=r||t.chartArea;const c=gm(s,{min:e.xMin,max:e.xMax,start:i,end:o});i=c.start,o=c.end;const u=gm(r,{min:e.yMin,max:e.yMax,start:l,end:a});return a=u.start,l=u.end,{x:i,y:a,x2:o,y2:l,width:o-i,height:l-a,centerX:i+(o-i)/2,centerY:a+(l-a)/2}}function n_(t,e){if(!Yb(e)){const n=Sf(t,e);let s=e.radius;(!s||isNaN(s))&&(s=Math.min(n.width,n.height)/2,e.radius=s);const r=s*2,i=n.centerX+e.xAdjust,o=n.centerY+e.yAdjust;return{x:i-s,y:o-s,x2:i+s,y2:o+s,centerX:i,centerY:o,width:r,height:r,radius:s}}return VR(t,e)}function WR(t,e){const{scales:n,chartArea:s}=t,r=n[e.scaleID],i={x:s.left,y:s.top,x2:s.right,y2:s.bottom};return r?HR(r,i,e):KR(n,i,e),i}function s_(t,e){const n=Sf(t,e);return n.initProperties=Li(t,n,e),n.elements=[{type:"label",optionScope:"label",properties:XR(t,n,e),initProperties:n.initProperties}],n}function VR(t,e){const n=t_(t,e),s=e.radius*2;return{x:n.x-e.radius+e.xAdjust,y:n.y-e.radius+e.yAdjust,x2:n.x+e.radius+e.xAdjust,y2:n.y+e.radius+e.yAdjust,centerX:n.x+e.xAdjust,centerY:n.y+e.yAdjust,radius:e.radius,width:s,height:s}}function gm(t,e){const n=e_(t,e)||e;return{start:Math.min(n.start,n.end),end:Math.max(n.start,n.end)}}function HR(t,e,n){const s=Ri(t,n.value,NaN),r=Ri(t,n.endValue,s);t.isHorizontal()?(e.x=s,e.x2=r):(e.y=s,e.y2=r)}function KR(t,e,n){for(const s of Object.keys(pm)){const r=t[Ur(t,n,s)];if(r){const{min:i,max:o,start:a,end:l,startProp:c,endProp:u}=pm[s],f=e_(r,{min:n[i],max:n[o],start:r[a],end:r[l]});e[c]=f.start,e[u]=f.end}}}function YR({properties:t,options:e},n,s,r){const{x:i,x2:o,width:a}=t;return r_({start:i,end:o,borderWidth:e.borderWidth},{position:s.x,padding:{start:r.left,end:r.right},adjust:e.label.xAdjust,size:n.width})}function GR({properties:t,options:e},n,s,r){const{y:i,y2:o,height:a}=t;return r_({start:i,end:o,borderWidth:e.borderWidth},{position:s.y,padding:{start:r.top,end:r.bottom},adjust:e.label.yAdjust,size:n.height})}function r_(t,e){const{start:n,end:s,borderWidth:r}=t,{position:i,padding:{start:o,end:a},adjust:l}=e,c=s-r-n-o-a-e.size;return n+r/2+l+xf(c,i)}function XR(t,e,n){const s=n.label;s.backgroundColor="transparent",s.callout.display=!1;const r=kf(s.position),i=ln(s.padding),o=bc(t.ctx,s),a=YR({properties:e,options:n},o,r,i),l=GR({properties:e,options:n},o,r,i),c=o.width+i.width,u=o.height+i.height;return{x:a,y:l,x2:a+c,y2:l+u,width:c,height:u,centerX:a+c/2,centerY:l+u/2,rotation:s.rotation}}const wd=["enter","leave"],Cf=wd.concat("click");function QR(t,e,n){e.listened=Gb(n,Cf,e.listeners),e.moveListened=!1,wd.forEach(s=>{vn(n[s])&&(e.moveListened=!0)}),(!e.listened||!e.moveListened)&&e.annotations.forEach(s=>{!e.listened&&vn(s.click)&&(e.listened=!0),e.moveListened||wd.forEach(r=>{vn(s[r])&&(e.listened=!0,e.moveListened=!0)})})}function JR(t,e,n){if(t.listened)switch(e.type){case"mousemove":case"mouseout":return ZR(t,e,n);case"click":return e2(t,e,n)}}function ZR(t,e,n){if(!t.moveListened)return;let s;e.type==="mousemove"?s=wf(t.visibleElements,e,n.interaction):s=[];const r=t.hovered;t.hovered=s;const i={state:t,event:e};let o=mm(i,"leave",r,s);return mm(i,"enter",s,r)||o}function mm({state:t,event:e},n,s,r){let i;for(const o of s)r.indexOf(o)<0&&(i=i_(o.options[n]||t.listeners[n],o,e)||i);return i}function e2(t,e,n){const s=t.listeners,r=wf(t.visibleElements,e,n.interaction);let i;for(const o of r)i=i_(o.options.click||s.click,o,e)||i;return i}function i_(t,e,n){return pt(t,[e.$context,n])===!0}const ql=["afterDraw","beforeDraw"];function t2(t,e,n){const s=e.visibleElements;e.hooked=Gb(n,ql,e.hooks),e.hooked||s.forEach(r=>{e.hooked||ql.forEach(i=>{vn(r.options[i])&&(e.hooked=!0)})})}function ym(t,e,n){if(t.hooked){const s=e.options[n]||t.hooks[n];return pt(s,[e.$context])}}function n2(t,e,n){const s=a2(t.scales,e,n);let r=vm(e,s,"min","suggestedMin");r=vm(e,s,"max","suggestedMax")||r,r&&vn(e.handleTickRangeOptions)&&e.handleTickRangeOptions()}function s2(t,e){for(const n of t)i2(n,e)}function vm(t,e,n,s){if(Kt(e[n])&&!r2(t.options,n,s)){const r=t[n]!==e[n];return t[n]=e[n],r}}function r2(t,e,n){return On(t[e])||On(t[n])}function i2(t,e){for(const n of["scaleID","xScaleID","yScaleID"]){const s=Ur(e,t,n);s&&!e[s]&&o2(t,n)&&console.warn(`No scale found with id '${s}' for annotation '${t.id}'`)}}function o2(t,e){if(e==="scaleID")return!0;const n=e.charAt(0);for(const s of["Min","Max","Value"])if(On(t[n+s]))return!0;return!1}function a2(t,e,n){const s=e.axis,r=e.id,i=s+"ScaleID",o={min:Qe(e.min,Number.NEGATIVE_INFINITY),max:Qe(e.max,Number.POSITIVE_INFINITY)};for(const a of n)a.scaleID===r?bm(a,e,["value","endValue"],o):Ur(t,a,i)===r&&bm(a,e,[s+"Min",s+"Max",s+"Value"],o);return o}function bm(t,e,n,s){for(const r of n){const i=t[r];if(On(i)){const o=e.parse(i);s.min=Math.min(s.min,o),s.max=Math.max(s.max,o)}}}class ji extends _n{inRange(e,n,s,r){const{x:i,y:o}=Kr({x:e,y:n},this.getCenterPoint(r),Wt(-this.options.rotation));return Nb({x:i,y:o},this.getProps(["x","y","x2","y2"],r),s,this.options)}getCenterPoint(e){return Yr(this,e)}draw(e){e.save(),vc(e,this.getCenterPoint(),this.options.rotation),Qb(e,this,this.options),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){return s_(e,n)}}ji.id="boxAnnotation";ji.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,hitTolerance:0,label:{backgroundColor:"transparent",borderWidth:0,callout:{display:!1},color:"black",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:void 0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};ji.defaultRoutes={borderColor:"color",backgroundColor:"color"};ji.descriptors={label:{_fallback:!0}};class _c extends _n{inRange(e,n,s,r){return zb({x:e,y:n},{rect:this.getProps(["x","y","x2","y2"],r),center:this.getCenterPoint(r)},s,{rotation:this.rotation,borderWidth:0,hitTolerance:this.options.hitTolerance})}getCenterPoint(e){return Yr(this,e)}draw(e){const n=this.options;!n.display||!n.content||(h2(e,this),e.save(),vc(e,this.getCenterPoint(),this.rotation),Jb(e,this,n,this._fitRatio),e.restore())}resolveElementProperties(e,n){const s=l2(e,n);if(!s)return{};const{controllerMeta:r,point:i,radius:o}=u2(e,n,s);let a=bc(e.ctx,n);const l=d2(a,o);Hb(n,l)&&(a={width:a.width*l,height:a.height*l});const{position:c,xAdjust:u,yAdjust:f}=n,p=Vb(i,a,{borderWidth:0,position:c,xAdjust:u,yAdjust:f});return{initProperties:Li(e,p,n),...p,...r,rotation:n.rotation,_fitRatio:l}}}_c.id="doughnutLabelAnnotation";_c.defaults={autoFit:!0,autoHide:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderColor:"transparent",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:0,color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,spacing:1,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0};_c.defaultRoutes={};function l2(t,e){return t.getSortedVisibleDatasetMetas().reduce(function(n,s){const r=s.controller;return r instanceof vC&&c2(t,e,s.data)&&(!n||r.innerRadius<n.controller.innerRadius)&&r.options.circumference>=90?s:n},void 0)}function c2(t,e,n){if(!e.autoHide)return!0;for(let s=0;s<n.length;s++)if(!n[s].hidden&&t.getDataVisibility(s))return!0}function u2({chartArea:t},e,n){const{left:s,top:r,right:i,bottom:o}=t,{innerRadius:a,offsetX:l,offsetY:c}=n.controller,u=(s+i)/2+l,f=(r+o)/2+c,p={left:Math.max(u-a,s),right:Math.min(u+a,i),top:Math.max(f-a,r),bottom:Math.min(f+a,o)},m={x:(p.left+p.right)/2,y:(p.top+p.bottom)/2},v=e.spacing+e.borderWidth/2,_=a-v,k=m.y>f,S=k?r+v:o-v,P=f2(S,u,f,_);return{controllerMeta:{_centerX:u,_centerY:f,_radius:_,_counterclockwise:k,...P},point:m,radius:Math.min(a,Math.min(p.right-p.left,p.bottom-p.top)/2)}}function d2({width:t,height:e},n){const s=Math.sqrt(Math.pow(t,2)+Math.pow(e,2));return n*2/s}function f2(t,e,n,s){const r=Math.pow(n-t,2),i=Math.pow(s,2),o=e*-2,a=Math.pow(e,2)+r-i,l=Math.pow(o,2)-4*a;if(l<=0)return{_startAngle:0,_endAngle:qt};const c=(-o-Math.sqrt(l))/2,u=(-o+Math.sqrt(l))/2;return{_startAngle:cd({x:e,y:n},{x:c,y:t}).angle,_endAngle:cd({x:e,y:n},{x:u,y:t}).angle}}function h2(t,e){const{_centerX:n,_centerY:s,_radius:r,_startAngle:i,_endAngle:o,_counterclockwise:a,options:l}=e;t.save();const c=Os(t,l);t.fillStyle=l.backgroundColor,t.beginPath(),t.arc(n,s,r,i,o,a),t.closePath(),t.fill(),c&&t.stroke(),t.restore()}class oa extends _n{inRange(e,n,s,r){return zb({x:e,y:n},{rect:this.getProps(["x","y","x2","y2"],r),center:this.getCenterPoint(r)},s,{rotation:this.rotation,borderWidth:this.options.borderWidth,hitTolerance:this.options.hitTolerance})}getCenterPoint(e){return Yr(this,e)}draw(e){const n=this.options,s=!On(this._visible)||this._visible;!n.display||!n.content||!s||(e.save(),vc(e,this.getCenterPoint(),this.rotation),FR(e,this),Qb(e,this,n),Jb(e,p2(this),n),e.restore())}resolveElementProperties(e,n){let s;if(Yb(n))s=t_(e,n);else{const{centerX:a,centerY:l}=Sf(e,n);s={x:a,y:l}}const r=ln(n.padding),i=bc(e.ctx,n),o=Vb(s,i,n,r);return{initProperties:Li(e,o,n),pointX:s.x,pointY:s.y,...o,rotation:n.rotation}}}oa.id="labelAnnotation";oa.defaults={adjustScaleRange:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:0,callout:{borderCapStyle:"butt",borderColor:void 0,borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:1,display:!1,margin:5,position:"auto",side:5,start:"50%"},color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};oa.defaultRoutes={borderColor:"color"};function p2({x:t,y:e,width:n,height:s,options:r}){const i=r.borderWidth/2,o=ln(r.padding);return{x:t+o.left+i,y:e+o.top+i,width:n-o.left-o.right-r.borderWidth,height:s-o.top-o.bottom-r.borderWidth}}const Pf=(t,e,n)=>({x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}),xd=(t,e,n)=>Pf(e,n,Math.abs((t-e.y)/(n.y-e.y))).x,_m=(t,e,n)=>Pf(e,n,Math.abs((t-e.x)/(n.x-e.x))).y,mo=t=>t*t,g2=(t,e,{x:n,y:s,x2:r,y2:i},o)=>o==="y"?{start:Math.min(s,i),end:Math.max(s,i),value:e}:{start:Math.min(n,r),end:Math.max(n,r),value:t},wm=(t,e,n,s)=>(1-s)*(1-s)*t+2*(1-s)*s*e+s*s*n,kd=(t,e,n,s)=>({x:wm(t.x,e.x,n.x,s),y:wm(t.y,e.y,n.y,s)}),xm=(t,e,n,s)=>2*(1-s)*(e-t)+2*s*(n-e),km=(t,e,n,s)=>-Math.atan2(xm(t.x,e.x,n.x,s),xm(t.y,e.y,n.y,s))+.5*ut;class aa extends _n{inRange(e,n,s,r){const i=(this.options.borderWidth+this.options.hitTolerance)/2;if(s!=="x"&&s!=="y"){const o={mouseX:e,mouseY:n},{path:a,ctx:l}=this;if(a){Os(l,this.options),l.lineWidth+=this.options.hitTolerance;const{chart:u}=this.$context,f=e*u.currentDevicePixelRatio,p=n*u.currentDevicePixelRatio,m=l.isPointInStroke(a,f,p)||Sd(this,o,r);return l.restore(),m}const c=mo(i);return b2(this,o,c,r)||Sd(this,o,r)}return m2(this,{mouseX:e,mouseY:n},s,{hitSize:i,useFinalPosition:r})}getCenterPoint(e){return Yr(this,e)}draw(e){const{x:n,y:s,x2:r,y2:i,cp:o,options:a}=this;if(e.save(),!Os(e,a))return e.restore();Bi(e,a);const l=Math.sqrt(Math.pow(r-n,2)+Math.pow(i-s,2));if(a.curve&&o)return A2(e,this,o,l),e.restore();const{startOpts:c,endOpts:u,startAdjust:f,endAdjust:p}=o_(this),m=Math.atan2(i-s,r-n);e.translate(n,s),e.rotate(m),e.beginPath(),e.moveTo(0+f,0),e.lineTo(l-p,0),e.shadowColor=a.borderShadowColor,e.stroke(),Cd(e,0,f,c),Cd(e,l,-p,u),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){const s=WR(e,n),{x:r,y:i,x2:o,y2:a}=s,l=y2(s,e.chartArea),c=l?v2({x:r,y:i},{x:o,y:a},e.chartArea):{x:r,y:i,x2:o,y2:a,width:Math.abs(o-r),height:Math.abs(a-i)};if(c.centerX=(o+r)/2,c.centerY=(a+i)/2,c.initProperties=Li(e,c,n),n.curve){const f={x:c.x,y:c.y},p={x:c.x2,y:c.y2};c.cp=P2(c,n,Oi(f,p))}const u=_2(e,c,n.label);return u._visible=l,c.elements=[{type:"label",optionScope:"label",properties:u,initProperties:c.initProperties}],c}}aa.id="lineAnnotation";const Sm={backgroundColor:void 0,backgroundShadowColor:void 0,borderColor:void 0,borderDash:void 0,borderDashOffset:void 0,borderShadowColor:void 0,borderWidth:void 0,display:void 0,fill:void 0,length:void 0,shadowBlur:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,width:void 0};aa.defaults={adjustScaleRange:!0,arrowHeads:{display:!1,end:Object.assign({},Sm),fill:!1,length:12,start:Object.assign({},Sm),width:6},borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:2,curve:!1,controlPoint:{y:"-50%"},display:!0,endValue:void 0,init:void 0,hitTolerance:0,label:{backgroundColor:"rgba(0,0,0,0.8)",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderColor:"black",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:6,borderShadowColor:"transparent",borderWidth:0,callout:Object.assign({},oa.defaults.callout),color:"#fff",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},scaleID:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,value:void 0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};aa.descriptors={arrowHeads:{start:{_fallback:!0},end:{_fallback:!0},_fallback:!0}};aa.defaultRoutes={borderColor:"color"};function m2(t,{mouseX:e,mouseY:n},s,{hitSize:r,useFinalPosition:i}){const o=g2(e,n,t.getProps(["x","y","x2","y2"],i),s);return jb(o,r)||Sd(t,{mouseX:e,mouseY:n},i,s)}function y2({x:t,y:e,x2:n,y2:s},{top:r,right:i,bottom:o,left:a}){return!(t<a&&n<a||t>i&&n>i||e<r&&s<r||e>o&&s>o)}function Cm({x:t,y:e},n,{top:s,right:r,bottom:i,left:o}){return t<o&&(e=_m(o,{x:t,y:e},n),t=o),t>r&&(e=_m(r,{x:t,y:e},n),t=r),e<s&&(t=xd(s,{x:t,y:e},n),e=s),e>i&&(t=xd(i,{x:t,y:e},n),e=i),{x:t,y:e}}function v2(t,e,n){const{x:s,y:r}=Cm(t,e,n),{x:i,y:o}=Cm(e,t,n);return{x:s,y:r,x2:i,y2:o,width:Math.abs(i-s),height:Math.abs(o-r)}}function b2(t,{mouseX:e,mouseY:n},s=Rr,r){const{x:i,y:o,x2:a,y2:l}=t.getProps(["x","y","x2","y2"],r),c=a-i,u=l-o,f=mo(c)+mo(u),p=f===0?-1:((e-i)*c+(n-o)*u)/f;let m,v;return p<0?(m=i,v=o):p>1?(m=a,v=l):(m=i+p*c,v=o+p*u),mo(e-m)+mo(n-v)<=s}function Sd(t,{mouseX:e,mouseY:n},s,r){const i=t.label;return i.options.display&&i.inRange(e,n,r,s)}function _2(t,e,n){const s=n.borderWidth,r=ln(n.padding),i=bc(t.ctx,n),o=i.width+r.width+s,a=i.height+r.height+s;return x2(e,n,{width:o,height:a,padding:r},t.chartArea)}function w2(t){const{x:e,y:n,x2:s,y2:r}=t,i=Math.atan2(r-n,s-e);return i>ut/2?i-ut:i<ut/-2?i+ut:i}function x2(t,e,n,s){const{width:r,height:i,padding:o}=n,{xAdjust:a,yAdjust:l}=e,c={x:t.x,y:t.y},u={x:t.x2,y:t.y2},f=e.rotation==="auto"?w2(t):Wt(e.rotation),p=k2(r,i,f),m=S2(t,e,{labelSize:p,padding:o},s),v=t.cp?kd(c,t.cp,u,m):Pf(c,u,m),_={size:p.w,min:s.left,max:s.right,padding:o.left},k={size:p.h,min:s.top,max:s.bottom,padding:o.top},S=Am(v.x,_)+a,P=Am(v.y,k)+l;return{x:S-r/2,y:P-i/2,x2:S+r/2,y2:P+i/2,centerX:S,centerY:P,pointX:v.x,pointY:v.y,width:r,height:i,rotation:bv(f)}}function k2(t,e,n){const s=Math.cos(n),r=Math.sin(n);return{w:Math.abs(t*s)+Math.abs(e*r),h:Math.abs(t*r)+Math.abs(e*s)}}function S2(t,e,n,s){let r;const i=C2(t,s);return e.position==="start"?r=Pm({w:t.x2-t.x,h:t.y2-t.y},n,e,i):e.position==="end"?r=1-Pm({w:t.x-t.x2,h:t.y-t.y2},n,e,i):r=xf(1,e.position),r}function Pm(t,e,n,s){const{labelSize:r,padding:i}=e,o=t.w*s.dx,a=t.h*s.dy,l=o>0&&(r.w/2+i.left-s.x)/o,c=a>0&&(r.h/2+i.top-s.y)/a;return mc(Math.max(l,c),0,.25)}function C2(t,e){const{x:n,x2:s,y:r,y2:i}=t,o=Math.min(r,i)-e.top,a=Math.min(n,s)-e.left,l=e.bottom-Math.max(r,i),c=e.right-Math.max(n,s);return{x:Math.min(a,c),y:Math.min(o,l),dx:a<=c?1:-1,dy:o<=l?1:-1}}function Am(t,e){const{size:n,min:s,max:r,padding:i}=e,o=n/2;return n>r-s?(r+s)/2:(s>=t-i-o&&(t=s+i+o),r<=t+i+o&&(t=r-i-o),t)}function o_(t){const e=t.options,n=e.arrowHeads&&e.arrowHeads.start,s=e.arrowHeads&&e.arrowHeads.end;return{startOpts:n,endOpts:s,startAdjust:Im(t,n),endAdjust:Im(t,s)}}function Im(t,e){if(!e||!e.display)return 0;const{length:n,width:s}=e,r=t.options.borderWidth/2,i={x:n,y:s+r};return Math.abs(xd(0,i,{x:0,y:r}))}function Cd(t,e,n,s){if(!s||!s.display)return;const{length:r,width:i,fill:o,backgroundColor:a,borderColor:l}=s,c=Math.abs(e-r)+n;t.beginPath(),Bi(t,s),Os(t,s),t.moveTo(c,-i),t.lineTo(e+n,0),t.lineTo(c,i),o===!0?(t.fillStyle=a||l,t.closePath(),t.fill(),t.shadowColor="transparent"):t.shadowColor=s.borderShadowColor,t.stroke()}function P2(t,e,n){const{x:s,y:r,x2:i,y2:o,centerX:a,centerY:l}=t,c=Math.atan2(o-r,i-s),u=kf(e.controlPoint,0),f={x:a+ir(n,u.x,!1),y:l+ir(n,u.y,!1)};return Kr(f,{x:a,y:l},c)}function Em(t,{x:e,y:n},{angle:s,adjust:r},i){!i||!i.display||(t.save(),t.translate(e,n),t.rotate(s),Cd(t,0,-r,i),t.restore())}function A2(t,e,n,s){const{x:r,y:i,x2:o,y2:a,options:l}=e,{startOpts:c,endOpts:u,startAdjust:f,endAdjust:p}=o_(e),m={x:r,y:i},v={x:o,y:a},_=km(m,n,v,0),k=km(m,n,v,1)-ut,S=kd(m,n,v,f/s),P=kd(m,n,v,1-p/s),E=new Path2D;t.beginPath(),E.moveTo(S.x,S.y),E.quadraticCurveTo(n.x,n.y,P.x,P.y),t.shadowColor=l.borderShadowColor,t.stroke(E),e.path=E,e.ctx=t,Em(t,S,{angle:_,adjust:f},c),Em(t,P,{angle:k,adjust:p},u)}class la extends _n{inRange(e,n,s,r){const i=this.options.rotation,o=(this.options.borderWidth+this.options.hitTolerance)/2;if(s!=="x"&&s!=="y")return I2({x:e,y:n},this.getProps(["width","height","centerX","centerY"],r),i,o);const{x:a,y:l,x2:c,y2:u}=this.getProps(["x","y","x2","y2"],r),f=s==="y"?{start:l,end:u}:{start:a,end:c},p=Kr({x:e,y:n},this.getCenterPoint(r),Wt(-i));return p[s]>=f.start-o-Rr&&p[s]<=f.end+o+Rr}getCenterPoint(e){return Yr(this,e)}draw(e){const{width:n,height:s,centerX:r,centerY:i,options:o}=this;e.save(),vc(e,this.getCenterPoint(),o.rotation),Bi(e,this.options),e.beginPath(),e.fillStyle=o.backgroundColor;const a=Os(e,o);e.ellipse(r,i,s/2,n/2,ut/2,0,2*ut),e.fill(),a&&(e.shadowColor=o.borderShadowColor,e.stroke()),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){return s_(e,n)}}la.id="ellipseAnnotation";la.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,label:Object.assign({},ji.defaults.label),rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};la.defaultRoutes={borderColor:"color",backgroundColor:"color"};la.descriptors={label:{_fallback:!0}};function I2(t,e,n,s){const{width:r,height:i,centerX:o,centerY:a}=e,l=r/2,c=i/2;if(l<=0||c<=0)return!1;const u=Wt(n||0),f=Math.cos(u),p=Math.sin(u),m=Math.pow(f*(t.x-o)+p*(t.y-a),2),v=Math.pow(p*(t.x-o)-f*(t.y-a),2);return m/Math.pow(l+s,2)+v/Math.pow(c+s,2)<=1.0001}class wc extends _n{inRange(e,n,s,r){const{x:i,y:o,x2:a,y2:l,width:c}=this.getProps(["x","y","x2","y2","width"],r),u=(this.options.borderWidth+this.options.hitTolerance)/2;return s!=="x"&&s!=="y"?xR({x:e,y:n},this.getCenterPoint(r),c/2,u):jb(s==="y"?{start:o,end:l,value:n}:{start:i,end:a,value:e},u)}getCenterPoint(e){return Yr(this,e)}draw(e){const n=this.options,s=n.borderWidth;if(n.radius<.1)return;e.save(),e.fillStyle=n.backgroundColor,Bi(e,n);const r=Os(e,n);OR(e,this,this.centerX,this.centerY),r&&!yc(n.pointStyle)&&(e.shadowColor=n.borderShadowColor,e.stroke()),e.restore(),n.borderWidth=s}resolveElementProperties(e,n){const s=n_(e,n);return s.initProperties=Li(e,s,n),s}}wc.id="pointAnnotation";wc.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,pointStyle:"circle",radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};wc.defaultRoutes={borderColor:"color",backgroundColor:"color"};class xc extends _n{inRange(e,n,s,r){if(s!=="x"&&s!=="y")return this.options.radius>=.1&&this.elements.length>1&&O2(this.elements,e,n,r);const i=Kr({x:e,y:n},this.getCenterPoint(r),Wt(-this.options.rotation)),o=this.elements.map(c=>s==="y"?c.bY:c.bX),a=Math.min(...o),l=Math.max(...o);return i[s]>=a&&i[s]<=l}getCenterPoint(e){return Yr(this,e)}draw(e){const{elements:n,options:s}=this;e.save(),e.beginPath(),e.fillStyle=s.backgroundColor,Bi(e,s);const r=Os(e,s);let i=!0;for(const o of n)i?(e.moveTo(o.x,o.y),i=!1):e.lineTo(o.x,o.y);e.closePath(),e.fill(),r&&(e.shadowColor=s.borderShadowColor,e.stroke()),e.restore()}resolveElementProperties(e,n){const s=n_(e,n),{sides:r,rotation:i}=n,o=[],a=2*ut/r;let l=i*tf;for(let c=0;c<r;c++,l+=a){const u=E2(s,n,l);u.initProperties=Li(e,s,n),o.push(u)}return s.elements=o,s}}xc.id="polygonAnnotation";xc.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,point:{radius:0},radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,sides:3,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};xc.defaultRoutes={borderColor:"color",backgroundColor:"color"};function E2({centerX:t,centerY:e},{radius:n,borderWidth:s,hitTolerance:r},i){const o=(s+r)/2,a=Math.sin(i),l=Math.cos(i),c={x:t+a*n,y:e-l*n};return{type:"point",optionScope:"point",properties:{x:c.x,y:c.y,centerX:c.x,centerY:c.y,bX:t+a*(n+o),bY:e-l*(n+o)}}}function O2(t,e,n,s){let r=!1,i=t[t.length-1].getProps(["bX","bY"],s);for(const o of t){const a=o.getProps(["bX","bY"],s);a.bY>n!=i.bY>n&&e<(i.bX-a.bX)*(n-a.bY)/(i.bY-a.bY)+a.bX&&(r=!r),i=a}return r}const nr={box:ji,doughnutLabel:_c,ellipse:la,label:oa,line:aa,point:wc,polygon:xc};Object.keys(nr).forEach(t=>{Ot.describe(`elements.${nr[t].id}`,{_fallback:"plugins.annotation.common"})});const M2={update:Object.assign},T2=Cf.concat(ql),Om=(t,e)=>Je(e)?Ad(t,e):t,Pd=t=>t==="color"||t==="font";function Af(t="line"){return nr[t]?t:(console.warn(`Unknown annotation type: '${t}', defaulting to 'line'`),"line")}function D2(t,e,n,s){const r=$2(t,n.animations,s),i=e.annotations,o=B2(e.elements,i);for(let a=0;a<i.length;a++){const l=i[a],c=a_(o,a,l.type),u=l.setContext(L2(t,c,o,l)),f=c.resolveElementProperties(t,u);f.skip=R2(f),"elements"in f&&(F2(c,f.elements,u,r),delete f.elements),On(c.x)||Object.assign(c,f),Object.assign(c,f.initProperties),f.options=l_(u),r.update(c,f)}}function R2(t){return isNaN(t.x)||isNaN(t.y)}function $2(t,e,n){return n==="reset"||n==="none"||n==="resize"?M2:new ff(t,e)}function F2(t,e,n,s){const r=t.elements||(t.elements=[]);r.length=e.length;for(let i=0;i<e.length;i++){const o=e[i],a=o.properties,l=a_(r,i,o.type,o.initProperties),c=n[o.optionScope].override(o);a.options=l_(c),s.update(l,a)}}function a_(t,e,n,s){const r=nr[Af(n)];let i=t[e];return(!i||!(i instanceof r))&&(i=t[e]=new r,Object.assign(i,s)),i}function l_(t){const e=nr[Af(t.type)],n={};n.id=t.id,n.type=t.type,n.drawTime=t.drawTime,Object.assign(n,Ad(t,e.defaults),Ad(t,e.defaultRoutes));for(const s of T2)n[s]=t[s];return n}function Ad(t,e){const n={};for(const s of Object.keys(e)){const r=e[s],i=t[s];Pd(s)&&kt(i)?n[s]=i.map(o=>Om(o,r)):n[s]=Om(i,r)}return n}function L2(t,e,n,s){return e.$context||(e.$context=Object.assign(Object.create(t.getContext()),{element:e,get elements(){return n.filter(r=>r&&r.options)},id:s.id,type:"annotation"}))}function B2(t,e){const n=e.length,s=t.length;if(s<n){const r=n-s;t.splice(s,0,...new Array(r))}else s>n&&t.splice(n,s-n);return t}var j2="3.1.0";const Vs=new Map,Mm=t=>t.type!=="doughnutLabel",N2=Cf.concat(ql);var z2={id:"annotation",version:j2,beforeRegister(){kR("chart.js","4.0",er.version)},afterRegister(){er.register(nr)},afterUnregister(){er.unregister(nr)},beforeInit(t){Vs.set(t,{annotations:[],elements:[],visibleElements:[],listeners:{},listened:!1,moveListened:!1,hooks:{},hooked:!1,hovered:[]})},beforeUpdate(t,e,n){const s=Vs.get(t),r=s.annotations=[];let i=n.annotations;Je(i)?Object.keys(i).forEach(o=>{const a=i[o];Je(a)&&(a.id=o,r.push(a))}):kt(i)&&r.push(...i),s2(r.filter(Mm),t.scales)},afterDataLimits(t,e){const n=Vs.get(t);n2(t,e.scale,n.annotations.filter(Mm).filter(s=>s.display&&s.adjustScaleRange))},afterUpdate(t,e,n){const s=Vs.get(t);QR(t,s,n),D2(t,s,n,e.mode),s.visibleElements=s.elements.filter(r=>!r.skip&&r.options.display),t2(t,s,n)},beforeDatasetsDraw(t,e,n){uo(t,"beforeDatasetsDraw",n.clip)},afterDatasetsDraw(t,e,n){uo(t,"afterDatasetsDraw",n.clip)},beforeDatasetDraw(t,e,n){uo(t,e.index,n.clip)},beforeDraw(t,e,n){uo(t,"beforeDraw",n.clip)},afterDraw(t,e,n){uo(t,"afterDraw",n.clip)},beforeEvent(t,e,n){const s=Vs.get(t);JR(s,e.event,n)&&(e.changed=!0)},afterDestroy(t){Vs.delete(t)},getAnnotations(t){const e=Vs.get(t);return e?e.elements:[]},_getAnnotationElementsAtEventForMode(t,e,n){return wf(t,e,n)},defaults:{animations:{numbers:{properties:["x","y","x2","y2","width","height","centerX","centerY","pointX","pointY","radius"],type:"number"},colors:{properties:["backgroundColor","borderColor"],type:"color"}},clip:!0,interaction:{mode:void 0,axis:void 0,intersect:void 0},common:{drawTime:"afterDatasetsDraw",init:!1,label:{}}},descriptors:{_indexable:!1,_scriptable:t=>!N2.includes(t)&&t!=="init",annotations:{_allKeys:!1,_fallback:(t,e)=>`elements.${nr[Af(e.type)].id}`},interaction:{_fallback:!0},common:{label:{_indexable:Pd,_fallback:!0},_indexable:Pd}},additionalOptionScopes:[""]};function uo(t,e,n){const{ctx:s,chartArea:r}=t,i=Vs.get(t);n&&ea(s,r);const o=U2(i.visibleElements,e).sort((a,l)=>a.element.options.z-l.element.options.z);for(const a of o)q2(s,r,i,a);n&&ta(s)}function U2(t,e){const n=[];for(const s of t)if(s.options.drawTime===e&&n.push({element:s,main:!0}),s.elements&&s.elements.length)for(const r of s.elements)r.options.display&&r.options.drawTime===e&&n.push({element:r});return n}function q2(t,e,n,s){const r=s.element;s.main?(ym(n,r,"beforeDraw"),r.draw(t,e),ym(n,r,"afterDraw")):r.draw(t,e)}const W2={style:{height:"200px"}},V2=Ze({__name:"PriceHistoryChart",props:{pricePoints:{},transactions:{}},setup(t){er.register(rb,ib,Gv,na,tb,sb,Zv,z2);const e=t,n={"mtgjson.cardmarket":3,"cardmarket.priceguide":2,scryfall:1},s=He(()=>{const o=m=>{try{return new Date(m).toISOString().slice(0,10)}catch{return}},a={nonfoil:{},foil:{}};for(const m of e.pricePoints??[]){const v=m.finish||"nonfoil";if(v==="etched")continue;const _=m.date??(m.asOf?o(m.asOf):void 0);if(!_)continue;const k=n[m.provider??""]??0,S=m.asOf?new Date(m.asOf).getTime():0,P=(m.priceCent??0)/100,E=a[v],C=E[_];(!C||k>C.rank||k===C.rank&&S>C.asOfTs)&&(E[_]={value:P,rank:k,asOfTs:S})}const l=new Set([...Object.keys(a.nonfoil),...Object.keys(a.foil)]),c=Array.from(l).sort((m,v)=>m.localeCompare(v)),u=c.map(m=>a.nonfoil[m]?.value??null),f=c.map(m=>a.foil[m]?.value??null);return{labels:c.map(m=>new Date(m).toLocaleDateString()),nonfoil:u,foil:f}}),r=He(()=>({labels:s.value.labels,datasets:[{label:"Regular",backgroundColor:"rgba(13,110,253,0.15)",borderColor:"#0d6efd",pointRadius:0,data:s.value.nonfoil,fill:!1,tension:.2},{label:"Foil",backgroundColor:"rgba(32,201,151,0.15)",borderColor:"#20c997",pointRadius:0,data:s.value.foil,fill:!1,tension:.2}]})),i=He(()=>{const o=(e.transactions??[]).map(a=>({type:"line",yMin:new Be(a.unitPrice,a.currency).getDecimal(),yMax:new Be(a.unitPrice,a.currency).getDecimal(),borderColor:/buy/i.test(a.kind)?"green":"red",borderWidth:2,borderDash:[5,5],label:{content:`${a.kind} @ ${new Be(a.unitPrice,a.currency).format("de-DE")}`,enabled:!1}}));return{responsive:!0,maintainAspectRatio:!1,animation:{duration:0},scales:{y:{ticks:{callback(a){return typeof a=="number"?new Be(a*100,"EUR").format("de-DE"):a}}},x:{ticks:{maxRotation:0,autoSkip:!0}}},plugins:{legend:{display:!0},tooltip:{callbacks:{label(a){const l=a.parsed.y;return`${a.dataset.label}: ${new Be(Math.round((l??0)*100),"EUR").format("de-DE")}`}}},annotation:{annotations:o}},elements:{line:{spanGaps:!0}}}});return(o,a)=>(q(),J("div",null,[w("div",W2,[qe($e(cb),{data:r.value,options:i.value},null,8,["data","options"])])]))}}),H2={class:"card-image-container position-relative overflow-hidden rounded",style:{"padding-bottom":"140%"}},K2={key:1,class:"placeholder-image card-img-top position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center"},Y2={class:"card-body"},G2={class:"card-title fs-6 fw-medium mb-1"},X2={class:"card-text small text-muted mb-2"},Q2={class:"ms-auto"},J2={key:0,class:"badge rounded-pill bg-primary-subtle text-primary-emphasis"},Z2={key:1,class:"badge rounded-pill bg-success-subtle text-success-emphasis"},e$={key:2,class:"small text-muted fst-italic"},t$={key:3,class:"small text-muted fst-italic"},n$={class:"modal-dialog modal-dialog-centered modal-lg"},s$={class:"modal-content glass"},r$={class:"modal-header py-2"},i$={class:"modal-body py-3"},o$={class:"row g-3 align-items-start"},a$={class:"col-lg-5"},l$={class:"card-inner",style:{"padding-bottom":"140%"}},c$={class:"card-front"},u$={key:1,class:"placeholder-image w-100 h-100 rounded-4 position-relative"},d$={class:"card-back"},f$=["src"],h$={class:"row row-cols-2 g-2 small mt-3 mb-0 meta-grid"},p$={class:"col text-end fw-semibold"},g$={class:"col text-end fw-semibold"},m$={class:"col text-end fw-semibold"},y$={class:"col text-end fw-semibold"},v$={class:"col-lg-7"},b$={class:"d-flex justify-content-between align-items-center mb-3"},_$={class:"ms-auto d-flex gap-2 align-items-center"},w$={key:0,class:"badge rounded-pill bg-primary-subtle text-primary-emphasis"},x$={key:1,class:"badge rounded-pill bg-success-subtle text-success-emphasis"},k$={key:2,class:"small text-muted fst-italic"},S$={key:3,class:"small text-muted fst-italic"},C$={key:0,class:"mb-3"},P$={key:1,class:"mb-3"},A$={class:"d-flex gap-3 small"},I$={class:"mt-2 border rounded-3 p-2 small",style:{"max-height":"30vh",overflow:"auto"}},E$={class:"row g-2 align-items-center"},O$={class:"col-6 col-md-3"},M$={class:"fw-medium"},T$={class:"col-6 col-md-3"},D$={class:"fw-medium"},R$={class:"col-6 col-md-3"},$$={class:"fw-medium"},F$={key:0,class:"col-6 col-md-3"},L$={class:"fw-medium"},B$={key:2},j$={class:"mt-2 small",style:{"max-height":"30vh",overflow:"auto"}},N$={class:"flex-grow-1"},z$={class:"fw-medium"},U$={class:"text-muted"},q$={class:"fw-semibold"},W$=Ze({inheritAttrs:!0,__name:"CardComponent",props:{card:{},disableModal:{type:Boolean}},setup(t){const e=Xd(),n=He(()=>e.getLatestNonfoil(r.card.id)),s=He(()=>e.getLatestFoil(r.card.id)),r=t,i=he(!1),o=he(!1),a=he([]),l=he([]),c=he([]),u=he(!1),f=he(!1),p=He(()=>l.value?[...l.value].sort((C,I)=>new Date(I.happenedAt).getTime()-new Date(C.happenedAt).getTime()):[]),m=He(()=>!a.value||a.value.length===0?0:a.value.reduce((C,I)=>{if(!I.disposedAt||I.disposedQuantity&&I.disposedQuantity<I.quantity){const T=I.disposedQuantity?I.quantity-I.disposedQuantity:I.quantity;return C+T}return C},0)),v=async()=>{i.value=!0,await E(),c.value=await e.getPriceHistory(r.card.id)},_=()=>{i.value=!1},k=C=>new Date(C).toLocaleDateString(),S=(C,I)=>new Be(C,I).format("de-DE"),P=C=>{C.target===C.currentTarget&&_()},E=async()=>{try{a.value=await we.card_lots.where("cardId").equals(r.card.id).toArray(),l.value=await we.transactions.where("cardId").equals(r.card.id).toArray()}catch(C){console.error("Error loading card details:",C)}finally{o.value=!1}};return(C,I)=>(q(),J(et,null,[w("div",{class:"card h-100 card-item",onClick:I[0]||(I[0]=T=>!r.disableModal&&v())},[w("div",H2,[C.card.imageUrl?(q(),J("div",{key:0,class:"card-img-top position-absolute top-0 start-0 w-100 h-100",style:An({backgroundImage:`url(${C.card.imageUrl})`,backgroundSize:"cover",backgroundPosition:"center"})},null,4)):(q(),J("div",K2,[...I[4]||(I[4]=[w("span",{class:"text-muted"},"Missing Image",-1)])]))]),w("div",Y2,[w("h3",G2,oe(C.card.name),1),w("p",X2,oe(C.card.set)+" #"+oe(C.card.number),1),w("div",Q2,[n.value?(q(),J("span",J2," Regular: "+oe(n.value.format("de-DE")),1)):ke("",!0),s.value?(q(),J("span",Z2," Foil: "+oe(s.value.format("de-DE")),1)):ke("",!0),!n.value&&!s.value&&o.value?(q(),J("span",e$," Loading ")):!n.value&&!s.value?(q(),J("span",t$," Price unavailable ")):ke("",!0)])])]),qe($e($D),{open:i.value,"onUpdate:open":I[3]||(I[3]=T=>i.value=T)},{default:at(()=>[qe($e(pR),null,{default:at(()=>[qe($e(uR),{class:"modal-backdrop fade show"}),qe($e(oR),{class:"modal d-block compact-modal",onClick:P,onEscapeKeyDown:_},{default:at(()=>[w("div",n$,[w("div",s$,[w("div",r$,[qe($e(mR),{class:"modal-title h5 mb-0"},{default:at(()=>[bt(oe(C.card.name),1)]),_:1}),qe($e(LD),{"as-child":""},{default:at(()=>[...I[5]||(I[5]=[w("button",{type:"button",class:"btn-close","aria-label":"Close"},null,-1)])]),_:1})]),w("div",i$,[w("div",o$,[w("div",a$,[w("div",{class:Pt(["card-flipper position-relative",{"is-flipped":u.value}])},[w("div",l$,[w("div",c$,[C.card.imageUrl?(q(),J("div",{key:0,class:"w-100 h-100 rounded-4",style:An({backgroundImage:`url(${C.card.imageUrl})`,backgroundSize:"cover",backgroundPosition:"center"})},null,4)):(q(),J("div",u$,[...I[6]||(I[6]=[w("div",{class:"position-absolute top-50 start-50 translate-middle"},[w("span",{class:"text-muted"},"Missing Image")],-1)])]))]),w("div",d$,[C.card.imageUrlBack?(q(),J("div",{key:0,class:"w-100 h-100 rounded-4",style:An({backgroundImage:`url(${C.card.imageUrlBack})`,backgroundSize:"cover",backgroundPosition:"center"})},null,4)):ke("",!0)])]),C.card.layout==="transform"||C.card.layout==="modal_dfc"||C.card.layout==="reversible_card"||C.card.imageUrl&&C.card.imageUrlBack?(q(),J("button",{key:0,onClick:I[1]||(I[1]=T=>u.value=!u.value),class:"btn btn-sm btn-dark flip-button"}," Flip ")):ke("",!0)],2),w("img",{src:C.card.imageUrlBack,style:{display:"none"}},null,8,f$),w("dl",h$,[I[7]||(I[7]=w("dt",{class:"col text-muted"},"Set",-1)),w("dd",p$,oe(C.card.set)+" ("+oe(C.card.setCode)+")",1),I[8]||(I[8]=w("dt",{class:"col text-muted"},"Number",-1)),w("dd",g$,"#"+oe(C.card.number),1),I[9]||(I[9]=w("dt",{class:"col text-muted"},"Language",-1)),w("dd",m$,oe(C.card.lang),1),I[10]||(I[10]=w("dt",{class:"col text-muted"},"Finish",-1)),w("dd",y$,oe(C.card.finish),1)])]),w("div",v$,[w("div",b$,[I[11]||(I[11]=w("h3",{class:"h6 mb-0"},"Current Price",-1)),w("div",_$,[n.value?(q(),J("span",w$," Regular: "+oe(n.value.format("de-DE")),1)):ke("",!0),s.value?(q(),J("span",x$," Foil: "+oe(s.value.format("de-DE")),1)):ke("",!0),!n.value&&!s.value&&o.value?(q(),J("span",k$," Loading ")):!n.value&&!s.value?(q(),J("span",S$," Price unavailable ")):ke("",!0)])]),c.value&&c.value.length>0?(q(),J("div",C$,[I[12]||(I[12]=w("h3",{class:"h6 mb-2"},"Price History",-1)),qe(V2,{"price-points":c.value,transactions:l.value},null,8,["price-points","transactions"])])):ke("",!0),a.value&&a.value.length?(q(),J("div",P$,[I[22]||(I[22]=w("h3",{class:"h6 mb-2"},"Your Collection",-1)),w("div",A$,[w("div",null,[I[13]||(I[13]=w("span",{class:"text-muted"},"Lots:",-1)),I[14]||(I[14]=bt()),w("strong",null,oe(a.value.length),1)]),w("div",null,[I[15]||(I[15]=w("span",{class:"text-muted"},"Cards:",-1)),I[16]||(I[16]=bt()),w("strong",null,oe(m.value),1)])]),a.value.length>2?(q(),J("button",{key:0,class:"btn btn-link btn-sm p-0 mt-1",onClick:I[2]||(I[2]=T=>f.value=!f.value)},oe(f.value?"Hide details":"Show details"),1)):ke("",!0),Fr(w("div",I$,[(q(!0),J(et,null,Ft(a.value,T=>(q(),J("div",{key:T.id,class:"border rounded p-2 mb-2"},[w("div",E$,[w("div",O$,[I[17]||(I[17]=w("span",{class:"text-muted"},"Qty:",-1)),I[18]||(I[18]=bt()),w("span",M$,oe(T.quantity),1)]),w("div",T$,[I[19]||(I[19]=w("span",{class:"text-muted"},"Unit Cost:",-1)),w("span",D$,oe(S(T.unitCost,T.currency||"EUR")),1)]),w("div",R$,[I[20]||(I[20]=w("span",{class:"text-muted"},"Purchased:",-1)),w("span",$$,oe(k(T.purchasedAt)),1)]),T.disposedQuantity?(q(),J("div",F$,[I[21]||(I[21]=w("span",{class:"text-muted"},"Disposed:",-1)),w("span",L$,oe(T.disposedQuantity),1)])):ke("",!0)])]))),128))],512),[[jw,f.value]])])):ke("",!0),l.value&&l.value.length?(q(),J("div",B$,[I[23]||(I[23]=w("h3",{class:"h6 mb-2"},"Transaction History",-1)),w("div",j$,[(q(!0),J(et,null,Ft(p.value,T=>(q(),J("div",{key:T.id,class:Pt(["tx-item d-flex align-items-center gap-2 p-2 mb-2 rounded border",{buy:/buy/i.test(T.kind),sell:/sell/i.test(T.kind)}])},[w("span",{class:Pt(["badge me-1",/buy/i.test(T.kind)?"bg-success-subtle text-success-emphasis":"bg-danger-subtle text-danger-emphasis"])},oe(T.kind),3),w("div",N$,[w("div",z$,oe(k(T.happenedAt)),1),w("div",U$,"Qty: "+oe(T.quantity),1)]),w("div",q$,oe(S(T.unitPrice,T.currency)),1)],2))),128))])])):ke("",!0)])])])])])]),_:1})]),_:1})]),_:1},8,["open"])],64))}}),c_=pn(W$,[["__scopeId","data-v-88faa196"]]),V$={class:"container py-4"},H$={key:0,class:"text-center py-5"},K$={key:1,class:"text-center py-5"},Y$={key:2},G$={class:"d-flex align-items-center justify-content-between mb-3"},X$={class:"d-flex gap-2"},Q$={class:"card shadow-sm mb-4"},J$={class:"card-body"},Z$={class:"d-flex align-items-start justify-content-between"},eF={class:"w-100"},tF={key:1,class:"d-flex align-items-center flex-nowrap gap-2"},nF={class:"input-group input-group-lg w-auto",style:{"max-width":"480px"}},sF={class:"d-flex flex-wrap align-items-center gap-2 mt-2"},rF={key:0,class:"badge text-uppercase bg-info text-dark"},iF={class:"text-muted"},oF={key:1,class:"text-success d-inline-flex align-items-center"},aF={key:0,class:"alert alert-warning mt-3 py-2 mb-0"},lF={key:0,class:"text-center py-5 text-muted"},cF={key:1,class:"row row-cols-2 row-cols-md-3 row-cols-lg-4 row-cols-xl-5 row-cols-xxl-6 g-3"},uF=["onClick"],dF={key:0,class:"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-success",title:"Face card"},fF={class:"modal-dialog"},hF={class:"modal-content"},pF={class:"modal-body"},gF={class:"mb-0"},mF={class:"modal-footer"},yF=["disabled"],vF=["disabled"],bF={key:0,class:"spinner-border spinner-border-sm me-1",role:"status","aria-hidden":"true"},_F={key:4,class:"modal-backdrop fade show"},wF="https://placehold.co/200x280?text=Card+Image",xF=Ze({__name:"DeckDetailView",setup(t){const e=Gd(),n=av(),s=he(null),r=he([]),i=he({}),o=he(!0),a=he(!1),l=he(""),c=he(null),u=he(!1),f=he(!1),p=he(!1),m=He(()=>s.value?.faceCardId?_(s.value.faceCardId):null),v=K=>K?new Date(K).toLocaleDateString():"",_=K=>i.value[K]||{id:K,name:"Unknown Card",set:"Unknown Set",setCode:"???",number:"???",lang:"en",finish:"nonfoil",imageUrl:wF},k=()=>{s.value&&(a.value=!0,l.value=s.value.name,an(()=>{c.value?.focus(),c.value?.select()}))},S=async()=>{if(!s.value){a.value=!1;return}const K=l.value.trim();if(!K||K===s.value.name){a.value=!1;return}try{await we.decks.update(s.value.id,{name:K}),s.value.name=K}catch(j){console.error("Error updating deck title:",j),alert("Failed to update deck title. Please try again.")}finally{a.value=!1}},P=()=>{a.value=!1,l.value=s.value?.name??""},E=()=>{u.value=!u.value},C=async K=>{await I(K),u.value=!1},I=async K=>{if(s.value)try{await we.decks.update(s.value.id,{faceCardId:K}),s.value.faceCardId=K}catch(j){console.error("Error updating face card:",j),alert("Failed to update face card. Please try again.")}},T=async()=>{if(s.value)try{await we.decks.update(s.value.id,{faceCardId:void 0}),s.value.faceCardId=void 0}catch(K){console.error("Error clearing face card:",K),alert("Failed to clear face card. Please try again.")}},G=()=>{f.value=!0},V=()=>{p.value||(f.value=!1)},A=async()=>{if(!(!s.value||p.value)){p.value=!0;try{await we.deck_cards.where("deckId").equals(s.value.id).delete(),await we.decks.delete(s.value.id),V(),n.push("/decks")}catch(K){console.error("Error deleting deck:",K),alert("Failed to delete deck. Please try again.")}finally{p.value=!1}}};return Mn(async()=>{try{const K=e.params.id,j=await we.decks.get(K);if(!j)return;s.value=j,l.value=j.name;const de=await we.deck_cards.where("deckId").equals(K).toArray();r.value=de;const ge=de.map(Ae=>Ae.cardId).filter(Boolean);if(ge.length){const Ae=await we.cards.where("id").anyOf(ge).toArray();i.value=Object.fromEntries(Ae.map(Se=>[Se.id,Se]))}}catch(K){console.error("Error loading deck:",K)}finally{o.value=!1}}),(K,j)=>{const de=Si("router-link");return q(),J("div",V$,[o.value?(q(),J("div",H$,[...j[1]||(j[1]=[w("div",{class:"spinner-border",role:"status","aria-hidden":"true"},null,-1),w("div",{class:"mt-2"},"Loading deck",-1)])])):s.value?(q(),J("div",Y$,[w("div",G$,[qe(de,{to:"/decks",class:"btn btn-link px-0"},{default:at(()=>[...j[4]||(j[4]=[bt("  Back to Decks ",-1)])]),_:1}),w("div",X$,[w("button",{onClick:E,class:Pt(["btn",u.value?"btn-glass-warning":"btn-glass-primary"])},oe(u.value?"Cancel Select Mode":"Select Face Card"),3),s.value.faceCardId?(q(),J("button",{key:0,onClick:T,class:"btn btn-glass-secondary"}," Remove Face Card ")):ke("",!0),w("button",{onClick:G,class:"btn btn-glass-danger"}," Delete Deck ")])]),w("div",Q$,[w("div",J$,[w("div",Z$,[w("div",eF,[a.value?(q(),J("div",tF,[w("div",nF,[Fr(w("input",{ref_key:"titleInput",ref:c,"onUpdate:modelValue":j[0]||(j[0]=ge=>l.value=ge),onKeyup:[Vh(S,["enter"]),Vh(P,["esc"])],type:"text",class:"form-control",placeholder:"Deck title"},null,544),[[El,l.value]]),w("button",{onClick:S,class:"btn btn-glass-primary"},"Save"),w("button",{onClick:P,class:"btn btn-outline-secondary"},"Cancel")])])):(q(),J("h1",{key:0,onClick:k,class:"h3 mb-2 editable",title:"Click to edit title"},[bt(oe(s.value.name)+" ",1),j[5]||(j[5]=w("span",{class:"ms-2 small text-muted"},"",-1))])),w("div",sF,[s.value.platform?(q(),J("span",rF,oe(s.value.platform),1)):ke("",!0),w("small",iF,"Imported: "+oe(v(s.value.importedAt)),1),m.value?(q(),J("small",oF,[...j[6]||(j[6]=[w("span",{class:"me-1"},"",-1),bt(" Face card set ",-1)])])):ke("",!0)])])]),u.value?(q(),J("div",aF," Select mode is active  click a card below to set it as the face card. ")):ke("",!0)])]),w("div",null,[j[8]||(j[8]=w("h2",{class:"h5 mb-3"},"Cards in Deck",-1)),r.value.length===0?(q(),J("div",lF," No cards found in this deck. ")):(q(),J("div",cF,[(q(!0),J(et,null,Ft(r.value,ge=>(q(),J("div",{key:ge.id,class:"col"},[w("div",{class:Pt(["position-relative h-100",{"border border-success rounded":ge.cardId===s.value.faceCardId,"cursor-pointer":u.value}]),role:"button",onClick:Ae=>u.value?C(ge.cardId):null},[qe(c_,{card:_(ge.cardId),"disable-modal":u.value},null,8,["card","disable-modal"]),ge.cardId===s.value.faceCardId?(q(),J("span",dF,[...j[7]||(j[7]=[bt("  ",-1),w("span",{class:"visually-hidden"},"Face card",-1)])])):ke("",!0)],10,uF)]))),128))]))])])):(q(),J("div",K$,[j[3]||(j[3]=w("p",{class:"mb-3"},"Deck not found.",-1)),qe(de,{to:"/decks",class:"btn btn-outline-secondary"},{default:at(()=>[...j[2]||(j[2]=[bt(" Back to Decks",-1)])]),_:1})])),f.value?(q(),J("div",{key:3,class:"modal fade show",tabindex:"-1",style:{display:"block"},"aria-modal":"true",role:"dialog","aria-labelledby":"deleteDeckLabel",onClick:dl(V,["self"])},[w("div",fF,[w("div",hF,[w("div",{class:"modal-header"},[j[9]||(j[9]=w("h5",{id:"deleteDeckLabel",class:"modal-title"},"Delete this deck?",-1)),w("button",{type:"button",class:"btn-close","aria-label":"Close",onClick:V})]),w("div",pF,[w("p",gF,[j[10]||(j[10]=bt(" Youre about to delete ",-1)),w("strong",null,oe(s.value?.name),1),j[11]||(j[11]=bt(". This action cannot be undone. ",-1))])]),w("div",mF,[w("button",{class:"btn btn-outline-secondary",disabled:p.value,onClick:V}," Cancel ",8,yF),w("button",{class:"btn btn-danger",disabled:p.value,onClick:A},[p.value?(q(),J("span",bF)):ke("",!0),j[12]||(j[12]=bt(" Delete ",-1))],8,vF)])])])])):ke("",!0),f.value?(q(),J("div",_F)):ke("",!0)])}}}),kF=pn(xF,[["__scopeId","data-v-c02bed36"]]),SF={key:0,class:"pagination-controls"},CF={class:"pagination justify-content-center"},PF=["onClick"],AF={class:"pagination-info text-center mt-2"},IF=Ze({__name:"PaginationComponent",props:{currentPage:{},totalItems:{},itemsPerPage:{},maxVisiblePages:{}},emits:["update:currentPage"],setup(t,{emit:e}){const n=t,s=e,r=He(()=>Math.ceil(n.totalItems/n.itemsPerPage)),i=He(()=>n.maxVisiblePages||5),o=He(()=>{const u=[],f=Math.floor(i.value/2);let p=Math.max(1,n.currentPage-f),m=Math.min(r.value,p+i.value-1);m-p+1<i.value&&(p=Math.max(1,m-i.value+1));for(let v=p;v<=m;v++)u.push(v);return u}),a=He(()=>(n.currentPage-1)*n.itemsPerPage),l=He(()=>n.currentPage*n.itemsPerPage),c=u=>{u>=1&&u<=r.value&&u!==n.currentPage&&s("update:currentPage",u)};return(u,f)=>r.value>1?(q(),J("nav",SF,[w("ul",CF,[w("li",{class:Pt(["page-item",{disabled:u.currentPage===1}])},[w("a",{class:"page-link",href:"#",onClick:f[0]||(f[0]=dl(p=>c(u.currentPage-1),["prevent"]))},"Previous")],2),(q(!0),J(et,null,Ft(o.value,p=>(q(),J("li",{key:p,class:Pt(["page-item",{active:p===u.currentPage}])},[w("a",{class:"page-link",href:"#",onClick:dl(m=>c(p),["prevent"])},oe(p),9,PF)],2))),128)),w("li",{class:Pt(["page-item",{disabled:u.currentPage===r.value}])},[w("a",{class:"page-link",href:"#",onClick:f[1]||(f[1]=dl(p=>c(u.currentPage+1),["prevent"]))},"Next")],2)]),w("div",AF," Showing "+oe(a.value+1)+"-"+oe(Math.min(l.value,u.totalItems))+" of "+oe(u.totalItems)+" items ",1)])):ke("",!0)}}),EF=pn(IF,[["__scopeId","data-v-7b87ee6f"]]),OF={class:"cards-view"},MF={class:"header"},TF={class:"controls"},DF={class:"search-box"},RF={class:"sort-controls"},$F={class:"page-size-controls"},FF={key:0,class:"loading"},LF={key:1,class:"empty-state"},BF={key:0},jF={key:1},NF={key:2},zF={class:"row g-4"},UF=Ze({__name:"CardsView",setup(t){const e=Xd(),n=Gd(),s=av(),r=he(""),i=he("name"),o=he("asc"),a=he(parseInt(n.query.page)||1),l=he(parseInt(n.query.itemsPerPage)||24);Ht(()=>n.query,m=>{a.value=parseInt(m.page)||1,l.value=parseInt(m.itemsPerPage)||24}),Ht([a,l],()=>{const m={};a.value!==1&&(m.page=a.value.toString()),l.value!==24&&(m.itemsPerPage=l.value.toString()),r.value&&(m.search=r.value),i.value!=="name"&&(m.sortBy=i.value),o.value!=="asc"&&(m.sortDirection=o.value),s.replace({query:m})});const c=He(()=>{const m=e.getAllCards;if(!r.value)return m;const v=r.value.toLowerCase();return m.filter(_=>_.name.toLowerCase().includes(v)||_.set.toLowerCase().includes(v)||_.number.includes(v))}),u=He(()=>{const m=[...c.value];return m.sort((v,_)=>{let k=0;switch(i.value){case"name":k=v.name.localeCompare(_.name);break;case"set":k=v.set.localeCompare(_.set);break;case"price":{const S=e.getCardPrice(v.id)?.getCents()??0,P=e.getCardPrice(_.id)?.getCents()??0;k=S-P}break;case"owned":k=0;break;default:k=v.name.localeCompare(_.name)}return o.value==="asc"?k:-k}),m}),f=He(()=>{const m=(a.value-1)*l.value,v=m+l.value;return u.value.slice(m,v)}),p=m=>{a.value=m,window.scrollTo({top:0,behavior:"smooth"})};return Mn(()=>{n.query.search&&(r.value=n.query.search),n.query.sortBy&&(i.value=n.query.sortBy),n.query.sortDirection&&(o.value=n.query.sortDirection),e.loadCards(),setTimeout(()=>{e.loadCardPrices()},0)}),(m,v)=>(q(),J("div",OF,[w("div",MF,[w("div",TF,[w("div",DF,[Fr(w("input",{"onUpdate:modelValue":v[0]||(v[0]=_=>r.value=_),type:"text",placeholder:"Search cards...",class:"form-control"},null,512),[[El,r.value]])]),w("div",RF,[Fr(w("select",{"onUpdate:modelValue":v[1]||(v[1]=_=>i.value=_),class:"form-select"},[...v[4]||(v[4]=[w("option",{value:"name"},"Name",-1),w("option",{value:"set"},"Set",-1),w("option",{value:"price"},"Price",-1),w("option",{value:"owned"},"Owned Quantity",-1)])],512),[[qh,i.value]]),w("button",{onClick:v[2]||(v[2]=_=>o.value=o.value==="asc"?"desc":"asc"),class:"btn btn-glass-primary"},oe(o.value==="asc"?"":""),1)]),w("div",$F,[v[6]||(v[6]=w("label",{for:"itemsPerPage",class:"form-label me-2"},"Items per page:",-1)),Fr(w("select",{id:"itemsPerPage","onUpdate:modelValue":v[3]||(v[3]=_=>l.value=_),class:"form-select",style:{width:"auto"}},[...v[5]||(v[5]=[w("option",{value:12},"12",-1),w("option",{value:24},"24",-1),w("option",{value:48},"48",-1),w("option",{value:96},"96",-1)])],512),[[qh,l.value]])])])]),$e(e).loading||$e(e).loadingPrices?(q(),J("div",FF," Loading cards and prices... ")):u.value.length===0?(q(),J("div",LF,[r.value?(q(),J("p",BF,"No cards match your search.")):(q(),J("p",jF,"You don't have any cards in your collection yet."))])):(q(),J("div",NF,[w("div",zF,[(q(!0),J(et,null,Ft(f.value,_=>(q(),J("div",{key:_.id,class:"col-xl-2 col-lg-3 col-md-4 col-sm-6"},[qe(c_,{card:_},null,8,["card"])]))),128))]),qe(EF,{"current-page":a.value,"total-items":u.value.length,"items-per-page":l.value,"onUpdate:currentPage":p},null,8,["current-page","total-items","items-per-page"])]))]))}}),qF=pn(UF,[["__scopeId","data-v-9526db4f"]]),WF=[{path:"/",name:"home",component:DI},{path:"/import",component:zI,children:[{path:"",name:"import",redirect:"/import/cardmarket"},{path:"cardmarket",name:"import-cardmarket",component:LO},{path:"mtgjson",name:"import-mtgjson",component:dT},{path:"price-guide",name:"import-price-guide",component:MT}]},{path:"/import/deck",name:"deck-import",component:zT},{path:"/decks",name:"decks",component:sD},{path:"/decks/:id",name:"deck-detail",component:kF,props:!0},{path:"/cards",name:"cards",component:qF}],VF=y1({history:Hx("/mtg-pwa/"),routes:WF}),HF="modulepreload",KF=function(t){return"/mtg-pwa/"+t},Tm={},YF=function(e,n,s){let r=Promise.resolve();if(n&&n.length>0){let c=function(u){return Promise.all(u.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};var o=c;document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=a?.nonce||a?.getAttribute("nonce");r=c(n.map(u=>{if(u=KF(u),u in Tm)return;Tm[u]=!0;const f=u.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${p}`))return;const m=document.createElement("link");if(m.rel=f?"stylesheet":HF,f||(m.as="script"),m.crossOrigin="",m.href=u,l&&m.setAttribute("nonce",l),document.head.appendChild(m),f)return new Promise((v,_)=>{m.addEventListener("load",v),m.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return r.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})};function GF(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:s,onRegistered:r,onRegisteredSW:i,onRegisterError:o}=t;let a,l;const c=async(f=!0)=>{await l};async function u(){if("serviceWorker"in navigator){if(a=await YF(async()=>{const{Workbox:f}=await import("./workbox-window.prod.es5-CwtvwXb3.js");return{Workbox:f}},[]).then(({Workbox:f})=>new f("/mtg-pwa/sw.js",{scope:"/mtg-pwa/",type:"classic"})).catch(f=>{o?.(f)}),!a)return;a.addEventListener("activated",f=>{(f.isUpdate||f.isExternal)&&window.location.reload()}),a.addEventListener("installed",f=>{f.isUpdate||s?.()}),a.register({immediate:e}).then(f=>{i?i("/mtg-pwa/sw.js",f):r?.(f)}).catch(f=>{o?.(f)})}}return l=u(),c}GF({immediate:!0,onRegistered(t){console.log("SW registered",t)},onRegisterError(t){console.error("SW registration error",t)}});const u_=fx(tk),XF=S1();u_.use(XF);async function QF(){u_.use(VF).mount("#app");try{setTimeout(async()=>{await fi.schedulePriceUpdate()},1e3)}catch(t){console.error("Error initializing automatic price updates:",t)}}QF();
