const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ManaboxImportView-cB4-0LXN.js","assets/ManaboxImportView-RHdACiCr.css"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();/**
* @vue/shared v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Td(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const mt={},mi=[],or=()=>{},Um=()=>!1,Yl=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Rd=t=>t.startsWith("onUpdate:"),Bt=Object.assign,$d=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},K_=Object.prototype.hasOwnProperty,ft=(t,e)=>K_.call(t,e),qe=Array.isArray,yi=t=>Zo(t)==="[object Map]",Gl=t=>Zo(t)==="[object Set]",fh=t=>Zo(t)==="[object Date]",Ye=t=>typeof t=="function",It=t=>typeof t=="string",Wn=t=>typeof t=="symbol",vt=t=>t!==null&&typeof t=="object",Wm=t=>(vt(t)||Ye(t))&&Ye(t.then)&&Ye(t.catch),Vm=Object.prototype.toString,Zo=t=>Vm.call(t),Y_=t=>Zo(t).slice(8,-1),Hm=t=>Zo(t)==="[object Object]",Fd=t=>It(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,vo=Td(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Xl=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},G_=/-(\w)/g,Mn=Xl(t=>t.replace(G_,(e,n)=>n?n.toUpperCase():"")),X_=/\B([A-Z])/g,os=Xl(t=>t.replace(X_,"-$1").toLowerCase()),Ql=Xl(t=>t.charAt(0).toUpperCase()+t.slice(1)),ll=Xl(t=>t?`on${Ql(t)}`:""),Qr=(t,e)=>!Object.is(t,e),cl=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},Km=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},wl=t=>{const e=parseFloat(t);return isNaN(e)?t:e},Q_=t=>{const e=It(t)?Number(t):NaN;return isNaN(e)?t:e};let hh;const Jl=()=>hh||(hh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function En(t){if(qe(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=It(r)?t0(r):En(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(It(t)||vt(t))return t}const J_=/;(?![^(]*\))/g,Z_=/:([^]+)/,e0=/\/\*[^]*?\*\//g;function t0(t){const e={};return t.replace(e0,"").split(J_).forEach(n=>{if(n){const r=n.split(Z_);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function At(t){let e="";if(It(t))e=t;else if(qe(t))for(let n=0;n<t.length;n++){const r=At(t[n]);r&&(e+=r+" ")}else if(vt(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function n0(t){if(!t)return null;let{class:e,style:n}=t;return e&&!It(e)&&(t.class=At(e)),n&&(t.style=En(n)),t}const r0="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",s0=Td(r0);function Ym(t){return!!t||t===""}function i0(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=Zl(t[r],e[r]);return n}function Zl(t,e){if(t===e)return!0;let n=fh(t),r=fh(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=Wn(t),r=Wn(e),n||r)return t===e;if(n=qe(t),r=qe(e),n||r)return n&&r?i0(t,e):!1;if(n=vt(t),r=vt(e),n||r){if(!n||!r)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!Zl(t[o],e[o]))return!1}}return String(t)===String(e)}function o0(t,e){return t.findIndex(n=>Zl(n,e))}const Gm=t=>!!(t&&t.__v_isRef===!0),oe=t=>It(t)?t:t==null?"":qe(t)||vt(t)&&(t.toString===Vm||!Ye(t.toString))?Gm(t)?oe(t.value):JSON.stringify(t,Xm,2):String(t),Xm=(t,e)=>Gm(e)?Xm(t,e.value):yi(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],i)=>(n[su(r,i)+" =>"]=s,n),{})}:Gl(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>su(n))}:Wn(e)?su(e):vt(e)&&!qe(e)&&!Hm(e)?String(e):e,su=(t,e="")=>{var n;return Wn(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let on;class Qm{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=on,!e&&on&&(this.index=(on.scopes||(on.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=on;try{return on=this,e()}finally{on=n}}}on(){++this._on===1&&(this.prevScope=on,on=this)}off(){this._on>0&&--this._on===0&&(on=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function ec(t){return new Qm(t)}function Ld(){return on}function Jm(t,e=!1){on&&on.cleanups.push(t)}let bt;const iu=new WeakSet;class Zm{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,on&&on.active&&on.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,iu.has(this)&&(iu.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||ty(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,ph(this),ny(this);const e=bt,n=Un;bt=this,Un=!0;try{return this.fn()}finally{ry(this),bt=e,Un=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Nd(e);this.deps=this.depsTail=void 0,ph(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?iu.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Yu(this)&&this.run()}get dirty(){return Yu(this)}}let ey=0,bo,_o;function ty(t,e=!1){if(t.flags|=8,e){t.next=_o,_o=t;return}t.next=bo,bo=t}function Bd(){ey++}function jd(){if(--ey>0)return;if(_o){let e=_o;for(_o=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;bo;){let e=bo;for(bo=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function ny(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function ry(t){let e,n=t.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),Nd(r),a0(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}t.deps=e,t.depsTail=n}function Yu(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(sy(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function sy(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===$o)||(t.globalVersion=$o,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Yu(t))))return;t.flags|=2;const e=t.dep,n=bt,r=Un;bt=t,Un=!0;try{ny(t);const s=t.fn(t._value);(e.version===0||Qr(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(s){throw e.version++,s}finally{bt=n,Un=r,ry(t),t.flags&=-3}}function Nd(t,e=!1){const{dep:n,prevSub:r,nextSub:s}=t;if(r&&(r.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)Nd(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function a0(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let Un=!0;const iy=[];function Ir(){iy.push(Un),Un=!1}function Er(){const t=iy.pop();Un=t===void 0?!0:t}function ph(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=bt;bt=void 0;try{e()}finally{bt=n}}}let $o=0;class l0{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class zd{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!bt||!Un||bt===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==bt)n=this.activeLink=new l0(bt,this),bt.deps?(n.prevDep=bt.depsTail,bt.depsTail.nextDep=n,bt.depsTail=n):bt.deps=bt.depsTail=n,oy(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=bt.depsTail,n.nextDep=void 0,bt.depsTail.nextDep=n,bt.depsTail=n,bt.deps===n&&(bt.deps=r)}return n}trigger(e){this.version++,$o++,this.notify(e)}notify(e){Bd();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{jd()}}}function oy(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)oy(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const xl=new WeakMap,Fs=Symbol(""),Gu=Symbol(""),Fo=Symbol("");function an(t,e,n){if(Un&&bt){let r=xl.get(t);r||xl.set(t,r=new Map);let s=r.get(n);s||(r.set(n,s=new zd),s.map=r,s.key=n),s.track()}}function Sr(t,e,n,r,s,i){const o=xl.get(t);if(!o){$o++;return}const a=l=>{l&&l.trigger()};if(Bd(),e==="clear")o.forEach(a);else{const l=qe(t),c=l&&Fd(n);if(l&&n==="length"){const u=Number(r);o.forEach((f,p)=>{(p==="length"||p===Fo||!Wn(p)&&p>=u)&&a(f)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),c&&a(o.get(Fo)),e){case"add":l?c&&a(o.get("length")):(a(o.get(Fs)),yi(t)&&a(o.get(Gu)));break;case"delete":l||(a(o.get(Fs)),yi(t)&&a(o.get(Gu)));break;case"set":yi(t)&&a(o.get(Fs));break}}jd()}function c0(t,e){const n=xl.get(t);return n&&n.get(e)}function ii(t){const e=tt(t);return e===t?e:(an(e,"iterate",Fo),zn(t)?e:e.map(Xt))}function tc(t){return an(t=tt(t),"iterate",Fo),t}const u0={__proto__:null,[Symbol.iterator](){return ou(this,Symbol.iterator,Xt)},concat(...t){return ii(this).concat(...t.map(e=>qe(e)?ii(e):e))},entries(){return ou(this,"entries",t=>(t[1]=Xt(t[1]),t))},every(t,e){return hr(this,"every",t,e,void 0,arguments)},filter(t,e){return hr(this,"filter",t,e,n=>n.map(Xt),arguments)},find(t,e){return hr(this,"find",t,e,Xt,arguments)},findIndex(t,e){return hr(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return hr(this,"findLast",t,e,Xt,arguments)},findLastIndex(t,e){return hr(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return hr(this,"forEach",t,e,void 0,arguments)},includes(...t){return au(this,"includes",t)},indexOf(...t){return au(this,"indexOf",t)},join(t){return ii(this).join(t)},lastIndexOf(...t){return au(this,"lastIndexOf",t)},map(t,e){return hr(this,"map",t,e,void 0,arguments)},pop(){return Xi(this,"pop")},push(...t){return Xi(this,"push",t)},reduce(t,...e){return gh(this,"reduce",t,e)},reduceRight(t,...e){return gh(this,"reduceRight",t,e)},shift(){return Xi(this,"shift")},some(t,e){return hr(this,"some",t,e,void 0,arguments)},splice(...t){return Xi(this,"splice",t)},toReversed(){return ii(this).toReversed()},toSorted(t){return ii(this).toSorted(t)},toSpliced(...t){return ii(this).toSpliced(...t)},unshift(...t){return Xi(this,"unshift",t)},values(){return ou(this,"values",Xt)}};function ou(t,e,n){const r=tc(t),s=r[e]();return r!==t&&!zn(t)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.value&&(i.value=n(i.value)),i}),s}const d0=Array.prototype;function hr(t,e,n,r,s,i){const o=tc(t),a=o!==t&&!zn(t),l=o[e];if(l!==d0[e]){const f=l.apply(t,i);return a?Xt(f):f}let c=n;o!==t&&(a?c=function(f,p){return n.call(this,Xt(f),p,t)}:n.length>2&&(c=function(f,p){return n.call(this,f,p,t)}));const u=l.call(o,c,r);return a&&s?s(u):u}function gh(t,e,n,r){const s=tc(t);let i=n;return s!==t&&(zn(t)?n.length>3&&(i=function(o,a,l){return n.call(this,o,a,l,t)}):i=function(o,a,l){return n.call(this,o,Xt(a),l,t)}),s[e](i,...r)}function au(t,e,n){const r=tt(t);an(r,"iterate",Fo);const s=r[e](...n);return(s===-1||s===!1)&&ea(n[0])?(n[0]=tt(n[0]),r[e](...n)):s}function Xi(t,e,n=[]){Ir(),Bd();const r=tt(t)[e].apply(t,n);return jd(),Er(),r}const f0=Td("__proto__,__v_isRef,__isVue"),ay=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Wn));function h0(t){Wn(t)||(t=String(t));const e=tt(this);return an(e,"has",t),e.hasOwnProperty(t)}class ly{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?k0:fy:i?dy:uy).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=qe(e);if(!s){let l;if(o&&(l=u0[n]))return l;if(n==="hasOwnProperty")return h0}const a=Reflect.get(e,n,Rt(e)?e:r);return(Wn(n)?ay.has(n):f0(n))||(s||an(e,"get",n),i)?a:Rt(a)?o&&Fd(n)?a:a.value:vt(a)?s?py(a):Ws(a):a}}class cy extends ly{constructor(e=!1){super(!1,e)}set(e,n,r,s){let i=e[n];if(!this._isShallow){const l=rs(i);if(!zn(r)&&!rs(r)&&(i=tt(i),r=tt(r)),!qe(e)&&Rt(i)&&!Rt(r))return l||(i.value=r),!0}const o=qe(e)&&Fd(n)?Number(n)<e.length:ft(e,n),a=Reflect.set(e,n,r,Rt(e)?e:s);return e===tt(s)&&(o?Qr(r,i)&&Sr(e,"set",n,r):Sr(e,"add",n,r)),a}deleteProperty(e,n){const r=ft(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&Sr(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!Wn(n)||!ay.has(n))&&an(e,"has",n),r}ownKeys(e){return an(e,"iterate",qe(e)?"length":Fs),Reflect.ownKeys(e)}}class p0 extends ly{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const g0=new cy,m0=new p0,y0=new cy(!0);const Xu=t=>t,La=t=>Reflect.getPrototypeOf(t);function v0(t,e,n){return function(...r){const s=this.__v_raw,i=tt(s),o=yi(i),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=s[t](...r),u=n?Xu:e?kl:Xt;return!e&&an(i,"iterate",l?Gu:Fs),{next(){const{value:f,done:p}=c.next();return p?{value:f,done:p}:{value:a?[u(f[0]),u(f[1])]:u(f),done:p}},[Symbol.iterator](){return this}}}}function Ba(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function b0(t,e){const n={get(s){const i=this.__v_raw,o=tt(i),a=tt(s);t||(Qr(s,a)&&an(o,"get",s),an(o,"get",a));const{has:l}=La(o),c=e?Xu:t?kl:Xt;if(l.call(o,s))return c(i.get(s));if(l.call(o,a))return c(i.get(a));i!==o&&i.get(s)},get size(){const s=this.__v_raw;return!t&&an(tt(s),"iterate",Fs),s.size},has(s){const i=this.__v_raw,o=tt(i),a=tt(s);return t||(Qr(s,a)&&an(o,"has",s),an(o,"has",a)),s===a?i.has(s):i.has(s)||i.has(a)},forEach(s,i){const o=this,a=o.__v_raw,l=tt(a),c=e?Xu:t?kl:Xt;return!t&&an(l,"iterate",Fs),a.forEach((u,f)=>s.call(i,c(u),c(f),o))}};return Bt(n,t?{add:Ba("add"),set:Ba("set"),delete:Ba("delete"),clear:Ba("clear")}:{add(s){!e&&!zn(s)&&!rs(s)&&(s=tt(s));const i=tt(this);return La(i).has.call(i,s)||(i.add(s),Sr(i,"add",s,s)),this},set(s,i){!e&&!zn(i)&&!rs(i)&&(i=tt(i));const o=tt(this),{has:a,get:l}=La(o);let c=a.call(o,s);c||(s=tt(s),c=a.call(o,s));const u=l.call(o,s);return o.set(s,i),c?Qr(i,u)&&Sr(o,"set",s,i):Sr(o,"add",s,i),this},delete(s){const i=tt(this),{has:o,get:a}=La(i);let l=o.call(i,s);l||(s=tt(s),l=o.call(i,s)),a&&a.call(i,s);const c=i.delete(s);return l&&Sr(i,"delete",s,void 0),c},clear(){const s=tt(this),i=s.size!==0,o=s.clear();return i&&Sr(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=v0(s,t,e)}),n}function qd(t,e){const n=b0(t,e);return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(ft(n,s)&&s in r?n:r,s,i)}const _0={get:qd(!1,!1)},w0={get:qd(!1,!0)},x0={get:qd(!0,!1)};const uy=new WeakMap,dy=new WeakMap,fy=new WeakMap,k0=new WeakMap;function C0(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function S0(t){return t.__v_skip||!Object.isExtensible(t)?0:C0(Y_(t))}function Ws(t){return rs(t)?t:Ud(t,!1,g0,_0,uy)}function hy(t){return Ud(t,!1,y0,w0,dy)}function py(t){return Ud(t,!0,m0,x0,fy)}function Ud(t,e,n,r,s){if(!vt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=S0(t);if(i===0)return t;const o=s.get(t);if(o)return o;const a=new Proxy(t,i===2?r:n);return s.set(t,a),a}function Jr(t){return rs(t)?Jr(t.__v_raw):!!(t&&t.__v_isReactive)}function rs(t){return!!(t&&t.__v_isReadonly)}function zn(t){return!!(t&&t.__v_isShallow)}function ea(t){return t?!!t.__v_raw:!1}function tt(t){const e=t&&t.__v_raw;return e?tt(e):t}function Wd(t){return!ft(t,"__v_skip")&&Object.isExtensible(t)&&Km(t,"__v_skip",!0),t}const Xt=t=>vt(t)?Ws(t):t,kl=t=>vt(t)?py(t):t;function Rt(t){return t?t.__v_isRef===!0:!1}function he(t){return gy(t,!1)}function nc(t){return gy(t,!0)}function gy(t,e){return Rt(t)?t:new P0(t,e)}class P0{constructor(e,n){this.dep=new zd,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:tt(e),this._value=n?e:Xt(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||zn(e)||rs(e);e=r?e:tt(e),Qr(e,n)&&(this._rawValue=e,this._value=r?e:Xt(e),this.dep.trigger())}}function $e(t){return Rt(t)?t.value:t}function ar(t){return Ye(t)?t():$e(t)}const A0={get:(t,e,n)=>e==="__v_raw"?t:$e(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return Rt(s)&&!Rt(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function my(t){return Jr(t)?t:new Proxy(t,A0)}function Vd(t){const e=qe(t)?new Array(t.length):{};for(const n in t)e[n]=E0(t,n);return e}class I0{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return c0(tt(this._object),this._key)}}function E0(t,e,n){const r=t[e];return Rt(r)?r:new I0(t,e,n)}class O0{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new zd(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=$o-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&bt!==this)return ty(this,!0),!0}get value(){const e=this.dep.track();return sy(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function M0(t,e,n=!1){let r,s;return Ye(t)?r=t:(r=t.get,s=t.set),new O0(r,s,n)}const ja={},Cl=new WeakMap;let As;function D0(t,e=!1,n=As){if(n){let r=Cl.get(n);r||Cl.set(n,r=[]),r.push(t)}}function T0(t,e,n=mt){const{immediate:r,deep:s,once:i,scheduler:o,augmentJob:a,call:l}=n,c=M=>s?M:zn(M)||s===!1||s===0?Pr(M,1):Pr(M);let u,f,p,m,v=!1,_=!1;if(Rt(t)?(f=()=>t.value,v=zn(t)):Jr(t)?(f=()=>c(t),v=!0):qe(t)?(_=!0,v=t.some(M=>Jr(M)||zn(M)),f=()=>t.map(M=>{if(Rt(M))return M.value;if(Jr(M))return c(M);if(Ye(M))return l?l(M,2):M()})):Ye(t)?e?f=l?()=>l(t,2):t:f=()=>{if(p){Ir();try{p()}finally{Er()}}const M=As;As=u;try{return l?l(t,3,[m]):t(m)}finally{As=M}}:f=or,e&&s){const M=f,D=s===!0?1/0:s;f=()=>Pr(M(),D)}const x=Ld(),C=()=>{u.stop(),x&&x.active&&$d(x.effects,u)};if(i&&e){const M=e;e=(...D)=>{M(...D),C()}}let S=_?new Array(t.length).fill(ja):ja;const P=M=>{if(!(!(u.flags&1)||!u.dirty&&!M))if(e){const D=u.run();if(s||v||(_?D.some((A,T)=>Qr(A,S[T])):Qr(D,S))){p&&p();const A=As;As=u;try{const T=[D,S===ja?void 0:_&&S[0]===ja?[]:S,m];S=D,l?l(e,3,T):e(...T)}finally{As=A}}}else u.run()};return a&&a(P),u=new Zm(f),u.scheduler=o?()=>o(P,!1):P,m=M=>D0(M,!1,u),p=u.onStop=()=>{const M=Cl.get(u);if(M){if(l)l(M,4);else for(const D of M)D();Cl.delete(u)}},e?r?P(!0):S=u.run():o?o(P.bind(null,!0),!0):u.run(),C.pause=u.pause.bind(u),C.resume=u.resume.bind(u),C.stop=C,C}function Pr(t,e=1/0,n){if(e<=0||!vt(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,Rt(t))Pr(t.value,e,n);else if(qe(t))for(let r=0;r<t.length;r++)Pr(t[r],e,n);else if(Gl(t)||yi(t))t.forEach(r=>{Pr(r,e,n)});else if(Hm(t)){for(const r in t)Pr(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Pr(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ta(t,e,n,r){try{return r?t(...r):t()}catch(s){rc(s,e,n)}}function Vn(t,e,n,r){if(Ye(t)){const s=ta(t,e,n,r);return s&&Wm(s)&&s.catch(i=>{rc(i,e,n)}),s}if(qe(t)){const s=[];for(let i=0;i<t.length;i++)s.push(Vn(t[i],e,n,r));return s}}function rc(t,e,n,r=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||mt;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const u=a.ec;if(u){for(let f=0;f<u.length;f++)if(u[f](t,l,c)===!1)return}a=a.parent}if(i){Ir(),ta(i,null,10,[t,l,c]),Er();return}}R0(t,n,s,r,o)}function R0(t,e,n,r=!0,s=!1){if(s)throw t;console.error(t)}const mn=[];let nr=-1;const vi=[];let Hr=null,ui=0;const yy=Promise.resolve();let Sl=null;function un(t){const e=Sl||yy;return t?e.then(this?t.bind(this):t):e}function $0(t){let e=nr+1,n=mn.length;for(;e<n;){const r=e+n>>>1,s=mn[r],i=Lo(s);i<t||i===t&&s.flags&2?e=r+1:n=r}return e}function Hd(t){if(!(t.flags&1)){const e=Lo(t),n=mn[mn.length-1];!n||!(t.flags&2)&&e>=Lo(n)?mn.push(t):mn.splice($0(e),0,t),t.flags|=1,vy()}}function vy(){Sl||(Sl=yy.then(_y))}function F0(t){qe(t)?vi.push(...t):Hr&&t.id===-1?Hr.splice(ui+1,0,t):t.flags&1||(vi.push(t),t.flags|=1),vy()}function mh(t,e,n=nr+1){for(;n<mn.length;n++){const r=mn[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;mn.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function by(t){if(vi.length){const e=[...new Set(vi)].sort((n,r)=>Lo(n)-Lo(r));if(vi.length=0,Hr){Hr.push(...e);return}for(Hr=e,ui=0;ui<Hr.length;ui++){const n=Hr[ui];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Hr=null,ui=0}}const Lo=t=>t.id==null?t.flags&2?-1:1/0:t.id;function _y(t){try{for(nr=0;nr<mn.length;nr++){const e=mn[nr];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),ta(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;nr<mn.length;nr++){const e=mn[nr];e&&(e.flags&=-2)}nr=-1,mn.length=0,by(),Sl=null,(mn.length||vi.length)&&_y()}}let Qt=null,wy=null;function Pl(t){const e=Qt;return Qt=t,wy=t&&t.type.__scopeId||null,e}function st(t,e=Qt,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&Eh(-1);const i=Pl(e);let o;try{o=t(...s)}finally{Pl(i),r._d&&Eh(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Ls(t,e){if(Qt===null)return t;const n=lc(Qt),r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,o,a,l=mt]=e[s];i&&(Ye(i)&&(i={mounted:i,updated:i}),i.deep&&Pr(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function gs(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let l=a.dir[r];l&&(Ir(),Vn(l,n,8,[t.el,a,t,e]),Er())}}const xy=Symbol("_vte"),L0=t=>t.__isTeleport,wo=t=>t&&(t.disabled||t.disabled===""),yh=t=>t&&(t.defer||t.defer===""),vh=t=>typeof SVGElement<"u"&&t instanceof SVGElement,bh=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,Qu=(t,e)=>{const n=t&&t.to;return It(n)?e?e(n):null:n},ky={name:"Teleport",__isTeleport:!0,process(t,e,n,r,s,i,o,a,l,c){const{mc:u,pc:f,pbc:p,o:{insert:m,querySelector:v,createText:_,createComment:x}}=c,C=wo(e.props);let{shapeFlag:S,children:P,dynamicChildren:M}=e;if(t==null){const D=e.el=_(""),A=e.anchor=_("");m(D,n,r),m(A,n,r);const T=(E,Q)=>{S&16&&(s&&s.isCE&&(s.ce._teleportTarget=E),u(P,E,Q,s,i,o,a,l))},B=()=>{const E=e.target=Qu(e.props,v),Q=Cy(E,e,_,m);E&&(o!=="svg"&&vh(E)?o="svg":o!=="mathml"&&bh(E)&&(o="mathml"),C||(T(E,Q),ul(e,!1)))};C&&(T(n,A),ul(e,!0)),yh(e.props)?(e.el.__isMounted=!1,gn(()=>{B(),delete e.el.__isMounted},i)):B()}else{if(yh(e.props)&&t.el.__isMounted===!1){gn(()=>{ky.process(t,e,n,r,s,i,o,a,l,c)},i);return}e.el=t.el,e.targetStart=t.targetStart;const D=e.anchor=t.anchor,A=e.target=t.target,T=e.targetAnchor=t.targetAnchor,B=wo(t.props),E=B?n:A,Q=B?D:T;if(o==="svg"||vh(A)?o="svg":(o==="mathml"||bh(A))&&(o="mathml"),M?(p(t.dynamicChildren,M,E,s,i,o,a),Gd(t,e,!0)):l||f(t,e,E,Q,s,i,o,a,!1),C)B?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):Na(e,n,D,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const V=e.target=Qu(e.props,v);V&&Na(e,V,null,c,0)}else B&&Na(e,A,T,c,1);ul(e,C)}},remove(t,e,n,{um:r,o:{remove:s}},i){const{shapeFlag:o,children:a,anchor:l,targetStart:c,targetAnchor:u,target:f,props:p}=t;if(f&&(s(c),s(u)),i&&s(l),o&16){const m=i||!wo(p);for(let v=0;v<a.length;v++){const _=a[v];r(_,e,n,m,!!_.dynamicChildren)}}},move:Na,hydrate:B0};function Na(t,e,n,{o:{insert:r},m:s},i=2){i===0&&r(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:c,props:u}=t,f=i===2;if(f&&r(o,e,n),(!f||wo(u))&&l&16)for(let p=0;p<c.length;p++)s(c[p],e,n,2);f&&r(a,e,n)}function B0(t,e,n,r,s,i,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:c,createText:u}},f){const p=e.target=Qu(e.props,l);if(p){const m=wo(e.props),v=p._lpa||p.firstChild;if(e.shapeFlag&16)if(m)e.anchor=f(o(t),e,a(t),n,r,s,i),e.targetStart=v,e.targetAnchor=v&&o(v);else{e.anchor=o(t);let _=v;for(;_;){if(_&&_.nodeType===8){if(_.data==="teleport start anchor")e.targetStart=_;else if(_.data==="teleport anchor"){e.targetAnchor=_,p._lpa=e.targetAnchor&&o(e.targetAnchor);break}}_=o(_)}e.targetAnchor||Cy(p,e,u,c),f(v&&o(v),e,p,n,r,s,i)}ul(e,m)}return e.anchor&&o(e.anchor)}const j0=ky;function ul(t,e){const n=t.ctx;if(n&&n.ut){let r,s;for(e?(r=t.el,s=t.anchor):(r=t.targetStart,s=t.targetAnchor);r&&r!==s;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function Cy(t,e,n,r){const s=e.targetStart=n(""),i=e.targetAnchor=n("");return s[xy]=i,t&&(r(s,t),r(i,t)),i}const Is=Symbol("_leaveCb"),za=Symbol("_enterCb");function N0(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Tn(()=>{t.isMounted=!0}),ic(()=>{t.isUnmounting=!0}),t}const $n=[Function,Array],z0={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:$n,onEnter:$n,onAfterEnter:$n,onEnterCancelled:$n,onBeforeLeave:$n,onLeave:$n,onAfterLeave:$n,onLeaveCancelled:$n,onBeforeAppear:$n,onAppear:$n,onAfterAppear:$n,onAppearCancelled:$n};function q0(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function Ju(t,e,n,r,s){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:u,onEnterCancelled:f,onBeforeLeave:p,onLeave:m,onAfterLeave:v,onLeaveCancelled:_,onBeforeAppear:x,onAppear:C,onAfterAppear:S,onAppearCancelled:P}=e,M=String(t.key),D=q0(n,t),A=(E,Q)=>{E&&Vn(E,r,9,Q)},T=(E,Q)=>{const V=Q[1];A(E,Q),qe(E)?E.every(z=>z.length<=1)&&V():E.length<=1&&V()},B={mode:o,persisted:a,beforeEnter(E){let Q=l;if(!n.isMounted)if(i)Q=x||l;else return;E[Is]&&E[Is](!0);const V=D[M];V&&di(t,V)&&V.el[Is]&&V.el[Is](),A(Q,[E])},enter(E){let Q=c,V=u,z=f;if(!n.isMounted)if(i)Q=C||c,V=S||u,z=P||f;else return;let pe=!1;const me=E[za]=Ce=>{pe||(pe=!0,Ce?A(z,[E]):A(V,[E]),B.delayedLeave&&B.delayedLeave(),E[za]=void 0)};Q?T(Q,[E,me]):me()},leave(E,Q){const V=String(t.key);if(E[za]&&E[za](!0),n.isUnmounting)return Q();A(p,[E]);let z=!1;const pe=E[Is]=me=>{z||(z=!0,Q(),me?A(_,[E]):A(v,[E]),E[Is]=void 0,D[V]===t&&delete D[V])};D[V]=t,m?T(m,[E,pe]):pe()},clone(E){return Ju(E,e,n,r)}};return B}function Bo(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Bo(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Sy(t,e=!1,n){let r=[],s=0;for(let i=0;i<t.length;i++){let o=t[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===et?(o.patchFlag&128&&s++,r=r.concat(Sy(o.children,e,a))):(e||o.type!==Hn)&&r.push(a!=null?ss(o,{key:a}):o)}if(s>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function Ze(t,e){return Ye(t)?Bt({name:t.name},e,{setup:t}):t}function U0(){const t=cr();return t?(t.appContext.config.idPrefix||"v")+"-"+t.ids[0]+t.ids[1]++:""}function Py(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function xo(t,e,n,r,s=!1){if(qe(t)){t.forEach((v,_)=>xo(v,e&&(qe(e)?e[_]:e),n,r,s));return}if(bi(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&xo(t,e,n,r.component.subTree);return}const i=r.shapeFlag&4?lc(r.component):r.el,o=s?null:i,{i:a,r:l}=t,c=e&&e.r,u=a.refs===mt?a.refs={}:a.refs,f=a.setupState,p=tt(f),m=f===mt?Um:v=>ft(p,v);if(c!=null&&c!==l){if(It(c))u[c]=null,m(c)&&(f[c]=null);else if(Rt(c)){c.value=null;const v=e;v.k&&(u[v.k]=null)}}if(Ye(l))ta(l,a,12,[o,u]);else{const v=It(l),_=Rt(l);if(v||_){const x=()=>{if(t.f){const C=v?m(l)?f[l]:u[l]:l.value;if(s)qe(C)&&$d(C,i);else if(qe(C))C.includes(i)||C.push(i);else if(v)u[l]=[i],m(l)&&(f[l]=u[l]);else{const S=[i];l.value=S,t.k&&(u[t.k]=S)}}else v?(u[l]=o,m(l)&&(f[l]=o)):_&&(l.value=o,t.k&&(u[t.k]=o))};o?(x.id=-1,gn(x,n)):x()}}}Jl().requestIdleCallback;Jl().cancelIdleCallback;const bi=t=>!!t.type.__asyncLoader,Ay=t=>t.type.__isKeepAlive;function W0(t,e){Iy(t,"a",e)}function V0(t,e){Iy(t,"da",e)}function Iy(t,e,n=cn){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(sc(e,r,n),n){let s=n.parent;for(;s&&s.parent;)Ay(s.parent.vnode)&&H0(r,e,n,s),s=s.parent}}function H0(t,e,n,r){const s=sc(e,t,r,!0);Fi(()=>{$d(r[e],s)},n)}function sc(t,e,n=cn,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{Ir();const a=na(n),l=Vn(e,n,t,o);return a(),Er(),l});return r?s.unshift(i):s.push(i),i}}const Mr=t=>(e,n=cn)=>{(!zo||t==="sp")&&sc(t,(...r)=>e(...r),n)},K0=Mr("bm"),Tn=Mr("m"),Y0=Mr("bu"),Ey=Mr("u"),ic=Mr("bum"),Fi=Mr("um"),G0=Mr("sp"),X0=Mr("rtg"),Q0=Mr("rtc");function J0(t,e=cn){sc("ec",t,e)}const Z0="components";function Si(t,e){return tw(Z0,t,!0,e)||t}const ew=Symbol.for("v-ndc");function tw(t,e,n=!0,r=!1){const s=Qt||cn;if(s){const i=s.type;{const a=Nw(i,!1);if(a&&(a===e||a===Mn(e)||a===Ql(Mn(e))))return i}const o=_h(s[t]||i[t],e)||_h(s.appContext[t],e);return!o&&r?i:o}}function _h(t,e){return t&&(t[e]||t[Mn(e)]||t[Ql(Mn(e))])}function Ft(t,e,n,r){let s;const i=n,o=qe(t);if(o||It(t)){const a=o&&Jr(t);let l=!1,c=!1;a&&(l=!zn(t),c=rs(t),t=tc(t)),s=new Array(t.length);for(let u=0,f=t.length;u<f;u++)s[u]=e(l?c?kl(Xt(t[u])):Xt(t[u]):t[u],u,void 0,i)}else if(typeof t=="number"){s=new Array(t);for(let a=0;a<t;a++)s[a]=e(a+1,a,void 0,i)}else if(vt(t))if(t[Symbol.iterator])s=Array.from(t,(a,l)=>e(a,l,void 0,i));else{const a=Object.keys(t);s=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const u=a[l];s[l]=e(t[u],u,l,i)}}else s=[];return s}function xn(t,e,n={},r,s){if(Qt.ce||Qt.parent&&bi(Qt.parent)&&Qt.parent.ce)return U(),en(et,null,[ze("slot",n,r)],64);let i=t[e];i&&i._c&&(i._d=!1),U();const o=i&&Oy(i(n)),a=n.key||o&&o.key,l=en(et,{key:(a&&!Wn(a)?a:`_${e}`)+(!o&&r?"_fb":"")},o||[],o&&t._===1?64:-2);return l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),i&&i._c&&(i._d=!0),l}function Oy(t){return t.some(e=>No(e)?!(e.type===Hn||e.type===et&&!Oy(e.children)):!0)?t:null}const Zu=t=>t?Xy(t)?lc(t):Zu(t.parent):null,ko=Bt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Zu(t.parent),$root:t=>Zu(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Dy(t),$forceUpdate:t=>t.f||(t.f=()=>{Hd(t.update)}),$nextTick:t=>t.n||(t.n=un.bind(t.proxy)),$watch:t=>kw.bind(t)}),lu=(t,e)=>t!==mt&&!t.__isScriptSetup&&ft(t,e),nw={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const m=o[e];if(m!==void 0)switch(m){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(lu(r,e))return o[e]=1,r[e];if(s!==mt&&ft(s,e))return o[e]=2,s[e];if((c=t.propsOptions[0])&&ft(c,e))return o[e]=3,i[e];if(n!==mt&&ft(n,e))return o[e]=4,n[e];ed&&(o[e]=0)}}const u=ko[e];let f,p;if(u)return e==="$attrs"&&an(t.attrs,"get",""),u(t);if((f=a.__cssModules)&&(f=f[e]))return f;if(n!==mt&&ft(n,e))return o[e]=4,n[e];if(p=l.config.globalProperties,ft(p,e))return p[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return lu(s,e)?(s[e]=n,!0):r!==mt&&ft(r,e)?(r[e]=n,!0):ft(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:i,type:o}},a){let l,c;return!!(n[a]||t!==mt&&a[0]!=="$"&&ft(t,a)||lu(e,a)||(l=i[0])&&ft(l,a)||ft(r,a)||ft(ko,a)||ft(s.config.globalProperties,a)||(c=o.__cssModules)&&c[a])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:ft(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function wh(t){return qe(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let ed=!0;function rw(t){const e=Dy(t),n=t.proxy,r=t.ctx;ed=!1,e.beforeCreate&&xh(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:f,mounted:p,beforeUpdate:m,updated:v,activated:_,deactivated:x,beforeDestroy:C,beforeUnmount:S,destroyed:P,unmounted:M,render:D,renderTracked:A,renderTriggered:T,errorCaptured:B,serverPrefetch:E,expose:Q,inheritAttrs:V,components:z,directives:pe,filters:me}=e;if(c&&sw(c,r,null),o)for(const xe in o){const te=o[xe];Ye(te)&&(r[xe]=te.bind(n))}if(s){const xe=s.call(n,n);vt(xe)&&(t.data=Ws(xe))}if(ed=!0,i)for(const xe in i){const te=i[xe],ee=Ye(te)?te.bind(n,n):Ye(te.get)?te.get.bind(n,n):or,Y=!Ye(te)&&Ye(te.set)?te.set.bind(n):or,Le=Ve({get:ee,set:Y});Object.defineProperty(r,xe,{enumerable:!0,configurable:!0,get:()=>Le.value,set:ke=>Le.value=ke})}if(a)for(const xe in a)My(a[xe],r,n,xe);if(l){const xe=Ye(l)?l.call(n):l;Reflect.ownKeys(xe).forEach(te=>{Co(te,xe[te])})}u&&xh(u,t,"c");function we(xe,te){qe(te)?te.forEach(ee=>xe(ee.bind(n))):te&&xe(te.bind(n))}if(we(K0,f),we(Tn,p),we(Y0,m),we(Ey,v),we(W0,_),we(V0,x),we(J0,B),we(Q0,A),we(X0,T),we(ic,S),we(Fi,M),we(G0,E),qe(Q))if(Q.length){const xe=t.exposed||(t.exposed={});Q.forEach(te=>{Object.defineProperty(xe,te,{get:()=>n[te],set:ee=>n[te]=ee,enumerable:!0})})}else t.exposed||(t.exposed={});D&&t.render===or&&(t.render=D),V!=null&&(t.inheritAttrs=V),z&&(t.components=z),pe&&(t.directives=pe),E&&Py(t)}function sw(t,e,n=or){qe(t)&&(t=td(t));for(const r in t){const s=t[r];let i;vt(s)?"default"in s?i=On(s.from||r,s.default,!0):i=On(s.from||r):i=On(s),Rt(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function xh(t,e,n){Vn(qe(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function My(t,e,n,r){let s=r.includes(".")?Uy(n,r):()=>n[r];if(It(t)){const i=e[t];Ye(i)&&Kt(s,i)}else if(Ye(t))Kt(s,t.bind(n));else if(vt(t))if(qe(t))t.forEach(i=>My(i,e,n,r));else{const i=Ye(t.handler)?t.handler.bind(n):e[t.handler];Ye(i)&&Kt(s,i,t)}}function Dy(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let l;return a?l=a:!s.length&&!n&&!r?l=e:(l={},s.length&&s.forEach(c=>Al(l,c,o,!0)),Al(l,e,o)),vt(e)&&i.set(e,l),l}function Al(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&Al(t,i,n,!0),s&&s.forEach(o=>Al(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=iw[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const iw={data:kh,props:Ch,emits:Ch,methods:ho,computed:ho,beforeCreate:pn,created:pn,beforeMount:pn,mounted:pn,beforeUpdate:pn,updated:pn,beforeDestroy:pn,beforeUnmount:pn,destroyed:pn,unmounted:pn,activated:pn,deactivated:pn,errorCaptured:pn,serverPrefetch:pn,components:ho,directives:ho,watch:aw,provide:kh,inject:ow};function kh(t,e){return e?t?function(){return Bt(Ye(t)?t.call(this,this):t,Ye(e)?e.call(this,this):e)}:e:t}function ow(t,e){return ho(td(t),td(e))}function td(t){if(qe(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function pn(t,e){return t?[...new Set([].concat(t,e))]:e}function ho(t,e){return t?Bt(Object.create(null),t,e):e}function Ch(t,e){return t?qe(t)&&qe(e)?[...new Set([...t,...e])]:Bt(Object.create(null),wh(t),wh(e??{})):e}function aw(t,e){if(!t)return e;if(!e)return t;const n=Bt(Object.create(null),t);for(const r in e)n[r]=pn(t[r],e[r]);return n}function Ty(){return{app:null,config:{isNativeTag:Um,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let lw=0;function cw(t,e){return function(r,s=null){Ye(r)||(r=Bt({},r)),s!=null&&!vt(s)&&(s=null);const i=Ty(),o=new WeakSet,a=[];let l=!1;const c=i.app={_uid:lw++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:Jy,get config(){return i.config},set config(u){},use(u,...f){return o.has(u)||(u&&Ye(u.install)?(o.add(u),u.install(c,...f)):Ye(u)&&(o.add(u),u(c,...f))),c},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),c},component(u,f){return f?(i.components[u]=f,c):i.components[u]},directive(u,f){return f?(i.directives[u]=f,c):i.directives[u]},mount(u,f,p){if(!l){const m=c._ceVNode||ze(r,s);return m.appContext=i,p===!0?p="svg":p===!1&&(p=void 0),t(m,u,p),l=!0,c._container=u,u.__vue_app__=c,lc(m.component)}},onUnmount(u){a.push(u)},unmount(){l&&(Vn(a,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(u,f){return i.provides[u]=f,c},runWithContext(u){const f=Bs;Bs=c;try{return u()}finally{Bs=f}}};return c}}let Bs=null;function Co(t,e){if(cn){let n=cn.provides;const r=cn.parent&&cn.parent.provides;r===n&&(n=cn.provides=Object.create(r)),n[t]=e}}function On(t,e,n=!1){const r=cr();if(r||Bs){let s=Bs?Bs._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&Ye(e)?e.call(r&&r.proxy):e}}function uw(){return!!(cr()||Bs)}const Ry={},$y=()=>Object.create(Ry),Fy=t=>Object.getPrototypeOf(t)===Ry;function dw(t,e,n,r=!1){const s={},i=$y();t.propsDefaults=Object.create(null),Ly(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:hy(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function fw(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,a=tt(s),[l]=t.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let f=0;f<u.length;f++){let p=u[f];if(oc(t.emitsOptions,p))continue;const m=e[p];if(l)if(ft(i,p))m!==i[p]&&(i[p]=m,c=!0);else{const v=Mn(p);s[v]=nd(l,a,v,m,t,!1)}else m!==i[p]&&(i[p]=m,c=!0)}}}else{Ly(t,e,s,i)&&(c=!0);let u;for(const f in a)(!e||!ft(e,f)&&((u=os(f))===f||!ft(e,u)))&&(l?n&&(n[f]!==void 0||n[u]!==void 0)&&(s[f]=nd(l,a,f,void 0,t,!0)):delete s[f]);if(i!==a)for(const f in i)(!e||!ft(e,f))&&(delete i[f],c=!0)}c&&Sr(t.attrs,"set","")}function Ly(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(vo(l))continue;const c=e[l];let u;s&&ft(s,u=Mn(l))?!i||!i.includes(u)?n[u]=c:(a||(a={}))[u]=c:oc(t.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(i){const l=tt(n),c=a||mt;for(let u=0;u<i.length;u++){const f=i[u];n[f]=nd(s,l,f,c[f],t,!ft(c,f))}}return o}function nd(t,e,n,r,s,i){const o=t[n];if(o!=null){const a=ft(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Ye(l)){const{propsDefaults:c}=s;if(n in c)r=c[n];else{const u=na(s);r=c[n]=l.call(null,e),u()}}else r=l;s.ce&&s.ce._setProp(n,r)}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===os(n))&&(r=!0))}return r}const hw=new WeakMap;function By(t,e,n=!1){const r=n?hw:e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},a=[];let l=!1;if(!Ye(t)){const u=f=>{l=!0;const[p,m]=By(f,e,!0);Bt(o,p),m&&a.push(...m)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!i&&!l)return vt(t)&&r.set(t,mi),mi;if(qe(i))for(let u=0;u<i.length;u++){const f=Mn(i[u]);Sh(f)&&(o[f]=mt)}else if(i)for(const u in i){const f=Mn(u);if(Sh(f)){const p=i[u],m=o[f]=qe(p)||Ye(p)?{type:p}:Bt({},p),v=m.type;let _=!1,x=!0;if(qe(v))for(let C=0;C<v.length;++C){const S=v[C],P=Ye(S)&&S.name;if(P==="Boolean"){_=!0;break}else P==="String"&&(x=!1)}else _=Ye(v)&&v.name==="Boolean";m[0]=_,m[1]=x,(_||ft(m,"default"))&&a.push(f)}}const c=[o,a];return vt(t)&&r.set(t,c),c}function Sh(t){return t[0]!=="$"&&!vo(t)}const Kd=t=>t==="_"||t==="_ctx"||t==="$stable",Yd=t=>qe(t)?t.map(ir):[ir(t)],pw=(t,e,n)=>{if(e._n)return e;const r=st((...s)=>Yd(e(...s)),n);return r._c=!1,r},jy=(t,e,n)=>{const r=t._ctx;for(const s in t){if(Kd(s))continue;const i=t[s];if(Ye(i))e[s]=pw(s,i,r);else if(i!=null){const o=Yd(i);e[s]=()=>o}}},Ny=(t,e)=>{const n=Yd(e);t.slots.default=()=>n},zy=(t,e,n)=>{for(const r in e)(n||!Kd(r))&&(t[r]=e[r])},gw=(t,e,n)=>{const r=t.slots=$y();if(t.vnode.shapeFlag&32){const s=e._;s?(zy(r,e,n),n&&Km(r,"_",s,!0)):jy(e,r)}else e&&Ny(t,e)},mw=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=mt;if(r.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:zy(s,e,n):(i=!e.$stable,jy(e,s)),o=e}else e&&(Ny(t,e),o={default:1});if(i)for(const a in s)!Kd(a)&&o[a]==null&&delete s[a]},gn=Ow;function yw(t){return vw(t)}function vw(t,e){const n=Jl();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:f,nextSibling:p,setScopeId:m=or,insertStaticContent:v}=t,_=(O,F,J,le=null,ue=null,ce=null,Ie=void 0,Se=null,be=!!F.dynamicChildren)=>{if(O===F)return;O&&!di(O,F)&&(le=ae(O),ke(O,ue,ce,!0),O=null),F.patchFlag===-2&&(be=!1,F.dynamicChildren=null);const{type:de,ref:Ne,shapeFlag:Ee}=F;switch(de){case ac:x(O,F,J,le);break;case Hn:C(O,F,J,le);break;case dl:O==null&&S(F,J,le,Ie);break;case et:z(O,F,J,le,ue,ce,Ie,Se,be);break;default:Ee&1?D(O,F,J,le,ue,ce,Ie,Se,be):Ee&6?pe(O,F,J,le,ue,ce,Ie,Se,be):(Ee&64||Ee&128)&&de.process(O,F,J,le,ue,ce,Ie,Se,be,Fe)}Ne!=null&&ue?xo(Ne,O&&O.ref,ce,F||O,!F):Ne==null&&O&&O.ref!=null&&xo(O.ref,null,ce,O,!0)},x=(O,F,J,le)=>{if(O==null)r(F.el=a(F.children),J,le);else{const ue=F.el=O.el;F.children!==O.children&&c(ue,F.children)}},C=(O,F,J,le)=>{O==null?r(F.el=l(F.children||""),J,le):F.el=O.el},S=(O,F,J,le)=>{[O.el,O.anchor]=v(O.children,F,J,le,O.el,O.anchor)},P=({el:O,anchor:F},J,le)=>{let ue;for(;O&&O!==F;)ue=p(O),r(O,J,le),O=ue;r(F,J,le)},M=({el:O,anchor:F})=>{let J;for(;O&&O!==F;)J=p(O),s(O),O=J;s(F)},D=(O,F,J,le,ue,ce,Ie,Se,be)=>{F.type==="svg"?Ie="svg":F.type==="math"&&(Ie="mathml"),O==null?A(F,J,le,ue,ce,Ie,Se,be):E(O,F,ue,ce,Ie,Se,be)},A=(O,F,J,le,ue,ce,Ie,Se)=>{let be,de;const{props:Ne,shapeFlag:Ee,transition:je,dirs:Ue}=O;if(be=O.el=o(O.type,ce,Ne&&Ne.is,Ne),Ee&8?u(be,O.children):Ee&16&&B(O.children,be,null,le,ue,cu(O,ce),Ie,Se),Ue&&gs(O,null,le,"created"),T(be,O,O.scopeId,Ie,le),Ne){for(const ot in Ne)ot!=="value"&&!vo(ot)&&i(be,ot,null,Ne[ot],ce,le);"value"in Ne&&i(be,"value",null,Ne.value,ce),(de=Ne.onVnodeBeforeMount)&&Jn(de,le,O)}Ue&&gs(O,null,le,"beforeMount");const Ge=bw(ue,je);Ge&&je.beforeEnter(be),r(be,F,J),((de=Ne&&Ne.onVnodeMounted)||Ge||Ue)&&gn(()=>{de&&Jn(de,le,O),Ge&&je.enter(be),Ue&&gs(O,null,le,"mounted")},ue)},T=(O,F,J,le,ue)=>{if(J&&m(O,J),le)for(let ce=0;ce<le.length;ce++)m(O,le[ce]);if(ue){let ce=ue.subTree;if(F===ce||Vy(ce.type)&&(ce.ssContent===F||ce.ssFallback===F)){const Ie=ue.vnode;T(O,Ie,Ie.scopeId,Ie.slotScopeIds,ue.parent)}}},B=(O,F,J,le,ue,ce,Ie,Se,be=0)=>{for(let de=be;de<O.length;de++){const Ne=O[de]=Se?Kr(O[de]):ir(O[de]);_(null,Ne,F,J,le,ue,ce,Ie,Se)}},E=(O,F,J,le,ue,ce,Ie)=>{const Se=F.el=O.el;let{patchFlag:be,dynamicChildren:de,dirs:Ne}=F;be|=O.patchFlag&16;const Ee=O.props||mt,je=F.props||mt;let Ue;if(J&&ms(J,!1),(Ue=je.onVnodeBeforeUpdate)&&Jn(Ue,J,F,O),Ne&&gs(F,O,J,"beforeUpdate"),J&&ms(J,!0),(Ee.innerHTML&&je.innerHTML==null||Ee.textContent&&je.textContent==null)&&u(Se,""),de?Q(O.dynamicChildren,de,Se,J,le,cu(F,ue),ce):Ie||te(O,F,Se,null,J,le,cu(F,ue),ce,!1),be>0){if(be&16)V(Se,Ee,je,J,ue);else if(be&2&&Ee.class!==je.class&&i(Se,"class",null,je.class,ue),be&4&&i(Se,"style",Ee.style,je.style,ue),be&8){const Ge=F.dynamicProps;for(let ot=0;ot<Ge.length;ot++){const lt=Ge[ot],$t=Ee[lt],jt=je[lt];(jt!==$t||lt==="value")&&i(Se,lt,$t,jt,ue,J)}}be&1&&O.children!==F.children&&u(Se,F.children)}else!Ie&&de==null&&V(Se,Ee,je,J,ue);((Ue=je.onVnodeUpdated)||Ne)&&gn(()=>{Ue&&Jn(Ue,J,F,O),Ne&&gs(F,O,J,"updated")},le)},Q=(O,F,J,le,ue,ce,Ie)=>{for(let Se=0;Se<F.length;Se++){const be=O[Se],de=F[Se],Ne=be.el&&(be.type===et||!di(be,de)||be.shapeFlag&198)?f(be.el):J;_(be,de,Ne,null,le,ue,ce,Ie,!0)}},V=(O,F,J,le,ue)=>{if(F!==J){if(F!==mt)for(const ce in F)!vo(ce)&&!(ce in J)&&i(O,ce,F[ce],null,ue,le);for(const ce in J){if(vo(ce))continue;const Ie=J[ce],Se=F[ce];Ie!==Se&&ce!=="value"&&i(O,ce,Se,Ie,ue,le)}"value"in J&&i(O,"value",F.value,J.value,ue)}},z=(O,F,J,le,ue,ce,Ie,Se,be)=>{const de=F.el=O?O.el:a(""),Ne=F.anchor=O?O.anchor:a("");let{patchFlag:Ee,dynamicChildren:je,slotScopeIds:Ue}=F;Ue&&(Se=Se?Se.concat(Ue):Ue),O==null?(r(de,J,le),r(Ne,J,le),B(F.children||[],J,Ne,ue,ce,Ie,Se,be)):Ee>0&&Ee&64&&je&&O.dynamicChildren?(Q(O.dynamicChildren,je,J,ue,ce,Ie,Se),(F.key!=null||ue&&F===ue.subTree)&&Gd(O,F,!0)):te(O,F,J,Ne,ue,ce,Ie,Se,be)},pe=(O,F,J,le,ue,ce,Ie,Se,be)=>{F.slotScopeIds=Se,O==null?F.shapeFlag&512?ue.ctx.activate(F,J,le,Ie,be):me(F,J,le,ue,ce,Ie,be):Ce(O,F,be)},me=(O,F,J,le,ue,ce,Ie)=>{const Se=O.component=$w(O,le,ue);if(Ay(O)&&(Se.ctx.renderer=Fe),Fw(Se,!1,Ie),Se.asyncDep){if(ue&&ue.registerDep(Se,we,Ie),!O.el){const be=Se.subTree=ze(Hn);C(null,be,F,J),O.placeholder=be.el}}else we(Se,O,F,J,ue,ce,Ie)},Ce=(O,F,J)=>{const le=F.component=O.component;if(Iw(O,F,J))if(le.asyncDep&&!le.asyncResolved){xe(le,F,J);return}else le.next=F,le.update();else F.el=O.el,le.vnode=F},we=(O,F,J,le,ue,ce,Ie)=>{const Se=()=>{if(O.isMounted){let{next:Ee,bu:je,u:Ue,parent:Ge,vnode:ot}=O;{const Nt=qy(O);if(Nt){Ee&&(Ee.el=ot.el,xe(O,Ee,Ie)),Nt.asyncDep.then(()=>{O.isUnmounted||Se()});return}}let lt=Ee,$t;ms(O,!1),Ee?(Ee.el=ot.el,xe(O,Ee,Ie)):Ee=ot,je&&cl(je),($t=Ee.props&&Ee.props.onVnodeBeforeUpdate)&&Jn($t,Ge,Ee,ot),ms(O,!0);const jt=Ah(O),fn=O.subTree;O.subTree=jt,_(fn,jt,f(fn.el),ae(fn),O,ue,ce),Ee.el=jt.el,lt===null&&Ew(O,jt.el),Ue&&gn(Ue,ue),($t=Ee.props&&Ee.props.onVnodeUpdated)&&gn(()=>Jn($t,Ge,Ee,ot),ue)}else{let Ee;const{el:je,props:Ue}=F,{bm:Ge,m:ot,parent:lt,root:$t,type:jt}=O,fn=bi(F);ms(O,!1),Ge&&cl(Ge),!fn&&(Ee=Ue&&Ue.onVnodeBeforeMount)&&Jn(Ee,lt,F),ms(O,!0);{$t.ce&&$t.ce._def.shadowRoot!==!1&&$t.ce._injectChildStyle(jt);const Nt=O.subTree=Ah(O);_(null,Nt,J,le,O,ue,ce),F.el=Nt.el}if(ot&&gn(ot,ue),!fn&&(Ee=Ue&&Ue.onVnodeMounted)){const Nt=F;gn(()=>Jn(Ee,lt,Nt),ue)}(F.shapeFlag&256||lt&&bi(lt.vnode)&&lt.vnode.shapeFlag&256)&&O.a&&gn(O.a,ue),O.isMounted=!0,F=J=le=null}};O.scope.on();const be=O.effect=new Zm(Se);O.scope.off();const de=O.update=be.run.bind(be),Ne=O.job=be.runIfDirty.bind(be);Ne.i=O,Ne.id=O.uid,be.scheduler=()=>Hd(Ne),ms(O,!0),de()},xe=(O,F,J)=>{F.component=O;const le=O.vnode.props;O.vnode=F,O.next=null,fw(O,F.props,le,J),mw(O,F.children,J),Ir(),mh(O),Er()},te=(O,F,J,le,ue,ce,Ie,Se,be=!1)=>{const de=O&&O.children,Ne=O?O.shapeFlag:0,Ee=F.children,{patchFlag:je,shapeFlag:Ue}=F;if(je>0){if(je&128){Y(de,Ee,J,le,ue,ce,Ie,Se,be);return}else if(je&256){ee(de,Ee,J,le,ue,ce,Ie,Se,be);return}}Ue&8?(Ne&16&&it(de,ue,ce),Ee!==de&&u(J,Ee)):Ne&16?Ue&16?Y(de,Ee,J,le,ue,ce,Ie,Se,be):it(de,ue,ce,!0):(Ne&8&&u(J,""),Ue&16&&B(Ee,J,le,ue,ce,Ie,Se,be))},ee=(O,F,J,le,ue,ce,Ie,Se,be)=>{O=O||mi,F=F||mi;const de=O.length,Ne=F.length,Ee=Math.min(de,Ne);let je;for(je=0;je<Ee;je++){const Ue=F[je]=be?Kr(F[je]):ir(F[je]);_(O[je],Ue,J,null,ue,ce,Ie,Se,be)}de>Ne?it(O,ue,ce,!0,!1,Ee):B(F,J,le,ue,ce,Ie,Se,be,Ee)},Y=(O,F,J,le,ue,ce,Ie,Se,be)=>{let de=0;const Ne=F.length;let Ee=O.length-1,je=Ne-1;for(;de<=Ee&&de<=je;){const Ue=O[de],Ge=F[de]=be?Kr(F[de]):ir(F[de]);if(di(Ue,Ge))_(Ue,Ge,J,null,ue,ce,Ie,Se,be);else break;de++}for(;de<=Ee&&de<=je;){const Ue=O[Ee],Ge=F[je]=be?Kr(F[je]):ir(F[je]);if(di(Ue,Ge))_(Ue,Ge,J,null,ue,ce,Ie,Se,be);else break;Ee--,je--}if(de>Ee){if(de<=je){const Ue=je+1,Ge=Ue<Ne?F[Ue].el:le;for(;de<=je;)_(null,F[de]=be?Kr(F[de]):ir(F[de]),J,Ge,ue,ce,Ie,Se,be),de++}}else if(de>je)for(;de<=Ee;)ke(O[de],ue,ce,!0),de++;else{const Ue=de,Ge=de,ot=new Map;for(de=Ge;de<=je;de++){const Et=F[de]=be?Kr(F[de]):ir(F[de]);Et.key!=null&&ot.set(Et.key,de)}let lt,$t=0;const jt=je-Ge+1;let fn=!1,Nt=0;const Yn=new Array(jt);for(de=0;de<jt;de++)Yn[de]=0;for(de=Ue;de<=Ee;de++){const Et=O[de];if($t>=jt){ke(Et,ue,ce,!0);continue}let Re;if(Et.key!=null)Re=ot.get(Et.key);else for(lt=Ge;lt<=je;lt++)if(Yn[lt-Ge]===0&&di(Et,F[lt])){Re=lt;break}Re===void 0?ke(Et,ue,ce,!0):(Yn[Re-Ge]=de+1,Re>=Nt?Nt=Re:fn=!0,_(Et,F[Re],J,null,ue,ce,Ie,Se,be),$t++)}const Xs=fn?_w(Yn):mi;for(lt=Xs.length-1,de=jt-1;de>=0;de--){const Et=Ge+de,Re=F[Et],Dr=F[Et+1],Gn=Et+1<Ne?Dr.el||Dr.placeholder:le;Yn[de]===0?_(null,Re,J,Gn,ue,ce,Ie,Se,be):fn&&(lt<0||de!==Xs[lt]?Le(Re,J,Gn,2):lt--)}}},Le=(O,F,J,le,ue=null)=>{const{el:ce,type:Ie,transition:Se,children:be,shapeFlag:de}=O;if(de&6){Le(O.component.subTree,F,J,le);return}if(de&128){O.suspense.move(F,J,le);return}if(de&64){Ie.move(O,F,J,Fe);return}if(Ie===et){r(ce,F,J);for(let Ee=0;Ee<be.length;Ee++)Le(be[Ee],F,J,le);r(O.anchor,F,J);return}if(Ie===dl){P(O,F,J);return}if(le!==2&&de&1&&Se)if(le===0)Se.beforeEnter(ce),r(ce,F,J),gn(()=>Se.enter(ce),ue);else{const{leave:Ee,delayLeave:je,afterLeave:Ue}=Se,Ge=()=>{O.ctx.isUnmounted?s(ce):r(ce,F,J)},ot=()=>{ce._isLeaving&&ce[Is](!0),Ee(ce,()=>{Ge(),Ue&&Ue()})};je?je(ce,Ge,ot):ot()}else r(ce,F,J)},ke=(O,F,J,le=!1,ue=!1)=>{const{type:ce,props:Ie,ref:Se,children:be,dynamicChildren:de,shapeFlag:Ne,patchFlag:Ee,dirs:je,cacheIndex:Ue}=O;if(Ee===-2&&(ue=!1),Se!=null&&(Ir(),xo(Se,null,J,O,!0),Er()),Ue!=null&&(F.renderCache[Ue]=void 0),Ne&256){F.ctx.deactivate(O);return}const Ge=Ne&1&&je,ot=!bi(O);let lt;if(ot&&(lt=Ie&&Ie.onVnodeBeforeUnmount)&&Jn(lt,F,O),Ne&6)gt(O.component,J,le);else{if(Ne&128){O.suspense.unmount(J,le);return}Ge&&gs(O,null,F,"beforeUnmount"),Ne&64?O.type.remove(O,F,J,Fe,le):de&&!de.hasOnce&&(ce!==et||Ee>0&&Ee&64)?it(de,F,J,!1,!0):(ce===et&&Ee&384||!ue&&Ne&16)&&it(be,F,J),le&&We(O)}(ot&&(lt=Ie&&Ie.onVnodeUnmounted)||Ge)&&gn(()=>{lt&&Jn(lt,F,O),Ge&&gs(O,null,F,"unmounted")},J)},We=O=>{const{type:F,el:J,anchor:le,transition:ue}=O;if(F===et){wt(J,le);return}if(F===dl){M(O);return}const ce=()=>{s(J),ue&&!ue.persisted&&ue.afterLeave&&ue.afterLeave()};if(O.shapeFlag&1&&ue&&!ue.persisted){const{leave:Ie,delayLeave:Se}=ue,be=()=>Ie(J,ce);Se?Se(O.el,ce,be):be()}else ce()},wt=(O,F)=>{let J;for(;O!==F;)J=p(O),s(O),O=J;s(F)},gt=(O,F,J)=>{const{bum:le,scope:ue,job:ce,subTree:Ie,um:Se,m:be,a:de}=O;Ph(be),Ph(de),le&&cl(le),ue.stop(),ce&&(ce.flags|=8,ke(Ie,O,F,J)),Se&&gn(Se,F),gn(()=>{O.isUnmounted=!0},F)},it=(O,F,J,le=!1,ue=!1,ce=0)=>{for(let Ie=ce;Ie<O.length;Ie++)ke(O[Ie],F,J,le,ue)},ae=O=>{if(O.shapeFlag&6)return ae(O.component.subTree);if(O.shapeFlag&128)return O.suspense.next();const F=p(O.anchor||O.el),J=F&&F[xy];return J?p(J):F};let Me=!1;const re=(O,F,J)=>{O==null?F._vnode&&ke(F._vnode,null,null,!0):_(F._vnode||null,O,F,null,null,null,J),F._vnode=O,Me||(Me=!0,mh(),by(),Me=!1)},Fe={p:_,um:ke,m:Le,r:We,mt:me,mc:B,pc:te,pbc:Q,n:ae,o:t};return{render:re,hydrate:void 0,createApp:cw(re)}}function cu({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function ms({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function bw(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Gd(t,e,n=!1){const r=t.children,s=e.children;if(qe(r)&&qe(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=Kr(s[i]),a.el=o.el),!n&&a.patchFlag!==-2&&Gd(o,a)),a.type===ac&&a.patchFlag!==-1&&(a.el=o.el),a.type===Hn&&!a.el&&(a.el=o.el)}}function _w(t){const e=t.slice(),n=[0];let r,s,i,o,a;const l=t.length;for(r=0;r<l;r++){const c=t[r];if(c!==0){if(s=n[n.length-1],t[s]<c){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<c?i=a+1:o=a;c<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function qy(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:qy(e)}function Ph(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const ww=Symbol.for("v-scx"),xw=()=>On(ww);function Pi(t,e){return Xd(t,null,e)}function Kt(t,e,n){return Xd(t,e,n)}function Xd(t,e,n=mt){const{immediate:r,deep:s,flush:i,once:o}=n,a=Bt({},n),l=e&&r||!e&&i!=="post";let c;if(zo){if(i==="sync"){const m=xw();c=m.__watcherHandles||(m.__watcherHandles=[])}else if(!l){const m=()=>{};return m.stop=or,m.resume=or,m.pause=or,m}}const u=cn;a.call=(m,v,_)=>Vn(m,u,v,_);let f=!1;i==="post"?a.scheduler=m=>{gn(m,u&&u.suspense)}:i!=="sync"&&(f=!0,a.scheduler=(m,v)=>{v?m():Hd(m)}),a.augmentJob=m=>{e&&(m.flags|=4),f&&(m.flags|=2,u&&(m.id=u.uid,m.i=u))};const p=T0(t,e,a);return zo&&(c?c.push(p):l&&p()),p}function kw(t,e,n){const r=this.proxy,s=It(t)?t.includes(".")?Uy(r,t):()=>r[t]:t.bind(r,r);let i;Ye(e)?i=e:(i=e.handler,n=e);const o=na(this),a=Xd(s,i.bind(r),n);return o(),a}function Uy(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const Cw=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Mn(e)}Modifiers`]||t[`${os(e)}Modifiers`];function Sw(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||mt;let s=n;const i=e.startsWith("update:"),o=i&&Cw(r,e.slice(7));o&&(o.trim&&(s=n.map(u=>It(u)?u.trim():u)),o.number&&(s=n.map(wl)));let a,l=r[a=ll(e)]||r[a=ll(Mn(e))];!l&&i&&(l=r[a=ll(os(e))]),l&&Vn(l,t,6,s);const c=r[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Vn(c,t,6,s)}}function Wy(t,e,n=!1){const r=e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},a=!1;if(!Ye(t)){const l=c=>{const u=Wy(c,e,!0);u&&(a=!0,Bt(o,u))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!a?(vt(t)&&r.set(t,null),null):(qe(i)?i.forEach(l=>o[l]=null):Bt(o,i),vt(t)&&r.set(t,o),o)}function oc(t,e){return!t||!Yl(e)?!1:(e=e.slice(2).replace(/Once$/,""),ft(t,e[0].toLowerCase()+e.slice(1))||ft(t,os(e))||ft(t,e))}function Ah(t){const{type:e,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:o,attrs:a,emit:l,render:c,renderCache:u,props:f,data:p,setupState:m,ctx:v,inheritAttrs:_}=t,x=Pl(t);let C,S;try{if(n.shapeFlag&4){const M=s||r,D=M;C=ir(c.call(D,M,u,f,m,p,v)),S=a}else{const M=e;C=ir(M.length>1?M(f,{attrs:a,slots:o,emit:l}):M(f,null)),S=e.props?a:Pw(a)}}catch(M){So.length=0,rc(M,t,1),C=ze(Hn)}let P=C;if(S&&_!==!1){const M=Object.keys(S),{shapeFlag:D}=P;M.length&&D&7&&(i&&M.some(Rd)&&(S=Aw(S,i)),P=ss(P,S,!1,!0))}return n.dirs&&(P=ss(P,null,!1,!0),P.dirs=P.dirs?P.dirs.concat(n.dirs):n.dirs),n.transition&&Bo(P,n.transition),C=P,Pl(x),C}const Pw=t=>{let e;for(const n in t)(n==="class"||n==="style"||Yl(n))&&((e||(e={}))[n]=t[n]);return e},Aw=(t,e)=>{const n={};for(const r in t)(!Rd(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function Iw(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:a,patchFlag:l}=e,c=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?Ih(r,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let f=0;f<u.length;f++){const p=u[f];if(o[p]!==r[p]&&!oc(c,p))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?Ih(r,o,c):!0:!!o;return!1}function Ih(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!oc(n,i))return!0}return!1}function Ew({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const Vy=t=>t.__isSuspense;function Ow(t,e){e&&e.pendingBranch?qe(t)?e.effects.push(...t):e.effects.push(t):F0(t)}const et=Symbol.for("v-fgt"),ac=Symbol.for("v-txt"),Hn=Symbol.for("v-cmt"),dl=Symbol.for("v-stc"),So=[];let In=null;function U(t=!1){So.push(In=t?null:[])}function Mw(){So.pop(),In=So[So.length-1]||null}let jo=1;function Eh(t,e=!1){jo+=t,t<0&&In&&e&&(In.hasOnce=!0)}function Hy(t){return t.dynamicChildren=jo>0?In||mi:null,Mw(),jo>0&&In&&In.push(t),t}function Z(t,e,n,r,s,i){return Hy(w(t,e,n,r,s,i,!0))}function en(t,e,n,r,s){return Hy(ze(t,e,n,r,s,!0))}function No(t){return t?t.__v_isVNode===!0:!1}function di(t,e){return t.type===e.type&&t.key===e.key}const Ky=({key:t})=>t??null,fl=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?It(t)||Rt(t)||Ye(t)?{i:Qt,r:t,k:e,f:!!n}:t:null);function w(t,e=null,n=null,r=0,s=null,i=t===et?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Ky(e),ref:e&&fl(e),scopeId:wy,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Qt};return a?(Qd(l,n),i&128&&t.normalize(l)):n&&(l.shapeFlag|=It(n)?8:16),jo>0&&!o&&In&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&In.push(l),l}const ze=Dw;function Dw(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===ew)&&(t=Hn),No(t)){const a=ss(t,e,!0);return n&&Qd(a,n),jo>0&&!i&&In&&(a.shapeFlag&6?In[In.indexOf(t)]=a:In.push(a)),a.patchFlag=-2,a}if(zw(t)&&(t=t.__vccOpts),e){e=Yy(e);let{class:a,style:l}=e;a&&!It(a)&&(e.class=At(a)),vt(l)&&(ea(l)&&!qe(l)&&(l=Bt({},l)),e.style=En(l))}const o=It(t)?1:Vy(t)?128:L0(t)?64:vt(t)?4:Ye(t)?2:0;return w(t,e,n,r,s,o,i,!0)}function Yy(t){return t?ea(t)||Fy(t)?Bt({},t):t:null}function ss(t,e,n=!1,r=!1){const{props:s,ref:i,patchFlag:o,children:a,transition:l}=t,c=e?lr(s||{},e):s,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&Ky(c),ref:e&&e.ref?n&&i?qe(i)?i.concat(fl(e)):[i,fl(e)]:fl(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==et?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&ss(t.ssContent),ssFallback:t.ssFallback&&ss(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&Bo(u,l.clone(u)),u}function yt(t=" ",e=0){return ze(ac,null,t,e)}function Gy(t,e){const n=ze(dl,null,t);return n.staticCount=e,n}function Pe(t="",e=!1){return e?(U(),en(Hn,null,t)):ze(Hn,null,t)}function ir(t){return t==null||typeof t=="boolean"?ze(Hn):qe(t)?ze(et,null,t.slice()):No(t)?Kr(t):ze(ac,null,String(t))}function Kr(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:ss(t)}function Qd(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(qe(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),Qd(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!Fy(e)?e._ctx=Qt:s===3&&Qt&&(Qt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Ye(e)?(e={default:e,_ctx:Qt},n=32):(e=String(e),r&64?(n=16,e=[yt(e)]):n=8);t.children=e,t.shapeFlag|=n}function lr(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=At([e.class,r.class]));else if(s==="style")e.style=En([e.style,r.style]);else if(Yl(s)){const i=e[s],o=r[s];o&&i!==o&&!(qe(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function Jn(t,e,n,r=null){Vn(t,e,7,[n,r])}const Tw=Ty();let Rw=0;function $w(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||Tw,i={uid:Rw++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Qm(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:By(r,s),emitsOptions:Wy(r,s),emit:null,emitted:null,propsDefaults:mt,inheritAttrs:r.inheritAttrs,ctx:mt,data:mt,props:mt,attrs:mt,slots:mt,refs:mt,setupState:mt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=Sw.bind(null,i),t.ce&&t.ce(i),i}let cn=null;const cr=()=>cn||Qt;let Il,rd;{const t=Jl(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};Il=e("__VUE_INSTANCE_SETTERS__",n=>cn=n),rd=e("__VUE_SSR_SETTERS__",n=>zo=n)}const na=t=>{const e=cn;return Il(t),t.scope.on(),()=>{t.scope.off(),Il(e)}},Oh=()=>{cn&&cn.scope.off(),Il(null)};function Xy(t){return t.vnode.shapeFlag&4}let zo=!1;function Fw(t,e=!1,n=!1){e&&rd(e);const{props:r,children:s}=t.vnode,i=Xy(t);dw(t,r,i,e),gw(t,s,n||e);const o=i?Lw(t,e):void 0;return e&&rd(!1),o}function Lw(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,nw);const{setup:r}=n;if(r){Ir();const s=t.setupContext=r.length>1?jw(t):null,i=na(t),o=ta(r,t,0,[t.props,s]),a=Wm(o);if(Er(),i(),(a||t.sp)&&!bi(t)&&Py(t),a){if(o.then(Oh,Oh),e)return o.then(l=>{Mh(t,l)}).catch(l=>{rc(l,t,0)});t.asyncDep=o}else Mh(t,o)}else Qy(t)}function Mh(t,e,n){Ye(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:vt(e)&&(t.setupState=my(e)),Qy(t)}function Qy(t,e,n){const r=t.type;t.render||(t.render=r.render||or);{const s=na(t);Ir();try{rw(t)}finally{Er(),s()}}}const Bw={get(t,e){return an(t,"get",""),t[e]}};function jw(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,Bw),slots:t.slots,emit:t.emit,expose:e}}function lc(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(my(Wd(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in ko)return ko[n](t)},has(e,n){return n in e||n in ko}})):t.proxy}function Nw(t,e=!0){return Ye(t)?t.displayName||t.name:t.name||e&&t.__name}function zw(t){return Ye(t)&&"__vccOpts"in t}const Ve=(t,e)=>M0(t,e,zo);function Ar(t,e,n){const r=arguments.length;return r===2?vt(e)&&!qe(e)?No(e)?ze(t,null,[e]):ze(t,e):ze(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&No(n)&&(n=[n]),ze(t,e,n))}const Jy="3.5.20";/**
* @vue/runtime-dom v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let sd;const Dh=typeof window<"u"&&window.trustedTypes;if(Dh)try{sd=Dh.createPolicy("vue",{createHTML:t=>t})}catch{}const Zy=sd?t=>sd.createHTML(t):t=>t,qw="http://www.w3.org/2000/svg",Uw="http://www.w3.org/1998/Math/MathML",kr=typeof document<"u"?document:null,Th=kr&&kr.createElement("template"),Ww={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?kr.createElementNS(qw,t):e==="mathml"?kr.createElementNS(Uw,t):n?kr.createElement(t,{is:n}):kr.createElement(t);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>kr.createTextNode(t),createComment:t=>kr.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>kr.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{Th.innerHTML=Zy(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=Th.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},jr="transition",Qi="animation",Ai=Symbol("_vtc"),ev={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Vw=Bt({},z0,ev),ys=(t,e=[])=>{qe(t)?t.forEach(n=>n(...e)):t&&t(...e)},Rh=t=>t?qe(t)?t.some(e=>e.length>1):t.length>1:!1;function Hw(t){const e={};for(const z in t)z in ev||(e[z]=t[z]);if(t.css===!1)return e;const{name:n="v",type:r,duration:s,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=i,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:m=`${n}-leave-to`}=t,v=Kw(s),_=v&&v[0],x=v&&v[1],{onBeforeEnter:C,onEnter:S,onEnterCancelled:P,onLeave:M,onLeaveCancelled:D,onBeforeAppear:A=C,onAppear:T=S,onAppearCancelled:B=P}=e,E=(z,pe,me,Ce)=>{z._enterCancelled=Ce,qr(z,pe?u:a),qr(z,pe?c:o),me&&me()},Q=(z,pe)=>{z._isLeaving=!1,qr(z,f),qr(z,m),qr(z,p),pe&&pe()},V=z=>(pe,me)=>{const Ce=z?T:S,we=()=>E(pe,z,me);ys(Ce,[pe,we]),$h(()=>{qr(pe,z?l:i),er(pe,z?u:a),Rh(Ce)||Fh(pe,r,_,we)})};return Bt(e,{onBeforeEnter(z){ys(C,[z]),er(z,i),er(z,o)},onBeforeAppear(z){ys(A,[z]),er(z,l),er(z,c)},onEnter:V(!1),onAppear:V(!0),onLeave(z,pe){z._isLeaving=!0;const me=()=>Q(z,pe);er(z,f),z._enterCancelled?(er(z,p),id()):(id(),er(z,p)),$h(()=>{z._isLeaving&&(qr(z,f),er(z,m),Rh(M)||Fh(z,r,x,me))}),ys(M,[z,me])},onEnterCancelled(z){E(z,!1,void 0,!0),ys(P,[z])},onAppearCancelled(z){E(z,!0,void 0,!0),ys(B,[z])},onLeaveCancelled(z){Q(z),ys(D,[z])}})}function Kw(t){if(t==null)return null;if(vt(t))return[uu(t.enter),uu(t.leave)];{const e=uu(t);return[e,e]}}function uu(t){return Q_(t)}function er(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[Ai]||(t[Ai]=new Set)).add(e)}function qr(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[Ai];n&&(n.delete(e),n.size||(t[Ai]=void 0))}function $h(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let Yw=0;function Fh(t,e,n,r){const s=t._endId=++Yw,i=()=>{s===t._endId&&r()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:a,propCount:l}=tv(t,e);if(!o)return r();const c=o+"end";let u=0;const f=()=>{t.removeEventListener(c,p),i()},p=m=>{m.target===t&&++u>=l&&f()};setTimeout(()=>{u<l&&f()},a+1),t.addEventListener(c,p)}function tv(t,e){const n=window.getComputedStyle(t),r=v=>(n[v]||"").split(", "),s=r(`${jr}Delay`),i=r(`${jr}Duration`),o=Lh(s,i),a=r(`${Qi}Delay`),l=r(`${Qi}Duration`),c=Lh(a,l);let u=null,f=0,p=0;e===jr?o>0&&(u=jr,f=o,p=i.length):e===Qi?c>0&&(u=Qi,f=c,p=l.length):(f=Math.max(o,c),u=f>0?o>c?jr:Qi:null,p=u?u===jr?i.length:l.length:0);const m=u===jr&&/\b(transform|all)(,|$)/.test(r(`${jr}Property`).toString());return{type:u,timeout:f,propCount:p,hasTransform:m}}function Lh(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>Bh(n)+Bh(t[r])))}function Bh(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function id(){return document.body.offsetHeight}function Gw(t,e,n){const r=t[Ai];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const El=Symbol("_vod"),nv=Symbol("_vsh"),Xw={name:"show",beforeMount(t,{value:e},{transition:n}){t[El]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Ji(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),Ji(t,!0),r.enter(t)):r.leave(t,()=>{Ji(t,!1)}):Ji(t,e))},beforeUnmount(t,{value:e}){Ji(t,e)}};function Ji(t,e){t.style.display=e?t[El]:"none",t[nv]=!e}const Qw=Symbol(""),Jw=/(^|;)\s*display\s*:/;function Zw(t,e,n){const r=t.style,s=It(n);let i=!1;if(n&&!s){if(e)if(It(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&hl(r,a,"")}else for(const o in e)n[o]==null&&hl(r,o,"");for(const o in n)o==="display"&&(i=!0),hl(r,o,n[o])}else if(s){if(e!==n){const o=r[Qw];o&&(n+=";"+o),r.cssText=n,i=Jw.test(n)}}else e&&t.removeAttribute("style");El in t&&(t[El]=i?r.display:"",t[nv]&&(r.display="none"))}const jh=/\s*!important$/;function hl(t,e,n){if(qe(n))n.forEach(r=>hl(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=ex(t,e);jh.test(n)?t.setProperty(os(r),n.replace(jh,""),"important"):t[r]=n}}const Nh=["Webkit","Moz","ms"],du={};function ex(t,e){const n=du[e];if(n)return n;let r=Mn(e);if(r!=="filter"&&r in t)return du[e]=r;r=Ql(r);for(let s=0;s<Nh.length;s++){const i=Nh[s]+r;if(i in t)return du[e]=i}return e}const zh="http://www.w3.org/1999/xlink";function qh(t,e,n,r,s,i=s0(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(zh,e.slice(6,e.length)):t.setAttributeNS(zh,e,n):n==null||i&&!Ym(n)?t.removeAttribute(e):t.setAttribute(e,i?"":Wn(n)?String(n):n)}function Uh(t,e,n,r,s){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?Zy(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=Ym(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(s||e)}function Ds(t,e,n,r){t.addEventListener(e,n,r)}function tx(t,e,n,r){t.removeEventListener(e,n,r)}const Wh=Symbol("_vei");function nx(t,e,n,r,s=null){const i=t[Wh]||(t[Wh]={}),o=i[e];if(r&&o)o.value=r;else{const[a,l]=rx(e);if(r){const c=i[e]=ox(r,s);Ds(t,a,c,l)}else o&&(tx(t,a,o,l),i[e]=void 0)}}const Vh=/(?:Once|Passive|Capture)$/;function rx(t){let e;if(Vh.test(t)){e={};let r;for(;r=t.match(Vh);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):os(t.slice(2)),e]}let fu=0;const sx=Promise.resolve(),ix=()=>fu||(sx.then(()=>fu=0),fu=Date.now());function ox(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Vn(ax(r,n.value),e,5,[r])};return n.value=t,n.attached=ix(),n}function ax(t,e){if(qe(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const Hh=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,lx=(t,e,n,r,s,i)=>{const o=s==="svg";e==="class"?Gw(t,r,o):e==="style"?Zw(t,n,r):Yl(e)?Rd(e)||nx(t,e,n,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):cx(t,e,r,o))?(Uh(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&qh(t,e,r,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!It(r))?Uh(t,Mn(e),r,i,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),qh(t,e,r,o))};function cx(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&Hh(e)&&Ye(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Hh(e)&&It(n)?!1:e in t}const rv=new WeakMap,sv=new WeakMap,Ol=Symbol("_moveCb"),Kh=Symbol("_enterCb"),ux=t=>(delete t.props.mode,t),dx=ux({name:"TransitionGroup",props:Bt({},Vw,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=cr(),r=N0();let s,i;return Ey(()=>{if(!s.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!mx(s[0].el,n.vnode.el,o)){s=[];return}s.forEach(hx),s.forEach(px);const a=s.filter(gx);id(),a.forEach(l=>{const c=l.el,u=c.style;er(c,o),u.transform=u.webkitTransform=u.transitionDuration="";const f=c[Ol]=p=>{p&&p.target!==c||(!p||/transform$/.test(p.propertyName))&&(c.removeEventListener("transitionend",f),c[Ol]=null,qr(c,o))};c.addEventListener("transitionend",f)}),s=[]}),()=>{const o=tt(t),a=Hw(o);let l=o.tag||et;if(s=[],i)for(let c=0;c<i.length;c++){const u=i[c];u.el&&u.el instanceof Element&&(s.push(u),Bo(u,Ju(u,a,r,n)),rv.set(u,u.el.getBoundingClientRect()))}i=e.default?Sy(e.default()):[];for(let c=0;c<i.length;c++){const u=i[c];u.key!=null&&Bo(u,Ju(u,a,r,n))}return ze(l,null,i)}}}),fx=dx;function hx(t){const e=t.el;e[Ol]&&e[Ol](),e[Kh]&&e[Kh]()}function px(t){sv.set(t,t.el.getBoundingClientRect())}function gx(t){const e=rv.get(t),n=sv.get(t),r=e.left-n.left,s=e.top-n.top;if(r||s){const i=t.el.style;return i.transform=i.webkitTransform=`translate(${r}px,${s}px)`,i.transitionDuration="0s",t}}function mx(t,e,n){const r=t.cloneNode(),s=t[Ai];s&&s.forEach(a=>{a.split(/\s+/).forEach(l=>l&&r.classList.remove(l))}),n.split(/\s+/).forEach(a=>a&&r.classList.add(a)),r.style.display="none";const i=e.nodeType===1?e:e.parentNode;i.appendChild(r);const{hasTransform:o}=tv(r);return i.removeChild(r),o}const Ml=t=>{const e=t.props["onUpdate:modelValue"]||!1;return qe(e)?n=>cl(e,n):e};function yx(t){t.target.composing=!0}function Yh(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const _i=Symbol("_assign"),Dl={created(t,{modifiers:{lazy:e,trim:n,number:r}},s){t[_i]=Ml(s);const i=r||s.props&&s.props.type==="number";Ds(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),i&&(a=wl(a)),t[_i](a)}),n&&Ds(t,"change",()=>{t.value=t.value.trim()}),e||(Ds(t,"compositionstart",yx),Ds(t,"compositionend",Yh),Ds(t,"change",Yh))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},o){if(t[_i]=Ml(o),t.composing)return;const a=(i||t.type==="number")&&!/^0\d/.test(t.value)?wl(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||s&&t.value.trim()===l)||(t.value=l))}},Gh={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const s=Gl(e);Ds(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?wl(Tl(o)):Tl(o));t[_i](t.multiple?s?new Set(i):i:i[0]),t._assigning=!0,un(()=>{t._assigning=!1})}),t[_i]=Ml(r)},mounted(t,{value:e}){Xh(t,e)},beforeUpdate(t,e,n){t[_i]=Ml(n)},updated(t,{value:e}){t._assigning||Xh(t,e)}};function Xh(t,e){const n=t.multiple,r=qe(e);if(!(n&&!r&&!Gl(e))){for(let s=0,i=t.options.length;s<i;s++){const o=t.options[s],a=Tl(o);if(n)if(r){const l=typeof a;l==="string"||l==="number"?o.selected=e.some(c=>String(c)===String(a)):o.selected=o0(e,a)>-1}else o.selected=e.has(a);else if(Zl(Tl(o),e)){t.selectedIndex!==s&&(t.selectedIndex=s);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Tl(t){return"_value"in t?t._value:t.value}const vx=["ctrl","shift","alt","meta"],bx={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>vx.some(n=>t[`${n}Key`]&&!e.includes(n))},pl=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=((s,...i)=>{for(let o=0;o<e.length;o++){const a=bx[e[o]];if(a&&a(s,e))return}return t(s,...i)}))},_x={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Qh=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=(s=>{if(!("key"in s))return;const i=os(s.key);if(e.some(o=>o===i||_x[o]===i))return t(s)}))},wx=Bt({patchProp:lx},Ww);let Jh;function xx(){return Jh||(Jh=yw(wx))}const kx=((...t)=>{const e=xx().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=Sx(r);if(!s)return;const i=e._component;!Ye(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=n(s,!1,Cx(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e});function Cx(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Sx(t){return It(t)?document.querySelector(t):t}const Px="/mtg-pwa/icons/icon-256.png";/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const fi=typeof document<"u";function iv(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Ax(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&iv(t.default)}const dt=Object.assign;function hu(t,e){const n={};for(const r in e){const s=e[r];n[r]=Kn(s)?s.map(t):t(s)}return n}const Po=()=>{},Kn=Array.isArray,ov=/#/g,Ix=/&/g,Ex=/\//g,Ox=/=/g,Mx=/\?/g,av=/\+/g,Dx=/%5B/g,Tx=/%5D/g,lv=/%5E/g,Rx=/%60/g,cv=/%7B/g,$x=/%7C/g,uv=/%7D/g,Fx=/%20/g;function Jd(t){return encodeURI(""+t).replace($x,"|").replace(Dx,"[").replace(Tx,"]")}function Lx(t){return Jd(t).replace(cv,"{").replace(uv,"}").replace(lv,"^")}function od(t){return Jd(t).replace(av,"%2B").replace(Fx,"+").replace(ov,"%23").replace(Ix,"%26").replace(Rx,"`").replace(cv,"{").replace(uv,"}").replace(lv,"^")}function Bx(t){return od(t).replace(Ox,"%3D")}function jx(t){return Jd(t).replace(ov,"%23").replace(Mx,"%3F")}function Nx(t){return t==null?"":jx(t).replace(Ex,"%2F")}function qo(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const zx=/\/$/,qx=t=>t.replace(zx,"");function pu(t,e,n="/"){let r,s={},i="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=e.slice(0,l),i=e.slice(l+1,a>-1?a:e.length),s=t(i)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=Hx(r??e,n),{fullPath:r+(i&&"?")+i+o,path:r,query:s,hash:qo(o)}}function Ux(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Zh(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function Wx(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&Ii(e.matched[r],n.matched[s])&&dv(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Ii(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function dv(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!Vx(t[n],e[n]))return!1;return!0}function Vx(t,e){return Kn(t)?ep(t,e):Kn(e)?ep(e,t):t===e}function ep(t,e){return Kn(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function Hx(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o).join("/")}const Nr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Uo;(function(t){t.pop="pop",t.push="push"})(Uo||(Uo={}));var Ao;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Ao||(Ao={}));function Kx(t){if(!t)if(fi){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),qx(t)}const Yx=/^[^#]+#/;function Gx(t,e){return t.replace(Yx,"#")+e}function Xx(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const cc=()=>({left:window.scrollX,top:window.scrollY});function Qx(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=Xx(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function tp(t,e){return(history.state?history.state.position-e:-1)+t}const ad=new Map;function Jx(t,e){ad.set(t,e)}function Zx(t){const e=ad.get(t);return ad.delete(t),e}let e1=()=>location.protocol+"//"+location.host;function fv(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let a=s.includes(t.slice(i))?t.slice(i).length:1,l=s.slice(a);return l[0]!=="/"&&(l="/"+l),Zh(l,"")}return Zh(n,t)+r+s}function t1(t,e,n,r){let s=[],i=[],o=null;const a=({state:p})=>{const m=fv(t,location),v=n.value,_=e.value;let x=0;if(p){if(n.value=m,e.value=p,o&&o===v){o=null;return}x=_?p.position-_.position:0}else r(m);s.forEach(C=>{C(n.value,v,{delta:x,type:Uo.pop,direction:x?x>0?Ao.forward:Ao.back:Ao.unknown})})};function l(){o=n.value}function c(p){s.push(p);const m=()=>{const v=s.indexOf(p);v>-1&&s.splice(v,1)};return i.push(m),m}function u(){const{history:p}=window;p.state&&p.replaceState(dt({},p.state,{scroll:cc()}),"")}function f(){for(const p of i)p();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:f}}function np(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?cc():null}}function n1(t){const{history:e,location:n}=window,r={value:fv(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,c,u){const f=t.indexOf("#"),p=f>-1?(n.host&&document.querySelector("base")?t:t.slice(f))+l:e1()+t+l;try{e[u?"replaceState":"pushState"](c,"",p),s.value=c}catch(m){console.error(m),n[u?"replace":"assign"](p)}}function o(l,c){const u=dt({},e.state,np(s.value.back,l,s.value.forward,!0),c,{position:s.value.position});i(l,u,!0),r.value=l}function a(l,c){const u=dt({},s.value,e.state,{forward:l,scroll:cc()});i(u.current,u,!0);const f=dt({},np(r.value,l,null),{position:u.position+1},c);i(l,f,!1),r.value=l}return{location:r,state:s,push:a,replace:o}}function r1(t){t=Kx(t);const e=n1(t),n=t1(t,e.state,e.location,e.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=dt({location:"",base:t,go:r,createHref:Gx.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function s1(t){return typeof t=="string"||t&&typeof t=="object"}function hv(t){return typeof t=="string"||typeof t=="symbol"}const pv=Symbol("");var rp;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(rp||(rp={}));function Ei(t,e){return dt(new Error,{type:t,[pv]:!0},e)}function pr(t,e){return t instanceof Error&&pv in t&&(e==null||!!(t.type&e))}const sp="[^/]+?",i1={sensitive:!1,strict:!1,start:!0,end:!0},o1=/[.+*?^${}()[\]/\\]/g;function a1(t,e){const n=dt({},i1,e),r=[];let s=n.start?"^":"";const i=[];for(const c of t){const u=c.length?[]:[90];n.strict&&!c.length&&(s+="/");for(let f=0;f<c.length;f++){const p=c[f];let m=40+(n.sensitive?.25:0);if(p.type===0)f||(s+="/"),s+=p.value.replace(o1,"\\$&"),m+=40;else if(p.type===1){const{value:v,repeatable:_,optional:x,regexp:C}=p;i.push({name:v,repeatable:_,optional:x});const S=C||sp;if(S!==sp){m+=10;try{new RegExp(`(${S})`)}catch(M){throw new Error(`Invalid custom RegExp for param "${v}" (${S}): `+M.message)}}let P=_?`((?:${S})(?:/(?:${S}))*)`:`(${S})`;f||(P=x&&c.length<2?`(?:/${P})`:"/"+P),x&&(P+="?"),s+=P,m+=20,x&&(m+=-8),_&&(m+=-20),S===".*"&&(m+=-50)}u.push(m)}r.push(u)}if(n.strict&&n.end){const c=r.length-1;r[c][r[c].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(c){const u=c.match(o),f={};if(!u)return null;for(let p=1;p<u.length;p++){const m=u[p]||"",v=i[p-1];f[v.name]=m&&v.repeatable?m.split("/"):m}return f}function l(c){let u="",f=!1;for(const p of t){(!f||!u.endsWith("/"))&&(u+="/"),f=!1;for(const m of p)if(m.type===0)u+=m.value;else if(m.type===1){const{value:v,repeatable:_,optional:x}=m,C=v in c?c[v]:"";if(Kn(C)&&!_)throw new Error(`Provided param "${v}" is an array but it is not repeatable (* or + modifiers)`);const S=Kn(C)?C.join("/"):C;if(!S)if(x)p.length<2&&(u.endsWith("/")?u=u.slice(0,-1):f=!0);else throw new Error(`Missing required param "${v}"`);u+=S}}return u||"/"}return{re:o,score:r,keys:i,parse:a,stringify:l}}function l1(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function gv(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=l1(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(ip(r))return 1;if(ip(s))return-1}return s.length-r.length}function ip(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const c1={type:0,value:""},u1=/[a-zA-Z0-9_]/;function d1(t){if(!t)return[[]];if(t==="/")return[[c1]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(m){throw new Error(`ERR (${n})/"${c}": ${m}`)}let n=0,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let a=0,l,c="",u="";function f(){c&&(n===0?i.push({type:0,value:c}):n===1||n===2||n===3?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function p(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(c&&f(),o()):l===":"?(f(),n=1):p();break;case 4:p(),n=r;break;case 1:l==="("?n=2:u1.test(l)?p():(f(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:n=3:u+=l;break;case 3:f(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${c}"`),f(),o(),s}function f1(t,e,n){const r=a1(d1(t.path),n),s=dt(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function h1(t,e){const n=[],r=new Map;e=cp({strict:!1,end:!0,sensitive:!1},e);function s(f){return r.get(f)}function i(f,p,m){const v=!m,_=ap(f);_.aliasOf=m&&m.record;const x=cp(e,f),C=[_];if("alias"in f){const M=typeof f.alias=="string"?[f.alias]:f.alias;for(const D of M)C.push(ap(dt({},_,{components:m?m.record.components:_.components,path:D,aliasOf:m?m.record:_})))}let S,P;for(const M of C){const{path:D}=M;if(p&&D[0]!=="/"){const A=p.record.path,T=A[A.length-1]==="/"?"":"/";M.path=p.record.path+(D&&T+D)}if(S=f1(M,p,x),m?m.alias.push(S):(P=P||S,P!==S&&P.alias.push(S),v&&f.name&&!lp(S)&&o(f.name)),mv(S)&&l(S),_.children){const A=_.children;for(let T=0;T<A.length;T++)i(A[T],S,m&&m.children[T])}m=m||S}return P?()=>{o(P)}:Po}function o(f){if(hv(f)){const p=r.get(f);p&&(r.delete(f),n.splice(n.indexOf(p),1),p.children.forEach(o),p.alias.forEach(o))}else{const p=n.indexOf(f);p>-1&&(n.splice(p,1),f.record.name&&r.delete(f.record.name),f.children.forEach(o),f.alias.forEach(o))}}function a(){return n}function l(f){const p=m1(f,n);n.splice(p,0,f),f.record.name&&!lp(f)&&r.set(f.record.name,f)}function c(f,p){let m,v={},_,x;if("name"in f&&f.name){if(m=r.get(f.name),!m)throw Ei(1,{location:f});x=m.record.name,v=dt(op(p.params,m.keys.filter(P=>!P.optional).concat(m.parent?m.parent.keys.filter(P=>P.optional):[]).map(P=>P.name)),f.params&&op(f.params,m.keys.map(P=>P.name))),_=m.stringify(v)}else if(f.path!=null)_=f.path,m=n.find(P=>P.re.test(_)),m&&(v=m.parse(_),x=m.record.name);else{if(m=p.name?r.get(p.name):n.find(P=>P.re.test(p.path)),!m)throw Ei(1,{location:f,currentLocation:p});x=m.record.name,v=dt({},p.params,f.params),_=m.stringify(v)}const C=[];let S=m;for(;S;)C.unshift(S.record),S=S.parent;return{name:x,path:_,params:v,matched:C,meta:g1(C)}}t.forEach(f=>i(f));function u(){n.length=0,r.clear()}return{addRoute:i,resolve:c,removeRoute:o,clearRoutes:u,getRoutes:a,getRecordMatcher:s}}function op(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function ap(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:p1(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function p1(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function lp(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function g1(t){return t.reduce((e,n)=>dt(e,n.meta),{})}function cp(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function m1(t,e){let n=0,r=e.length;for(;n!==r;){const i=n+r>>1;gv(t,e[i])<0?r=i:n=i+1}const s=y1(t);return s&&(r=e.lastIndexOf(s,r-1)),r}function y1(t){let e=t;for(;e=e.parent;)if(mv(e)&&gv(t,e)===0)return e}function mv({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function v1(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<r.length;++s){const i=r[s].replace(av," "),o=i.indexOf("="),a=qo(o<0?i:i.slice(0,o)),l=o<0?null:qo(i.slice(o+1));if(a in e){let c=e[a];Kn(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function up(t){let e="";for(let n in t){const r=t[n];if(n=Bx(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(Kn(r)?r.map(i=>i&&od(i)):[r&&od(r)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function b1(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=Kn(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const _1=Symbol(""),dp=Symbol(""),uc=Symbol(""),Zd=Symbol(""),ld=Symbol("");function Zi(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Yr(t,e,n,r,s,i=o=>o()){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((a,l)=>{const c=p=>{p===!1?l(Ei(4,{from:n,to:e})):p instanceof Error?l(p):s1(p)?l(Ei(2,{from:e,to:p})):(o&&r.enterCallbacks[s]===o&&typeof p=="function"&&o.push(p),a())},u=i(()=>t.call(r&&r.instances[s],e,n,c));let f=Promise.resolve(u);t.length<3&&(f=f.then(c)),f.catch(p=>l(p))})}function gu(t,e,n,r,s=i=>i()){const i=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(iv(l)){const u=(l.__vccOpts||l)[e];u&&i.push(Yr(u,n,r,o,a,s))}else{let c=l();i.push(()=>c.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const f=Ax(u)?u.default:u;o.mods[a]=u,o.components[a]=f;const m=(f.__vccOpts||f)[e];return m&&Yr(m,n,r,o,a,s)()}))}}return i}function fp(t){const e=On(uc),n=On(Zd),r=Ve(()=>{const l=$e(t.to);return e.resolve(l)}),s=Ve(()=>{const{matched:l}=r.value,{length:c}=l,u=l[c-1],f=n.matched;if(!u||!f.length)return-1;const p=f.findIndex(Ii.bind(null,u));if(p>-1)return p;const m=hp(l[c-2]);return c>1&&hp(u)===m&&f[f.length-1].path!==m?f.findIndex(Ii.bind(null,l[c-2])):p}),i=Ve(()=>s.value>-1&&S1(n.params,r.value.params)),o=Ve(()=>s.value>-1&&s.value===n.matched.length-1&&dv(n.params,r.value.params));function a(l={}){if(C1(l)){const c=e[$e(t.replace)?"replace":"push"]($e(t.to)).catch(Po);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:r,href:Ve(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}function w1(t){return t.length===1?t[0]:t}const x1=Ze({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:fp,setup(t,{slots:e}){const n=Ws(fp(t)),{options:r}=On(uc),s=Ve(()=>({[pp(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[pp(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&w1(e.default(n));return t.custom?i:Ar("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),k1=x1;function C1(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function S1(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!Kn(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function hp(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const pp=(t,e,n)=>t??e??n,P1=Ze({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=On(ld),s=Ve(()=>t.route||r.value),i=On(dp,0),o=Ve(()=>{let c=$e(i);const{matched:u}=s.value;let f;for(;(f=u[c])&&!f.components;)c++;return c}),a=Ve(()=>s.value.matched[o.value]);Co(dp,Ve(()=>o.value+1)),Co(_1,a),Co(ld,s);const l=he();return Kt(()=>[l.value,a.value,t.name],([c,u,f],[p,m,v])=>{u&&(u.instances[f]=c,m&&m!==u&&c&&c===p&&(u.leaveGuards.size||(u.leaveGuards=m.leaveGuards),u.updateGuards.size||(u.updateGuards=m.updateGuards))),c&&u&&(!m||!Ii(u,m)||!p)&&(u.enterCallbacks[f]||[]).forEach(_=>_(c))},{flush:"post"}),()=>{const c=s.value,u=t.name,f=a.value,p=f&&f.components[u];if(!p)return gp(n.default,{Component:p,route:c});const m=f.props[u],v=m?m===!0?c.params:typeof m=="function"?m(c):m:null,x=Ar(p,dt({},v,e,{onVnodeUnmounted:C=>{C.component.isUnmounted&&(f.instances[u]=null)},ref:l}));return gp(n.default,{Component:x,route:c})||x}}});function gp(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const A1=P1;function I1(t){const e=h1(t.routes,t),n=t.parseQuery||v1,r=t.stringifyQuery||up,s=t.history,i=Zi(),o=Zi(),a=Zi(),l=nc(Nr);let c=Nr;fi&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=hu.bind(null,ae=>""+ae),f=hu.bind(null,Nx),p=hu.bind(null,qo);function m(ae,Me){let re,Fe;return hv(ae)?(re=e.getRecordMatcher(ae),Fe=Me):Fe=ae,e.addRoute(Fe,re)}function v(ae){const Me=e.getRecordMatcher(ae);Me&&e.removeRoute(Me)}function _(){return e.getRoutes().map(ae=>ae.record)}function x(ae){return!!e.getRecordMatcher(ae)}function C(ae,Me){if(Me=dt({},Me||l.value),typeof ae=="string"){const J=pu(n,ae,Me.path),le=e.resolve({path:J.path},Me),ue=s.createHref(J.fullPath);return dt(J,le,{params:p(le.params),hash:qo(J.hash),redirectedFrom:void 0,href:ue})}let re;if(ae.path!=null)re=dt({},ae,{path:pu(n,ae.path,Me.path).path});else{const J=dt({},ae.params);for(const le in J)J[le]==null&&delete J[le];re=dt({},ae,{params:f(J)}),Me.params=f(Me.params)}const Fe=e.resolve(re,Me),nt=ae.hash||"";Fe.params=u(p(Fe.params));const O=Ux(r,dt({},ae,{hash:Lx(nt),path:Fe.path})),F=s.createHref(O);return dt({fullPath:O,hash:nt,query:r===up?b1(ae.query):ae.query||{}},Fe,{redirectedFrom:void 0,href:F})}function S(ae){return typeof ae=="string"?pu(n,ae,l.value.path):dt({},ae)}function P(ae,Me){if(c!==ae)return Ei(8,{from:Me,to:ae})}function M(ae){return T(ae)}function D(ae){return M(dt(S(ae),{replace:!0}))}function A(ae){const Me=ae.matched[ae.matched.length-1];if(Me&&Me.redirect){const{redirect:re}=Me;let Fe=typeof re=="function"?re(ae):re;return typeof Fe=="string"&&(Fe=Fe.includes("?")||Fe.includes("#")?Fe=S(Fe):{path:Fe},Fe.params={}),dt({query:ae.query,hash:ae.hash,params:Fe.path!=null?{}:ae.params},Fe)}}function T(ae,Me){const re=c=C(ae),Fe=l.value,nt=ae.state,O=ae.force,F=ae.replace===!0,J=A(re);if(J)return T(dt(S(J),{state:typeof J=="object"?dt({},nt,J.state):nt,force:O,replace:F}),Me||re);const le=re;le.redirectedFrom=Me;let ue;return!O&&Wx(r,Fe,re)&&(ue=Ei(16,{to:le,from:Fe}),Le(Fe,Fe,!0,!1)),(ue?Promise.resolve(ue):Q(le,Fe)).catch(ce=>pr(ce)?pr(ce,2)?ce:Y(ce):te(ce,le,Fe)).then(ce=>{if(ce){if(pr(ce,2))return T(dt({replace:F},S(ce.to),{state:typeof ce.to=="object"?dt({},nt,ce.to.state):nt,force:O}),Me||le)}else ce=z(le,Fe,!0,F,nt);return V(le,Fe,ce),ce})}function B(ae,Me){const re=P(ae,Me);return re?Promise.reject(re):Promise.resolve()}function E(ae){const Me=wt.values().next().value;return Me&&typeof Me.runWithContext=="function"?Me.runWithContext(ae):ae()}function Q(ae,Me){let re;const[Fe,nt,O]=E1(ae,Me);re=gu(Fe.reverse(),"beforeRouteLeave",ae,Me);for(const J of Fe)J.leaveGuards.forEach(le=>{re.push(Yr(le,ae,Me))});const F=B.bind(null,ae,Me);return re.push(F),it(re).then(()=>{re=[];for(const J of i.list())re.push(Yr(J,ae,Me));return re.push(F),it(re)}).then(()=>{re=gu(nt,"beforeRouteUpdate",ae,Me);for(const J of nt)J.updateGuards.forEach(le=>{re.push(Yr(le,ae,Me))});return re.push(F),it(re)}).then(()=>{re=[];for(const J of O)if(J.beforeEnter)if(Kn(J.beforeEnter))for(const le of J.beforeEnter)re.push(Yr(le,ae,Me));else re.push(Yr(J.beforeEnter,ae,Me));return re.push(F),it(re)}).then(()=>(ae.matched.forEach(J=>J.enterCallbacks={}),re=gu(O,"beforeRouteEnter",ae,Me,E),re.push(F),it(re))).then(()=>{re=[];for(const J of o.list())re.push(Yr(J,ae,Me));return re.push(F),it(re)}).catch(J=>pr(J,8)?J:Promise.reject(J))}function V(ae,Me,re){a.list().forEach(Fe=>E(()=>Fe(ae,Me,re)))}function z(ae,Me,re,Fe,nt){const O=P(ae,Me);if(O)return O;const F=Me===Nr,J=fi?history.state:{};re&&(Fe||F?s.replace(ae.fullPath,dt({scroll:F&&J&&J.scroll},nt)):s.push(ae.fullPath,nt)),l.value=ae,Le(ae,Me,re,F),Y()}let pe;function me(){pe||(pe=s.listen((ae,Me,re)=>{if(!gt.listening)return;const Fe=C(ae),nt=A(Fe);if(nt){T(dt(nt,{replace:!0,force:!0}),Fe).catch(Po);return}c=Fe;const O=l.value;fi&&Jx(tp(O.fullPath,re.delta),cc()),Q(Fe,O).catch(F=>pr(F,12)?F:pr(F,2)?(T(dt(S(F.to),{force:!0}),Fe).then(J=>{pr(J,20)&&!re.delta&&re.type===Uo.pop&&s.go(-1,!1)}).catch(Po),Promise.reject()):(re.delta&&s.go(-re.delta,!1),te(F,Fe,O))).then(F=>{F=F||z(Fe,O,!1),F&&(re.delta&&!pr(F,8)?s.go(-re.delta,!1):re.type===Uo.pop&&pr(F,20)&&s.go(-1,!1)),V(Fe,O,F)}).catch(Po)}))}let Ce=Zi(),we=Zi(),xe;function te(ae,Me,re){Y(ae);const Fe=we.list();return Fe.length?Fe.forEach(nt=>nt(ae,Me,re)):console.error(ae),Promise.reject(ae)}function ee(){return xe&&l.value!==Nr?Promise.resolve():new Promise((ae,Me)=>{Ce.add([ae,Me])})}function Y(ae){return xe||(xe=!ae,me(),Ce.list().forEach(([Me,re])=>ae?re(ae):Me()),Ce.reset()),ae}function Le(ae,Me,re,Fe){const{scrollBehavior:nt}=t;if(!fi||!nt)return Promise.resolve();const O=!re&&Zx(tp(ae.fullPath,0))||(Fe||!re)&&history.state&&history.state.scroll||null;return un().then(()=>nt(ae,Me,O)).then(F=>F&&Qx(F)).catch(F=>te(F,ae,Me))}const ke=ae=>s.go(ae);let We;const wt=new Set,gt={currentRoute:l,listening:!0,addRoute:m,removeRoute:v,clearRoutes:e.clearRoutes,hasRoute:x,getRoutes:_,resolve:C,options:t,push:M,replace:D,go:ke,back:()=>ke(-1),forward:()=>ke(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:we.add,isReady:ee,install(ae){const Me=this;ae.component("RouterLink",k1),ae.component("RouterView",A1),ae.config.globalProperties.$router=Me,Object.defineProperty(ae.config.globalProperties,"$route",{enumerable:!0,get:()=>$e(l)}),fi&&!We&&l.value===Nr&&(We=!0,M(s.location).catch(nt=>{}));const re={};for(const nt in Nr)Object.defineProperty(re,nt,{get:()=>l.value[nt],enumerable:!0});ae.provide(uc,Me),ae.provide(Zd,hy(re)),ae.provide(ld,l);const Fe=ae.unmount;wt.add(ae),ae.unmount=function(){wt.delete(ae),wt.size<1&&(c=Nr,pe&&pe(),pe=null,l.value=Nr,We=!1,xe=!1),Fe()}}};function it(ae){return ae.reduce((Me,re)=>Me.then(()=>E(re)),Promise.resolve())}return gt}function E1(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(c=>Ii(c,a))?r.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(c=>Ii(c,l))||s.push(l))}return[n,r,s]}function yv(){return On(uc)}function ef(t){return On(Zd)}const O1=["aria-label"],M1={key:0,class:"icon-sun"},D1={key:1,class:"icon-moon"},T1=Ze({__name:"ThemeSwitcher",setup(t){const e=he("light"),n=()=>{const r=e.value==="light"?"dark":"light";e.value=r,document.documentElement.setAttribute("data-theme",r),document.documentElement.setAttribute("data-bs-theme",r),localStorage.setItem("theme",r)};return Tn(()=>{const r=localStorage.getItem("theme"),s=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;let i="light";r?i=r:s&&(i="dark"),e.value=i,document.documentElement.setAttribute("data-theme",i),document.documentElement.setAttribute("data-bs-theme",i)}),(r,s)=>(U(),Z("button",{type:"button",class:"btn-icon",onClick:n,"aria-label":`Switch to ${e.value==="light"?"dark":"light"} mode`},[e.value==="dark"?(U(),Z("span",M1,[...s[0]||(s[0]=[Gy('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-e843c561><circle cx="12" cy="12" r="5" data-v-e843c561></circle><line x1="12" y1="1" x2="12" y2="3" data-v-e843c561></line><line x1="12" y1="21" x2="12" y2="23" data-v-e843c561></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64" data-v-e843c561></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78" data-v-e843c561></line><line x1="1" y1="12" x2="3" y2="12" data-v-e843c561></line><line x1="21" y1="12" x2="23" y2="12" data-v-e843c561></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36" data-v-e843c561></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22" data-v-e843c561></line></svg>',1)])])):(U(),Z("span",D1,[...s[1]||(s[1]=[w("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[w("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})],-1)])]))],8,O1))}}),yn=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},R1=yn(T1,[["__scopeId","data-v-e843c561"]]);/*!
 * pinia v3.0.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let vv;const dc=t=>vv=t,bv=Symbol();function cd(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Io;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Io||(Io={}));function $1(){const t=ec(!0),e=t.run(()=>he({}));let n=[],r=[];const s=Wd({install(i){dc(s),s._a=i,i.provide(bv,s),i.config.globalProperties.$pinia=s,r.forEach(o=>n.push(o)),r=[]},use(i){return this._a?n.push(i):r.push(i),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return s}const _v=()=>{};function mp(t,e,n,r=_v){t.push(e);const s=()=>{const i=t.indexOf(e);i>-1&&(t.splice(i,1),r())};return!n&&Ld()&&Jm(s),s}function oi(t,...e){t.slice().forEach(n=>{n(...e)})}const F1=t=>t(),yp=Symbol(),mu=Symbol();function ud(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,r)=>t.set(r,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],s=t[n];cd(s)&&cd(r)&&t.hasOwnProperty(n)&&!Rt(r)&&!Jr(r)?t[n]=ud(s,r):t[n]=r}return t}const L1=Symbol();function B1(t){return!cd(t)||!Object.prototype.hasOwnProperty.call(t,L1)}const{assign:Ur}=Object;function j1(t){return!!(Rt(t)&&t.effect)}function N1(t,e,n,r){const{state:s,actions:i,getters:o}=e,a=n.state.value[t];let l;function c(){a||(n.state.value[t]=s?s():{});const u=Vd(n.state.value[t]);return Ur(u,i,Object.keys(o||{}).reduce((f,p)=>(f[p]=Wd(Ve(()=>{dc(n);const m=n._s.get(t);return o[p].call(m,m)})),f),{}))}return l=wv(t,c,e,n,r,!0),l}function wv(t,e,n={},r,s,i){let o;const a=Ur({actions:{}},n),l={deep:!0};let c,u,f=[],p=[],m;const v=r.state.value[t];!i&&!v&&(r.state.value[t]={}),he({});let _;function x(B){let E;c=u=!1,typeof B=="function"?(B(r.state.value[t]),E={type:Io.patchFunction,storeId:t,events:m}):(ud(r.state.value[t],B),E={type:Io.patchObject,payload:B,storeId:t,events:m});const Q=_=Symbol();un().then(()=>{_===Q&&(c=!0)}),u=!0,oi(f,E,r.state.value[t])}const C=i?function(){const{state:E}=n,Q=E?E():{};this.$patch(V=>{Ur(V,Q)})}:_v;function S(){o.stop(),f=[],p=[],r._s.delete(t)}const P=(B,E="")=>{if(yp in B)return B[mu]=E,B;const Q=function(){dc(r);const V=Array.from(arguments),z=[],pe=[];function me(xe){z.push(xe)}function Ce(xe){pe.push(xe)}oi(p,{args:V,name:Q[mu],store:D,after:me,onError:Ce});let we;try{we=B.apply(this&&this.$id===t?this:D,V)}catch(xe){throw oi(pe,xe),xe}return we instanceof Promise?we.then(xe=>(oi(z,xe),xe)).catch(xe=>(oi(pe,xe),Promise.reject(xe))):(oi(z,we),we)};return Q[yp]=!0,Q[mu]=E,Q},M={_p:r,$id:t,$onAction:mp.bind(null,p),$patch:x,$reset:C,$subscribe(B,E={}){const Q=mp(f,B,E.detached,()=>V()),V=o.run(()=>Kt(()=>r.state.value[t],z=>{(E.flush==="sync"?u:c)&&B({storeId:t,type:Io.direct,events:m},z)},Ur({},l,E)));return Q},$dispose:S},D=Ws(M);r._s.set(t,D);const T=(r._a&&r._a.runWithContext||F1)(()=>r._e.run(()=>(o=ec()).run(()=>e({action:P}))));for(const B in T){const E=T[B];if(Rt(E)&&!j1(E)||Jr(E))i||(v&&B1(E)&&(Rt(E)?E.value=v[B]:ud(E,v[B])),r.state.value[t][B]=E);else if(typeof E=="function"){const Q=P(E,B);T[B]=Q,a.actions[B]=E}}return Ur(D,T),Ur(tt(D),T),Object.defineProperty(D,"$state",{get:()=>r.state.value[t],set:B=>{x(E=>{Ur(E,B)})}}),r._p.forEach(B=>{Ur(D,o.run(()=>B({store:D,app:r._a,pinia:r,options:a})))}),v&&i&&n.hydrate&&n.hydrate(D.$state,v),c=!0,u=!0,D}/*! #__NO_SIDE_EFFECTS__ */function fc(t,e,n){let r;const s=typeof e=="function";r=s?n:e;function i(o,a){const l=uw();return o=o||(l?On(bv,null):null),o&&dc(o),o=vv,o._s.has(t)||(s?wv(t,e,r,o):N1(t,r,o)),o._s.get(t)}return i.$id=t,i}const wi=fc("importStatus",()=>{const t=he([]);return{imports:t,addImport:l=>{const c={...l,createdAt:new Date};return t.value.push(c),c.id},updateImport:(l,c)=>{const u=t.value.findIndex(f=>f.id===l);u!==-1&&(t.value[u]={...t.value[u],...c})},completeImport:(l,c)=>{const u=t.value.findIndex(f=>f.id===l);u!==-1&&(t.value[u]={...t.value[u],status:c?"failed":"completed",errorMessage:c,completedAt:new Date,progress:100})},removeImport:l=>{t.value=t.value.filter(c=>c.id!==l)},clearCompletedImports:()=>{t.value=t.value.filter(l=>l.status==="pending"||l.status==="processing")},getActiveImports:()=>t.value.filter(l=>l.status==="pending"||l.status==="processing"),getCompletedImports:()=>t.value.filter(l=>l.status==="completed"||l.status==="failed")}}),z1={key:0,class:"import-status-indicator",style:{width:"200px"}},q1={class:"d-flex justify-content-between align-items-baseline"},U1=["title"],W1={class:"small text-muted flex-shrink-0 ms-2"},V1={class:"progress mt-1"},H1=["aria-valuenow"],K1={class:"import-alerts position-fixed top-0 end-0 p-3",style:{"z-index":"1050"}},Y1={class:"d-flex justify-content-between"},G1={key:0,class:"small"},X1=["onClick"],Q1=Ze({__name:"ImportStatusIndicator",setup(t){const e=wi(),n=Ve(()=>e.getActiveImports()),r=Ve(()=>e.getCompletedImports()),s=Ve(()=>n.value.length>0?n.value[0]:null),i=a=>{e.removeImport(a)};let o=null;return Tn(()=>{o=window.setInterval(()=>{const a=new Date;e.imports.forEach(l=>{if((l.status==="completed"||l.status==="failed")&&l.completedAt){const c=new Date(l.completedAt);a.getTime()-c.getTime()>5e3&&e.removeImport(l.id)}})},1e3)}),Fi(()=>{o&&clearInterval(o)}),(a,l)=>(U(),Z(et,null,[s.value?(U(),Z("div",z1,[w("div",q1,[w("span",{class:"fw-medium small text-truncate",title:s.value.name},oe(s.value.name),9,U1),w("span",W1,oe(s.value.processedItems)+" / "+oe(s.value.totalItems),1)]),w("div",V1,[w("div",{class:"progress-bar",role:"progressbar",style:En({width:s.value.progress+"%"}),"aria-valuenow":s.value.progress,"aria-valuemin":"0","aria-valuemax":"100"},null,12,H1)])])):Pe("",!0),w("div",K1,[ze(fx,{name:"alert",tag:"div"},{default:st(()=>[(U(!0),Z(et,null,Ft(r.value,c=>(U(),Z("div",{key:c.id,class:At(["alert",c.status==="completed"?"alert-success":"alert-danger"]),role:"alert"},[w("div",Y1,[w("div",null,[w("strong",null,oe(c.name),1),yt(" "+oe(c.status==="completed"?"import completed successfully!":"import failed.")+" ",1),c.errorMessage?(U(),Z("div",G1,oe(c.errorMessage),1)):Pe("",!0)]),w("button",{type:"button",class:"btn-close",onClick:u=>i(c.id)},null,8,X1)])],2))),128))]),_:1})])],64))}}),J1=yn(Q1,[["__scopeId","data-v-0987b82f"]]),Z1={class:"navbar navbar-expand-md navbar-light glass fixed-top"},ek={class:"container-fluid"},tk=["aria-expanded"],nk={class:"nav-item"},rk={class:"nav-item"},sk={class:"nav-item"},ik={class:"nav-item"},ok={class:"d-flex align-items-center"},ak=Ze({__name:"Navigation",setup(t){const e=ef(),n=Ve(()=>e.name==="decks"||e.name==="deck-detail"||e.name==="deck-import"),r=he(!1),s=()=>{r.value=!r.value},i=he(null),o=he(null);let a=null;function l(m){const v=i.value,_=o.value;if(!v||!_||!m)return;const x=v.getBoundingClientRect(),C=m.getBoundingClientRect(),S=12,P=Math.max(32,Math.round(C.height*.72)),M=Math.max(C.width+S*2,80),D=C.left-x.left+v.scrollLeft-S,A=C.top-x.top+v.scrollTop+(C.height-P)/2;_.style.setProperty("--_x",`${D}px`),_.style.setProperty("--_y",`${A}px`),_.style.setProperty("--_w",`${M}px`),_.style.setProperty("--_h",`${P}px`),_.style.opacity="1";const T=getComputedStyle(m).color||getComputedStyle(document.documentElement).getPropertyValue("--bs-primary")||"#0d6efd";_.style.setProperty("--nav-accent",T.trim())}function c(){return i.value?.querySelector(".nav-link.active")}function u(){const m=c();m&&l(m)}function f(m){const v=m.currentTarget;v&&l(v)}function p(){i.value&&(a=new ResizeObserver(()=>u()),a.observe(i.value),window.addEventListener("resize",u,{passive:!0}))}return Tn(async()=>{await un();const m=c()||i.value?.querySelector(".nav-link");m&&l(m),p()}),ic(()=>{a&&i.value&&a.unobserve(i.value),window.removeEventListener("resize",u)}),Kt(()=>e.fullPath,()=>un().then(u)),Kt(r,()=>un().then(u)),(m,v)=>{const _=Si("router-link");return U(),Z("nav",Z1,[w("div",ek,[ze(_,{to:"/",class:"navbar-brand"},{default:st(()=>[...v[0]||(v[0]=[w("img",{style:{"max-width":"48px"},src:Px,alt:"logo"},null,-1),yt(" MTG Collection Tracker ",-1)])]),_:1}),w("button",{class:"navbar-toggler",type:"button",onClick:s,"aria-controls":"navbarNav","aria-expanded":r.value,"aria-label":"Toggle navigation"},[...v[1]||(v[1]=[w("span",{class:"navbar-toggler-icon"},null,-1)])],8,tk),w("div",{id:"navbarNav",class:At(["collapse navbar-collapse",{show:r.value}])},[w("ul",{class:"navbar-nav me-auto",ref_key:"navList",ref:i,onMouseleave:u},[w("div",{class:"nav-bubble",ref_key:"bubble",ref:o,"aria-hidden":"true"},null,512),w("li",nk,[ze(_,{to:"/",class:At(["nav-link",{active:$e(e).name==="home"}]),onMouseenter:f,onFocusin:f},{default:st(()=>[...v[2]||(v[2]=[yt("Dashboard",-1)])]),_:1},8,["class"])]),w("li",rk,[ze(_,{to:"/decks",class:At(["nav-link",{active:n.value}]),onMouseenter:f,onFocusin:f},{default:st(()=>[...v[3]||(v[3]=[yt("Decks",-1)])]),_:1},8,["class"])]),w("li",sk,[ze(_,{to:"/cards",class:At(["nav-link",{active:$e(e).name==="cards"}]),onMouseenter:f,onFocusin:f},{default:st(()=>[...v[4]||(v[4]=[yt("Cards",-1)])]),_:1},8,["class"])]),w("li",ik,[ze(_,{to:"/import",class:At(["nav-link",{active:$e(e).path.startsWith("/import")}]),onMouseenter:f,onFocusin:f},{default:st(()=>[...v[5]||(v[5]=[yt("Data Import",-1)])]),_:1},8,["class"])])],544),w("div",ok,[ze(J1),ze(R1)])],2)])])}}}),lk={class:"noise-overlay","aria-hidden":"true"},ck=Ze({__name:"NoiseOverlay",setup(t){return(e,n)=>(U(),Z("div",lk))}}),uk=yn(ck,[["__scopeId","data-v-63a7b15c"]]),dk={class:"container-lg",style:{"padding-top":"calc(var(--app-navbar-h) + 1.5rem)","padding-bottom":"1.5rem"}},fk=Ze({__name:"App",setup(t){return(e,n)=>{const r=Si("router-view");return U(),Z(et,null,[ze(uk),ze(ak),w("main",dk,[ze(r)])],64)}}}),hk="modulepreload",pk=function(t){return"/mtg-pwa/"+t},vp={},xv=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let l=function(c){return Promise.all(c.map(u=>Promise.resolve(u).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");s=l(n.map(c=>{if(c=pk(c),c in vp)return;vp[c]=!0;const u=c.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":hk,u||(p.as="script"),p.crossOrigin="",p.href=c,a&&p.setAttribute("nonce",a),document.head.appendChild(p),u)return new Promise((m,v)=>{p.addEventListener("load",m),p.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};var gk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function kv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function mk(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){var s=!1;try{s=this instanceof r}catch{}return s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var gl={exports:{}},yk=gl.exports,bp;function vk(){return bp||(bp=1,(function(t,e){(function(n,r){t.exports=r()})(yk,function(){var n=function(d,h){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,y){g.__proto__=y}||function(g,y){for(var b in y)Object.prototype.hasOwnProperty.call(y,b)&&(g[b]=y[b])})(d,h)},r=function(){return(r=Object.assign||function(d){for(var h,g=1,y=arguments.length;g<y;g++)for(var b in h=arguments[g])Object.prototype.hasOwnProperty.call(h,b)&&(d[b]=h[b]);return d}).apply(this,arguments)};function s(d,h,g){for(var y,b=0,k=h.length;b<k;b++)!y&&b in h||((y=y||Array.prototype.slice.call(h,0,b))[b]=h[b]);return d.concat(y||Array.prototype.slice.call(h))}var i=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:gk,o=Object.keys,a=Array.isArray;function l(d,h){return typeof h!="object"||o(h).forEach(function(g){d[g]=h[g]}),d}typeof Promise>"u"||i.Promise||(i.Promise=Promise);var c=Object.getPrototypeOf,u={}.hasOwnProperty;function f(d,h){return u.call(d,h)}function p(d,h){typeof h=="function"&&(h=h(c(d))),(typeof Reflect>"u"?o:Reflect.ownKeys)(h).forEach(function(g){v(d,g,h[g])})}var m=Object.defineProperty;function v(d,h,g,y){m(d,h,l(g&&f(g,"get")&&typeof g.get=="function"?{get:g.get,set:g.set,configurable:!0}:{value:g,configurable:!0,writable:!0},y))}function _(d){return{from:function(h){return d.prototype=Object.create(h.prototype),v(d.prototype,"constructor",d),{extend:p.bind(null,d.prototype)}}}}var x=Object.getOwnPropertyDescriptor,C=[].slice;function S(d,h,g){return C.call(d,h,g)}function P(d,h){return h(d)}function M(d){if(!d)throw new Error("Assertion Failed")}function D(d){i.setImmediate?setImmediate(d):setTimeout(d,0)}function A(d,h){if(typeof h=="string"&&f(d,h))return d[h];if(!h)return d;if(typeof h!="string"){for(var g=[],y=0,b=h.length;y<b;++y){var k=A(d,h[y]);g.push(k)}return g}var I=h.indexOf(".");if(I!==-1){var R=d[h.substr(0,I)];return R==null?void 0:A(R,h.substr(I+1))}}function T(d,h,g){if(d&&h!==void 0&&!("isFrozen"in Object&&Object.isFrozen(d)))if(typeof h!="string"&&"length"in h){M(typeof g!="string"&&"length"in g);for(var y=0,b=h.length;y<b;++y)T(d,h[y],g[y])}else{var k,I,R=h.indexOf(".");R!==-1?(k=h.substr(0,R),(I=h.substr(R+1))===""?g===void 0?a(d)&&!isNaN(parseInt(k))?d.splice(k,1):delete d[k]:d[k]=g:T(R=!(R=d[k])||!f(d,k)?d[k]={}:R,I,g)):g===void 0?a(d)&&!isNaN(parseInt(h))?d.splice(h,1):delete d[h]:d[h]=g}}function B(d){var h,g={};for(h in d)f(d,h)&&(g[h]=d[h]);return g}var E=[].concat;function Q(d){return E.apply([],d)}var Ge="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Q([8,16,32,64].map(function(d){return["Int","Uint","Float"].map(function(h){return h+d+"Array"})}))).filter(function(d){return i[d]}),V=new Set(Ge.map(function(d){return i[d]})),z=null;function pe(d){return z=new WeakMap,d=(function h(g){if(!g||typeof g!="object")return g;var y=z.get(g);if(y)return y;if(a(g)){y=[],z.set(g,y);for(var b=0,k=g.length;b<k;++b)y.push(h(g[b]))}else if(V.has(g.constructor))y=g;else{var I,R=c(g);for(I in y=R===Object.prototype?{}:Object.create(R),z.set(g,y),g)f(g,I)&&(y[I]=h(g[I]))}return y})(d),z=null,d}var me={}.toString;function Ce(d){return me.call(d).slice(8,-1)}var we=typeof Symbol<"u"?Symbol.iterator:"@@iterator",xe=typeof we=="symbol"?function(d){var h;return d!=null&&(h=d[we])&&h.apply(d)}:function(){return null};function te(d,h){return h=d.indexOf(h),0<=h&&d.splice(h,1),0<=h}var ee={};function Y(d){var h,g,y,b;if(arguments.length===1){if(a(d))return d.slice();if(this===ee&&typeof d=="string")return[d];if(b=xe(d)){for(g=[];!(y=b.next()).done;)g.push(y.value);return g}if(d==null)return[d];if(typeof(h=d.length)!="number")return[d];for(g=new Array(h);h--;)g[h]=d[h];return g}for(h=arguments.length,g=new Array(h);h--;)g[h]=arguments[h];return g}var Le=typeof Symbol<"u"?function(d){return d[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Ue=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Rn=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Ue),ke={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function We(d,h){this.name=d,this.message=h}function wt(d,h){return d+". Errors: "+Object.keys(h).map(function(g){return h[g].toString()}).filter(function(g,y,b){return b.indexOf(g)===y}).join(`
`)}function gt(d,h,g,y){this.failures=h,this.failedKeys=y,this.successCount=g,this.message=wt(d,h)}function it(d,h){this.name="BulkError",this.failures=Object.keys(h).map(function(g){return h[g]}),this.failuresByPos=h,this.message=wt(d,this.failures)}_(We).from(Error).extend({toString:function(){return this.name+": "+this.message}}),_(gt).from(We),_(it).from(We);var ae=Rn.reduce(function(d,h){return d[h]=h+"Error",d},{}),Me=We,re=Rn.reduce(function(d,h){var g=h+"Error";function y(b,k){this.name=g,b?typeof b=="string"?(this.message="".concat(b).concat(k?`
 `+k:""),this.inner=k||null):typeof b=="object"&&(this.message="".concat(b.name," ").concat(b.message),this.inner=b):(this.message=ke[h]||g,this.inner=null)}return _(y).from(Me),d[h]=y,d},{});re.Syntax=SyntaxError,re.Type=TypeError,re.Range=RangeError;var Fe=Ue.reduce(function(d,h){return d[h+"Error"]=re[h],d},{}),nt=Rn.reduce(function(d,h){return["Syntax","Type","Range"].indexOf(h)===-1&&(d[h+"Error"]=re[h]),d},{});function O(){}function F(d){return d}function J(d,h){return d==null||d===F?h:function(g){return h(d(g))}}function le(d,h){return function(){d.apply(this,arguments),h.apply(this,arguments)}}function ue(d,h){return d===O?h:function(){var g=d.apply(this,arguments);g!==void 0&&(arguments[0]=g);var y=this.onsuccess,b=this.onerror;this.onsuccess=null,this.onerror=null;var k=h.apply(this,arguments);return y&&(this.onsuccess=this.onsuccess?le(y,this.onsuccess):y),b&&(this.onerror=this.onerror?le(b,this.onerror):b),k!==void 0?k:g}}function ce(d,h){return d===O?h:function(){d.apply(this,arguments);var g=this.onsuccess,y=this.onerror;this.onsuccess=this.onerror=null,h.apply(this,arguments),g&&(this.onsuccess=this.onsuccess?le(g,this.onsuccess):g),y&&(this.onerror=this.onerror?le(y,this.onerror):y)}}function Ie(d,h){return d===O?h:function(g){var y=d.apply(this,arguments);l(g,y);var b=this.onsuccess,k=this.onerror;return this.onsuccess=null,this.onerror=null,g=h.apply(this,arguments),b&&(this.onsuccess=this.onsuccess?le(b,this.onsuccess):b),k&&(this.onerror=this.onerror?le(k,this.onerror):k),y===void 0?g===void 0?void 0:g:l(y,g)}}function Se(d,h){return d===O?h:function(){return h.apply(this,arguments)!==!1&&d.apply(this,arguments)}}function be(d,h){return d===O?h:function(){var g=d.apply(this,arguments);if(g&&typeof g.then=="function"){for(var y=this,b=arguments.length,k=new Array(b);b--;)k[b]=arguments[b];return g.then(function(){return h.apply(y,k)})}return h.apply(this,arguments)}}nt.ModifyError=gt,nt.DexieError=We,nt.BulkError=it;var de=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Ne(d){de=d}var Ee={},je=100,Ge=typeof Promise>"u"?[]:(function(){var d=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[d,c(d),d];var h=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[h,c(h),d]})(),Ue=Ge[0],Rn=Ge[1],Ge=Ge[2],Rn=Rn&&Rn.then,ot=Ue&&Ue.constructor,lt=!!Ge,$t=function(d,h){Dr.push([d,h]),fn&&(queueMicrotask(k_),fn=!1)},jt=!0,fn=!0,Nt=[],Yn=[],Xs=F,Et={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:O,pgp:!1,env:{},finalize:O},Re=Et,Dr=[],Gn=0,ha=[];function De(d){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var h=this._PSD=Re;if(typeof d!="function"){if(d!==Ee)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Ic(this,this._value))}this._state=null,this._value=null,++h.ref,(function g(y,b){try{b(function(k){if(y._state===null){if(k===y)throw new TypeError("A promise cannot be resolved with itself.");var I=y._lib&&Qs();k&&typeof k.then=="function"?g(y,function(R,L){k instanceof De?k._then(R,L):k.then(R,L)}):(y._state=!0,y._value=k,$f(y)),I&&Js()}},Ic.bind(null,y))}catch(k){Ic(y,k)}})(this,d)}var Ac={get:function(){var d=Re,h=ya;function g(y,b){var k=this,I=!d.global&&(d!==Re||h!==ya),R=I&&!Rr(),L=new De(function(N,W){Ec(k,new Rf(Lf(y,d,I,R),Lf(b,d,I,R),N,W,d))});return this._consoleTask&&(L._consoleTask=this._consoleTask),L}return g.prototype=Ee,g},set:function(d){v(this,"then",d&&d.prototype===Ee?Ac:{get:function(){return d},set:Ac.set})}};function Rf(d,h,g,y,b){this.onFulfilled=typeof d=="function"?d:null,this.onRejected=typeof h=="function"?h:null,this.resolve=g,this.reject=y,this.psd=b}function Ic(d,h){var g,y;Yn.push(h),d._state===null&&(g=d._lib&&Qs(),h=Xs(h),d._state=!1,d._value=h,y=d,Nt.some(function(b){return b._value===y._value})||Nt.push(y),$f(d),g&&Js())}function $f(d){var h=d._listeners;d._listeners=[];for(var g=0,y=h.length;g<y;++g)Ec(d,h[g]);var b=d._PSD;--b.ref||b.finalize(),Gn===0&&(++Gn,$t(function(){--Gn==0&&Oc()},[]))}function Ec(d,h){if(d._state!==null){var g=d._state?h.onFulfilled:h.onRejected;if(g===null)return(d._state?h.resolve:h.reject)(d._value);++h.psd.ref,++Gn,$t(x_,[g,d,h])}else d._listeners.push(h)}function x_(d,h,g){try{var y,b=h._value;!h._state&&Yn.length&&(Yn=[]),y=de&&h._consoleTask?h._consoleTask.run(function(){return d(b)}):d(b),h._state||Yn.indexOf(b)!==-1||(function(k){for(var I=Nt.length;I;)if(Nt[--I]._value===k._value)return Nt.splice(I,1)})(h),g.resolve(y)}catch(k){g.reject(k)}finally{--Gn==0&&Oc(),--g.psd.ref||g.psd.finalize()}}function k_(){cs(Et,function(){Qs()&&Js()})}function Qs(){var d=jt;return fn=jt=!1,d}function Js(){var d,h,g;do for(;0<Dr.length;)for(d=Dr,Dr=[],g=d.length,h=0;h<g;++h){var y=d[h];y[0].apply(null,y[1])}while(0<Dr.length);fn=jt=!0}function Oc(){var d=Nt;Nt=[],d.forEach(function(y){y._PSD.onunhandled.call(null,y._value,y)});for(var h=ha.slice(0),g=h.length;g;)h[--g]()}function pa(d){return new De(Ee,!1,d)}function Pt(d,h){var g=Re;return function(){var y=Qs(),b=Re;try{return $r(g,!0),d.apply(this,arguments)}catch(k){h&&h(k)}finally{$r(b,!1),y&&Js()}}}p(De.prototype,{then:Ac,_then:function(d,h){Ec(this,new Rf(null,null,d,h,Re))},catch:function(d){if(arguments.length===1)return this.then(null,d);var h=d,g=arguments[1];return typeof h=="function"?this.then(null,function(y){return(y instanceof h?g:pa)(y)}):this.then(null,function(y){return(y&&y.name===h?g:pa)(y)})},finally:function(d){return this.then(function(h){return De.resolve(d()).then(function(){return h})},function(h){return De.resolve(d()).then(function(){return pa(h)})})},timeout:function(d,h){var g=this;return d<1/0?new De(function(y,b){var k=setTimeout(function(){return b(new re.Timeout(h))},d);g.then(y,b).finally(clearTimeout.bind(null,k))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&v(De.prototype,Symbol.toStringTag,"Dexie.Promise"),Et.env=Ff(),p(De,{all:function(){var d=Y.apply(null,arguments).map(va);return new De(function(h,g){d.length===0&&h([]);var y=d.length;d.forEach(function(b,k){return De.resolve(b).then(function(I){d[k]=I,--y||h(d)},g)})})},resolve:function(d){return d instanceof De?d:d&&typeof d.then=="function"?new De(function(h,g){d.then(h,g)}):new De(Ee,!0,d)},reject:pa,race:function(){var d=Y.apply(null,arguments).map(va);return new De(function(h,g){d.map(function(y){return De.resolve(y).then(h,g)})})},PSD:{get:function(){return Re},set:function(d){return Re=d}},totalEchoes:{get:function(){return ya}},newPSD:Tr,usePSD:cs,scheduler:{get:function(){return $t},set:function(d){$t=d}},rejectionMapper:{get:function(){return Xs},set:function(d){Xs=d}},follow:function(d,h){return new De(function(g,y){return Tr(function(b,k){var I=Re;I.unhandleds=[],I.onunhandled=k,I.finalize=le(function(){var R,L=this;R=function(){L.unhandleds.length===0?b():k(L.unhandleds[0])},ha.push(function N(){R(),ha.splice(ha.indexOf(N),1)}),++Gn,$t(function(){--Gn==0&&Oc()},[])},I.finalize),d()},h,g,y)})}}),ot&&(ot.allSettled&&v(De,"allSettled",function(){var d=Y.apply(null,arguments).map(va);return new De(function(h){d.length===0&&h([]);var g=d.length,y=new Array(g);d.forEach(function(b,k){return De.resolve(b).then(function(I){return y[k]={status:"fulfilled",value:I}},function(I){return y[k]={status:"rejected",reason:I}}).then(function(){return--g||h(y)})})})}),ot.any&&typeof AggregateError<"u"&&v(De,"any",function(){var d=Y.apply(null,arguments).map(va);return new De(function(h,g){d.length===0&&g(new AggregateError([]));var y=d.length,b=new Array(y);d.forEach(function(k,I){return De.resolve(k).then(function(R){return h(R)},function(R){b[I]=R,--y||g(new AggregateError(b))})})})}),ot.withResolvers&&(De.withResolvers=ot.withResolvers));var zt={awaits:0,echoes:0,id:0},C_=0,ga=[],ma=0,ya=0,S_=0;function Tr(d,h,g,y){var b=Re,k=Object.create(b);return k.parent=b,k.ref=0,k.global=!1,k.id=++S_,Et.env,k.env=lt?{Promise:De,PromiseProp:{value:De,configurable:!0,writable:!0},all:De.all,race:De.race,allSettled:De.allSettled,any:De.any,resolve:De.resolve,reject:De.reject}:{},h&&l(k,h),++b.ref,k.finalize=function(){--this.parent.ref||this.parent.finalize()},y=cs(k,d,g,y),k.ref===0&&k.finalize(),y}function Zs(){return zt.id||(zt.id=++C_),++zt.awaits,zt.echoes+=je,zt.id}function Rr(){return!!zt.awaits&&(--zt.awaits==0&&(zt.id=0),zt.echoes=zt.awaits*je,!0)}function va(d){return zt.echoes&&d&&d.constructor===ot?(Zs(),d.then(function(h){return Rr(),h},function(h){return Rr(),Dt(h)})):d}function P_(){var d=ga[ga.length-1];ga.pop(),$r(d,!1)}function $r(d,h){var g,y=Re;(h?!zt.echoes||ma++&&d===Re:!ma||--ma&&d===Re)||queueMicrotask(h?(function(b){++ya,zt.echoes&&--zt.echoes!=0||(zt.echoes=zt.awaits=zt.id=0),ga.push(Re),$r(b,!0)}).bind(null,d):P_),d!==Re&&(Re=d,y===Et&&(Et.env=Ff()),lt&&(g=Et.env.Promise,h=d.env,(y.global||d.global)&&(Object.defineProperty(i,"Promise",h.PromiseProp),g.all=h.all,g.race=h.race,g.resolve=h.resolve,g.reject=h.reject,h.allSettled&&(g.allSettled=h.allSettled),h.any&&(g.any=h.any))))}function Ff(){var d=i.Promise;return lt?{Promise:d,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:d.all,race:d.race,allSettled:d.allSettled,any:d.any,resolve:d.resolve,reject:d.reject}:{}}function cs(d,h,g,y,b){var k=Re;try{return $r(d,!0),h(g,y,b)}finally{$r(k,!1)}}function Lf(d,h,g,y){return typeof d!="function"?d:function(){var b=Re;g&&Zs(),$r(h,!0);try{return d.apply(this,arguments)}finally{$r(b,!1),y&&queueMicrotask(Rr)}}}function Mc(d){Promise===ot&&zt.echoes===0?ma===0?d():enqueueNativeMicroTask(d):setTimeout(d,0)}(""+Rn).indexOf("[native code]")===-1&&(Zs=Rr=O);var Dt=De.reject,us="￿",dr="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Bf="String expected.",ei=[],ba="__dbnames",Dc="readonly",Tc="readwrite";function ds(d,h){return d?h?function(){return d.apply(this,arguments)&&h.apply(this,arguments)}:d:h}var jf={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function _a(d){return typeof d!="string"||/\./.test(d)?function(h){return h}:function(h){return h[d]===void 0&&d in h&&delete(h=pe(h))[d],h}}function Nf(){throw re.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function rt(d,h){try{var g=zf(d),y=zf(h);if(g!==y)return g==="Array"?1:y==="Array"?-1:g==="binary"?1:y==="binary"?-1:g==="string"?1:y==="string"?-1:g==="Date"?1:y!=="Date"?NaN:-1;switch(g){case"number":case"Date":case"string":return h<d?1:d<h?-1:0;case"binary":return(function(b,k){for(var I=b.length,R=k.length,L=I<R?I:R,N=0;N<L;++N)if(b[N]!==k[N])return b[N]<k[N]?-1:1;return I===R?0:I<R?-1:1})(qf(d),qf(h));case"Array":return(function(b,k){for(var I=b.length,R=k.length,L=I<R?I:R,N=0;N<L;++N){var W=rt(b[N],k[N]);if(W!==0)return W}return I===R?0:I<R?-1:1})(d,h)}}catch{}return NaN}function zf(d){var h=typeof d;return h!="object"?h:ArrayBuffer.isView(d)?"binary":(d=Ce(d),d==="ArrayBuffer"?"binary":d)}function qf(d){return d instanceof Uint8Array?d:ArrayBuffer.isView(d)?new Uint8Array(d.buffer,d.byteOffset,d.byteLength):new Uint8Array(d)}function wa(d,h,g){var y=d.schema.yProps;return y?(h&&0<g.numFailures&&(h=h.filter(function(b,k){return!g.failures[k]})),Promise.all(y.map(function(b){return b=b.updatesTable,h?d.db.table(b).where("k").anyOf(h).delete():d.db.table(b).clear()})).then(function(){return g})):g}var Uf=(xt.prototype._trans=function(d,h,g){var y=this._tx||Re.trans,b=this.name,k=de&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(d==="readonly"?"read":"write"," ").concat(this.name));function I(N,W,$){if(!$.schema[b])throw new re.NotFound("Table "+b+" not part of transaction");return h($.idbtrans,$)}var R=Qs();try{var L=y&&y.db._novip===this.db._novip?y===Re.trans?y._promise(d,I,g):Tr(function(){return y._promise(d,I,g)},{trans:y,transless:Re.transless||Re}):(function N(W,$,G,j){if(W.idbdb&&(W._state.openComplete||Re.letThrough||W._vip)){var q=W._createTransaction($,G,W._dbSchema);try{q.create(),W._state.PR1398_maxLoop=3}catch(K){return K.name===ae.InvalidState&&W.isOpen()&&0<--W._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),W.close({disableAutoOpen:!1}),W.open().then(function(){return N(W,$,G,j)})):Dt(K)}return q._promise($,function(K,H){return Tr(function(){return Re.trans=q,j(K,H,q)})}).then(function(K){if($==="readwrite")try{q.idbtrans.commit()}catch{}return $==="readonly"?K:q._completion.then(function(){return K})})}if(W._state.openComplete)return Dt(new re.DatabaseClosed(W._state.dbOpenError));if(!W._state.isBeingOpened){if(!W._state.autoOpen)return Dt(new re.DatabaseClosed);W.open().catch(O)}return W._state.dbReadyPromise.then(function(){return N(W,$,G,j)})})(this.db,d,[this.name],I);return k&&(L._consoleTask=k,L=L.catch(function(N){return console.trace(N),Dt(N)})),L}finally{R&&Js()}},xt.prototype.get=function(d,h){var g=this;return d&&d.constructor===Object?this.where(d).first(h):d==null?Dt(new re.Type("Invalid argument to Table.get()")):this._trans("readonly",function(y){return g.core.get({trans:y,key:d}).then(function(b){return g.hook.reading.fire(b)})}).then(h)},xt.prototype.where=function(d){if(typeof d=="string")return new this.db.WhereClause(this,d);if(a(d))return new this.db.WhereClause(this,"[".concat(d.join("+"),"]"));var h=o(d);if(h.length===1)return this.where(h[0]).equals(d[h[0]]);var g=this.schema.indexes.concat(this.schema.primKey).filter(function(R){if(R.compound&&h.every(function(N){return 0<=R.keyPath.indexOf(N)})){for(var L=0;L<h.length;++L)if(h.indexOf(R.keyPath[L])===-1)return!1;return!0}return!1}).sort(function(R,L){return R.keyPath.length-L.keyPath.length})[0];if(g&&this.db._maxKey!==us){var k=g.keyPath.slice(0,h.length);return this.where(k).equals(k.map(function(L){return d[L]}))}!g&&de&&console.warn("The query ".concat(JSON.stringify(d)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(h.join("+"),"]"));var y=this.schema.idxByName;function b(R,L){return rt(R,L)===0}var I=h.reduce(function($,L){var N=$[0],W=$[1],$=y[L],G=d[L];return[N||$,N||!$?ds(W,$&&$.multi?function(j){return j=A(j,L),a(j)&&j.some(function(q){return b(G,q)})}:function(j){return b(G,A(j,L))}):W]},[null,null]),k=I[0],I=I[1];return k?this.where(k.name).equals(d[k.keyPath]).filter(I):g?this.filter(I):this.where(h).equals("")},xt.prototype.filter=function(d){return this.toCollection().and(d)},xt.prototype.count=function(d){return this.toCollection().count(d)},xt.prototype.offset=function(d){return this.toCollection().offset(d)},xt.prototype.limit=function(d){return this.toCollection().limit(d)},xt.prototype.each=function(d){return this.toCollection().each(d)},xt.prototype.toArray=function(d){return this.toCollection().toArray(d)},xt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},xt.prototype.orderBy=function(d){return new this.db.Collection(new this.db.WhereClause(this,a(d)?"[".concat(d.join("+"),"]"):d))},xt.prototype.reverse=function(){return this.toCollection().reverse()},xt.prototype.mapToClass=function(d){var h,g=this.db,y=this.name;function b(){return h!==null&&h.apply(this,arguments)||this}(this.schema.mappedClass=d).prototype instanceof Nf&&((function(L,N){if(typeof N!="function"&&N!==null)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function W(){this.constructor=L}n(L,N),L.prototype=N===null?Object.create(N):(W.prototype=N.prototype,new W)})(b,h=d),Object.defineProperty(b.prototype,"db",{get:function(){return g},enumerable:!1,configurable:!0}),b.prototype.table=function(){return y},d=b);for(var k=new Set,I=d.prototype;I;I=c(I))Object.getOwnPropertyNames(I).forEach(function(L){return k.add(L)});function R(L){if(!L)return L;var N,W=Object.create(d.prototype);for(N in L)if(!k.has(N))try{W[N]=L[N]}catch{}return W}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=R,this.hook("reading",R),d},xt.prototype.defineClass=function(){return this.mapToClass(function(d){l(this,d)})},xt.prototype.add=function(d,h){var g=this,y=this.schema.primKey,b=y.auto,k=y.keyPath,I=d;return k&&b&&(I=_a(k)(d)),this._trans("readwrite",function(R){return g.core.mutate({trans:R,type:"add",keys:h!=null?[h]:null,values:[I]})}).then(function(R){return R.numFailures?De.reject(R.failures[0]):R.lastResult}).then(function(R){if(k)try{T(d,k,R)}catch{}return R})},xt.prototype.update=function(d,h){return typeof d!="object"||a(d)?this.where(":id").equals(d).modify(h):(d=A(d,this.schema.primKey.keyPath),d===void 0?Dt(new re.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(d).modify(h))},xt.prototype.put=function(d,h){var g=this,y=this.schema.primKey,b=y.auto,k=y.keyPath,I=d;return k&&b&&(I=_a(k)(d)),this._trans("readwrite",function(R){return g.core.mutate({trans:R,type:"put",values:[I],keys:h!=null?[h]:null})}).then(function(R){return R.numFailures?De.reject(R.failures[0]):R.lastResult}).then(function(R){if(k)try{T(d,k,R)}catch{}return R})},xt.prototype.delete=function(d){var h=this;return this._trans("readwrite",function(g){return h.core.mutate({trans:g,type:"delete",keys:[d]}).then(function(y){return wa(h,[d],y)}).then(function(y){return y.numFailures?De.reject(y.failures[0]):void 0})})},xt.prototype.clear=function(){var d=this;return this._trans("readwrite",function(h){return d.core.mutate({trans:h,type:"deleteRange",range:jf}).then(function(g){return wa(d,null,g)})}).then(function(h){return h.numFailures?De.reject(h.failures[0]):void 0})},xt.prototype.bulkGet=function(d){var h=this;return this._trans("readonly",function(g){return h.core.getMany({keys:d,trans:g}).then(function(y){return y.map(function(b){return h.hook.reading.fire(b)})})})},xt.prototype.bulkAdd=function(d,h,g){var y=this,b=Array.isArray(h)?h:void 0,k=(g=g||(b?void 0:h))?g.allKeys:void 0;return this._trans("readwrite",function(I){var N=y.schema.primKey,R=N.auto,N=N.keyPath;if(N&&b)throw new re.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(b&&b.length!==d.length)throw new re.InvalidArgument("Arguments objects and keys must have the same length");var L=d.length,N=N&&R?d.map(_a(N)):d;return y.core.mutate({trans:I,type:"add",keys:b,values:N,wantResults:k}).then(function(q){var $=q.numFailures,G=q.results,j=q.lastResult,q=q.failures;if($===0)return k?G:j;throw new it("".concat(y.name,".bulkAdd(): ").concat($," of ").concat(L," operations failed"),q)})})},xt.prototype.bulkPut=function(d,h,g){var y=this,b=Array.isArray(h)?h:void 0,k=(g=g||(b?void 0:h))?g.allKeys:void 0;return this._trans("readwrite",function(I){var N=y.schema.primKey,R=N.auto,N=N.keyPath;if(N&&b)throw new re.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(b&&b.length!==d.length)throw new re.InvalidArgument("Arguments objects and keys must have the same length");var L=d.length,N=N&&R?d.map(_a(N)):d;return y.core.mutate({trans:I,type:"put",keys:b,values:N,wantResults:k}).then(function(q){var $=q.numFailures,G=q.results,j=q.lastResult,q=q.failures;if($===0)return k?G:j;throw new it("".concat(y.name,".bulkPut(): ").concat($," of ").concat(L," operations failed"),q)})})},xt.prototype.bulkUpdate=function(d){var h=this,g=this.core,y=d.map(function(I){return I.key}),b=d.map(function(I){return I.changes}),k=[];return this._trans("readwrite",function(I){return g.getMany({trans:I,keys:y,cache:"clone"}).then(function(R){var L=[],N=[];d.forEach(function($,G){var j=$.key,q=$.changes,K=R[G];if(K){for(var H=0,X=Object.keys(q);H<X.length;H++){var ne=X[H],se=q[ne];if(ne===h.schema.primKey.keyPath){if(rt(se,j)!==0)throw new re.Constraint("Cannot update primary key in bulkUpdate()")}else T(K,ne,se)}k.push(G),L.push(j),N.push(K)}});var W=L.length;return g.mutate({trans:I,type:"put",keys:L,values:N,updates:{keys:y,changeSpecs:b}}).then(function($){var G=$.numFailures,j=$.failures;if(G===0)return W;for(var q=0,K=Object.keys(j);q<K.length;q++){var H,X=K[q],ne=k[Number(X)];ne!=null&&(H=j[X],delete j[X],j[ne]=H)}throw new it("".concat(h.name,".bulkUpdate(): ").concat(G," of ").concat(W," operations failed"),j)})})})},xt.prototype.bulkDelete=function(d){var h=this,g=d.length;return this._trans("readwrite",function(y){return h.core.mutate({trans:y,type:"delete",keys:d}).then(function(b){return wa(h,d,b)})}).then(function(I){var b=I.numFailures,k=I.lastResult,I=I.failures;if(b===0)return k;throw new it("".concat(h.name,".bulkDelete(): ").concat(b," of ").concat(g," operations failed"),I)})},xt);function xt(){}function zi(d){function h(I,R){if(R){for(var L=arguments.length,N=new Array(L-1);--L;)N[L-1]=arguments[L];return g[I].subscribe.apply(null,N),d}if(typeof I=="string")return g[I]}var g={};h.addEventType=k;for(var y=1,b=arguments.length;y<b;++y)k(arguments[y]);return h;function k(I,R,L){if(typeof I!="object"){var N;R=R||Se;var W={subscribers:[],fire:L=L||O,subscribe:function($){W.subscribers.indexOf($)===-1&&(W.subscribers.push($),W.fire=R(W.fire,$))},unsubscribe:function($){W.subscribers=W.subscribers.filter(function(G){return G!==$}),W.fire=W.subscribers.reduce(R,L)}};return g[I]=h[I]=W}o(N=I).forEach(function($){var G=N[$];if(a(G))k($,N[$][0],N[$][1]);else{if(G!=="asap")throw new re.InvalidArgument("Invalid event config");var j=k($,F,function(){for(var q=arguments.length,K=new Array(q);q--;)K[q]=arguments[q];j.subscribers.forEach(function(H){D(function(){H.apply(null,K)})})})}})}}function qi(d,h){return _(h).from({prototype:d}),h}function ti(d,h){return!(d.filter||d.algorithm||d.or)&&(h?d.justLimit:!d.replayFilter)}function Rc(d,h){d.filter=ds(d.filter,h)}function $c(d,h,g){var y=d.replayFilter;d.replayFilter=y?function(){return ds(y(),h())}:h,d.justLimit=g&&!y}function xa(d,h){if(d.isPrimKey)return h.primaryKey;var g=h.getIndexByKeyPath(d.index);if(!g)throw new re.Schema("KeyPath "+d.index+" on object store "+h.name+" is not indexed");return g}function Wf(d,h,g){var y=xa(d,h.schema);return h.openCursor({trans:g,values:!d.keysOnly,reverse:d.dir==="prev",unique:!!d.unique,query:{index:y,range:d.range}})}function ka(d,h,g,y){var b=d.replayFilter?ds(d.filter,d.replayFilter()):d.filter;if(d.or){var k={},I=function(R,L,N){var W,$;b&&!b(L,N,function(G){return L.stop(G)},function(G){return L.fail(G)})||(($=""+(W=L.primaryKey))=="[object ArrayBuffer]"&&($=""+new Uint8Array(W)),f(k,$)||(k[$]=!0,h(R,L,N)))};return Promise.all([d.or._iterate(I,g),Vf(Wf(d,y,g),d.algorithm,I,!d.keysOnly&&d.valueMapper)])}return Vf(Wf(d,y,g),ds(d.algorithm,b),h,!d.keysOnly&&d.valueMapper)}function Vf(d,h,g,y){var b=Pt(y?function(k,I,R){return g(y(k),I,R)}:g);return d.then(function(k){if(k)return k.start(function(){var I=function(){return k.continue()};h&&!h(k,function(R){return I=R},function(R){k.stop(R),I=O},function(R){k.fail(R),I=O})||b(k.value,k,function(R){return I=R}),I()})})}var Ui=(Hf.prototype.execute=function(d){var h=this["@@propmod"];if(h.add!==void 0){var g=h.add;if(a(g))return s(s([],a(d)?d:[],!0),g).sort();if(typeof g=="number")return(Number(d)||0)+g;if(typeof g=="bigint")try{return BigInt(d)+g}catch{return BigInt(0)+g}throw new TypeError("Invalid term ".concat(g))}if(h.remove!==void 0){var y=h.remove;if(a(y))return a(d)?d.filter(function(b){return!y.includes(b)}).sort():[];if(typeof y=="number")return Number(d)-y;if(typeof y=="bigint")try{return BigInt(d)-y}catch{return BigInt(0)-y}throw new TypeError("Invalid subtrahend ".concat(y))}return g=(g=h.replacePrefix)===null||g===void 0?void 0:g[0],g&&typeof d=="string"&&d.startsWith(g)?h.replacePrefix[1]+d.substring(g.length):d},Hf);function Hf(d){this["@@propmod"]=d}var A_=(ct.prototype._read=function(d,h){var g=this._ctx;return g.error?g.table._trans(null,Dt.bind(null,g.error)):g.table._trans("readonly",d).then(h)},ct.prototype._write=function(d){var h=this._ctx;return h.error?h.table._trans(null,Dt.bind(null,h.error)):h.table._trans("readwrite",d,"locked")},ct.prototype._addAlgorithm=function(d){var h=this._ctx;h.algorithm=ds(h.algorithm,d)},ct.prototype._iterate=function(d,h){return ka(this._ctx,d,h,this._ctx.table.core)},ct.prototype.clone=function(d){var h=Object.create(this.constructor.prototype),g=Object.create(this._ctx);return d&&l(g,d),h._ctx=g,h},ct.prototype.raw=function(){return this._ctx.valueMapper=null,this},ct.prototype.each=function(d){var h=this._ctx;return this._read(function(g){return ka(h,d,g,h.table.core)})},ct.prototype.count=function(d){var h=this;return this._read(function(g){var y=h._ctx,b=y.table.core;if(ti(y,!0))return b.count({trans:g,query:{index:xa(y,b.schema),range:y.range}}).then(function(I){return Math.min(I,y.limit)});var k=0;return ka(y,function(){return++k,!1},g,b).then(function(){return k})}).then(d)},ct.prototype.sortBy=function(d,h){var g=d.split(".").reverse(),y=g[0],b=g.length-1;function k(L,N){return N?k(L[g[N]],N-1):L[y]}var I=this._ctx.dir==="next"?1:-1;function R(L,N){return rt(k(L,b),k(N,b))*I}return this.toArray(function(L){return L.sort(R)}).then(h)},ct.prototype.toArray=function(d){var h=this;return this._read(function(g){var y=h._ctx;if(y.dir==="next"&&ti(y,!0)&&0<y.limit){var b=y.valueMapper,k=xa(y,y.table.core.schema);return y.table.core.query({trans:g,limit:y.limit,values:!0,query:{index:k,range:y.range}}).then(function(R){return R=R.result,b?R.map(b):R})}var I=[];return ka(y,function(R){return I.push(R)},g,y.table.core).then(function(){return I})},d)},ct.prototype.offset=function(d){var h=this._ctx;return d<=0||(h.offset+=d,ti(h)?$c(h,function(){var g=d;return function(y,b){return g===0||(g===1?--g:b(function(){y.advance(g),g=0}),!1)}}):$c(h,function(){var g=d;return function(){return--g<0}})),this},ct.prototype.limit=function(d){return this._ctx.limit=Math.min(this._ctx.limit,d),$c(this._ctx,function(){var h=d;return function(g,y,b){return--h<=0&&y(b),0<=h}},!0),this},ct.prototype.until=function(d,h){return Rc(this._ctx,function(g,y,b){return!d(g.value)||(y(b),h)}),this},ct.prototype.first=function(d){return this.limit(1).toArray(function(h){return h[0]}).then(d)},ct.prototype.last=function(d){return this.reverse().first(d)},ct.prototype.filter=function(d){var h;return Rc(this._ctx,function(g){return d(g.value)}),(h=this._ctx).isMatch=ds(h.isMatch,d),this},ct.prototype.and=function(d){return this.filter(d)},ct.prototype.or=function(d){return new this.db.WhereClause(this._ctx.table,d,this)},ct.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},ct.prototype.desc=function(){return this.reverse()},ct.prototype.eachKey=function(d){var h=this._ctx;return h.keysOnly=!h.isMatch,this.each(function(g,y){d(y.key,y)})},ct.prototype.eachUniqueKey=function(d){return this._ctx.unique="unique",this.eachKey(d)},ct.prototype.eachPrimaryKey=function(d){var h=this._ctx;return h.keysOnly=!h.isMatch,this.each(function(g,y){d(y.primaryKey,y)})},ct.prototype.keys=function(d){var h=this._ctx;h.keysOnly=!h.isMatch;var g=[];return this.each(function(y,b){g.push(b.key)}).then(function(){return g}).then(d)},ct.prototype.primaryKeys=function(d){var h=this._ctx;if(h.dir==="next"&&ti(h,!0)&&0<h.limit)return this._read(function(y){var b=xa(h,h.table.core.schema);return h.table.core.query({trans:y,values:!1,limit:h.limit,query:{index:b,range:h.range}})}).then(function(y){return y.result}).then(d);h.keysOnly=!h.isMatch;var g=[];return this.each(function(y,b){g.push(b.primaryKey)}).then(function(){return g}).then(d)},ct.prototype.uniqueKeys=function(d){return this._ctx.unique="unique",this.keys(d)},ct.prototype.firstKey=function(d){return this.limit(1).keys(function(h){return h[0]}).then(d)},ct.prototype.lastKey=function(d){return this.reverse().firstKey(d)},ct.prototype.distinct=function(){var d=this._ctx,d=d.index&&d.table.schema.idxByName[d.index];if(!d||!d.multi)return this;var h={};return Rc(this._ctx,function(b){var y=b.primaryKey.toString(),b=f(h,y);return h[y]=!0,!b}),this},ct.prototype.modify=function(d){var h=this,g=this._ctx;return this._write(function(y){var b,k,I;I=typeof d=="function"?d:(b=o(d),k=b.length,function(X){for(var ne=!1,se=0;se<k;++se){var ie=b[se],ge=d[ie],_e=A(X,ie);ge instanceof Ui?(T(X,ie,ge.execute(_e)),ne=!0):_e!==ge&&(T(X,ie,ge),ne=!0)}return ne});var R=g.table.core,$=R.schema.primaryKey,L=$.outbound,N=$.extractKey,W=200,$=h.db._options.modifyChunkSize;$&&(W=typeof $=="object"?$[R.name]||$["*"]||200:$);function G(X,ie){var se=ie.failures,ie=ie.numFailures;q+=X-ie;for(var ge=0,_e=o(se);ge<_e.length;ge++){var ye=_e[ge];j.push(se[ye])}}var j=[],q=0,K=[],H=d===Kf;return h.clone().primaryKeys().then(function(X){function ne(ie){var ge=Math.min(W,X.length-ie),_e=X.slice(ie,ie+ge);return(H?Promise.resolve([]):R.getMany({trans:y,keys:_e,cache:"immutable"})).then(function(ye){var ve=[],Oe=[],Ae=L?[]:null,Te=H?_e:[];if(!H)for(var Xe=0;Xe<ge;++Xe){var at=ye[Xe],Ke={value:pe(at),primKey:X[ie+Xe]};I.call(Ke,Ke.value,Ke)!==!1&&(Ke.value==null?Te.push(X[ie+Xe]):L||rt(N(at),N(Ke.value))===0?(Oe.push(Ke.value),L&&Ae.push(X[ie+Xe])):(Te.push(X[ie+Xe]),ve.push(Ke.value)))}return Promise.resolve(0<ve.length&&R.mutate({trans:y,type:"add",values:ve}).then(function(Ot){for(var He in Ot.failures)Te.splice(parseInt(He),1);G(ve.length,Ot)})).then(function(){return(0<Oe.length||se&&typeof d=="object")&&R.mutate({trans:y,type:"put",keys:Ae,values:Oe,criteria:se,changeSpec:typeof d!="function"&&d,isAdditionalChunk:0<ie}).then(function(Ot){return G(Oe.length,Ot)})}).then(function(){return(0<Te.length||se&&H)&&R.mutate({trans:y,type:"delete",keys:Te,criteria:se,isAdditionalChunk:0<ie}).then(function(Ot){return wa(g.table,Te,Ot)}).then(function(Ot){return G(Te.length,Ot)})}).then(function(){return X.length>ie+ge&&ne(ie+W)})})}var se=ti(g)&&g.limit===1/0&&(typeof d!="function"||H)&&{index:g.index,range:g.range};return ne(0).then(function(){if(0<j.length)throw new gt("Error modifying one or more objects",j,q,K);return X.length})})})},ct.prototype.delete=function(){var d=this._ctx,h=d.range;return!ti(d)||d.table.schema.yProps||!d.isPrimKey&&h.type!==3?this.modify(Kf):this._write(function(g){var y=d.table.core.schema.primaryKey,b=h;return d.table.core.count({trans:g,query:{index:y,range:b}}).then(function(k){return d.table.core.mutate({trans:g,type:"deleteRange",range:b}).then(function(L){var R=L.failures,L=L.numFailures;if(L)throw new gt("Could not delete some values",Object.keys(R).map(function(N){return R[N]}),k-L);return k-L})})})},ct);function ct(){}var Kf=function(d,h){return h.value=null};function I_(d,h){return d<h?-1:d===h?0:1}function E_(d,h){return h<d?-1:d===h?0:1}function Cn(d,h,g){return d=d instanceof Gf?new d.Collection(d):d,d._ctx.error=new(g||TypeError)(h),d}function ni(d){return new d.Collection(d,function(){return Yf("")}).limit(0)}function Ca(d,h,g,y){var b,k,I,R,L,N,W,$=g.length;if(!g.every(function(q){return typeof q=="string"}))return Cn(d,Bf);function G(q){b=q==="next"?function(H){return H.toUpperCase()}:function(H){return H.toLowerCase()},k=q==="next"?function(H){return H.toLowerCase()}:function(H){return H.toUpperCase()},I=q==="next"?I_:E_;var K=g.map(function(H){return{lower:k(H),upper:b(H)}}).sort(function(H,X){return I(H.lower,X.lower)});R=K.map(function(H){return H.upper}),L=K.map(function(H){return H.lower}),W=(N=q)==="next"?"":y}G("next"),d=new d.Collection(d,function(){return Fr(R[0],L[$-1]+y)}),d._ondirectionchange=function(q){G(q)};var j=0;return d._addAlgorithm(function(q,K,H){var X=q.key;if(typeof X!="string")return!1;var ne=k(X);if(h(ne,L,j))return!0;for(var se=null,ie=j;ie<$;++ie){var ge=(function(_e,ye,ve,Oe,Ae,Te){for(var Xe=Math.min(_e.length,Oe.length),at=-1,Ke=0;Ke<Xe;++Ke){var Ot=ye[Ke];if(Ot!==Oe[Ke])return Ae(_e[Ke],ve[Ke])<0?_e.substr(0,Ke)+ve[Ke]+ve.substr(Ke+1):Ae(_e[Ke],Oe[Ke])<0?_e.substr(0,Ke)+Oe[Ke]+ve.substr(Ke+1):0<=at?_e.substr(0,at)+ye[at]+ve.substr(at+1):null;Ae(_e[Ke],Ot)<0&&(at=Ke)}return Xe<Oe.length&&Te==="next"?_e+ve.substr(_e.length):Xe<_e.length&&Te==="prev"?_e.substr(0,ve.length):at<0?null:_e.substr(0,at)+Oe[at]+ve.substr(at+1)})(X,ne,R[ie],L[ie],I,N);ge===null&&se===null?j=ie+1:(se===null||0<I(se,ge))&&(se=ge)}return K(se!==null?function(){q.continue(se+W)}:H),!1}),d}function Fr(d,h,g,y){return{type:2,lower:d,upper:h,lowerOpen:g,upperOpen:y}}function Yf(d){return{type:1,lower:d,upper:d}}var Gf=(Object.defineProperty(qt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),qt.prototype.between=function(d,h,g,y){g=g!==!1,y=y===!0;try{return 0<this._cmp(d,h)||this._cmp(d,h)===0&&(g||y)&&(!g||!y)?ni(this):new this.Collection(this,function(){return Fr(d,h,!g,!y)})}catch{return Cn(this,dr)}},qt.prototype.equals=function(d){return d==null?Cn(this,dr):new this.Collection(this,function(){return Yf(d)})},qt.prototype.above=function(d){return d==null?Cn(this,dr):new this.Collection(this,function(){return Fr(d,void 0,!0)})},qt.prototype.aboveOrEqual=function(d){return d==null?Cn(this,dr):new this.Collection(this,function(){return Fr(d,void 0,!1)})},qt.prototype.below=function(d){return d==null?Cn(this,dr):new this.Collection(this,function(){return Fr(void 0,d,!1,!0)})},qt.prototype.belowOrEqual=function(d){return d==null?Cn(this,dr):new this.Collection(this,function(){return Fr(void 0,d)})},qt.prototype.startsWith=function(d){return typeof d!="string"?Cn(this,Bf):this.between(d,d+us,!0,!0)},qt.prototype.startsWithIgnoreCase=function(d){return d===""?this.startsWith(d):Ca(this,function(h,g){return h.indexOf(g[0])===0},[d],us)},qt.prototype.equalsIgnoreCase=function(d){return Ca(this,function(h,g){return h===g[0]},[d],"")},qt.prototype.anyOfIgnoreCase=function(){var d=Y.apply(ee,arguments);return d.length===0?ni(this):Ca(this,function(h,g){return g.indexOf(h)!==-1},d,"")},qt.prototype.startsWithAnyOfIgnoreCase=function(){var d=Y.apply(ee,arguments);return d.length===0?ni(this):Ca(this,function(h,g){return g.some(function(y){return h.indexOf(y)===0})},d,us)},qt.prototype.anyOf=function(){var d=this,h=Y.apply(ee,arguments),g=this._cmp;try{h.sort(g)}catch{return Cn(this,dr)}if(h.length===0)return ni(this);var y=new this.Collection(this,function(){return Fr(h[0],h[h.length-1])});y._ondirectionchange=function(k){g=k==="next"?d._ascending:d._descending,h.sort(g)};var b=0;return y._addAlgorithm(function(k,I,R){for(var L=k.key;0<g(L,h[b]);)if(++b===h.length)return I(R),!1;return g(L,h[b])===0||(I(function(){k.continue(h[b])}),!1)}),y},qt.prototype.notEqual=function(d){return this.inAnyRange([[-1/0,d],[d,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},qt.prototype.noneOf=function(){var d=Y.apply(ee,arguments);if(d.length===0)return new this.Collection(this);try{d.sort(this._ascending)}catch{return Cn(this,dr)}var h=d.reduce(function(g,y){return g?g.concat([[g[g.length-1][1],y]]):[[-1/0,y]]},null);return h.push([d[d.length-1],this.db._maxKey]),this.inAnyRange(h,{includeLowers:!1,includeUppers:!1})},qt.prototype.inAnyRange=function(X,h){var g=this,y=this._cmp,b=this._ascending,k=this._descending,I=this._min,R=this._max;if(X.length===0)return ni(this);if(!X.every(function(ne){return ne[0]!==void 0&&ne[1]!==void 0&&b(ne[0],ne[1])<=0}))return Cn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",re.InvalidArgument);var L=!h||h.includeLowers!==!1,N=h&&h.includeUppers===!0,W,$=b;function G(ne,se){return $(ne[0],se[0])}try{(W=X.reduce(function(ne,se){for(var ie=0,ge=ne.length;ie<ge;++ie){var _e=ne[ie];if(y(se[0],_e[1])<0&&0<y(se[1],_e[0])){_e[0]=I(_e[0],se[0]),_e[1]=R(_e[1],se[1]);break}}return ie===ge&&ne.push(se),ne},[])).sort(G)}catch{return Cn(this,dr)}var j=0,q=N?function(ne){return 0<b(ne,W[j][1])}:function(ne){return 0<=b(ne,W[j][1])},K=L?function(ne){return 0<k(ne,W[j][0])}:function(ne){return 0<=k(ne,W[j][0])},H=q,X=new this.Collection(this,function(){return Fr(W[0][0],W[W.length-1][1],!L,!N)});return X._ondirectionchange=function(ne){$=ne==="next"?(H=q,b):(H=K,k),W.sort(G)},X._addAlgorithm(function(ne,se,ie){for(var ge,_e=ne.key;H(_e);)if(++j===W.length)return se(ie),!1;return!q(ge=_e)&&!K(ge)||(g._cmp(_e,W[j][1])===0||g._cmp(_e,W[j][0])===0||se(function(){$===b?ne.continue(W[j][0]):ne.continue(W[j][1])}),!1)}),X},qt.prototype.startsWithAnyOf=function(){var d=Y.apply(ee,arguments);return d.every(function(h){return typeof h=="string"})?d.length===0?ni(this):this.inAnyRange(d.map(function(h){return[h,h+us]})):Cn(this,"startsWithAnyOf() only works with strings")},qt);function qt(){}function Xn(d){return Pt(function(h){return Wi(h),d(h.target.error),!1})}function Wi(d){d.stopPropagation&&d.stopPropagation(),d.preventDefault&&d.preventDefault()}var Vi="storagemutated",Fc="x-storagemutated-1",Lr=zi(null,Vi),O_=(Qn.prototype._lock=function(){return M(!Re.global),++this._reculock,this._reculock!==1||Re.global||(Re.lockOwnerFor=this),this},Qn.prototype._unlock=function(){if(M(!Re.global),--this._reculock==0)for(Re.global||(Re.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var d=this._blockedFuncs.shift();try{cs(d[1],d[0])}catch{}}return this},Qn.prototype._locked=function(){return this._reculock&&Re.lockOwnerFor!==this},Qn.prototype.create=function(d){var h=this;if(!this.mode)return this;var g=this.db.idbdb,y=this.db._state.dbOpenError;if(M(!this.idbtrans),!d&&!g)switch(y&&y.name){case"DatabaseClosedError":throw new re.DatabaseClosed(y);case"MissingAPIError":throw new re.MissingAPI(y.message,y);default:throw new re.OpenFailed(y)}if(!this.active)throw new re.TransactionInactive;return M(this._completion._state===null),(d=this.idbtrans=d||(this.db.core||g).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Pt(function(b){Wi(b),h._reject(d.error)}),d.onabort=Pt(function(b){Wi(b),h.active&&h._reject(new re.Abort(d.error)),h.active=!1,h.on("abort").fire(b)}),d.oncomplete=Pt(function(){h.active=!1,h._resolve(),"mutatedParts"in d&&Lr.storagemutated.fire(d.mutatedParts)}),this},Qn.prototype._promise=function(d,h,g){var y=this;if(d==="readwrite"&&this.mode!=="readwrite")return Dt(new re.ReadOnly("Transaction is readonly"));if(!this.active)return Dt(new re.TransactionInactive);if(this._locked())return new De(function(k,I){y._blockedFuncs.push([function(){y._promise(d,h,g).then(k,I)},Re])});if(g)return Tr(function(){var k=new De(function(I,R){y._lock();var L=h(I,R,y);L&&L.then&&L.then(I,R)});return k.finally(function(){return y._unlock()}),k._lib=!0,k});var b=new De(function(k,I){var R=h(k,I,y);R&&R.then&&R.then(k,I)});return b._lib=!0,b},Qn.prototype._root=function(){return this.parent?this.parent._root():this},Qn.prototype.waitFor=function(d){var h,g=this._root(),y=De.resolve(d);g._waitingFor?g._waitingFor=g._waitingFor.then(function(){return y}):(g._waitingFor=y,g._waitingQueue=[],h=g.idbtrans.objectStore(g.storeNames[0]),(function k(){for(++g._spinCount;g._waitingQueue.length;)g._waitingQueue.shift()();g._waitingFor&&(h.get(-1/0).onsuccess=k)})());var b=g._waitingFor;return new De(function(k,I){y.then(function(R){return g._waitingQueue.push(Pt(k.bind(null,R)))},function(R){return g._waitingQueue.push(Pt(I.bind(null,R)))}).finally(function(){g._waitingFor===b&&(g._waitingFor=null)})})},Qn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new re.Abort))},Qn.prototype.table=function(d){var h=this._memoizedTables||(this._memoizedTables={});if(f(h,d))return h[d];var g=this.schema[d];if(!g)throw new re.NotFound("Table "+d+" not part of transaction");return g=new this.db.Table(d,g,this),g.core=this.db.core.table(d),h[d]=g},Qn);function Qn(){}function Lc(d,h,g,y,b,k,I,R){return{name:d,keyPath:h,unique:g,multi:y,auto:b,compound:k,src:(g&&!I?"&":"")+(y?"*":"")+(b?"++":"")+Xf(h),type:R}}function Xf(d){return typeof d=="string"?d:d?"["+[].join.call(d,"+")+"]":""}function Bc(d,h,g){return{name:d,primKey:h,indexes:g,mappedClass:null,idxByName:(y=function(b){return[b.name,b]},g.reduce(function(b,k,I){return I=y(k,I),I&&(b[I[0]]=I[1]),b},{}))};var y}var Hi=function(d){try{return d.only([[]]),Hi=function(){return[[]]},[[]]}catch{return Hi=function(){return us},us}};function jc(d){return d==null?function(){}:typeof d=="string"?(h=d).split(".").length===1?function(g){return g[h]}:function(g){return A(g,h)}:function(g){return A(g,d)};var h}function Qf(d){return[].slice.call(d)}var M_=0;function Ki(d){return d==null?":id":typeof d=="string"?d:"[".concat(d.join("+"),"]")}function D_(d,h,L){function y(H){if(H.type===3)return null;if(H.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var j=H.lower,q=H.upper,K=H.lowerOpen,H=H.upperOpen;return j===void 0?q===void 0?null:h.upperBound(q,!!H):q===void 0?h.lowerBound(j,!!K):h.bound(j,q,!!K,!!H)}function b(G){var j,q=G.name;return{name:q,schema:G,mutate:function(K){var H=K.trans,X=K.type,ne=K.keys,se=K.values,ie=K.range;return new Promise(function(ge,_e){ge=Pt(ge);var ye=H.objectStore(q),ve=ye.keyPath==null,Oe=X==="put"||X==="add";if(!Oe&&X!=="delete"&&X!=="deleteRange")throw new Error("Invalid operation type: "+X);var Ae,Te=(ne||se||{length:1}).length;if(ne&&se&&ne.length!==se.length)throw new Error("Given keys array must have same length as given values array.");if(Te===0)return ge({numFailures:0,failures:{},results:[],lastResult:void 0});function Xe(hn){++Ot,Wi(hn)}var at=[],Ke=[],Ot=0;if(X==="deleteRange"){if(ie.type===4)return ge({numFailures:Ot,failures:Ke,results:[],lastResult:void 0});ie.type===3?at.push(Ae=ye.clear()):at.push(Ae=ye.delete(y(ie)))}else{var ve=Oe?ve?[se,ne]:[se,null]:[ne,null],He=ve[0],nn=ve[1];if(Oe)for(var rn=0;rn<Te;++rn)at.push(Ae=nn&&nn[rn]!==void 0?ye[X](He[rn],nn[rn]):ye[X](He[rn])),Ae.onerror=Xe;else for(rn=0;rn<Te;++rn)at.push(Ae=ye[X](He[rn])),Ae.onerror=Xe}function Fa(hn){hn=hn.target.result,at.forEach(function(ps,ru){return ps.error!=null&&(Ke[ru]=ps.error)}),ge({numFailures:Ot,failures:Ke,results:X==="delete"?ne:at.map(function(ps){return ps.result}),lastResult:hn})}Ae.onerror=function(hn){Xe(hn),Fa(hn)},Ae.onsuccess=Fa})},getMany:function(K){var H=K.trans,X=K.keys;return new Promise(function(ne,se){ne=Pt(ne);for(var ie,ge=H.objectStore(q),_e=X.length,ye=new Array(_e),ve=0,Oe=0,Ae=function(at){at=at.target,ye[at._pos]=at.result,++Oe===ve&&ne(ye)},Te=Xn(se),Xe=0;Xe<_e;++Xe)X[Xe]!=null&&((ie=ge.get(X[Xe]))._pos=Xe,ie.onsuccess=Ae,ie.onerror=Te,++ve);ve===0&&ne(ye)})},get:function(K){var H=K.trans,X=K.key;return new Promise(function(ne,se){ne=Pt(ne);var ie=H.objectStore(q).get(X);ie.onsuccess=function(ge){return ne(ge.target.result)},ie.onerror=Xn(se)})},query:(j=N,function(K){return new Promise(function(H,X){H=Pt(H);var ne,se,ie,ve=K.trans,ge=K.values,_e=K.limit,Ae=K.query,ye=_e===1/0?void 0:_e,Oe=Ae.index,Ae=Ae.range,ve=ve.objectStore(q),Oe=Oe.isPrimaryKey?ve:ve.index(Oe.name),Ae=y(Ae);if(_e===0)return H({result:[]});j?((ye=ge?Oe.getAll(Ae,ye):Oe.getAllKeys(Ae,ye)).onsuccess=function(Te){return H({result:Te.target.result})},ye.onerror=Xn(X)):(ne=0,se=!ge&&"openKeyCursor"in Oe?Oe.openKeyCursor(Ae):Oe.openCursor(Ae),ie=[],se.onsuccess=function(Te){var Xe=se.result;return Xe?(ie.push(ge?Xe.value:Xe.primaryKey),++ne===_e?H({result:ie}):void Xe.continue()):H({result:ie})},se.onerror=Xn(X))})}),openCursor:function(K){var H=K.trans,X=K.values,ne=K.query,se=K.reverse,ie=K.unique;return new Promise(function(ge,_e){ge=Pt(ge);var Oe=ne.index,ye=ne.range,ve=H.objectStore(q),ve=Oe.isPrimaryKey?ve:ve.index(Oe.name),Oe=se?ie?"prevunique":"prev":ie?"nextunique":"next",Ae=!X&&"openKeyCursor"in ve?ve.openKeyCursor(y(ye),Oe):ve.openCursor(y(ye),Oe);Ae.onerror=Xn(_e),Ae.onsuccess=Pt(function(Te){var Xe,at,Ke,Ot,He=Ae.result;He?(He.___id=++M_,He.done=!1,Xe=He.continue.bind(He),at=(at=He.continuePrimaryKey)&&at.bind(He),Ke=He.advance.bind(He),Ot=function(){throw new Error("Cursor not stopped")},He.trans=H,He.stop=He.continue=He.continuePrimaryKey=He.advance=function(){throw new Error("Cursor not started")},He.fail=Pt(_e),He.next=function(){var nn=this,rn=1;return this.start(function(){return rn--?nn.continue():nn.stop()}).then(function(){return nn})},He.start=function(nn){function rn(){if(Ae.result)try{nn()}catch(hn){He.fail(hn)}else He.done=!0,He.start=function(){throw new Error("Cursor behind last entry")},He.stop()}var Fa=new Promise(function(hn,ps){hn=Pt(hn),Ae.onerror=Xn(ps),He.fail=ps,He.stop=function(ru){He.stop=He.continue=He.continuePrimaryKey=He.advance=Ot,hn(ru)}});return Ae.onsuccess=Pt(function(hn){Ae.onsuccess=rn,rn()}),He.continue=Xe,He.continuePrimaryKey=at,He.advance=Ke,rn(),Fa},ge(He)):ge(null)},_e)})},count:function(K){var H=K.query,X=K.trans,ne=H.index,se=H.range;return new Promise(function(ie,ge){var _e=X.objectStore(q),ye=ne.isPrimaryKey?_e:_e.index(ne.name),_e=y(se),ye=_e?ye.count(_e):ye.count();ye.onsuccess=Pt(function(ve){return ie(ve.target.result)}),ye.onerror=Xn(ge)})}}}var k,I,R,W=(I=L,R=Qf((k=d).objectStoreNames),{schema:{name:k.name,tables:R.map(function(G){return I.objectStore(G)}).map(function(G){var j=G.keyPath,H=G.autoIncrement,q=a(j),K={},H={name:G.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:j==null,compound:q,keyPath:j,autoIncrement:H,unique:!0,extractKey:jc(j)},indexes:Qf(G.indexNames).map(function(X){return G.index(X)}).map(function(ie){var ne=ie.name,se=ie.unique,ge=ie.multiEntry,ie=ie.keyPath,ge={name:ne,compound:a(ie),keyPath:ie,unique:se,multiEntry:ge,extractKey:jc(ie)};return K[Ki(ie)]=ge}),getIndexByKeyPath:function(X){return K[Ki(X)]}};return K[":id"]=H.primaryKey,j!=null&&(K[Ki(j)]=H.primaryKey),H})},hasGetAll:0<R.length&&"getAll"in I.objectStore(R[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),L=W.schema,N=W.hasGetAll,W=L.tables.map(b),$={};return W.forEach(function(G){return $[G.name]=G}),{stack:"dbcore",transaction:d.transaction.bind(d),table:function(G){if(!$[G])throw new Error("Table '".concat(G,"' not found"));return $[G]},MIN_KEY:-1/0,MAX_KEY:Hi(h),schema:L}}function T_(d,h,g,y){var b=g.IDBKeyRange;return g.indexedDB,{dbcore:(y=D_(h,b,y),d.dbcore.reduce(function(k,I){return I=I.create,r(r({},k),I(k))},y))}}function Sa(d,y){var g=y.db,y=T_(d._middlewares,g,d._deps,y);d.core=y.dbcore,d.tables.forEach(function(b){var k=b.name;d.core.schema.tables.some(function(I){return I.name===k})&&(b.core=d.core.table(k),d[k]instanceof d.Table&&(d[k].core=b.core))})}function Pa(d,h,g,y){g.forEach(function(b){var k=y[b];h.forEach(function(I){var R=(function L(N,W){return x(N,W)||(N=c(N))&&L(N,W)})(I,b);(!R||"value"in R&&R.value===void 0)&&(I===d.Transaction.prototype||I instanceof d.Transaction?v(I,b,{get:function(){return this.table(b)},set:function(L){m(this,b,{value:L,writable:!0,configurable:!0,enumerable:!0})}}):I[b]=new d.Table(b,k))})})}function Nc(d,h){h.forEach(function(g){for(var y in g)g[y]instanceof d.Table&&delete g[y]})}function R_(d,h){return d._cfg.version-h._cfg.version}function $_(d,h,g,y){var b=d._dbSchema;g.objectStoreNames.contains("$meta")&&!b.$meta&&(b.$meta=Bc("$meta",Zf("")[0],[]),d._storeNames.push("$meta"));var k=d._createTransaction("readwrite",d._storeNames,b);k.create(g),k._completion.catch(y);var I=k._reject.bind(k),R=Re.transless||Re;Tr(function(){return Re.trans=k,Re.transless=R,h!==0?(Sa(d,g),N=h,((L=k).storeNames.includes("$meta")?L.table("$meta").get("version").then(function(W){return W??N}):De.resolve(N)).then(function(W){return G=W,j=k,q=g,K=[],W=($=d)._versions,H=$._dbSchema=Ia(0,$.idbdb,q),(W=W.filter(function(X){return X._cfg.version>=G})).length!==0?(W.forEach(function(X){K.push(function(){var ne=H,se=X._cfg.dbschema;Ea($,ne,q),Ea($,se,q),H=$._dbSchema=se;var ie=zc(ne,se);ie.add.forEach(function(Oe){qc(q,Oe[0],Oe[1].primKey,Oe[1].indexes)}),ie.change.forEach(function(Oe){if(Oe.recreate)throw new re.Upgrade("Not yet support for changing primary key");var Ae=q.objectStore(Oe.name);Oe.add.forEach(function(Te){return Aa(Ae,Te)}),Oe.change.forEach(function(Te){Ae.deleteIndex(Te.name),Aa(Ae,Te)}),Oe.del.forEach(function(Te){return Ae.deleteIndex(Te)})});var ge=X._cfg.contentUpgrade;if(ge&&X._cfg.version>G){Sa($,q),j._memoizedTables={};var _e=B(se);ie.del.forEach(function(Oe){_e[Oe]=ne[Oe]}),Nc($,[$.Transaction.prototype]),Pa($,[$.Transaction.prototype],o(_e),_e),j.schema=_e;var ye,ve=Le(ge);return ve&&Zs(),ie=De.follow(function(){var Oe;(ye=ge(j))&&ve&&(Oe=Rr.bind(null,null),ye.then(Oe,Oe))}),ye&&typeof ye.then=="function"?De.resolve(ye):ie.then(function(){return ye})}}),K.push(function(ne){var se,ie,ge=X._cfg.dbschema;se=ge,ie=ne,[].slice.call(ie.db.objectStoreNames).forEach(function(_e){return se[_e]==null&&ie.db.deleteObjectStore(_e)}),Nc($,[$.Transaction.prototype]),Pa($,[$.Transaction.prototype],$._storeNames,$._dbSchema),j.schema=$._dbSchema}),K.push(function(ne){$.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil($.idbdb.version/10)===X._cfg.version?($.idbdb.deleteObjectStore("$meta"),delete $._dbSchema.$meta,$._storeNames=$._storeNames.filter(function(se){return se!=="$meta"})):ne.objectStore("$meta").put(X._cfg.version,"version"))})}),(function X(){return K.length?De.resolve(K.shift()(j.idbtrans)).then(X):De.resolve()})().then(function(){Jf(H,q)})):De.resolve();var $,G,j,q,K,H}).catch(I)):(o(b).forEach(function(W){qc(g,W,b[W].primKey,b[W].indexes)}),Sa(d,g),void De.follow(function(){return d.on.populate.fire(k)}).catch(I));var L,N})}function F_(d,h){Jf(d._dbSchema,h),h.db.version%10!=0||h.objectStoreNames.contains("$meta")||h.db.createObjectStore("$meta").add(Math.ceil(h.db.version/10-1),"version");var g=Ia(0,d.idbdb,h);Ea(d,d._dbSchema,h);for(var y=0,b=zc(g,d._dbSchema).change;y<b.length;y++){var k=(function(I){if(I.change.length||I.recreate)return console.warn("Unable to patch indexes of table ".concat(I.name," because it has changes on the type of index or primary key.")),{value:void 0};var R=h.objectStore(I.name);I.add.forEach(function(L){de&&console.debug("Dexie upgrade patch: Creating missing index ".concat(I.name,".").concat(L.src)),Aa(R,L)})})(b[y]);if(typeof k=="object")return k.value}}function zc(d,h){var g,y={del:[],add:[],change:[]};for(g in d)h[g]||y.del.push(g);for(g in h){var b=d[g],k=h[g];if(b){var I={name:g,def:k,recreate:!1,del:[],add:[],change:[]};if(""+(b.primKey.keyPath||"")!=""+(k.primKey.keyPath||"")||b.primKey.auto!==k.primKey.auto)I.recreate=!0,y.change.push(I);else{var R=b.idxByName,L=k.idxByName,N=void 0;for(N in R)L[N]||I.del.push(N);for(N in L){var W=R[N],$=L[N];W?W.src!==$.src&&I.change.push($):I.add.push($)}(0<I.del.length||0<I.add.length||0<I.change.length)&&y.change.push(I)}}else y.add.push([g,k])}return y}function qc(d,h,g,y){var b=d.db.createObjectStore(h,g.keyPath?{keyPath:g.keyPath,autoIncrement:g.auto}:{autoIncrement:g.auto});return y.forEach(function(k){return Aa(b,k)}),b}function Jf(d,h){o(d).forEach(function(g){h.db.objectStoreNames.contains(g)||(de&&console.debug("Dexie: Creating missing table",g),qc(h,g,d[g].primKey,d[g].indexes))})}function Aa(d,h){d.createIndex(h.name,h.keyPath,{unique:h.unique,multiEntry:h.multi})}function Ia(d,h,g){var y={};return S(h.objectStoreNames,0).forEach(function(b){for(var k=g.objectStore(b),I=Lc(Xf(N=k.keyPath),N||"",!0,!1,!!k.autoIncrement,N&&typeof N!="string",!0),R=[],L=0;L<k.indexNames.length;++L){var W=k.index(k.indexNames[L]),N=W.keyPath,W=Lc(W.name,N,!!W.unique,!!W.multiEntry,!1,N&&typeof N!="string",!1);R.push(W)}y[b]=Bc(b,I,R)}),y}function Ea(d,h,g){for(var y=g.db.objectStoreNames,b=0;b<y.length;++b){var k=y[b],I=g.objectStore(k);d._hasGetAll="getAll"in I;for(var R=0;R<I.indexNames.length;++R){var L=I.indexNames[R],N=I.index(L).keyPath,W=typeof N=="string"?N:"["+S(N).join("+")+"]";!h[k]||(N=h[k].idxByName[W])&&(N.name=L,delete h[k].idxByName[W],h[k].idxByName[L]=N)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(d._hasGetAll=!1)}function Zf(d){return d.split(",").map(function(h,g){var k=h.split(":"),y=(b=k[1])===null||b===void 0?void 0:b.trim(),b=(h=k[0].trim()).replace(/([&*]|\+\+)/g,""),k=/^\[/.test(b)?b.match(/^\[(.*)\]$/)[1].split("+"):b;return Lc(b,k||null,/\&/.test(h),/\*/.test(h),/\+\+/.test(h),a(k),g===0,y)})}var L_=(ri.prototype._createTableSchema=Bc,ri.prototype._parseIndexSyntax=Zf,ri.prototype._parseStoresSpec=function(d,h){var g=this;o(d).forEach(function(y){if(d[y]!==null){var b=g._parseIndexSyntax(d[y]),k=b.shift();if(!k)throw new re.Schema("Invalid schema for table "+y+": "+d[y]);if(k.unique=!0,k.multi)throw new re.Schema("Primary key cannot be multiEntry*");b.forEach(function(I){if(I.auto)throw new re.Schema("Only primary key can be marked as autoIncrement (++)");if(!I.keyPath)throw new re.Schema("Index must have a name and cannot be an empty string")}),b=g._createTableSchema(y,k,b),h[y]=b}})},ri.prototype.stores=function(g){var h=this.db;this._cfg.storesSource=this._cfg.storesSource?l(this._cfg.storesSource,g):g;var g=h._versions,y={},b={};return g.forEach(function(k){l(y,k._cfg.storesSource),b=k._cfg.dbschema={},k._parseStoresSpec(y,b)}),h._dbSchema=b,Nc(h,[h._allTables,h,h.Transaction.prototype]),Pa(h,[h._allTables,h,h.Transaction.prototype,this._cfg.tables],o(b),b),h._storeNames=o(b),this},ri.prototype.upgrade=function(d){return this._cfg.contentUpgrade=be(this._cfg.contentUpgrade||O,d),this},ri);function ri(){}function Uc(d,h){var g=d._dbNamesDB;return g||(g=d._dbNamesDB=new fr(ba,{addons:[],indexedDB:d,IDBKeyRange:h})).version(1).stores({dbnames:"name"}),g.table("dbnames")}function Wc(d){return d&&typeof d.databases=="function"}function Vc(d){return Tr(function(){return Re.letThrough=!0,d()})}function Hc(d){return!("from"in d)}var tn=function(d,h){if(!this){var g=new tn;return d&&"d"in d&&l(g,d),g}l(this,arguments.length?{d:1,from:d,to:1<arguments.length?h:d}:{d:0})};function Yi(d,h,g){var y=rt(h,g);if(!isNaN(y)){if(0<y)throw RangeError();if(Hc(d))return l(d,{from:h,to:g,d:1});var b=d.l,y=d.r;if(rt(g,d.from)<0)return b?Yi(b,h,g):d.l={from:h,to:g,d:1,l:null,r:null},th(d);if(0<rt(h,d.to))return y?Yi(y,h,g):d.r={from:h,to:g,d:1,l:null,r:null},th(d);rt(h,d.from)<0&&(d.from=h,d.l=null,d.d=y?y.d+1:1),0<rt(g,d.to)&&(d.to=g,d.r=null,d.d=d.l?d.l.d+1:1),g=!d.r,b&&!d.l&&Gi(d,b),y&&g&&Gi(d,y)}}function Gi(d,h){Hc(h)||(function g(y,L){var k=L.from,I=L.to,R=L.l,L=L.r;Yi(y,k,I),R&&g(y,R),L&&g(y,L)})(d,h)}function eh(d,h){var g=Oa(h),y=g.next();if(y.done)return!1;for(var b=y.value,k=Oa(d),I=k.next(b.from),R=I.value;!y.done&&!I.done;){if(rt(R.from,b.to)<=0&&0<=rt(R.to,b.from))return!0;rt(b.from,R.from)<0?b=(y=g.next(R.from)).value:R=(I=k.next(b.from)).value}return!1}function Oa(d){var h=Hc(d)?null:{s:0,n:d};return{next:function(g){for(var y=0<arguments.length;h;)switch(h.s){case 0:if(h.s=1,y)for(;h.n.l&&rt(g,h.n.from)<0;)h={up:h,n:h.n.l,s:1};else for(;h.n.l;)h={up:h,n:h.n.l,s:1};case 1:if(h.s=2,!y||rt(g,h.n.to)<=0)return{value:h.n,done:!1};case 2:if(h.n.r){h.s=3,h={up:h,n:h.n.r,s:0};continue}case 3:h=h.up}return{done:!0}}}}function th(d){var h,g,y=(((h=d.r)===null||h===void 0?void 0:h.d)||0)-(((g=d.l)===null||g===void 0?void 0:g.d)||0),b=1<y?"r":y<-1?"l":"";b&&(h=b=="r"?"l":"r",g=r({},d),y=d[b],d.from=y.from,d.to=y.to,d[b]=y[b],g[b]=y[h],(d[h]=g).d=nh(g)),d.d=nh(d)}function nh(g){var h=g.r,g=g.l;return(h?g?Math.max(h.d,g.d):h.d:g?g.d:0)+1}function Ma(d,h){return o(h).forEach(function(g){d[g]?Gi(d[g],h[g]):d[g]=(function y(b){var k,I,R={};for(k in b)f(b,k)&&(I=b[k],R[k]=!I||typeof I!="object"||V.has(I.constructor)?I:y(I));return R})(h[g])}),d}function Kc(d,h){return d.all||h.all||Object.keys(d).some(function(g){return h[g]&&eh(h[g],d[g])})}p(tn.prototype,((Rn={add:function(d){return Gi(this,d),this},addKey:function(d){return Yi(this,d,d),this},addKeys:function(d){var h=this;return d.forEach(function(g){return Yi(h,g,g)}),this},hasKey:function(d){var h=Oa(this).next(d).value;return h&&rt(h.from,d)<=0&&0<=rt(h.to,d)}})[we]=function(){return Oa(this)},Rn));var fs={},Yc={},Gc=!1;function Da(d){Ma(Yc,d),Gc||(Gc=!0,setTimeout(function(){Gc=!1,Xc(Yc,!(Yc={}))},0))}function Xc(d,h){h===void 0&&(h=!1);var g=new Set;if(d.all)for(var y=0,b=Object.values(fs);y<b.length;y++)rh(I=b[y],d,g,h);else for(var k in d){var I,R=/^idb\:\/\/(.*)\/(.*)\//.exec(k);R&&(k=R[1],R=R[2],(I=fs["idb://".concat(k,"/").concat(R)])&&rh(I,d,g,h))}g.forEach(function(L){return L()})}function rh(d,h,g,y){for(var b=[],k=0,I=Object.entries(d.queries.query);k<I.length;k++){for(var R=I[k],L=R[0],N=[],W=0,$=R[1];W<$.length;W++){var G=$[W];Kc(h,G.obsSet)?G.subscribers.forEach(function(H){return g.add(H)}):y&&N.push(G)}y&&b.push([L,N])}if(y)for(var j=0,q=b;j<q.length;j++){var K=q[j],L=K[0],N=K[1];d.queries.query[L]=N}}function B_(d){var h=d._state,g=d._deps.indexedDB;if(h.isBeingOpened||d.idbdb)return h.dbReadyPromise.then(function(){return h.dbOpenError?Dt(h.dbOpenError):d});h.isBeingOpened=!0,h.dbOpenError=null,h.openComplete=!1;var y=h.openCanceller,b=Math.round(10*d.verno),k=!1;function I(){if(h.openCanceller!==y)throw new re.DatabaseClosed("db.open() was cancelled")}function R(){return new De(function(G,j){if(I(),!g)throw new re.MissingAPI;var q=d.name,K=h.autoSchema||!b?g.open(q):g.open(q,b);if(!K)throw new re.MissingAPI;K.onerror=Xn(j),K.onblocked=Pt(d._fireOnBlocked),K.onupgradeneeded=Pt(function(H){var X;W=K.transaction,h.autoSchema&&!d._options.allowEmptyDB?(K.onerror=Wi,W.abort(),K.result.close(),(X=g.deleteDatabase(q)).onsuccess=X.onerror=Pt(function(){j(new re.NoSuchDatabase("Database ".concat(q," doesnt exist")))})):(W.onerror=Xn(j),H=H.oldVersion>Math.pow(2,62)?0:H.oldVersion,$=H<1,d.idbdb=K.result,k&&F_(d,W),$_(d,H/10,W,j))},j),K.onsuccess=Pt(function(){W=null;var H,X,ne,se,ie,ge=d.idbdb=K.result,_e=S(ge.objectStoreNames);if(0<_e.length)try{var ye=ge.transaction((se=_e).length===1?se[0]:se,"readonly");if(h.autoSchema)X=ge,ne=ye,(H=d).verno=X.version/10,ne=H._dbSchema=Ia(0,X,ne),H._storeNames=S(X.objectStoreNames,0),Pa(H,[H._allTables],o(ne),ne);else if(Ea(d,d._dbSchema,ye),((ie=zc(Ia(0,(ie=d).idbdb,ye),ie._dbSchema)).add.length||ie.change.some(function(ve){return ve.add.length||ve.change.length}))&&!k)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),ge.close(),b=ge.version+1,k=!0,G(R());Sa(d,ye)}catch{}ei.push(d),ge.onversionchange=Pt(function(ve){h.vcFired=!0,d.on("versionchange").fire(ve)}),ge.onclose=Pt(function(ve){d.on("close").fire(ve)}),$&&(ie=d._deps,ye=q,ge=ie.indexedDB,ie=ie.IDBKeyRange,Wc(ge)||ye===ba||Uc(ge,ie).put({name:ye}).catch(O)),G()},j)}).catch(function(G){switch(G?.name){case"UnknownError":if(0<h.PR1398_maxLoop)return h.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),R();break;case"VersionError":if(0<b)return b=0,R()}return De.reject(G)})}var L,N=h.dbReadyResolve,W=null,$=!1;return De.race([y,(typeof navigator>"u"?De.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(G){function j(){return indexedDB.databases().finally(G)}L=setInterval(j,100),j()}).finally(function(){return clearInterval(L)}):Promise.resolve()).then(R)]).then(function(){return I(),h.onReadyBeingFired=[],De.resolve(Vc(function(){return d.on.ready.fire(d.vip)})).then(function G(){if(0<h.onReadyBeingFired.length){var j=h.onReadyBeingFired.reduce(be,O);return h.onReadyBeingFired=[],De.resolve(Vc(function(){return j(d.vip)})).then(G)}})}).finally(function(){h.openCanceller===y&&(h.onReadyBeingFired=null,h.isBeingOpened=!1)}).catch(function(G){h.dbOpenError=G;try{W&&W.abort()}catch{}return y===h.openCanceller&&d._close(),Dt(G)}).finally(function(){h.openComplete=!0,N()}).then(function(){var G;return $&&(G={},d.tables.forEach(function(j){j.schema.indexes.forEach(function(q){q.name&&(G["idb://".concat(d.name,"/").concat(j.name,"/").concat(q.name)]=new tn(-1/0,[[[]]]))}),G["idb://".concat(d.name,"/").concat(j.name,"/")]=G["idb://".concat(d.name,"/").concat(j.name,"/:dels")]=new tn(-1/0,[[[]]])}),Lr(Vi).fire(G),Xc(G,!0)),d})}function Qc(d){function h(k){return d.next(k)}var g=b(h),y=b(function(k){return d.throw(k)});function b(k){return function(L){var R=k(L),L=R.value;return R.done?L:L&&typeof L.then=="function"?L.then(g,y):a(L)?Promise.all(L).then(g,y):g(L)}}return b(h)()}function Ta(d,h,g){for(var y=a(d)?d.slice():[d],b=0;b<g;++b)y.push(h);return y}var j_={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(d){return r(r({},d),{table:function(h){var g=d.table(h),y=g.schema,b={},k=[];function I($,G,j){var q=Ki($),K=b[q]=b[q]||[],H=$==null?0:typeof $=="string"?1:$.length,X=0<G,X=r(r({},j),{name:X?"".concat(q,"(virtual-from:").concat(j.name,")"):j.name,lowLevelIndex:j,isVirtual:X,keyTail:G,keyLength:H,extractKey:jc($),unique:!X&&j.unique});return K.push(X),X.isPrimaryKey||k.push(X),1<H&&I(H===2?$[0]:$.slice(0,H-1),G+1,j),K.sort(function(ne,se){return ne.keyTail-se.keyTail}),X}h=I(y.primaryKey.keyPath,0,y.primaryKey),b[":id"]=[h];for(var R=0,L=y.indexes;R<L.length;R++){var N=L[R];I(N.keyPath,0,N)}function W($){var G,j=$.query.index;return j.isVirtual?r(r({},$),{query:{index:j.lowLevelIndex,range:(G=$.query.range,j=j.keyTail,{type:G.type===1?2:G.type,lower:Ta(G.lower,G.lowerOpen?d.MAX_KEY:d.MIN_KEY,j),lowerOpen:!0,upper:Ta(G.upper,G.upperOpen?d.MIN_KEY:d.MAX_KEY,j),upperOpen:!0})}}):$}return r(r({},g),{schema:r(r({},y),{primaryKey:h,indexes:k,getIndexByKeyPath:function($){return($=b[Ki($)])&&$[0]}}),count:function($){return g.count(W($))},query:function($){return g.query(W($))},openCursor:function($){var G=$.query.index,j=G.keyTail,q=G.isVirtual,K=G.keyLength;return q?g.openCursor(W($)).then(function(X){return X&&H(X)}):g.openCursor($);function H(X){return Object.create(X,{continue:{value:function(ne){ne!=null?X.continue(Ta(ne,$.reverse?d.MAX_KEY:d.MIN_KEY,j)):$.unique?X.continue(X.key.slice(0,K).concat($.reverse?d.MIN_KEY:d.MAX_KEY,j)):X.continue()}},continuePrimaryKey:{value:function(ne,se){X.continuePrimaryKey(Ta(ne,d.MAX_KEY,j),se)}},primaryKey:{get:function(){return X.primaryKey}},key:{get:function(){var ne=X.key;return K===1?ne[0]:ne.slice(0,K)}},value:{get:function(){return X.value}}})}}})}})}};function Jc(d,h,g,y){return g=g||{},y=y||"",o(d).forEach(function(b){var k,I,R;f(h,b)?(k=d[b],I=h[b],typeof k=="object"&&typeof I=="object"&&k&&I?(R=Ce(k))!==Ce(I)?g[y+b]=h[b]:R==="Object"?Jc(k,I,g,y+b+"."):k!==I&&(g[y+b]=h[b]):k!==I&&(g[y+b]=h[b])):g[y+b]=void 0}),o(h).forEach(function(b){f(d,b)||(g[y+b]=h[b])}),g}function Zc(d,h){return h.type==="delete"?h.keys:h.keys||h.values.map(d.extractKey)}var N_={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(d){return r(r({},d),{table:function(h){var g=d.table(h),y=g.schema.primaryKey;return r(r({},g),{mutate:function(b){var k=Re.trans,I=k.table(h).hook,R=I.deleting,L=I.creating,N=I.updating;switch(b.type){case"add":if(L.fire===O)break;return k._promise("readwrite",function(){return W(b)},!0);case"put":if(L.fire===O&&N.fire===O)break;return k._promise("readwrite",function(){return W(b)},!0);case"delete":if(R.fire===O)break;return k._promise("readwrite",function(){return W(b)},!0);case"deleteRange":if(R.fire===O)break;return k._promise("readwrite",function(){return(function $(G,j,q){return g.query({trans:G,values:!1,query:{index:y,range:j},limit:q}).then(function(K){var H=K.result;return W({type:"delete",keys:H,trans:G}).then(function(X){return 0<X.numFailures?Promise.reject(X.failures[0]):H.length<q?{failures:[],numFailures:0,lastResult:void 0}:$(G,r(r({},j),{lower:H[H.length-1],lowerOpen:!0}),q)})})})(b.trans,b.range,1e4)},!0)}return g.mutate(b);function W($){var G,j,q,K=Re.trans,H=$.keys||Zc(y,$);if(!H)throw new Error("Keys missing");return($=$.type==="add"||$.type==="put"?r(r({},$),{keys:H}):r({},$)).type!=="delete"&&($.values=s([],$.values)),$.keys&&($.keys=s([],$.keys)),G=g,q=H,((j=$).type==="add"?Promise.resolve([]):G.getMany({trans:j.trans,keys:q,cache:"immutable"})).then(function(X){var ne=H.map(function(se,ie){var ge,_e,ye,ve=X[ie],Oe={onerror:null,onsuccess:null};return $.type==="delete"?R.fire.call(Oe,se,ve,K):$.type==="add"||ve===void 0?(ge=L.fire.call(Oe,se,$.values[ie],K),se==null&&ge!=null&&($.keys[ie]=se=ge,y.outbound||T($.values[ie],y.keyPath,se))):(ge=Jc(ve,$.values[ie]),(_e=N.fire.call(Oe,ge,se,ve,K))&&(ye=$.values[ie],Object.keys(_e).forEach(function(Ae){f(ye,Ae)?ye[Ae]=_e[Ae]:T(ye,Ae,_e[Ae])}))),Oe});return g.mutate($).then(function(se){for(var ie=se.failures,ge=se.results,_e=se.numFailures,se=se.lastResult,ye=0;ye<H.length;++ye){var ve=(ge||H)[ye],Oe=ne[ye];ve==null?Oe.onerror&&Oe.onerror(ie[ye]):Oe.onsuccess&&Oe.onsuccess($.type==="put"&&X[ye]?$.values[ye]:ve)}return{failures:ie,results:ge,numFailures:_e,lastResult:se}}).catch(function(se){return ne.forEach(function(ie){return ie.onerror&&ie.onerror(se)}),Promise.reject(se)})})}}})}})}};function sh(d,h,g){try{if(!h||h.keys.length<d.length)return null;for(var y=[],b=0,k=0;b<h.keys.length&&k<d.length;++b)rt(h.keys[b],d[k])===0&&(y.push(g?pe(h.values[b]):h.values[b]),++k);return y.length===d.length?y:null}catch{return null}}var z_={stack:"dbcore",level:-1,create:function(d){return{table:function(h){var g=d.table(h);return r(r({},g),{getMany:function(y){if(!y.cache)return g.getMany(y);var b=sh(y.keys,y.trans._cache,y.cache==="clone");return b?De.resolve(b):g.getMany(y).then(function(k){return y.trans._cache={keys:y.keys,values:y.cache==="clone"?pe(k):k},k})},mutate:function(y){return y.type!=="add"&&(y.trans._cache=null),g.mutate(y)}})}}}};function ih(d,h){return d.trans.mode==="readonly"&&!!d.subscr&&!d.trans.explicit&&d.trans.db._options.cache!=="disabled"&&!h.schema.primaryKey.outbound}function oh(d,h){switch(d){case"query":return h.values&&!h.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var q_={stack:"dbcore",level:0,name:"Observability",create:function(d){var h=d.schema.name,g=new tn(d.MIN_KEY,d.MAX_KEY);return r(r({},d),{transaction:function(y,b,k){if(Re.subscr&&b!=="readonly")throw new re.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Re.querier));return d.transaction(y,b,k)},table:function(y){var b=d.table(y),k=b.schema,I=k.primaryKey,$=k.indexes,R=I.extractKey,L=I.outbound,N=I.autoIncrement&&$.filter(function(j){return j.compound&&j.keyPath.includes(I.keyPath)}),W=r(r({},b),{mutate:function(j){function q(Ae){return Ae="idb://".concat(h,"/").concat(y,"/").concat(Ae),se[Ae]||(se[Ae]=new tn)}var K,H,X,ne=j.trans,se=j.mutatedParts||(j.mutatedParts={}),ie=q(""),ge=q(":dels"),_e=j.type,Oe=j.type==="deleteRange"?[j.range]:j.type==="delete"?[j.keys]:j.values.length<50?[Zc(I,j).filter(function(Ae){return Ae}),j.values]:[],ye=Oe[0],ve=Oe[1],Oe=j.trans._cache;return a(ye)?(ie.addKeys(ye),(Oe=_e==="delete"||ye.length===ve.length?sh(ye,Oe):null)||ge.addKeys(ye),(Oe||ve)&&(K=q,H=Oe,X=ve,k.indexes.forEach(function(Ae){var Te=K(Ae.name||"");function Xe(Ke){return Ke!=null?Ae.extractKey(Ke):null}function at(Ke){return Ae.multiEntry&&a(Ke)?Ke.forEach(function(Ot){return Te.addKey(Ot)}):Te.addKey(Ke)}(H||X).forEach(function(Ke,nn){var He=H&&Xe(H[nn]),nn=X&&Xe(X[nn]);rt(He,nn)!==0&&(He!=null&&at(He),nn!=null&&at(nn))})}))):ye?(ve={from:(ve=ye.lower)!==null&&ve!==void 0?ve:d.MIN_KEY,to:(ve=ye.upper)!==null&&ve!==void 0?ve:d.MAX_KEY},ge.add(ve),ie.add(ve)):(ie.add(g),ge.add(g),k.indexes.forEach(function(Ae){return q(Ae.name).add(g)})),b.mutate(j).then(function(Ae){return!ye||j.type!=="add"&&j.type!=="put"||(ie.addKeys(Ae.results),N&&N.forEach(function(Te){for(var Xe=j.values.map(function(He){return Te.extractKey(He)}),at=Te.keyPath.findIndex(function(He){return He===I.keyPath}),Ke=0,Ot=Ae.results.length;Ke<Ot;++Ke)Xe[Ke][at]=Ae.results[Ke];q(Te.name).addKeys(Xe)})),ne.mutatedParts=Ma(ne.mutatedParts||{},se),Ae})}}),$=function(q){var K=q.query,q=K.index,K=K.range;return[q,new tn((q=K.lower)!==null&&q!==void 0?q:d.MIN_KEY,(K=K.upper)!==null&&K!==void 0?K:d.MAX_KEY)]},G={get:function(j){return[I,new tn(j.key)]},getMany:function(j){return[I,new tn().addKeys(j.keys)]},count:$,query:$,openCursor:$};return o(G).forEach(function(j){W[j]=function(q){var K=Re.subscr,H=!!K,X=ih(Re,b)&&oh(j,q)?q.obsSet={}:K;if(H){var ne=function(ve){return ve="idb://".concat(h,"/").concat(y,"/").concat(ve),X[ve]||(X[ve]=new tn)},se=ne(""),ie=ne(":dels"),K=G[j](q),H=K[0],K=K[1];if((j==="query"&&H.isPrimaryKey&&!q.values?ie:ne(H.name||"")).add(K),!H.isPrimaryKey){if(j!=="count"){var ge=j==="query"&&L&&q.values&&b.query(r(r({},q),{values:!1}));return b[j].apply(this,arguments).then(function(ve){if(j==="query"){if(L&&q.values)return ge.then(function(Xe){return Xe=Xe.result,se.addKeys(Xe),ve});var Oe=q.values?ve.result.map(R):ve.result;(q.values?se:ie).addKeys(Oe)}else if(j==="openCursor"){var Ae=ve,Te=q.values;return Ae&&Object.create(Ae,{key:{get:function(){return ie.addKey(Ae.primaryKey),Ae.key}},primaryKey:{get:function(){var Xe=Ae.primaryKey;return ie.addKey(Xe),Xe}},value:{get:function(){return Te&&se.addKey(Ae.primaryKey),Ae.value}}})}return ve})}ie.add(g)}}return b[j].apply(this,arguments)}}),W}})}};function ah(d,h,g){if(g.numFailures===0)return h;if(h.type==="deleteRange")return null;var y=h.keys?h.keys.length:"values"in h&&h.values?h.values.length:1;return g.numFailures===y?null:(h=r({},h),a(h.keys)&&(h.keys=h.keys.filter(function(b,k){return!(k in g.failures)})),"values"in h&&a(h.values)&&(h.values=h.values.filter(function(b,k){return!(k in g.failures)})),h)}function eu(d,h){return g=d,((y=h).lower===void 0||(y.lowerOpen?0<rt(g,y.lower):0<=rt(g,y.lower)))&&(d=d,(h=h).upper===void 0||(h.upperOpen?rt(d,h.upper)<0:rt(d,h.upper)<=0));var g,y}function lh(d,h,G,y,b,k){if(!G||G.length===0)return d;var I=h.query.index,R=I.multiEntry,L=h.query.range,N=y.schema.primaryKey.extractKey,W=I.extractKey,$=(I.lowLevelIndex||I).extractKey,G=G.reduce(function(j,q){var K=j,H=[];if(q.type==="add"||q.type==="put")for(var X=new tn,ne=q.values.length-1;0<=ne;--ne){var se,ie=q.values[ne],ge=N(ie);X.hasKey(ge)||(se=W(ie),(R&&a(se)?se.some(function(Ae){return eu(Ae,L)}):eu(se,L))&&(X.addKey(ge),H.push(ie)))}switch(q.type){case"add":var _e=new tn().addKeys(h.values?j.map(function(Te){return N(Te)}):j),K=j.concat(h.values?H.filter(function(Te){return Te=N(Te),!_e.hasKey(Te)&&(_e.addKey(Te),!0)}):H.map(function(Te){return N(Te)}).filter(function(Te){return!_e.hasKey(Te)&&(_e.addKey(Te),!0)}));break;case"put":var ye=new tn().addKeys(q.values.map(function(Te){return N(Te)}));K=j.filter(function(Te){return!ye.hasKey(h.values?N(Te):Te)}).concat(h.values?H:H.map(function(Te){return N(Te)}));break;case"delete":var ve=new tn().addKeys(q.keys);K=j.filter(function(Te){return!ve.hasKey(h.values?N(Te):Te)});break;case"deleteRange":var Oe=q.range;K=j.filter(function(Te){return!eu(N(Te),Oe)})}return K},d);return G===d?d:(G.sort(function(j,q){return rt($(j),$(q))||rt(N(j),N(q))}),h.limit&&h.limit<1/0&&(G.length>h.limit?G.length=h.limit:d.length===h.limit&&G.length<h.limit&&(b.dirty=!0)),k?Object.freeze(G):G)}function ch(d,h){return rt(d.lower,h.lower)===0&&rt(d.upper,h.upper)===0&&!!d.lowerOpen==!!h.lowerOpen&&!!d.upperOpen==!!h.upperOpen}function U_(d,h){return(function(g,y,b,k){if(g===void 0)return y!==void 0?-1:0;if(y===void 0)return 1;if((y=rt(g,y))===0){if(b&&k)return 0;if(b)return 1;if(k)return-1}return y})(d.lower,h.lower,d.lowerOpen,h.lowerOpen)<=0&&0<=(function(g,y,b,k){if(g===void 0)return y!==void 0?1:0;if(y===void 0)return-1;if((y=rt(g,y))===0){if(b&&k)return 0;if(b)return-1;if(k)return 1}return y})(d.upper,h.upper,d.upperOpen,h.upperOpen)}function W_(d,h,g,y){d.subscribers.add(g),y.addEventListener("abort",function(){var b,k;d.subscribers.delete(g),d.subscribers.size===0&&(b=d,k=h,setTimeout(function(){b.subscribers.size===0&&te(k,b)},3e3))})}var V_={stack:"dbcore",level:0,name:"Cache",create:function(d){var h=d.schema.name;return r(r({},d),{transaction:function(g,y,b){var k,I,R=d.transaction(g,y,b);return y==="readwrite"&&(I=(k=new AbortController).signal,b=function(L){return function(){if(k.abort(),y==="readwrite"){for(var N=new Set,W=0,$=g;W<$.length;W++){var G=$[W],j=fs["idb://".concat(h,"/").concat(G)];if(j){var q=d.table(G),K=j.optimisticOps.filter(function(Te){return Te.trans===R});if(R._explicit&&L&&R.mutatedParts)for(var H=0,X=Object.values(j.queries.query);H<X.length;H++)for(var ne=0,se=(_e=X[H]).slice();ne<se.length;ne++)Kc((ye=se[ne]).obsSet,R.mutatedParts)&&(te(_e,ye),ye.subscribers.forEach(function(Te){return N.add(Te)}));else if(0<K.length){j.optimisticOps=j.optimisticOps.filter(function(Te){return Te.trans!==R});for(var ie=0,ge=Object.values(j.queries.query);ie<ge.length;ie++)for(var _e,ye,ve,Oe=0,Ae=(_e=ge[ie]).slice();Oe<Ae.length;Oe++)(ye=Ae[Oe]).res!=null&&R.mutatedParts&&(L&&!ye.dirty?(ve=Object.isFrozen(ye.res),ve=lh(ye.res,ye.req,K,q,ye,ve),ye.dirty?(te(_e,ye),ye.subscribers.forEach(function(Te){return N.add(Te)})):ve!==ye.res&&(ye.res=ve,ye.promise=De.resolve({result:ve}))):(ye.dirty&&te(_e,ye),ye.subscribers.forEach(function(Te){return N.add(Te)})))}}}N.forEach(function(Te){return Te()})}}},R.addEventListener("abort",b(!1),{signal:I}),R.addEventListener("error",b(!1),{signal:I}),R.addEventListener("complete",b(!0),{signal:I})),R},table:function(g){var y=d.table(g),b=y.schema.primaryKey;return r(r({},y),{mutate:function(k){var I=Re.trans;if(b.outbound||I.db._options.cache==="disabled"||I.explicit||I.idbtrans.mode!=="readwrite")return y.mutate(k);var R=fs["idb://".concat(h,"/").concat(g)];return R?(I=y.mutate(k),k.type!=="add"&&k.type!=="put"||!(50<=k.values.length||Zc(b,k).some(function(L){return L==null}))?(R.optimisticOps.push(k),k.mutatedParts&&Da(k.mutatedParts),I.then(function(L){0<L.numFailures&&(te(R.optimisticOps,k),(L=ah(0,k,L))&&R.optimisticOps.push(L),k.mutatedParts&&Da(k.mutatedParts))}),I.catch(function(){te(R.optimisticOps,k),k.mutatedParts&&Da(k.mutatedParts)})):I.then(function(L){var N=ah(0,r(r({},k),{values:k.values.map(function(W,$){var G;return L.failures[$]?W:(W=(G=b.keyPath)!==null&&G!==void 0&&G.includes(".")?pe(W):r({},W),T(W,b.keyPath,L.results[$]),W)})}),L);R.optimisticOps.push(N),queueMicrotask(function(){return k.mutatedParts&&Da(k.mutatedParts)})}),I):y.mutate(k)},query:function(k){if(!ih(Re,y)||!oh("query",k))return y.query(k);var I=((N=Re.trans)===null||N===void 0?void 0:N.db._options.cache)==="immutable",$=Re,R=$.requery,L=$.signal,N=(function(q,K,H,X){var ne=fs["idb://".concat(q,"/").concat(K)];if(!ne)return[];if(!(K=ne.queries[H]))return[null,!1,ne,null];var se=K[(X.query?X.query.index.name:null)||""];if(!se)return[null,!1,ne,null];switch(H){case"query":var ie=se.find(function(ge){return ge.req.limit===X.limit&&ge.req.values===X.values&&ch(ge.req.query.range,X.query.range)});return ie?[ie,!0,ne,se]:[se.find(function(ge){return("limit"in ge.req?ge.req.limit:1/0)>=X.limit&&(!X.values||ge.req.values)&&U_(ge.req.query.range,X.query.range)}),!1,ne,se];case"count":return ie=se.find(function(ge){return ch(ge.req.query.range,X.query.range)}),[ie,!!ie,ne,se]}})(h,g,"query",k),W=N[0],$=N[1],G=N[2],j=N[3];return W&&$?W.obsSet=k.obsSet:($=y.query(k).then(function(q){var K=q.result;if(W&&(W.res=K),I){for(var H=0,X=K.length;H<X;++H)Object.freeze(K[H]);Object.freeze(K)}else q.result=pe(K);return q}).catch(function(q){return j&&W&&te(j,W),Promise.reject(q)}),W={obsSet:k.obsSet,promise:$,subscribers:new Set,type:"query",req:k,dirty:!1},j?j.push(W):(j=[W],(G=G||(fs["idb://".concat(h,"/").concat(g)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[k.query.index.name||""]=j)),W_(W,j,R,L),W.promise.then(function(q){return{result:lh(q.result,k,G?.optimisticOps,y,W,I)}})}})}})}};function Ra(d,h){return new Proxy(d,{get:function(g,y,b){return y==="db"?h:Reflect.get(g,y,b)}})}var fr=(Tt.prototype.version=function(d){if(isNaN(d)||d<.1)throw new re.Type("Given version is not a positive number");if(d=Math.round(10*d)/10,this.idbdb||this._state.isBeingOpened)throw new re.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,d);var h=this._versions,g=h.filter(function(y){return y._cfg.version===d})[0];return g||(g=new this.Version(d),h.push(g),h.sort(R_),g.stores({}),this._state.autoSchema=!1,g)},Tt.prototype._whenReady=function(d){var h=this;return this.idbdb&&(this._state.openComplete||Re.letThrough||this._vip)?d():new De(function(g,y){if(h._state.openComplete)return y(new re.DatabaseClosed(h._state.dbOpenError));if(!h._state.isBeingOpened){if(!h._state.autoOpen)return void y(new re.DatabaseClosed);h.open().catch(O)}h._state.dbReadyPromise.then(g,y)}).then(d)},Tt.prototype.use=function(d){var h=d.stack,g=d.create,y=d.level,b=d.name;return b&&this.unuse({stack:h,name:b}),d=this._middlewares[h]||(this._middlewares[h]=[]),d.push({stack:h,create:g,level:y??10,name:b}),d.sort(function(k,I){return k.level-I.level}),this},Tt.prototype.unuse=function(d){var h=d.stack,g=d.name,y=d.create;return h&&this._middlewares[h]&&(this._middlewares[h]=this._middlewares[h].filter(function(b){return y?b.create!==y:!!g&&b.name!==g})),this},Tt.prototype.open=function(){var d=this;return cs(Et,function(){return B_(d)})},Tt.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var d=this._state,h=ei.indexOf(this);if(0<=h&&ei.splice(h,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}d.isBeingOpened||(d.dbReadyPromise=new De(function(g){d.dbReadyResolve=g}),d.openCanceller=new De(function(g,y){d.cancelOpen=y}))},Tt.prototype.close=function(g){var h=(g===void 0?{disableAutoOpen:!0}:g).disableAutoOpen,g=this._state;h?(g.isBeingOpened&&g.cancelOpen(new re.DatabaseClosed),this._close(),g.autoOpen=!1,g.dbOpenError=new re.DatabaseClosed):(this._close(),g.autoOpen=this._options.autoOpen||g.isBeingOpened,g.openComplete=!1,g.dbOpenError=null)},Tt.prototype.delete=function(d){var h=this;d===void 0&&(d={disableAutoOpen:!0});var g=0<arguments.length&&typeof arguments[0]!="object",y=this._state;return new De(function(b,k){function I(){h.close(d);var R=h._deps.indexedDB.deleteDatabase(h.name);R.onsuccess=Pt(function(){var L,N,W;L=h._deps,N=h.name,W=L.indexedDB,L=L.IDBKeyRange,Wc(W)||N===ba||Uc(W,L).delete(N).catch(O),b()}),R.onerror=Xn(k),R.onblocked=h._fireOnBlocked}if(g)throw new re.InvalidArgument("Invalid closeOptions argument to db.delete()");y.isBeingOpened?y.dbReadyPromise.then(I):I()})},Tt.prototype.backendDB=function(){return this.idbdb},Tt.prototype.isOpen=function(){return this.idbdb!==null},Tt.prototype.hasBeenClosed=function(){var d=this._state.dbOpenError;return d&&d.name==="DatabaseClosed"},Tt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Tt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Tt.prototype,"tables",{get:function(){var d=this;return o(this._allTables).map(function(h){return d._allTables[h]})},enumerable:!1,configurable:!0}),Tt.prototype.transaction=function(){var d=(function(h,g,y){var b=arguments.length;if(b<2)throw new re.InvalidArgument("Too few arguments");for(var k=new Array(b-1);--b;)k[b-1]=arguments[b];return y=k.pop(),[h,Q(k),y]}).apply(this,arguments);return this._transaction.apply(this,d)},Tt.prototype._transaction=function(d,h,g){var y=this,b=Re.trans;b&&b.db===this&&d.indexOf("!")===-1||(b=null);var k,I,R=d.indexOf("?")!==-1;d=d.replace("!","").replace("?","");try{if(I=h.map(function(N){if(N=N instanceof y.Table?N.name:N,typeof N!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return N}),d=="r"||d===Dc)k=Dc;else{if(d!="rw"&&d!=Tc)throw new re.InvalidArgument("Invalid transaction mode: "+d);k=Tc}if(b){if(b.mode===Dc&&k===Tc){if(!R)throw new re.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");b=null}b&&I.forEach(function(N){if(b&&b.storeNames.indexOf(N)===-1){if(!R)throw new re.SubTransaction("Table "+N+" not included in parent transaction.");b=null}}),R&&b&&!b.active&&(b=null)}}catch(N){return b?b._promise(null,function(W,$){$(N)}):Dt(N)}var L=(function N(W,$,G,j,q){return De.resolve().then(function(){var K=Re.transless||Re,H=W._createTransaction($,G,W._dbSchema,j);if(H.explicit=!0,K={trans:H,transless:K},j)H.idbtrans=j.idbtrans;else try{H.create(),H.idbtrans._explicit=!0,W._state.PR1398_maxLoop=3}catch(se){return se.name===ae.InvalidState&&W.isOpen()&&0<--W._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),W.close({disableAutoOpen:!1}),W.open().then(function(){return N(W,$,G,null,q)})):Dt(se)}var X,ne=Le(q);return ne&&Zs(),K=De.follow(function(){var se;(X=q.call(H,H))&&(ne?(se=Rr.bind(null,null),X.then(se,se)):typeof X.next=="function"&&typeof X.throw=="function"&&(X=Qc(X)))},K),(X&&typeof X.then=="function"?De.resolve(X).then(function(se){return H.active?se:Dt(new re.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):K.then(function(){return X})).then(function(se){return j&&H._resolve(),H._completion.then(function(){return se})}).catch(function(se){return H._reject(se),Dt(se)})})}).bind(null,this,k,I,b,g);return b?b._promise(k,L,"lock"):Re.trans?cs(Re.transless,function(){return y._whenReady(L)}):this._whenReady(L)},Tt.prototype.table=function(d){if(!f(this._allTables,d))throw new re.InvalidTable("Table ".concat(d," does not exist"));return this._allTables[d]},Tt);function Tt(d,h){var g=this;this._middlewares={},this.verno=0;var y=Tt.dependencies;this._options=h=r({addons:Tt.addons,autoOpen:!0,indexedDB:y.indexedDB,IDBKeyRange:y.IDBKeyRange,cache:"cloned"},h),this._deps={indexedDB:h.indexedDB,IDBKeyRange:h.IDBKeyRange},y=h.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var b,k,I,R,L,N={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:O,dbReadyPromise:null,cancelOpen:O,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:h.autoOpen};N.dbReadyPromise=new De(function($){N.dbReadyResolve=$}),N.openCanceller=new De(function($,G){N.cancelOpen=G}),this._state=N,this.name=d,this.on=zi(this,"populate","blocked","versionchange","close",{ready:[be,O]}),this.once=function($,G){var j=function(){for(var q=[],K=0;K<arguments.length;K++)q[K]=arguments[K];g.on($).unsubscribe(j),G.apply(g,q)};return g.on($,j)},this.on.ready.subscribe=P(this.on.ready.subscribe,function($){return function(G,j){Tt.vip(function(){var q,K=g._state;K.openComplete?(K.dbOpenError||De.resolve().then(G),j&&$(G)):K.onReadyBeingFired?(K.onReadyBeingFired.push(G),j&&$(G)):($(G),q=g,j||$(function H(){q.on.ready.unsubscribe(G),q.on.ready.unsubscribe(H)}))})}}),this.Collection=(b=this,qi(A_.prototype,function(X,H){this.db=b;var j=jf,q=null;if(H)try{j=H()}catch(ne){q=ne}var K=X._ctx,H=K.table,X=H.hook.reading.fire;this._ctx={table:H,index:K.index,isPrimKey:!K.index||H.schema.primKey.keyPath&&K.index===H.schema.primKey.name,range:j,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:q,or:K.or,valueMapper:X!==F?X:null}})),this.Table=(k=this,qi(Uf.prototype,function($,G,j){this.db=k,this._tx=j,this.name=$,this.schema=G,this.hook=k._allTables[$]?k._allTables[$].hook:zi(null,{creating:[ue,O],reading:[J,F],updating:[Ie,O],deleting:[ce,O]})})),this.Transaction=(I=this,qi(O_.prototype,function($,G,j,q,K){var H=this;$!=="readonly"&&G.forEach(function(X){X=(X=j[X])===null||X===void 0?void 0:X.yProps,X&&(G=G.concat(X.map(function(ne){return ne.updatesTable})))}),this.db=I,this.mode=$,this.storeNames=G,this.schema=j,this.chromeTransactionDurability=q,this.idbtrans=null,this.on=zi(this,"complete","error","abort"),this.parent=K||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new De(function(X,ne){H._resolve=X,H._reject=ne}),this._completion.then(function(){H.active=!1,H.on.complete.fire()},function(X){var ne=H.active;return H.active=!1,H.on.error.fire(X),H.parent?H.parent._reject(X):ne&&H.idbtrans&&H.idbtrans.abort(),Dt(X)})})),this.Version=(R=this,qi(L_.prototype,function($){this.db=R,this._cfg={version:$,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(L=this,qi(Gf.prototype,function($,G,j){if(this.db=L,this._ctx={table:$,index:G===":id"?null:G,or:j},this._cmp=this._ascending=rt,this._descending=function(q,K){return rt(K,q)},this._max=function(q,K){return 0<rt(q,K)?q:K},this._min=function(q,K){return rt(q,K)<0?q:K},this._IDBKeyRange=L._deps.IDBKeyRange,!this._IDBKeyRange)throw new re.MissingAPI})),this.on("versionchange",function($){0<$.newVersion?console.warn("Another connection wants to upgrade database '".concat(g.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(g.name,"'. Closing db now to resume the delete request.")),g.close({disableAutoOpen:!1})}),this.on("blocked",function($){!$.newVersion||$.newVersion<$.oldVersion?console.warn("Dexie.delete('".concat(g.name,"') was blocked")):console.warn("Upgrade '".concat(g.name,"' blocked by other connection holding version ").concat($.oldVersion/10))}),this._maxKey=Hi(h.IDBKeyRange),this._createTransaction=function($,G,j,q){return new g.Transaction($,G,j,g._options.chromeTransactionDurability,q)},this._fireOnBlocked=function($){g.on("blocked").fire($),ei.filter(function(G){return G.name===g.name&&G!==g&&!G._state.vcFired}).map(function(G){return G.on("versionchange").fire($)})},this.use(z_),this.use(V_),this.use(q_),this.use(j_),this.use(N_);var W=new Proxy(this,{get:function($,G,j){if(G==="_vip")return!0;if(G==="table")return function(K){return Ra(g.table(K),W)};var q=Reflect.get($,G,j);return q instanceof Uf?Ra(q,W):G==="tables"?q.map(function(K){return Ra(K,W)}):G==="_createTransaction"?function(){return Ra(q.apply(this,arguments),W)}:q}});this.vip=W,y.forEach(function($){return $(g)})}var $a,Rn=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",H_=(tu.prototype.subscribe=function(d,h,g){return this._subscribe(d&&typeof d!="function"?d:{next:d,error:h,complete:g})},tu.prototype[Rn]=function(){return this},tu);function tu(d){this._subscribe=d}try{$a={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch{$a={indexedDB:null,IDBKeyRange:null}}function uh(d){var h,g=!1,y=new H_(function(b){var k=Le(d),I,R=!1,L={},N={},W={get closed(){return R},unsubscribe:function(){R||(R=!0,I&&I.abort(),$&&Lr.storagemutated.unsubscribe(j))}};b.start&&b.start(W);var $=!1,G=function(){return Mc(q)},j=function(K){Ma(L,K),Kc(N,L)&&G()},q=function(){var K,H,X;!R&&$a.indexedDB&&(L={},K={},I&&I.abort(),I=new AbortController,X=(function(ne){var se=Qs();try{k&&Zs();var ie=Tr(d,ne);return ie=k?ie.finally(Rr):ie}finally{se&&Js()}})(H={subscr:K,signal:I.signal,requery:G,querier:d,trans:null}),Promise.resolve(X).then(function(ne){g=!0,h=ne,R||H.signal.aborted||(L={},(function(se){for(var ie in se)if(f(se,ie))return;return 1})(N=K)||$||(Lr(Vi,j),$=!0),Mc(function(){return!R&&b.next&&b.next(ne)}))},function(ne){g=!1,["DatabaseClosedError","AbortError"].includes(ne?.name)||R||Mc(function(){R||b.error&&b.error(ne)})}))};return setTimeout(G,0),W});return y.hasValue=function(){return g},y.getValue=function(){return h},y}var hs=fr;function nu(d){var h=Br;try{Br=!0,Lr.storagemutated.fire(d),Xc(d,!0)}finally{Br=h}}p(hs,r(r({},nt),{delete:function(d){return new hs(d,{addons:[]}).delete()},exists:function(d){return new hs(d,{addons:[]}).open().then(function(h){return h.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(d){try{return h=hs.dependencies,g=h.indexedDB,h=h.IDBKeyRange,(Wc(g)?Promise.resolve(g.databases()).then(function(y){return y.map(function(b){return b.name}).filter(function(b){return b!==ba})}):Uc(g,h).toCollection().primaryKeys()).then(d)}catch{return Dt(new re.MissingAPI)}var h,g},defineClass:function(){return function(d){l(this,d)}},ignoreTransaction:function(d){return Re.trans?cs(Re.transless,d):d()},vip:Vc,async:function(d){return function(){try{var h=Qc(d.apply(this,arguments));return h&&typeof h.then=="function"?h:De.resolve(h)}catch(g){return Dt(g)}}},spawn:function(d,h,g){try{var y=Qc(d.apply(g,h||[]));return y&&typeof y.then=="function"?y:De.resolve(y)}catch(b){return Dt(b)}},currentTransaction:{get:function(){return Re.trans||null}},waitFor:function(d,h){return h=De.resolve(typeof d=="function"?hs.ignoreTransaction(d):d).timeout(h||6e4),Re.trans?Re.trans.waitFor(h):h},Promise:De,debug:{get:function(){return de},set:function(d){Ne(d)}},derive:_,extend:l,props:p,override:P,Events:zi,on:Lr,liveQuery:uh,extendObservabilitySet:Ma,getByKeyPath:A,setByKeyPath:T,delByKeyPath:function(d,h){typeof h=="string"?T(d,h,void 0):"length"in h&&[].map.call(h,function(g){T(d,g,void 0)})},shallowClone:B,deepClone:pe,getObjectDiff:Jc,cmp:rt,asap:D,minKey:-1/0,addons:[],connections:ei,errnames:ae,dependencies:$a,cache:fs,semVer:"4.2.0",version:"4.2.0".split(".").map(function(d){return parseInt(d)}).reduce(function(d,h,g){return d+h/Math.pow(10,2*g)})})),hs.maxKey=Hi(hs.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Lr(Vi,function(d){Br||(d=new CustomEvent(Fc,{detail:d}),Br=!0,dispatchEvent(d),Br=!1)}),addEventListener(Fc,function(d){d=d.detail,Br||nu(d)}));var si,Br=!1,dh=function(){};return typeof BroadcastChannel<"u"&&((dh=function(){(si=new BroadcastChannel(Fc)).onmessage=function(d){return d.data&&nu(d.data)}})(),typeof si.unref=="function"&&si.unref(),Lr(Vi,function(d){Br||si.postMessage(d)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(d){if(!fr.disableBfCache&&d.persisted){de&&console.debug("Dexie: handling persisted pagehide"),si?.close();for(var h=0,g=ei;h<g.length;h++)g[h].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(d){!fr.disableBfCache&&d.persisted&&(de&&console.debug("Dexie: handling persisted pageshow"),dh(),nu({all:new tn(-1/0,[[]])}))})),De.rejectionMapper=function(d,h){return!d||d instanceof We||d instanceof TypeError||d instanceof SyntaxError||!d.name||!Fe[d.name]?d:(h=new Fe[d.name](h||d.message,d),"stack"in d&&v(h,"stack",{get:function(){return this.inner.stack}}),h)},Ne(de),r(fr,Object.freeze({__proto__:null,Dexie:fr,liveQuery:uh,Entity:Nf,cmp:rt,PropModification:Ui,replacePrefix:function(d,h){return new Ui({replacePrefix:[d,h]})},add:function(d){return new Ui({add:d})},remove:function(d){return new Ui({remove:d})},default:fr,RangeSet:tn,mergeRanges:Gi,rangesOverlap:eh}),{default:fr}),fr})})(gl)),gl.exports}var bk=vk();const dd=kv(bk),_p=Symbol.for("Dexie"),Wo=globalThis[_p]||(globalThis[_p]=dd);if(dd.semVer!==Wo.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${dd.semVer} and ${Wo.semVer}`);const{liveQuery:AL,mergeRanges:IL,rangesOverlap:EL,RangeSet:OL,cmp:ML,Entity:DL,PropModification:TL,replacePrefix:RL,add:$L,remove:FL,DexieYProvider:LL}=Wo;class _k extends Wo{cards;card_lots;acquisitions;transactions;scans;decks;deck_cards;price_points;valuations;settings;scan_sale_links;constructor(){super("MtgTrackerDb"),this.version(1).stores({cards:"id, oracleId, name, set, setCode, number, lang, finish",transactions:"id, kind, cardId, source, externalRef, happenedAt",scans:"id, cardFingerprint, cardId, source, scannedAt",decks:"id, platform, name, importedAt",deck_cards:"id, [deckId+cardId], deckId, cardId",price_points:"id, cardId, provider, asOf",valuations:"id, asOf",settings:"k"}),this.version(2).stores({cards:"id, oracleId, name, set, setCode, number, lang, finish, createdAt, updatedAt",transactions:"id, kind, cardId, source, externalRef, happenedAt, createdAt, updatedAt",scans:"id, cardFingerprint, cardId, source, scannedAt, createdAt, updatedAt",decks:"id, platform, name, importedAt, createdAt, updatedAt",deck_cards:"id, [deckId+cardId], deckId, cardId, createdAt",price_points:"id, cardId, provider, asOf, createdAt",valuations:"id, asOf, createdAt",settings:"k, createdAt, updatedAt",scan_sale_links:"id, scanId, transactionId, matchedAt, createdAt"}).upgrade(async e=>{const n=new Date;await e.table("cards").toCollection().modify(r=>{r.createdAt=r.createdAt||n,r.updatedAt=r.updatedAt||n}),await e.table("transactions").toCollection().modify(r=>{r.createdAt=r.createdAt||n,r.updatedAt=r.updatedAt||n}),await e.table("scans").toCollection().modify(r=>{r.createdAt=r.createdAt||n,r.updatedAt=r.updatedAt||n}),await e.table("decks").toCollection().modify(r=>{r.createdAt=r.createdAt||n,r.updatedAt=r.updatedAt||n}),await e.table("deck_cards").toCollection().modify(r=>{r.createdAt=r.createdAt||n}),await e.table("price_points").toCollection().modify(r=>{r.createdAt=r.createdAt||n}),await e.table("valuations").toCollection().modify(r=>{r.createdAt=r.createdAt||n}),await e.table("settings").toCollection().modify(r=>{r.createdAt=r.createdAt||n,r.updatedAt=r.updatedAt||n})}),this.version(3).stores({cards:"id, oracleId, name, set, setCode, number, lang, finish, createdAt, updatedAt",transactions:"id, kind, cardId, source, externalRef, happenedAt, createdAt, updatedAt",scans:"id, cardFingerprint, cardId, source, scannedAt, createdAt, updatedAt",decks:"id, platform, name, importedAt, createdAt, updatedAt",deck_cards:"id, [deckId+cardId], deckId, cardId, createdAt",price_points:"id, cardId, provider, currency, asOf, createdAt, [cardId+asOf], [provider+asOf]",valuations:"id, asOf, createdAt, [asOf+createdAt]",settings:"k, createdAt, updatedAt",scan_sale_links:"id, scanId, transactionId, matchedAt, createdAt"}),this.version(4).stores({cards:"id, oracleId, name, set, setCode, number, lang, finish, createdAt, updatedAt",card_lots:"id, cardId, acquisitionId, source, purchasedAt, disposedAt, createdAt, updatedAt, [cardId+purchasedAt], [acquisitionId+cardId]",transactions:"id, kind, cardId, lotId, source, externalRef, happenedAt, relatedTransactionId, createdAt, updatedAt, [lotId+kind]",scans:"id, cardFingerprint, cardId, lotId, source, scannedAt, boosterPackId, createdAt, updatedAt, [lotId+scannedAt]",decks:"id, platform, name, importedAt, createdAt, updatedAt",deck_cards:"id, deckId, cardId, lotId, addedAt, removedAt, createdAt, [deckId+cardId], [lotId+addedAt]",price_points:"id, cardId, provider, currency, asOf, source, createdAt, [cardId+asOf], [provider+asOf]",valuations:"id, asOf, createdAt, [asOf+createdAt]",settings:"k, createdAt, updatedAt",scan_sale_links:"id, scanId, transactionId, quantity, matchedAt, createdAt"}).upgrade(async e=>{}),this.version(5).stores({cards:"id, oracleId, name, set, setCode, number, lang, finish, createdAt, updatedAt",card_lots:"id, cardId, acquisitionId, source, purchasedAt, disposedAt, createdAt, updatedAt, externalRef, [cardId+purchasedAt], [acquisitionId+cardId], [externalRef]",transactions:"id, kind, cardId, lotId, source, externalRef, happenedAt, relatedTransactionId, createdAt, updatedAt, [lotId+kind]",scans:"id, cardFingerprint, cardId, lotId, source, scannedAt, boosterPackId, createdAt, updatedAt, [lotId+scannedAt]",decks:"id, platform, name, importedAt, createdAt, updatedAt",deck_cards:"id, deckId, cardId, lotId, addedAt, removedAt, createdAt, [deckId+cardId], [lotId+addedAt]",price_points:"id, cardId, provider, currency, asOf, source, createdAt, [cardId+asOf], [provider+asOf]",valuations:"id, asOf, createdAt, [asOf+createdAt]",settings:"k, createdAt, updatedAt",scan_sale_links:"id, scanId, transactionId, quantity, matchedAt, createdAt"}),this.version(6).stores({cards:"id, oracleId, name, set, setCode, number, lang, finish, layout, imageUrl, imageUrlBack, createdAt, updatedAt",card_lots:"id, cardId, acquisitionId, source, purchasedAt, disposedAt, createdAt, updatedAt, externalRef, [cardId+purchasedAt], [acquisitionId+cardId], [externalRef]",transactions:"id, kind, cardId, lotId, source, externalRef, happenedAt, relatedTransactionId, createdAt, updatedAt, [lotId+kind]",scans:"id, cardFingerprint, cardId, lotId, source, scannedAt, boosterPackId, createdAt, updatedAt, [lotId+scannedAt]",decks:"id, platform, name, importedAt, createdAt, updatedAt",deck_cards:"id, deckId, cardId, lotId, addedAt, removedAt, createdAt, [deckId+cardId], [lotId+addedAt]",price_points:"id, cardId, provider, currency, asOf, source, createdAt, [cardId+asOf], [provider+asOf]",valuations:"id, asOf, createdAt, [asOf+createdAt]",settings:"k, createdAt, updatedAt",scan_sale_links:"id, scanId, transactionId, quantity, matchedAt, createdAt"}).upgrade(async e=>{await e.table("cards").toCollection().modify(n=>{n.layout=n.layout||"normal"})}),this.version(7).stores({holdings:null}),this.version(8).stores({cards:"id, oracleId, name, set, setCode, number, lang, finish, layout, imageUrl, imageUrlBack, cardmarketId, createdAt, updatedAt",card_lots:"id, cardId, acquisitionId, source, purchasedAt, disposedAt, createdAt, updatedAt, externalRef, [cardId+purchasedAt], [acquisitionId+cardId], [externalRef]",transactions:"id, kind, cardId, lotId, source, externalRef, happenedAt, relatedTransactionId, createdAt, updatedAt, [lotId+kind]",scans:"id, cardFingerprint, cardId, lotId, source, scannedAt, boosterPackId, createdAt, updatedAt, [lotId+scannedAt]",decks:"id, platform, name, importedAt, createdAt, updatedAt",deck_cards:"id, deckId, cardId, lotId, addedAt, removedAt, createdAt, [deckId+cardId], [lotId+addedAt]",price_points:"id, cardId, provider, finish, date, currency, priceCent, asOf, createdAt, [cardId+date], [cardId+asOf], [provider+asOf], [cardId+provider+finish+date]",valuations:"id, asOf, createdAt, [asOf+createdAt]",settings:"k, createdAt, updatedAt",scan_sale_links:"id, scanId, transactionId, quantity, matchedAt, createdAt"}).upgrade(async e=>{const n=e.table("price_points"),r=await n.toArray();for(const s of r){if(s.priceCent==null&&s.price!=null){const f=typeof s.price=="number"&&s.price<1e3;s.priceCent=f?Math.round(s.price*100):s.price,delete s.price}let i=s.finish??"nonfoil",o=s.date??(s.asOf?new Date(s.asOf).toISOString().slice(0,10):void 0);const a=String(s.id??"").split(":"),l=a[2],c=a[3]??a[2];(l==="foil"||l==="etched")&&(i=l),/^\d{4}-\d{2}-\d{2}$/.test(c)&&(o=c);let u="scryfall";s.source&&(s.source==="mtgjson"?u="mtgjson.cardmarket":s.source==="cardmarket"?u="cardmarket.priceguide":u="scryfall"),s.finish=i,s.provider=u,s.date=o??new Date().toISOString().slice(0,10),s.currency=s.currency??"EUR",s.createdAt=s.createdAt??new Date,s.asOf=s.asOf??new Date,s.id=`${s.cardId}:${u}:${i}:${s.date}`,await n.put(s)}}),this.version(9).stores({acquisitions:"id, kind, source, externalRef, currency, happenedAt, createdAt, updatedAt, [source+externalRef]",cards:"id, oracleId, name, set, setCode, number, lang, finish, layout, imageUrl, imageUrlBack, cardmarketId, createdAt, updatedAt",card_lots:"id, cardId, acquisitionId, source, purchasedAt, disposedAt, createdAt, updatedAt, externalRef, [cardId+purchasedAt], [acquisitionId+purchasedAt], [externalRef]",transactions:"id, kind, cardId, lotId, source, externalRef, happenedAt, relatedTransactionId, createdAt, updatedAt, finish, language, [lotId+kind], [cardId+kind], [source+externalRef]",scans:"id, cardFingerprint, cardId, lotId, acquisitionId, source, scannedAt, boosterPackId, externalRef, createdAt, updatedAt, finish, language, [lotId+scannedAt], [acquisitionId+scannedAt], [cardId+scannedAt], [acquisitionId+externalRef]",deck_cards:"[deckId+cardId], lotId, addedAt, removedAt, createdAt, [lotId+addedAt]",price_points:"id, cardId, provider, finish, date, currency, priceCent, asOf, createdAt, [cardId+date], [cardId+asOf], [provider+asOf], [cardId+provider+finish+date]",valuations:"id, asOf, createdAt, [asOf+createdAt]",settings:"k, createdAt, updatedAt",scan_sale_links:"id, scanId, transactionId, quantity, matchedAt, createdAt, strategy, score"}).upgrade(async e=>{})}}let Eo=null;const wk=async()=>{if(Eo)return Eo;const t=new _k;return await t.open(),Eo=t,t},wp=wk(),fe=()=>{if(!Eo)throw new Error("Database not initialized");return Eo},Ut={async add(t){return await fe().cards.add(t)},async getById(t){return await fe().cards.get(t)},async getAll(){return await fe().cards.toArray()},async getByCardmarketIds(t){return await fe().cards.where("cardmarketId").anyOf(t).toArray()},async update(t,e){return await fe().cards.update(t,e)},async delete(t){await fe().cards.delete(t)}},kt={async add(t){return await fe().card_lots.add(t)},async getById(t){return await fe().card_lots.get(t)},async getAll(){return await fe().card_lots.toArray()},async getByCardId(t){return await fe().card_lots.where("cardId").equals(t).toArray()},async getByExternalRef(t){return await fe().card_lots.where("externalRef").equals(t).toArray()},async getByAcquisitionId(t){return await fe().card_lots.where("acquisitionId").equals(t).toArray()},async getActiveLotsByCardId(t){return await fe().card_lots.where("cardId").equals(t).and(e=>!e.disposedAt).toArray()},async update(t,e){return await fe().card_lots.update(t,e)},async delete(t){await fe().card_lots.delete(t)}},Jt={async add(t){return await fe().transactions.add(t)},async getById(t){return await fe().transactions.get(t)},async getAll(){return await fe().transactions.toArray()},async getByCardId(t){return await fe().transactions.where("cardId").equals(t).toArray()},async getByLotId(t){return await fe().transactions.where("lotId").equals(t).toArray()},async getByKind(t){return await fe().transactions.where("kind").equals(t).toArray()},async getBuyTransactionsByCardId(t){return await fe().transactions.where("cardId").equals(t).and(e=>e.kind==="BUY").toArray()},async getSellTransactionsByCardId(t){return await fe().transactions.where("cardId").equals(t).and(e=>e.kind==="SELL").toArray()},async getBySourceRef(t,e){return await fe().transactions.where("[source+externalRef]").equals([t,e]).toArray()},async update(t,e){return await fe().transactions.update(t,e)},async delete(t){await fe().transactions.delete(t)}},Rl={async add(t){return await fe().scans.add(t)},async getById(t){return await fe().scans.get(t)},async getAll(){return await fe().scans.toArray()},async getByCardId(t){return await fe().scans.where("cardId").equals(t).toArray()},async getByLotId(t){return await fe().scans.where("lotId").equals(t).toArray()},async getByAcquisitionId(t){return await fe().scans.where("acquisitionId").equals(t).toArray()},async getByAcquisitionAndExternalRef(t,e){return await fe().scans.where("[acquisitionId+externalRef]").equals([t,e]).first()},async update(t,e){return await fe().scans.update(t,e)},async delete(t){await fe().scans.delete(t)}},xp={async add(t){return await fe().decks.add(t)},async getById(t){return await fe().decks.get(t)},async getAll(){return await fe().decks.toArray()},async update(t,e){return await fe().decks.update(t,e)},async delete(t){await fe().decks.delete(t)}},kp={async add(t){if(!t.deckId)throw new Error("DeckCard deckId is required");if(!t.cardId)throw new Error("DeckCard cardId is required");if(typeof t.quantity!="number"||t.quantity<=0)throw new Error("DeckCard quantity must be a positive number");if(!t.role)throw new Error("DeckCard role is required");if(!t.addedAt)throw new Error("DeckCard addedAt is required");if(!t.createdAt)throw new Error("DeckCard createdAt is required");return await fe().deck_cards.add(t)},async getById(t){return await fe().deck_cards.get(t)},async getByDeckId(t){return await fe().deck_cards.where("deckId").equals(t).toArray()},async getByCardId(t){return await fe().deck_cards.where("cardId").equals(t).toArray()},async getByDeckIdAndCardId(t,e){return await fe().deck_cards.where("[deckId+cardId]").equals([t,e]).first()},async getByLotId(t){return await fe().deck_cards.where("lotId").equals(t).toArray()},async deleteByDeckId(t){await fe().deck_cards.where("deckId").equals(t).delete()},async update(t,e){return await fe().deck_cards.update(t,e)},async delete(t){await fe().deck_cards.delete(t)}},Ts={async add(t){return await fe().price_points.add(t)},async getById(t){return await fe().price_points.get(t)},async getByCardId(t){return await fe().price_points.where("cardId").equals(t).toArray()},async getByCardIdAndDate(t,e){return await fe().price_points.where("[cardId+date]").equals([t,e]).toArray()},async getByCardIdAndProviderAndFinishAndDate(t,e,n,r){return await fe().price_points.where("[cardId+provider+finish+date]").equals([t,e,n,r]).toArray()},async update(t,e){return await fe().price_points.update(t,e)},async bulkPut(t){await fe().price_points.bulkPut(t)},async delete(t){await fe().price_points.delete(t)}},fd={async add(t){return await fe().valuations.add(t)},async getById(t){return await fe().valuations.get(t)},async getAll(){return await fe().valuations.toArray()},async update(t,e){return await fe().valuations.update(t,e)},async delete(t){await fe().valuations.delete(t)}},Vo={async add(t){return fe().acquisitions.add(t)},async getById(t){return fe().acquisitions.get(t)},async getByExternalRef(t,e){return fe().acquisitions.where("[source+externalRef]").equals([t,e]).first()},async update(t,e){return fe().acquisitions.update(t,e)}},js={async set(t,e){const n={k:t,v:e,createdAt:new Date,updatedAt:new Date};return await fe().settings.put(n)},async get(t){return(await fe().settings.get(t))?.v},async getAll(){return await fe().settings.toArray()},async delete(t){await fe().settings.delete(t)}};class Be{cents;currency;constructor(e,n="EUR"){this.cents=Math.round(e),this.currency=n}static parse(e,n="EUR"){if(typeof e=="number")return new Be(e*100,n);const r=e.replace(/[€$£\s]/g,"").replace(",","."),s=parseFloat(r);return new Be(isNaN(s)?0:s*100,n)}getCents(){return this.cents}getDecimal(){return this.cents/100}getCurrency(){return this.currency}add(e){if(this.currency!==e.currency)throw new Error("Cannot add Money values with different currencies");return new Be(this.cents+e.cents,this.currency)}subtract(e){if(this.currency!==e.currency)throw new Error("Cannot subtract Money values with different currencies");return new Be(this.cents-e.cents,this.currency)}multiply(e){return new Be(this.cents*e,this.currency)}divide(e){return new Be(this.cents/e,this.currency)}format(e="de-DE"){return new Intl.NumberFormat(e,{style:"currency",currency:this.currency,minimumFractionDigits:2,maximumFractionDigits:2}).format(this.getDecimal())}isZero(){return this.cents===0}isPositive(){return this.cents>0}isNegative(){return this.cents<0}}const xk="mtgjson.idMap.v1",kk={"mtgjson.cardmarket":3,"cardmarket.priceguide":2,scryfall:1},tf=fc("cards",{state:()=>({cards:{},cardPrices:{},cardLatest:{},idMap:null,loading:!1,loadingPrices:!1,error:null}),getters:{getCardById:t=>e=>t.cards[e],getAllCards:t=>Object.values(t.cards),getCardsBySet:t=>e=>Object.values(t.cards).filter(n=>n.setCode===e),getCardPrice:t=>e=>t.cardPrices[e]||null,getLatestNonfoil:t=>e=>t.cardLatest[e]?.nonfoil||null,getLatestFoil:t=>e=>t.cardLatest[e]?.foil||null},actions:{async loadCards(){this.loading=!0,this.error=null;try{const t=await Ut.getAll();this.cards=t.reduce((e,n)=>(e[n.id]=n,e),{})}catch(t){this.error=t instanceof Error?t.message:"Failed to load cards",console.error("Error loading cards:",t)}finally{this.loading=!1}},async ensureIdMap(){if(!this.idMap)try{this.idMap=await js.get(xk)??null}catch(t){console.warn("[cardsStore] Could not load id map",t),this.idMap=null}},uuidForCard(t){const e=this.idMap;if(!e)return null;const n=e[t.id]||(t.oracleId?e[t.oracleId]:void 0);return n?String(n).toLowerCase():null},_pickLatestForFinish(t,e){const n=a=>{try{return new Date(a).toISOString().slice(0,10)}catch{return}},r={};for(const a of t){if((a.finish??"nonfoil")!==e)continue;const c=a.date??(a.asOf?n(a.asOf):void 0);if(!c)continue;const u=kk[a.provider??""]??0,f=a.asOf?new Date(a.asOf).getTime():0,p=r[c];(!p||u>p.rank||u===p.rank&&f>p.asOfTs)&&(r[c]={priceCent:a.priceCent,currency:a.currency??"EUR",rank:u,asOfTs:f})}const s=Object.keys(r);if(!s.length)return null;const i=s.sort((a,l)=>a.localeCompare(l)).at(-1),o=r[i];return new Be(o.priceCent,o.currency)},async loadLatestForCard(t){const e=this.cards[t];if(!e)return;const r=(await Ts.getByCardId(t)).map(a=>({date:a.date,asOf:a.asOf,provider:a.provider,finish:a.finish??"nonfoil",priceCent:a.priceCent,currency:a.currency??"EUR"})),s=this._pickLatestForFinish(r,"nonfoil"),i=this._pickLatestForFinish(r,"foil");this.cardLatest[t]={nonfoil:s||void 0,foil:i||void 0};const o=(e.finish==="foil"?i:s)||i||s||null;o?this.cardPrices[t]=o:delete this.cardPrices[t]},async loadCardPrices(){this.loadingPrices=!0,this.error=null;try{Object.keys(this.cards).length||await this.loadCards(),await this.ensureIdMap();const t=Object.values(this.cards),e=8;for(let n=0;n<t.length;n+=e){const r=t.slice(n,n+e);await Promise.all(r.map(s=>this.loadLatestForCard(s.id)))}}catch(t){this.error=t instanceof Error?t.message:"Failed to load card prices",console.error("Error loading card prices:",t)}finally{this.loadingPrices=!1}},async getPriceHistory(t){if(!this.cards[t])return[];const n=s=>{try{return new Date(s).toISOString().slice(0,10)}catch{return}};return(await Ts.getByCardId(t)).map(s=>({...s,date:s.date??(s.asOf?n(s.asOf):void 0)})).filter(s=>typeof s.date=="string").sort((s,i)=>s.date.localeCompare(i.date))},async loadCardsAndPrices(){await this.loadCards(),await this.loadCardPrices()},async addCard(t){await Ut.add(t),this.cards[t.id]=t},async updateCard(t,e){await Ut.update(t,e),this.cards[t]&&(this.cards[t]={...this.cards[t],...e})},async removeCard(t){await Ut.delete(t),delete this.cards[t],delete this.cardPrices[t],delete this.cardLatest[t]}}}),Ck=fc("holdings",{state:()=>({holdings:{},loading:!1,error:null}),getters:{getHoldingByCardId:t=>e=>t.holdings[e],getAllHoldings:t=>Object.values(t.holdings),getTotalQuantityByCardId:t=>e=>t.holdings[e]?.quantity||0},actions:{async loadHoldings(){this.loading=!0,this.error=null;try{const t=await kt.getAll(),n=(await Ut.getAll()).reduce((s,i)=>(s[i.id]=i,s),{}),r={};for(const s of t){if(s.disposedAt)continue;const i=r[s.cardId],o=s.quantity-(s.disposedQuantity||0);i?(i.quantity+=o,i.totalCost+=s.totalAcquisitionCostCent||s.unitCost*o,i.averageCost=i.totalCost/i.quantity):r[s.cardId]={cardId:s.cardId,quantity:o,totalCost:s.totalAcquisitionCostCent||s.unitCost*o,averageCost:s.totalAcquisitionCostCent?s.totalAcquisitionCostCent/s.quantity:s.unitCost,card:n[s.cardId]}}this.holdings=r}catch(t){this.error=t instanceof Error?t.message:"Failed to load holdings",console.error("Error loading holdings:",t)}finally{this.loading=!1}}}}),Sk=fc("transactions",{state:()=>({transactions:{},loading:!1,error:null}),getters:{getTransactionById:t=>e=>t.transactions[e],getAllTransactions:t=>Object.values(t.transactions),getTransactionsByCardId:t=>e=>Object.values(t.transactions).filter(n=>n.cardId===e),getTransactionsByKind:t=>e=>Object.values(t.transactions).filter(n=>n.kind===e),getTotalValueByKind:t=>e=>Object.values(t.transactions).filter(n=>n.kind===e).reduce((n,r)=>{const s=r.unitPrice*r.quantity,i=r.fees||0,o=r.shipping||0;return e==="BUY"?n+s+i+o:n+s-i-o},0)},actions:{async loadTransactions(){this.loading=!0,this.error=null;try{const t=await Jt.getAll();this.transactions=t.reduce((e,n)=>(e[n.id]=n,e),{})}catch(t){this.error=t instanceof Error?t.message:"Failed to load transactions",console.error("Error loading transactions:",t)}finally{this.loading=!1}},async addTransaction(t){try{await Jt.add(t),this.transactions[t.id]=t}catch(e){throw this.error=e instanceof Error?e.message:"Failed to add transaction",console.error("Error adding transaction:",e),e}},async updateTransaction(t,e){try{await Jt.update(t,e),this.transactions[t]&&(this.transactions[t]={...this.transactions[t],...e})}catch(n){throw this.error=n instanceof Error?n.message:"Failed to update transaction",console.error("Error updating transaction:",n),n}},async removeTransaction(t){try{await Jt.delete(t),delete this.transactions[t]}catch(e){throw this.error=e instanceof Error?e.message:"Failed to remove transaction",console.error("Error removing transaction:",e),e}}}});class $l{static PROVIDER_PRECEDENCE=["cardmarket.priceguide","mtgjson.cardmarket","scryfall"];static async getLatestPriceForCard(e){try{const n=await Ts.getByCardId(e);if(n.length===0)return null;const r=this.sortPricePointsByPrecedence(n);if(r.length===0)return null;const s=r[0];return{price:new Be(s.priceCent,s.currency),asOf:s.asOf,provider:s.provider}}catch(n){return console.error(`Error getting latest price for card ${e}:`,n),null}}static async getPricePointsForCard(e,n){try{let r=await Ts.getByCardId(e);return n?.source&&(r=r.filter(s=>s.provider===n.source)),n?.finish&&(r=r.filter(s=>s.finish===n.finish)),n?.startDate&&(r=r.filter(s=>new Date(s.asOf)>=n.startDate)),n?.endDate&&(r=r.filter(s=>new Date(s.asOf)<=n.endDate)),r=this.sortPricePointsByPrecedence(r),n?.limit&&(r=r.slice(0,n.limit)),r}catch(r){return console.error(`Error getting price points for card ${e}:`,r),[]}}static async getPriceForDate(e,n){try{const r=n.toISOString().split("T")[0];let s=await Ts.getByCardIdAndDate(e,r);if(s.length===0||(s=this.sortPricePointsByPrecedence(s),s.length===0))return null;const i=s[0];return{price:new Be(i.priceCent,i.currency),provider:i.provider,finish:i.finish}}catch(r){return console.error(`Error getting price for card ${e} on date ${n.toISOString().split("T")[0]}:`,r),null}}static async getPriceForDateAndFinish(e,n,r){try{const s=n.toISOString().split("T")[0];let i=await Ts.getByCardIdAndDate(e,s);if(i.length===0||(i=i.filter(a=>a.finish===r),i.length===0)||(i=this.sortPricePointsByPrecedence(i),i.length===0))return null;const o=i[0];return{price:new Be(o.priceCent,o.currency),provider:o.provider}}catch(s){return console.error(`Error getting price for card ${e} on date ${n.toISOString().split("T")[0]} with finish ${r}:`,s),null}}static sortPricePointsByPrecedence(e){return e.sort((n,r)=>{const s=this.PROVIDER_PRECEDENCE.indexOf(n.provider),i=this.PROVIDER_PRECEDENCE.indexOf(r.provider),o=s===-1?1/0:s,a=i===-1?1/0:i;return o!==a?o-a:new Date(r.asOf).getTime()-new Date(n.asOf).getTime()})}static getSourcePrecedence(e){const n=this.PROVIDER_PRECEDENCE.indexOf(e);return n===-1?1/0:n}}async function Pk(t,e=new Date){const n=await Vo.getById(t);if(!n)throw new Error("Acquisition not found");const r=(n.totalPriceCent??0)+(n.totalFeesCent??0)+(n.totalShippingCent??0),s=await kt.getByAcquisitionId(t);let i=0,o=0,a=0;const l=[];for(const c of s){const f=(await Jt.getByLotId(c.id)).filter(S=>S.kind==="SELL"&&S.happenedAt<=e);let p=0,m=0,v=0,_=0,x=0;for(const S of f){p+=S.quantity*S.unitPrice-(S.fees||0)+(S.shipping||0);const P=c.totalAcquisitionCostCent||c.unitCost*c.quantity;m+=P/c.quantity*S.quantity,v+=S.fees||0,_+=S.shipping||0}x=p-m,i+=p,o+=x;const C=c.quantity-f.reduce((S,P)=>S+P.quantity,0);if(C>0){const S=await $l.getLatestPriceForCard(c.cardId),P=S?S.price.getCents():0,M=C*P,A=(c.totalAcquisitionCostCent||c.unitCost*c.quantity)/c.quantity,T=M-C*A;a+=T}l.push({lotId:c.id,cardId:c.cardId,quantity:c.quantity,acquisitionCostCent:c.totalAcquisitionCostCent||c.unitCost*c.quantity,saleRevenueCent:p,feesCent:v,shippingCent:_,realizedPnLCent:x})}return{totalCostCent:r,totalRevenueCent:i,realizedPnLCent:o,unrealizedPnLCent:a,lots:l}}async function Ak(t,e,n){const r=[];switch(e){case"equal_per_card":for(const o of t)r.push(o.quantity);break;case"by_market_price":const s=n?.provider||"scryfall",i=n?.date||new Date().toISOString().slice(0,10);for(const o of t){const a=await Ts.getByCardIdAndProviderAndFinishAndDate(o.cardId,s,o.finish||"nonfoil",i);if(a.length>0){const l=a[0];r.push(l.priceCent*o.quantity)}else r.push(o.quantity)}break;case"by_rarity":for(const o of t)r.push(o.quantity*1);break;case"manual":for(const o of t)r.push(o.quantity);break}return r}async function Ik(t,e,n){const r=fe();return r.transaction("rw",r.card_lots,r.acquisitions,r.price_points,async()=>{const s=await Vo.getById(t);if(!s)throw new Error("Acquisition not found");const i=(s.totalPriceCent??0)+(s.totalFeesCent??0)+(s.totalShippingCent??0),o=await kt.getByAcquisitionId(t),a=await Ak(o,e,n),l=a.reduce((x,C)=>x+C,0)||1,c=o.map((x,C)=>i*(a[C]/l)),u=c.map(x=>Math.floor(x)),f=u.reduce((x,C)=>x+C,0);let p=i-f;const m=c.map((x,C)=>x-u[C]),v=o.map((x,C)=>({lot:x,remainder:m[C],originalIndex:C})).sort((x,C)=>C.remainder-x.remainder),_=[...u];for(let x=0;x<p;x++){const C=v[x];C&&_[C.originalIndex]++}for(let x=0;x<o.length;x++){const C=_[x],S=Math.floor(C/Math.max(1,o[x].quantity));await kt.update(o[x].id,{totalAcquisitionCostCent:C,unitCost:S,acquisitionPriceCent:C,updatedAt:new Date})}await Vo.update(t,{totalCostCent:i,allocationMethod:e,allocationAsOf:new Date,allocationSourceRev:n?.provider?`${n.provider}:${n?.date??""}`:void 0,updatedAt:new Date})})}class Gr{static async calculateLotValue(e){if(e.cardId){const n=await $l.getLatestPriceForCard(e.cardId);if(n){const r=n.price,s=e.disposedQuantity?e.quantity-e.disposedQuantity:e.quantity;return r.multiply(s)}}return new Be(0,"EUR")}static async calculateLotCostBasis(e){if(e.totalAcquisitionCostCent){const i=(e.disposedQuantity?e.quantity-e.disposedQuantity:e.quantity)/e.quantity;return new Be(e.totalAcquisitionCostCent*i,e.currency||"EUR")}const n=new Be(e.unitCost,e.currency||"EUR"),r=e.disposedQuantity?e.quantity-e.disposedQuantity:e.quantity;return n.multiply(r)}static async calculateRealizedPnL(){const e=await Jt.getByKind("SELL");let n=new Be(0,"EUR");for(const r of e){const s=new Be(r.unitPrice,r.currency).multiply(r.quantity);let i=new Be(0,"EUR");if(r.lotId){const c=await kt.getById(r.lotId);c&&(i=(c.totalAcquisitionCostCent?new Be(c.totalAcquisitionCostCent,c.currency||"EUR"):new Be(c.unitCost,c.currency||"EUR").multiply(c.quantity)).multiply(r.quantity/c.quantity))}else r.cardId&&(i=await this.calculateFIFOCostForCard(r.cardId,r.quantity));const o=new Be(r.fees,r.currency),a=new Be(r.shipping,r.currency),l=s.subtract(i).subtract(o).subtract(a);n=n.add(l)}return n}static async calculateFIFOCostForCard(e,n){const s=(await kt.getByCardId(e)).filter(a=>!a.disposedAt||a.disposedQuantity&&a.disposedQuantity<a.quantity).sort((a,l)=>a.purchasedAt.getTime()-l.purchasedAt.getTime());let i=n,o=new Be(0,"EUR");for(const a of s){if(i<=0)break;const l=a.disposedQuantity?a.quantity-a.disposedQuantity:a.quantity,c=Math.min(i,l),f=new Be(a.unitCost,a.currency||"EUR").multiply(c);o=o.add(f),i-=c}return o}static async calculatePortfolioValue(){const e=await kt.getAll();let n=new Be(0,"EUR");for(const r of e)if(!r.disposedAt||r.disposedQuantity&&r.disposedQuantity<r.quantity){const s=await this.calculateLotValue(r);n=n.add(s)}return n}static async calculateTotalCostBasis(){const e=await kt.getAll();let n=new Be(0,"EUR");for(const r of e)if(!r.disposedAt||r.disposedQuantity&&r.disposedQuantity<r.quantity){const s=await this.calculateLotCostBasis(r);n=n.add(s)}return n}static async calculateUnrealizedPnL(){const e=await this.calculatePortfolioValue(),n=await this.calculateTotalCostBasis();return e.subtract(n)}static async getActiveLots(){return(await kt.getAll()).filter(n=>!n.disposedAt||n.disposedQuantity&&n.disposedQuantity<n.quantity)}static async getOwnedQuantity(e){const n=await kt.getByCardId(e);let r=0;for(const s of n)s.disposedAt?s.disposedQuantity&&s.disposedQuantity<s.quantity&&(r+=s.quantity-s.disposedQuantity):r+=s.quantity;return r}static async createValuationSnapshot(){try{const e=new Date;if(e.setHours(0,0,0,0),(await fd.getAll()).find(l=>{const c=new Date(l.asOf);return c.setHours(0,0,0,0),c.getTime()===e.getTime()})){console.log("Valuation snapshot for today already exists");return}const s=await this.calculatePortfolioValue(),i=await this.calculateTotalCostBasis(),o=await this.calculateRealizedPnL(),a={id:`valuation-${Date.now()}`,asOf:new Date,totalValue:s.getCents(),totalCostBasis:i.getCents(),realizedPnLToDate:o.getCents(),createdAt:new Date};await fd.add(a),console.log("Valuation snapshot created:",a)}catch(e){throw console.error("Error creating valuation snapshot:",e),e}}static async getAcquisitionPnL(e,n=new Date){return await Pk(e,n)}static async allocateAcquisitionCosts(e,n,r){return await Ik(e,n,r)}}class Es{static calculateTrueAcquisitionCost(e,n,r,s){const i=e+n+r;return Math.round(i/s*100)}static calculateNetRevenuePerCard(e,n,r,s){const i=e-n-r;return Math.round(i/s*100)}static async getTotalFees(e,n){const r=await Jt.getAll();let s=new Be(0,"EUR");for(const i of r)e&&new Date(i.happenedAt)<e||n&&new Date(i.happenedAt)>n||(s=s.add(new Be(i.fees||0,"EUR")));return s}static async getTotalShippingCosts(e,n,r){const s=await Jt.getAll();let i=new Be(0,"EUR");for(const o of s)e==="purchase"&&o.kind!=="BUY"||e==="sale"&&o.kind!=="SELL"||n&&new Date(o.happenedAt)<n||r&&new Date(o.happenedAt)>r||(i=i.add(new Be(o.shipping||0,o.currency||"EUR")));return i}static calculateLotNetProfit(e){if(!e.disposedAt||!e.salePriceCent)return 0;const n=e.totalAcquisitionCostCent||e.unitCost*e.quantity;return(e.totalSaleRevenueCent||e.salePriceCent*e.quantity-(e.saleFeesCent||0)+(e.saleShippingCent||0))-n}static async getTotalNetProfit(){const e=await kt.getAll();let n=new Be(0,"EUR");for(const r of e)if(r.disposedAt&&r.totalNetProfitCent!==void 0)n=n.add(new Be(r.totalNetProfitCent,"EUR"));else if(r.disposedAt&&r.salePriceCent){const s=this.calculateLotNetProfit(r);n=n.add(new Be(s,"EUR"))}return n}static async getTotalRevenue(){const e=await Jt.getByKind("SELL");let n=new Be(0,"EUR");for(const r of e){const s=new Be(r.unitPrice*r.quantity,r.currency);n=n.add(s)}return n}static async getTotalCosts(){const e=await Jt.getByKind("BUY");let n=new Be(0,"EUR");for(const r of e){const s=new Be(r.unitPrice*r.quantity,r.currency),i=new Be(r.fees||0,r.currency),o=new Be(r.shipping||0,r.currency);n=n.add(s).add(i).add(o)}return n}}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function ra(t){return t+.5|0}const Xr=(t,e,n)=>Math.max(Math.min(t,n),e);function po(t){return Xr(ra(t*2.55),0,255)}function Zr(t){return Xr(ra(t*255),0,255)}function Cr(t){return Xr(ra(t/2.55)/100,0,1)}function Cp(t){return Xr(ra(t*100),0,100)}const Fn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},hd=[..."0123456789ABCDEF"],Ek=t=>hd[t&15],Ok=t=>hd[(t&240)>>4]+hd[t&15],qa=t=>(t&240)>>4===(t&15),Mk=t=>qa(t.r)&&qa(t.g)&&qa(t.b)&&qa(t.a);function Dk(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Fn[t[1]]*17,g:255&Fn[t[2]]*17,b:255&Fn[t[3]]*17,a:e===5?Fn[t[4]]*17:255}:(e===7||e===9)&&(n={r:Fn[t[1]]<<4|Fn[t[2]],g:Fn[t[3]]<<4|Fn[t[4]],b:Fn[t[5]]<<4|Fn[t[6]],a:e===9?Fn[t[7]]<<4|Fn[t[8]]:255})),n}const Tk=(t,e)=>t<255?e(t):"";function Rk(t){var e=Mk(t)?Ek:Ok;return t?"#"+e(t.r)+e(t.g)+e(t.b)+Tk(t.a,e):void 0}const $k=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Cv(t,e,n){const r=e*Math.min(n,1-n),s=(i,o=(i+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function Fk(t,e,n){const r=(s,i=(s+t/60)%6)=>n-n*e*Math.max(Math.min(i,4-i,1),0);return[r(5),r(3),r(1)]}function Lk(t,e,n){const r=Cv(t,1,.5);let s;for(e+n>1&&(s=1/(e+n),e*=s,n*=s),s=0;s<3;s++)r[s]*=1-e-n,r[s]+=e;return r}function Bk(t,e,n,r,s){return t===s?(e-n)/r+(e<n?6:0):e===s?(n-t)/r+2:(t-e)/r+4}function nf(t){const n=t.r/255,r=t.g/255,s=t.b/255,i=Math.max(n,r,s),o=Math.min(n,r,s),a=(i+o)/2;let l,c,u;return i!==o&&(u=i-o,c=a>.5?u/(2-i-o):u/(i+o),l=Bk(n,r,s,u,i),l=l*60+.5),[l|0,c||0,a]}function rf(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(Zr)}function sf(t,e,n){return rf(Cv,t,e,n)}function jk(t,e,n){return rf(Lk,t,e,n)}function Nk(t,e,n){return rf(Fk,t,e,n)}function Sv(t){return(t%360+360)%360}function zk(t){const e=$k.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?po(+e[5]):Zr(+e[5]));const s=Sv(+e[2]),i=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=jk(s,i,o):e[1]==="hsv"?r=Nk(s,i,o):r=sf(s,i,o),{r:r[0],g:r[1],b:r[2],a:n}}function qk(t,e){var n=nf(t);n[0]=Sv(n[0]+e),n=sf(n),t.r=n[0],t.g=n[1],t.b=n[2]}function Uk(t){if(!t)return;const e=nf(t),n=e[0],r=Cp(e[1]),s=Cp(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${s}%, ${Cr(t.a)})`:`hsl(${n}, ${r}%, ${s}%)`}const Sp={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Pp={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Wk(){const t={},e=Object.keys(Pp),n=Object.keys(Sp);let r,s,i,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],s=0;s<n.length;s++)i=n[s],a=a.replace(i,Sp[i]);i=parseInt(Pp[o],16),t[a]=[i>>16&255,i>>8&255,i&255]}return t}let Ua;function Vk(t){Ua||(Ua=Wk(),Ua.transparent=[0,0,0,0]);const e=Ua[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const Hk=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Kk(t){const e=Hk.exec(t);let n=255,r,s,i;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?po(o):Xr(o*255,0,255)}return r=+e[1],s=+e[3],i=+e[5],r=255&(e[2]?po(r):Xr(r,0,255)),s=255&(e[4]?po(s):Xr(s,0,255)),i=255&(e[6]?po(i):Xr(i,0,255)),{r,g:s,b:i,a:n}}}function Yk(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Cr(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const yu=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,ai=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function Gk(t,e,n){const r=ai(Cr(t.r)),s=ai(Cr(t.g)),i=ai(Cr(t.b));return{r:Zr(yu(r+n*(ai(Cr(e.r))-r))),g:Zr(yu(s+n*(ai(Cr(e.g))-s))),b:Zr(yu(i+n*(ai(Cr(e.b))-i))),a:t.a+n*(e.a-t.a)}}function Wa(t,e,n){if(t){let r=nf(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=sf(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function Pv(t,e){return t&&Object.assign(e||{},t)}function Ap(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Zr(t[3]))):(e=Pv(t,{r:0,g:0,b:0,a:1}),e.a=Zr(e.a)),e}function Xk(t){return t.charAt(0)==="r"?Kk(t):zk(t)}class Ho{constructor(e){if(e instanceof Ho)return e;const n=typeof e;let r;n==="object"?r=Ap(e):n==="string"&&(r=Dk(e)||Vk(e)||Xk(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=Pv(this._rgb);return e&&(e.a=Cr(e.a)),e}set rgb(e){this._rgb=Ap(e)}rgbString(){return this._valid?Yk(this._rgb):void 0}hexString(){return this._valid?Rk(this._rgb):void 0}hslString(){return this._valid?Uk(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,s=e.rgb;let i;const o=n===i?.5:n,a=2*o-1,l=r.a-s.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;i=1-c,r.r=255&c*r.r+i*s.r+.5,r.g=255&c*r.g+i*s.g+.5,r.b=255&c*r.b+i*s.b+.5,r.a=o*r.a+(1-o)*s.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=Gk(this._rgb,e._rgb,n)),this}clone(){return new Ho(this.rgb)}alpha(e){return this._rgb.a=Zr(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=ra(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Wa(this._rgb,2,e),this}darken(e){return Wa(this._rgb,2,-e),this}saturate(e){return Wa(this._rgb,1,e),this}desaturate(e){return Wa(this._rgb,1,-e),this}rotate(e){return qk(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function gr(){}const Qk=(()=>{let t=0;return()=>t++})();function _t(t){return t==null}function Ct(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Je(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Yt(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Zn(t,e){return Yt(t)?t:e}function Qe(t,e){return typeof t>"u"?e:t}const Jk=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,Av=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function pt(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function ht(t,e,n,r){let s,i,o;if(Ct(t))for(i=t.length,s=0;s<i;s++)e.call(n,t[s],s);else if(Je(t))for(o=Object.keys(t),i=o.length,s=0;s<i;s++)e.call(n,t[o[s]],o[s])}function Fl(t,e){let n,r,s,i;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(s=t[n],i=e[n],s.datasetIndex!==i.datasetIndex||s.index!==i.index)return!1;return!0}function Ll(t){if(Ct(t))return t.map(Ll);if(Je(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let s=0;for(;s<r;++s)e[n[s]]=Ll(t[n[s]]);return e}return t}function Iv(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function Zk(t,e,n,r){if(!Iv(t))return;const s=e[t],i=n[t];Je(s)&&Je(i)?Ko(s,i,r):e[t]=Ll(i)}function Ko(t,e,n){const r=Ct(e)?e:[e],s=r.length;if(!Je(t))return t;n=n||{};const i=n.merger||Zk;let o;for(let a=0;a<s;++a){if(o=r[a],!Je(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)i(l[c],t,o,n)}return t}function Oo(t,e){return Ko(t,e,{merger:eC})}function eC(t,e,n){if(!Iv(t))return;const r=e[t],s=n[t];Je(r)&&Je(s)?Oo(r,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Ll(s))}const Ip={"":t=>t,x:t=>t.x,y:t=>t.y};function tC(t){const e=t.split("."),n=[];let r="";for(const s of e)r+=s,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function nC(t){const e=tC(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function Yo(t,e){return(Ip[e]||(Ip[e]=nC(e)))(t)}function of(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Dn=t=>typeof t<"u",wn=t=>typeof t=="function",Ep=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function rC(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const ut=Math.PI,Wt=2*ut,sC=Wt+ut,Bl=Number.POSITIVE_INFINITY,af=ut/180,Zt=ut/2,Bn=ut/4,jl=ut*2/3,Ev=Math.log10,Oi=Math.sign;function Mo(t,e,n){return Math.abs(t-e)<n}function Op(t){const e=Math.round(t);t=Mo(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(Ev(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function iC(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((s,i)=>s-i).pop(),e}function oC(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function zs(t){return!oC(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function aC(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function lC(t,e,n){let r,s,i;for(r=0,s=t.length;r<s;r++)i=t[r][n],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function Vt(t){return t*(ut/180)}function Ov(t){return t*(180/ut)}function Mp(t){if(!Yt(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function pd(t,e){const n=e.x-t.x,r=e.y-t.y,s=Math.sqrt(n*n+r*r);let i=Math.atan2(r,n);return i<-.5*ut&&(i+=Wt),{angle:i,distance:s}}function Mi(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function cC(t,e){return(t-e+sC)%Wt-ut}function sr(t){return(t%Wt+Wt)%Wt}function Nl(t,e,n,r){const s=sr(t),i=sr(e),o=sr(n),a=sr(i-s),l=sr(o-s),c=sr(s-i),u=sr(s-o);return s===i||s===o||r&&i===o||a>l&&c<u}function jn(t,e,n){return Math.max(e,Math.min(n,t))}function uC(t){return jn(t,-32768,32767)}function pi(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function lf(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,s=0,i;for(;r-s>1;)i=s+r>>1,n(i)?s=i:r=i;return{lo:s,hi:r}}const Rs=(t,e,n,r)=>lf(t,n,r?s=>{const i=t[s][e];return i<n||i===n&&t[s+1][e]===n}:s=>t[s][e]<n),dC=(t,e,n)=>lf(t,n,r=>t[r][e]>=n);function fC(t,e,n){let r=0,s=t.length;for(;r<s&&t[r]<e;)r++;for(;s>r&&t[s-1]>n;)s--;return r>0||s<t.length?t.slice(r,s):t}const Mv=["push","pop","shift","splice","unshift"];function hC(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Mv.forEach(n=>{const r="_onData"+of(n),s=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...i){const o=s.apply(this,i);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...i)}),o}})})}function Dp(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,s=r.indexOf(e);s!==-1&&r.splice(s,1),!(r.length>0)&&(Mv.forEach(i=>{delete t[i]}),delete t._chartjs)}function pC(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const Dv=(function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame})();function Tv(t,e){let n=[],r=!1;return function(...s){n=s,r||(r=!0,Dv.call(window,()=>{r=!1,t.apply(e,n)}))}}function gC(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const cf=t=>t==="start"?"left":t==="end"?"right":"center",sn=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,mC=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function yC(t,e,n){const r=e.length;let s=0,i=r;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=o.axis,{min:f,max:p,minDefined:m,maxDefined:v}=o.getUserBounds();if(m){if(s=Math.min(Rs(l,u,f).lo,n?r:Rs(e,u,o.getPixelForValue(f)).lo),c){const _=l.slice(0,s+1).reverse().findIndex(x=>!_t(x[a.axis]));s-=Math.max(0,_)}s=jn(s,0,r-1)}if(v){let _=Math.max(Rs(l,o.axis,p,!0).hi+1,n?0:Rs(e,u,o.getPixelForValue(p),!0).hi+1);if(c){const x=l.slice(_-1).findIndex(C=>!_t(C[a.axis]));_+=Math.max(0,x)}i=jn(_,s,r)-s}else i=r-s}return{start:s,count:i}}function vC(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,s={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=s,!0;const i=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,s),i}const Va=t=>t===0||t===1,Tp=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Wt/n)),Rp=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Wt/n)+1,Do={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Zt)+1,easeOutSine:t=>Math.sin(t*Zt),easeInOutSine:t=>-.5*(Math.cos(ut*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Va(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Va(t)?t:Tp(t,.075,.3),easeOutElastic:t=>Va(t)?t:Rp(t,.075,.3),easeInOutElastic(t){return Va(t)?t:t<.5?.5*Tp(t*2,.1125,.45):.5+.5*Rp(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Do.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Do.easeInBounce(t*2)*.5:Do.easeOutBounce(t*2-1)*.5+.5};function uf(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function $p(t){return uf(t)?t:new Ho(t)}function vu(t){return uf(t)?t:new Ho(t).saturate(.5).darken(.1).hexString()}const bC=["x","y","borderWidth","radius","tension"],_C=["color","borderColor","backgroundColor"];function wC(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:_C},numbers:{type:"number",properties:bC}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function xC(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Fp=new Map;function kC(t,e){e=e||{};const n=t+JSON.stringify(e);let r=Fp.get(n);return r||(r=new Intl.NumberFormat(t,e),Fp.set(n,r)),r}function df(t,e,n){return kC(e,n).format(t)}const CC={values(t){return Ct(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let s,i=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),i=SC(t,n)}const o=Ev(Math.abs(i)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),df(t,r,l)}};function SC(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var Rv={formatters:CC};function PC(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Rv.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const qs=Object.create(null),gd=Object.create(null);function To(t,e){if(!e)return t;const n=e.split(".");for(let r=0,s=n.length;r<s;++r){const i=n[r];t=t[i]||(t[i]=Object.create(null))}return t}function bu(t,e,n){return typeof e=="string"?Ko(To(t,e),n):Ko(To(t,""),e)}class AC{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,s)=>vu(s.backgroundColor),this.hoverBorderColor=(r,s)=>vu(s.borderColor),this.hoverColor=(r,s)=>vu(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return bu(this,e,n)}get(e){return To(this,e)}describe(e,n){return bu(gd,e,n)}override(e,n){return bu(qs,e,n)}route(e,n,r,s){const i=To(this,e),o=To(this,r),a="_"+n;Object.defineProperties(i,{[a]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[s];return Je(l)?Object.assign({},c,l):Qe(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var Mt=new AC({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[wC,xC,PC]);function IC(t){return!t||_t(t.size)||_t(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Lp(t,e,n,r,s){let i=e[s];return i||(i=e[s]=t.measureText(s).width,n.push(s)),i>r&&(r=i),r}function vs(t,e,n){const r=t.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((e-s)*r)/r+s}function Bp(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function md(t,e,n,r){$v(t,e,n,r,null)}function $v(t,e,n,r,s){let i,o,a,l,c,u,f,p;const m=e.pointStyle,v=e.rotation,_=e.radius;let x=(v||0)*af;if(m&&typeof m=="object"&&(i=m.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(x),t.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),t.restore();return}if(!(isNaN(_)||_<=0)){switch(t.beginPath(),m){default:s?t.ellipse(n,r,s/2,_,0,0,Wt):t.arc(n,r,_,0,Wt),t.closePath();break;case"triangle":u=s?s/2:_,t.moveTo(n+Math.sin(x)*u,r-Math.cos(x)*_),x+=jl,t.lineTo(n+Math.sin(x)*u,r-Math.cos(x)*_),x+=jl,t.lineTo(n+Math.sin(x)*u,r-Math.cos(x)*_),t.closePath();break;case"rectRounded":c=_*.516,l=_-c,o=Math.cos(x+Bn)*l,f=Math.cos(x+Bn)*(s?s/2-c:l),a=Math.sin(x+Bn)*l,p=Math.sin(x+Bn)*(s?s/2-c:l),t.arc(n-f,r-a,c,x-ut,x-Zt),t.arc(n+p,r-o,c,x-Zt,x),t.arc(n+f,r+a,c,x,x+Zt),t.arc(n-p,r+o,c,x+Zt,x+ut),t.closePath();break;case"rect":if(!v){l=Math.SQRT1_2*_,u=s?s/2:l,t.rect(n-u,r-l,2*u,2*l);break}x+=Bn;case"rectRot":f=Math.cos(x)*(s?s/2:_),o=Math.cos(x)*_,a=Math.sin(x)*_,p=Math.sin(x)*(s?s/2:_),t.moveTo(n-f,r-a),t.lineTo(n+p,r-o),t.lineTo(n+f,r+a),t.lineTo(n-p,r+o),t.closePath();break;case"crossRot":x+=Bn;case"cross":f=Math.cos(x)*(s?s/2:_),o=Math.cos(x)*_,a=Math.sin(x)*_,p=Math.sin(x)*(s?s/2:_),t.moveTo(n-f,r-a),t.lineTo(n+f,r+a),t.moveTo(n+p,r-o),t.lineTo(n-p,r+o);break;case"star":f=Math.cos(x)*(s?s/2:_),o=Math.cos(x)*_,a=Math.sin(x)*_,p=Math.sin(x)*(s?s/2:_),t.moveTo(n-f,r-a),t.lineTo(n+f,r+a),t.moveTo(n+p,r-o),t.lineTo(n-p,r+o),x+=Bn,f=Math.cos(x)*(s?s/2:_),o=Math.cos(x)*_,a=Math.sin(x)*_,p=Math.sin(x)*(s?s/2:_),t.moveTo(n-f,r-a),t.lineTo(n+f,r+a),t.moveTo(n+p,r-o),t.lineTo(n-p,r+o);break;case"line":o=s?s/2:Math.cos(x)*_,a=Math.sin(x)*_,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(x)*(s?s/2:_),r+Math.sin(x)*_);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Go(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function sa(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function ia(t){t.restore()}function EC(t,e,n,r,s){if(!e)return t.lineTo(n.x,n.y);if(s==="middle"){const i=(e.x+n.x)/2;t.lineTo(i,e.y),t.lineTo(i,n.y)}else s==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function OC(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function MC(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),_t(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function DC(t,e,n,r,s){if(s.strikethrough||s.underline){const i=t.measureText(r),o=e-i.actualBoundingBoxLeft,a=e+i.actualBoundingBoxRight,l=n-i.actualBoundingBoxAscent,c=n+i.actualBoundingBoxDescent,u=s.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function TC(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Xo(t,e,n,r,s,i={}){const o=Ct(e)?e:[e],a=i.strokeWidth>0&&i.strokeColor!=="";let l,c;for(t.save(),t.font=s.string,MC(t,i),l=0;l<o.length;++l)c=o[l],i.backdrop&&TC(t,i.backdrop),a&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),_t(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(c,n,r,i.maxWidth)),t.fillText(c,n,r,i.maxWidth),DC(t,n,r,c,i),r+=Number(s.lineHeight);t.restore()}function zl(t,e){const{x:n,y:r,w:s,h:i,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*ut,ut,!0),t.lineTo(n,r+i-o.bottomLeft),t.arc(n+o.bottomLeft,r+i-o.bottomLeft,o.bottomLeft,ut,Zt,!0),t.lineTo(n+s-o.bottomRight,r+i),t.arc(n+s-o.bottomRight,r+i-o.bottomRight,o.bottomRight,Zt,0,!0),t.lineTo(n+s,r+o.topRight),t.arc(n+s-o.topRight,r+o.topRight,o.topRight,0,-Zt,!0),t.lineTo(n+o.topLeft,r)}const RC=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,$C=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function FC(t,e){const n=(""+t).match(RC);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const LC=t=>+t||0;function Fv(t,e){const n={},r=Je(e),s=r?Object.keys(e):e,i=Je(t)?r?o=>Qe(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of s)n[o]=LC(i(o));return n}function BC(t){return Fv(t,{top:"y",right:"x",bottom:"y",left:"x"})}function xi(t){return Fv(t,["topLeft","topRight","bottomLeft","bottomRight"])}function dn(t){const e=BC(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Lt(t,e){t=t||{},e=e||Mt.font;let n=Qe(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=Qe(t.style,e.style);r&&!(""+r).match($C)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const s={family:Qe(t.family,e.family),lineHeight:FC(Qe(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:Qe(t.weight,e.weight),string:""};return s.string=IC(s),s}function Ha(t,e,n,r){let s,i,o;for(s=0,i=t.length;s<i;++s)if(o=t[s],o!==void 0&&o!==void 0)return o}function jC(t,e,n){const{min:r,max:s}=t,i=Av(e,(s-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(i)),max:o(s,i)}}function Vs(t,e){return Object.assign(Object.create(t),e)}function ff(t,e=[""],n,r,s=()=>t[0]){const i=n||t;typeof r>"u"&&(r=Nv("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:r,_getTarget:s,override:a=>ff([a,...t],e,i,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return Bv(a,l,()=>KC(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return Np(a).includes(l)},ownKeys(a){return Np(a)},set(a,l,c){const u=a._storage||(a._storage=s());return a[l]=u[l]=c,delete a._keys,!0}})}function Di(t,e,n,r){const s={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:Lv(t,r),setContext:i=>Di(t,i,n,r),override:i=>Di(t.override(i),e,n,r)};return new Proxy(s,{deleteProperty(i,o){return delete i[o],delete t[o],!0},get(i,o,a){return Bv(i,o,()=>zC(i,o,a))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(i,o,a){return t[o]=a,delete i[o],!0}})}function Lv(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:n,indexable:r,isScriptable:wn(n)?n:()=>n,isIndexable:wn(r)?r:()=>r}}const NC=(t,e)=>t?t+of(e):e,hf=(t,e)=>Je(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function Bv(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function zC(t,e,n){const{_proxy:r,_context:s,_subProxy:i,_descriptors:o}=t;let a=r[e];return wn(a)&&o.isScriptable(e)&&(a=qC(e,a,t,n)),Ct(a)&&a.length&&(a=UC(e,a,t,o.isIndexable)),hf(e,a)&&(a=Di(a,s,i&&i[e],o)),a}function qC(t,e,n,r){const{_proxy:s,_context:i,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(i,o||r);return a.delete(t),hf(t,l)&&(l=pf(s._scopes,s,t,l)),l}function UC(t,e,n,r){const{_proxy:s,_context:i,_subProxy:o,_descriptors:a}=n;if(typeof i.index<"u"&&r(t))return e[i.index%e.length];if(Je(e[0])){const l=e,c=s._scopes.filter(u=>u!==l);e=[];for(const u of l){const f=pf(c,s,t,u);e.push(Di(f,i,o&&o[t],a))}}return e}function jv(t,e,n){return wn(t)?t(e,n):t}const WC=(t,e)=>t===!0?e:typeof t=="string"?Yo(e,t):void 0;function VC(t,e,n,r,s){for(const i of e){const o=WC(n,i);if(o){t.add(o);const a=jv(o._fallback,n,s);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function pf(t,e,n,r){const s=e._rootScopes,i=jv(e._fallback,n,r),o=[...t,...s],a=new Set;a.add(r);let l=jp(a,o,n,i||n,r);return l===null||typeof i<"u"&&i!==n&&(l=jp(a,o,i,l,r),l===null)?!1:ff(Array.from(a),[""],s,i,()=>HC(e,n,r))}function jp(t,e,n,r,s){for(;n;)n=VC(t,e,n,r,s);return n}function HC(t,e,n){const r=t._getTarget();e in r||(r[e]={});const s=r[e];return Ct(s)&&Je(n)?n:s||{}}function KC(t,e,n,r){let s;for(const i of e)if(s=Nv(NC(i,t),n),typeof s<"u")return hf(t,s)?pf(n,r,t,s):s}function Nv(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function Np(t){let e=t._keys;return e||(e=t._keys=YC(t._scopes)),e}function YC(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(s=>!s.startsWith("_")))e.add(r);return Array.from(e)}const GC=Number.EPSILON||1e-14,Ti=(t,e)=>e<t.length&&!t[e].skip&&t[e],zv=t=>t==="x"?"y":"x";function XC(t,e,n,r){const s=t.skip?e:t,i=e,o=n.skip?e:n,a=Mi(i,s),l=Mi(o,i);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const f=r*c,p=r*u;return{previous:{x:i.x-f*(o.x-s.x),y:i.y-f*(o.y-s.y)},next:{x:i.x+p*(o.x-s.x),y:i.y+p*(o.y-s.y)}}}function QC(t,e,n){const r=t.length;let s,i,o,a,l,c=Ti(t,0);for(let u=0;u<r-1;++u)if(l=c,c=Ti(t,u+1),!(!l||!c)){if(Mo(e[u],0,GC)){n[u]=n[u+1]=0;continue}s=n[u]/e[u],i=n[u+1]/e[u],a=Math.pow(s,2)+Math.pow(i,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=s*o*e[u],n[u+1]=i*o*e[u])}}function JC(t,e,n="x"){const r=zv(n),s=t.length;let i,o,a,l=Ti(t,0);for(let c=0;c<s;++c){if(o=a,a=l,l=Ti(t,c+1),!a)continue;const u=a[n],f=a[r];o&&(i=(u-o[n])/3,a[`cp1${n}`]=u-i,a[`cp1${r}`]=f-i*e[c]),l&&(i=(l[n]-u)/3,a[`cp2${n}`]=u+i,a[`cp2${r}`]=f+i*e[c])}}function ZC(t,e="x"){const n=zv(e),r=t.length,s=Array(r).fill(0),i=Array(r);let o,a,l,c=Ti(t,0);for(o=0;o<r;++o)if(a=l,l=c,c=Ti(t,o+1),!!l){if(c){const u=c[e]-l[e];s[o]=u!==0?(c[n]-l[n])/u:0}i[o]=a?c?Oi(s[o-1])!==Oi(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}QC(t,s,i),JC(t,i,e)}function Ka(t,e,n){return Math.max(Math.min(t,n),e)}function eS(t,e){let n,r,s,i,o,a=Go(t[0],e);for(n=0,r=t.length;n<r;++n)o=i,i=a,a=n<r-1&&Go(t[n+1],e),i&&(s=t[n],o&&(s.cp1x=Ka(s.cp1x,e.left,e.right),s.cp1y=Ka(s.cp1y,e.top,e.bottom)),a&&(s.cp2x=Ka(s.cp2x,e.left,e.right),s.cp2y=Ka(s.cp2y,e.top,e.bottom)))}function tS(t,e,n,r,s){let i,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")ZC(t,s);else{let c=r?t[t.length-1]:t[0];for(i=0,o=t.length;i<o;++i)a=t[i],l=XC(c,a,t[Math.min(i+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&eS(t,n)}function gf(){return typeof window<"u"&&typeof document<"u"}function mf(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function ql(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const hc=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function nS(t,e){return hc(t).getPropertyValue(e)}const rS=["top","right","bottom","left"];function Ns(t,e,n){const r={};n=n?"-"+n:"";for(let s=0;s<4;s++){const i=rS[s];r[i]=parseFloat(t[e+"-"+i+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const sS=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function iS(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:s,offsetY:i}=r;let o=!1,a,l;if(sS(s,i,t.target))a=s,l=i;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Os(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,s=hc(n),i=s.boxSizing==="border-box",o=Ns(s,"padding"),a=Ns(s,"border","width"),{x:l,y:c,box:u}=iS(t,n),f=o.left+(u&&a.left),p=o.top+(u&&a.top);let{width:m,height:v}=e;return i&&(m-=o.width+a.width,v-=o.height+a.height),{x:Math.round((l-f)/m*n.width/r),y:Math.round((c-p)/v*n.height/r)}}function oS(t,e,n){let r,s;if(e===void 0||n===void 0){const i=t&&mf(t);if(!i)e=t.clientWidth,n=t.clientHeight;else{const o=i.getBoundingClientRect(),a=hc(i),l=Ns(a,"border","width"),c=Ns(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,r=ql(a.maxWidth,i,"clientWidth"),s=ql(a.maxHeight,i,"clientHeight")}}return{width:e,height:n,maxWidth:r||Bl,maxHeight:s||Bl}}const Ya=t=>Math.round(t*10)/10;function aS(t,e,n,r){const s=hc(t),i=Ns(s,"margin"),o=ql(s.maxWidth,t,"clientWidth")||Bl,a=ql(s.maxHeight,t,"clientHeight")||Bl,l=oS(t,e,n);let{width:c,height:u}=l;if(s.boxSizing==="content-box"){const p=Ns(s,"border","width"),m=Ns(s,"padding");c-=m.width+p.width,u-=m.height+p.height}return c=Math.max(0,c-i.width),u=Math.max(0,r?c/r:u-i.height),c=Ya(Math.min(c,o,l.maxWidth)),u=Ya(Math.min(u,a,l.maxHeight)),c&&!u&&(u=Ya(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&u>l.height&&(u=l.height,c=Ya(Math.floor(u*r))),{width:c,height:u}}function zp(t,e,n){const r=e||1,s=Math.floor(t.height*r),i=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==s||o.width!==i?(t.currentDevicePixelRatio=r,o.height=s,o.width=i,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const lS=(function(){let t=!1;try{const e={get passive(){return t=!0,!1}};gf()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t})();function qp(t,e){const n=nS(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Ms(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function cS(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function uS(t,e,n,r){const s={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},o=Ms(t,s,n),a=Ms(s,i,n),l=Ms(i,e,n),c=Ms(o,a,n),u=Ms(a,l,n);return Ms(c,u,n)}const dS=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},fS=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function ki(t,e,n){return t?dS(e,n):fS()}function qv(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function Uv(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Wv(t){return t==="angle"?{between:Nl,compare:cC,normalize:sr}:{between:pi,compare:(e,n)=>e-n,normalize:e=>e}}function Up({start:t,end:e,count:n,loop:r,style:s}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:s}}function hS(t,e,n){const{property:r,start:s,end:i}=n,{between:o,normalize:a}=Wv(r),l=e.length;let{start:c,end:u,loop:f}=t,p,m;if(f){for(c+=l,u+=l,p=0,m=l;p<m&&o(a(e[c%l][r]),s,i);++p)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:f,style:t.style}}function Vv(t,e,n){if(!n)return[t];const{property:r,start:s,end:i}=n,o=e.length,{compare:a,between:l,normalize:c}=Wv(r),{start:u,end:f,loop:p,style:m}=hS(t,e,n),v=[];let _=!1,x=null,C,S,P;const M=()=>l(s,P,C)&&a(s,P)!==0,D=()=>a(i,C)===0||l(i,P,C),A=()=>_||M(),T=()=>!_||D();for(let B=u,E=u;B<=f;++B)S=e[B%o],!S.skip&&(C=c(S[r]),C!==P&&(_=l(C,s,i),x===null&&A()&&(x=a(C,s)===0?B:E),x!==null&&T()&&(v.push(Up({start:x,end:B,loop:p,count:o,style:m})),x=null),E=B,P=C));return x!==null&&v.push(Up({start:x,end:f,loop:p,count:o,style:m})),v}function Hv(t,e){const n=[],r=t.segments;for(let s=0;s<r.length;s++){const i=Vv(r[s],t.points,e);i.length&&n.push(...i)}return n}function pS(t,e,n,r){let s=0,i=e-1;if(n&&!r)for(;s<e&&!t[s].skip;)s++;for(;s<e&&t[s].skip;)s++;for(s%=e,n&&(i+=s);i>s&&t[i%e].skip;)i--;return i%=e,{start:s,end:i}}function gS(t,e,n,r){const s=t.length,i=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%s];c.skip||c.stop?a.skip||(r=!1,i.push({start:e%s,end:(l-1)%s,loop:r}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&i.push({start:e%s,end:o%s,loop:r}),i}function mS(t,e){const n=t.points,r=t.options.spanGaps,s=n.length;if(!s)return[];const i=!!t._loop,{start:o,end:a}=pS(n,s,i,r);if(r===!0)return Wp(t,[{start:o,end:a,loop:i}],n,e);const l=a<o?a+s:a,c=!!t._fullLoop&&o===0&&a===s-1;return Wp(t,gS(n,o,l,c),n,e)}function Wp(t,e,n,r){return!r||!r.setContext||!n?e:yS(t,e,n,r)}function yS(t,e,n,r){const s=t._chart.getContext(),i=Vp(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let u=i,f=e[0].start,p=f;function m(v,_,x,C){const S=a?-1:1;if(v!==_){for(v+=l;n[v%l].skip;)v-=S;for(;n[_%l].skip;)_+=S;v%l!==_%l&&(c.push({start:v%l,end:_%l,loop:x,style:C}),u=C,f=_%l)}}for(const v of e){f=a?f:v.start;let _=n[f%l],x;for(p=f+1;p<=v.end;p++){const C=n[p%l];x=Vp(r.setContext(Vs(s,{type:"segment",p0:_,p1:C,p0DataIndex:(p-1)%l,p1DataIndex:p%l,datasetIndex:o}))),vS(x,u)&&m(f,p-1,v.loop,u),_=C,u=x}f<p-1&&m(f,p-1,v.loop,u)}return c}function Vp(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function vS(t,e){if(!e)return!1;const n=[],r=function(s,i){return uf(i)?(n.includes(i)||n.push(i),n.indexOf(i)):i};return JSON.stringify(t,r)!==JSON.stringify(e,r)}function Ga(t,e,n){return t.options.clip?t[n]:e[n]}function bS(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:Ga(n,e,"left"),right:Ga(n,e,"right"),top:Ga(r,e,"top"),bottom:Ga(r,e,"bottom")}:e}function Kv(t,e){const n=e._clip;if(n.disabled)return!1;const r=bS(e,t.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class _S{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,s){const i=n.listeners[s],o=n.duration;i.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=Dv.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,s)=>{if(!r.running||!r.items.length)return;const i=r.items;let o=i.length-1,a=!1,l;for(;o>=0;--o)l=i[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(i[o]=i[i.length-1],i.pop());a&&(s.draw(),this._notify(s,r,e,"progress")),i.length||(r.running=!1,this._notify(s,r,e,"complete"),r.initial=!1),n+=i.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,s)=>Math.max(r,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let s=r.length-1;for(;s>=0;--s)r[s].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var wr=new _S;const Hp="transparent",wS={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=$p(t||Hp),s=r.valid&&$p(e||Hp);return s&&s.valid?s.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class xS{constructor(e,n,r,s){const i=n[r];s=Ha([e.to,s,i,e.from]);const o=Ha([e.from,i,s]);this._active=!0,this._fn=e.fn||wS[e.type||typeof o],this._easing=Do[e.easing]||Do.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const s=this._target[this._prop],i=r-this._start,o=this._duration-i;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=Ha([e.to,n,s,e.from]),this._from=Ha([e.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,s=this._prop,i=this._from,o=this._loop,a=this._to;let l;if(this._active=i!==a&&(o||n<r),!this._active){this._target[s]=a,this._notify(!0);return}if(n<0){this._target[s]=i;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(i,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let s=0;s<r.length;s++)r[s][n]()}}class yf{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Je(e))return;const n=Object.keys(Mt.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const i=e[s];if(!Je(i))return;const o={};for(const a of n)o[a]=i[a];(Ct(i.properties)&&i.properties||[s]).forEach(a=>{(a===s||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,s=CS(e,r);if(!s)return[];const i=this._createAnimations(s,r);return r.$shared&&kS(e.options.$animations,r).then(()=>{e.options=r},()=>{}),i}_createAnimations(e,n){const r=this._properties,s=[],i=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(e,n));continue}const u=n[c];let f=i[c];const p=r.get(c);if(f)if(p&&f.active()){f.update(p,u,a);continue}else f.cancel();if(!p||!p.duration){e[c]=u;continue}i[c]=f=new xS(p,e,c,u),s.push(f)}return s}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return wr.add(this._chart,r),!0}}function kS(t,e){const n=[],r=Object.keys(e);for(let s=0;s<r.length;s++){const i=t[r[s]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function CS(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function Kp(t,e){const n=t&&t.options||{},r=n.reverse,s=n.min===void 0?e:0,i=n.max===void 0?e:0;return{start:r?i:s,end:r?s:i}}function SS(t,e,n){if(n===!1)return!1;const r=Kp(t,n),s=Kp(e,n);return{top:s.end,right:r.end,bottom:s.start,left:r.start}}function PS(t){let e,n,r,s;return Je(t)?(e=t.top,n=t.right,r=t.bottom,s=t.left):e=n=r=s=t,{top:e,right:n,bottom:r,left:s,disabled:t===!1}}function Yv(t,e){const n=[],r=t._getSortedDatasetMetas(e);let s,i;for(s=0,i=r.length;s<i;++s)n.push(r[s].index);return n}function Yp(t,e,n,r={}){const s=t.keys,i=r.mode==="single";let o,a,l,c;if(e===null)return;let u=!1;for(o=0,a=s.length;o<a;++o){if(l=+s[o],l===n){if(u=!0,r.all)continue;break}c=t.values[l],Yt(c)&&(i||e===0||Oi(e)===Oi(c))&&(e+=c)}return!u&&!r.all?0:e}function AS(t,e){const{iScale:n,vScale:r}=e,s=n.axis==="x"?"x":"y",i=r.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[s]:u,[i]:t[u]};return a}function _u(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function IS(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function ES(t){const{min:e,max:n,minDefined:r,maxDefined:s}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function OS(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function Gp(t,e,n,r){for(const s of e.getMatchingVisibleMetas(r).reverse()){const i=t[s.index];if(n&&i>0||!n&&i<0)return s.index}return null}function Xp(t,e){const{chart:n,_cachedMeta:r}=t,s=n._stacks||(n._stacks={}),{iScale:i,vScale:o,index:a}=r,l=i.axis,c=o.axis,u=IS(i,o,r),f=e.length;let p;for(let m=0;m<f;++m){const v=e[m],{[l]:_,[c]:x}=v,C=v._stacks||(v._stacks={});p=C[c]=OS(s,u,_),p[a]=x,p._top=Gp(p,o,!0,r.type),p._bottom=Gp(p,o,!1,r.type);const S=p._visualValues||(p._visualValues={});S[a]=x}}function wu(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function MS(t,e){return Vs(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function DS(t,e,n){return Vs(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function eo(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const s of e){const i=s._stacks;if(!i||i[r]===void 0||i[r][n]===void 0)return;delete i[r][n],i[r]._visualValues!==void 0&&i[r]._visualValues[n]!==void 0&&delete i[r]._visualValues[n]}}}const xu=t=>t==="reset"||t==="none",Qp=(t,e)=>e?t:Object.assign({},t),TS=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:Yv(n,!0),values:null};class vf{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=_u(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&eo(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),s=(f,p,m,v)=>f==="x"?p:f==="r"?v:m,i=n.xAxisID=Qe(r.xAxisID,wu(e,"x")),o=n.yAxisID=Qe(r.yAxisID,wu(e,"y")),a=n.rAxisID=Qe(r.rAxisID,wu(e,"r")),l=n.indexAxis,c=n.iAxisID=s(l,i,o,a),u=n.vAxisID=s(l,o,i,a);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Dp(this._data,this),e._stacked&&eo(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(Je(n)){const s=this._cachedMeta;this._data=AS(n,s)}else if(r!==n){if(r){Dp(r,this);const s=this._cachedMeta;eo(s),s._parsed=[]}n&&Object.isExtensible(n)&&hC(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let s=!1;this._dataCheck();const i=n._stacked;n._stacked=_u(n.vScale,n),n.stack!==r.stack&&(s=!0,eo(n),n.stack=r.stack),this._resyncElements(e),(s||i!==n._stacked)&&(Xp(this,n._parsed),n._stacked=_u(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:s}=this,{iScale:i,_stacked:o}=r,a=i.axis;let l=e===0&&n===s.length?!0:r._sorted,c=e>0&&r._parsed[e-1],u,f,p;if(this._parsing===!1)r._parsed=s,r._sorted=!0,p=s;else{Ct(s[e])?p=this.parseArrayData(r,s,e,n):Je(s[e])?p=this.parseObjectData(r,s,e,n):p=this.parsePrimitiveData(r,s,e,n);const m=()=>f[a]===null||c&&f[a]<c[a];for(u=0;u<n;++u)r._parsed[u+e]=f=p[u],l&&(m()&&(l=!1),c=f);r._sorted=l}o&&Xp(this,p)}parsePrimitiveData(e,n,r,s){const{iScale:i,vScale:o}=e,a=i.axis,l=o.axis,c=i.getLabels(),u=i===o,f=new Array(s);let p,m,v;for(p=0,m=s;p<m;++p)v=p+r,f[p]={[a]:u||i.parse(c[v],v),[l]:o.parse(n[v],v)};return f}parseArrayData(e,n,r,s){const{xScale:i,yScale:o}=e,a=new Array(s);let l,c,u,f;for(l=0,c=s;l<c;++l)u=l+r,f=n[u],a[l]={x:i.parse(f[0],u),y:o.parse(f[1],u)};return a}parseObjectData(e,n,r,s){const{xScale:i,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(s);let u,f,p,m;for(u=0,f=s;u<f;++u)p=u+r,m=n[p],c[u]={x:i.parse(Yo(m,a),p),y:o.parse(Yo(m,l),p)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const s=this.chart,i=this._cachedMeta,o=n[e.axis],a={keys:Yv(s,!0),values:n._stacks[e.axis]._visualValues};return Yp(a,o,i.index,{mode:r})}updateRangeFromParsed(e,n,r,s){const i=r[n.axis];let o=i===null?NaN:i;const a=s&&r._stacks[n.axis];s&&a&&(s.values=a,o=Yp(s,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,s=r._parsed,i=r._sorted&&e===r.iScale,o=s.length,a=this._getOtherScale(e),l=TS(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:f}=ES(a);let p,m;function v(){m=s[p];const _=m[a.axis];return!Yt(m[e.axis])||u>_||f<_}for(p=0;p<o&&!(!v()&&(this.updateRangeFromParsed(c,e,m,l),i));++p);if(i){for(p=o-1;p>=0;--p)if(!v()){this.updateRangeFromParsed(c,e,m,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let s,i,o;for(s=0,i=n.length;s<i;++s)o=n[s][e.axis],Yt(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,s=n.vScale,i=this.getParsed(e);return{label:r?""+r.getLabelForValue(i[r.axis]):"",value:s?""+s.getLabelForValue(i[s.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=PS(Qe(this.options.clip,SS(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,s=r.data||[],i=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||s.length-a,c=this.options.drawActiveElementsOnTop;let u;for(r.dataset&&r.dataset.draw(e,i,a,l),u=a;u<a+l;++u){const f=s[u];f.hidden||(f.active&&c?o.push(f):f.draw(e,i))}for(u=0;u<o.length;++u)o[u].draw(e,i)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const s=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];i=o.$context||(o.$context=DS(this.getContext(),e,o)),i.parsed=this.getParsed(e),i.raw=s.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=MS(this.chart.getContext(),this.index)),i.dataset=s,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=r,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const s=n==="active",i=this._cachedDataOpts,o=e+"-"+n,a=i[o],l=this.enableOptionSharing&&Dn(r);if(a)return Qp(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),f=s?[`${e}Hover`,"hover",e,""]:[e,""],p=c.getOptionScopes(this.getDataset(),u),m=Object.keys(Mt.elements[e]),v=()=>this.getContext(r,s,n),_=c.resolveNamedOptions(p,m,v,f);return _.$shared&&(_.$shared=l,i[o]=Object.freeze(Qp(_,l))),_}_resolveAnimations(e,n,r){const s=this.chart,i=this._cachedDataOpts,o=`animation-${n}`,a=i[o];if(a)return a;let l;if(s.options.animation!==!1){const u=this.chart.config,f=u.datasetAnimationScopeKeys(this._type,n),p=u.getOptionScopes(this.getDataset(),f);l=u.createResolver(p,this.getContext(e,r,n))}const c=new yf(s,l&&l.animations);return l&&l._cacheable&&(i[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||xu(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),s=this._sharedOptions,i=this.getSharedOptions(r),o=this.includeOptions(n,i)||i!==s;return this.updateSharedOptions(i,n,r),{sharedOptions:i,includeOptions:o}}updateElement(e,n,r,s){xu(s)?Object.assign(e,r):this._resolveAnimations(n,s).update(e,r)}updateSharedOptions(e,n,r){e&&!xu(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,s){e.active=s;const i=this.getStyle(n,s);this._resolveAnimations(n,r,s).update(e,{options:!s&&this.getSharedOptions(i)||i})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const s=r.length,i=n.length,o=Math.min(i,s);o&&this.parse(0,o),i>s?this._insertElements(s,i-s,e):i<s&&this._removeElements(i,s-i)}_insertElements(e,n,r=!0){const s=this._cachedMeta,i=s.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(i),a=e;a<o;++a)i[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(e,n),r&&this.updateElements(i,e,n,"reset")}updateElements(e,n,r,s){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const s=r._parsed.splice(e,n);r._stacked&&eo(r,s)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,s]=e;this[n](r,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function RS(t,e,n){let r=1,s=1,i=0,o=0;if(e<Wt){const a=t,l=a+e,c=Math.cos(a),u=Math.sin(a),f=Math.cos(l),p=Math.sin(l),m=(P,M,D)=>Nl(P,a,l,!0)?1:Math.max(M,M*n,D,D*n),v=(P,M,D)=>Nl(P,a,l,!0)?-1:Math.min(M,M*n,D,D*n),_=m(0,c,f),x=m(Zt,u,p),C=v(ut,c,f),S=v(ut+Zt,u,p);r=(_-C)/2,s=(x-S)/2,i=-(_+C)/2,o=-(x+S)/2}return{ratioX:r,ratioY:s,offsetX:i,offsetY:o}}class $S extends vf{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:s}}=e.legend.options;return n.labels.map((i,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:i,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}}};constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const r=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=r;else{let i=l=>+r[l];if(Je(r[e])){const{key:l="value"}=this._parsing;i=c=>+Yo(r[c],l)}let o,a;for(o=e,a=e+n;o<a;++o)s._parsed[o]=i(o)}}_getRotation(){return Vt(this.options.rotation-90)}_getCircumference(){return Vt(this.options.circumference)}_getRotationExtents(){let e=Wt,n=-Wt;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const s=this.chart.getDatasetMeta(r).controller,i=s._getRotation(),o=s._getCircumference();e=Math.min(e,i),n=Math.max(n,i+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:r}=n,s=this._cachedMeta,i=s.data,o=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,a=Math.max((Math.min(r.width,r.height)-o)/2,0),l=Math.min(Jk(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:f}=this._getRotationExtents(),{ratioX:p,ratioY:m,offsetX:v,offsetY:_}=RS(f,u,l),x=(r.width-o)/p,C=(r.height-o)/m,S=Math.max(Math.min(x,C)/2,0),P=Av(this.options.radius,S),M=Math.max(P*l,0),D=(P-M)/this._getVisibleDatasetWeightTotal();this.offsetX=v*P,this.offsetY=_*P,s.total=this.calculateTotal(),this.outerRadius=P-D*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-D*c,0),this.updateElements(i,0,i.length,e)}_circumference(e,n){const r=this.options,s=this._cachedMeta,i=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||s._parsed[e]===null||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*i/Wt)}updateElements(e,n,r,s){const i=s==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,u=(a.left+a.right)/2,f=(a.top+a.bottom)/2,p=i&&c.animateScale,m=p?0:this.innerRadius,v=p?0:this.outerRadius,{sharedOptions:_,includeOptions:x}=this._getSharedOptions(n,s);let C=this._getRotation(),S;for(S=0;S<n;++S)C+=this._circumference(S,i);for(S=n;S<n+r;++S){const P=this._circumference(S,i),M=e[S],D={x:u+this.offsetX,y:f+this.offsetY,startAngle:C,endAngle:C+P,circumference:P,outerRadius:v,innerRadius:m};x&&(D.options=_||this.resolveDataElementOptions(S,M.active?"active":s)),C+=P,this.updateElement(M,S,D,s)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let r=0,s;for(s=0;s<n.length;s++){const i=e._parsed[s];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(s)&&!n[s].hidden&&(r+=Math.abs(i))}return r}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?Wt*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,s=r.data.labels||[],i=df(n._parsed[e],r.options.locale);return{label:s[e]||"",value:i}}getMaxBorderWidth(e){let n=0;const r=this.chart;let s,i,o,a,l;if(!e){for(s=0,i=r.data.datasets.length;s<i;++s)if(r.isDatasetVisible(s)){o=r.getDatasetMeta(s),e=o.data,a=o.controller;break}}if(!e)return 0;for(s=0,i=e.length;s<i;++s)l=a.resolveDataElementOptions(s),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let r=0,s=e.length;r<s;++r){const i=this.resolveDataElementOptions(r);n=Math.max(n,i.offset||0,i.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(e){return Math.max(Qe(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class FS extends vf{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:s=[],_dataset:i}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=yC(n,s,o);this._drawStart=a,this._drawCount=l,vC(n)&&(a=0,l=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!i._decimated,r.points=s;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:c},e),this.updateElements(s,a,l,e)}updateElements(e,n,r,s){const i=s==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:f}=this._getSharedOptions(n,s),p=o.axis,m=a.axis,{spanGaps:v,segment:_}=this.options,x=zs(v)?v:Number.POSITIVE_INFINITY,C=this.chart._animationsDisabled||i||s==="none",S=n+r,P=e.length;let M=n>0&&this.getParsed(n-1);for(let D=0;D<P;++D){const A=e[D],T=C?A:{};if(D<n||D>=S){T.skip=!0;continue}const B=this.getParsed(D),E=_t(B[m]),Q=T[p]=o.getPixelForValue(B[p],D),V=T[m]=i||E?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,B,l):B[m],D);T.skip=isNaN(Q)||isNaN(V)||E,T.stop=D>0&&Math.abs(B[p]-M[p])>x,_&&(T.parsed=B,T.raw=c.data[D]),f&&(T.options=u||this.resolveDataElementOptions(D,A.active?"active":s)),C||this.updateElement(A,D,T,s),M=B}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,s=e.data||[];if(!s.length)return r;const i=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,i,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}function bs(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class bf{static override(e){Object.assign(bf.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return bs()}parse(){return bs()}format(){return bs()}add(){return bs()}diff(){return bs()}startOf(){return bs()}endOf(){return bs()}}var LS={_date:bf};function BS(t,e,n,r){const{controller:s,data:i,_sorted:o}=t,a=s._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&i.length){const c=a._reversePixels?dC:Rs;if(r){if(s._sharedOptions){const u=i[0],f=typeof u.getRange=="function"&&u.getRange(e);if(f){const p=c(i,e,n-f),m=c(i,e,n+f);return{lo:p.lo,hi:m.hi}}}}else{const u=c(i,e,n);if(l){const{vScale:f}=s._cachedMeta,{_parsed:p}=t,m=p.slice(0,u.lo+1).reverse().findIndex(_=>!_t(_[f.axis]));u.lo-=Math.max(0,m);const v=p.slice(u.hi).findIndex(_=>!_t(_[f.axis]));u.hi+=Math.max(0,v)}return u}}return{lo:0,hi:i.length-1}}function pc(t,e,n,r,s){const i=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=i.length;a<l;++a){const{index:c,data:u}=i[a],{lo:f,hi:p}=BS(i[a],e,o,s);for(let m=f;m<=p;++m){const v=u[m];v.skip||r(v,c,m)}}}function jS(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,s){const i=e?Math.abs(r.x-s.x):0,o=n?Math.abs(r.y-s.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function ku(t,e,n,r,s){const i=[];return!s&&!t.isPointInArea(e)||pc(t,n,e,function(a,l,c){!s&&!Go(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&i.push({element:a,datasetIndex:l,index:c})},!0),i}function NS(t,e,n,r){let s=[];function i(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],r),{angle:f}=pd(o,{x:e.x,y:e.y});Nl(f,c,u)&&s.push({element:o,datasetIndex:a,index:l})}return pc(t,n,e,i),s}function zS(t,e,n,r,s,i){let o=[];const a=jS(n);let l=Number.POSITIVE_INFINITY;function c(u,f,p){const m=u.inRange(e.x,e.y,s);if(r&&!m)return;const v=u.getCenterPoint(s);if(!(!!i||t.isPointInArea(v))&&!m)return;const x=a(e,v);x<l?(o=[{element:u,datasetIndex:f,index:p}],l=x):x===l&&o.push({element:u,datasetIndex:f,index:p})}return pc(t,n,e,c),o}function Cu(t,e,n,r,s,i){return!i&&!t.isPointInArea(e)?[]:n==="r"&&!r?NS(t,e,n,s):zS(t,e,n,r,s,i)}function Jp(t,e,n,r,s){const i=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return pc(t,n,e,(l,c,u)=>{l[o]&&l[o](e[n],s)&&(i.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,s))}),r&&!a?[]:i}var qS={modes:{index(t,e,n,r){const s=Os(e,t),i=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?ku(t,s,i,r,o):Cu(t,s,i,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,f=c.data[u];f&&!f.skip&&l.push({element:f,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,r){const s=Os(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?ku(t,s,i,r,o):Cu(t,s,i,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,r){const s=Os(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return ku(t,s,i,r,o)},nearest(t,e,n,r){const s=Os(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return Cu(t,s,i,n.intersect,r,o)},x(t,e,n,r){const s=Os(e,t);return Jp(t,s,"x",n.intersect,r)},y(t,e,n,r){const s=Os(e,t);return Jp(t,s,"y",n.intersect,r)}}};const Gv=["left","top","right","bottom"];function to(t,e){return t.filter(n=>n.pos===e)}function Zp(t,e){return t.filter(n=>Gv.indexOf(n.pos)===-1&&n.box.axis===e)}function no(t,e){return t.sort((n,r)=>{const s=e?r:n,i=e?n:r;return s.weight===i.weight?s.index-i.index:s.weight-i.weight})}function US(t){const e=[];let n,r,s,i,o,a;for(n=0,r=(t||[]).length;n<r;++n)s=t[n],{position:i,options:{stack:o,stackWeight:a=1}}=s,e.push({index:n,box:s,pos:i,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&i+o,stackWeight:a});return e}function WS(t){const e={};for(const n of t){const{stack:r,pos:s,stackWeight:i}=n;if(!r||!Gv.includes(s))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}function VS(t,e){const n=WS(t),{vBoxMaxWidth:r,hBoxMaxHeight:s}=e;let i,o,a;for(i=0,o=t.length;i<o;++i){a=t[i];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*r:l&&e.availableWidth,a.height=s):(a.width=r,a.height=u?u*s:l&&e.availableHeight)}return n}function HS(t){const e=US(t),n=no(e.filter(c=>c.box.fullSize),!0),r=no(to(e,"left"),!0),s=no(to(e,"right")),i=no(to(e,"top"),!0),o=no(to(e,"bottom")),a=Zp(e,"x"),l=Zp(e,"y");return{fullSize:n,leftAndTop:r.concat(i),rightAndBottom:s.concat(l).concat(o).concat(a),chartArea:to(e,"chartArea"),vertical:r.concat(s).concat(l),horizontal:i.concat(o).concat(a)}}function eg(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function Xv(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function KS(t,e,n,r){const{pos:s,box:i}=n,o=t.maxPadding;if(!Je(s)){n.size&&(t[s]-=n.size);const f=r[n.stack]||{size:0,count:1};f.size=Math.max(f.size,n.horizontal?i.height:i.width),n.size=f.size/f.count,t[s]+=n.size}i.getPadding&&Xv(o,i.getPadding());const a=Math.max(0,e.outerWidth-eg(o,t,"left","right")),l=Math.max(0,e.outerHeight-eg(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function YS(t){const e=t.maxPadding;function n(r){const s=Math.max(e[r]-t[r],0);return t[r]+=s,s}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function GS(t,e){const n=e.maxPadding;function r(s){const i={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{i[o]=Math.max(e[o],n[o])}),i}return r(t?["left","right"]:["top","bottom"])}function go(t,e,n,r){const s=[];let i,o,a,l,c,u;for(i=0,o=t.length,c=0;i<o;++i){a=t[i],l=a.box,l.update(a.width||e.w,a.height||e.h,GS(a.horizontal,e));const{same:f,other:p}=KS(e,n,a,r);c|=f&&s.length,u=u||p,l.fullSize||s.push(a)}return c&&go(s,e,n,r)||u}function Xa(t,e,n,r,s){t.top=n,t.left=e,t.right=e+r,t.bottom=n+s,t.width=r,t.height=s}function tg(t,e,n,r){const s=n.padding;let{x:i,y:o}=e;for(const a of t){const l=a.box,c=r[a.stack]||{placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const f=e.w*u,p=c.size||l.height;Dn(c.start)&&(o=c.start),l.fullSize?Xa(l,s.left,o,n.outerWidth-s.right-s.left,p):Xa(l,e.left+c.placed,o,f,p),c.start=o,c.placed+=f,o=l.bottom}else{const f=e.h*u,p=c.size||l.width;Dn(c.start)&&(i=c.start),l.fullSize?Xa(l,i,s.top,p,n.outerHeight-s.bottom-s.top):Xa(l,i,e.top+c.placed,p,f),c.start=i,c.placed+=f,i=l.right}}e.x=i,e.y=o}var Nn={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const s=dn(t.options.layout.padding),i=Math.max(e-s.width,0),o=Math.max(n-s.height,0),a=HS(t.boxes),l=a.vertical,c=a.horizontal;ht(t.boxes,_=>{typeof _.beforeLayout=="function"&&_.beforeLayout()});const u=l.reduce((_,x)=>x.box.options&&x.box.options.display===!1?_:_+1,0)||1,f=Object.freeze({outerWidth:e,outerHeight:n,padding:s,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/u,hBoxMaxHeight:o/2}),p=Object.assign({},s);Xv(p,dn(r));const m=Object.assign({maxPadding:p,w:i,h:o,x:s.left,y:s.top},s),v=VS(l.concat(c),f);go(a.fullSize,m,f,v),go(l,m,f,v),go(c,m,f,v)&&go(l,m,f,v),YS(m),tg(a.leftAndTop,m,f,v),m.x+=m.w,m.y+=m.h,tg(a.rightAndBottom,m,f,v),t.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},ht(a.chartArea,_=>{const x=_.box;Object.assign(x,t.chartArea),x.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class Qv{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,s){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,s?Math.floor(n/s):r)}}isAttached(e){return!0}updateConfig(e){}}class XS extends Qv{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const ml="$chartjs",QS={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},ng=t=>t===null||t==="";function JS(t,e){const n=t.style,r=t.getAttribute("height"),s=t.getAttribute("width");if(t[ml]={initial:{height:r,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",ng(s)){const i=qp(t,"width");i!==void 0&&(t.width=i)}if(ng(r))if(t.style.height==="")t.height=t.width/(e||2);else{const i=qp(t,"height");i!==void 0&&(t.height=i)}return t}const Jv=lS?{passive:!0}:!1;function ZS(t,e,n){t&&t.addEventListener(e,n,Jv)}function eP(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,Jv)}function tP(t,e){const n=QS[t.type]||t.type,{x:r,y:s}=Os(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:s!==void 0?s:null}}function Ul(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function nP(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||Ul(a.addedNodes,r),o=o&&!Ul(a.removedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function rP(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||Ul(a.removedNodes,r),o=o&&!Ul(a.addedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const Qo=new Map;let rg=0;function Zv(){const t=window.devicePixelRatio;t!==rg&&(rg=t,Qo.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function sP(t,e){Qo.size||window.addEventListener("resize",Zv),Qo.set(t,e)}function iP(t){Qo.delete(t),Qo.size||window.removeEventListener("resize",Zv)}function oP(t,e,n){const r=t.canvas,s=r&&mf(r);if(!s)return;const i=Tv((a,l)=>{const c=s.clientWidth;n(a,l),c<s.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||i(c,u)});return o.observe(s),sP(t,i),o}function Su(t,e,n){n&&n.disconnect(),e==="resize"&&iP(t)}function aP(t,e,n){const r=t.canvas,s=Tv(i=>{t.ctx!==null&&n(tP(i,t))},t);return ZS(r,e,s),s}class lP extends Qv{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(JS(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[ml])return!1;const r=n[ml].initial;["height","width"].forEach(i=>{const o=r[i];_t(o)?n.removeAttribute(i):n.setAttribute(i,o)});const s=r.style||{};return Object.keys(s).forEach(i=>{n.style[i]=s[i]}),n.width=n.width,delete n[ml],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const s=e.$proxies||(e.$proxies={}),o={attach:nP,detach:rP,resize:oP}[n]||aP;s[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),s=r[n];if(!s)return;({attach:Su,detach:Su,resize:Su}[n]||eP)(e,n,s),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,s){return aS(e,n,r,s)}isAttached(e){const n=e&&mf(e);return!!(n&&n.isConnected)}}function cP(t){return!gf()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?XS:lP}let kn=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return zs(this.x)&&zs(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const s={};return e.forEach(i=>{s[i]=r[i]&&r[i].active()?r[i]._to:this[i]}),s}};function uP(t,e){const n=t.options.ticks,r=dP(t),s=Math.min(n.maxTicksLimit||r,r),i=n.major.enabled?hP(e):[],o=i.length,a=i[0],l=i[o-1],c=[];if(o>s)return pP(e,c,i,o/s),c;const u=fP(i,e,s);if(o>0){let f,p;const m=o>1?Math.round((l-a)/(o-1)):null;for(Qa(e,c,u,_t(m)?0:a-m,a),f=0,p=o-1;f<p;f++)Qa(e,c,u,i[f],i[f+1]);return Qa(e,c,u,l,_t(m)?e.length:l+m),c}return Qa(e,c,u),c}function dP(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),s=t._maxLength/n;return Math.floor(Math.min(r,s))}function fP(t,e,n){const r=gP(t),s=e.length/n;if(!r)return Math.max(s,1);const i=iC(r);for(let o=0,a=i.length-1;o<a;o++){const l=i[o];if(l>s)return l}return Math.max(s,1)}function hP(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function pP(t,e,n,r){let s=0,i=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===i&&(e.push(t[o]),s++,i=n[s*r])}function Qa(t,e,n,r,s){const i=Qe(r,0),o=Math.min(Qe(s,t.length),t.length);let a=0,l,c,u;for(n=Math.ceil(n),s&&(l=s-r,n=l/Math.floor(l/n)),u=i;u<0;)a++,u=Math.round(i+a*n);for(c=Math.max(i,0);c<o;c++)c===u&&(e.push(t[c]),a++,u=Math.round(i+a*n))}function gP(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const mP=t=>t==="left"?"right":t==="right"?"left":t,sg=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,ig=(t,e)=>Math.min(e||t,t);function og(t,e){const n=[],r=t.length/e,s=t.length;let i=0;for(;i<s;i+=r)n.push(t[Math.floor(i)]);return n}function yP(t,e,n){const r=t.ticks.length,s=Math.min(e,r-1),i=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(s),c;if(!(n&&(r===1?c=Math.max(l-i,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(s-1))/2,l+=s<e?c:-c,l<i-a||l>o+a)))return l}function vP(t,e){ht(t,n=>{const r=n.gc,s=r.length/2;let i;if(s>e){for(i=0;i<s;++i)delete n.data[r[i]];r.splice(0,s)}})}function ro(t){return t.drawTicks?t.tickLength:0}function ag(t,e){if(!t.display)return 0;const n=Lt(t.font,e),r=dn(t.padding);return(Ct(t.text)?t.text.length:1)*n.lineHeight+r.height}function bP(t,e){return Vs(t,{scale:e,type:"scale"})}function _P(t,e,n){return Vs(t,{tick:n,index:e,type:"tick"})}function wP(t,e,n){let r=cf(t);return(n&&e!=="right"||!n&&e==="right")&&(r=mP(r)),r}function xP(t,e,n,r){const{top:s,left:i,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let f=0,p,m,v;const _=o-s,x=a-i;if(t.isHorizontal()){if(m=sn(r,i,a),Je(n)){const C=Object.keys(n)[0],S=n[C];v=u[C].getPixelForValue(S)+_-e}else n==="center"?v=(c.bottom+c.top)/2+_-e:v=sg(t,n,e);p=a-i}else{if(Je(n)){const C=Object.keys(n)[0],S=n[C];m=u[C].getPixelForValue(S)-x+e}else n==="center"?m=(c.left+c.right)/2-x+e:m=sg(t,n,e);v=sn(r,o,s),f=n==="left"?-Zt:Zt}return{titleX:m,titleY:v,maxWidth:p,rotation:f}}class Li extends kn{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:s}=this;return e=Zn(e,Number.POSITIVE_INFINITY),n=Zn(n,Number.NEGATIVE_INFINITY),r=Zn(r,Number.POSITIVE_INFINITY),s=Zn(s,Number.NEGATIVE_INFINITY),{min:Zn(e,r),max:Zn(n,s),minDefined:Yt(e),maxDefined:Yt(n)}}getMinMax(e){let{min:n,max:r,minDefined:s,maxDefined:i}=this.getUserBounds(),o;if(s&&i)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),s||(n=Math.min(n,o.min)),i||(r=Math.max(r,o.max));return n=i&&n>r?r:n,r=s&&n>r?n:r,{min:Zn(n,Zn(r,n)),max:Zn(r,Zn(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){pt(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:s,grace:i,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=jC(this,i,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?og(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=uP(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){pt(this.options.afterUpdate,[this])}beforeSetDimensions(){pt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){pt(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),pt(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){pt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,s,i;for(r=0,s=e.length;r<s;r++)i=e[r],i.label=pt(n.callback,[i.value,r,e],this)}afterTickToLabelConversion(){pt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){pt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=ig(this.ticks.length,e.ticks.maxTicksLimit),s=n.minRotation||0,i=n.maxRotation;let o=s,a,l,c;if(!this._isVisible()||!n.display||s>=i||r<=1||!this.isHorizontal()){this.labelRotation=s;return}const u=this._getLabelSizes(),f=u.widest.width,p=u.highest.height,m=jn(this.chart.width-f,0,this.maxWidth);a=e.offset?this.maxWidth/r:m/(r-1),f+6>a&&(a=m/(r-(e.offset?.5:1)),l=this.maxHeight-ro(e.grid)-n.padding-ag(e.title,this.chart.options.font),c=Math.sqrt(f*f+p*p),o=Ov(Math.min(Math.asin(jn((u.highest.height+6)/a,-1,1)),Math.asin(jn(l/c,-1,1))-Math.asin(jn(p/c,-1,1)))),o=Math.max(s,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){pt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){pt(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:s,grid:i}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=ag(s,n.options.font);if(a?(e.width=this.maxWidth,e.height=ro(i)+l):(e.height=this.maxHeight,e.width=ro(i)+l),r.display&&this.ticks.length){const{first:c,last:u,widest:f,highest:p}=this._getLabelSizes(),m=r.padding*2,v=Vt(this.labelRotation),_=Math.cos(v),x=Math.sin(v);if(a){const C=r.mirror?0:x*f.width+_*p.height;e.height=Math.min(this.maxHeight,e.height+C+m)}else{const C=r.mirror?0:_*f.width+x*p.height;e.width=Math.min(this.maxWidth,e.width+C+m)}this._calculatePadding(c,u,x,_)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,s){const{ticks:{align:i,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let p=0,m=0;l?c?(p=s*e.width,m=r*n.height):(p=r*e.height,m=s*n.width):i==="start"?m=n.width:i==="end"?p=e.width:i!=="inner"&&(p=e.width/2,m=n.width/2),this.paddingLeft=Math.max((p-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((m-f+o)*this.width/(this.width-f),0)}else{let u=n.height/2,f=e.height/2;i==="start"?(u=0,f=e.height):i==="end"&&(u=n.height,f=0),this.paddingTop=u+o,this.paddingBottom=f+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){pt(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)_t(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=og(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:s,_longestTextCache:i}=this,o=[],a=[],l=Math.floor(n/ig(n,r));let c=0,u=0,f,p,m,v,_,x,C,S,P,M,D;for(f=0;f<n;f+=l){if(v=e[f].label,_=this._resolveTickFontOptions(f),s.font=x=_.string,C=i[x]=i[x]||{data:{},gc:[]},S=_.lineHeight,P=M=0,!_t(v)&&!Ct(v))P=Lp(s,C.data,C.gc,P,v),M=S;else if(Ct(v))for(p=0,m=v.length;p<m;++p)D=v[p],!_t(D)&&!Ct(D)&&(P=Lp(s,C.data,C.gc,P,D),M+=S);o.push(P),a.push(M),c=Math.max(P,c),u=Math.max(M,u)}vP(i,n);const A=o.indexOf(c),T=a.indexOf(u),B=E=>({width:o[E]||0,height:a[E]||0});return{first:B(0),last:B(n-1),widest:B(A),highest:B(T),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return uC(this._alignToPixels?vs(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=_P(this.getContext(),e,r))}return this.$context||(this.$context=bP(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Vt(this.labelRotation),r=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,a=i?i.widest.width+o:0,l=i?i.highest.height+o:0;return this.isHorizontal()?l*r>a*s?a/r:l/s:l*s<a*r?l/r:a/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,s=this.options,{grid:i,position:o,border:a}=s,l=i.offset,c=this.isHorizontal(),f=this.ticks.length+(l?1:0),p=ro(i),m=[],v=a.setContext(this.getContext()),_=v.display?v.width:0,x=_/2,C=function(we){return vs(r,we,_)};let S,P,M,D,A,T,B,E,Q,V,z,pe;if(o==="top")S=C(this.bottom),T=this.bottom-p,E=S-x,V=C(e.top)+x,pe=e.bottom;else if(o==="bottom")S=C(this.top),V=e.top,pe=C(e.bottom)-x,T=S+x,E=this.top+p;else if(o==="left")S=C(this.right),A=this.right-p,B=S-x,Q=C(e.left)+x,z=e.right;else if(o==="right")S=C(this.left),Q=e.left,z=C(e.right)-x,A=S+x,B=this.left+p;else if(n==="x"){if(o==="center")S=C((e.top+e.bottom)/2+.5);else if(Je(o)){const we=Object.keys(o)[0],xe=o[we];S=C(this.chart.scales[we].getPixelForValue(xe))}V=e.top,pe=e.bottom,T=S+x,E=T+p}else if(n==="y"){if(o==="center")S=C((e.left+e.right)/2);else if(Je(o)){const we=Object.keys(o)[0],xe=o[we];S=C(this.chart.scales[we].getPixelForValue(xe))}A=S-x,B=A-p,Q=e.left,z=e.right}const me=Qe(s.ticks.maxTicksLimit,f),Ce=Math.max(1,Math.ceil(f/me));for(P=0;P<f;P+=Ce){const we=this.getContext(P),xe=i.setContext(we),te=a.setContext(we),ee=xe.lineWidth,Y=xe.color,Le=te.dash||[],ke=te.dashOffset,We=xe.tickWidth,wt=xe.tickColor,gt=xe.tickBorderDash||[],it=xe.tickBorderDashOffset;M=yP(this,P,l),M!==void 0&&(D=vs(r,M,ee),c?A=B=Q=z=D:T=E=V=pe=D,m.push({tx1:A,ty1:T,tx2:B,ty2:E,x1:Q,y1:V,x2:z,y2:pe,width:ee,color:Y,borderDash:Le,borderDashOffset:ke,tickWidth:We,tickColor:wt,tickBorderDash:gt,tickBorderDashOffset:it}))}return this._ticksLength=f,this._borderValue=S,m}_computeLabelItems(e){const n=this.axis,r=this.options,{position:s,ticks:i}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:f}=i,p=ro(r.grid),m=p+u,v=f?-u:m,_=-Vt(this.labelRotation),x=[];let C,S,P,M,D,A,T,B,E,Q,V,z,pe="middle";if(s==="top")A=this.bottom-v,T=this._getXAxisLabelAlignment();else if(s==="bottom")A=this.top+v,T=this._getXAxisLabelAlignment();else if(s==="left"){const Ce=this._getYAxisLabelAlignment(p);T=Ce.textAlign,D=Ce.x}else if(s==="right"){const Ce=this._getYAxisLabelAlignment(p);T=Ce.textAlign,D=Ce.x}else if(n==="x"){if(s==="center")A=(e.top+e.bottom)/2+m;else if(Je(s)){const Ce=Object.keys(s)[0],we=s[Ce];A=this.chart.scales[Ce].getPixelForValue(we)+m}T=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")D=(e.left+e.right)/2-m;else if(Je(s)){const Ce=Object.keys(s)[0],we=s[Ce];D=this.chart.scales[Ce].getPixelForValue(we)}T=this._getYAxisLabelAlignment(p).textAlign}n==="y"&&(l==="start"?pe="top":l==="end"&&(pe="bottom"));const me=this._getLabelSizes();for(C=0,S=a.length;C<S;++C){P=a[C],M=P.label;const Ce=i.setContext(this.getContext(C));B=this.getPixelForTick(C)+i.labelOffset,E=this._resolveTickFontOptions(C),Q=E.lineHeight,V=Ct(M)?M.length:1;const we=V/2,xe=Ce.color,te=Ce.textStrokeColor,ee=Ce.textStrokeWidth;let Y=T;o?(D=B,T==="inner"&&(C===S-1?Y=this.options.reverse?"left":"right":C===0?Y=this.options.reverse?"right":"left":Y="center"),s==="top"?c==="near"||_!==0?z=-V*Q+Q/2:c==="center"?z=-me.highest.height/2-we*Q+Q:z=-me.highest.height+Q/2:c==="near"||_!==0?z=Q/2:c==="center"?z=me.highest.height/2-we*Q:z=me.highest.height-V*Q,f&&(z*=-1),_!==0&&!Ce.showLabelBackdrop&&(D+=Q/2*Math.sin(_))):(A=B,z=(1-V)*Q/2);let Le;if(Ce.showLabelBackdrop){const ke=dn(Ce.backdropPadding),We=me.heights[C],wt=me.widths[C];let gt=z-ke.top,it=0-ke.left;switch(pe){case"middle":gt-=We/2;break;case"bottom":gt-=We;break}switch(T){case"center":it-=wt/2;break;case"right":it-=wt;break;case"inner":C===S-1?it-=wt:C>0&&(it-=wt/2);break}Le={left:it,top:gt,width:wt+ke.width,height:We+ke.height,color:Ce.backdropColor}}x.push({label:M,font:E,textOffset:z,options:{rotation:_,color:xe,strokeColor:te,strokeWidth:ee,textAlign:Y,textBaseline:pe,translation:[D,A],backdrop:Le}})}return x}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Vt(this.labelRotation))return e==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:s,padding:i}}=this.options,o=this._getLabelSizes(),a=e+i,l=o.widest.width;let c,u;return n==="left"?s?(u=this.right+i,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?s?(u=this.left+i,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:s,width:i,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,s,i,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(i=>i.value===e);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const a=(l,c,u)=>{!u.width||!u.color||(r.save(),r.lineWidth=u.width,r.strokeStyle=u.color,r.setLineDash(u.borderDash||[]),r.lineDashOffset=u.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(i=0,o=s.length;i<o;++i){const l=s[i];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:s}}=this,i=r.setContext(this.getContext()),o=r.display?i.width:0;if(!o)return;const a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,f,p;this.isHorizontal()?(c=vs(e,this.left,o)-o/2,u=vs(e,this.right,a)+a/2,f=p=l):(f=vs(e,this.top,o)-o/2,p=vs(e,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(c,f),n.lineTo(u,p),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,s=this._computeLabelArea();s&&sa(r,s);const i=this.getLabelItems(e);for(const o of i){const a=o.options,l=o.font,c=o.label,u=o.textOffset;Xo(r,c,0,u,l,a)}s&&ia(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:s}}=this;if(!r.display)return;const i=Lt(r.font),o=dn(r.padding),a=r.align;let l=i.lineHeight/2;n==="bottom"||n==="center"||Je(n)?(l+=o.bottom,Ct(r.text)&&(l+=i.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:f,rotation:p}=xP(this,l,n,a);Xo(e,r.text,0,0,i,{color:r.color,maxWidth:f,rotation:p,textAlign:wP(a,n,s),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=Qe(e.grid&&e.grid.z,-1),s=Qe(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Li.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:r,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",s=[];let i,o;for(i=0,o=n.length;i<o;++i){const a=n[i];a[r]===this.id&&(!e||a.type===e)&&s.push(a)}return s}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Lt(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Ja{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;SP(n)&&(r=this.register(n));const s=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in s||(s[i]=e,kP(e,o,r),this.override&&Mt.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,s=this.scope;r in n&&delete n[r],s&&r in Mt[s]&&(delete Mt[s][r],this.override&&delete qs[r])}}function kP(t,e,n){const r=Ko(Object.create(null),[n?Mt.get(n):{},Mt.get(e),t.defaults]);Mt.set(e,r),t.defaultRoutes&&CP(e,t.defaultRoutes),t.descriptors&&Mt.describe(e,t.descriptors)}function CP(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),s=r.pop(),i=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");Mt.route(i,s,l,a)})}function SP(t){return"id"in t&&"defaults"in t}class PP{constructor(){this.controllers=new Ja(vf,"datasets",!0),this.elements=new Ja(kn,"elements"),this.plugins=new Ja(Object,"plugins"),this.scales=new Ja(Li,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(s=>{const i=r||this._getRegistryForType(s);r||i.isForType(s)||i===this.plugins&&s.id?this._exec(e,i,s):ht(s,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const s=of(e);pt(r["before"+s],[],r),n[e](r),pt(r["after"+s],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const s=n.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return s}}var rr=new PP;class AP{constructor(){this._init=[]}notify(e,n,r,s){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=s?this._descriptors(e).filter(s):this._descriptors(e),o=this._notify(i,e,n,r);return n==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,r,s){s=s||{};for(const i of e){const o=i.plugin,a=o[r],l=[n,s,i.options];if(pt(a,l,o)===!1&&s.cancelable)return!1}return!0}invalidate(){_t(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,s=Qe(r.options&&r.options.plugins,{}),i=IP(r);return s===!1&&!n?[]:OP(e,i,s,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,s=(i,o)=>i.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(s(n,r),e,"stop"),this._notify(s(r,n),e,"start")}}function IP(t){const e={},n=[],r=Object.keys(rr.plugins.items);for(let i=0;i<r.length;i++)n.push(rr.getPlugin(r[i]));const s=t.plugins||[];for(let i=0;i<s.length;i++){const o=s[i];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function EP(t,e){return!e&&t===!1?null:t===!0?{}:t}function OP(t,{plugins:e,localIds:n},r,s){const i=[],o=t.getContext();for(const a of e){const l=a.id,c=EP(r[l],s);c!==null&&i.push({plugin:a,options:MP(t.config,{plugin:a,local:n[l]},c,o)})}return i}function MP(t,{plugin:e,local:n},r,s){const i=t.pluginScopeKeys(e),o=t.getOptionScopes(r,i);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function yd(t,e){const n=Mt.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function DP(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function TP(t,e){return t===e?"_index_":"_value_"}function lg(t){if(t==="x"||t==="y"||t==="r")return t}function RP(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function vd(t,...e){if(lg(t))return t;for(const n of e){const r=n.axis||RP(n.position)||t.length>1&&lg(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function cg(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function $P(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return cg(t,"x",n[0])||cg(t,"y",n[0])}return{}}function FP(t,e){const n=qs[t.type]||{scales:{}},r=e.scales||{},s=yd(t.type,e),i=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!Je(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=vd(o,a,$P(o,t),Mt.scales[a.type]),c=TP(l,s),u=n.scales||{};i[o]=Oo(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||yd(a,e),u=(qs[a]||{}).scales||{};Object.keys(u).forEach(f=>{const p=DP(f,l),m=o[p+"AxisID"]||p;i[m]=i[m]||Object.create(null),Oo(i[m],[{axis:p},r[m],u[f]])})}),Object.keys(i).forEach(o=>{const a=i[o];Oo(a,[Mt.scales[a.type],Mt.scale])}),i}function eb(t){const e=t.options||(t.options={});e.plugins=Qe(e.plugins,{}),e.scales=FP(t,e)}function tb(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function LP(t){return t=t||{},t.data=tb(t.data),eb(t),t}const ug=new Map,nb=new Set;function Za(t,e){let n=ug.get(t);return n||(n=e(),ug.set(t,n),nb.add(n)),n}const so=(t,e,n)=>{const r=Yo(e,n);r!==void 0&&t.add(r)};class BP{constructor(e){this._config=LP(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=tb(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),eb(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Za(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Za(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Za(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return Za(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let s=r.get(e);return(!s||n)&&(s=new Map,r.set(e,s)),s}getOptionScopes(e,n,r){const{options:s,type:i}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(f=>so(l,e,f))),u.forEach(f=>so(l,s,f)),u.forEach(f=>so(l,qs[i]||{},f)),u.forEach(f=>so(l,Mt,f)),u.forEach(f=>so(l,gd,f))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),nb.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,qs[n]||{},Mt.datasets[n]||{},{type:n},Mt,gd]}resolveNamedOptions(e,n,r,s=[""]){const i={$shared:!0},{resolver:o,subPrefixes:a}=dg(this._resolverCache,e,s);let l=o;if(NP(o,n)){i.$shared=!1,r=wn(r)?r():r;const c=this.createResolver(e,r,a);l=Di(o,r,c)}for(const c of n)i[c]=l[c];return i}createResolver(e,n,r=[""],s){const{resolver:i}=dg(this._resolverCache,e,r);return Je(n)?Di(i,n,void 0,s):i}}function dg(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const s=n.join();let i=r.get(s);return i||(i={resolver:ff(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(s,i)),i}const jP=t=>Je(t)&&Object.getOwnPropertyNames(t).some(e=>wn(t[e]));function NP(t,e){const{isScriptable:n,isIndexable:r}=Lv(t);for(const s of e){const i=n(s),o=r(s),a=(o||i)&&t[s];if(i&&(wn(a)||jP(a))||o&&Ct(a))return!0}return!1}var zP="4.5.0";const qP=["top","bottom","left","right","chartArea"];function fg(t,e){return t==="top"||t==="bottom"||qP.indexOf(t)===-1&&e==="x"}function hg(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function pg(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),pt(n&&n.onComplete,[t],e)}function UP(t){const e=t.chart,n=e.options.animation;pt(n&&n.onProgress,[t],e)}function rb(t){return gf()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const yl={},gg=t=>{const e=rb(t);return Object.values(yl).filter(n=>n.canvas===e).pop()};function WP(t,e,n){const r=Object.keys(t);for(const s of r){const i=+s;if(i>=e){const o=t[s];delete t[s],(n>0||i>e)&&(t[i+n]=o)}}}function VP(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}let es=class{static defaults=Mt;static instances=yl;static overrides=qs;static registry=rr;static version=zP;static getChart=gg;static register(...e){rr.add(...e),mg()}static unregister(...e){rr.remove(...e),mg()}constructor(e,n){const r=this.config=new BP(n),s=rb(e),i=gg(s);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||cP(s)),this.platform.updateConfig(r);const a=this.platform.acquireContext(s,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=Qk(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new AP,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=gC(f=>this.update(f),o.resizeDelay||0),this._dataChanges=[],yl[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}wr.listen(this,"complete",pg),wr.listen(this,"progress",UP),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:s,_aspectRatio:i}=this;return _t(e)?n&&i?i:s?r/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return rr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():zp(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Bp(this.canvas,this.ctx),this}stop(){return wr.stop(this),this}resize(e,n){wr.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,s=this.canvas,i=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,e,n,i),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,zp(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),pt(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};ht(n,(r,s)=>{r.id=s})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,s=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let i=[];n&&(i=i.concat(Object.keys(n).map(o=>{const a=n[o],l=vd(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),ht(i,o=>{const a=o.options,l=a.id,c=vd(l,a),u=Qe(a.type,o.dtype);(a.position===void 0||fg(a.position,c)!==fg(o.dposition))&&(a.position=o.dposition),s[l]=!0;let f=null;if(l in r&&r[l].type===u)f=r[l];else{const p=rr.getScale(u);f=new p({id:l,type:u,ctx:this.ctx,chart:this}),r[f.id]=f}f.init(a,e)}),ht(s,(o,a)=>{o||delete r[a]}),ht(r,o=>{Nn.configure(this,o,o.options),Nn.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((s,i)=>s.index-i.index),r>n){for(let s=n;s<r;++s)this._destroyDatasetMeta(s);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(hg("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,s)=>{n.filter(i=>i===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,s;for(this._removeUnreferencedMetasets(),r=0,s=n.length;r<s;r++){const i=n[r];let o=this.getDatasetMeta(r);const a=i.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=i.indexAxis||yd(a,this.options),o.order=i.order||0,o.index=r,o.label=""+i.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=rr.getController(a),{datasetElementType:c,dataElementType:u}=Mt.datasets[a];Object.assign(l,{dataElementType:rr.getElement(u),datasetElementType:c&&rr.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){ht(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:f}=this.getDatasetMeta(c),p=!s&&i.indexOf(f)===-1;f.buildOrUpdateElements(p),o=Math.max(+f.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),s||ht(i,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(hg("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){ht(this.scales,e=>{Nn.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!Ep(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:s,count:i}of n){const o=r==="_removeElements"?-i:i;WP(e,s,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=i=>new Set(e.filter(o=>o[0]===i).map((o,a)=>a+","+o.splice(1).join(","))),s=r(0);for(let i=1;i<n;i++)if(!Ep(s,r(i)))return;return Array.from(s).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Nn.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],ht(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,i)=>{s._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,wn(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),s={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(wr.has(this)?this.attached&&!wr.running(this)&&wr.start(this):(this.draw(),pg({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let s,i;for(s=0,i=n.length;s<i;++s){const o=n[s];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r={meta:e,index:e.index,cancelable:!0},s=Kv(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(s&&sa(n,s),e.controller.draw(),s&&ia(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return Go(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,s){const i=qS.modes[n];return typeof i=="function"?i(this,e,r,s):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let s=r.filter(i=>i&&i._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=Vs(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const s=r?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,s);Dn(n)?(i.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(i,{visible:r}),this.update(a=>a.datasetIndex===e?s:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),wr.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Bp(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete yl[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(i,o)=>{n.addEventListener(this,i,o),e[i]=o},s=(i,o,a)=>{i.offsetX=o,i.offsetY=a,this._eventHandler(i)};ht(this.options.events,i=>r(i,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},s=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},i=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{s("attach",a),this.attached=!0,this.resize(),r("resize",i),r("detach",o)};o=()=>{this.attached=!1,s("resize",i),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){ht(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},ht(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const s=r?"set":"remove";let i,o,a,l;for(n==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:i,index:o})=>{const a=this.getDatasetMeta(i);if(!a)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:a.data[o],index:o}});!Fl(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const s=this.options.hover,i=(l,c)=>l.filter(u=>!c.some(f=>u.datasetIndex===f.datasetIndex&&u.index===f.index)),o=i(n,e),a=r?e:i(e,n);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},s=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;const i=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(i||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:s=[],options:i}=this,o=n,a=this._getActiveElements(e,s,r,o),l=rC(e),c=VP(e,this._lastEvent,r,l);r&&(this._lastEvent=null,pt(i.onHover,[e,a,this],this),l&&pt(i.onClick,[e,a,this],this));const u=!Fl(a,s);return(u||n)&&(this._active=a,this._updateHoverStyles(a,s,n)),this._lastEvent=c,u}_getActiveElements(e,n,r,s){if(e.type==="mouseout")return[];if(!r)return n;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,s)}};function mg(){return ht(es.instances,t=>t._plugins.invalidate())}function sb(t,e,n=e){t.lineCap=Qe(n.borderCapStyle,e.borderCapStyle),t.setLineDash(Qe(n.borderDash,e.borderDash)),t.lineDashOffset=Qe(n.borderDashOffset,e.borderDashOffset),t.lineJoin=Qe(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Qe(n.borderWidth,e.borderWidth),t.strokeStyle=Qe(n.borderColor,e.borderColor)}function HP(t,e,n){t.lineTo(n.x,n.y)}function KP(t){return t.stepped?EC:t.tension||t.cubicInterpolationMode==="monotone"?OC:HP}function ib(t,e,n={}){const r=t.length,{start:s=0,end:i=r-1}=n,{start:o,end:a}=e,l=Math.max(s,o),c=Math.min(i,a),u=s<o&&i<o||s>a&&i>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!u?r+c-l:c-l}}function YP(t,e,n,r){const{points:s,options:i}=e,{count:o,start:a,loop:l,ilen:c}=ib(s,n,r),u=KP(i);let{move:f=!0,reverse:p}=r||{},m,v,_;for(m=0;m<=c;++m)v=s[(a+(p?c-m:m))%o],!v.skip&&(f?(t.moveTo(v.x,v.y),f=!1):u(t,_,v,p,i.stepped),_=v);return l&&(v=s[(a+(p?c:0))%o],u(t,_,v,p,i.stepped)),!!l}function GP(t,e,n,r){const s=e.points,{count:i,start:o,ilen:a}=ib(s,n,r),{move:l=!0,reverse:c}=r||{};let u=0,f=0,p,m,v,_,x,C;const S=M=>(o+(c?a-M:M))%i,P=()=>{_!==x&&(t.lineTo(u,x),t.lineTo(u,_),t.lineTo(u,C))};for(l&&(m=s[S(0)],t.moveTo(m.x,m.y)),p=0;p<=a;++p){if(m=s[S(p)],m.skip)continue;const M=m.x,D=m.y,A=M|0;A===v?(D<_?_=D:D>x&&(x=D),u=(f*u+M)/++f):(P(),t.lineTo(M,D),v=A,f=0,_=x=D),C=D}P()}function bd(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?GP:YP}function XP(t){return t.stepped?cS:t.tension||t.cubicInterpolationMode==="monotone"?uS:Ms}function QP(t,e,n,r){let s=e._path;s||(s=e._path=new Path2D,e.path(s,n,r)&&s.closePath()),sb(t,e.options),t.stroke(s)}function JP(t,e,n,r){const{segments:s,options:i}=e,o=bd(e);for(const a of s)sb(t,i,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const ZP=typeof Path2D=="function";function eA(t,e,n,r){ZP&&!e.options.segment?QP(t,e,n,r):JP(t,e,n,r)}class oa extends kn{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const s=r.spanGaps?this._loop:this._fullLoop;tS(this._points,r,e,s,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=mS(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,s=e[n],i=this.points,o=Hv(this,{property:n,start:s,end:s});if(!o.length)return;const a=[],l=XP(r);let c,u;for(c=0,u=o.length;c<u;++c){const{start:f,end:p}=o[c],m=i[f],v=i[p];if(m===v){a.push(m);continue}const _=Math.abs((s-m[n])/(v[n]-m[n])),x=l(m,v,_,r.stepped);x[n]=e[n],a.push(x)}return a.length===1?a[0]:a}pathSegment(e,n,r){return bd(this)(e,this,n,r)}path(e,n,r){const s=this.segments,i=bd(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of s)o&=i(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,s){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),eA(e,this,r,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function yg(t,e,n,r){const s=t.options,{[n]:i}=t.getProps([n],r);return Math.abs(e-i)<s.radius+s.hitRadius}class ob extends kn{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,n,r){const s=this.options,{x:i,y:o}=this.getProps(["x","y"],r);return Math.pow(e-i,2)+Math.pow(n-o,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(e,n){return yg(this,e,"x",n)}inYRange(e,n){return yg(this,e,"y",n)}getCenterPoint(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}size(e){e=e||this.options||{};let n=e.radius||0;n=Math.max(n,n&&e.hoverRadius||0);const r=n&&e.borderWidth||0;return(n+r)*2}draw(e,n){const r=this.options;this.skip||r.radius<.1||!Go(this,n,this.size(r)/2)||(e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.fillStyle=r.backgroundColor,md(e,r,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function tA(t,e,n){const r=t.segments,s=t.points,i=e.points,o=[];for(const a of r){let{start:l,end:c}=a;c=gc(l,c,s);const u=_d(n,s[l],s[c],a.loop);if(!e.segments){o.push({source:a,target:u,start:s[l],end:s[c]});continue}const f=Hv(e,u);for(const p of f){const m=_d(n,i[p.start],i[p.end],p.loop),v=Vv(a,s,m);for(const _ of v)o.push({source:_,target:p,start:{[n]:vg(u,m,"start",Math.max)},end:{[n]:vg(u,m,"end",Math.min)}})}}return o}function _d(t,e,n,r){if(r)return;let s=e[t],i=n[t];return t==="angle"&&(s=sr(s),i=sr(i)),{property:t,start:s,end:i}}function nA(t,e){const{x:n=null,y:r=null}=t||{},s=e.points,i=[];return e.segments.forEach(({start:o,end:a})=>{a=gc(o,a,s);const l=s[o],c=s[a];r!==null?(i.push({x:l.x,y:r}),i.push({x:c.x,y:r})):n!==null&&(i.push({x:n,y:l.y}),i.push({x:n,y:c.y}))}),i}function gc(t,e,n){for(;e>t;e--){const r=n[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function vg(t,e,n,r){return t&&e?r(t[n],e[n]):t?t[n]:e?e[n]:0}function ab(t,e){let n=[],r=!1;return Ct(t)?(r=!0,n=t):n=nA(t,e),n.length?new oa({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function bg(t){return t&&t.fill!==!1}function rA(t,e,n){let s=t[e].fill;const i=[e];let o;if(!n)return s;for(;s!==!1&&i.indexOf(s)===-1;){if(!Yt(s))return s;if(o=t[s],!o)return!1;if(o.visible)return s;i.push(s),s=o.fill}return!1}function sA(t,e,n){const r=lA(t);if(Je(r))return isNaN(r.value)?!1:r;let s=parseFloat(r);return Yt(s)&&Math.floor(s)===s?iA(r[0],e,s,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function iA(t,e,n,r){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=r?!1:n}function oA(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:Je(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function aA(t,e,n){let r;return t==="start"?r=n:t==="end"?r=e.options.reverse?e.min:e.max:Je(t)?r=t.value:r=e.getBaseValue(),r}function lA(t){const e=t.options,n=e.fill;let r=Qe(n&&n.target,n);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function cA(t){const{scale:e,index:n,line:r}=t,s=[],i=r.segments,o=r.points,a=uA(e,n);a.push(ab({x:null,y:e.bottom},r));for(let l=0;l<i.length;l++){const c=i[l];for(let u=c.start;u<=c.end;u++)dA(s,o[u],a)}return new oa({points:s,options:{}})}function uA(t,e){const n=[],r=t.getMatchingVisibleMetas("line");for(let s=0;s<r.length;s++){const i=r[s];if(i.index===e)break;i.hidden||n.unshift(i.dataset)}return n}function dA(t,e,n){const r=[];for(let s=0;s<n.length;s++){const i=n[s],{first:o,last:a,point:l}=fA(i,e,"x");if(!(!l||o&&a)){if(o)r.unshift(l);else if(t.push(l),!a)break}}t.push(...r)}function fA(t,e,n){const r=t.interpolate(e,n);if(!r)return{};const s=r[n],i=t.segments,o=t.points;let a=!1,l=!1;for(let c=0;c<i.length;c++){const u=i[c],f=o[u.start][n],p=o[u.end][n];if(pi(s,f,p)){a=s===f,l=s===p;break}}return{first:a,last:l,point:r}}class lb{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,r){const{x:s,y:i,radius:o}=this;return n=n||{start:0,end:Wt},e.arc(s,i,o,n.end,n.start,!0),!r.bounds}interpolate(e){const{x:n,y:r,radius:s}=this,i=e.angle;return{x:n+Math.cos(i)*s,y:r+Math.sin(i)*s,angle:i}}}function hA(t){const{chart:e,fill:n,line:r}=t;if(Yt(n))return pA(e,n);if(n==="stack")return cA(t);if(n==="shape")return!0;const s=gA(t);return s instanceof lb?s:ab(s,r)}function pA(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function gA(t){return(t.scale||{}).getPointPositionForValue?yA(t):mA(t)}function mA(t){const{scale:e={},fill:n}=t,r=oA(n,e);if(Yt(r)){const s=e.isHorizontal();return{x:s?r:null,y:s?null:r}}return null}function yA(t){const{scale:e,fill:n}=t,r=e.options,s=e.getLabels().length,i=r.reverse?e.max:e.min,o=aA(n,e,i),a=[];if(r.grid.circular){const l=e.getPointPositionForValue(0,i);return new lb({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<s;++l)a.push(e.getPointPositionForValue(l,o));return a}function Pu(t,e,n){const r=hA(e),{chart:s,index:i,line:o,scale:a,axis:l}=e,c=o.options,u=c.fill,f=c.backgroundColor,{above:p=f,below:m=f}=u||{},v=s.getDatasetMeta(i),_=Kv(s,v);r&&o.points.length&&(sa(t,n),vA(t,{line:o,target:r,above:p,below:m,area:n,scale:a,axis:l,clip:_}),ia(t))}function vA(t,e){const{line:n,target:r,above:s,below:i,area:o,scale:a,clip:l}=e,c=n._loop?"angle":e.axis;t.save();let u=i;i!==s&&(c==="x"?(_g(t,r,o.top),Au(t,{line:n,target:r,color:s,scale:a,property:c,clip:l}),t.restore(),t.save(),_g(t,r,o.bottom)):c==="y"&&(wg(t,r,o.left),Au(t,{line:n,target:r,color:i,scale:a,property:c,clip:l}),t.restore(),t.save(),wg(t,r,o.right),u=s)),Au(t,{line:n,target:r,color:u,scale:a,property:c,clip:l}),t.restore()}function _g(t,e,n){const{segments:r,points:s}=e;let i=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,u=s[l],f=s[gc(l,c,s)];i?(t.moveTo(u.x,u.y),i=!1):(t.lineTo(u.x,n),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(f.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function wg(t,e,n){const{segments:r,points:s}=e;let i=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,u=s[l],f=s[gc(l,c,s)];i?(t.moveTo(u.x,u.y),i=!1):(t.lineTo(n,u.y),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(n,f.y)}t.lineTo(n,e.first().y),t.closePath(),t.clip()}function Au(t,e){const{line:n,target:r,property:s,color:i,scale:o,clip:a}=e,l=tA(n,r,s);for(const{source:c,target:u,start:f,end:p}of l){const{style:{backgroundColor:m=i}={}}=c,v=r!==!0;t.save(),t.fillStyle=m,bA(t,o,a,v&&_d(s,f,p)),t.beginPath();const _=!!n.pathSegment(t,c);let x;if(v){_?t.closePath():xg(t,r,p,s);const C=!!r.pathSegment(t,u,{move:_,reverse:!0});x=_&&C,x||xg(t,r,f,s)}t.closePath(),t.fill(x?"evenodd":"nonzero"),t.restore()}}function bA(t,e,n,r){const s=e.chart.chartArea,{property:i,start:o,end:a}=r||{};if(i==="x"||i==="y"){let l,c,u,f;i==="x"?(l=o,c=s.top,u=a,f=s.bottom):(l=s.left,c=o,u=s.right,f=a),t.beginPath(),n&&(l=Math.max(l,n.left),u=Math.min(u,n.right),c=Math.max(c,n.top),f=Math.min(f,n.bottom)),t.rect(l,c,u-l,f-c),t.clip()}}function xg(t,e,n,r){const s=e.interpolate(n,r);s&&t.lineTo(s.x,s.y)}var _A={id:"filler",afterDatasetsUpdate(t,e,n){const r=(t.data.datasets||[]).length,s=[];let i,o,a,l;for(o=0;o<r;++o)i=t.getDatasetMeta(o),a=i.dataset,l=null,a&&a.options&&a instanceof oa&&(l={visible:t.isDatasetVisible(o),index:o,fill:sA(a,o,r),chart:t,axis:i.controller.options.indexAxis,scale:i.vScale,line:a}),i.$filler=l,s.push(l);for(o=0;o<r;++o)l=s[o],!(!l||l.fill===!1)&&(l.fill=rA(s,o,n.propagate))},beforeDraw(t,e,n){const r=n.drawTime==="beforeDraw",s=t.getSortedVisibleDatasetMetas(),i=t.chartArea;for(let o=s.length-1;o>=0;--o){const a=s[o].$filler;a&&(a.line.updateControlPoints(i,a.axis),r&&a.fill&&Pu(t.ctx,a,i))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const r=t.getSortedVisibleDatasetMetas();for(let s=r.length-1;s>=0;--s){const i=r[s].$filler;bg(i)&&Pu(t.ctx,i,t.chartArea)}},beforeDatasetDraw(t,e,n){const r=e.meta.$filler;!bg(r)||n.drawTime!=="beforeDatasetDraw"||Pu(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const kg=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},wA=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class Cg extends kn{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=pt(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,s)=>e.sort(r,s,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,s=Lt(r.font),i=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=kg(r,i);let c,u;n.font=s.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,i,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,s,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,s){const{ctx:i,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=s+a;let f=e;i.textAlign="left",i.textBaseline="middle";let p=-1,m=-u;return this.legendItems.forEach((v,_)=>{const x=r+n/2+i.measureText(v.text).width;(_===0||c[c.length-1]+x+2*a>o)&&(f+=u,c[c.length-(_>0?0:1)]=0,m+=u,p++),l[_]={left:0,top:m,row:p,width:x,height:s},c[c.length-1]+=x+a}),f}_fitCols(e,n,r,s){const{ctx:i,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let f=a,p=0,m=0,v=0,_=0;return this.legendItems.forEach((x,C)=>{const{itemWidth:S,itemHeight:P}=xA(r,n,i,x,s);C>0&&m+P+2*a>u&&(f+=p+a,c.push({width:p,height:m}),v+=p+a,_++,p=m=0),l[C]={left:v,top:m,col:_,width:S,height:P},p=Math.max(p,S),m+=P+a}),f+=p,c.push({width:p,height:m}),f}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:s},rtl:i}}=this,o=ki(i,this.left,this.width);if(this.isHorizontal()){let a=0,l=sn(r,this.left+s,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=sn(r,this.left+s,this.right-this.lineWidths[a])),c.top+=this.top+e+s,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+s}else{let a=0,l=sn(r,this.top+e+s,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=sn(r,this.top+e+s,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+s,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;sa(e,this),this._draw(),ia(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:s}=this,{align:i,labels:o}=e,a=Mt.color,l=ki(e.rtl,this.left,this.width),c=Lt(o.font),{padding:u}=o,f=c.size,p=f/2;let m;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:v,boxHeight:_,itemHeight:x}=kg(o,f),C=function(A,T,B){if(isNaN(v)||v<=0||isNaN(_)||_<0)return;s.save();const E=Qe(B.lineWidth,1);if(s.fillStyle=Qe(B.fillStyle,a),s.lineCap=Qe(B.lineCap,"butt"),s.lineDashOffset=Qe(B.lineDashOffset,0),s.lineJoin=Qe(B.lineJoin,"miter"),s.lineWidth=E,s.strokeStyle=Qe(B.strokeStyle,a),s.setLineDash(Qe(B.lineDash,[])),o.usePointStyle){const Q={radius:_*Math.SQRT2/2,pointStyle:B.pointStyle,rotation:B.rotation,borderWidth:E},V=l.xPlus(A,v/2),z=T+p;$v(s,Q,V,z,o.pointStyleWidth&&v)}else{const Q=T+Math.max((f-_)/2,0),V=l.leftForLtr(A,v),z=xi(B.borderRadius);s.beginPath(),Object.values(z).some(pe=>pe!==0)?zl(s,{x:V,y:Q,w:v,h:_,radius:z}):s.rect(V,Q,v,_),s.fill(),E!==0&&s.stroke()}s.restore()},S=function(A,T,B){Xo(s,B.text,A,T+x/2,c,{strikethrough:B.hidden,textAlign:l.textAlign(B.textAlign)})},P=this.isHorizontal(),M=this._computeTitleHeight();P?m={x:sn(i,this.left+u,this.right-r[0]),y:this.top+u+M,line:0}:m={x:this.left+u,y:sn(i,this.top+M+u,this.bottom-n[0].height),line:0},qv(this.ctx,e.textDirection);const D=x+u;this.legendItems.forEach((A,T)=>{s.strokeStyle=A.fontColor,s.fillStyle=A.fontColor;const B=s.measureText(A.text).width,E=l.textAlign(A.textAlign||(A.textAlign=o.textAlign)),Q=v+p+B;let V=m.x,z=m.y;l.setWidth(this.width),P?T>0&&V+Q+u>this.right&&(z=m.y+=D,m.line++,V=m.x=sn(i,this.left+u,this.right-r[m.line])):T>0&&z+D>this.bottom&&(V=m.x=V+n[m.line].width+u,m.line++,z=m.y=sn(i,this.top+M+u,this.bottom-n[m.line].height));const pe=l.x(V);if(C(pe,z,A),V=mC(E,V+v+p,P?V+Q:this.right,e.rtl),S(l.x(V),z,A),P)m.x+=Q+u;else if(typeof A.text!="string"){const me=c.lineHeight;m.y+=cb(A,me)+u}else m.y+=D}),Uv(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=Lt(n.font),s=dn(n.padding);if(!n.display)return;const i=ki(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,c=s.top+l;let u,f=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),u=this.top+c,f=sn(e.align,f,this.right-p);else{const v=this.columnSizes.reduce((_,x)=>Math.max(_,x.height),0);u=c+sn(e.align,this.top,this.bottom-v-e.labels.padding-this._computeTitleHeight())}const m=sn(a,f,f+p);o.textAlign=i.textAlign(cf(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,Xo(o,n.text,m,u,r)}_computeTitleHeight(){const e=this.options.title,n=Lt(e.font),r=dn(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,s,i;if(pi(e,this.left,this.right)&&pi(n,this.top,this.bottom)){for(i=this.legendHitBoxes,r=0;r<i.length;++r)if(s=i[r],pi(e,s.left,s.left+s.width)&&pi(n,s.top,s.top+s.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!SA(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,i=wA(s,r);s&&!i&&pt(n.onLeave,[e,s,this],this),this._hoveredItem=r,r&&!i&&pt(n.onHover,[e,r,this],this)}else r&&pt(n.onClick,[e,r,this],this)}}function xA(t,e,n,r,s){const i=kA(r,t,e,n),o=CA(s,r,e.lineHeight);return{itemWidth:i,itemHeight:o}}function kA(t,e,n,r){let s=t.text;return s&&typeof s!="string"&&(s=s.reduce((i,o)=>i.length>o.length?i:o)),e+n.size/2+r.measureText(s).width}function CA(t,e,n){let r=t;return typeof e.text!="string"&&(r=cb(e,n)),r}function cb(t,e){const n=t.text?t.text.length:0;return e*n}function SA(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var ub={id:"legend",_element:Cg,start(t,e,n){const r=t.legend=new Cg({ctx:t.ctx,options:n,chart:t});Nn.configure(t,r,n),Nn.addBox(t,r)},stop(t){Nn.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;Nn.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,s=n.chart;s.isDatasetVisible(r)?(s.hide(r),e.hidden=!0):(s.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:s,color:i,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=dn(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:i,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:s||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class db extends kn{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const s=Ct(r.text)?r.text.length:1;this._padding=dn(r.padding);const i=s*Lt(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:s,right:i,options:o}=this,a=o.align;let l=0,c,u,f;return this.isHorizontal()?(u=sn(a,r,i),f=n+e,c=i-r):(o.position==="left"?(u=r+e,f=sn(a,s,n),l=ut*-.5):(u=i-e,f=sn(a,n,s),l=ut*.5),c=s-n),{titleX:u,titleY:f,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=Lt(n.font),i=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(i);Xo(e,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:c,textAlign:cf(n.align),textBaseline:"middle",translation:[o,a]})}}function PA(t,e){const n=new db({ctx:t.ctx,options:e,chart:t});Nn.configure(t,n,e),Nn.addBox(t,n),t.titleBlock=n}var fb={id:"title",_element:db,start(t,e,n){PA(t,n)},stop(t){const e=t.titleBlock;Nn.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;Nn.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const mo={average(t){if(!t.length)return!1;let e,n,r=new Set,s=0,i=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();r.add(l.x),s+=l.y,++i}}return i===0||r.size===0?!1:{x:[...r].reduce((a,l)=>a+l)/r.size,y:s/i}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,s=Number.POSITIVE_INFINITY,i,o,a;for(i=0,o=t.length;i<o;++i){const l=t[i].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=Mi(e,c);u<s&&(s=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function tr(t,e){return e&&(Ct(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function xr(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function AA(t,e){const{element:n,datasetIndex:r,index:s}=e,i=t.getDatasetMeta(r).controller,{label:o,value:a}=i.getLabelAndValue(s);return{chart:t,label:o,parsed:i.getParsed(s),raw:t.data.datasets[r].data[s],formattedValue:a,dataset:i.getDataset(),dataIndex:s,datasetIndex:r,element:n}}function Sg(t,e){const n=t.chart.ctx,{body:r,footer:s,title:i}=t,{boxWidth:o,boxHeight:a}=e,l=Lt(e.bodyFont),c=Lt(e.titleFont),u=Lt(e.footerFont),f=i.length,p=s.length,m=r.length,v=dn(e.padding);let _=v.height,x=0,C=r.reduce((M,D)=>M+D.before.length+D.lines.length+D.after.length,0);if(C+=t.beforeBody.length+t.afterBody.length,f&&(_+=f*c.lineHeight+(f-1)*e.titleSpacing+e.titleMarginBottom),C){const M=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;_+=m*M+(C-m)*l.lineHeight+(C-1)*e.bodySpacing}p&&(_+=e.footerMarginTop+p*u.lineHeight+(p-1)*e.footerSpacing);let S=0;const P=function(M){x=Math.max(x,n.measureText(M).width+S)};return n.save(),n.font=c.string,ht(t.title,P),n.font=l.string,ht(t.beforeBody.concat(t.afterBody),P),S=e.displayColors?o+2+e.boxPadding:0,ht(r,M=>{ht(M.before,P),ht(M.lines,P),ht(M.after,P)}),S=0,n.font=u.string,ht(t.footer,P),n.restore(),x+=v.width,{width:x,height:_}}function IA(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function EA(t,e,n,r){const{x:s,width:i}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&s+i+o>e.width||t==="right"&&s-i-o<0)return!0}function OA(t,e,n,r){const{x:s,width:i}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return r==="center"?c=s<=(a+l)/2?"left":"right":s<=i/2?c="left":s>=o-i/2&&(c="right"),EA(c,t,e,n)&&(c="center"),c}function Pg(t,e,n){const r=n.yAlign||e.yAlign||IA(t,n);return{xAlign:n.xAlign||e.xAlign||OA(t,e,n,r),yAlign:r}}function MA(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function DA(t,e,n){let{y:r,height:s}=t;return e==="top"?r+=n:e==="bottom"?r-=s+n:r-=s/2,r}function Ag(t,e,n,r){const{caretSize:s,caretPadding:i,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=s+i,{topLeft:u,topRight:f,bottomLeft:p,bottomRight:m}=xi(o);let v=MA(e,a);const _=DA(e,l,c);return l==="center"?a==="left"?v+=c:a==="right"&&(v-=c):a==="left"?v-=Math.max(u,p)+s:a==="right"&&(v+=Math.max(f,m)+s),{x:jn(v,0,r.width-e.width),y:jn(_,0,r.height-e.height)}}function el(t,e,n){const r=dn(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function Ig(t){return tr([],xr(t))}function TA(t,e,n){return Vs(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function Eg(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const hb={beforeTitle:gr,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:gr,beforeBody:gr,beforeLabel:gr,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return _t(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:gr,afterBody:gr,beforeFooter:gr,footer:gr,afterFooter:gr};function vn(t,e,n,r){const s=t[e].call(n,r);return typeof s>"u"?hb[e].call(n,r):s}class Og extends kn{static positioners=mo;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&n.options.animation&&r.animations,i=new yf(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=TA(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,s=vn(r,"beforeTitle",this,e),i=vn(r,"title",this,e),o=vn(r,"afterTitle",this,e);let a=[];return a=tr(a,xr(s)),a=tr(a,xr(i)),a=tr(a,xr(o)),a}getBeforeBody(e,n){return Ig(vn(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,s=[];return ht(e,i=>{const o={before:[],lines:[],after:[]},a=Eg(r,i);tr(o.before,xr(vn(a,"beforeLabel",this,i))),tr(o.lines,vn(a,"label",this,i)),tr(o.after,xr(vn(a,"afterLabel",this,i))),s.push(o)}),s}getAfterBody(e,n){return Ig(vn(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,s=vn(r,"beforeFooter",this,e),i=vn(r,"footer",this,e),o=vn(r,"afterFooter",this,e);let a=[];return a=tr(a,xr(s)),a=tr(a,xr(i)),a=tr(a,xr(o)),a}_createItems(e){const n=this._active,r=this.chart.data,s=[],i=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(AA(this.chart,n[l]));return e.filter&&(a=a.filter((u,f,p)=>e.filter(u,f,p,r))),e.itemSort&&(a=a.sort((u,f)=>e.itemSort(u,f,r))),ht(a,u=>{const f=Eg(e.callbacks,u);s.push(vn(f,"labelColor",this,u)),i.push(vn(f,"labelPointStyle",this,u)),o.push(vn(f,"labelTextColor",this,u))}),this.labelColors=s,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),s=this._active;let i,o=[];if(!s.length)this.opacity!==0&&(i={opacity:0});else{const a=mo[r.position].call(this,s,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=Sg(this,r),c=Object.assign({},a,l),u=Pg(this.chart,r,c),f=Ag(r,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,i={opacity:1,x:f.x,y:f.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,s){const i=this.getCaretPosition(e,r,s);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(e,n,r){const{xAlign:s,yAlign:i}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:f}=xi(a),{x:p,y:m}=e,{width:v,height:_}=n;let x,C,S,P,M,D;return i==="center"?(M=m+_/2,s==="left"?(x=p,C=x-o,P=M+o,D=M-o):(x=p+v,C=x+o,P=M-o,D=M+o),S=x):(s==="left"?C=p+Math.max(l,u)+o:s==="right"?C=p+v-Math.max(c,f)-o:C=this.caretX,i==="top"?(P=m,M=P-o,x=C-o,S=C+o):(P=m+_,M=P+o,x=C+o,S=C-o),D=P),{x1:x,x2:C,x3:S,y1:P,y2:M,y3:D}}drawTitle(e,n,r){const s=this.title,i=s.length;let o,a,l;if(i){const c=ki(r.rtl,this.x,this.width);for(e.x=el(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",o=Lt(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<i;++l)n.fillText(s[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===i&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,s,i){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=i,u=Lt(i.bodyFont),f=el(this,"left",i),p=s.x(f),m=l<u.lineHeight?(u.lineHeight-l)/2:0,v=n.y+m;if(i.usePointStyle){const _={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},x=s.leftForLtr(p,c)+c/2,C=v+l/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,md(e,_,x,C),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,md(e,_,x,C)}else{e.lineWidth=Je(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const _=s.leftForLtr(p,c),x=s.leftForLtr(s.xPlus(p,1),c-2),C=xi(o.borderRadius);Object.values(C).some(S=>S!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,zl(e,{x:_,y:v,w:c,h:l,radius:C}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),zl(e,{x,y:v+1,w:c-2,h:l-2,radius:C}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(_,v,c,l),e.strokeRect(_,v,c,l),e.fillStyle=o.backgroundColor,e.fillRect(x,v+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:s}=this,{bodySpacing:i,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=r,f=Lt(r.bodyFont);let p=f.lineHeight,m=0;const v=ki(r.rtl,this.x,this.width),_=function(B){n.fillText(B,v.x(e.x+m),e.y+p/2),e.y+=p+i},x=v.textAlign(o);let C,S,P,M,D,A,T;for(n.textAlign=o,n.textBaseline="middle",n.font=f.string,e.x=el(this,x,r),n.fillStyle=r.bodyColor,ht(this.beforeBody,_),m=a&&x!=="right"?o==="center"?c/2+u:c+2+u:0,M=0,A=s.length;M<A;++M){for(C=s[M],S=this.labelTextColors[M],n.fillStyle=S,ht(C.before,_),P=C.lines,a&&P.length&&(this._drawColorBox(n,e,M,v,r),p=Math.max(f.lineHeight,l)),D=0,T=P.length;D<T;++D)_(P[D]),p=f.lineHeight;ht(C.after,_)}m=0,p=f.lineHeight,ht(this.afterBody,_),e.y-=i}drawFooter(e,n,r){const s=this.footer,i=s.length;let o,a;if(i){const l=ki(r.rtl,this.x,this.width);for(e.x=el(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=Lt(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<i;++a)n.fillText(s[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,s){const{xAlign:i,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=r,{topLeft:f,topRight:p,bottomLeft:m,bottomRight:v}=xi(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(a+f,l),o==="top"&&this.drawCaret(e,n,r,s),n.lineTo(a+c-p,l),n.quadraticCurveTo(a+c,l,a+c,l+p),o==="center"&&i==="right"&&this.drawCaret(e,n,r,s),n.lineTo(a+c,l+u-v),n.quadraticCurveTo(a+c,l+u,a+c-v,l+u),o==="bottom"&&this.drawCaret(e,n,r,s),n.lineTo(a+m,l+u),n.quadraticCurveTo(a,l+u,a,l+u-m),o==="center"&&i==="left"&&this.drawCaret(e,n,r,s),n.lineTo(a,l+f),n.quadraticCurveTo(a,l,a+f,l),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,s=r&&r.x,i=r&&r.y;if(s||i){const o=mo[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=Sg(this,e),l=Object.assign({},o,this._size),c=Pg(n,e,l),u=Ag(e,l,c,n);(s._to!==u.x||i._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},i={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=dn(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(i,e,s,n),qv(e,n.textDirection),i.y+=o.top,this.drawTitle(i,e,n),this.drawBody(i,e,n),this.drawFooter(i,e,n),Uv(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,s=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),i=!Fl(r,s),o=this._positionChanged(s,n);(i||o)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,i=this._active||[],o=this._getActiveElements(e,i,n,r),a=this._positionChanged(o,e),l=n||!Fl(o,i)||a;return l&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,s){const i=this.options;if(e.type==="mouseout")return[];if(!s)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,i.mode,i,r);return i.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:s,options:i}=this,o=mo[i.position].call(this,e,n);return o!==!1&&(r!==o.x||s!==o.y)}}var pb={id:"tooltip",_element:Og,positioners:mo,afterInit(t,e,n){n&&(t.tooltip=new Og({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:hb},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const RA=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function $A(t,e,n,r){const s=t.indexOf(e);if(s===-1)return RA(t,e,n,r);const i=t.lastIndexOf(e);return s!==i?n:s}const FA=(t,e)=>t===null?null:jn(Math.round(t),0,e);function Mg(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class gb extends Li{static id="category";static defaults={ticks:{callback:Mg}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:s,label:i}of n)r[s]===i&&r.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(_t(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:$A(r,e,Qe(n,e),this._addedLabels),FA(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,s=[];let i=this.getLabels();i=e===0&&n===i.length-1?i:i.slice(e,n+1),this._valueRange=Math.max(i.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)s.push({value:o});return s}getLabelForValue(e){return Mg.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function LA(t,e){const n=[],{bounds:s,step:i,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:f,includeBounds:p}=t,m=i||1,v=u-1,{min:_,max:x}=e,C=!_t(o),S=!_t(a),P=!_t(c),M=(x-_)/(f+1);let D=Op((x-_)/v/m)*m,A,T,B,E;if(D<1e-14&&!C&&!S)return[{value:_},{value:x}];E=Math.ceil(x/D)-Math.floor(_/D),E>v&&(D=Op(E*D/v/m)*m),_t(l)||(A=Math.pow(10,l),D=Math.ceil(D*A)/A),s==="ticks"?(T=Math.floor(_/D)*D,B=Math.ceil(x/D)*D):(T=_,B=x),C&&S&&i&&aC((a-o)/i,D/1e3)?(E=Math.round(Math.min((a-o)/D,u)),D=(a-o)/E,T=o,B=a):P?(T=C?o:T,B=S?a:B,E=c-1,D=(B-T)/E):(E=(B-T)/D,Mo(E,Math.round(E),D/1e3)?E=Math.round(E):E=Math.ceil(E));const Q=Math.max(Mp(D),Mp(T));A=Math.pow(10,_t(l)?Q:l),T=Math.round(T*A)/A,B=Math.round(B*A)/A;let V=0;for(C&&(p&&T!==o?(n.push({value:o}),T<o&&V++,Mo(Math.round((T+V*D)*A)/A,o,Dg(o,M,t))&&V++):T<o&&V++);V<E;++V){const z=Math.round((T+V*D)*A)/A;if(S&&z>a)break;n.push({value:z})}return S&&p&&B!==a?n.length&&Mo(n[n.length-1].value,a,Dg(a,M,t))?n[n.length-1].value=a:n.push({value:a}):(!S||B===a)&&n.push({value:B}),n}function Dg(t,e,{horizontal:n,minRotation:r}){const s=Vt(r),i=(n?Math.sin(s):Math.cos(s))||.001,o=.75*e*(""+t).length;return Math.min(e/i,o)}class BA extends Li{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return _t(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:s,max:i}=this;const o=l=>s=n?s:l,a=l=>i=r?i:l;if(e){const l=Oi(s),c=Oi(i);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(s===i){let l=i===0?1:Math.abs(i*.05);a(i+l),e||o(s-l)}this.min=s,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,s;return r?(s=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),n=n||11),n&&(s=Math.min(n,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const s={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},i=this._range||this,o=LA(s,i);return e.bounds==="ticks"&&lC(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const s=(r-n)/Math.max(e.length-1,1)/2;n-=s,r+=s}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return df(e,this.chart.options.locale,this.options.ticks.format)}}class mb extends BA{static id="linear";static defaults={ticks:{callback:Rv.formatters.numeric}};determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Yt(e)?e:0,this.max=Yt(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=Vt(this.options.ticks.minRotation),s=(e?Math.sin(r):Math.cos(r))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,i.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const mc={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},_n=Object.keys(mc);function Tg(t,e){return t-e}function Rg(t,e){if(_t(e))return null;const n=t._adapter,{parser:r,round:s,isoWeekday:i}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),Yt(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(s&&(o=s==="week"&&(zs(i)||i===!0)?n.startOf(o,"isoWeek",i):n.startOf(o,s)),+o)}function $g(t,e,n,r){const s=_n.length;for(let i=_n.indexOf(t);i<s-1;++i){const o=mc[_n[i]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return _n[i]}return _n[s-1]}function jA(t,e,n,r,s){for(let i=_n.length-1;i>=_n.indexOf(n);i--){const o=_n[i];if(mc[o].common&&t._adapter.diff(s,r,o)>=e-1)return o}return _n[n?_n.indexOf(n):0]}function NA(t){for(let e=_n.indexOf(t)+1,n=_n.length;e<n;++e)if(mc[_n[e]].common)return _n[e]}function Fg(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:s}=lf(n,e),i=n[r]>=e?n[r]:n[s];t[i]=!0}}function zA(t,e,n,r){const s=t._adapter,i=+s.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=i;a<=o;a=+s.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function Lg(t,e,n){const r=[],s={},i=e.length;let o,a;for(o=0;o<i;++o)a=e[o],s[a]=o,r.push({value:a,major:!1});return i===0||!n?r:zA(t,r,s,n)}class Bg extends Li{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),s=this._adapter=new LS._date(e.adapters.date);s.init(n),Oo(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:Rg(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:s,max:i,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!a&&!isNaN(c.max)&&(i=Math.max(i,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=Yt(s)&&!isNaN(s)?s:+n.startOf(Date.now(),r),i=Yt(i)&&!isNaN(i)?i:+n.endOf(Date.now(),r)+1,this.min=Math.min(s,i-1),this.max=Math.max(s+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const i=this.min,o=this.max,a=fC(s,i,o);return this._unit=n.unit||(r.autoSkip?$g(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):jA(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:NA(this._unit),this.initOffsets(s),e.reverse&&a.reverse(),Lg(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,s,i;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?n=1-s:n=(this.getDecimalForValue(e[1])-s)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?r=i:r=(i-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=jn(n,0,o),r=jn(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,s=this.options,i=s.time,o=i.unit||$g(i.minUnit,n,r,this._getLabelCapacity(n)),a=Qe(s.ticks.stepSize,1),l=o==="week"?i.isoWeekday:!1,c=zs(l)||l===!0,u={};let f=n,p,m;if(c&&(f=+e.startOf(f,"isoWeek",l)),f=+e.startOf(f,c?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const v=s.ticks.source==="data"&&this.getDataTimestamps();for(p=f,m=0;p<r;p=+e.add(p,a,o),m++)Fg(u,p,v);return(p===r||s.bounds==="ticks"||m===1)&&Fg(u,p,v),Object.keys(u).sort(Tg).map(_=>+_)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const s=this.options.time.displayFormats,i=this._unit,o=n||s[i];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,s){const i=this.options,o=i.ticks.callback;if(o)return pt(o,[e,n,r],this);const a=i.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],f=c&&a[c],p=r[n],m=c&&f&&p&&p.major;return this._adapter.format(e,s||(m?f:u))}generateTickLabels(e){let n,r,s;for(n=0,r=e.length;n<r;++n)s=e[n],s.label=this._tickFormatFunction(s.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,s=Vt(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(s),o=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:r*i+a*o,h:r*o+a*i}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,s=r[n.unit]||r.millisecond,i=this._tickFormatFunction(e,0,Lg(this,[e],this._majorUnit),s),o=this._getLabelSize(i),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,r=s.length;n<r;++n)e=e.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const s=this.getLabels();for(n=0,r=s.length;n<r;++n)e.push(Rg(this,s[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return pC(e.sort(Tg))}}function tl(t,e,n){let r=0,s=t.length-1,i,o,a,l;n?(e>=t[r].pos&&e<=t[s].pos&&({lo:r,hi:s}=Rs(t,"pos",e)),{pos:i,time:a}=t[r],{pos:o,time:l}=t[s]):(e>=t[r].time&&e<=t[s].time&&({lo:r,hi:s}=Rs(t,"time",e)),{time:i,pos:a}=t[r],{time:o,pos:l}=t[s]);const c=o-i;return c?a+(l-a)*(e-i)/c:a}class NL extends Bg{static id="timeseries";static defaults=Bg.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=tl(n,this.min),this._tableRange=tl(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,s=[],i=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=r&&s.push(c);if(s.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=s.length;o<a;++o)u=s[o+1],l=s[o-1],c=s[o],Math.round((u+l)/2)!==c&&i.push({time:c,pos:o/(a-1)});return i}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((s,i)=>s-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(tl(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return tl(this._table,r*this._tableRange+this._minPos,!0)}}const yb={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},qA={ariaLabel:{type:String},ariaDescribedby:{type:String}},UA={type:{type:String,required:!0},destroyDelay:{type:Number,default:0},...yb,...qA},WA=Jy[0]==="2"?(t,e)=>Object.assign(t,{attrs:e}):(t,e)=>Object.assign(t,e);function li(t){return ea(t)?tt(t):t}function VA(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t;return ea(e)?new Proxy(t,{}):t}function HA(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function vb(t,e){t.labels=e}function bb(t,e,n){const r=[];t.datasets=e.map(s=>{const i=t.datasets.find(o=>o[n]===s[n]);return!i||!s.data||r.includes(i)?{...s}:(r.push(i),Object.assign(i,s),i)})}function KA(t,e){const n={labels:[],datasets:[]};return vb(n,t.labels),bb(n,t.datasets,e),n}const YA=Ze({props:UA,setup(t,e){let{expose:n,slots:r}=e;const s=he(null),i=nc(null);n({chart:i});const o=()=>{if(!s.value)return;const{type:c,data:u,options:f,plugins:p,datasetIdKey:m}=t,v=KA(u,m),_=VA(v,u);i.value=new es(s.value,{type:c,data:_,options:{...f},plugins:p})},a=()=>{const c=tt(i.value);c&&(t.destroyDelay>0?setTimeout(()=>{c.destroy(),i.value=null},t.destroyDelay):(c.destroy(),i.value=null))},l=c=>{c.update(t.updateMode)};return Tn(o),Fi(a),Kt([()=>t.options,()=>t.data],(c,u)=>{let[f,p]=c,[m,v]=u;const _=tt(i.value);if(!_)return;let x=!1;if(f){const C=li(f),S=li(m);C&&C!==S&&(HA(_,C),x=!0)}if(p){const C=li(p.labels),S=li(v.labels),P=li(p.datasets),M=li(v.datasets);C!==S&&(vb(_.config.data,C),x=!0),P&&P!==M&&(bb(_.config.data,P,t.datasetIdKey),x=!0)}x&&un(()=>{l(_)})},{deep:!0}),()=>Ar("canvas",{role:"img",ariaLabel:t.ariaLabel,ariaDescribedby:t.ariaDescribedby,ref:s},[Ar("p",{},[r.default?r.default():""])])}});function GA(t,e){return es.register(e),Ze({props:yb,setup(n,r){let{expose:s}=r;const i=nc(null),o=a=>{i.value=a?.chart};return s({chart:i}),()=>Ar(YA,WA({ref:o},{type:t,...n}))}})}const _b=GA("line",FS),XA={class:"chart-container"},QA=Ze({__name:"PortfolioValueChart",setup(t){es.register(gb,mb,ob,oa,fb,pb,ub,_A);const e=he([]),n=Ve(()=>{const s=[...e.value].sort((a,l)=>new Date(a.asOf).getTime()-new Date(l.asOf).getTime()),i=s.map(a=>new Date(a.asOf).toLocaleDateString()),o=s.map(a=>new Be(a.totalValue,"EUR").getDecimal());return{labels:i,datasets:[{label:"Portfolio Value",backgroundColor:"rgba(75, 192, 192, 0.2)",borderColor:"rgba(75, 192, 192, 1)",data:o,fill:!0,tension:.4}]}}),r={responsive:!0,maintainAspectRatio:!1,scales:{y:{ticks:{callback:function(s){return typeof s=="number"?new Be(s*100,"EUR").format("de-DE"):s}}}},plugins:{legend:{display:!1}}};return Tn(async()=>{try{e.value=await fd.getAll()}catch(s){console.error("Error fetching valuation data:",s)}}),(s,i)=>(U(),Z("div",XA,[ze($e(_b),{data:n.value,options:r},null,8,["data"])]))}}),JA=yn(QA,[["__scopeId","data-v-7346e7bf"]]);class ln{static BASE_URL="https://api.scryfall.com";static lastRequestTime=0;static RATE_LIMIT_DELAY=100;static async enforceRateLimit(){const n=Date.now()-this.lastRequestTime;if(n<this.RATE_LIMIT_DELAY){const r=this.RATE_LIMIT_DELAY-n;await new Promise(s=>setTimeout(s,r))}this.lastRequestTime=Date.now()}static async getPriceById(e){try{await this.enforceRateLimit();const n=await fetch(`${this.BASE_URL}/cards/${e}`);if(!n.ok)return null;const s=(await n.json()).prices?.eur;return s?Be.parse(s,"EUR"):null}catch(n){return console.error("Error fetching price from Scryfall:",n),null}}static async getPriceBySetAndNumber(e,n){try{await this.enforceRateLimit();const r=await fetch(`${this.BASE_URL}/cards/${e}/${n}`);if(!r.ok)return null;const i=(await r.json()).prices?.eur;return i?Be.parse(i,"EUR"):null}catch(r){return console.error("Error fetching price from Scryfall:",r),null}}static async getImageUrlById(e){try{await this.enforceRateLimit();const n=await fetch(`${this.BASE_URL}/cards/${e}`);if(!n.ok)return null;const r=await n.json();return(r.layout==="transform"||r.layout==="modal_dfc"||r.layout==="reversible_card")&&r.card_faces&&r.card_faces.length===2?{front:r.card_faces[0].image_uris?.normal||r.card_faces[0].image_uris?.large||r.card_faces[0].image_uris?.small||"",back:r.card_faces[1].image_uris?.normal||r.card_faces[1].image_uris?.large||r.card_faces[1].image_uris?.small||"",layout:r.layout}:r.image_uris?{front:r.image_uris.normal||r.image_uris.large||r.image_uris.small||"",back:"",layout:r.layout||"normal"}:r.card_faces&&r.card_faces.length>0&&r.card_faces[0].image_uris?{front:r.card_faces[0].image_uris.normal||r.card_faces[0].image_uris.large||r.card_faces[0].image_uris.small||"",back:"",layout:r.layout||"normal"}:{front:r.image_uris?.normal||r.image_uris?.large||r.image_uris?.small||"",back:"",layout:r.layout||"normal"}}catch(n){return console.error("Error fetching image from Scryfall:",n),null}}static async getImageUrlBySetAndNumber(e,n){try{await this.enforceRateLimit();const r=await fetch(`${this.BASE_URL}/cards/${e}/${n}`);if(!r.ok)return null;const s=await r.json();return(s.layout==="transform"||s.layout==="modal_dfc"||s.layout==="reversible_card")&&s.card_faces&&s.card_faces.length===2?{front:s.card_faces[0].image_uris?.normal||s.card_faces[0].image_uris?.large||s.card_faces[0].image_uris?.small||"",back:s.card_faces[1].image_uris?.normal||s.card_faces[1].image_uris?.large||s.card_faces[1].image_uris?.small||"",layout:s.layout}:s.image_uris?{front:s.image_uris.normal||s.image_uris.large||s.image_uris.small||"",back:"",layout:s.layout||"normal"}:s.card_faces&&s.card_faces.length>0&&s.card_faces[0].image_uris?{front:s.card_faces[0].image_uris.normal||s.card_faces[0].image_uris.large||s.card_faces[0].image_uris.small||"",back:"",layout:s.layout||"normal"}:{front:s.image_uris?.normal||s.image_uris?.large||s.image_uris?.small||"",back:"",layout:s.layout||"normal"}}catch(r){return console.error("Error fetching image from Scryfall:",r),null}}static async getByCardmarketId(e){try{await this.enforceRateLimit();const n=await fetch(`${this.BASE_URL}/cards/cardmarket/${e}`);if(!n.ok){console.error(`Scryfall API error for cardmarket_id ${e}: ${n.status} ${n.statusText}`);try{const r=await n.text();console.error(`Scryfall API error details: ${r}`)}catch{console.error("Could not read error response body")}return null}return await n.json()}catch(n){return console.error("Error fetching card by Cardmarket ID from Scryfall:",n),null}}static async getByCardmarketIds(e){try{if(!e||e.length===0)return[];if(e.length===1){const s=await this.getByCardmarketId(e[0]);return s?[s]:[]}await this.enforceRateLimit();const n=await fetch(`${this.BASE_URL}/cards/collection`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifiers:e.map(s=>({cardmarket_id:s}))})});if(!n.ok){console.error(`Scryfall API error for batch cardmarket_ids: ${n.status} ${n.statusText}`);try{const s=await n.text();console.error(`Scryfall API error details: ${s}`)}catch{console.error("Could not read error response body")}return await this.getByCardmarketIdsIndividually(e)}return(await n.json()).data||[]}catch(n){return console.error("Error fetching cards by Cardmarket IDs from Scryfall:",n),await this.getByCardmarketIdsIndividually(e)}}static async getPricesByIds(e){try{if(!e||e.length===0)return[];if(e.length===1){const i=await this.getPriceById(e[0]);return i?[{[e[0]]:{eur:i.getCents()/100}}]:[]}await this.enforceRateLimit();const n=await fetch(`${this.BASE_URL}/cards/collection`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifiers:e.map(i=>({id:i}))})});if(!n.ok){console.error(`Scryfall API error for batch price fetching: ${n.status} ${n.statusText}`);try{const i=await n.text();console.error(`Scryfall API error details: ${i}`)}catch{console.error("Could not read error response body")}return await this.getPricesByIdsIndividually(e)}const r=await n.json(),s=[];if(r.data&&Array.isArray(r.data))for(const i of r.data)i.id&&i.prices&&s.push({[i.id]:{eur:i.prices.eur?parseFloat(i.prices.eur):void 0,eur_foil:i.prices.eur_foil?parseFloat(i.prices.eur_foil):void 0}});return s}catch(n){return console.error("Error fetching prices by Scryfall IDs from Scryfall:",n),await this.getPricesByIdsIndividually(e)}}static async getPricesByIdsIndividually(e){const n=[];for(const r of e)try{const s=await fetch(`${this.BASE_URL}/cards/${r}`);if(s.ok){const i=await s.json();i.prices&&n.push({[r]:{eur:i.prices.eur?parseFloat(i.prices.eur):void 0,eur_foil:i.prices.eur_foil?parseFloat(i.prices.eur_foil):void 0}})}}catch(s){console.error(`Error fetching price for card ${r}:`,s)}return n}static async getByCardmarketIdsIndividually(e){const n=[];for(const r of e){const s=await this.getByCardmarketId(r);s&&n.push(s)}return n}static async hydrateCard(e){try{if(e.scryfall_id){await this.enforceRateLimit();const n=await fetch(`${this.BASE_URL}/cards/${e.scryfall_id}`);if(n.ok)return await n.json()}if(e.setCode&&e.collectorNumber){await this.enforceRateLimit();const n=await fetch(`${this.BASE_URL}/cards/${e.setCode}/${e.collectorNumber}`);if(n.ok)return await n.json()}if(e.name&&e.setCode){await this.enforceRateLimit();let n=await fetch(`${this.BASE_URL}/cards/named?exact=${encodeURIComponent(e.name)}&set=${encodeURIComponent(e.setCode)}`);if(n.ok)return await n.json();if(e.version&&(await this.enforceRateLimit(),n=await fetch(`${this.BASE_URL}/cards/named?exact=${encodeURIComponent(e.name)}&set=${encodeURIComponent(e.setCode)}&include_variations=true`),n.ok))return await n.json();if(await this.enforceRateLimit(),n=await fetch(`${this.BASE_URL}/cards/named?fuzzy=${encodeURIComponent(e.name)}&set=${encodeURIComponent(e.setCode)}`),n.ok)return await n.json()}return null}catch(n){return console.error("Error hydrating card with Scryfall data:",n),null}}}class ZA{static BATCH_SIZE=75;static async syncPrices(e){try{const n=new Date,r=n.toISOString().split("T")[0],s=await Ut.getAll(),i=s.length;let o=0;for(let a=0;a<s.length;a+=this.BATCH_SIZE){const l=s.slice(a,a+this.BATCH_SIZE),c=l.map(u=>u.id);try{const u=await ln.getPricesByIds(c);for(const f of u)for(const[p,m]of Object.entries(f)){if(m.eur!==void 0){const v=Be.parse(m.eur.toString(),"EUR"),_="nonfoil",C={id:`${p}:scryfall:${_}:${r}`,cardId:p,provider:"scryfall",finish:_,date:r,currency:"EUR",priceCent:v.getCents(),asOf:n,createdAt:n};await fe().price_points.put(C)}if(m.eur_foil!==void 0){const v=Be.parse(m.eur_foil.toString(),"EUR"),x={id:`${p}:scryfall:foil:${r}`,cardId:p,provider:"scryfall",finish:"foil",date:r,currency:"EUR",priceCent:v.getCents(),asOf:n,createdAt:n};await fe().price_points.put(x)}o++,e&&e(o,i)}}catch(u){console.error(`Error syncing prices for batch starting at index ${a}:`,u);for(let f=0;f<l.length;f++)o++,e&&e(o,i)}}try{await Gr.createValuationSnapshot(),console.log("Valuation snapshot created after price update")}catch(a){console.error("Error creating valuation snapshot after price update:",a)}}catch(n){throw console.error("Error syncing prices:",n),n}}static async syncPriceForCard(e){try{const n=new Date,r=n.toISOString().split("T")[0],s=await Ut.getById(e);if(!s){console.warn(`Card with ID ${e} not found`);return}const i=await ln.getPricesByIds([s.id]);if(i.length>0){const a=i[0][s.id];if(a.eur!==void 0){const l=Be.parse(a.eur.toString(),"EUR"),u={id:`${s.id}:scryfall:nonfoil:${r}`,cardId:s.id,provider:"scryfall",finish:"nonfoil",date:r,currency:"EUR",priceCent:l.getCents(),asOf:n,createdAt:n};await fe().price_points.put(u)}if(a.eur_foil!==void 0){const l=Be.parse(a.eur_foil.toString(),"EUR"),u={id:`${s.id}:scryfall:foil:${r}`,cardId:s.id,provider:"scryfall",finish:"foil",date:r,currency:"EUR",priceCent:l.getCents(),asOf:n,createdAt:n};await fe().price_points.put(u)}}}catch(n){throw console.error(`Error syncing price for card ${e}:`,n),n}}static async needsPriceUpdate(){try{const n=await fe().price_points.orderBy("asOf").last();if(!n)return!0;const r=new Date,s=new Date(n.asOf);return(r.getTime()-s.getTime())/(1e3*60*60)>=24}catch(e){return console.error("Error checking if price update is needed:",e),!0}}static async needsPriceUpdateForCard(e){try{const n=await $l.getLatestPriceForCard(e);if(!n)return!0;const r=new Date,s=new Date(n.asOf);return(r.getTime()-s.getTime())/(1e3*60*60)>=24}catch(n){return console.error(`Error checking if price update is needed for card ${e}:`,n),!0}}static async getLatestPriceForCard(e){try{const n=await $l.getLatestPriceForCard(e);return n?{price:n.price.getCents(),asOf:n.asOf,provider:n.provider}:null}catch(n){return console.error(`Error getting latest price for card ${e}:`,n),null}}}class hi{static async needsPriceUpdate(){try{const e=await js.get("last_price_update_timestamp");if(!e)return!0;const n=Date.now(),r=new Date(e).getTime();return(n-r)/(1e3*60*60)>=24}catch(e){return console.error("Error checking if price update is needed:",e),!0}}static async schedulePriceUpdate(){try{await this.needsPriceUpdate()&&await this.updatePrices()}catch(e){throw console.error("Error scheduling price update:",e),e}}static async updatePrices(){const e=wi(),n=e.addImport({id:`price-update-${Date.now()}`,type:"pricing",name:"Price Updates",status:"pending",progress:0,totalItems:0,processedItems:0});try{await ZA.syncPrices((s,i)=>{e.updateImport(n,{status:"processing",progress:Math.round(s/i*100),totalItems:i,processedItems:s})});const r=new Date().toISOString();await js.set("last_price_update_timestamp",r),await Gr.createValuationSnapshot(),e.completeImport(n),console.log(`Prices updated successfully at ${r}`)}catch(r){throw console.error("Error updating prices:",r),e.completeImport(n,r instanceof Error?r.message:"Unknown error"),r}}static async getLastUpdateTime(){try{const e=await js.get("last_price_update_timestamp");return e?new Date(e):null}catch(e){return console.error("Error getting last update time:",e),null}}static async getNextUpdateTime(){try{const e=await this.getLastUpdateTime();return e?new Date(e.getTime()+1440*60*1e3):new Date}catch(e){return console.error("Error calculating next update time:",e),null}}}const jg=he(null),Ng=he(null),_s=he(!1);function eI(){const t=s=>s?s.toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Never",e=async()=>{try{jg.value=await hi.getLastUpdateTime(),Ng.value=await hi.getNextUpdateTime()}catch(s){console.error("Error updating price info:",s)}};return{lastUpdate:jg,nextUpdate:Ng,isUpdating:_s,formatDate:t,updatePriceInfo:e,checkAndScheduleUpdate:async()=>{if(!_s.value){_s.value=!0;try{await hi.needsPriceUpdate()&&(await hi.schedulePriceUpdate(),await Gr.createValuationSnapshot()),await e()}catch(s){console.error("Error scheduling price update:",s)}finally{_s.value=!1}}},forceUpdatePrices:async()=>{if(!_s.value){_s.value=!0;try{await hi.updatePrices(),await Gr.createValuationSnapshot(),await e()}catch(s){throw console.error("Error updating prices:",s),s}finally{_s.value=!1}}}}}const tI={class:"home"},nI={class:"row"},rI={class:"col-lg-9"},sI={class:"card glass-panel mb-4"},iI={class:"card-body"},oI={class:"col-lg-3"},aI={class:"card glass-panel mb-4"},lI={class:"card-body"},cI={class:"small text-muted mb-1"},uI={class:"col-md-3"},dI={class:"d-flex justify-content-between"},fI=["disabled"],hI={class:"card glass-panel"},pI={class:"card-body"},gI={class:"small"},mI={class:"d-flex justify-content-between"},yI={class:"fw-medium"},vI={class:"d-flex justify-content-between"},bI={class:"fw-medium"},_I={class:"d-flex justify-content-between"},wI={class:"row g-4"},xI={class:"col-lg-3 col-md-6"},kI={class:"card glass-panel h-100"},CI={class:"card-body"},SI={class:"col-lg-3 col-md-6"},PI={class:"card glass-panel h-100"},AI={class:"card-body"},II={class:"col-lg-3 col-md-6"},EI={class:"card glass-panel h-100"},OI={class:"card-body"},MI={class:"stat-value text-success"},DI={class:"col-lg-3 col-md-6"},TI={class:"card glass-panel h-100"},RI={class:"card-body"},$I={class:"stat-value text-danger"},FI={class:"row mt-4"},LI={class:"col-12"},BI={class:"card glass-panel"},jI={class:"card-body"},NI={class:"row"},zI={class:"col-md-3"},qI={class:"stat-value text-success"},UI={class:"col-md-3"},WI={class:"stat-value text-danger"},VI={class:"col-md-3"},HI={class:"stat-value text-danger"},KI={class:"col-md-3"},YI={class:"stat-value text-danger"},GI=Ze({__name:"HomeView",setup(t){const e=tf(),n=Ck(),r=Sk(),{formatDate:s,checkAndScheduleUpdate:i,forceUpdatePrices:o,lastUpdate:a,nextUpdate:l,isUpdating:c}=eI(),u=he("€0.00"),f=he("€0.00"),p=he("€0.00"),m=he("€0.00"),v=he("€0.00"),_=he("€0.00"),x=he("€0.00"),C=he("€0.00"),S=he("€0.00"),P=he("€0.00"),M=he("€0.00"),D=B=>B.format("de-DE"),A=async()=>{try{await e.loadCards(),await n.loadHoldings(),await r.loadTransactions();const B=await Gr.calculatePortfolioValue(),E=await Gr.calculateTotalCostBasis(),Q=await Gr.calculateUnrealizedPnL(),V=await Gr.calculateRealizedPnL();u.value=D(B),f.value=D(E),p.value=D(Q),m.value=D(V);const z=await Es.getTotalRevenue(),pe=await Es.getTotalCosts(),me=await Es.getTotalFees(),Ce=await Es.getTotalShippingCosts("purchase"),we=await Es.getTotalShippingCosts("sale"),xe=await Es.getTotalNetProfit();v.value=D(z),_.value=D(pe),C.value=D(z),S.value=D(pe),P.value=D(me),M.value=D(Ce.subtract(we)),x.value=D(xe)}catch(B){console.error("Error loading dashboard data:",B)}},T=async()=>{try{await o(),await A()}catch(B){console.error("Error refreshing prices:",B)}};return Tn(async()=>{await A(),setTimeout(async()=>{await i()},0)}),(B,E)=>(U(),Z("div",tI,[w("div",nI,[E[6]||(E[6]=w("div",{class:"col-12"},[w("h1",{class:"mb-4"},"MTG Collection Tracker")],-1)),w("div",rI,[w("div",sI,[w("div",iI,[E[0]||(E[0]=w("h5",{class:"card-title"},"Portfolio Value Over Time",-1)),ze(JA)])])]),w("div",oI,[w("div",aI,[w("div",lI,[E[1]||(E[1]=w("h5",{class:"card-title"},"Price Updates",-1)),w("div",cI," Last: "+oe($e(s)($e(a)))+" | Next: "+oe($e(s)($e(l))),1),w("div",uI,[w("div",dI,[w("button",{onClick:T,class:"btn btn-glass-panel",disabled:$e(c)},oe($e(c)?"Updating...":"Refresh Now"),9,fI)])])])]),w("div",hI,[w("div",pI,[E[5]||(E[5]=w("h5",{class:"card-title"},"Quick Stats",-1)),w("div",gI,[w("div",mI,[E[2]||(E[2]=w("span",{class:"text-muted"},"Portfolio Value:",-1)),w("span",yI,oe(u.value),1)]),w("div",vI,[E[3]||(E[3]=w("span",{class:"text-muted"},"Total Cost:",-1)),w("span",bI,oe(f.value),1)]),w("div",_I,[E[4]||(E[4]=w("span",{class:"text-muted"},"Net Profit/Loss:",-1)),w("span",{class:At(["fw-medium",parseFloat(x.value)>=0?"text-success":"text-danger"])},oe(x.value),3)])])])])])]),w("div",wI,[w("div",xI,[w("div",kI,[w("div",CI,[E[7]||(E[7]=w("h5",{class:"card-title"},"Unrealized P/L",-1)),w("p",{class:At(["stat-value",parseFloat(p.value)>=0?"positive":"negative"])},oe(p.value),3)])])]),w("div",SI,[w("div",PI,[w("div",AI,[E[8]||(E[8]=w("h5",{class:"card-title"},"Realized P/L",-1)),w("p",{class:At(["stat-value",parseFloat(m.value)>=0?"positive":"negative"])},oe(m.value),3)])])]),w("div",II,[w("div",EI,[w("div",OI,[E[9]||(E[9]=w("h5",{class:"card-title"},"Total Revenue",-1)),w("p",MI,oe(v.value),1)])])]),w("div",DI,[w("div",TI,[w("div",RI,[E[10]||(E[10]=w("h5",{class:"card-title"},"Total Costs",-1)),w("p",$I,oe(_.value),1)])])])]),w("div",FI,[w("div",LI,[w("div",BI,[w("div",jI,[E[15]||(E[15]=w("h5",{class:"card-title"},"Financial Breakdown",-1)),w("div",NI,[w("div",zI,[E[11]||(E[11]=w("h6",{class:"text-muted"},"Sales Revenue",-1)),w("p",qI,oe(C.value),1)]),w("div",UI,[E[12]||(E[12]=w("h6",{class:"text-muted"},"Purchase Costs",-1)),w("p",WI,oe(S.value),1)]),w("div",VI,[E[13]||(E[13]=w("h6",{class:"text-muted"},"Fees & Commission",-1)),w("p",HI,oe(P.value),1)]),w("div",KI,[E[14]||(E[14]=w("h6",{class:"text-muted"},"Shipping Costs",-1)),w("p",YI,oe(M.value),1)])])])])])])]))}}),XI=yn(GI,[["__scopeId","data-v-3555c87b"]]),QI={class:"data-import-view"},JI={class:"nav nav-tabs"},ZI={class:"nav-item"},eE={class:"nav-item"},tE={class:"nav-item"},nE={class:"nav-item"},rE={class:"tab-content pt-3"},sE=Ze({__name:"DataImportView",setup(t){return(e,n)=>{const r=Si("router-link"),s=Si("router-view");return U(),Z("div",QI,[n[4]||(n[4]=w("h1",null,"Data Import",-1)),n[5]||(n[5]=w("p",null,"Import your collection and price data from various sources.",-1)),w("ul",JI,[w("li",ZI,[ze(r,{to:"/import/cardmarket",class:"nav-link","active-class":"active"},{default:st(()=>[...n[0]||(n[0]=[yt(" Cardmarket CSV ",-1)])]),_:1})]),w("li",eE,[ze(r,{to:"/import/mtgjson",class:"nav-link","active-class":"active"},{default:st(()=>[...n[1]||(n[1]=[yt(" MTGJSON Prices ",-1)])]),_:1})]),w("li",tE,[ze(r,{to:"/import/price-guide",class:"nav-link","active-class":"active"},{default:st(()=>[...n[2]||(n[2]=[yt(" Cardmarket Price Guide ",-1)])]),_:1})]),w("li",nE,[ze(r,{to:"/import/manabox",class:"nav-link","active-class":"active"},{default:st(()=>[...n[3]||(n[3]=[yt(" ManaBox Scans ",-1)])]),_:1})])]),w("div",rE,[ze(s)])])}}}),iE=yn(sE,[["__scopeId","data-v-c75a7d23"]]);function oE(t){return new Worker("/mtg-pwa/assets/cardmarketCsv-CzsXSO1k.js",{name:t?.name})}const Gt=[];for(let t=0;t<256;++t)Gt.push((t+256).toString(16).slice(1));function aE(t,e=0){return(Gt[t[e+0]]+Gt[t[e+1]]+Gt[t[e+2]]+Gt[t[e+3]]+"-"+Gt[t[e+4]]+Gt[t[e+5]]+"-"+Gt[t[e+6]]+Gt[t[e+7]]+"-"+Gt[t[e+8]]+Gt[t[e+9]]+"-"+Gt[t[e+10]]+Gt[t[e+11]]+Gt[t[e+12]]+Gt[t[e+13]]+Gt[t[e+14]]+Gt[t[e+15]]).toLowerCase()}let Iu;const lE=new Uint8Array(16);function cE(){if(!Iu){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Iu=crypto.getRandomValues.bind(crypto)}return Iu(lE)}const uE=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),zg={randomUUID:uE};function dE(t,e,n){t=t||{};const r=t.random??t.rng?.()??cE();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,aE(r)}function vl(t,e,n){return zg.randomUUID&&!t?zg.randomUUID():dE(t)}const qg={},Eu={foil:"foil","non-foil":"nonfoil",nonfoil:"nonfoil",etched:"etched","etched foil":"etched"},Ou={english:"EN",german:"DE",french:"FR",italian:"IT",spanish:"ES",japanese:"JA",korean:"KO",portuguese:"PT",russian:"RU",chinese:"ZH",hebrew:"HE",latin:"LA",greek:"GR",arabic:"AR"};function _f(t){let e=t.setCode||"";e&&qg[e.toLowerCase()]&&(e=qg[e.toLowerCase()]);let n=(t.number||"").trim().toLowerCase();n=n.replace(/\/\d+$/,"");let r="EN";if(t.lang){const o=t.lang.trim().toUpperCase();Ou[o]?r=Ou[o]:Object.values(Ou).includes(o)&&(r=o)}let s="nonfoil";if(t.finish!==void 0)if(typeof t.finish=="boolean")s=t.finish?"foil":"nonfoil";else{const o=t.finish.trim().toLowerCase();Eu[o]?s=Eu[o]:Object.values(Eu).includes(o)&&(s=o)}let i;return e&&n?i=`${e}:${n}:${r}:${s}`:t.name?i=`name:${t.name.toLowerCase().replace(/\s+/g,"-")}:${r}:${s}`:i=`unknown:${Date.now()}:${r}:${s}`,{cardId:t.cardId,setCode:e,number:n,lang:r,finish:s,fingerprint:i}}function fE(t){const e=t.toLowerCase();return e.includes("foil")&&!e.includes("etched")?"foil":e.includes("etched")?"etched":"nonfoil"}const bn=t=>t.toLowerCase().normalize("NFKD").replace(new RegExp("\\p{Diacritic}","gu"),"").replace(/[\s–—-]+/g," ").replace(/[:'"]/g,"").trim();function Ci(t){const e=new Map;for(const n of t)e.set(bn(n.name),n);return{byName:e}}async function hE(t){const e=t.trim(),n=bn(e),r=await Ug(),i=(await pE()).get(n);if(i)return console.log(`Set code resolved from alias: ${e} -> ${i}`),i;const o=r.byName.get(n);if(o)return console.log(`Set code resolved from exact match: ${e} -> ${o.code}`),await Sn(n,o.code),o.code;if(/^commander:\s*/i.test(e)&&/: extras$/i.test(e)){const c=e.replace(/^commander:\s*/i,"").replace(/: extras$/i,"").trim(),u=r.byName.get(bn(`${c} Commander`));if(u)return console.log(`Set code resolved from commander + extras nested: ${e} -> ${u.code}`),await Sn(n,u.code),u.code;const f=r.byName.get(bn(c));if(f)return console.log(`Set code resolved from commander + extras nested (base): ${e} -> ${f.code}`),await Sn(n,f.code),f.code}if(/^commander:\s*/i.test(e)){const c=e.replace(/^commander:\s*/i,"").trim(),u=r.byName.get(bn(`${c} Commander`));if(u)return console.log(`Set code resolved from commander rewrite (commander): ${e} -> ${u.code}`),await Sn(n,u.code),u.code;const f=r.byName.get(bn(c));if(f)return console.log(`Set code resolved from commander rewrite (base): ${e} -> ${f.code}`),await Sn(n,f.code),f.code}if(/: extras$/i.test(e)){const c=bn(e.replace(/: extras$/i,"")),u=r.byName.get(c);if(u)return console.log(`Set code resolved from extras suffix: ${e} -> ${u.code}`),await Sn(n,u.code),u.code}if(/^universes beyond:\s*/i.test(e)){const c=e.replace(/^universes beyond:\s*/i,"").trim();if(/: extras$/i.test(c)){const f=bn(c.replace(/: extras$/i,"")),p=r.byName.get(f);if(p)return console.log(`Set code resolved from universes beyond + extras: ${e} -> ${p.code}`),await Sn(n,p.code),p.code}const u=r.byName.get(bn(c));if(u)return console.log(`Set code resolved from universes beyond: ${e} -> ${u.code}`),await Sn(n,u.code),u.code}if(/^magic: the gathering -\s*/i.test(e)){const c=e.replace(/^magic: the gathering -\s*/i,"").trim();if(/: extras$/i.test(c)){const f=bn(c.replace(/: extras$/i,"")),p=r.byName.get(f);if(p)return console.log(`Set code resolved from magic: the gathering - extras: ${e} -> ${p.code}`),await Sn(n,p.code),p.code}const u=r.byName.get(bn(c));if(u)return console.log(`Set code resolved from magic: the gathering -: ${e} -> ${u.code}`),await Sn(n,u.code),u.code}if(/^secret lair drop series:/i.test(e)){const c=e.replace(/^secret lair drop series:/i,"").trim();if(/: extras$/i.test(c)){const f=bn(c.replace(/: extras$/i,"")),p=r.byName.get(f);if(p)return console.log(`Set code resolved from secret lair drop series + extras: ${e} -> ${p.code}`),await Sn(n,p.code),p.code}const u=r.byName.get(bn(c));if(u)return console.log(`Set code resolved from secret lair drop series: ${e} -> ${u.code}`),await Sn(n,u.code),u.code}console.log(`Set code unresolved: ${e}`),await wb();const l=(await Ug()).byName.get(n);return l?(console.log(`Set code resolved from fresh exact match: ${e} -> ${l.code}`),l.code):(await Sn(n,null),null)}async function Ug(){try{const t=Date.now()-6048e5,n=await fe().settings.get("scryfall_sets_cache");return n&&n.v&&n.v.fetchedAt>t?(console.log("Using cached Scryfall sets data"),Ci(n.v.sets)):(console.log("Refreshing Scryfall sets cache (no cache or old cache)"),await wb())}catch(t){console.error("Error in getSetIndex:",t);try{const n=await fe().settings.get("scryfall_sets_cache");if(n&&n.v)return console.log("Using old cached Scryfall sets data due to error"),Ci(n.v.sets)}catch(e){console.error("Error accessing cached Scryfall sets data:",e)}return console.log("Returning empty Scryfall sets index"),Ci([])}}async function wb(){try{console.log("Fetching Scryfall sets data...");const t=await fetch("https://api.scryfall.com/sets");if(!t.ok)throw new Error(`Failed to fetch sets: ${t.status} ${t.statusText}`);const n=(await t.json()).data||[];return console.log(`Fetched ${n.length} Scryfall sets`),await fe().settings.put({k:"scryfall_sets_cache",v:{sets:n,fetchedAt:Date.now()},createdAt:new Date,updatedAt:new Date}),Ci(n)}catch(t){console.error("Error refreshing Scryfall sets cache:",t);try{const n=await fe().settings.get("scryfall_sets_cache");if(n&&n.v)return console.log("Using old cached Scryfall sets data due to fetch error"),Ci(n.v.sets)}catch(e){console.error("Error accessing cached Scryfall sets data:",e)}return console.log("Returning empty Scryfall sets index due to errors"),Ci([])}}async function pE(){const t=new Map,n=await fe().settings.get("set_code_aliases");if(n&&n.v)for(const[r,s]of Object.entries(n.v))t.set(r,s);return t}async function Sn(t,e){try{const n=bn(t),r=fe(),s=await r.settings.get("set_code_aliases");let i={};s&&s.v&&(i={...s.v}),i[n]=e,await r.settings.put({k:"set_code_aliases",v:i,createdAt:s?.createdAt||new Date,updatedAt:new Date})}catch(n){console.error("Error storing set code alias:",n)}}function gE(t){return fE(t)}function mE(t){return _f({lang:t}).lang}async function yE(t){return await hE(t)}class vE{static normalizeFingerprint=_f;static mapFinish=gE;static normalizeLang=mE;static resolveSetCode=yE}class bE{static async processScans(){console.log("Starting processScans...");const e=await Rl.getAll();console.log(`Found ${e.length} unprocessed scans`);for(const n of e){if(console.log(`Processing scan: ${n.id}, fingerprint: ${n.cardFingerprint}`),n.cardId)if(await Ut.getById(n.cardId)){console.log(`Scan ${n.id} already has cardId: ${n.cardId} with existing card, skipping`);continue}else console.log(`CardId ${n.cardId} exists but card not found in DB, proceeding with processing`);let r=n.cardId,s;if(r&&(console.log(`Using existing cardId: ${r}`),s=await Ut.getById(r)),!s){console.log(`Card not found, need to process fingerprint: ${n.cardFingerprint}`);const i=n.cardFingerprint.split(":");if(console.log(`Fingerprint parts: ${JSON.stringify(i)}`),n.cardFingerprint.startsWith("name:")&&i.length>=2){const o=i[1]?.replace(/-/g," ")||"";console.log(`Processing name-based fingerprint with name: ${o}`);const a=await ln.hydrateCard({name:o});if(a?.id){const l=a.id;if(console.log(`Successfully resolved card by name: ${a.name||"Unknown"}`),r=l,s=await Ut.getById(l),!s){console.log("Card not in DB, creating new card entry");const c=await ln.getImageUrlById(l),u={id:l,name:a.name||"",set:a.set_name||"",setCode:a.set||"",number:a.collector_number||"",lang:a.lang||"en",finish:n.finish||"nonfoil",layout:c?.layout,imageUrl:c?.front,imageUrlBack:c?.back,cardmarketId:a.cardmarket_id,createdAt:new Date,updatedAt:new Date},f=await Ut.add(u);console.log(`Added new card with id: ${f}`),s=u}}else console.error(`Failed to resolve card by name: ${o} (no id returned)`)}else if(i.length>=4){const o=i[0]||"",a=i[1]||"";console.log(`Processing setCode/number-based fingerprint with setCode: ${o}, number: ${a}`);const l=await ln.hydrateCard({setCode:o,collectorNumber:a});if(l?.id){const c=l.id;if(console.log(`Successfully resolved card by setCode and number: ${l.name||"Unknown"}`),r=c,s=await Ut.getById(c),!s){console.log("Card not in DB, creating new card entry");const u=await ln.getImageUrlById(c),f={id:c,name:l.name||"",set:l.set_name||"",setCode:l.set||"",number:l.collector_number||"",lang:l.lang||"en",finish:n.finish||"nonfoil",layout:u?.layout,imageUrl:u?.front,imageUrlBack:u?.back,cardmarketId:l.cardmarket_id,createdAt:new Date,updatedAt:new Date},p=await Ut.add(f);console.log(`Added new card with id: ${p}`),s=f}}else console.error(`Failed to resolve card by setCode: ${o} and number: ${a} (no id returned)`)}else console.error(`Unexpected fingerprint format: ${n.cardFingerprint}`)}if(s&&r){console.log(`Creating card lot for card: ${r}, scan: ${n.id}`);const i={id:`lot-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,cardId:r,acquisitionId:n.acquisitionId,quantity:n.quantity,unitCost:0,condition:"near_mint",language:n.language||"en",foil:n.finish==="foil",finish:n.finish||"nonfoil",source:"manabox",purchasedAt:n.scannedAt,createdAt:new Date,updatedAt:new Date},o=await kt.add(i);console.log(`Added new card lot with id: ${o}`),await Rl.update(n.id,{cardId:r,lotId:o}),console.log(`Updated scan ${n.id} with cardId: ${r} and lotId: ${o}`)}else console.log(`No card found or created for scan: ${n.id}, skipping lot creation`)}console.log("Completed processScans")}}async function _E(t,e,n,r,s){try{let i=await Vo.getByExternalRef(r,s);i||(i={id:`acq-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,kind:"box",source:r,externalRef:s,currency:"EUR",happenedAt:n,totalPriceCent:e.price,totalFeesCent:e.fees,totalShippingCent:e.shipping,totalCostCent:e.price+e.fees+e.shipping,createdAt:new Date,updatedAt:new Date},await Vo.add(i));const o=i.id,a=[];for(const c of t){const u=_f({name:c.name,setCode:c.expansion,number:c.number,lang:c.language,finish:c.foil});if(await Rl.getByAcquisitionAndExternalRef(o,c.externalRef))continue;const p={cardFingerprint:u.fingerprint,cardId:c.scryfallId,acquisitionId:o,source:c.source,externalRef:c.externalRef,scannedAt:c.scannedAt,quantity:c.quantity,createdAt:new Date,updatedAt:new Date};a.push(p)}const l=[];for(const c of a){const u=await Rl.add({...c,id:`scan-${Date.now()}-${Math.random().toString(36).substr(2,9)}`});l.push(u)}return await bE.processScans(),{acquisitionId:o,scanIds:l}}catch(i){throw console.error("Error importing Manabox scans with box cost:",i),i}}async function wE(t){try{const e=[];for(const n of t)if((await Jt.getBySourceRef(n.source,n.externalRef)).length===0){const s={cardId:n.cardId,lotId:n.lotId,quantity:n.quantity,unitPrice:n.unitPrice,fees:n.fees,shipping:n.shipping,currency:n.currency,source:n.source,externalRef:n.externalRef,happenedAt:n.happenedAt,notes:n.notes,relatedTransactionId:n.relatedTransactionId},i=await Jt.add({...s,id:`tx-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,kind:"SELL",createdAt:new Date,updatedAt:new Date});e.push(i)}return e}catch(e){throw console.error("Error importing Cardmarket SELLs:",e),e}}async function xE(t,e){try{const n=[],r=[];for(const s of t){const o=(await xp.getAll()).find(a=>a.name===s.name&&a.platform===s.platform);if(o)n.push(o.id);else{const a=`deck_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,l={...s,id:a,createdAt:s.createdAt||new Date,updatedAt:s.updatedAt||new Date};await xp.add(l),n.push(l.id)}}for(const s of e)if(!await kp.getByDeckIdAndCardId(s.deckId,s.cardId)){const o={id:`deckcard-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,deckId:s.deckId,cardId:s.cardId,lotId:s.lotId,quantity:s.quantity,role:s.role,addedAt:s.addedAt,removedAt:s.removedAt,createdAt:s.createdAt||new Date};await kp.add(o),r.push(s.cardId)}return{deckIds:n,deckCardIds:r}}catch(n){throw console.error("Error importing decks:",n),n}}const{resolveSetCode:Wg}=vE;class nl{static async importCardmarketTransactions(e){const n=wi(),r=vl();n.addImport({id:r,type:"cardmarket",name:"Cardmarket Transactions",status:"pending",progress:0,totalItems:e.length,processedItems:0});try{const s=new Date;for(let i=0;i<e.length;i++){const o=e[i];n.updateImport(r,{status:"processing",processedItems:i+1,progress:Math.round((i+1)/e.length*100)});const a=`cardmarket:${o.reference}:${o.lineNumber}`;if(await fe().transactions.where("externalRef").equals(a).first())continue;const u=Be.parse(o.amount,"EUR"),f={id:`tx-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,kind:u.isPositive()?"SELL":"BUY",quantity:1,unitPrice:u.getCents(),fees:0,shipping:0,currency:"EUR",source:"cardmarket",externalRef:a,happenedAt:new Date(o.date),createdAt:s,updatedAt:s};await Jt.add(f)}n.completeImport(r)}catch(s){throw console.error("Error importing Cardmarket transactions:",s),n.completeImport(r,s.message),s}}static async importCardmarketOrders(e){const n=wi(),r=vl();n.addImport({id:r,type:"cardmarket",name:"Cardmarket Orders",status:"pending",progress:0,totalItems:e.length,processedItems:0});try{const s=new Date;for(let i=0;i<e.length;i++){const o=e[i];n.updateImport(r,{status:"processing",processedItems:i+1,progress:Math.round((i+1)/e.length*100)});const a=`cardmarket:order:${o.orderId}:${o.lineNumber}`;if(await fe().transactions.where("externalRef").equals(a).first())continue;const u=Be.parse(o.merchandiseValue,"EUR"),f=Be.parse(o.shipmentCosts,"EUR"),p=Be.parse(o.commission,"EUR"),m={id:`order-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,kind:o.direction==="sale"?"SELL":"BUY",quantity:parseInt(o.articleCount)||1,unitPrice:Math.round(u.getCents()/(parseInt(o.articleCount)||1)),fees:p.getCents(),shipping:f.getCents(),currency:"EUR",source:"cardmarket",externalRef:a,happenedAt:new Date(o.dateOfPurchase),createdAt:s,updatedAt:s};if(await Jt.add(m),o.direction==="purchase"){const _=await fe().transactions.where("externalRef").startsWith(`cardmarket:article:${o.orderId}:`).toArray();for(const x of _)if(x.lotId){const C=await kt.getById(x.lotId);if(C){const S=parseInt(o.articleCount)||1,P=x.quantity/S,M=Es.calculateTrueAcquisitionCost(u.getCents()/100,f.getCents()/100,p.getCents()/100,S),D=Math.round(f.getCents()*P/x.quantity),A=Math.round(p.getCents()*P/x.quantity);await kt.update(C.id,{acquisitionPriceCent:M,acquisitionFeesCent:A,acquisitionShippingCent:D,totalAcquisitionCostCent:M+A+D,updatedAt:s})}}}if(o.direction==="sale"){const _=await fe().transactions.where("externalRef").startsWith(`cardmarket:article:${o.orderId}:`).toArray();for(const x of _)if(x.lotId){const C=await kt.getById(x.lotId);if(C){const S=parseInt(o.articleCount)||1,P=x.quantity/S,M=Math.round(u.getCents()/S),D=Math.round(p.getCents()*P/x.quantity),A=Math.round(f.getCents()*P/x.quantity);await kt.update(C.id,{salePriceCent:M,saleFeesCent:D,saleShippingCent:A,totalSaleRevenueCent:M-D+A,updatedAt:s})}}}}n.completeImport(r)}catch(s){throw console.error("Error importing Cardmarket orders:",s),n.completeImport(r,s.message),s}}static async importCardmarketArticles(e){const n=wi(),r=vl();n.addImport({id:r,type:"cardmarket",name:"Cardmarket Articles",status:"pending",progress:0,totalItems:e.length,processedItems:0});try{const s=new Date;for(let i=0;i<e.length;i++){const o=e[i];n.updateImport(r,{status:"processing",processedItems:i+1,progress:Math.round((i+1)/e.length*100)});const{cardId:a,cardData:l}=await this.resolveCard(o),c=Be.parse(o.price,"EUR");a&&await this.ensureCardInDb(a,l,o);let u;o.direction==="purchase"&&(u=await this.getOrCreateLotForPurchase(a,c,o)),await this.createTransactionForArticle(o,a,u,c,s)}n.completeImport(r)}catch(s){throw console.error("Error importing Cardmarket articles:",s),n.completeImport(r,s.message),s}}static async resolveCard(e){let n=null,r=null;if(e.productId){const s=e.productId.split(" | ").map(i=>i.trim());if(s.length===1)n=await ln.getByCardmarketId(s[0]),console.log(JSON.stringify({product_ids:s,resolved_via:"cardmarket_id",cardmarket_id:s[0],final_uri:`/cards/cardmarket/${s[0]}`}));else if(s.length>1){const i=await ln.getByCardmarketIds(s);i&&i.length>0&&(n=i[0],console.log(JSON.stringify({product_ids:s,resolved_via:"cardmarket_id",cardmarket_id:s[0],final_uri:"/cards/collection"})))}r=n?.id||null}if(!r){const s=await Wg(e.expansion),i=this.extractCollectorNumber(e.name);let o=e.name,a=null;const l=e.name.match(/^(.+?)\s*\((V\.\d+)\)$/i);l&&(o=l[1].trim(),a=l[2]),console.log(JSON.stringify({product_ids:e.productId?e.productId.split(" | ").map(c=>c.trim()):[],resolved_via:"set+cn",set_code:s,collector_number:i,final_uri:s?`/cards/${s}/${i}`:""})),n=await ln.hydrateCard({name:o,setCode:s||e.expansion,collectorNumber:i,version:a}),r=n?.id||null,r||console.log(JSON.stringify({product_ids:e.productId?e.productId.split(" | ").map(c=>c.trim()):[],resolved_via:"none",set_code:null,collector_number:"",final_uri:"",name:e.name,expansion:e.expansion}))}return{cardId:r,cardData:n}}static extractCollectorNumber(e){const n=[/-\s*(\d+[a-zA-Z★]*)\s*-/i,/-\s*([IVXLCDM]+)\s*-/i,/\s+(\d+[a-zA-Z★]*)\s*$/i,/\((\d+[a-zA-Z★]*)\)/i];for(const r of n){const s=e.match(r);if(s)return s[1]}return""}static async ensureCardInDb(e,n,r){if(await Ut.getById(e))await this.updatePriceForCard(e);else{const i=n||await ln.hydrateCard({scryfall_id:e,name:r.name,setCode:r.expansion,collectorNumber:""}),o=await ln.getImageUrlById(e),a={id:e,oracleId:i?.oracle_id||n?.oracle_id||"",name:r.name,set:i?.set_name||n?.set_name||r.expansion,setCode:i?.set||n?.set||await Wg(r.expansion)||"",number:i?.collector_number||n?.collector_number||this.extractCollectorNumber(r.name)||"",lang:i?.lang||n?.lang||"en",finish:"nonfoil",layout:o?.layout||"normal",imageUrl:o?.front||"",imageUrlBack:o?.back||"",cardmarketId:typeof i?.cardmarket_id=="number"?i.cardmarket_id:void 0,createdAt:new Date,updatedAt:new Date};await Ut.add(a),await this.updatePriceForCard(e)}}static async updatePriceForCard(e){try{const n=new Date,r=n.toISOString().split("T")[0],s=`${e}:scryfall:${r}`;if(!await fe().price_points.get(s)){const a=await ln.getPriceById(e);if(a){const l={id:s,cardId:e,provider:"scryfall",finish:"nonfoil",date:n.toISOString().split("T")[0],currency:"EUR",priceCent:a.getCents(),asOf:n,createdAt:n};await fe().price_points.put(l)}}}catch(n){console.error(`Error checking/updating price for existing card ${e}:`,n)}}static async getOrCreateLotForPurchase(e,n,r){const s=new Date,i=`cardmarket:lot:${r.shipmentId}:${r.lineNumber}`,o=await kt.getByExternalRef(i);let a=null;if(o.length>0)a=o[0];else if(e){const l=await kt.getByCardId(e);for(const c of l)if(!(await Jt.getByLotId(c.id)).some(p=>p.kind==="BUY")){a=c;break}}if(a)return await kt.update(a.id,{unitCost:n.getCents(),source:"cardmarket",purchasedAt:new Date(r.dateOfPurchase),updatedAt:s,acquisitionPriceCent:n.getCents(),acquisitionFeesCent:0,acquisitionShippingCent:0,totalAcquisitionCostCent:n.getCents()}),a.id;{const l=`lot-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,c={id:l,cardId:e||"",quantity:parseInt(r.amount)||1,unitCost:n.getCents(),condition:"",language:"",foil:!1,finish:"nonfoil",source:"cardmarket",currency:"EUR",externalRef:i,purchasedAt:new Date(r.dateOfPurchase),acquisitionPriceCent:n.getCents(),acquisitionFeesCent:0,acquisitionShippingCent:0,totalAcquisitionCostCent:n.getCents(),createdAt:s,updatedAt:s};return await kt.add(c),l}}static async createTransactionForArticle(e,n,r,s,i){const o=`cardmarket:article:${e.shipmentId}:${e.lineNumber}`;if(await fe().transactions.where("externalRef").equals(o).first())return;const c={id:`article-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,kind:e.direction==="sale"?"SELL":"BUY",cardId:n||void 0,lotId:r,quantity:parseInt(e.amount)||1,unitPrice:s.getCents(),fees:0,shipping:0,currency:"EUR",source:"cardmarket",externalRef:o,happenedAt:new Date(e.dateOfPurchase),createdAt:i,updatedAt:i};await Jt.add(c)}static async checkForExistingImports(e){const n=[];for(const r of e){const s=`cardmarket:article:${r.shipmentId}:${r.lineNumber}`,o=await fe().transactions.where("externalRef").equals(s).first();n.push({article:r,exists:!!o})}return n}static async importManaboxScansWithBoxCost(e,n,r,s,i){return await _E(e,n,r,s,i)}static async importCardmarketSells(e){return await wE(e)}static async importDecks(e,n){return await xE(e,n)}}const kE={class:"cardmarket-wizard"},CE={class:"wizard-progress"},SE={class:"step-number"},PE={class:"step-label"},AE={class:"card"},IE={class:"card-body"},EE={class:"wizard-content"},OE={key:0,class:"step-content"},ME={class:"file-upload-section"},DE={class:"mb-3"},TE={key:0,class:"files-info"},RE={class:"file-list"},$E={class:"file-name"},FE={class:"file-type"},LE={class:"file-size"},BE={key:0,class:"error-messages"},jE={key:1,class:"step-content"},NE={key:0,class:"preview-stats"},zE={class:"stat"},qE={class:"stat-value"},UE={class:"stat"},WE={class:"stat-value"},VE={class:"stat"},HE={class:"stat-value"},KE={key:1,class:"preview-table-container"},YE={class:"preview-table-wrapper"},GE={class:"preview-table"},XE={key:0},QE={key:1},JE={key:2},ZE={key:3},eO={key:4},tO={key:5},nO={key:6},rO={key:7},sO={key:8},iO={key:9},oO={key:10},aO={key:11},lO={key:12},cO={key:13},uO={key:14},dO={key:0},fO={key:1},hO={key:2},pO={key:3},gO={key:4},mO={key:5},yO={key:6},vO={key:7},bO={key:8},_O={key:9},wO={key:10},xO={key:11},kO={key:12},CO={key:13},SO={key:14},PO={key:0},AO=["colspan"],IO={key:2,class:"invalid-rows-section"},EO={class:"invalid-rows"},OO={class:"row-number"},MO={class:"row-errors"},DO={key:0,class:"more-rows"},TO={key:2,class:"step-content"},RO={key:0,class:"conflicts-section"},$O={class:"conflicts-list"},FO={class:"flex-grow-1"},LO={class:"fw-medium"},BO={class:"small text-muted"},jO={key:1,class:"conflicts-section"},NO={class:"conflicts-list"},zO={class:"flex-grow-1"},qO={class:"fw-medium"},UO={class:"small text-muted"},WO={key:3,class:"step-content"},VO={class:"summary-stats"},HO={class:"stat"},KO={class:"stat-value"},YO={class:"stat"},GO={class:"stat-value"},XO={key:0,class:"stat"},QO={class:"stat-value"},JO={class:"summary-details"},ZO={class:"summary-grid"},eM={class:"summary-item"},tM={class:"summary-value"},nM={class:"summary-item"},rM={class:"summary-value"},sM={class:"summary-item"},iM={class:"summary-value"},oM={key:0,class:"import-status error"},aM={class:"wizard-navigation pt-3"},lM=["disabled"],cM=["disabled"],uM=Ze({__name:"CardmarketImportWizard",setup(t){const e=[{key:"upload",title:"Upload"},{key:"preview",title:"Preview"},{key:"conflicts",title:"Conflicts"},{key:"summary",title:"Summary"}],n=he(0),r=he([]),s=he({}),i=he({}),o=he({}),a=he(!1),l=he(null),c=he({}),u=he([]),f=te=>{if(te===0)return"0 Bytes";const ee=1024,Y=["Bytes","KB","MB","GB"],Le=Math.floor(Math.log(te)/Math.log(ee));return parseFloat((te/Math.pow(ee,Le)).toFixed(2))+" "+Y[Le]},p=te=>new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(te/100),m=async te=>{const Y=te.target.files;if(!(!Y||Y.length===0)){u.value=[],r.value=Array.from(Y);try{for(const Le of r.value){if(!Le.name.endsWith(".csv")){u.value.push(`File ${Le.name} is not a CSV file.`);continue}const ke=await Le.text();s.value[Le.name]=ke,i.value[Le.name]=Ce(Le.name)}await v()}catch(Le){u.value.push("Failed to read the files: "+Le.message)}}},v=async()=>{try{o.value={};for(const[te,ee]of Object.entries(s.value)){const Y=i.value[te];if(Y==="unknown"){console.warn(`Skipping unknown file type: ${te}`);continue}const Le=new oE;let ke="",We="sale";switch(Y){case"transactions":ke="parseTransactions";break;case"sold-orders":ke="parseOrders",We="sale";break;case"purchased-orders":ke="parseOrders",We="purchase";break;case"sold-articles":ke="parseArticles",We="sale";break;case"purchased-articles":ke="parseArticles",We="purchase";break}Le.postMessage({type:ke,data:ee,direction:We});const wt=await new Promise((gt,it)=>{Le.onmessage=ae=>{const{type:Me,result:re,error:Fe}=ae.data;console.log("Worker response type:",Me),Fe?it(new Error(Fe)):gt(re)},Le.onerror=ae=>{it(ae)}});o.value[Y]=wt,Le.terminate()}await we()}catch(te){u.value.push("Failed to parse CSV data: "+te.message)}},_=Ve(()=>n.value===0?r.value.length>0&&u.value.length===0:!0),x=async()=>{_.value&&(n.value===0&&await v(),n.value<e.length-1&&n.value++)},C=()=>{n.value>0&&n.value--},S=async()=>{if(!a.value){a.value=!0,l.value=null;try{for(const[te,ee]of Object.entries(o.value)){if(!ee||ee.length===0)continue;const Y=pe(ee,te);switch(te){case"transactions":await nl.importCardmarketTransactions(Y);break;case"sold-orders":case"purchased-orders":await nl.importCardmarketOrders(Y);break;case"sold-articles":case"purchased-articles":await nl.importCardmarketArticles(Y);break}}l.value="Import completed successfully! Check the status indicator in the top right for details.",setTimeout(()=>{n.value=0,r.value=[],s.value={},i.value={},o.value={},u.value=[],a.value=!1,l.value=null},3e3)}catch(te){l.value="Failed to import data: "+te.message,a.value=!1}}},P=te=>pe(o.value[te]||[],te),M=te=>pe(o.value[te]||[],te).filter(Y=>xe(te,Y)),D=()=>Object.values(o.value).reduce((te,ee)=>te+(ee?.length||0),0),A=()=>{let te=0;for(const[ee,Y]of Object.entries(o.value))Y&&(te+=pe(Y,ee).length);return te},T=te=>{if(/^\d{2}\.\d{2}\.\d{4} \d{2}:\d{2}:\d{2}$/.test(te)){const Le=te.split(" ")[0].split("."),ke=parseInt(Le[0],10),We=parseInt(Le[1],10)-1,wt=parseInt(Le[2],10),gt=new Date(wt,We,ke);return gt.getFullYear()===wt&&gt.getMonth()===We&&gt.getDate()===ke}if(/^\d{2}\.\d{2}\.\d{4}$/.test(te)){const ee=te.split("."),Y=parseInt(ee[0],10),Le=parseInt(ee[1],10)-1,ke=parseInt(ee[2],10),We=new Date(ke,Le,Y);return We.getFullYear()===ke&&We.getMonth()===Le&&We.getDate()===Y}if(/^\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}$/.test(te)){const ee=new Date(te);return!isNaN(ee.getTime())}if(/^\d{4}-\d{2}-\d{2}$/.test(te)){const ee=new Date(te);return!isNaN(ee.getTime())}return!1},B=te=>{if(te==null)return!1;if(typeof te=="number")return Number.isFinite(te);const ee=String(te).trim().replace(/[€$£\s]/g,"").replace(",","."),Y=Number.parseFloat(ee);return Number.isFinite(Y)},E=te=>{const ee=Number.parseInt(String(te??"").trim(),10);return Number.isFinite(ee)&&ee>0};function Q(te){switch(te){case"transactions":return"Transaction Summary";case"sold-orders":return"Sold Orders";case"purchased-orders":return"Purchased Orders";case"sold-articles":return"Sold Articles";case"purchased-articles":return"Purchased Articles";default:return"Unknown File Type"}}const V=te=>{switch(te){case"transactions":return 5;case"sold-orders":case"purchased-orders":return 6;case"sold-articles":case"purchased-articles":return 8;default:return 5}},z=(te,ee)=>{const Y=[];if(!te.date&&!te.dateOfPurchase)Y.push("Date is required");else{const Le=te.date||te.dateOfPurchase;T(Le)||Y.push("Invalid date format (expected DD.MM.YYYY or YYYY-MM-DD)")}return ee.includes("articles")?(te.name||Y.push("Card name is required"),te.expansion||Y.push("Expansion/Set is required"),te.price===void 0||te.price===null||String(te.price).trim()===""?Y.push("Price is required"):B(te.price)||Y.push("Invalid price format (expected numeric value)"),te.amount===void 0||te.amount===null||String(te.amount).trim()===""?Y.push("Quantity is required"):E(te.amount)||Y.push("Invalid quantity (expected positive integer)"),te.shipmentId||Y.push("Order ID is required")):ee.includes("orders")?(te.dateOfPurchase?T(te.dateOfPurchase)||Y.push("Invalid date format (expected DD.MM.YYYY or YYYY-MM-DD)"):Y.push("Date is required"),te.orderId||Y.push("Order ID is required"),te.articleCount?E(te.articleCount)||Y.push("Invalid article count (expected positive integer)"):Y.push("Article count is required"),te.merchandiseValue===void 0||te.merchandiseValue===null||String(te.merchandiseValue).trim()===""?Y.push("Merchandise value is required"):B(te.merchandiseValue)||Y.push("Invalid merchandise value format (expected numeric value)")):ee==="transactions"&&(te.reference||Y.push("Reference is required"),te.amount===void 0||te.amount===null||String(te.amount).trim()===""?Y.push("Amount is required"):B(te.amount)||Y.push("Invalid amount format (expected numeric value)"),te.category||Y.push("Category is required"),te.type||Y.push("Type is required")),Y},pe=(te,ee="articles")=>te.filter(Y=>z(Y,ee).length===0),me=(te,ee="articles")=>te.map((Y,Le)=>({index:Le,row:Y,errors:z(Y,ee)})).filter(Y=>Y.errors.length>0),Ce=te=>{const ee=te.toLowerCase();return ee.includes("transaction")?"transactions":ee.includes("sold orders")?"sold-orders":ee.includes("purchased orders")?"purchased-orders":ee.includes("sold articles")?"sold-articles":ee.includes("purchased articles")?"purchased-articles":"unknown"},we=async()=>{try{c.value={};for(const[te,ee]of Object.entries(o.value))if(!(!ee||ee.length===0)&&te.includes("articles")){const Y=await nl.checkForExistingImports(ee);for(const Le of Y){const ke=`${te}:${Le.article.shipmentId}:${Le.article.lineNumber}`;c.value[ke]=Le.exists}}}catch(te){console.error("Error checking for existing imports:",te)}},xe=(te,ee)=>{const Y=`${te}:${ee.shipmentId}:${ee.lineNumber}`;return!!c.value[Y]};return(te,ee)=>(U(),Z("div",kE,[ee[29]||(ee[29]=w("h1",null,"Cardmarket Import Wizard",-1)),w("div",CE,[(U(),Z(et,null,Ft(e,(Y,Le)=>w("div",{key:Y.key,class:At(["step",{active:n.value===Le,completed:Le<n.value}])},[w("div",SE,oe(Le+1),1),w("div",PE,oe(Y.title),1)],2)),64))]),w("div",AE,[w("div",IE,[w("div",EE,[n.value===0?(U(),Z("div",OE,[ee[2]||(ee[2]=Gy('<h2 data-v-4f46dc4c>Upload CSV Files</h2><p data-v-4f46dc4c>Please select all Cardmarket CSV export files to import. You can select multiple files at once.</p><div class="alert alert-info mb-4" data-v-4f46dc4c><h3 class="alert-heading" data-v-4f46dc4c>Where to Get Cardmarket CSV Files</h3><p data-v-4f46dc4c>Cardmarket provides several types of CSV exports. For the best import results, we recommend downloading these files:</p><div class="row" data-v-4f46dc4c><div class="col-md-6" data-v-4f46dc4c><h4 data-v-4f46dc4c>1. Transaction Summary</h4><p data-v-4f46dc4c>Contains financial summary of all your transactions (sales, purchases, fees).</p><p data-v-4f46dc4c><strong data-v-4f46dc4c>Download from:</strong><br data-v-4f46dc4c> Cardmarket → My Account → Transactions → All Transactions → Download CSV</p><p class="mb-1" data-v-4f46dc4c><strong data-v-4f46dc4c>Direct link:</strong></p><a href="https://www.cardmarket.com/de/Magic/Account/Transactions/Details" target="_blank" rel="noopener noreferrer" class="btn btn-sm btn-glass-primary" data-v-4f46dc4c> Go to Transactions Page </a></div><div class="col-md-6" data-v-4f46dc4c><h4 data-v-4f46dc4c>2. Sold Articles</h4><p data-v-4f46dc4c>Contains detailed information about individual items you&#39;ve sold.</p><p data-v-4f46dc4c><strong data-v-4f46dc4c>Download from:</strong><br data-v-4f46dc4c> Cardmarket → My Account → Statistics → Sold Articles → CSV Export</p><p class="mb-1" data-v-4f46dc4c><strong data-v-4f46dc4c>Direct link:</strong></p><a href="https://www.cardmarket.com/de/Magic/Account/Statistics" target="_blank" rel="noopener noreferrer" class="btn btn-sm btn-glass-primary" data-v-4f46dc4c> Go to Statistics Page </a></div></div><div class="row mt-3" data-v-4f46dc4c><div class="col-md-6" data-v-4f46dc4c><h4 data-v-4f46dc4c>3. Purchased Articles</h4><p data-v-4f46dc4c>Contains detailed information about individual items you&#39;ve bought.</p><p data-v-4f46dc4c><strong data-v-4f46dc4c>Download from:</strong><br data-v-4f46dc4c> Cardmarket → My Account → Statistics → Purchased Articles → CSV Export</p><p class="mb-1" data-v-4f46dc4c><strong data-v-4f46dc4c>Direct link:</strong></p><a href="https://www.cardmarket.com/de/Magic/Account/Statistics" target="_blank" rel="noopener noreferrer" class="btn btn-sm btn-glass-primary" data-v-4f46dc4c> Go to Statistics Page </a></div><div class="col-md-6" data-v-4f46dc4c><h4 data-v-4f46dc4c>Optional: Order Details</h4><p data-v-4f46dc4c>Sold Orders and Purchased Orders contain redundant information. Only import if you specifically need order-level details.</p><p data-v-4f46dc4c><strong data-v-4f46dc4c>Download from:</strong><br data-v-4f46dc4c> Cardmarket → My Account → Statistics → Sold/Purchased Orders → CSV Export</p></div></div><div class="mt-3" data-v-4f46dc4c><small class="text-muted" data-v-4f46dc4c><strong data-v-4f46dc4c>Tip:</strong> The most important files are Transaction Summary, Sold Articles, and Purchased Articles. Order files (Sold Orders, Purchased Orders) contain redundant information but can be imported if needed. </small></div></div>',3)),w("div",ME,[w("div",DE,[ee[0]||(ee[0]=w("label",{for:"csv-files",class:"form-label"}," Choose CSV Files ",-1)),w("input",{id:"csv-files",type:"file",accept:".csv",multiple:"",onChange:m,class:"form-control"},null,32)]),r.value.length>0?(U(),Z("div",TE,[ee[1]||(ee[1]=w("h3",null,"Uploaded Files",-1)),w("ul",RE,[(U(!0),Z(et,null,Ft(r.value,Y=>(U(),Z("li",{key:Y.name,class:"file-item"},[w("span",$E,oe(Y.name),1),w("span",FE,"("+oe(Ce(Y.name))+")",1),w("span",LE,"- "+oe(f(Y.size)),1)]))),128))])])):Pe("",!0)]),u.value.length>0?(U(),Z("div",BE,[(U(!0),Z(et,null,Ft(u.value,Y=>(U(),Z("div",{key:Y,class:"error-message"},oe(Y),1))),128))])):Pe("",!0)])):n.value===1?(U(),Z("div",jE,[ee[10]||(ee[10]=w("h2",null,"Preview Data",-1)),ee[11]||(ee[11]=w("p",null,"Review the data that will be imported. Check for any issues before proceeding.",-1)),(U(!0),Z(et,null,Ft(i.value,(Y,Le)=>(U(),Z("div",{key:Le,class:"file-preview"},[w("h3",null,oe(Q(Y)),1),o.value[Y]&&o.value[Y].length>0?(U(),Z("div",NE,[w("div",zE,[w("div",qE,oe(o.value[Y].length),1),ee[3]||(ee[3]=w("div",{class:"stat-label"},"Total Rows",-1))]),w("div",UE,[w("div",WE,oe(pe(o.value[Y],Y).length),1),ee[4]||(ee[4]=w("div",{class:"stat-label"},"Valid Rows",-1))]),w("div",VE,[w("div",HE,oe(me(o.value[Y],Y).length),1),ee[5]||(ee[5]=w("div",{class:"stat-label"},"Invalid Rows",-1))])])):Pe("",!0),o.value[Y]&&o.value[Y].length>0?(U(),Z("div",KE,[ee[7]||(ee[7]=w("h4",null,"Valid Data Preview",-1)),w("div",YE,[w("table",GE,[w("thead",null,[w("tr",null,[Y==="transactions"?(U(),Z("th",XE,"Reference")):(U(),Z("th",QE,"Line")),ee[6]||(ee[6]=w("th",null,"Date",-1)),Y.includes("articles")?(U(),Z("th",JE,"Card Name")):Pe("",!0),Y.includes("articles")?(U(),Z("th",ZE,"Expansion")):Pe("",!0),Y.includes("articles")?(U(),Z("th",eO,"Price")):Pe("",!0),Y.includes("articles")?(U(),Z("th",tO,"Quantity")):Pe("",!0),Y.includes("articles")?(U(),Z("th",nO,"Order ID")):Pe("",!0),Y.includes("articles")?(U(),Z("th",rO,"Status")):Pe("",!0),Y.includes("orders")?(U(),Z("th",sO,"Order ID")):Pe("",!0),Y.includes("orders")?(U(),Z("th",iO,"Username")):Pe("",!0),Y.includes("orders")?(U(),Z("th",oO,"Article Count")):Pe("",!0),Y.includes("orders")?(U(),Z("th",aO,"Merchandise Value")):Pe("",!0),Y==="transactions"?(U(),Z("th",lO,"Category")):Pe("",!0),Y==="transactions"?(U(),Z("th",cO,"Type")):Pe("",!0),Y==="transactions"?(U(),Z("th",uO,"Amount")):Pe("",!0)])]),w("tbody",null,[(U(!0),Z(et,null,Ft(pe(o.value[Y],Y).slice(0,5),(ke,We)=>(U(),Z("tr",{key:We},[Y==="transactions"?(U(),Z("td",dO,oe(ke.reference),1)):(U(),Z("td",fO,oe(ke.lineNumber),1)),w("td",null,oe(ke.date||ke.dateOfPurchase),1),Y.includes("articles")?(U(),Z("td",hO,oe(ke.name),1)):Pe("",!0),Y.includes("articles")?(U(),Z("td",pO,oe(ke.expansion),1)):Pe("",!0),Y.includes("articles")?(U(),Z("td",gO,oe(p(parseFloat(String(ke.price).replace(/[€$£\s]/g,"").replace(",","."))*100)),1)):Pe("",!0),Y.includes("articles")?(U(),Z("td",mO,oe(ke.amount),1)):Pe("",!0),Y.includes("articles")?(U(),Z("td",yO,oe(ke.shipmentId),1)):Pe("",!0),Y.includes("articles")?(U(),Z("td",vO,[w("span",{class:At(xe(Y,ke)?"text-success":"text-primary")},oe(xe(Y,ke)?"Already Imported":"New"),3)])):Pe("",!0),Y.includes("orders")?(U(),Z("td",bO,oe(ke.orderId),1)):Pe("",!0),Y.includes("orders")?(U(),Z("td",_O,oe(ke.username),1)):Pe("",!0),Y.includes("orders")?(U(),Z("td",wO,oe(ke.articleCount),1)):Pe("",!0),Y.includes("orders")?(U(),Z("td",xO,oe(p(parseFloat(String(ke.merchandiseValue).replace(/[€$£\s]/g,"").replace(",","."))*100)),1)):Pe("",!0),Y==="transactions"?(U(),Z("td",kO,oe(ke.category),1)):Pe("",!0),Y==="transactions"?(U(),Z("td",CO,oe(ke.type),1)):Pe("",!0),Y==="transactions"?(U(),Z("td",SO,oe(p(parseFloat(String(ke.amount).replace(/[€$£\s]/g,"").replace(",","."))*100)),1)):Pe("",!0)]))),128)),pe(o.value[Y],Y).length>5?(U(),Z("tr",PO,[w("td",{colspan:V(Y),class:"more-rows-cell"}," ... and "+oe(pe(o.value[Y],Y).length-5)+" more rows ",9,AO)])):Pe("",!0)])])])])):Pe("",!0),me(o.value[Y],Y).length>0?(U(),Z("div",IO,[ee[8]||(ee[8]=w("h4",null,"Invalid Rows",-1)),ee[9]||(ee[9]=w("p",null,"The following rows have issues and will be skipped:",-1)),w("div",EO,[(U(!0),Z(et,null,Ft(me(o.value[Y],Y).slice(0,3),(ke,We)=>(U(),Z("div",{key:We,class:"invalid-row"},[w("div",OO,"Row "+oe(ke.row.lineNumber||ke.row.reference),1),w("div",MO,oe(ke.errors.join(", ")),1)]))),128)),me(o.value[Y],Y).length>3?(U(),Z("div",DO," ... and "+oe(me(o.value[Y],Y).length-3)+" more rows ",1)):Pe("",!0)])])):Pe("",!0)]))),128))])):n.value===2?(U(),Z("div",TO,[ee[18]||(ee[18]=w("h2",null,"Resolve Conflicts",-1)),ee[19]||(ee[19]=w("p",null,"Check for duplicate imports and resolve any conflicts.",-1)),(U(!0),Z(et,null,Ft(i.value,(Y,Le)=>(U(),Z("div",{key:Le,class:"file-conflicts"},[w("h3",null,oe(Q(Y)),1),Y.includes("articles")&&M(Y).length>0?(U(),Z("div",RO,[ee[13]||(ee[13]=w("h4",null,"Already Imported Articles",-1)),ee[14]||(ee[14]=w("p",null,"The following articles have already been imported and will be skipped:",-1)),w("div",$O,[(U(!0),Z(et,null,Ft(M(Y),(ke,We)=>(U(),Z("div",{key:We,class:"d-flex justify-content-between align-items-center p-2 bg-light rounded"},[w("div",FO,[w("div",LO,oe(ke.name),1),w("div",BO,oe(ke.expansion)+" • "+oe(ke.amount)+" × "+oe(p(parseFloat(String(ke.price).replace(/[€$£\s]/g,"").replace(",","."))*100))+" • Order #"+oe(ke.shipmentId),1)]),ee[12]||(ee[12]=w("div",{class:"ms-3"},[w("span",{class:"text-success fw-medium"},"Already Imported")],-1))]))),128))])])):Pe("",!0),Y.includes("articles")&&P(Y).length>0?(U(),Z("div",jO,[ee[16]||(ee[16]=w("h4",null,"New Articles to Import",-1)),ee[17]||(ee[17]=w("p",null,"The following articles will be imported:",-1)),w("div",NO,[(U(!0),Z(et,null,Ft(P(Y).filter(ke=>!xe(Y,ke)),(ke,We)=>(U(),Z("div",{key:We,class:"d-flex justify-content-between align-items-center p-2 bg-light rounded"},[w("div",zO,[w("div",qO,oe(ke.name),1),w("div",UO,oe(ke.expansion)+" • "+oe(ke.amount)+" × "+oe(p(parseFloat(String(ke.price).replace(/[€$£\s]/g,"").replace(",","."))*100))+" • Order #"+oe(ke.shipmentId),1)]),ee[15]||(ee[15]=w("div",{class:"ms-3"},[w("span",{class:"text-primary fw-medium"},"New")],-1))]))),128))])])):Pe("",!0)]))),128))])):n.value===3?(U(),Z("div",WO,[ee[27]||(ee[27]=w("h2",null,"Import Summary",-1)),ee[28]||(ee[28]=w("p",null,"Review the import summary before finalizing.",-1)),(U(!0),Z(et,null,Ft(i.value,(Y,Le)=>(U(),Z("div",{key:Le,class:"file-summary"},[w("h3",null,oe(Q(Y)),1),w("div",VO,[w("div",HO,[w("div",KO,oe(P(Y).length),1),ee[20]||(ee[20]=w("div",{class:"stat-label"},"New Records",-1))]),w("div",YO,[w("div",GO,oe(me(o.value[Y]||[],Y).length),1),ee[21]||(ee[21]=w("div",{class:"stat-label"},"Invalid Rows",-1))]),Y.includes("articles")?(U(),Z("div",XO,[w("div",QO,oe(M(Y).length),1),ee[22]||(ee[22]=w("div",{class:"stat-label"},"Already Imported",-1))])):Pe("",!0)])]))),128)),w("div",JO,[ee[26]||(ee[26]=w("h3",null,"Import Details",-1)),w("div",ZO,[w("div",eM,[ee[23]||(ee[23]=w("div",{class:"summary-label"},"Files Uploaded",-1)),w("div",tM,oe(r.value.length),1)]),w("div",nM,[ee[24]||(ee[24]=w("div",{class:"summary-label"},"Total Rows Parsed",-1)),w("div",rM,oe(D()),1)]),w("div",sM,[ee[25]||(ee[25]=w("div",{class:"summary-label"},"Total Valid Rows",-1)),w("div",iM,oe(A()),1)])])]),l.value?(U(),Z("div",oM,oe(l.value),1)):Pe("",!0)])):Pe("",!0)])])]),w("div",aM,[n.value>0?(U(),Z("button",{key:0,onClick:C,class:"btn btn-secondary"}," Previous ")):Pe("",!0),n.value<e.length-1?(U(),Z("button",{key:1,onClick:x,class:"btn btn-glass-primary",disabled:!_.value}," Next ",8,lM)):Pe("",!0),n.value===e.length-1?(U(),Z("button",{key:2,onClick:S,class:"btn btn-glass-primary",disabled:a.value},oe(a.value?"Importing...":"Import Data"),9,cM)):Pe("",!0)])]))}}),dM=yn(uM,[["__scopeId","data-v-4f46dc4c"]]);var ws={},mr={},xs={},Vg;function xb(){if(Vg)return xs;Vg=1,Object.defineProperty(xs,"__esModule",{value:!0}),xs.DefaultSerializer=xs.extendSerializer=void 0;function t(r,s){const i=r.deserialize.bind(r),o=r.serialize.bind(r);return{deserialize(a){return s.deserialize(a,i)},serialize(a){return s.serialize(a,o)}}}xs.extendSerializer=t;const e={deserialize(r){return Object.assign(Error(r.message),{name:r.name,stack:r.stack})},serialize(r){return{__error_marker:"$$error",message:r.message,name:r.name,stack:r.stack}}},n=r=>r&&typeof r=="object"&&"__error_marker"in r&&r.__error_marker==="$$error";return xs.DefaultSerializer={deserialize(r){return n(r)?e.deserialize(r):r},serialize(r){return r instanceof Error?e.serialize(r):r}},xs}var Hg;function Jo(){if(Hg)return mr;Hg=1,Object.defineProperty(mr,"__esModule",{value:!0}),mr.serialize=mr.deserialize=mr.registerSerializer=void 0;const t=xb();let e=t.DefaultSerializer;function n(i){e=t.extendSerializer(e,i)}mr.registerSerializer=n;function r(i){return e.deserialize(i)}mr.deserialize=r;function s(i){return e.serialize(i)}return mr.serialize=s,mr}var Mu={},yr={},ks={},Kg;function fM(){if(Kg)return ks;Kg=1,Object.defineProperty(ks,"__esModule",{value:!0}),ks.getBundleURL=ks.getBaseURL=void 0;let t;function e(){return t||(t=n()),t}ks.getBundleURL=e;function n(){try{throw new Error}catch(s){const i=(""+s.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\/\/[^)\n]+/g);if(i)return r(i[0])}return"/"}function r(s){return(""+s).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\/\/.+)?\/[^/]+(?:\?.*)?$/,"$1")+"/"}return ks.getBaseURL=r,ks}var Yg;function kb(){if(Yg)return yr;Yg=1,Object.defineProperty(yr,"__esModule",{value:!0}),yr.isWorkerRuntime=yr.getWorkerImplementation=yr.defaultPoolSize=void 0;const t=fM();yr.defaultPoolSize=typeof navigator<"u"&&navigator.hardwareConcurrency?navigator.hardwareConcurrency:4;const e=a=>/^[a-zA-Z][a-zA-Z\d+\-.]*:/.test(a);function n(a){const l=new Blob([a],{type:"application/javascript"});return URL.createObjectURL(l)}function r(){if(typeof Worker>"u")return class{constructor(){throw Error("No web worker implementation available. You might have tried to spawn a worker within a worker in a browser that doesn't support workers in workers.")}};class a extends Worker{constructor(u,f){var p,m;typeof u=="string"&&f&&f._baseURL?u=new URL(u,f._baseURL):typeof u=="string"&&!e(u)&&t.getBundleURL().match(/^file:\/\//i)&&(u=new URL(u,t.getBundleURL().replace(/\/[^\/]+$/,"/")),(!((p=f?.CORSWorkaround)!==null&&p!==void 0)||p)&&(u=n(`importScripts(${JSON.stringify(u)});`))),typeof u=="string"&&e(u)&&(!((m=f?.CORSWorkaround)!==null&&m!==void 0)||m)&&(u=n(`importScripts(${JSON.stringify(u)});`)),super(u,f)}}class l extends a{constructor(u,f){const p=window.URL.createObjectURL(u);super(p,f)}static fromText(u,f){const p=new window.Blob([u],{type:"text/javascript"});return new l(p,f)}}return{blob:l,default:a}}let s;function i(){return s||(s=r()),s}yr.getWorkerImplementation=i;function o(){const a=typeof self<"u"&&typeof Window<"u"&&self instanceof Window;return!!(typeof self<"u"&&self.postMessage&&!a)}return yr.isWorkerRuntime=o,yr}var Cs={},rl={exports:{}},Du,Gg;function hM(){if(Gg)return Du;Gg=1;var t=1e3,e=t*60,n=e*60,r=n*24,s=r*7,i=r*365.25;Du=function(u,f){f=f||{};var p=typeof u;if(p==="string"&&u.length>0)return o(u);if(p==="number"&&isFinite(u))return f.long?l(u):a(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))};function o(u){if(u=String(u),!(u.length>100)){var f=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(u);if(f){var p=parseFloat(f[1]),m=(f[2]||"ms").toLowerCase();switch(m){case"years":case"year":case"yrs":case"yr":case"y":return p*i;case"weeks":case"week":case"w":return p*s;case"days":case"day":case"d":return p*r;case"hours":case"hour":case"hrs":case"hr":case"h":return p*n;case"minutes":case"minute":case"mins":case"min":case"m":return p*e;case"seconds":case"second":case"secs":case"sec":case"s":return p*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return p;default:return}}}}function a(u){var f=Math.abs(u);return f>=r?Math.round(u/r)+"d":f>=n?Math.round(u/n)+"h":f>=e?Math.round(u/e)+"m":f>=t?Math.round(u/t)+"s":u+"ms"}function l(u){var f=Math.abs(u);return f>=r?c(u,f,r,"day"):f>=n?c(u,f,n,"hour"):f>=e?c(u,f,e,"minute"):f>=t?c(u,f,t,"second"):u+" ms"}function c(u,f,p,m){var v=f>=p*1.5;return Math.round(u/p)+" "+m+(v?"s":"")}return Du}var Tu,Xg;function pM(){if(Xg)return Tu;Xg=1;function t(e){r.debug=r,r.default=r,r.coerce=c,r.disable=a,r.enable=i,r.enabled=l,r.humanize=hM(),r.destroy=u,Object.keys(e).forEach(f=>{r[f]=e[f]}),r.names=[],r.skips=[],r.formatters={};function n(f){let p=0;for(let m=0;m<f.length;m++)p=(p<<5)-p+f.charCodeAt(m),p|=0;return r.colors[Math.abs(p)%r.colors.length]}r.selectColor=n;function r(f){let p,m=null,v,_;function x(...C){if(!x.enabled)return;const S=x,P=Number(new Date),M=P-(p||P);S.diff=M,S.prev=p,S.curr=P,p=P,C[0]=r.coerce(C[0]),typeof C[0]!="string"&&C.unshift("%O");let D=0;C[0]=C[0].replace(/%([a-zA-Z%])/g,(T,B)=>{if(T==="%%")return"%";D++;const E=r.formatters[B];if(typeof E=="function"){const Q=C[D];T=E.call(S,Q),C.splice(D,1),D--}return T}),r.formatArgs.call(S,C),(S.log||r.log).apply(S,C)}return x.namespace=f,x.useColors=r.useColors(),x.color=r.selectColor(f),x.extend=s,x.destroy=r.destroy,Object.defineProperty(x,"enabled",{enumerable:!0,configurable:!1,get:()=>m!==null?m:(v!==r.namespaces&&(v=r.namespaces,_=r.enabled(f)),_),set:C=>{m=C}}),typeof r.init=="function"&&r.init(x),x}function s(f,p){const m=r(this.namespace+(typeof p>"u"?":":p)+f);return m.log=this.log,m}function i(f){r.save(f),r.namespaces=f,r.names=[],r.skips=[];const p=(typeof f=="string"?f:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const m of p)m[0]==="-"?r.skips.push(m.slice(1)):r.names.push(m)}function o(f,p){let m=0,v=0,_=-1,x=0;for(;m<f.length;)if(v<p.length&&(p[v]===f[m]||p[v]==="*"))p[v]==="*"?(_=v,x=m,v++):(m++,v++);else if(_!==-1)v=_+1,x++,m=x;else return!1;for(;v<p.length&&p[v]==="*";)v++;return v===p.length}function a(){const f=[...r.names,...r.skips.map(p=>"-"+p)].join(",");return r.enable(""),f}function l(f){for(const p of r.skips)if(o(f,p))return!1;for(const p of r.names)if(o(f,p))return!0;return!1}function c(f){return f instanceof Error?f.stack||f.message:f}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}return Tu=t,Tu}var Qg;function wf(){return Qg||(Qg=1,(function(t,e){var n={};e.formatArgs=s,e.save=i,e.load=o,e.useColors=r,e.storage=a(),e.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let c;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(c=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(c[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function s(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const u="color: "+this.color;c.splice(1,0,u,"color: inherit");let f=0,p=0;c[0].replace(/%[a-zA-Z%]/g,m=>{m!=="%%"&&(f++,m==="%c"&&(p=f))}),c.splice(p,0,u)}e.log=console.debug||console.log||(()=>{});function i(c){try{c?e.storage.setItem("debug",c):e.storage.removeItem("debug")}catch{}}function o(){let c;try{c=e.storage.getItem("debug")||e.storage.getItem("DEBUG")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c=n.DEBUG),c}function a(){try{return localStorage}catch{}}t.exports=pM()(e);const{formatters:l}=t.exports;l.j=function(c){try{return JSON.stringify(c)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}}})(rl,rl.exports)),rl.exports}var gM=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class yc{constructor(e){this._baseObserver=e,this._pendingPromises=new Set}complete(){Promise.all(this._pendingPromises).then(()=>this._baseObserver.complete()).catch(e=>this._baseObserver.error(e))}error(e){this._baseObserver.error(e)}schedule(e){const n=Promise.all(this._pendingPromises),r=[],s=o=>r.push(o),i=Promise.resolve().then(()=>gM(this,void 0,void 0,function*(){yield n,yield e(s),this._pendingPromises.delete(i);for(const o of r)this._baseObserver.next(o)})).catch(o=>{this._pendingPromises.delete(i),this._baseObserver.error(o)});this._pendingPromises.add(i)}}const Cb=()=>typeof Symbol=="function",aa=t=>Cb()&&!!Symbol[t],xf=t=>aa(t)?Symbol[t]:"@@"+t;aa("asyncIterator")||(Symbol.asyncIterator=Symbol.asyncIterator||Symbol.for("Symbol.asyncIterator"));const mM=xf("iterator"),wd=xf("observable"),Sb=xf("species");function Wl(t,e){const n=t[e];if(n!=null){if(typeof n!="function")throw new TypeError(n+" is not a function");return n}}function io(t){let e=t.constructor;return e!==void 0&&(e=e[Sb],e===null&&(e=void 0)),e!==void 0?e:Ht}function yM(t){return t instanceof Ht}function Ri(t){Ri.log?Ri.log(t):setTimeout(()=>{throw t},0)}function bl(t){Promise.resolve().then(()=>{try{t()}catch(e){Ri(e)}})}function Pb(t){const e=t._cleanup;if(e!==void 0&&(t._cleanup=void 0,!!e))try{if(typeof e=="function")e();else{const n=Wl(e,"unsubscribe");n&&n.call(e)}}catch(n){Ri(n)}}function xd(t){t._observer=void 0,t._queue=void 0,t._state="closed"}function vM(t){const e=t._queue;if(e){t._queue=void 0,t._state="ready";for(const n of e)if(Ab(t,n.type,n.value),t._state==="closed")break}}function Ab(t,e,n){t._state="running";const r=t._observer;try{const s=r?Wl(r,e):void 0;switch(e){case"next":s&&s.call(r,n);break;case"error":if(xd(t),s)s.call(r,n);else throw n;break;case"complete":xd(t),s&&s.call(r);break}}catch(s){Ri(s)}t._state==="closed"?Pb(t):t._state==="running"&&(t._state="ready")}function Ru(t,e,n){if(t._state!=="closed"){if(t._state==="buffering"){t._queue=t._queue||[],t._queue.push({type:e,value:n});return}if(t._state!=="ready"){t._state="buffering",t._queue=[{type:e,value:n}],bl(()=>vM(t));return}Ab(t,e,n)}}class bM{constructor(e,n){this._cleanup=void 0,this._observer=e,this._queue=void 0,this._state="initializing";const r=new _M(this);try{this._cleanup=n.call(void 0,r)}catch(s){r.error(s)}this._state==="initializing"&&(this._state="ready")}get closed(){return this._state==="closed"}unsubscribe(){this._state!=="closed"&&(xd(this),Pb(this))}}class _M{constructor(e){this._subscription=e}get closed(){return this._subscription._state==="closed"}next(e){Ru(this._subscription,"next",e)}error(e){Ru(this._subscription,"error",e)}complete(){Ru(this._subscription,"complete")}}class Ht{constructor(e){if(!(this instanceof Ht))throw new TypeError("Observable cannot be called as a function");if(typeof e!="function")throw new TypeError("Observable initializer must be a function");this._subscriber=e}subscribe(e,n,r){return(typeof e!="object"||e===null)&&(e={next:e,error:n,complete:r}),new bM(e,this._subscriber)}pipe(e,...n){let r=this;for(const s of[e,...n])r=s(r);return r}tap(e,n,r){const s=typeof e!="object"||e===null?{next:e,error:n,complete:r}:e;return new Ht(i=>this.subscribe({next(o){s.next&&s.next(o),i.next(o)},error(o){s.error&&s.error(o),i.error(o)},complete(){s.complete&&s.complete(),i.complete()},start(o){s.start&&s.start(o)}}))}forEach(e){return new Promise((n,r)=>{if(typeof e!="function"){r(new TypeError(e+" is not a function"));return}function s(){i.unsubscribe(),n(void 0)}const i=this.subscribe({next(o){try{e(o,s)}catch(a){r(a),i.unsubscribe()}},error(o){r(o)},complete(){n(void 0)}})})}map(e){if(typeof e!="function")throw new TypeError(e+" is not a function");const n=io(this);return new n(r=>this.subscribe({next(s){let i=s;try{i=e(s)}catch(o){return r.error(o)}r.next(i)},error(s){r.error(s)},complete(){r.complete()}}))}filter(e){if(typeof e!="function")throw new TypeError(e+" is not a function");const n=io(this);return new n(r=>this.subscribe({next(s){try{if(!e(s))return}catch(i){return r.error(i)}r.next(s)},error(s){r.error(s)},complete(){r.complete()}}))}reduce(e,n){if(typeof e!="function")throw new TypeError(e+" is not a function");const r=io(this),s=arguments.length>1;let i=!1,o=n;return new r(a=>this.subscribe({next(l){const c=!i;if(i=!0,!c||s)try{o=e(o,l)}catch(u){return a.error(u)}else o=l},error(l){a.error(l)},complete(){if(!i&&!s)return a.error(new TypeError("Cannot reduce an empty sequence"));a.next(o),a.complete()}}))}concat(...e){const n=io(this);return new n(r=>{let s,i=0;function o(a){s=a.subscribe({next(l){r.next(l)},error(l){r.error(l)},complete(){i===e.length?(s=void 0,r.complete()):o(n.from(e[i++]))}})}return o(this),()=>{s&&(s.unsubscribe(),s=void 0)}})}flatMap(e){if(typeof e!="function")throw new TypeError(e+" is not a function");const n=io(this);return new n(r=>{const s=[],i=this.subscribe({next(a){let l;if(e)try{l=e(a)}catch(u){return r.error(u)}else l=a;const c=n.from(l).subscribe({next(u){r.next(u)},error(u){r.error(u)},complete(){const u=s.indexOf(c);u>=0&&s.splice(u,1),o()}});s.push(c)},error(a){r.error(a)},complete(){o()}});function o(){i.closed&&s.length===0&&r.complete()}return()=>{s.forEach(a=>a.unsubscribe()),i.unsubscribe()}})}[wd](){return this}static from(e){const n=typeof this=="function"?this:Ht;if(e==null)throw new TypeError(e+" is not an object");const r=Wl(e,wd);if(r){const s=r.call(e);if(Object(s)!==s)throw new TypeError(s+" is not an object");return yM(s)&&s.constructor===n?s:new n(i=>s.subscribe(i))}if(aa("iterator")){const s=Wl(e,mM);if(s)return new n(i=>{bl(()=>{if(!i.closed){for(const o of s.call(e))if(i.next(o),i.closed)return;i.complete()}})})}if(Array.isArray(e))return new n(s=>{bl(()=>{if(!s.closed){for(const i of e)if(s.next(i),s.closed)return;s.complete()}})});throw new TypeError(e+" is not observable")}static of(...e){const n=typeof this=="function"?this:Ht;return new n(r=>{bl(()=>{if(!r.closed){for(const s of e)if(r.next(s),r.closed)return;r.complete()}})})}static get[Sb](){return this}}Cb()&&Object.defineProperty(Ht,Symbol("extensions"),{value:{symbol:wd,hostReportError:Ri},configurable:!0});function Hs(t){typeof t=="function"?t():t&&typeof t.unsubscribe=="function"&&t.unsubscribe()}var wM=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};function xM(t){return e=>new Ht(n=>{const r=new yc(n),s=e.subscribe({complete(){r.complete()},error(i){r.error(i)},next(i){r.schedule(o=>wM(this,void 0,void 0,function*(){(yield t(i))&&o(i)}))}});return()=>Hs(s)})}function kM(t){return t&&aa("asyncIterator")&&t[Symbol.asyncIterator]}function CM(t){return t&&aa("iterator")&&t[Symbol.iterator]}var SM=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})},PM=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof __values=="function"?__values(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,l){o=t[i](o),s(a,l,o.done,o.value)})}}function s(i,o,a,l){Promise.resolve(l).then(function(c){i({value:c,done:a})},o)}};function AM(t){return e=>new Ht(n=>{const r=new yc(n),s=e.subscribe({complete(){r.complete()},error(i){r.error(i)},next(i){r.schedule(o=>SM(this,void 0,void 0,function*(){var a,l;const c=yield t(i);if(CM(c)||kM(c))try{for(var u=PM(c),f;f=yield u.next(),!f.done;){const p=f.value;o(p)}}catch(p){a={error:p}}finally{try{f&&!f.done&&(l=u.return)&&(yield l.call(u))}finally{if(a)throw a.error}}else c.map(p=>o(p))}))}});return()=>Hs(s)})}function IM(t){return new Ht(e=>{let n=0;const r=setInterval(()=>{e.next(n++)},t);return()=>clearInterval(r)})}var EM=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};function OM(t){return e=>new Ht(n=>{const r=new yc(n),s=e.subscribe({complete(){r.complete()},error(i){r.error(i)},next(i){r.schedule(o=>EM(this,void 0,void 0,function*(){const a=yield t(i);o(a)}))}});return()=>Hs(s)})}function MM(...t){return t.length===0?Ht.from([]):new Ht(e=>{let n=0;const r=t.map(i=>i.subscribe({error(o){e.error(o),s()},next(o){e.next(o)},complete(){++n===t.length&&(e.complete(),s())}})),s=()=>{r.forEach(i=>Hs(i))};return s})}class Ib extends Ht{constructor(){super(e=>(this._observers.add(e),()=>this._observers.delete(e))),this._observers=new Set}next(e){for(const n of this._observers)n.next(e)}error(e){for(const n of this._observers)n.error(e)}complete(){for(const e of this._observers)e.complete()}}function DM(t){const e=new Ib;let n,r=0;return new Ht(s=>{n||(n=t.subscribe(e));const i=e.subscribe(s);return r++,()=>{r--,i.unsubscribe(),r===0&&(Hs(n),n=void 0)}})}var TM=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};function RM(t,e){return n=>new Ht(r=>{let s,i=0;const o=new yc(r),a=n.subscribe({complete(){o.complete()},error(l){o.error(l)},next(l){o.schedule(c=>TM(this,void 0,void 0,function*(){s=yield t(i===0?typeof e>"u"?l:e:s,l,i++),c(s)}))}});return()=>Hs(a)})}const $M=Object.freeze(Object.defineProperty({__proto__:null,Observable:Ht,Subject:Ib,filter:xM,flatMap:AM,interval:IM,map:OM,merge:MM,multicast:DM,scan:RM,unsubscribe:Hs},Symbol.toStringTag,{value:"Module"})),vc=mk($M);var oo={},Jg;function FM(){if(Jg)return oo;Jg=1,Object.defineProperty(oo,"__esModule",{value:!0}),oo.allSettled=void 0;function t(e){return Promise.all(e.map(n=>{const r=o=>({status:"fulfilled",value:o}),s=o=>({status:"rejected",reason:o}),i=Promise.resolve(n);try{return i.then(r,s)}catch(o){return Promise.reject(o)}}))}return oo.allSettled=t,oo}var $u={},Zg;function LM(){return Zg||(Zg=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.PoolEventType=void 0,(function(e){e.initialized="initialized",e.taskCanceled="taskCanceled",e.taskCompleted="taskCompleted",e.taskFailed="taskFailed",e.taskQueued="taskQueued",e.taskQueueDrained="taskQueueDrained",e.taskStart="taskStart",e.terminated="terminated"})(t.PoolEventType||(t.PoolEventType={}))})($u)),$u}var ao={},Pn={},em;function kf(){return em||(em=1,Object.defineProperty(Pn,"__esModule",{value:!0}),Pn.$worker=Pn.$transferable=Pn.$terminate=Pn.$events=Pn.$errors=void 0,Pn.$errors=Symbol("thread.errors"),Pn.$events=Symbol("thread.events"),Pn.$terminate=Symbol("thread.terminate"),Pn.$transferable=Symbol("thread.transferable"),Pn.$worker=Symbol("thread.worker")),Pn}var tm;function Eb(){if(tm)return ao;tm=1,Object.defineProperty(ao,"__esModule",{value:!0}),ao.Thread=void 0;const t=kf();function e(n){throw Error(n)}return ao.Thread={errors(n){return n[t.$errors]||e("Error observable not found. Make sure to pass a thread instance as returned by the spawn() promise.")},events(n){return n[t.$events]||e("Events observable not found. Make sure to pass a thread instance as returned by the spawn() promise.")},terminate(n){return n[t.$terminate]()}},ao}var nm;function BM(){return nm||(nm=1,(function(t){var e=Cs&&Cs.__awaiter||function(C,S,P,M){function D(A){return A instanceof P?A:new P(function(T){T(A)})}return new(P||(P=Promise))(function(A,T){function B(V){try{Q(M.next(V))}catch(z){T(z)}}function E(V){try{Q(M.throw(V))}catch(z){T(z)}}function Q(V){V.done?A(V.value):D(V.value).then(B,E)}Q((M=M.apply(C,S||[])).next())})},n=Cs&&Cs.__importDefault||function(C){return C&&C.__esModule?C:{default:C}};Object.defineProperty(t,"__esModule",{value:!0}),t.Pool=t.Thread=t.PoolEventType=void 0;const r=n(wf()),s=vc,i=FM(),o=kb(),a=LM();Object.defineProperty(t,"PoolEventType",{enumerable:!0,get:function(){return a.PoolEventType}});const l=Eb();Object.defineProperty(t,"Thread",{enumerable:!0,get:function(){return l.Thread}});let c=1;function u(C){const S=[];for(let P=0;P<C;P++)S.push(P);return S}function f(C){return new Promise(S=>setTimeout(S,C))}function p(C,S){return C.reduce((P,M)=>[...P,...S(M)],[])}function m(C){return C.replace(/\W/g," ").trim().replace(/\s+/g,"-")}function v(C,S){return u(S).map(()=>({init:C(),runningTasks:[]}))}class _{constructor(S,P){this.eventSubject=new s.Subject,this.initErrors=[],this.isClosing=!1,this.nextTaskID=1,this.taskQueue=[];const M=typeof P=="number"?{size:P}:P||{},{size:D=o.defaultPoolSize}=M;this.debug=r.default(`threads:pool:${m(M.name||String(c++))}`),this.options=M,this.workers=v(S,D),this.eventObservable=s.multicast(s.Observable.from(this.eventSubject)),Promise.all(this.workers.map(A=>A.init)).then(()=>this.eventSubject.next({type:a.PoolEventType.initialized,size:this.workers.length}),A=>{this.debug("Error while initializing pool worker:",A),this.eventSubject.error(A),this.initErrors.push(A)})}findIdlingWorker(){const{concurrency:S=1}=this.options;return this.workers.find(P=>P.runningTasks.length<S)}runPoolTask(S,P){return e(this,void 0,void 0,function*(){const M=this.workers.indexOf(S)+1;this.debug(`Running task #${P.id} on worker #${M}...`),this.eventSubject.next({type:a.PoolEventType.taskStart,taskID:P.id,workerID:M});try{const D=yield P.run(yield S.init);this.debug(`Task #${P.id} completed successfully`),this.eventSubject.next({type:a.PoolEventType.taskCompleted,returnValue:D,taskID:P.id,workerID:M})}catch(D){this.debug(`Task #${P.id} failed`),this.eventSubject.next({type:a.PoolEventType.taskFailed,taskID:P.id,error:D,workerID:M})}})}run(S,P){return e(this,void 0,void 0,function*(){const M=e(this,void 0,void 0,function*(){const D=()=>{S.runningTasks=S.runningTasks.filter(A=>A!==M)};yield f(0);try{yield this.runPoolTask(S,P)}finally{D(),this.isClosing||this.scheduleWork()}});S.runningTasks.push(M)})}scheduleWork(){this.debug("Attempt de-queueing a task in order to run it...");const S=this.findIdlingWorker();if(!S)return;const P=this.taskQueue.shift();if(!P){this.debug("Task queue is empty"),this.eventSubject.next({type:a.PoolEventType.taskQueueDrained});return}this.run(S,P)}taskCompletion(S){return new Promise((P,M)=>{const D=this.events().subscribe(A=>{A.type===a.PoolEventType.taskCompleted&&A.taskID===S?(D.unsubscribe(),P(A.returnValue)):A.type===a.PoolEventType.taskFailed&&A.taskID===S?(D.unsubscribe(),M(A.error)):A.type===a.PoolEventType.terminated&&(D.unsubscribe(),M(Error("Pool has been terminated before task was run.")))})})}settled(S=!1){return e(this,void 0,void 0,function*(){const P=()=>p(this.workers,A=>A.runningTasks),M=[],D=this.eventObservable.subscribe(A=>{A.type===a.PoolEventType.taskFailed&&M.push(A.error)});return this.initErrors.length>0?Promise.reject(this.initErrors[0]):S&&this.taskQueue.length===0?(yield i.allSettled(P()),M):(yield new Promise((A,T)=>{const B=this.eventObservable.subscribe({next(E){E.type===a.PoolEventType.taskQueueDrained&&(B.unsubscribe(),A(void 0))},error:T})}),yield i.allSettled(P()),D.unsubscribe(),M)})}completed(S=!1){return e(this,void 0,void 0,function*(){const P=this.settled(S),M=new Promise((A,T)=>{const B=this.eventObservable.subscribe({next(E){E.type===a.PoolEventType.taskQueueDrained?(B.unsubscribe(),A(P)):E.type===a.PoolEventType.taskFailed&&(B.unsubscribe(),T(E.error))},error:T})}),D=yield Promise.race([P,M]);if(D.length>0)throw D[0]})}events(){return this.eventObservable}queue(S){const{maxQueuedJobs:P=1/0}=this.options;if(this.isClosing)throw Error("Cannot schedule pool tasks after terminate() has been called.");if(this.initErrors.length>0)throw this.initErrors[0];const M=this.nextTaskID++,D=this.taskCompletion(M);D.catch(T=>{this.debug(`Task #${M} errored:`,T)});const A={id:M,run:S,cancel:()=>{this.taskQueue.indexOf(A)!==-1&&(this.taskQueue=this.taskQueue.filter(T=>T!==A),this.eventSubject.next({type:a.PoolEventType.taskCanceled,taskID:A.id}))},then:D.then.bind(D)};if(this.taskQueue.length>=P)throw Error(`Maximum number of pool tasks queued. Refusing to queue another one.
This usually happens for one of two reasons: We are either at peak workload right now or some tasks just won't finish, thus blocking the pool.`);return this.debug(`Queueing task #${A.id}...`),this.taskQueue.push(A),this.eventSubject.next({type:a.PoolEventType.taskQueued,taskID:A.id}),this.scheduleWork(),A}terminate(S){return e(this,void 0,void 0,function*(){this.isClosing=!0,S||(yield this.completed(!0)),this.eventSubject.next({type:a.PoolEventType.terminated,remainingQueue:[...this.taskQueue]}),this.eventSubject.complete(),yield Promise.all(this.workers.map(P=>e(this,void 0,void 0,function*(){return l.Thread.terminate(yield P.init)})))})}}_.EventType=a.PoolEventType;function x(C,S){return new _(C,S)}x.EventType=a.PoolEventType,t.Pool=x})(Cs)),Cs}var vr={},lo={},rm;function jM(){if(rm)return lo;rm=1,Object.defineProperty(lo,"__esModule",{value:!0}),lo.createPromiseWithResolver=void 0;const t=()=>{};function e(){let n=!1,r,s=t;return[new Promise(a=>{n?a(r):s=a}),a=>{n=!0,r=a,s(r)}]}return lo.createPromiseWithResolver=e,lo}var Fu={},sm;function NM(){return sm||(sm=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.WorkerEventType=void 0,(function(e){e.internalError="internalError",e.message="message",e.termination="termination"})(t.WorkerEventType||(t.WorkerEventType={}))})(Fu)),Fu}var br={},co={},im;function zM(){if(im)return co;im=1,Object.defineProperty(co,"__esModule",{value:!0}),co.ObservablePromise=void 0;const t=vc,e=()=>{},n=a=>a,r=a=>Promise.resolve().then(a);function s(a){throw a}function i(a){return a&&typeof a.then=="function"}class o extends t.Observable{constructor(l){super(c=>{const u=this,f=Object.assign(Object.assign({},c),{complete(){c.complete(),u.onCompletion()},error(p){c.error(p),u.onError(p)},next(p){c.next(p),u.onNext(p)}});try{return this.initHasRun=!0,l(f)}catch(p){f.error(p)}}),this.initHasRun=!1,this.fulfillmentCallbacks=[],this.rejectionCallbacks=[],this.firstValueSet=!1,this.state="pending"}onNext(l){this.firstValueSet||(this.firstValue=l,this.firstValueSet=!0)}onError(l){this.state="rejected",this.rejection=l;for(const c of this.rejectionCallbacks)r(()=>c(l))}onCompletion(){this.state="fulfilled";for(const l of this.fulfillmentCallbacks)r(()=>l(this.firstValue))}then(l,c){const u=l||n,f=c||s;let p=!1;return new Promise((m,v)=>{const _=C=>{if(!p){p=!0;try{m(f(C))}catch(S){v(S)}}},x=C=>{try{m(u(C))}catch(S){_(S)}};if(this.initHasRun||this.subscribe({error:_}),this.state==="fulfilled")return m(u(this.firstValue));if(this.state==="rejected")return p=!0,m(f(this.rejection));this.fulfillmentCallbacks.push(x),this.rejectionCallbacks.push(_)})}catch(l){return this.then(void 0,l)}finally(l){const c=l||e;return this.then(u=>(c(),u),()=>c())}static from(l){return i(l)?new o(c=>{const u=p=>{c.next(p),c.complete()},f=p=>{c.error(p)};l.then(u,f)}):super.from(l)}}return co.ObservablePromise=o,co}var Ss={},om;function Vl(){if(om)return Ss;om=1,Object.defineProperty(Ss,"__esModule",{value:!0}),Ss.Transfer=Ss.isTransferDescriptor=void 0;const t=kf();function e(s){return!(!s||typeof s!="object")}function n(s){return s&&typeof s=="object"&&s[t.$transferable]}Ss.isTransferDescriptor=n;function r(s,i){if(!i){if(!e(s))throw Error();i=[s]}return{[t.$transferable]:!0,send:s,transferables:i}}return Ss.Transfer=r,Ss}var Lu={},am;function Ob(){return am||(am=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.WorkerMessageType=t.MasterMessageType=void 0,(function(e){e.cancel="cancel",e.run="run"})(t.MasterMessageType||(t.MasterMessageType={})),(function(e){e.error="error",e.init="init",e.result="result",e.running="running",e.uncaughtError="uncaughtError"})(t.WorkerMessageType||(t.WorkerMessageType={}))})(Lu)),Lu}var lm;function qM(){if(lm)return br;lm=1;var t=br&&br.__importDefault||function(C){return C&&C.__esModule?C:{default:C}};Object.defineProperty(br,"__esModule",{value:!0}),br.createProxyModule=br.createProxyFunction=void 0;const e=t(wf()),n=vc,r=Jo(),s=zM(),i=Vl(),o=Ob(),a=e.default("threads:master:messages");let l=1;const c=C=>Array.from(new Set(C)),u=C=>C&&C.type===o.WorkerMessageType.error,f=C=>C&&C.type===o.WorkerMessageType.result,p=C=>C&&C.type===o.WorkerMessageType.running;function m(C,S){return new n.Observable(P=>{let M;const D=(A=>{if(a("Message from worker:",A.data),!(!A.data||A.data.uid!==S)){if(p(A.data))M=A.data.resultType;else if(f(A.data))M==="promise"?(typeof A.data.payload<"u"&&P.next(r.deserialize(A.data.payload)),P.complete(),C.removeEventListener("message",D)):(A.data.payload&&P.next(r.deserialize(A.data.payload)),A.data.complete&&(P.complete(),C.removeEventListener("message",D)));else if(u(A.data)){const T=r.deserialize(A.data.error);P.error(T),C.removeEventListener("message",D)}}});return C.addEventListener("message",D),()=>{if(M==="observable"||!M){const A={type:o.MasterMessageType.cancel,uid:S};C.postMessage(A)}C.removeEventListener("message",D)}})}function v(C){if(C.length===0)return{args:[],transferables:[]};const S=[],P=[];for(const M of C)i.isTransferDescriptor(M)?(S.push(r.serialize(M.send)),P.push(...M.transferables)):S.push(r.serialize(M));return{args:S,transferables:P.length===0?P:c(P)}}function _(C,S){return((...P)=>{const M=l++,{args:D,transferables:A}=v(P),T={type:o.MasterMessageType.run,uid:M,method:S,args:D};a("Sending command to run function to worker:",T);try{C.postMessage(T,A)}catch(B){return s.ObservablePromise.from(Promise.reject(B))}return s.ObservablePromise.from(n.multicast(m(C,M)))})}br.createProxyFunction=_;function x(C,S){const P={};for(const M of S)P[M]=_(C,M);return P}return br.createProxyModule=x,br}var cm;function UM(){if(cm)return vr;cm=1;var t={},e=vr&&vr.__awaiter||function(A,T,B,E){function Q(V){return V instanceof B?V:new B(function(z){z(V)})}return new(B||(B=Promise))(function(V,z){function pe(we){try{Ce(E.next(we))}catch(xe){z(xe)}}function me(we){try{Ce(E.throw(we))}catch(xe){z(xe)}}function Ce(we){we.done?V(we.value):Q(we.value).then(pe,me)}Ce((E=E.apply(A,T||[])).next())})},n=vr&&vr.__importDefault||function(A){return A&&A.__esModule?A:{default:A}};Object.defineProperty(vr,"__esModule",{value:!0}),vr.spawn=void 0;const r=n(wf()),s=vc,i=Jo(),o=jM(),a=kf(),l=NM(),c=qM(),u=r.default("threads:master:messages"),f=r.default("threads:master:spawn"),p=r.default("threads:master:thread-utils"),m=A=>A&&A.type==="init",v=A=>A&&A.type==="uncaughtError",_=typeof process<"u"&&t.THREADS_WORKER_INIT_TIMEOUT?Number.parseInt(t.THREADS_WORKER_INIT_TIMEOUT,10):1e4;function x(A,T,B){return e(this,void 0,void 0,function*(){let E;const Q=new Promise((z,pe)=>{E=setTimeout(()=>pe(Error(B)),T)}),V=yield Promise.race([A,Q]);return clearTimeout(E),V})}function C(A){return new Promise((T,B)=>{const E=(Q=>{u("Message from worker before finishing initialization:",Q.data),m(Q.data)?(A.removeEventListener("message",E),T(Q.data)):v(Q.data)&&(A.removeEventListener("message",E),B(i.deserialize(Q.data.error)))});A.addEventListener("message",E)})}function S(A,T){return new s.Observable(B=>{const E=(V=>{const z={type:l.WorkerEventType.message,data:V.data};B.next(z)}),Q=(V=>{p("Unhandled promise rejection event in thread:",V);const z={type:l.WorkerEventType.internalError,error:Error(V.reason)};B.next(z)});A.addEventListener("message",E),A.addEventListener("unhandledrejection",Q),T.then(()=>{const V={type:l.WorkerEventType.termination};A.removeEventListener("message",E),A.removeEventListener("unhandledrejection",Q),B.next(V),B.complete()})})}function P(A){const[T,B]=o.createPromiseWithResolver();return{terminate:()=>e(this,void 0,void 0,function*(){p("Terminating worker"),yield A.terminate(),B()}),termination:T}}function M(A,T,B,E){const Q=B.filter(V=>V.type===l.WorkerEventType.internalError).map(V=>V.error);return Object.assign(A,{[a.$errors]:Q,[a.$events]:B,[a.$terminate]:E,[a.$worker]:T})}function D(A,T){return e(this,void 0,void 0,function*(){f("Initializing new thread");const B=T&&T.timeout?T.timeout:_,Q=(yield x(C(A),B,`Timeout: Did not receive an init message from worker after ${B}ms. Make sure the worker calls expose().`)).exposed,{termination:V,terminate:z}=P(A),pe=S(A,V);if(Q.type==="function"){const me=c.createProxyFunction(A);return M(me,A,pe,z)}else if(Q.type==="module"){const me=c.createProxyModule(A,Q.methods);return M(me,A,pe,z)}else{const me=Q.type;throw Error(`Worker init message states unexpected type of expose(): ${me}`)}})}return vr.spawn=D,vr}var um;function WM(){return um||(um=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Worker=t.BlobWorker=t.isWorkerRuntime=t.Thread=t.spawn=t.Pool=void 0;const e=kb();Object.defineProperty(t,"isWorkerRuntime",{enumerable:!0,get:function(){return e.isWorkerRuntime}});var n=BM();Object.defineProperty(t,"Pool",{enumerable:!0,get:function(){return n.Pool}});var r=UM();Object.defineProperty(t,"spawn",{enumerable:!0,get:function(){return r.spawn}});var s=Eb();Object.defineProperty(t,"Thread",{enumerable:!0,get:function(){return s.Thread}}),t.BlobWorker=e.getWorkerImplementation().blob,t.Worker=e.getWorkerImplementation().default})(Mu)),Mu}var Ps={},Bu,dm;function VM(){return dm||(dm=1,Bu=t=>t?typeof Symbol.observable=="symbol"&&typeof t[Symbol.observable]=="function"?t===t[Symbol.observable]():typeof t["@@observable"]=="function"?t===t["@@observable"]():!1:!1),Bu}var sl={},fm;function HM(){if(fm)return sl;fm=1,Object.defineProperty(sl,"__esModule",{value:!0});const t=function(){const s=typeof self<"u"&&typeof Window<"u"&&self instanceof Window;return!!(typeof self<"u"&&self.postMessage&&!s)},e=function(s,i){self.postMessage(s,i)},n=function(s){const i=a=>{s(a.data)},o=()=>{self.removeEventListener("message",i)};return self.addEventListener("message",i),o};return sl.default={isWorkerRuntime:t,postMessageToMaster:e,subscribeToMasterMessages:n},sl}var hm;function KM(){return hm||(hm=1,(function(t){var e=Ps&&Ps.__awaiter||function(E,Q,V,z){function pe(me){return me instanceof V?me:new V(function(Ce){Ce(me)})}return new(V||(V=Promise))(function(me,Ce){function we(ee){try{te(z.next(ee))}catch(Y){Ce(Y)}}function xe(ee){try{te(z.throw(ee))}catch(Y){Ce(Y)}}function te(ee){ee.done?me(ee.value):pe(ee.value).then(we,xe)}te((z=z.apply(E,Q||[])).next())})},n=Ps&&Ps.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(t,"__esModule",{value:!0}),t.expose=t.isWorkerRuntime=t.Transfer=t.registerSerializer=void 0;const r=n(VM()),s=Jo(),i=Vl(),o=Ob(),a=n(HM());var l=Jo();Object.defineProperty(t,"registerSerializer",{enumerable:!0,get:function(){return l.registerSerializer}});var c=Vl();Object.defineProperty(t,"Transfer",{enumerable:!0,get:function(){return c.Transfer}}),t.isWorkerRuntime=a.default.isWorkerRuntime;let u=!1;const f=new Map,p=E=>E&&E.type===o.MasterMessageType.cancel,m=E=>E&&E.type===o.MasterMessageType.run,v=E=>r.default(E)||_(E);function _(E){return E&&typeof E=="object"&&typeof E.subscribe=="function"}function x(E){return i.isTransferDescriptor(E)?{payload:E.send,transferables:E.transferables}:{payload:E,transferables:void 0}}function C(){const E={type:o.WorkerMessageType.init,exposed:{type:"function"}};a.default.postMessageToMaster(E)}function S(E){const Q={type:o.WorkerMessageType.init,exposed:{type:"module",methods:E}};a.default.postMessageToMaster(Q)}function P(E,Q){const{payload:V,transferables:z}=x(Q),pe={type:o.WorkerMessageType.error,uid:E,error:s.serialize(V)};a.default.postMessageToMaster(pe,z)}function M(E,Q,V){const{payload:z,transferables:pe}=x(V),me={type:o.WorkerMessageType.result,uid:E,complete:Q?!0:void 0,payload:z};a.default.postMessageToMaster(me,pe)}function D(E,Q){const V={type:o.WorkerMessageType.running,uid:E,resultType:Q};a.default.postMessageToMaster(V)}function A(E){try{const Q={type:o.WorkerMessageType.uncaughtError,error:s.serialize(E)};a.default.postMessageToMaster(Q)}catch(Q){console.error(`Not reporting uncaught error back to master thread as it occured while reporting an uncaught error already.
Latest error:`,Q,`
Original error:`,E)}}function T(E,Q,V){return e(this,void 0,void 0,function*(){let z;try{z=Q(...V)}catch(me){return P(E,me)}const pe=v(z)?"observable":"promise";if(D(E,pe),v(z)){const me=z.subscribe(Ce=>M(E,!1,s.serialize(Ce)),Ce=>{P(E,s.serialize(Ce)),f.delete(E)},()=>{M(E,!0),f.delete(E)});f.set(E,me)}else try{const me=yield z;M(E,!0,s.serialize(me))}catch(me){P(E,s.serialize(me))}})}function B(E){if(!a.default.isWorkerRuntime())throw Error("expose() called in the master thread.");if(u)throw Error("expose() called more than once. This is not possible. Pass an object to expose() if you want to expose multiple functions.");if(u=!0,typeof E=="function")a.default.subscribeToMasterMessages(Q=>{m(Q)&&!Q.method&&T(Q.uid,E,Q.args.map(s.deserialize))}),C();else if(typeof E=="object"&&E){a.default.subscribeToMasterMessages(V=>{m(V)&&V.method&&T(V.uid,E[V.method],V.args.map(s.deserialize))});const Q=Object.keys(E).filter(V=>typeof E[V]=="function");S(Q)}else throw Error(`Invalid argument passed to expose(). Expected a function or an object, got: ${E}`);a.default.subscribeToMasterMessages(Q=>{if(p(Q)){const V=Q.uid,z=f.get(V);z&&(z.unsubscribe(),f.delete(V))}})}t.expose=B,typeof self<"u"&&typeof self.addEventListener=="function"&&a.default.isWorkerRuntime()&&(self.addEventListener("error",E=>{setTimeout(()=>A(E.error||E),250)}),self.addEventListener("unhandledrejection",E=>{const Q=E.reason;Q&&typeof Q.message=="string"&&setTimeout(()=>A(Q),250)})),typeof process<"u"&&typeof process.on=="function"&&a.default.isWorkerRuntime()&&(process.on("uncaughtException",E=>{setTimeout(()=>A(E),250)}),process.on("unhandledRejection",E=>{E&&typeof E.message=="string"&&setTimeout(()=>A(E),250)}))})(Ps)),Ps}var pm;function YM(){return pm||(pm=1,(function(t){var e=ws&&ws.__createBinding||(Object.create?(function(a,l,c,u){u===void 0&&(u=c),Object.defineProperty(a,u,{enumerable:!0,get:function(){return l[c]}})}):(function(a,l,c,u){u===void 0&&(u=c),a[u]=l[c]})),n=ws&&ws.__exportStar||function(a,l){for(var c in a)c!=="default"&&!Object.prototype.hasOwnProperty.call(l,c)&&e(l,a,c)};Object.defineProperty(t,"__esModule",{value:!0}),t.Transfer=t.DefaultSerializer=t.expose=t.registerSerializer=void 0;var r=Jo();Object.defineProperty(t,"registerSerializer",{enumerable:!0,get:function(){return r.registerSerializer}}),n(WM(),t);var s=KM();Object.defineProperty(t,"expose",{enumerable:!0,get:function(){return s.expose}});var i=xb();Object.defineProperty(t,"DefaultSerializer",{enumerable:!0,get:function(){return i.DefaultSerializer}});var o=Vl();Object.defineProperty(t,"Transfer",{enumerable:!0,get:function(){return o.Transfer}})})(ws)),ws}var GM=YM();const as=kv(GM);as.registerSerializer;const Mb=as.spawn;as.BlobWorker;as.DefaultSerializer;as.Pool;const Db=as.Thread,XM=as.Transfer;as.Worker;function QM(t){return new Worker("/mtg-pwa/assets/MTGJSONUploadWorker-DaCthxZm.js",{name:t?.name})}var An=Uint8Array,gi=Uint16Array,JM=Int32Array,Tb=new An([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Rb=new An([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ZM=new An([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),$b=function(t,e){for(var n=new gi(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var s=new JM(n[30]),r=1;r<30;++r)for(var i=n[r];i<n[r+1];++i)s[i]=i-n[r]<<5|r;return{b:n,r:s}},Fb=$b(Tb,2),Lb=Fb.b,eD=Fb.r;Lb[28]=258,eD[258]=28;var tD=$b(Rb,0),nD=tD.b,kd=new gi(32768);for(var St=0;St<32768;++St){var zr=(St&43690)>>1|(St&21845)<<1;zr=(zr&52428)>>2|(zr&13107)<<2,zr=(zr&61680)>>4|(zr&3855)<<4,kd[St]=((zr&65280)>>8|(zr&255)<<8)>>1}var Ro=(function(t,e,n){for(var r=t.length,s=0,i=new gi(e);s<r;++s)t[s]&&++i[t[s]-1];var o=new gi(e);for(s=1;s<e;++s)o[s]=o[s-1]+i[s-1]<<1;var a;if(n){a=new gi(1<<e);var l=15-e;for(s=0;s<r;++s)if(t[s])for(var c=s<<4|t[s],u=e-t[s],f=o[t[s]-1]++<<u,p=f|(1<<u)-1;f<=p;++f)a[kd[f]>>l]=c}else for(a=new gi(r),s=0;s<r;++s)t[s]&&(a[s]=kd[o[t[s]-1]++]>>15-t[s]);return a}),la=new An(288);for(var St=0;St<144;++St)la[St]=8;for(var St=144;St<256;++St)la[St]=9;for(var St=256;St<280;++St)la[St]=7;for(var St=280;St<288;++St)la[St]=8;var Bb=new An(32);for(var St=0;St<32;++St)Bb[St]=5;var rD=Ro(la,9,1),sD=Ro(Bb,5,1),ju=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},qn=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},Nu=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},iD=function(t){return(t+7)/8|0},jb=function(t,e,n){return(e==null||e<0)&&(e=0),(n==null||n>t.length)&&(n=t.length),new An(t.subarray(e,n))},oD=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ln=function(t,e,n){var r=new Error(e||oD[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,Ln),!n)throw r;return r},aD=function(t,e,n,r){var s=t.length,i=0;if(!s||e.f&&!e.l)return n||new An(0);var o=!n,a=o||e.i!=2,l=e.i;o&&(n=new An(s*3));var c=function(nt){var O=n.length;if(nt>O){var F=new An(Math.max(O*2,nt));F.set(n),n=F}},u=e.f||0,f=e.p||0,p=e.b||0,m=e.l,v=e.d,_=e.m,x=e.n,C=s*8;do{if(!m){u=qn(t,f,1);var S=qn(t,f+1,3);if(f+=3,S)if(S==1)m=rD,v=sD,_=9,x=5;else if(S==2){var A=qn(t,f,31)+257,T=qn(t,f+10,15)+4,B=A+qn(t,f+5,31)+1;f+=14;for(var E=new An(B),Q=new An(19),V=0;V<T;++V)Q[ZM[V]]=qn(t,f+V*3,7);f+=T*3;for(var z=ju(Q),pe=(1<<z)-1,me=Ro(Q,z,1),V=0;V<B;){var Ce=me[qn(t,f,pe)];f+=Ce&15;var P=Ce>>4;if(P<16)E[V++]=P;else{var we=0,xe=0;for(P==16?(xe=3+qn(t,f,3),f+=2,we=E[V-1]):P==17?(xe=3+qn(t,f,7),f+=3):P==18&&(xe=11+qn(t,f,127),f+=7);xe--;)E[V++]=we}}var te=E.subarray(0,A),ee=E.subarray(A);_=ju(te),x=ju(ee),m=Ro(te,_,1),v=Ro(ee,x,1)}else Ln(1);else{var P=iD(f)+4,M=t[P-4]|t[P-3]<<8,D=P+M;if(D>s){l&&Ln(0);break}a&&c(p+M),n.set(t.subarray(P,D),p),e.b=p+=M,e.p=f=D*8,e.f=u;continue}if(f>C){l&&Ln(0);break}}a&&c(p+131072);for(var Y=(1<<_)-1,Le=(1<<x)-1,ke=f;;ke=f){var we=m[Nu(t,f)&Y],We=we>>4;if(f+=we&15,f>C){l&&Ln(0);break}if(we||Ln(2),We<256)n[p++]=We;else if(We==256){ke=f,m=null;break}else{var wt=We-254;if(We>264){var V=We-257,gt=Tb[V];wt=qn(t,f,(1<<gt)-1)+Lb[V],f+=gt}var it=v[Nu(t,f)&Le],ae=it>>4;it||Ln(3),f+=it&15;var ee=nD[ae];if(ae>3){var gt=Rb[ae];ee+=Nu(t,f)&(1<<gt)-1,f+=gt}if(f>C){l&&Ln(0);break}a&&c(p+131072);var Me=p+wt;if(p<ee){var re=i-ee,Fe=Math.min(ee,Me);for(re+p<0&&Ln(3);p<Fe;++p)n[p]=r[re+p]}for(;p<Me;++p)n[p]=n[p-ee]}}e.l=m,e.p=ke,e.b=p,e.f=u,m&&(u=1,e.m=_,e.d=v,e.n=x)}while(!u);return p!=n.length&&o?jb(n,0,p):n.subarray(0,p)},lD=new An(0),cD=function(t){(t[0]!=31||t[1]!=139||t[2]!=8)&&Ln(6,"invalid gzip data");var e=t[3],n=10;e&4&&(n+=(t[10]|t[11]<<8)+2);for(var r=(e>>3&1)+(e>>4&1);r>0;r-=!t[n++]);return n+(e&2)},uD=function(t){var e=t.length;return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0};function gm(t,e){var n=cD(t);return n+8>t.length&&Ln(6,"invalid gzip data"),aD(t.subarray(n,-8),{i:2},new An(uD(t)),e)}var Cd=typeof TextDecoder<"u"&&new TextDecoder,dD=0;try{Cd.decode(lD,{stream:!0}),dD=1}catch{}var fD=function(t){for(var e="",n=0;;){var r=t[n++],s=(r>127)+(r>223)+(r>239);if(n+s>t.length)return{s:e,r:jb(t,n-1)};s?s==3?(r=((r&15)<<18|(t[n++]&63)<<12|(t[n++]&63)<<6|t[n++]&63)-65536,e+=String.fromCharCode(55296|r>>10,56320|r&1023)):s&1?e+=String.fromCharCode((r&31)<<6|t[n++]&63):e+=String.fromCharCode((r&15)<<12|(t[n++]&63)<<6|t[n++]&63):e+=String.fromCharCode(r)}};function mm(t,e){var n;if(Cd)return Cd.decode(t);var r=fD(t),s=r.s,n=r.r;return n.length&&Ln(8),s}const zu="mtgjson.idMap.v1",hD="https://mtgjson.com/api/v5/AllIdentifiers.json.gz",pD="https://mtgjson.com/api/v5/AllPrices.json.gz";function ym(t){const e={},n=t?.data??t,r=(s,i)=>{if(!s||!i)return;const o=i.identifiers??i,a=o?.scryfallId,l=o?.scryfallOracleId;a&&(e[a]=s),l&&(e[l]=s)};if(Array.isArray(n))for(const s of n){const i=s?.uuid??s?.cardId??s?.id;r(i,s)}else if(n&&typeof n=="object")for(const[s,i]of Object.entries(n))r(s,i);else throw new Error("[MTGJSONUploadService] Unrecognized AllIdentifiers format (no array/object).");if(Object.keys(e).length===0){const s=n&&typeof n=="object"?Object.keys(n).slice(0,5):[];throw console.warn("[MTGJSONUploadService] AllIdentifiers parsed but no entries found. Sample keys:",s),new Error("[MTGJSONUploadService] Parsed AllIdentifiers but produced an empty id map.")}return e}async function gD(t){try{const p=await js.get(zu);if(p&&typeof p=="object")return console.log("[MTGJSONUploadService] Using cached AllIdentifiers id map."),t({type:"downloading-all-identifiers",message:"Using cached AllIdentifiers mapping...",percentage:50}),t({type:"processing-all-identifiers",message:"Processing cached AllIdentifiers mapping...",percentage:75}),t({type:"processing-all-identifiers",message:"AllIdentifiers mapping processed",percentage:100}),p}catch(p){console.warn("[MTGJSONUploadService] Could not read cached id map:",p)}t({type:"downloading-all-identifiers",message:"Downloading AllIdentifiers.json.gz...",percentage:0}),console.log("[MTGJSONUploadService] Downloading AllIdentifiers.json.gz...");const e=await fetch(hD,{mode:"cors"});if(!e.ok)throw new Error(`[MTGJSONUploadService] Failed to fetch AllIdentifiers.json.gz: ${e.status} ${e.statusText}`);const n=e.headers.get("content-length"),r=parseInt(n||"0",10);let s=0;const i=e.body?.getReader(),o=[];if(i&&r)for(;;){const{done:p,value:m}=await i.read();if(p)break;o.push(m),s+=m.length;const v=Math.round(s/r*50);t({type:"downloading-all-identifiers",message:`Downloading AllIdentifiers.json.gz... (${Hl(s)} / ${Hl(r)})`,percentage:v})}else{const p=new Uint8Array(await e.arrayBuffer());t({type:"downloading-all-identifiers",message:"Downloaded AllIdentifiers.json.gz",percentage:50}),t({type:"processing-all-identifiers",message:"Processing AllIdentifiers mapping...",percentage:60});const m=mm(gm(p)),v=JSON.parse(m),_=ym(v);t({type:"processing-all-identifiers",message:"Caching AllIdentifiers mapping...",percentage:80});try{await js.set(zu,_)}catch(x){console.warn("[MTGJSONUploadService] Could not cache id map:",x)}return t({type:"processing-all-identifiers",message:"AllIdentifiers mapping processed",percentage:100}),console.log(`[MTGJSONUploadService] Built AllIdentifiers id map with ${Object.keys(_).length} entries.`),_}const a=new Uint8Array(s);let l=0;for(const p of o)a.set(p,l),l+=p.length;t({type:"downloading-all-identifiers",message:"Downloaded AllIdentifiers.json.gz",percentage:50});const c=mm(gm(a)),u=JSON.parse(c);t({type:"processing-all-identifiers",message:"Processing AllIdentifiers mapping...",percentage:60});const f=ym(u);t({type:"processing-all-identifiers",message:"Caching AllIdentifiers mapping...",percentage:80});try{await js.set(zu,f)}catch(p){console.warn("[MTGJSONUploadService] Could not cache id map:",p)}return t({type:"processing-all-identifiers",message:"AllIdentifiers mapping processed",percentage:100}),console.log(`[MTGJSONUploadService] Built AllIdentifiers id map with ${Object.keys(f).length} entries.`),f}class mD{static async upload(e,n){console.log(`[MTGJSONUploadService] Starting upload for file: ${e==="auto"?"AUTOMATIC DOWNLOAD":e.name}`);let r=null;try{console.log("[MTGJSONUploadService] Spawning worker..."),r=await Mb(new QM,{timeout:3e5}),console.log("[MTGJSONUploadService] Worker spawned."),console.log("[MTGJSONUploadService] Fetching wanted cards from DB...");const s=await Ut.getAll();console.log(`[MTGJSONUploadService] Found ${s.length} cards.`);const i=await gD(n),o=Array.from(new Set(s.map(c=>i[c.id]||(c.oracleId?i[c.oracleId]:void 0)).filter(Boolean)));console.log(`[MTGJSONUploadService] Resolved ${o.length} MTGJSON UUIDs from ${s.length} cards.`),o.length===0&&console.warn("[MTGJSONUploadService] No MTGJSON UUIDs resolved from local cards. Check that your cards contain Scryfall ids/oracleIds and that AllIdentifiers was parsed correctly.");const a={};for(const c of s){const u=i[c.id]||(c.oracleId?i[c.oracleId]:void 0);u&&(a[u]=c.id)}let l;if(e==="auto"){console.log("[MTGJSONUploadService] Downloading AllPrices.json.gz automatically..."),n({type:"downloading-all-prices",message:"Downloading AllPrices.json.gz...",percentage:0});const c=await fetch(pD,{mode:"cors"});if(!c.ok)throw new Error(`[MTGJSONUploadService] Failed to fetch AllPrices.json.gz: ${c.status} ${c.statusText}`);const u=c.headers.get("content-length"),f=parseInt(u||"0",10);let p=0;const m=c.body?.getReader(),v=[];if(m&&f)for(;;){const{done:S,value:P}=await m.read();if(S)break;v.push(P),p+=P.length;const M=Math.round(p/f*100);n({type:"downloading-all-prices",message:`Downloading AllPrices.json.gz... (${Hl(p)} / ${Hl(f)})`,percentage:M})}else{const S=await c.arrayBuffer(),P=new Blob([S],{type:"application/gzip"});l=new File([P],"AllPrices.json.gz",{type:"application/gzip"})}const _=new Uint8Array(p);let x=0;for(const S of v)_.set(S,x),x+=S.length;const C=new Blob([_],{type:"application/gzip"});l=new File([C],"AllPrices.json.gz",{type:"application/gzip"}),console.log(`[MTGJSONUploadService] Downloaded AllPrices.json.gz (${l.size} bytes)`)}else l=e;console.log("[MTGJSONUploadService] Calling worker.upload()..."),n({type:"importing-price-points",message:"Importing price points...",percentage:0});try{const c=new MessageChannel;await r.setProgressPort(XM(c.port2,[c.port2])),c.port1.onmessage=f=>{const p=f.data;n({type:"importing-price-points",message:`Processing ${p.processedCards}/${p.totalWanted} cards — ${p.writtenPricePoints.toLocaleString()} price points`,percentage:p.percentage})};const u=await r.upload(l,o,a);console.log(`[MTGJSONUploadService] Worker finished processing. ${u.processed} cards processed, ${u.written} price points written.`),n({type:"completed",message:`Import finished! ${u.processed} cards, ${u.written.toLocaleString()} price points.`,percentage:100,processedCards:u.processed,writtenPricePoints:u.written})}catch(c){throw console.error("[MTGJSONUploadService] Worker returned an error:",c),c}}catch(s){throw console.error("[MTGJSONUploadService] An error occurred in the upload service:",s),s}finally{if(r){console.log("[MTGJSONUploadService] Terminating worker.");try{await Db.terminate(r)}catch(s){console.error("[MTGJSONUploadService] Error terminating worker:",s)}}}}}function Hl(t){if(t===0)return"0 Bytes";const e=1024,n=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(t)/Math.log(e));return parseFloat((t/Math.pow(e,r)).toFixed(2))+" "+n[r]}const yD={class:"mtgjson-wizard"},vD={class:"card"},bD={class:"card-body"},_D={key:0,class:"progress-section"},wD={class:"phase-section mb-3"},xD={class:"progress"},kD=["aria-valuenow"],CD={class:"phase-message mt-1"},SD={key:0,class:"phase-section mb-3"},PD={class:"progress"},AD=["aria-valuenow"],ID={class:"phase-message mt-1"},ED={key:1,class:"phase-section mb-3"},OD={class:"progress"},MD=["aria-valuenow"],DD={class:"phase-message mt-1"},TD={key:1,class:"alert alert-success"},RD={key:2,class:"error-messages"},$D={key:0,class:"mt-2"},FD={class:"wizard-navigation pt-3"},LD=["disabled"],BD=Ze({__name:"MtgjsonImportWizard",setup(t){const e=he(!1),n=he(!1),r=he(""),s=he(50),i=he("Using cached AllIdentifiers mapping..."),o=he(0),a=he(""),l=he(0),c=he(""),u=he(0),f=he([]),p=async()=>{if(!e.value){e.value=!0,n.value=!1,f.value=[],r.value="",s.value=0,i.value="Downloading AllIdentifiers.json.gz...",o.value=0,a.value="",l.value=0,c.value="",u.value=0;try{await mD.upload("auto",m=>{switch(r.value=m.type,m.type){case"downloading-all-identifiers":s.value=m.percentage||0,i.value=m.message;break;case"processing-all-identifiers":s.value=m.percentage||0,i.value=m.message;break;case"downloading-all-prices":o.value=m.percentage||0,a.value=m.message;break;case"importing-price-points":l.value=m.percentage||0,c.value=m.message;break;case"completed":l.value=100,c.value=m.message,u.value=m.writtenPricePoints??0,e.value=!1,n.value=!0;break}})}catch(m){f.value.push("Failed to import MTGJSON data: "+m.message),e.value=!1}}};return(m,v)=>(U(),Z("div",yD,[v[5]||(v[5]=w("h1",null,"MTGJSON Price Import",-1)),v[6]||(v[6]=w("p",null,"Import historical price data from MTGJSON. This will populate the price history for your cards for the last 90 days.",-1)),w("div",vD,[w("div",bD,[v[4]||(v[4]=w("div",{class:"info-section mb-4"},[w("p",null,[w("strong",null,'What happens when you click "Import Prices":')]),w("ol",null,[w("li",null,"Download AllIdentifiers.json.gz (~160MB compressed)"),w("li",null,"Download AllPrices.json.gz (~130MB compressed)"),w("li",null,"Process the files to extract price data for your cards"),w("li",null,"Store the price history in your local database")])],-1)),e.value?(U(),Z("div",_D,[w("div",wD,[v[0]||(v[0]=w("div",{class:"phase-title mb-1"},"Downloading AllIdentifiers.json.gz",-1)),w("div",xD,[w("div",{class:"progress-bar",role:"progressbar",style:En({width:s.value+"%"}),"aria-valuenow":s.value,"aria-valuemin":"0","aria-valuemax":"100"},oe(s.value)+"%",13,kD)]),w("div",CD,oe(i.value),1)]),r.value==="downloading-all-prices"||r.value==="importing-price-points"||r.value==="completed"?(U(),Z("div",SD,[v[1]||(v[1]=w("div",{class:"phase-title mb-1"},"Downloading AllPrices.json.gz",-1)),w("div",PD,[w("div",{class:"progress-bar",role:"progressbar",style:En({width:o.value+"%"}),"aria-valuenow":o.value,"aria-valuemin":"0","aria-valuemax":"100"},oe(o.value)+"%",13,AD)]),w("div",ID,oe(a.value),1)])):Pe("",!0),r.value==="importing-price-points"||r.value==="completed"?(U(),Z("div",ED,[v[2]||(v[2]=w("div",{class:"phase-title mb-1"},"Importing Price Points",-1)),w("div",OD,[w("div",{class:"progress-bar",role:"progressbar",style:En({width:l.value+"%"}),"aria-valuenow":l.value,"aria-valuemin":"0","aria-valuemax":"100"},oe(l.value)+"%",13,MD)]),w("div",DD,oe(c.value),1)])):Pe("",!0)])):Pe("",!0),n.value?(U(),Z("div",TD," Import finished! Processed "+oe(u.value)+" price points. ",1)):Pe("",!0),f.value.length>0?(U(),Z("div",RD,[(U(!0),Z(et,null,Ft(f.value,_=>(U(),Z("div",{key:_,class:"error-message"},[yt(oe(_)+" ",1),_.includes("Out of Memory")||_.includes("too large")?(U(),Z("div",$D,[...v[3]||(v[3]=[w("strong",null,"Solution:",-1),yt(' The MTGJSON file is too large to process in your browser. Please download the smaller "AllPricesToday.json" file from MTGJSON instead, which contains only the latest prices and is much smaller. ',-1)])])):Pe("",!0)]))),128))])):Pe("",!0),w("div",FD,[w("button",{onClick:p,class:"btn btn-glass-primary",disabled:e.value},oe(e.value?"Importing...":"Import Prices"),9,LD)])])])]))}}),jD=yn(BD,[["__scopeId","data-v-ff365479"]]);function ND(t){return new Worker("/mtg-pwa/assets/PriceGuideUploadWorker-C8L6STx7.js",{name:t?.name})}class zD{static async upload(e,n){const r=await Mb(new ND,{timeout:3e5});try{const s=await r.upload(e);n(s)}finally{await Db.terminate(r)}}}const qD={class:"price-guide-wizard"},UD={class:"card"},WD={class:"card-body"},VD={class:"file-upload-section"},HD={class:"mb-3"},KD={key:0,class:"files-info"},YD={class:"file-list"},GD={class:"file-item"},XD={class:"file-name"},QD={class:"file-size"},JD={key:0,class:"progress"},ZD=["aria-valuenow"],eT={key:1,class:"alert alert-success"},tT={key:2,class:"error-messages"},nT={class:"wizard-navigation pt-3"},rT=["disabled"],sT=Ze({__name:"PriceGuideUploadWizard",setup(t){const e=he(null),n=he(!1),r=he(!1),s=he(0),i=he(0),o=he([]),a=u=>{const p=u.target.files;!p||p.length===0||(e.value=p[0],r.value=!1,i.value=0,o.value=[])},l=async()=>{if(!(!e.value||n.value)){n.value=!0,r.value=!1,o.value=[],s.value=0;try{await zD.upload(e.value,u=>{i.value=u,s.value=100,n.value=!1,r.value=!0})}catch(u){o.value.push("Failed to import Price Guide data: "+u.message),n.value=!1}}},c=u=>{if(u===0)return"0 Bytes";const f=1024,p=["Bytes","KB","MB","GB"],m=Math.floor(Math.log(u)/Math.log(f));return parseFloat((u/Math.pow(f,m)).toFixed(2))+" "+p[m]};return(u,f)=>(U(),Z("div",qD,[f[2]||(f[2]=w("h1",null,"Cardmarket Price Guide Import",-1)),f[3]||(f[3]=w("p",null,"Import historical price data from Cardmarket Price Guide.",-1)),f[4]||(f[4]=w("div",{class:"alert alert-info"},[w("h3",{class:"alert-heading"},"Where to get the file"),w("p",null,"You can download the Price Guide CSV from your Cardmarket account.")],-1)),w("div",UD,[w("div",WD,[w("div",VD,[w("div",HD,[f[0]||(f[0]=w("label",{for:"price-guide-file",class:"form-label"}," Choose Price Guide CSV File ",-1)),w("input",{id:"price-guide-file",type:"file",accept:".csv",onChange:a,class:"form-control"},null,32)]),e.value?(U(),Z("div",KD,[f[1]||(f[1]=w("h3",null,"Uploaded File",-1)),w("ul",YD,[w("li",GD,[w("span",XD,oe(e.value.name),1),w("span",QD,"- "+oe(c(e.value.size)),1)])])])):Pe("",!0)]),n.value?(U(),Z("div",JD,[w("div",{class:"progress-bar",role:"progressbar",style:En({width:s.value+"%"}),"aria-valuenow":s.value,"aria-valuemin":"0","aria-valuemax":"100"},oe(s.value)+"%",13,ZD)])):Pe("",!0),r.value?(U(),Z("div",eT," Import finished! Processed "+oe(i.value)+" price points. ",1)):Pe("",!0),o.value.length>0?(U(),Z("div",tT,[(U(!0),Z(et,null,Ft(o.value,p=>(U(),Z("div",{key:p,class:"error-message"},oe(p),1))),128))])):Pe("",!0),w("div",nT,[w("button",{onClick:l,class:"btn btn-glass-primary",disabled:!e.value||n.value},oe(n.value?"Importing...":"Import Prices"),9,rT)])])])]))}}),iT=yn(sT,[["__scopeId","data-v-d170427f"]]);class oT{static normalizeFingerprint(e){return{name:e.name.trim().toLowerCase(),setCode:e.setCode.trim().toLowerCase(),collectorNumber:e.collectorNumber.trim().toLowerCase(),finish:e.finish.trim().toLowerCase(),language:e.language.trim().toLowerCase()}}static compareFingerprints(e,n){const r=this.normalizeFingerprint(e),s=this.normalizeFingerprint(n);return r.name===s.name&&r.setCode===s.setCode&&r.collectorNumber===s.collectorNumber&&r.finish===s.finish&&r.language===s.language}static async resolveFingerprint(e){try{const n=await ln.hydrateCard({name:e.name,setCode:e.setCode,collectorNumber:e.collectorNumber});return n&&n.id?n.id:null}catch(n){return console.error("Error resolving fingerprint:",n),null}}}class aT{static async importDeckFromText(e,n){let r,s;try{r=wi();const i=n.split(`
`).map(o=>o.trim()).filter(o=>o);s=vl(),r.addImport({id:s,type:"deck",name:e,status:"pending",progress:0,totalItems:i.length,processedItems:0})}catch(i){console.warn("Could not initialize import status store:",i),r=null,s=null}try{const i=new Date,o=`deck-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,a={id:o,platform:"csv",name:e,commander:"",url:"",importedAt:i,createdAt:i,updatedAt:i},l=fe();await l.decks.add(a);const c=n.split(`
`).map(f=>f.trim()).filter(f=>f);if(console.log("Processing deck import:",{deckName:e,lineCount:c.length}),r&&s)try{r.updateImport(s,{status:"processing"})}catch(f){console.warn("Could not update import status:",f)}for(let f=0;f<c.length;f++){const m=c[f].trim();if(!m)continue;if(console.log("Processing line:",m),r&&s)try{r.updateImport(s,{processedItems:f+1,progress:Math.round((f+1)/c.length*100)})}catch(_){console.warn("Could not update import progress:",_)}const v=m.match(/^(\d+)\s+(.+?)\s*\(([^)]+)\)\s*(\d+)(?:\s*\*F\*\s*)?$/i);if(v){const[,_,x,C,S]=v,P=parseInt(_)||1;if(console.log("Parsed card:",{quantity:P,cardName:x,setCode:C,collectorNumber:S}),x&&C&&S){const M={name:x.trim(),setCode:C.trim(),collectorNumber:S.trim(),finish:"nonfoil",language:"en"},D=await oT.resolveFingerprint(M);if(console.log("Resolved card ID:",D),D){const Q=new Date;if(!await Ut.getById(D)){const me=await ln.hydrateCard({scryfall_id:D,name:x.trim(),setCode:C.trim(),collectorNumber:S.trim()}),Ce=await ln.getImageUrlById(D),we={id:D,oracleId:me?.oracle_id||"",name:x.trim(),set:me?.set_name||C.trim(),setCode:me?.set||C.trim(),number:me?.collector_number||S.trim(),lang:me?.lang||"en",finish:"nonfoil",layout:Ce?.layout||"normal",imageUrl:Ce?.front||"",imageUrlBack:Ce?.back||"",createdAt:Q,updatedAt:Q};await Ut.add(we),console.log("Added new card to database:",we);try{const xe=await ln.getPriceById(D);if(xe){const te=Q.toISOString().split("T")[0],Y={id:`${D}:scryfall:${te}`,cardId:D,provider:"scryfall",finish:"nonfoil",date:Q.toISOString().split("T")[0],currency:"EUR",priceCent:xe.getCents(),asOf:Q,createdAt:Q};await fe().price_points.put(Y)}}catch(xe){console.error(`Error fetching price for new card ${D}:`,xe)}}const pe=(await kt.getByCardId(D)).reduce((me,Ce)=>{if(!Ce.disposedAt||Ce.disposedQuantity&&Ce.disposedQuantity<Ce.quantity){const we=Ce.disposedQuantity?Ce.quantity-Ce.disposedQuantity:Ce.quantity;return me+we}return me},0);if(pe<P){const me=P-pe,we={id:`lot-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,cardId:D,quantity:me,unitCost:0,condition:"unknown",language:"en",foil:!1,finish:"nonfoil",source:"deck_import",currency:"EUR",purchasedAt:Q,createdAt:Q,updatedAt:Q};await kt.add(we),console.log("Added new lot for deck import:",we)}}let A;const T=await kt.getByCardId(D||"");if(T.length>0){for(const Q of T)if((Q.disposedQuantity?Q.quantity-Q.disposedQuantity:Q.quantity)>=P&&!Q.disposedAt){A=Q.id;break}!A&&T.length>0&&(A=T[0].id)}const B=new Date,E={id:`deckcard-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,deckId:o||"unknown-deck",cardId:D||"unknown-card",lotId:A,quantity:typeof P=="number"&&P>0?P:1,role:"main",addedAt:B,createdAt:B};await l.deck_cards.add(E),console.log("Added deck card:",E)}}else console.log("Line did not match expected format:",m)}const u=await l.deck_cards.where("deckId").equals(o).count();if(console.log("Total cards imported:",u),r&&s)try{r.completeImport(s)}catch(f){console.warn("Could not complete import status:",f)}}catch(i){if(console.error("Error importing deck from text:",i),r&&s)try{r.completeImport(s,i.message)}catch(o){console.warn("Could not update import status to failed:",o)}throw i}}static async calculateDeckCoverage(e){try{const r=await fe().deck_cards.where("deckId").equals(e).toArray();let s=0,i=0;for(const a of r){s+=a.quantity;const c=(await kt.getActiveLotsByCardId(a.cardId)).reduce((u,f)=>u+f.quantity,0);i+=Math.min(a.quantity,c)}const o=s>0?Math.round(i/s*100):100;return{totalCards:s,ownedCards:i,coveragePercentage:o}}catch(n){throw console.error("Error calculating deck coverage:",n),n}}}const lT={class:"deck-import"},cT={class:"import-section"},uT={class:"mb-3"},dT={class:"mb-3"},fT=["disabled"],hT={key:0,class:"status-message error"},pT=Ze({__name:"DeckImportView",setup(t){const e=he(""),n=he(""),r=he(!1),s=he(null),i=async()=>{if(!e.value.trim()){s.value="Please enter a deck name";return}if(!n.value.trim()){s.value="Please paste your decklist";return}r.value=!0,s.value=null;try{await aT.importDeckFromText(e.value.trim(),n.value.trim()),s.value="Deck import started successfully! Check the status indicator in the top right for progress.",setTimeout(()=>{e.value="",n.value="",r.value=!1,s.value=null},3e3)}catch(o){s.value="Failed to import deck: "+o.message,r.value=!1}};return(o,a)=>(U(),Z("div",lT,[a[7]||(a[7]=w("h1",null,"Import Deck",-1)),w("div",cT,[a[4]||(a[4]=w("h2",null,"Moxfield Deck Import",-1)),a[5]||(a[5]=w("p",null,"Copy and paste your decklist from Moxfield to track which cards you own and which you're missing.",-1)),w("div",uT,[a[2]||(a[2]=w("label",{for:"deck-name",class:"form-label"},"Deck Name",-1)),Ls(w("input",{id:"deck-name","onUpdate:modelValue":a[0]||(a[0]=l=>e.value=l),type:"text",placeholder:"Enter a name for your deck",class:"form-control"},null,512),[[Dl,e.value]])]),w("div",dT,[a[3]||(a[3]=w("label",{for:"decklist",class:"form-label"},"Decklist",-1)),Ls(w("textarea",{id:"decklist","onUpdate:modelValue":a[1]||(a[1]=l=>n.value=l),placeholder:`Paste your decklist here (e.g., 4 Lightning Bolt
2 Counterspell)`,rows:"10",class:"form-control"},null,512),[[Dl,n.value]])]),w("button",{onClick:i,disabled:r.value,class:"btn btn-glass-primary mb-4"},oe(r.value?"Importing...":"Import Deck"),9,fT),s.value?(U(),Z("div",hT,oe(s.value),1)):Pe("",!0),a[6]||(a[6]=w("div",{class:"instructions"},[w("h3",null,"How to copy from Moxfield:"),w("ol",null,[w("li",null,"Open your deck on Moxfield.com"),w("li",null,'Click the "Export" button'),w("li",null,'Select "Text" format'),w("li",null,"Copy the text and paste it here")])],-1))])]))}}),gT=yn(pT,[["__scopeId","data-v-cad749f2"]]),mT={class:"container py-4"},yT={class:"d-flex align-items-center justify-content-between mb-4"},vT={key:0,class:"text-center py-5"},bT={key:1,class:"text-center py-5"},_T={key:2,class:"row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4"},wT={class:"card h-100 shadow-sm border-0 overflow-hidden position-relative"},xT={class:"card-aspect position-relative overflow-hidden"},kT=["src","alt"],CT={class:"card-body"},ST=["title"],PT={class:"d-flex align-items-center justify-content-between mb-2"},AT={key:0,class:"badge bg-info text-dark text-uppercase"},IT={class:"text-muted"},ET={class:"fw-semibold"},OT=Ze({__name:"DecksView",setup(t){const e=he([]),n=he(!0),r=he({}),s=he({}),i=c=>c?new Date(c).toLocaleDateString():"—",o=c=>r.value[c]??0,a=c=>s.value[c];return Tn(async()=>{try{const c=fe(),u=await c.decks.toArray();e.value=u;const f=u.map(async m=>{const v=await c.deck_cards.where("deckId").equals(m.id).count();return[m.id,v]}),p=u.map(async m=>{if(!m.faceCardId)return[m.id,null];const v=await c.cards.get(m.faceCardId);return[m.id,v?{id:v.id,name:v.name,imageUrl:v.imageUrl}:null]});(await Promise.all(f)).forEach(([m,v])=>r.value[m]=v),(await Promise.all(p)).forEach(([m,v])=>{v?s.value[m]=v:delete s.value[m]})}catch(c){console.error("Error loading decks:",c)}finally{n.value=!1}}),(c,u)=>{const f=Si("router-link");return U(),Z("div",mT,[w("div",yT,[u[1]||(u[1]=w("h1",{class:"h3 mb-0"},"Decks",-1)),ze(f,{to:"/import/deck",class:"btn btn-glass-primary"},{default:st(()=>[...u[0]||(u[0]=[yt(" Import Deck ",-1)])]),_:1})]),n.value?(U(),Z("div",vT,[...u[2]||(u[2]=[w("div",{class:"spinner-border",role:"status","aria-hidden":"true"},null,-1),w("div",{class:"mt-2"},"Loading decks…",-1)])])):e.value.length===0?(U(),Z("div",bT,[u[4]||(u[4]=w("p",{class:"text-muted mb-3"},"You haven't imported any decks yet.",-1)),ze(f,{to:"/import/deck",class:"btn btn-glass-primary"},{default:st(()=>[...u[3]||(u[3]=[yt(" Import Your First Deck ",-1)])]),_:1})])):(U(),Z("div",_T,[(U(!0),Z(et,null,Ft(e.value,p=>(U(),Z("div",{key:p.id,class:"col"},[w("div",wT,[w("div",xT,[w("img",{src:a(p.id)?.imageUrl,alt:a(p.id)?.name||"Face card",class:"w-100 h-100 d-block img-fit-cover rounded-4"},null,8,kT)]),w("div",CT,[w("h2",{class:"h5 mb-1 text-truncate",title:p.name},oe(p.name),9,ST),w("div",PT,[p.platform?(U(),Z("span",AT,oe(p.platform),1)):Pe("",!0),w("small",IT,oe(i(p.importedAt)),1)]),w("div",ET,oe(o(p.id))+" cards",1),ze(f,{class:"stretched-link",to:`/decks/${p.id}`,"aria-label":"Open deck"},null,8,["to"])])])]))),128))]))])}}}),MT=yn(OT,[["__scopeId","data-v-22ce0c1b"]]);function Nb(t,e){const n=typeof t=="string"&&!e?`${t}Context`:e,r=Symbol(n);return[o=>{const a=On(r,o);if(a||a===null)return a;throw new Error(`Injection \`${r.toString()}\` not found. Component must be used within ${Array.isArray(t)?`one of the following components: ${t.join(", ")}`:`\`${t}\``}`)},o=>(Co(r,o),o)]}function ts(){let t=document.activeElement;if(t==null)return null;for(;t!=null&&t.shadowRoot!=null&&t.shadowRoot.activeElement!=null;)t=t.shadowRoot.activeElement;return t}function zb(t,e,n){const r=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),r.dispatchEvent(s)}function Cf(t){return t?t.flatMap(e=>e.type===et?Cf(e.children):[e]):[]}const[DT,qL]=Nb("ConfigProvider");function qb(t){return Ld()?(Jm(t),!0):!1}function TT(t){let e=!1,n;const r=ec(!0);return(...s)=>(e||(n=r.run(()=>t(...s)),e=!0),n)}function RT(t){let e=0,n,r;const s=()=>{e-=1,r&&e<=0&&(r.stop(),n=void 0,r=void 0)};return(...i)=>(e+=1,r||(r=ec(!0),n=r.run(()=>t(...i))),qb(s),n)}const Ks=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const $T=t=>typeof t<"u",FT=Object.prototype.toString,LT=t=>FT.call(t)==="[object Object]",vm=BT();function BT(){var t,e;return Ks&&((t=window?.navigator)==null?void 0:t.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((e=window?.navigator)==null?void 0:e.maxTouchPoints)>2&&/iPad|Macintosh/.test(window?.navigator.userAgent))}function jT(t){return cr()}function qu(t){return Array.isArray(t)?t:[t]}function NT(t,e){jT()&&ic(t,e)}function zT(t,e,n){return Kt(t,e,{...n,immediate:!0})}const Sf=Ks?window:void 0;function bc(t){var e;const n=ar(t);return(e=n?.$el)!=null?e:n}function Ub(...t){const e=[],n=()=>{e.forEach(a=>a()),e.length=0},r=(a,l,c,u)=>(a.addEventListener(l,c,u),()=>a.removeEventListener(l,c,u)),s=Ve(()=>{const a=qu(ar(t[0])).filter(l=>l!=null);return a.every(l=>typeof l!="string")?a:void 0}),i=zT(()=>{var a,l;return[(l=(a=s.value)==null?void 0:a.map(c=>bc(c)))!=null?l:[Sf].filter(c=>c!=null),qu(ar(s.value?t[1]:t[0])),qu($e(s.value?t[2]:t[1])),ar(s.value?t[3]:t[2])]},([a,l,c,u])=>{if(n(),!a?.length||!l?.length||!c?.length)return;const f=LT(u)?{...u}:u;e.push(...a.flatMap(p=>l.flatMap(m=>c.map(v=>r(p,m,v,f)))))},{flush:"post"}),o=()=>{i(),n()};return qb(n),o}function qT(){const t=nc(!1),e=cr();return e&&Tn(()=>{t.value=!0},e),t}function UT(t){return typeof t=="function"?t:typeof t=="string"?e=>e.key===t:Array.isArray(t)?e=>t.includes(e.key):()=>!0}function WT(...t){let e,n,r={};t.length===3?(e=t[0],n=t[1],r=t[2]):t.length===2?typeof t[1]=="object"?(e=!0,n=t[0],r=t[1]):(e=t[0],n=t[1]):(e=!0,n=t[0]);const{target:s=Sf,eventName:i="keydown",passive:o=!1,dedupe:a=!1}=r,l=UT(e);return Ub(s,i,u=>{u.repeat&&ar(a)||l(u)&&n(u)},o)}function VT(t){return JSON.parse(JSON.stringify(t))}function HT(t,e,n,r={}){var s,i,o;const{clone:a=!1,passive:l=!1,eventName:c,deep:u=!1,defaultValue:f,shouldEmit:p}=r,m=cr(),v=n||m?.emit||((s=m?.$emit)==null?void 0:s.bind(m))||((o=(i=m?.proxy)==null?void 0:i.$emit)==null?void 0:o.bind(m?.proxy));let _=c;_=_||`update:${e.toString()}`;const x=P=>a?typeof a=="function"?a(P):VT(P):P,C=()=>$T(t[e])?x(t[e]):f,S=P=>{p?p(P)&&v(_,P):v(_,P)};if(l){const P=C(),M=he(P);let D=!1;return Kt(()=>t[e],A=>{D||(D=!0,M.value=x(A),un(()=>D=!1))}),Kt(M,A=>{!D&&(A!==t[e]||u)&&S(A)},{deep:u}),M}else return Ve({get(){return C()},set(P){S(P)}})}function Uu(t){if(t===null||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e!==null&&e!==Object.prototype&&Object.getPrototypeOf(e)!==null||Symbol.iterator in t?!1:Symbol.toStringTag in t?Object.prototype.toString.call(t)==="[object Module]":!0}function Sd(t,e,n=".",r){if(!Uu(e))return Sd(t,{},n,r);const s=Object.assign({},e);for(const i in t){if(i==="__proto__"||i==="constructor")continue;const o=t[i];o!=null&&(r&&r(s,i,o,n)||(Array.isArray(o)&&Array.isArray(s[i])?s[i]=[...o,...s[i]]:Uu(o)&&Uu(s[i])?s[i]=Sd(o,s[i],(n?`${n}.`:"")+i.toString(),r):s[i]=o))}return s}function KT(t){return(...e)=>e.reduce((n,r)=>Sd(n,r,"",t),{})}const YT=KT(),GT=RT(()=>{const t=he(new Map),e=he(),n=Ve(()=>{for(const o of t.value.values())if(o)return!0;return!1}),r=DT({scrollBody:he(!0)});let s=null;const i=()=>{document.body.style.paddingRight="",document.body.style.marginRight="",document.body.style.pointerEvents="",document.documentElement.style.removeProperty("--scrollbar-width"),document.body.style.overflow=e.value??"",vm&&s?.(),e.value=void 0};return Kt(n,(o,a)=>{if(!Ks)return;if(!o){a&&i();return}e.value===void 0&&(e.value=document.body.style.overflow);const l=window.innerWidth-document.documentElement.clientWidth,c={padding:l,margin:0},u=r.scrollBody?.value?typeof r.scrollBody.value=="object"?YT({padding:r.scrollBody.value.padding===!0?l:r.scrollBody.value.padding,margin:r.scrollBody.value.margin===!0?l:r.scrollBody.value.margin},c):c:{padding:0,margin:0};l>0&&(document.body.style.paddingRight=typeof u.padding=="number"?`${u.padding}px`:String(u.padding),document.body.style.marginRight=typeof u.margin=="number"?`${u.margin}px`:String(u.margin),document.documentElement.style.setProperty("--scrollbar-width",`${l}px`),document.body.style.overflow="hidden"),vm&&(s=Ub(document,"touchmove",f=>QT(f),{passive:!1})),un(()=>{document.body.style.pointerEvents="none",document.body.style.overflow="hidden"})},{immediate:!0,flush:"sync"}),t});function XT(t){const e=Math.random().toString(36).substring(2,7),n=GT();n.value.set(e,t);const r=Ve({get:()=>n.value.get(e)??!1,set:s=>n.value.set(e,s)});return NT(()=>{n.value.delete(e)}),r}function Wb(t){const e=window.getComputedStyle(t);if(e.overflowX==="scroll"||e.overflowY==="scroll"||e.overflowX==="auto"&&t.clientWidth<t.scrollWidth||e.overflowY==="auto"&&t.clientHeight<t.scrollHeight)return!0;{const n=t.parentNode;return!(n instanceof Element)||n.tagName==="BODY"?!1:Wb(n)}}function QT(t){const e=t||window.event,n=e.target;return n instanceof Element&&Wb(n)?!1:e.touches.length>1?!0:(e.preventDefault&&e.cancelable&&e.preventDefault(),!1)}function Pf(t){const e=cr(),n=e?.type.emits,r={};return n?.length||console.warn(`No emitted event found. Please check component: ${e?.type.__name}`),n?.forEach(s=>{r[ll(Mn(s))]=(...i)=>t(s,...i)}),r}function ur(){const t=cr(),e=he(),n=Ve(()=>["#text","#comment"].includes(e.value?.$el.nodeName)?e.value?.$el.nextElementSibling:bc(e)),r=Object.assign({},t.exposed),s={};for(const o in t.props)Object.defineProperty(s,o,{enumerable:!0,configurable:!0,get:()=>t.props[o]});if(Object.keys(r).length>0)for(const o in r)Object.defineProperty(s,o,{enumerable:!0,configurable:!0,get:()=>r[o]});Object.defineProperty(s,"$el",{enumerable:!0,configurable:!0,get:()=>t.vnode.el}),t.exposed=s;function i(o){e.value=o,o&&(Object.defineProperty(s,"$el",{enumerable:!0,configurable:!0,get:()=>o instanceof Element?o:o.$el}),t.exposed=s)}return{forwardRef:i,currentRef:e,currentElement:n}}var JT=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},ci=new WeakMap,il=new WeakMap,ol={},Wu=0,Vb=function(t){return t&&(t.host||Vb(t.parentNode))},ZT=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=Vb(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},eR=function(t,e,n,r){var s=ZT(e,Array.isArray(t)?t:[t]);ol[n]||(ol[n]=new WeakMap);var i=ol[n],o=[],a=new Set,l=new Set(s),c=function(f){!f||a.has(f)||(a.add(f),c(f.parentNode))};s.forEach(c);var u=function(f){!f||l.has(f)||Array.prototype.forEach.call(f.children,function(p){if(a.has(p))u(p);else try{var m=p.getAttribute(r),v=m!==null&&m!=="false",_=(ci.get(p)||0)+1,x=(i.get(p)||0)+1;ci.set(p,_),i.set(p,x),o.push(p),_===1&&v&&il.set(p,!0),x===1&&p.setAttribute(n,"true"),v||p.setAttribute(r,"true")}catch(C){console.error("aria-hidden: cannot operate on ",p,C)}})};return u(e),a.clear(),Wu++,function(){o.forEach(function(f){var p=ci.get(f)-1,m=i.get(f)-1;ci.set(f,p),i.set(f,m),p||(il.has(f)||f.removeAttribute(r),il.delete(f)),m||f.removeAttribute(n)}),Wu--,Wu||(ci=new WeakMap,ci=new WeakMap,il=new WeakMap,ol={})}},tR=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=JT(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),eR(r,s,n,"aria-hidden")):function(){return null}};function nR(t){let e;Kt(()=>bc(t),n=>{n?e=tR(n):e&&e()}),Fi(()=>{e&&e()})}function bm(t,e="reka"){return`${e}-${U0?.()}`}function rR(t,e){const n=he(t);function r(i){return e[n.value][i]??n.value}return{state:n,dispatch:i=>{n.value=r(i)}}}function sR(t,e){const n=he({}),r=he("none"),s=he(t),i=t.value?"mounted":"unmounted";let o;const a=e.value?.ownerDocument.defaultView??Sf,{state:l,dispatch:c}=rR(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}}),u=x=>{if(Ks){const C=new CustomEvent(x,{bubbles:!1,cancelable:!1});e.value?.dispatchEvent(C)}};Kt(t,async(x,C)=>{const S=C!==x;if(await un(),S){const P=r.value,M=al(e.value);x?(c("MOUNT"),u("enter"),M==="none"&&u("after-enter")):M==="none"||M==="undefined"||n.value?.display==="none"?(c("UNMOUNT"),u("leave"),u("after-leave")):C&&P!==M?(c("ANIMATION_OUT"),u("leave")):(c("UNMOUNT"),u("after-leave"))}},{immediate:!0});const f=x=>{const C=al(e.value),S=C.includes(x.animationName),P=l.value==="mounted"?"enter":"leave";if(x.target===e.value&&S&&(u(`after-${P}`),c("ANIMATION_END"),!s.value)){const M=e.value.style.animationFillMode;e.value.style.animationFillMode="forwards",o=a?.setTimeout(()=>{e.value?.style.animationFillMode==="forwards"&&(e.value.style.animationFillMode=M)})}x.target===e.value&&C==="none"&&c("ANIMATION_END")},p=x=>{x.target===e.value&&(r.value=al(e.value))},m=Kt(e,(x,C)=>{x?(n.value=getComputedStyle(x),x.addEventListener("animationstart",p),x.addEventListener("animationcancel",f),x.addEventListener("animationend",f)):(c("ANIMATION_END"),o!==void 0&&a?.clearTimeout(o),C?.removeEventListener("animationstart",p),C?.removeEventListener("animationcancel",f),C?.removeEventListener("animationend",f))},{immediate:!0}),v=Kt(l,()=>{const x=al(e.value);r.value=l.value==="mounted"?x:"none"});return Fi(()=>{m(),v()}),{isPresent:Ve(()=>["mounted","unmountSuspended"].includes(l.value))}}function al(t){return t&&getComputedStyle(t).animationName||"none"}var Hb=Ze({name:"Presence",props:{present:{type:Boolean,required:!0},forceMount:{type:Boolean}},slots:{},setup(t,{slots:e,expose:n}){const{present:r,forceMount:s}=Vd(t),i=he(),{isPresent:o}=sR(r,i);n({present:o});let a=e.default({present:o.value});a=Cf(a||[]);const l=cr();if(a&&a?.length>1){const c=l?.parent?.type.name?`<${l.parent.type.name} />`:"component";throw new Error([`Detected an invalid children for \`${c}\` for  \`Presence\` component.`,"","Note: Presence works similarly to `v-if` directly, but it waits for animation/transition to finished before unmounting. So it expect only one direct child of valid VNode type.","You can apply a few solutions:",["Provide a single child element so that `presence` directive attach correctly.","Ensure the first child is an actual element instead of a raw text node or comment node."].map(u=>`  - ${u}`).join(`
`)].join(`
`))}return()=>s.value||r.value||o.value?Ar(e.default({present:o.value})[0],{ref:c=>{const u=bc(c);return typeof u?.hasAttribute>"u"||(u?.hasAttribute("data-reka-popper-content-wrapper")?i.value=u.firstElementChild:i.value=u),u}}):null}});const iR=Ze({name:"PrimitiveSlot",inheritAttrs:!1,setup(t,{attrs:e,slots:n}){return()=>{if(!n.default)return null;const r=Cf(n.default()),s=r.findIndex(l=>l.type!==Hn);if(s===-1)return r;const i=r[s];delete i.props?.ref;const o=i.props?lr(e,i.props):e,a=ss({...i,props:{}},o);return r.length===1?a:(r[s]=a,r)}}}),oR=["area","img","input"],ca=Ze({name:"Primitive",inheritAttrs:!1,props:{asChild:{type:Boolean,default:!1},as:{type:[String,Object],default:"div"}},setup(t,{attrs:e,slots:n}){const r=t.asChild?"template":t.as;return typeof r=="string"&&oR.includes(r)?()=>Ar(r,e):r!=="template"?()=>Ar(t.as,e,{default:n.default}):()=>Ar(iR,e,{default:n.default})}}),[ls,aR]=Nb("DialogRoot");var lR=Ze({inheritAttrs:!1,__name:"DialogRoot",props:{open:{type:Boolean,required:!1,default:void 0},defaultOpen:{type:Boolean,required:!1,default:!1},modal:{type:Boolean,required:!1,default:!0}},emits:["update:open"],setup(t,{emit:e}){const n=t,s=HT(n,"open",e,{defaultValue:n.defaultOpen,passive:n.open===void 0}),i=he(),o=he(),{modal:a}=Vd(n);return aR({open:s,modal:a,openModal:()=>{s.value=!0},onOpenChange:l=>{s.value=l},onOpenToggle:()=>{s.value=!s.value},contentId:"",titleId:"",descriptionId:"",triggerElement:i,contentElement:o}),(l,c)=>xn(l.$slots,"default",{open:$e(s),close:()=>s.value=!1})}}),cR=lR,uR=Ze({__name:"DialogClose",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(t){const e=t;ur();const n=ls();return(r,s)=>(U(),en($e(ca),lr(e,{type:r.as==="button"?"button":void 0,onClick:s[0]||(s[0]=i=>$e(n).onOpenChange(!1))}),{default:st(()=>[xn(r.$slots,"default")]),_:3},16,["type"]))}}),dR=uR;const fR="dismissableLayer.pointerDownOutside",hR="dismissableLayer.focusOutside";function Kb(t,e){const n=e.closest("[data-dismissable-layer]"),r=t.dataset.dismissableLayer===""?t:t.querySelector("[data-dismissable-layer]"),s=Array.from(t.ownerDocument.querySelectorAll("[data-dismissable-layer]"));return!!(n&&(r===n||s.indexOf(r)<s.indexOf(n)))}function pR(t,e,n=!0){const r=e?.value?.ownerDocument??globalThis?.document,s=he(!1),i=he(()=>{});return Pi(o=>{if(!Ks||!ar(n))return;const a=async c=>{const u=c.target;if(!(!e?.value||!u)){if(Kb(e.value,u)){s.value=!1;return}if(c.target&&!s.value){let p=function(){zb(fR,t,f)};const f={originalEvent:c};c.pointerType==="touch"?(r.removeEventListener("click",i.value),i.value=p,r.addEventListener("click",i.value,{once:!0})):p()}else r.removeEventListener("click",i.value);s.value=!1}},l=window.setTimeout(()=>{r.addEventListener("pointerdown",a)},0);o(()=>{window.clearTimeout(l),r.removeEventListener("pointerdown",a),r.removeEventListener("click",i.value)})}),{onPointerDownCapture:()=>{ar(n)&&(s.value=!0)}}}function gR(t,e,n=!0){const r=e?.value?.ownerDocument??globalThis?.document,s=he(!1);return Pi(i=>{if(!Ks||!ar(n))return;const o=async a=>{if(!e?.value)return;await un(),await un();const l=a.target;!e.value||!l||Kb(e.value,l)||a.target&&!s.value&&zb(hR,t,{originalEvent:a})};r.addEventListener("focusin",o),i(()=>r.removeEventListener("focusin",o))}),{onFocusCapture:()=>{ar(n)&&(s.value=!0)},onBlurCapture:()=>{ar(n)&&(s.value=!1)}}}const _r=Ws({layersRoot:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set});var mR=Ze({__name:"DismissableLayer",props:{disableOutsidePointerEvents:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","dismiss"],setup(t,{emit:e}){const n=t,r=e,{forwardRef:s,currentElement:i}=ur(),o=Ve(()=>i.value?.ownerDocument??globalThis.document),a=Ve(()=>_r.layersRoot),l=Ve(()=>i.value?Array.from(a.value).indexOf(i.value):-1),c=Ve(()=>_r.layersWithOutsidePointerEventsDisabled.size>0),u=Ve(()=>{const v=Array.from(a.value),[_]=[..._r.layersWithOutsidePointerEventsDisabled].slice(-1),x=v.indexOf(_);return l.value>=x}),f=pR(async v=>{const _=[..._r.branches].some(x=>x?.contains(v.target));!u.value||_||(r("pointerDownOutside",v),r("interactOutside",v),await un(),v.defaultPrevented||r("dismiss"))},i),p=gR(v=>{[..._r.branches].some(x=>x?.contains(v.target))||(r("focusOutside",v),r("interactOutside",v),v.defaultPrevented||r("dismiss"))},i);WT("Escape",v=>{l.value===a.value.size-1&&(r("escapeKeyDown",v),v.defaultPrevented||r("dismiss"))});let m;return Pi(v=>{i.value&&(n.disableOutsidePointerEvents&&(_r.layersWithOutsidePointerEventsDisabled.size===0&&(m=o.value.body.style.pointerEvents,o.value.body.style.pointerEvents="none"),_r.layersWithOutsidePointerEventsDisabled.add(i.value)),a.value.add(i.value),v(()=>{n.disableOutsidePointerEvents&&_r.layersWithOutsidePointerEventsDisabled.size===1&&(o.value.body.style.pointerEvents=m)}))}),Pi(v=>{v(()=>{i.value&&(a.value.delete(i.value),_r.layersWithOutsidePointerEventsDisabled.delete(i.value))})}),(v,_)=>(U(),en($e(ca),{ref:$e(s),"as-child":v.asChild,as:v.as,"data-dismissable-layer":"",style:En({pointerEvents:c.value?u.value?"auto":"none":void 0}),onFocusCapture:$e(p).onFocusCapture,onBlurCapture:$e(p).onBlurCapture,onPointerdownCapture:$e(f).onPointerDownCapture},{default:st(()=>[xn(v.$slots,"default")]),_:3},8,["as-child","as","style","onFocusCapture","onBlurCapture","onPointerdownCapture"]))}}),yR=mR;const vR=TT(()=>he([]));function bR(){const t=vR();return{add(e){const n=t.value[0];e!==n&&n?.pause(),t.value=_m(t.value,e),t.value.unshift(e)},remove(e){t.value=_m(t.value,e),t.value[0]?.resume()}}}function _m(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function _R(t){return t.filter(e=>e.tagName!=="A")}const Vu="focusScope.autoFocusOnMount",Hu="focusScope.autoFocusOnUnmount",wm={bubbles:!1,cancelable:!0};function wR(t,{select:e=!1}={}){const n=ts();for(const r of t)if(Wr(r,{select:e}),ts()!==n)return!0}function xR(t){const e=Yb(t),n=xm(e,t),r=xm(e.reverse(),t);return[n,r]}function Yb(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function xm(t,e){for(const n of t)if(!kR(n,{upTo:e}))return n}function kR(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function CR(t){return t instanceof HTMLInputElement&&"select"in t}function Wr(t,{select:e=!1}={}){if(t&&t.focus){const n=ts();t.focus({preventScroll:!0}),t!==n&&CR(t)&&e&&t.select()}}var SR=Ze({__name:"FocusScope",props:{loop:{type:Boolean,required:!1,default:!1},trapped:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["mountAutoFocus","unmountAutoFocus"],setup(t,{emit:e}){const n=t,r=e,{currentRef:s,currentElement:i}=ur(),o=he(null),a=bR(),l=Ws({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}});Pi(u=>{if(!Ks)return;const f=i.value;if(!n.trapped)return;function p(x){if(l.paused||!f)return;const C=x.target;f.contains(C)?o.value=C:Wr(o.value,{select:!0})}function m(x){if(l.paused||!f)return;const C=x.relatedTarget;C!==null&&(f.contains(C)||Wr(o.value,{select:!0}))}function v(x){f.contains(o.value)||Wr(f)}document.addEventListener("focusin",p),document.addEventListener("focusout",m);const _=new MutationObserver(v);f&&_.observe(f,{childList:!0,subtree:!0}),u(()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",m),_.disconnect()})}),Pi(async u=>{const f=i.value;if(await un(),!f)return;a.add(l);const p=ts();if(!f.contains(p)){const v=new CustomEvent(Vu,wm);f.addEventListener(Vu,_=>r("mountAutoFocus",_)),f.dispatchEvent(v),v.defaultPrevented||(wR(_R(Yb(f)),{select:!0}),ts()===p&&Wr(f))}u(()=>{f.removeEventListener(Vu,x=>r("mountAutoFocus",x));const v=new CustomEvent(Hu,wm),_=x=>{r("unmountAutoFocus",x)};f.addEventListener(Hu,_),f.dispatchEvent(v),setTimeout(()=>{v.defaultPrevented||Wr(p??document.body,{select:!0}),f.removeEventListener(Hu,_),a.remove(l)},0)})});function c(u){if(!n.loop&&!n.trapped||l.paused)return;const f=u.key==="Tab"&&!u.altKey&&!u.ctrlKey&&!u.metaKey,p=ts();if(f&&p){const m=u.currentTarget,[v,_]=xR(m);v&&_?!u.shiftKey&&p===_?(u.preventDefault(),n.loop&&Wr(v,{select:!0})):u.shiftKey&&p===v&&(u.preventDefault(),n.loop&&Wr(_,{select:!0})):p===m&&u.preventDefault()}}return(u,f)=>(U(),en($e(ca),{ref_key:"currentRef",ref:s,tabindex:"-1","as-child":u.asChild,as:u.as,onKeydown:c},{default:st(()=>[xn(u.$slots,"default")]),_:3},8,["as-child","as"]))}}),PR=SR;function AR(t){return t?"open":"closed"}var IR=Ze({__name:"DialogContentImpl",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const n=t,r=e,s=ls(),{forwardRef:i,currentElement:o}=ur();return s.titleId||=bm(void 0,"reka-dialog-title"),s.descriptionId||=bm(void 0,"reka-dialog-description"),Tn(()=>{s.contentElement=o,ts()!==document.body&&(s.triggerElement.value=ts())}),(a,l)=>(U(),en($e(PR),{"as-child":"",loop:"",trapped:n.trapFocus,onMountAutoFocus:l[5]||(l[5]=c=>r("openAutoFocus",c)),onUnmountAutoFocus:l[6]||(l[6]=c=>r("closeAutoFocus",c))},{default:st(()=>[ze($e(yR),lr({id:$e(s).contentId,ref:$e(i),as:a.as,"as-child":a.asChild,"disable-outside-pointer-events":a.disableOutsidePointerEvents,role:"dialog","aria-describedby":$e(s).descriptionId,"aria-labelledby":$e(s).titleId,"data-state":$e(AR)($e(s).open.value)},a.$attrs,{onDismiss:l[0]||(l[0]=c=>$e(s).onOpenChange(!1)),onEscapeKeyDown:l[1]||(l[1]=c=>r("escapeKeyDown",c)),onFocusOutside:l[2]||(l[2]=c=>r("focusOutside",c)),onInteractOutside:l[3]||(l[3]=c=>r("interactOutside",c)),onPointerDownOutside:l[4]||(l[4]=c=>r("pointerDownOutside",c))}),{default:st(()=>[xn(a.$slots,"default")]),_:3},16,["id","as","as-child","disable-outside-pointer-events","aria-describedby","aria-labelledby","data-state"])]),_:3},8,["trapped"]))}}),Gb=IR,ER=Ze({__name:"DialogContentModal",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const n=t,r=e,s=ls(),i=Pf(r),{forwardRef:o,currentElement:a}=ur();return nR(a),(l,c)=>(U(),en(Gb,lr({...n,...$e(i)},{ref:$e(o),"trap-focus":$e(s).open.value,"disable-outside-pointer-events":!0,onCloseAutoFocus:c[0]||(c[0]=u=>{u.defaultPrevented||(u.preventDefault(),$e(s).triggerElement.value?.focus())}),onPointerDownOutside:c[1]||(c[1]=u=>{const f=u.detail.originalEvent,p=f.button===0&&f.ctrlKey===!0;(f.button===2||p)&&u.preventDefault()}),onFocusOutside:c[2]||(c[2]=u=>{u.preventDefault()})}),{default:st(()=>[xn(l.$slots,"default")]),_:3},16,["trap-focus"]))}}),OR=ER,MR=Ze({__name:"DialogContentNonModal",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const n=t,s=Pf(e);ur();const i=ls(),o=he(!1),a=he(!1);return(l,c)=>(U(),en(Gb,lr({...n,...$e(s)},{"trap-focus":!1,"disable-outside-pointer-events":!1,onCloseAutoFocus:c[0]||(c[0]=u=>{u.defaultPrevented||(o.value||$e(i).triggerElement.value?.focus(),u.preventDefault()),o.value=!1,a.value=!1}),onInteractOutside:c[1]||(c[1]=u=>{u.defaultPrevented||(o.value=!0,u.detail.originalEvent.type==="pointerdown"&&(a.value=!0));const f=u.target;$e(i).triggerElement.value?.contains(f)&&u.preventDefault(),u.detail.originalEvent.type==="focusin"&&a.value&&u.preventDefault()})}),{default:st(()=>[xn(l.$slots,"default")]),_:3},16))}}),DR=MR,TR=Ze({__name:"DialogContent",props:{forceMount:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const n=t,r=e,s=ls(),i=Pf(r),{forwardRef:o}=ur();return(a,l)=>(U(),en($e(Hb),{present:a.forceMount||$e(s).open.value},{default:st(()=>[$e(s).modal.value?(U(),en(OR,lr({key:0,ref:$e(o)},{...n,...$e(i),...a.$attrs}),{default:st(()=>[xn(a.$slots,"default")]),_:3},16)):(U(),en(DR,lr({key:1,ref:$e(o)},{...n,...$e(i),...a.$attrs}),{default:st(()=>[xn(a.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),RR=TR,$R=Ze({__name:"DialogOverlayImpl",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const e=ls();return XT(!0),ur(),(n,r)=>(U(),en($e(ca),{as:n.as,"as-child":n.asChild,"data-state":$e(e).open.value?"open":"closed",style:{"pointer-events":"auto"}},{default:st(()=>[xn(n.$slots,"default")]),_:3},8,["as","as-child","data-state"]))}}),FR=$R,LR=Ze({__name:"DialogOverlay",props:{forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const e=ls(),{forwardRef:n}=ur();return(r,s)=>$e(e)?.modal.value?(U(),en($e(Hb),{key:0,present:r.forceMount||$e(e).open.value},{default:st(()=>[ze(FR,lr(r.$attrs,{ref:$e(n),as:r.as,"as-child":r.asChild}),{default:st(()=>[xn(r.$slots,"default")]),_:3},16,["as","as-child"])]),_:3},8,["present"])):Pe("v-if",!0)}}),BR=LR,jR=Ze({__name:"Teleport",props:{to:{type:null,required:!1,default:"body"},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(t){const e=qT();return(n,r)=>$e(e)||n.forceMount?(U(),en(j0,{key:0,to:n.to,disabled:n.disabled,defer:n.defer},[xn(n.$slots,"default")],8,["to","disabled","defer"])):Pe("v-if",!0)}}),NR=jR,zR=Ze({__name:"DialogPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(t){const e=t;return(n,r)=>(U(),en($e(NR),n0(Yy(e)),{default:st(()=>[xn(n.$slots,"default")]),_:3},16))}}),qR=zR,UR=Ze({__name:"DialogTitle",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"h2"}},setup(t){const e=t,n=ls();return ur(),(r,s)=>(U(),en($e(ca),lr(e,{id:$e(n).titleId}),{default:st(()=>[xn(r.$slots,"default")]),_:3},16,["id"]))}}),WR=UR;/*!
* chartjs-plugin-annotation v3.1.0
* https://www.chartjs.org/chartjs-plugin-annotation/index
 * (c) 2024 chartjs-plugin-annotation Contributors
 * Released under the MIT License
 */const km={modes:{point(t,e){return _l(t,e,{intersect:!0})},nearest(t,e,n){return KR(t,e,n)},x(t,e,n){return _l(t,e,{intersect:n.intersect,axis:"x"})},y(t,e,n){return _l(t,e,{intersect:n.intersect,axis:"y"})}}};function Af(t,e,n){return(km.modes[n.mode]||km.modes.nearest)(t,e,n)}function VR(t,e,n){return n!=="x"&&n!=="y"?t.inRange(e.x,e.y,"x",!0)||t.inRange(e.x,e.y,"y",!0):t.inRange(e.x,e.y,n,!0)}function HR(t,e,n){return n==="x"?{x:t.x,y:e.y}:n==="y"?{x:e.x,y:t.y}:e}function _l(t,e,n){return t.filter(r=>n.intersect?r.inRange(e.x,e.y):VR(r,e,n.axis))}function KR(t,e,n){let r=Number.POSITIVE_INFINITY;return _l(t,e,n).reduce((s,i)=>{const o=i.getCenterPoint(),a=HR(e,o,n.axis),l=Mi(e,a);return l<r?(s=[i],r=l):l===r&&s.push(i),s},[]).sort((s,i)=>s._index-i._index).slice(0,1)}function Ys(t,e,n){const r=Math.cos(n),s=Math.sin(n),i=e.x,o=e.y;return{x:i+r*(t.x-i)-s*(t.y-o),y:o+s*(t.x-i)+r*(t.y-o)}}const YR=(t,e)=>e>t||t.length>e.length&&t.slice(0,e.length)===e,$s=.001,_c=(t,e,n)=>Math.min(n,Math.max(e,t)),Xb=(t,e)=>t.value>=t.start-e&&t.value<=t.end+e;function GR(t,e,n){for(const r of Object.keys(t))t[r]=_c(t[r],e,n);return t}function XR(t,e,n,r){return!t||!e||n<=0?!1:Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)<=Math.pow(n+r,2)}function Qb(t,{x:e,y:n,x2:r,y2:s},i,{borderWidth:o,hitTolerance:a}){const l=(o+a)/2,c=t.x>=e-l-$s&&t.x<=r+l+$s,u=t.y>=n-l-$s&&t.y<=s+l+$s;return i==="x"?c:(i==="y"||c)&&u}function Jb(t,{rect:e,center:n},r,{rotation:s,borderWidth:i,hitTolerance:o}){const a=Ys(t,n,Vt(-s));return Qb(a,e,r,{borderWidth:i,hitTolerance:o})}function Gs(t,e){const{centerX:n,centerY:r}=t.getProps(["centerX","centerY"],e);return{x:n,y:r}}function QR(t,e,n,r=!0){const s=n.split(".");let i=0;for(const o of e.split(".")){const a=s[i++];if(parseInt(o,10)<parseInt(a,10))break;if(YR(a,o)){if(r)throw new Error(`${t} v${n} is not supported. v${e} or newer is required.`);return!1}}return!0}const Zb=t=>typeof t=="string"&&t.endsWith("%"),e_=t=>parseFloat(t)/100,t_=t=>_c(e_(t),0,1),uo=(t,e)=>({x:t,y:e,x2:t,y2:e,width:0,height:0}),JR={box:t=>uo(t.centerX,t.centerY),doughnutLabel:t=>uo(t.centerX,t.centerY),ellipse:t=>({centerX:t.centerX,centerY:t.centerX,radius:0,width:0,height:0}),label:t=>uo(t.centerX,t.centerY),line:t=>uo(t.x,t.y),point:t=>({centerX:t.centerX,centerY:t.centerY,radius:0,width:0,height:0}),polygon:t=>uo(t.centerX,t.centerY)};function If(t,e){return e==="start"?0:e==="end"?t:Zb(e)?t_(e)*t:t/2}function is(t,e,n=!0){return typeof e=="number"?e:Zb(e)?(n?t_(e):e_(e))*t:t}function ZR(t,e){const{x:n,width:r}=t,s=e.textAlign;return s==="center"?n+r/2:s==="end"||s==="right"?n+r:n}function n_(t,e,{borderWidth:n,position:r,xAdjust:s,yAdjust:i},o){const a=Je(o),l=e.width+(a?o.width:0)+n,c=e.height+(a?o.height:0)+n,u=Ef(r),f=Cm(t.x,l,s,u.x),p=Cm(t.y,c,i,u.y);return{x:f,y:p,x2:f+l,y2:p+c,width:l,height:c,centerX:f+l/2,centerY:p+c/2}}function Ef(t,e="center"){return Je(t)?{x:Qe(t.x,e),y:Qe(t.y,e)}:(t=Qe(t,e),{x:t,y:t})}const r_=(t,e)=>t&&t.autoFit&&e<1;function s_(t,e){const n=t.font,r=Ct(n)?n:[n];return r_(t,e)?r.map(function(s){const i=Lt(s);return i.size=Math.floor(s.size*e),i.lineHeight=s.lineHeight,Lt(i)}):r.map(s=>Lt(s))}function i_(t){return t&&(Dn(t.xValue)||Dn(t.yValue))}function Cm(t,e,n=0,r){return t-If(e,r)+n}function Bi(t,e,n){const r=n.init;if(r){if(r===!0)return a_(e,n)}else return;return e2(t,e,n)}function o_(t,e,n){let r=!1;return e.forEach(s=>{wn(t[s])?(r=!0,n[s]=t[s]):Dn(n[s])&&delete n[s]}),r}function a_(t,e){const n=e.type||"line";return JR[n](t)}function e2(t,e,n){const r=pt(n.init,[{chart:t,properties:e,options:n}]);if(r===!0)return a_(e,n);if(Je(r))return r}const Ku=new Map,t2=t=>isNaN(t)||t<=0,n2=t=>t.reduce(function(e,n){return e+=n.string,e},"");function wc(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object HTMLImageElement]"||e==="[object HTMLCanvasElement]"}}function xc(t,{x:e,y:n},r){r&&(t.translate(e,n),t.rotate(Vt(r)),t.translate(-e,-n))}function Or(t,e){if(e&&e.borderWidth)return t.lineCap=e.borderCapStyle||"butt",t.setLineDash(e.borderDash),t.lineDashOffset=e.borderDashOffset,t.lineJoin=e.borderJoinStyle||"miter",t.lineWidth=e.borderWidth,t.strokeStyle=e.borderColor,!0}function ji(t,e){t.shadowColor=e.backgroundShadowColor,t.shadowBlur=e.shadowBlur,t.shadowOffsetX=e.shadowOffsetX,t.shadowOffsetY=e.shadowOffsetY}function kc(t,e){const n=e.content;if(wc(n))return{width:is(n.width,e.width),height:is(n.height,e.height)};const r=s_(e),s=e.textStrokeWidth,i=Ct(n)?n:[n],o=i.join()+n2(r)+s+(t._measureText?"-spriting":"");return Ku.has(o)||Ku.set(o,o2(t,i,r,s)),Ku.get(o)}function l_(t,e,n){const{x:r,y:s,width:i,height:o}=e;t.save(),ji(t,n);const a=Or(t,n);t.fillStyle=n.backgroundColor,t.beginPath(),zl(t,{x:r,y:s,w:i,h:o,radius:GR(xi(n.borderRadius),0,Math.min(i,o)/2)}),t.closePath(),t.fill(),a&&(t.shadowColor=n.borderShadowColor,t.stroke()),t.restore()}function c_(t,e,n,r){const s=n.content;if(wc(s)){t.save(),t.globalAlpha=c2(n.opacity,s.style.opacity),t.drawImage(s,e.x,e.y,e.width,e.height),t.restore();return}const i=Ct(s)?s:[s],o=s_(n,r),a=n.color,l=Ct(a)?a:[a],c=ZR(e,n),u=e.y+n.textStrokeWidth/2;t.save(),t.textBaseline="middle",t.textAlign=n.textAlign,r2(t,n)&&a2(t,{x:c,y:u},i,o),l2(t,{x:c,y:u},i,{fonts:o,colors:l}),t.restore()}function r2(t,e){if(e.textStrokeWidth>0)return t.lineJoin="round",t.miterLimit=2,t.lineWidth=e.textStrokeWidth,t.strokeStyle=e.textStrokeColor,!0}function s2(t,e,n,r){const{radius:s,options:i}=e,o=i.pointStyle,a=i.rotation;let l=(a||0)*af;if(wc(o)){t.save(),t.translate(n,r),t.rotate(l),t.drawImage(o,-o.width/2,-o.height/2,o.width,o.height),t.restore();return}t2(s)||i2(t,{x:n,y:r,radius:s,rotation:a,style:o,rad:l})}function i2(t,{x:e,y:n,radius:r,rotation:s,style:i,rad:o}){let a,l,c,u;switch(t.beginPath(),i){default:t.arc(e,n,r,0,Wt),t.closePath();break;case"triangle":t.moveTo(e+Math.sin(o)*r,n-Math.cos(o)*r),o+=jl,t.lineTo(e+Math.sin(o)*r,n-Math.cos(o)*r),o+=jl,t.lineTo(e+Math.sin(o)*r,n-Math.cos(o)*r),t.closePath();break;case"rectRounded":u=r*.516,c=r-u,a=Math.cos(o+Bn)*c,l=Math.sin(o+Bn)*c,t.arc(e-a,n-l,u,o-ut,o-Zt),t.arc(e+l,n-a,u,o-Zt,o),t.arc(e+a,n+l,u,o,o+Zt),t.arc(e-l,n+a,u,o+Zt,o+ut),t.closePath();break;case"rect":if(!s){c=Math.SQRT1_2*r,t.rect(e-c,n-c,2*c,2*c);break}o+=Bn;case"rectRot":a=Math.cos(o)*r,l=Math.sin(o)*r,t.moveTo(e-a,n-l),t.lineTo(e+l,n-a),t.lineTo(e+a,n+l),t.lineTo(e-l,n+a),t.closePath();break;case"crossRot":o+=Bn;case"cross":a=Math.cos(o)*r,l=Math.sin(o)*r,t.moveTo(e-a,n-l),t.lineTo(e+a,n+l),t.moveTo(e+l,n-a),t.lineTo(e-l,n+a);break;case"star":a=Math.cos(o)*r,l=Math.sin(o)*r,t.moveTo(e-a,n-l),t.lineTo(e+a,n+l),t.moveTo(e+l,n-a),t.lineTo(e-l,n+a),o+=Bn,a=Math.cos(o)*r,l=Math.sin(o)*r,t.moveTo(e-a,n-l),t.lineTo(e+a,n+l),t.moveTo(e+l,n-a),t.lineTo(e-l,n+a);break;case"line":a=Math.cos(o)*r,l=Math.sin(o)*r,t.moveTo(e-a,n-l),t.lineTo(e+a,n+l);break;case"dash":t.moveTo(e,n),t.lineTo(e+Math.cos(o)*r,n+Math.sin(o)*r);break}t.fill()}function o2(t,e,n,r){t.save();const s=e.length;let i=0,o=r;for(let a=0;a<s;a++){const l=n[Math.min(a,n.length-1)];t.font=l.string;const c=e[a];i=Math.max(i,t.measureText(c).width+r),o+=l.lineHeight}return t.restore(),{width:i,height:o}}function a2(t,{x:e,y:n},r,s){t.beginPath();let i=0;r.forEach(function(o,a){const l=s[Math.min(a,s.length-1)],c=l.lineHeight;t.font=l.string,t.strokeText(o,e,n+c/2+i),i+=c}),t.stroke()}function l2(t,{x:e,y:n},r,{fonts:s,colors:i}){let o=0;r.forEach(function(a,l){const c=i[Math.min(l,i.length-1)],u=s[Math.min(l,s.length-1)],f=u.lineHeight;t.beginPath(),t.font=u.string,t.fillStyle=c,t.fillText(a,e,n+f/2+o),o+=f,t.fill()})}function c2(t,e){const n=zs(t)?t:e;return zs(n)?_c(n,0,1):1}const u_=["left","bottom","top","right"];function u2(t,e){const{pointX:n,pointY:r,options:s}=e,i=s.callout,o=i&&i.display&&g2(e,i);if(!o||y2(e,i,o))return;if(t.save(),t.beginPath(),!Or(t,i))return t.restore();const{separatorStart:l,separatorEnd:c}=d2(e,o),{sideStart:u,sideEnd:f}=h2(e,o,l);(i.margin>0||s.borderWidth===0)&&(t.moveTo(l.x,l.y),t.lineTo(c.x,c.y)),t.moveTo(u.x,u.y),t.lineTo(f.x,f.y);const p=Ys({x:n,y:r},e.getCenterPoint(),Vt(-e.rotation));t.lineTo(p.x,p.y),t.stroke(),t.restore()}function d2(t,e){const{x:n,y:r,x2:s,y2:i}=t,o=f2(t,e);let a,l;return e==="left"||e==="right"?(a={x:n+o,y:r},l={x:a.x,y:i}):(a={x:n,y:r+o},l={x:s,y:a.y}),{separatorStart:a,separatorEnd:l}}function f2(t,e){const{width:n,height:r,options:s}=t,i=s.callout.margin+s.borderWidth/2;return e==="right"?n+i:e==="bottom"?r+i:-i}function h2(t,e,n){const{y:r,width:s,height:i,options:o}=t,a=o.callout.start,l=p2(e,o.callout);let c,u;return e==="left"||e==="right"?(c={x:n.x,y:r+is(i,a)},u={x:c.x+l,y:c.y}):(c={x:n.x+is(s,a),y:n.y},u={x:c.x,y:c.y+l}),{sideStart:c,sideEnd:u}}function p2(t,e){const n=e.side;return t==="left"||t==="top"?-n:n}function g2(t,e){const n=e.position;return u_.includes(n)?n:m2(t,e)}function m2(t,e){const{x:n,y:r,x2:s,y2:i,width:o,height:a,pointX:l,pointY:c,centerX:u,centerY:f,rotation:p}=t,m={x:u,y:f},v=e.start,_=is(o,v),x=is(a,v),C=[n,n+_,n+_,s],S=[r+x,i,r,i],P=[];for(let M=0;M<4;M++){const D=Ys({x:C[M],y:S[M]},m,Vt(p));P.push({position:u_[M],distance:Mi(D,{x:l,y:c})})}return P.sort((M,D)=>M.distance-D.distance)[0].position}function y2(t,e,n){const{pointX:r,pointY:s}=t,i=e.margin;let o=r,a=s;return n==="left"?o+=i:n==="right"?o-=i:n==="top"?a+=i:n==="bottom"&&(a-=i),t.inRange(o,a)}const Sm={xScaleID:{min:"xMin",max:"xMax",start:"left",end:"right",startProp:"x",endProp:"x2"},yScaleID:{min:"yMin",max:"yMax",start:"bottom",end:"top",startProp:"y",endProp:"y2"}};function $i(t,e,n){return e=typeof e=="number"?e:t.parse(e),Yt(e)?t.getPixelForValue(e):n}function Us(t,e,n){const r=e[n];if(r||n==="scaleID")return r;const s=n.charAt(0),i=Object.values(t).filter(o=>o.axis&&o.axis===s);return i.length?i[0].id:s}function d_(t,e){if(t){const n=t.options.reverse,r=$i(t,e.min,n?e.end:e.start),s=$i(t,e.max,n?e.start:e.end);return{start:r,end:s}}}function f_(t,e){const{chartArea:n,scales:r}=t,s=r[Us(r,e,"xScaleID")],i=r[Us(r,e,"yScaleID")];let o=n.width/2,a=n.height/2;return s&&(o=$i(s,e.xValue,s.left+s.width/2)),i&&(a=$i(i,e.yValue,i.top+i.height/2)),{x:o,y:a}}function Of(t,e){const n=t.scales,r=n[Us(n,e,"xScaleID")],s=n[Us(n,e,"yScaleID")];if(!r&&!s)return{};let{left:i,right:o}=r||t.chartArea,{top:a,bottom:l}=s||t.chartArea;const c=Pm(r,{min:e.xMin,max:e.xMax,start:i,end:o});i=c.start,o=c.end;const u=Pm(s,{min:e.yMin,max:e.yMax,start:l,end:a});return a=u.start,l=u.end,{x:i,y:a,x2:o,y2:l,width:o-i,height:l-a,centerX:i+(o-i)/2,centerY:a+(l-a)/2}}function h_(t,e){if(!i_(e)){const n=Of(t,e);let r=e.radius;(!r||isNaN(r))&&(r=Math.min(n.width,n.height)/2,e.radius=r);const s=r*2,i=n.centerX+e.xAdjust,o=n.centerY+e.yAdjust;return{x:i-r,y:o-r,x2:i+r,y2:o+r,centerX:i,centerY:o,width:s,height:s,radius:r}}return b2(t,e)}function v2(t,e){const{scales:n,chartArea:r}=t,s=n[e.scaleID],i={x:r.left,y:r.top,x2:r.right,y2:r.bottom};return s?_2(s,i,e):w2(n,i,e),i}function p_(t,e){const n=Of(t,e);return n.initProperties=Bi(t,n,e),n.elements=[{type:"label",optionScope:"label",properties:C2(t,n,e),initProperties:n.initProperties}],n}function b2(t,e){const n=f_(t,e),r=e.radius*2;return{x:n.x-e.radius+e.xAdjust,y:n.y-e.radius+e.yAdjust,x2:n.x+e.radius+e.xAdjust,y2:n.y+e.radius+e.yAdjust,centerX:n.x+e.xAdjust,centerY:n.y+e.yAdjust,radius:e.radius,width:r,height:r}}function Pm(t,e){const n=d_(t,e)||e;return{start:Math.min(n.start,n.end),end:Math.max(n.start,n.end)}}function _2(t,e,n){const r=$i(t,n.value,NaN),s=$i(t,n.endValue,r);t.isHorizontal()?(e.x=r,e.x2=s):(e.y=r,e.y2=s)}function w2(t,e,n){for(const r of Object.keys(Sm)){const s=t[Us(t,n,r)];if(s){const{min:i,max:o,start:a,end:l,startProp:c,endProp:u}=Sm[r],f=d_(s,{min:n[i],max:n[o],start:s[a],end:s[l]});e[c]=f.start,e[u]=f.end}}}function x2({properties:t,options:e},n,r,s){const{x:i,x2:o,width:a}=t;return g_({start:i,end:o,borderWidth:e.borderWidth},{position:r.x,padding:{start:s.left,end:s.right},adjust:e.label.xAdjust,size:n.width})}function k2({properties:t,options:e},n,r,s){const{y:i,y2:o,height:a}=t;return g_({start:i,end:o,borderWidth:e.borderWidth},{position:r.y,padding:{start:s.top,end:s.bottom},adjust:e.label.yAdjust,size:n.height})}function g_(t,e){const{start:n,end:r,borderWidth:s}=t,{position:i,padding:{start:o,end:a},adjust:l}=e,c=r-s-n-o-a-e.size;return n+s/2+l+If(c,i)}function C2(t,e,n){const r=n.label;r.backgroundColor="transparent",r.callout.display=!1;const s=Ef(r.position),i=dn(r.padding),o=kc(t.ctx,r),a=x2({properties:e,options:n},o,s,i),l=k2({properties:e,options:n},o,s,i),c=o.width+i.width,u=o.height+i.height;return{x:a,y:l,x2:a+c,y2:l+u,width:c,height:u,centerX:a+c/2,centerY:l+u/2,rotation:r.rotation}}const Pd=["enter","leave"],Mf=Pd.concat("click");function S2(t,e,n){e.listened=o_(n,Mf,e.listeners),e.moveListened=!1,Pd.forEach(r=>{wn(n[r])&&(e.moveListened=!0)}),(!e.listened||!e.moveListened)&&e.annotations.forEach(r=>{!e.listened&&wn(r.click)&&(e.listened=!0),e.moveListened||Pd.forEach(s=>{wn(r[s])&&(e.listened=!0,e.moveListened=!0)})})}function P2(t,e,n){if(t.listened)switch(e.type){case"mousemove":case"mouseout":return A2(t,e,n);case"click":return I2(t,e,n)}}function A2(t,e,n){if(!t.moveListened)return;let r;e.type==="mousemove"?r=Af(t.visibleElements,e,n.interaction):r=[];const s=t.hovered;t.hovered=r;const i={state:t,event:e};let o=Am(i,"leave",s,r);return Am(i,"enter",r,s)||o}function Am({state:t,event:e},n,r,s){let i;for(const o of r)s.indexOf(o)<0&&(i=m_(o.options[n]||t.listeners[n],o,e)||i);return i}function I2(t,e,n){const r=t.listeners,s=Af(t.visibleElements,e,n.interaction);let i;for(const o of s)i=m_(o.options.click||r.click,o,e)||i;return i}function m_(t,e,n){return pt(t,[e.$context,n])===!0}const Kl=["afterDraw","beforeDraw"];function E2(t,e,n){const r=e.visibleElements;e.hooked=o_(n,Kl,e.hooks),e.hooked||r.forEach(s=>{e.hooked||Kl.forEach(i=>{wn(s.options[i])&&(e.hooked=!0)})})}function Im(t,e,n){if(t.hooked){const r=e.options[n]||t.hooks[n];return pt(r,[e.$context])}}function O2(t,e,n){const r=$2(t.scales,e,n);let s=Em(e,r,"min","suggestedMin");s=Em(e,r,"max","suggestedMax")||s,s&&wn(e.handleTickRangeOptions)&&e.handleTickRangeOptions()}function M2(t,e){for(const n of t)T2(n,e)}function Em(t,e,n,r){if(Yt(e[n])&&!D2(t.options,n,r)){const s=t[n]!==e[n];return t[n]=e[n],s}}function D2(t,e,n){return Dn(t[e])||Dn(t[n])}function T2(t,e){for(const n of["scaleID","xScaleID","yScaleID"]){const r=Us(e,t,n);r&&!e[r]&&R2(t,n)&&console.warn(`No scale found with id '${r}' for annotation '${t.id}'`)}}function R2(t,e){if(e==="scaleID")return!0;const n=e.charAt(0);for(const r of["Min","Max","Value"])if(Dn(t[n+r]))return!0;return!1}function $2(t,e,n){const r=e.axis,s=e.id,i=r+"ScaleID",o={min:Qe(e.min,Number.NEGATIVE_INFINITY),max:Qe(e.max,Number.POSITIVE_INFINITY)};for(const a of n)a.scaleID===s?Om(a,e,["value","endValue"],o):Us(t,a,i)===s&&Om(a,e,[r+"Min",r+"Max",r+"Value"],o);return o}function Om(t,e,n,r){for(const s of n){const i=t[s];if(Dn(i)){const o=e.parse(i);r.min=Math.min(r.min,o),r.max=Math.max(r.max,o)}}}class Ni extends kn{inRange(e,n,r,s){const{x:i,y:o}=Ys({x:e,y:n},this.getCenterPoint(s),Vt(-this.options.rotation));return Qb({x:i,y:o},this.getProps(["x","y","x2","y2"],s),r,this.options)}getCenterPoint(e){return Gs(this,e)}draw(e){e.save(),xc(e,this.getCenterPoint(),this.options.rotation),l_(e,this,this.options),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){return p_(e,n)}}Ni.id="boxAnnotation";Ni.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,hitTolerance:0,label:{backgroundColor:"transparent",borderWidth:0,callout:{display:!1},color:"black",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:void 0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};Ni.defaultRoutes={borderColor:"color",backgroundColor:"color"};Ni.descriptors={label:{_fallback:!0}};class Cc extends kn{inRange(e,n,r,s){return Jb({x:e,y:n},{rect:this.getProps(["x","y","x2","y2"],s),center:this.getCenterPoint(s)},r,{rotation:this.rotation,borderWidth:0,hitTolerance:this.options.hitTolerance})}getCenterPoint(e){return Gs(this,e)}draw(e){const n=this.options;!n.display||!n.content||(z2(e,this),e.save(),xc(e,this.getCenterPoint(),this.rotation),c_(e,this,n,this._fitRatio),e.restore())}resolveElementProperties(e,n){const r=F2(e,n);if(!r)return{};const{controllerMeta:s,point:i,radius:o}=B2(e,n,r);let a=kc(e.ctx,n);const l=j2(a,o);r_(n,l)&&(a={width:a.width*l,height:a.height*l});const{position:c,xAdjust:u,yAdjust:f}=n,p=n_(i,a,{borderWidth:0,position:c,xAdjust:u,yAdjust:f});return{initProperties:Bi(e,p,n),...p,...s,rotation:n.rotation,_fitRatio:l}}}Cc.id="doughnutLabelAnnotation";Cc.defaults={autoFit:!0,autoHide:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderColor:"transparent",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:0,color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,spacing:1,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0};Cc.defaultRoutes={};function F2(t,e){return t.getSortedVisibleDatasetMetas().reduce(function(n,r){const s=r.controller;return s instanceof $S&&L2(t,e,r.data)&&(!n||s.innerRadius<n.controller.innerRadius)&&s.options.circumference>=90?r:n},void 0)}function L2(t,e,n){if(!e.autoHide)return!0;for(let r=0;r<n.length;r++)if(!n[r].hidden&&t.getDataVisibility(r))return!0}function B2({chartArea:t},e,n){const{left:r,top:s,right:i,bottom:o}=t,{innerRadius:a,offsetX:l,offsetY:c}=n.controller,u=(r+i)/2+l,f=(s+o)/2+c,p={left:Math.max(u-a,r),right:Math.min(u+a,i),top:Math.max(f-a,s),bottom:Math.min(f+a,o)},m={x:(p.left+p.right)/2,y:(p.top+p.bottom)/2},v=e.spacing+e.borderWidth/2,_=a-v,x=m.y>f,C=x?s+v:o-v,S=N2(C,u,f,_);return{controllerMeta:{_centerX:u,_centerY:f,_radius:_,_counterclockwise:x,...S},point:m,radius:Math.min(a,Math.min(p.right-p.left,p.bottom-p.top)/2)}}function j2({width:t,height:e},n){const r=Math.sqrt(Math.pow(t,2)+Math.pow(e,2));return n*2/r}function N2(t,e,n,r){const s=Math.pow(n-t,2),i=Math.pow(r,2),o=e*-2,a=Math.pow(e,2)+s-i,l=Math.pow(o,2)-4*a;if(l<=0)return{_startAngle:0,_endAngle:Wt};const c=(-o-Math.sqrt(l))/2,u=(-o+Math.sqrt(l))/2;return{_startAngle:pd({x:e,y:n},{x:c,y:t}).angle,_endAngle:pd({x:e,y:n},{x:u,y:t}).angle}}function z2(t,e){const{_centerX:n,_centerY:r,_radius:s,_startAngle:i,_endAngle:o,_counterclockwise:a,options:l}=e;t.save();const c=Or(t,l);t.fillStyle=l.backgroundColor,t.beginPath(),t.arc(n,r,s,i,o,a),t.closePath(),t.fill(),c&&t.stroke(),t.restore()}class ua extends kn{inRange(e,n,r,s){return Jb({x:e,y:n},{rect:this.getProps(["x","y","x2","y2"],s),center:this.getCenterPoint(s)},r,{rotation:this.rotation,borderWidth:this.options.borderWidth,hitTolerance:this.options.hitTolerance})}getCenterPoint(e){return Gs(this,e)}draw(e){const n=this.options,r=!Dn(this._visible)||this._visible;!n.display||!n.content||!r||(e.save(),xc(e,this.getCenterPoint(),this.rotation),u2(e,this),l_(e,this,n),c_(e,q2(this),n),e.restore())}resolveElementProperties(e,n){let r;if(i_(n))r=f_(e,n);else{const{centerX:a,centerY:l}=Of(e,n);r={x:a,y:l}}const s=dn(n.padding),i=kc(e.ctx,n),o=n_(r,i,n,s);return{initProperties:Bi(e,o,n),pointX:r.x,pointY:r.y,...o,rotation:n.rotation}}}ua.id="labelAnnotation";ua.defaults={adjustScaleRange:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:0,callout:{borderCapStyle:"butt",borderColor:void 0,borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:1,display:!1,margin:5,position:"auto",side:5,start:"50%"},color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};ua.defaultRoutes={borderColor:"color"};function q2({x:t,y:e,width:n,height:r,options:s}){const i=s.borderWidth/2,o=dn(s.padding);return{x:t+o.left+i,y:e+o.top+i,width:n-o.left-o.right-s.borderWidth,height:r-o.top-o.bottom-s.borderWidth}}const Df=(t,e,n)=>({x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}),Ad=(t,e,n)=>Df(e,n,Math.abs((t-e.y)/(n.y-e.y))).x,Mm=(t,e,n)=>Df(e,n,Math.abs((t-e.x)/(n.x-e.x))).y,yo=t=>t*t,U2=(t,e,{x:n,y:r,x2:s,y2:i},o)=>o==="y"?{start:Math.min(r,i),end:Math.max(r,i),value:e}:{start:Math.min(n,s),end:Math.max(n,s),value:t},Dm=(t,e,n,r)=>(1-r)*(1-r)*t+2*(1-r)*r*e+r*r*n,Id=(t,e,n,r)=>({x:Dm(t.x,e.x,n.x,r),y:Dm(t.y,e.y,n.y,r)}),Tm=(t,e,n,r)=>2*(1-r)*(e-t)+2*r*(n-e),Rm=(t,e,n,r)=>-Math.atan2(Tm(t.x,e.x,n.x,r),Tm(t.y,e.y,n.y,r))+.5*ut;class da extends kn{inRange(e,n,r,s){const i=(this.options.borderWidth+this.options.hitTolerance)/2;if(r!=="x"&&r!=="y"){const o={mouseX:e,mouseY:n},{path:a,ctx:l}=this;if(a){Or(l,this.options),l.lineWidth+=this.options.hitTolerance;const{chart:u}=this.$context,f=e*u.currentDevicePixelRatio,p=n*u.currentDevicePixelRatio,m=l.isPointInStroke(a,f,p)||Ed(this,o,s);return l.restore(),m}const c=yo(i);return K2(this,o,c,s)||Ed(this,o,s)}return W2(this,{mouseX:e,mouseY:n},r,{hitSize:i,useFinalPosition:s})}getCenterPoint(e){return Gs(this,e)}draw(e){const{x:n,y:r,x2:s,y2:i,cp:o,options:a}=this;if(e.save(),!Or(e,a))return e.restore();ji(e,a);const l=Math.sqrt(Math.pow(s-n,2)+Math.pow(i-r,2));if(a.curve&&o)return t$(e,this,o,l),e.restore();const{startOpts:c,endOpts:u,startAdjust:f,endAdjust:p}=y_(this),m=Math.atan2(i-r,s-n);e.translate(n,r),e.rotate(m),e.beginPath(),e.moveTo(0+f,0),e.lineTo(l-p,0),e.shadowColor=a.borderShadowColor,e.stroke(),Od(e,0,f,c),Od(e,l,-p,u),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){const r=v2(e,n),{x:s,y:i,x2:o,y2:a}=r,l=V2(r,e.chartArea),c=l?H2({x:s,y:i},{x:o,y:a},e.chartArea):{x:s,y:i,x2:o,y2:a,width:Math.abs(o-s),height:Math.abs(a-i)};if(c.centerX=(o+s)/2,c.centerY=(a+i)/2,c.initProperties=Bi(e,c,n),n.curve){const f={x:c.x,y:c.y},p={x:c.x2,y:c.y2};c.cp=e$(c,n,Mi(f,p))}const u=Y2(e,c,n.label);return u._visible=l,c.elements=[{type:"label",optionScope:"label",properties:u,initProperties:c.initProperties}],c}}da.id="lineAnnotation";const $m={backgroundColor:void 0,backgroundShadowColor:void 0,borderColor:void 0,borderDash:void 0,borderDashOffset:void 0,borderShadowColor:void 0,borderWidth:void 0,display:void 0,fill:void 0,length:void 0,shadowBlur:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,width:void 0};da.defaults={adjustScaleRange:!0,arrowHeads:{display:!1,end:Object.assign({},$m),fill:!1,length:12,start:Object.assign({},$m),width:6},borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:2,curve:!1,controlPoint:{y:"-50%"},display:!0,endValue:void 0,init:void 0,hitTolerance:0,label:{backgroundColor:"rgba(0,0,0,0.8)",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderColor:"black",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:6,borderShadowColor:"transparent",borderWidth:0,callout:Object.assign({},ua.defaults.callout),color:"#fff",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},scaleID:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,value:void 0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};da.descriptors={arrowHeads:{start:{_fallback:!0},end:{_fallback:!0},_fallback:!0}};da.defaultRoutes={borderColor:"color"};function W2(t,{mouseX:e,mouseY:n},r,{hitSize:s,useFinalPosition:i}){const o=U2(e,n,t.getProps(["x","y","x2","y2"],i),r);return Xb(o,s)||Ed(t,{mouseX:e,mouseY:n},i,r)}function V2({x:t,y:e,x2:n,y2:r},{top:s,right:i,bottom:o,left:a}){return!(t<a&&n<a||t>i&&n>i||e<s&&r<s||e>o&&r>o)}function Fm({x:t,y:e},n,{top:r,right:s,bottom:i,left:o}){return t<o&&(e=Mm(o,{x:t,y:e},n),t=o),t>s&&(e=Mm(s,{x:t,y:e},n),t=s),e<r&&(t=Ad(r,{x:t,y:e},n),e=r),e>i&&(t=Ad(i,{x:t,y:e},n),e=i),{x:t,y:e}}function H2(t,e,n){const{x:r,y:s}=Fm(t,e,n),{x:i,y:o}=Fm(e,t,n);return{x:r,y:s,x2:i,y2:o,width:Math.abs(i-r),height:Math.abs(o-s)}}function K2(t,{mouseX:e,mouseY:n},r=$s,s){const{x:i,y:o,x2:a,y2:l}=t.getProps(["x","y","x2","y2"],s),c=a-i,u=l-o,f=yo(c)+yo(u),p=f===0?-1:((e-i)*c+(n-o)*u)/f;let m,v;return p<0?(m=i,v=o):p>1?(m=a,v=l):(m=i+p*c,v=o+p*u),yo(e-m)+yo(n-v)<=r}function Ed(t,{mouseX:e,mouseY:n},r,s){const i=t.label;return i.options.display&&i.inRange(e,n,s,r)}function Y2(t,e,n){const r=n.borderWidth,s=dn(n.padding),i=kc(t.ctx,n),o=i.width+s.width+r,a=i.height+s.height+r;return X2(e,n,{width:o,height:a,padding:s},t.chartArea)}function G2(t){const{x:e,y:n,x2:r,y2:s}=t,i=Math.atan2(s-n,r-e);return i>ut/2?i-ut:i<ut/-2?i+ut:i}function X2(t,e,n,r){const{width:s,height:i,padding:o}=n,{xAdjust:a,yAdjust:l}=e,c={x:t.x,y:t.y},u={x:t.x2,y:t.y2},f=e.rotation==="auto"?G2(t):Vt(e.rotation),p=Q2(s,i,f),m=J2(t,e,{labelSize:p,padding:o},r),v=t.cp?Id(c,t.cp,u,m):Df(c,u,m),_={size:p.w,min:r.left,max:r.right,padding:o.left},x={size:p.h,min:r.top,max:r.bottom,padding:o.top},C=Bm(v.x,_)+a,S=Bm(v.y,x)+l;return{x:C-s/2,y:S-i/2,x2:C+s/2,y2:S+i/2,centerX:C,centerY:S,pointX:v.x,pointY:v.y,width:s,height:i,rotation:Ov(f)}}function Q2(t,e,n){const r=Math.cos(n),s=Math.sin(n);return{w:Math.abs(t*r)+Math.abs(e*s),h:Math.abs(t*s)+Math.abs(e*r)}}function J2(t,e,n,r){let s;const i=Z2(t,r);return e.position==="start"?s=Lm({w:t.x2-t.x,h:t.y2-t.y},n,e,i):e.position==="end"?s=1-Lm({w:t.x-t.x2,h:t.y-t.y2},n,e,i):s=If(1,e.position),s}function Lm(t,e,n,r){const{labelSize:s,padding:i}=e,o=t.w*r.dx,a=t.h*r.dy,l=o>0&&(s.w/2+i.left-r.x)/o,c=a>0&&(s.h/2+i.top-r.y)/a;return _c(Math.max(l,c),0,.25)}function Z2(t,e){const{x:n,x2:r,y:s,y2:i}=t,o=Math.min(s,i)-e.top,a=Math.min(n,r)-e.left,l=e.bottom-Math.max(s,i),c=e.right-Math.max(n,r);return{x:Math.min(a,c),y:Math.min(o,l),dx:a<=c?1:-1,dy:o<=l?1:-1}}function Bm(t,e){const{size:n,min:r,max:s,padding:i}=e,o=n/2;return n>s-r?(s+r)/2:(r>=t-i-o&&(t=r+i+o),s<=t+i+o&&(t=s-i-o),t)}function y_(t){const e=t.options,n=e.arrowHeads&&e.arrowHeads.start,r=e.arrowHeads&&e.arrowHeads.end;return{startOpts:n,endOpts:r,startAdjust:jm(t,n),endAdjust:jm(t,r)}}function jm(t,e){if(!e||!e.display)return 0;const{length:n,width:r}=e,s=t.options.borderWidth/2,i={x:n,y:r+s};return Math.abs(Ad(0,i,{x:0,y:s}))}function Od(t,e,n,r){if(!r||!r.display)return;const{length:s,width:i,fill:o,backgroundColor:a,borderColor:l}=r,c=Math.abs(e-s)+n;t.beginPath(),ji(t,r),Or(t,r),t.moveTo(c,-i),t.lineTo(e+n,0),t.lineTo(c,i),o===!0?(t.fillStyle=a||l,t.closePath(),t.fill(),t.shadowColor="transparent"):t.shadowColor=r.borderShadowColor,t.stroke()}function e$(t,e,n){const{x:r,y:s,x2:i,y2:o,centerX:a,centerY:l}=t,c=Math.atan2(o-s,i-r),u=Ef(e.controlPoint,0),f={x:a+is(n,u.x,!1),y:l+is(n,u.y,!1)};return Ys(f,{x:a,y:l},c)}function Nm(t,{x:e,y:n},{angle:r,adjust:s},i){!i||!i.display||(t.save(),t.translate(e,n),t.rotate(r),Od(t,0,-s,i),t.restore())}function t$(t,e,n,r){const{x:s,y:i,x2:o,y2:a,options:l}=e,{startOpts:c,endOpts:u,startAdjust:f,endAdjust:p}=y_(e),m={x:s,y:i},v={x:o,y:a},_=Rm(m,n,v,0),x=Rm(m,n,v,1)-ut,C=Id(m,n,v,f/r),S=Id(m,n,v,1-p/r),P=new Path2D;t.beginPath(),P.moveTo(C.x,C.y),P.quadraticCurveTo(n.x,n.y,S.x,S.y),t.shadowColor=l.borderShadowColor,t.stroke(P),e.path=P,e.ctx=t,Nm(t,C,{angle:_,adjust:f},c),Nm(t,S,{angle:x,adjust:p},u)}class fa extends kn{inRange(e,n,r,s){const i=this.options.rotation,o=(this.options.borderWidth+this.options.hitTolerance)/2;if(r!=="x"&&r!=="y")return n$({x:e,y:n},this.getProps(["width","height","centerX","centerY"],s),i,o);const{x:a,y:l,x2:c,y2:u}=this.getProps(["x","y","x2","y2"],s),f=r==="y"?{start:l,end:u}:{start:a,end:c},p=Ys({x:e,y:n},this.getCenterPoint(s),Vt(-i));return p[r]>=f.start-o-$s&&p[r]<=f.end+o+$s}getCenterPoint(e){return Gs(this,e)}draw(e){const{width:n,height:r,centerX:s,centerY:i,options:o}=this;e.save(),xc(e,this.getCenterPoint(),o.rotation),ji(e,this.options),e.beginPath(),e.fillStyle=o.backgroundColor;const a=Or(e,o);e.ellipse(s,i,r/2,n/2,ut/2,0,2*ut),e.fill(),a&&(e.shadowColor=o.borderShadowColor,e.stroke()),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){return p_(e,n)}}fa.id="ellipseAnnotation";fa.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,label:Object.assign({},Ni.defaults.label),rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};fa.defaultRoutes={borderColor:"color",backgroundColor:"color"};fa.descriptors={label:{_fallback:!0}};function n$(t,e,n,r){const{width:s,height:i,centerX:o,centerY:a}=e,l=s/2,c=i/2;if(l<=0||c<=0)return!1;const u=Vt(n||0),f=Math.cos(u),p=Math.sin(u),m=Math.pow(f*(t.x-o)+p*(t.y-a),2),v=Math.pow(p*(t.x-o)-f*(t.y-a),2);return m/Math.pow(l+r,2)+v/Math.pow(c+r,2)<=1.0001}class Sc extends kn{inRange(e,n,r,s){const{x:i,y:o,x2:a,y2:l,width:c}=this.getProps(["x","y","x2","y2","width"],s),u=(this.options.borderWidth+this.options.hitTolerance)/2;return r!=="x"&&r!=="y"?XR({x:e,y:n},this.getCenterPoint(s),c/2,u):Xb(r==="y"?{start:o,end:l,value:n}:{start:i,end:a,value:e},u)}getCenterPoint(e){return Gs(this,e)}draw(e){const n=this.options,r=n.borderWidth;if(n.radius<.1)return;e.save(),e.fillStyle=n.backgroundColor,ji(e,n);const s=Or(e,n);s2(e,this,this.centerX,this.centerY),s&&!wc(n.pointStyle)&&(e.shadowColor=n.borderShadowColor,e.stroke()),e.restore(),n.borderWidth=r}resolveElementProperties(e,n){const r=h_(e,n);return r.initProperties=Bi(e,r,n),r}}Sc.id="pointAnnotation";Sc.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,pointStyle:"circle",radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};Sc.defaultRoutes={borderColor:"color",backgroundColor:"color"};class Pc extends kn{inRange(e,n,r,s){if(r!=="x"&&r!=="y")return this.options.radius>=.1&&this.elements.length>1&&s$(this.elements,e,n,s);const i=Ys({x:e,y:n},this.getCenterPoint(s),Vt(-this.options.rotation)),o=this.elements.map(c=>r==="y"?c.bY:c.bX),a=Math.min(...o),l=Math.max(...o);return i[r]>=a&&i[r]<=l}getCenterPoint(e){return Gs(this,e)}draw(e){const{elements:n,options:r}=this;e.save(),e.beginPath(),e.fillStyle=r.backgroundColor,ji(e,r);const s=Or(e,r);let i=!0;for(const o of n)i?(e.moveTo(o.x,o.y),i=!1):e.lineTo(o.x,o.y);e.closePath(),e.fill(),s&&(e.shadowColor=r.borderShadowColor,e.stroke()),e.restore()}resolveElementProperties(e,n){const r=h_(e,n),{sides:s,rotation:i}=n,o=[],a=2*ut/s;let l=i*af;for(let c=0;c<s;c++,l+=a){const u=r$(r,n,l);u.initProperties=Bi(e,r,n),o.push(u)}return r.elements=o,r}}Pc.id="polygonAnnotation";Pc.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,point:{radius:0},radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,sides:3,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};Pc.defaultRoutes={borderColor:"color",backgroundColor:"color"};function r$({centerX:t,centerY:e},{radius:n,borderWidth:r,hitTolerance:s},i){const o=(r+s)/2,a=Math.sin(i),l=Math.cos(i),c={x:t+a*n,y:e-l*n};return{type:"point",optionScope:"point",properties:{x:c.x,y:c.y,centerX:c.x,centerY:c.y,bX:t+a*(n+o),bY:e-l*(n+o)}}}function s$(t,e,n,r){let s=!1,i=t[t.length-1].getProps(["bX","bY"],r);for(const o of t){const a=o.getProps(["bX","bY"],r);a.bY>n!=i.bY>n&&e<(i.bX-a.bX)*(n-a.bY)/(i.bY-a.bY)+a.bX&&(s=!s),i=a}return s}const ns={box:Ni,doughnutLabel:Cc,ellipse:fa,label:ua,line:da,point:Sc,polygon:Pc};Object.keys(ns).forEach(t=>{Mt.describe(`elements.${ns[t].id}`,{_fallback:"plugins.annotation.common"})});const i$={update:Object.assign},o$=Mf.concat(Kl),zm=(t,e)=>Je(e)?Dd(t,e):t,Md=t=>t==="color"||t==="font";function Tf(t="line"){return ns[t]?t:(console.warn(`Unknown annotation type: '${t}', defaulting to 'line'`),"line")}function a$(t,e,n,r){const s=c$(t,n.animations,r),i=e.annotations,o=f$(e.elements,i);for(let a=0;a<i.length;a++){const l=i[a],c=v_(o,a,l.type),u=l.setContext(d$(t,c,o,l)),f=c.resolveElementProperties(t,u);f.skip=l$(f),"elements"in f&&(u$(c,f.elements,u,s),delete f.elements),Dn(c.x)||Object.assign(c,f),Object.assign(c,f.initProperties),f.options=b_(u),s.update(c,f)}}function l$(t){return isNaN(t.x)||isNaN(t.y)}function c$(t,e,n){return n==="reset"||n==="none"||n==="resize"?i$:new yf(t,e)}function u$(t,e,n,r){const s=t.elements||(t.elements=[]);s.length=e.length;for(let i=0;i<e.length;i++){const o=e[i],a=o.properties,l=v_(s,i,o.type,o.initProperties),c=n[o.optionScope].override(o);a.options=b_(c),r.update(l,a)}}function v_(t,e,n,r){const s=ns[Tf(n)];let i=t[e];return(!i||!(i instanceof s))&&(i=t[e]=new s,Object.assign(i,r)),i}function b_(t){const e=ns[Tf(t.type)],n={};n.id=t.id,n.type=t.type,n.drawTime=t.drawTime,Object.assign(n,Dd(t,e.defaults),Dd(t,e.defaultRoutes));for(const r of o$)n[r]=t[r];return n}function Dd(t,e){const n={};for(const r of Object.keys(e)){const s=e[r],i=t[r];Md(r)&&Ct(i)?n[r]=i.map(o=>zm(o,s)):n[r]=zm(i,s)}return n}function d$(t,e,n,r){return e.$context||(e.$context=Object.assign(Object.create(t.getContext()),{element:e,get elements(){return n.filter(s=>s&&s.options)},id:r.id,type:"annotation"}))}function f$(t,e){const n=e.length,r=t.length;if(r<n){const s=n-r;t.splice(r,0,...new Array(s))}else r>n&&t.splice(n,r-n);return t}var h$="3.1.0";const Vr=new Map,qm=t=>t.type!=="doughnutLabel",p$=Mf.concat(Kl);var g$={id:"annotation",version:h$,beforeRegister(){QR("chart.js","4.0",es.version)},afterRegister(){es.register(ns)},afterUnregister(){es.unregister(ns)},beforeInit(t){Vr.set(t,{annotations:[],elements:[],visibleElements:[],listeners:{},listened:!1,moveListened:!1,hooks:{},hooked:!1,hovered:[]})},beforeUpdate(t,e,n){const r=Vr.get(t),s=r.annotations=[];let i=n.annotations;Je(i)?Object.keys(i).forEach(o=>{const a=i[o];Je(a)&&(a.id=o,s.push(a))}):Ct(i)&&s.push(...i),M2(s.filter(qm),t.scales)},afterDataLimits(t,e){const n=Vr.get(t);O2(t,e.scale,n.annotations.filter(qm).filter(r=>r.display&&r.adjustScaleRange))},afterUpdate(t,e,n){const r=Vr.get(t);S2(t,r,n),a$(t,r,n,e.mode),r.visibleElements=r.elements.filter(s=>!s.skip&&s.options.display),E2(t,r,n)},beforeDatasetsDraw(t,e,n){fo(t,"beforeDatasetsDraw",n.clip)},afterDatasetsDraw(t,e,n){fo(t,"afterDatasetsDraw",n.clip)},beforeDatasetDraw(t,e,n){fo(t,e.index,n.clip)},beforeDraw(t,e,n){fo(t,"beforeDraw",n.clip)},afterDraw(t,e,n){fo(t,"afterDraw",n.clip)},beforeEvent(t,e,n){const r=Vr.get(t);P2(r,e.event,n)&&(e.changed=!0)},afterDestroy(t){Vr.delete(t)},getAnnotations(t){const e=Vr.get(t);return e?e.elements:[]},_getAnnotationElementsAtEventForMode(t,e,n){return Af(t,e,n)},defaults:{animations:{numbers:{properties:["x","y","x2","y2","width","height","centerX","centerY","pointX","pointY","radius"],type:"number"},colors:{properties:["backgroundColor","borderColor"],type:"color"}},clip:!0,interaction:{mode:void 0,axis:void 0,intersect:void 0},common:{drawTime:"afterDatasetsDraw",init:!1,label:{}}},descriptors:{_indexable:!1,_scriptable:t=>!p$.includes(t)&&t!=="init",annotations:{_allKeys:!1,_fallback:(t,e)=>`elements.${ns[Tf(e.type)].id}`},interaction:{_fallback:!0},common:{label:{_indexable:Md,_fallback:!0},_indexable:Md}},additionalOptionScopes:[""]};function fo(t,e,n){const{ctx:r,chartArea:s}=t,i=Vr.get(t);n&&sa(r,s);const o=m$(i.visibleElements,e).sort((a,l)=>a.element.options.z-l.element.options.z);for(const a of o)y$(r,s,i,a);n&&ia(r)}function m$(t,e){const n=[];for(const r of t)if(r.options.drawTime===e&&n.push({element:r,main:!0}),r.elements&&r.elements.length)for(const s of r.elements)s.options.display&&s.options.drawTime===e&&n.push({element:s});return n}function y$(t,e,n,r){const s=r.element;r.main?(Im(n,s,"beforeDraw"),s.draw(t,e),Im(n,s,"afterDraw")):s.draw(t,e)}const v$={style:{height:"200px"}},b$=Ze({__name:"PriceHistoryChart",props:{pricePoints:{},transactions:{}},setup(t){es.register(gb,mb,ob,oa,fb,pb,ub,g$);const e=t,n={"mtgjson.cardmarket":3,"cardmarket.priceguide":2,scryfall:1},r=Ve(()=>{const o=m=>{try{return new Date(m).toISOString().slice(0,10)}catch{return}},a={nonfoil:{},foil:{}};for(const m of e.pricePoints??[]){const v=m.finish||"nonfoil";if(v==="etched")continue;const _=m.date??(m.asOf?o(m.asOf):void 0);if(!_)continue;const x=n[m.provider??""]??0,C=m.asOf?new Date(m.asOf).getTime():0,S=(m.priceCent??0)/100,P=a[v],M=P[_];(!M||x>M.rank||x===M.rank&&C>M.asOfTs)&&(P[_]={value:S,rank:x,asOfTs:C})}const l=new Set([...Object.keys(a.nonfoil),...Object.keys(a.foil)]),c=Array.from(l).sort((m,v)=>m.localeCompare(v)),u=c.map(m=>a.nonfoil[m]?.value??null),f=c.map(m=>a.foil[m]?.value??null);return{labels:c.map(m=>new Date(m).toLocaleDateString()),nonfoil:u,foil:f}}),s=Ve(()=>({labels:r.value.labels,datasets:[{label:"Regular",backgroundColor:"rgba(13,110,253,0.15)",borderColor:"#0d6efd",pointRadius:0,data:r.value.nonfoil,fill:!1,tension:.2},{label:"Foil",backgroundColor:"rgba(32,201,151,0.15)",borderColor:"#20c997",pointRadius:0,data:r.value.foil,fill:!1,tension:.2}]})),i=Ve(()=>{const o=(e.transactions??[]).map(a=>({type:"line",yMin:new Be(a.unitPrice,a.currency).getDecimal(),yMax:new Be(a.unitPrice,a.currency).getDecimal(),borderColor:/buy/i.test(a.kind)?"green":"red",borderWidth:2,borderDash:[5,5],label:{content:`${a.kind} @ ${new Be(a.unitPrice,a.currency).format("de-DE")}`,enabled:!1}}));return{responsive:!0,maintainAspectRatio:!1,animation:{duration:0},scales:{y:{ticks:{callback(a){return typeof a=="number"?new Be(a*100,"EUR").format("de-DE"):a}}},x:{ticks:{maxRotation:0,autoSkip:!0}}},plugins:{legend:{display:!0},tooltip:{callbacks:{label(a){const l=a.parsed.y;return`${a.dataset.label}: ${new Be(Math.round((l??0)*100),"EUR").format("de-DE")}`}}},annotation:{annotations:o}},elements:{line:{spanGaps:!0}}}});return(o,a)=>(U(),Z("div",null,[w("div",v$,[ze($e(_b),{data:s.value,options:i.value},null,8,["data","options"])])]))}}),_$={class:"card-image-container position-relative overflow-hidden rounded",style:{"padding-bottom":"140%"}},w$={key:1,class:"placeholder-image card-img-top position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center"},x$={class:"card-body"},k$={class:"card-title fs-6 fw-medium mb-1"},C$={class:"card-text small text-muted mb-2"},S$={class:"ms-auto"},P$={key:0,class:"badge rounded-pill bg-primary-subtle text-primary-emphasis"},A$={key:1,class:"badge rounded-pill bg-success-subtle text-success-emphasis"},I$={key:2,class:"small text-muted fst-italic"},E$={key:3,class:"small text-muted fst-italic"},O$={class:"modal-dialog modal-dialog-centered modal-lg"},M$={class:"modal-content glass"},D$={class:"modal-header py-2"},T$={class:"modal-body py-3"},R$={class:"row g-3 align-items-start"},$$={class:"col-lg-5"},F$={class:"card-inner",style:{"padding-bottom":"140%"}},L$={class:"card-front"},B$={key:1,class:"placeholder-image w-100 h-100 rounded-4 position-relative"},j$={class:"card-back"},N$=["src"],z$={class:"row row-cols-2 g-2 small mt-3 mb-0 meta-grid"},q$={class:"col text-end fw-semibold"},U$={class:"col text-end fw-semibold"},W$={class:"col text-end fw-semibold"},V$={class:"col text-end fw-semibold"},H$={class:"col text-end"},K$=["href"],Y$=["href"],G$={key:1,class:"text-muted"},X$={class:"col-lg-7"},Q$={class:"d-flex justify-content-between align-items-center mb-3"},J$={class:"ms-auto d-flex gap-2 align-items-center"},Z$={key:0,class:"badge rounded-pill bg-primary-subtle text-primary-emphasis"},eF={key:1,class:"badge rounded-pill bg-success-subtle text-success-emphasis"},tF={key:2,class:"small text-muted fst-italic"},nF={key:3,class:"small text-muted fst-italic"},rF={key:0,class:"mb-3"},sF={key:1,class:"mb-3"},iF={class:"d-flex gap-3 small"},oF={class:"mt-2 border rounded-3 p-2 small",style:{"max-height":"30vh",overflow:"auto"}},aF={class:"row g-2 align-items-center"},lF={class:"col-6 col-md-3"},cF={class:"fw-medium"},uF={class:"col-6 col-md-3"},dF={class:"fw-medium"},fF={class:"col-6 col-md-3"},hF={class:"fw-medium"},pF={key:0,class:"col-6 col-md-3"},gF={class:"fw-medium"},mF={key:2},yF={class:"mt-2 small",style:{"max-height":"30vh",overflow:"auto"}},vF={class:"flex-grow-1"},bF={class:"fw-medium"},_F={class:"text-muted"},wF={class:"fw-semibold"},xF=Ze({inheritAttrs:!0,__name:"CardComponent",props:{card:{},disableModal:{type:Boolean}},setup(t){const e=tf(),n=Ve(()=>e.getLatestNonfoil(s.card.id)),r=Ve(()=>e.getLatestFoil(s.card.id)),s=t,i=he(!1),o=Ve(()=>e.loadingPrices),a=he([]),l=he([]),c=he([]),u=he(!1),f=he(!1),p=Ve(()=>l.value?[...l.value].sort((A,T)=>new Date(T.happenedAt).getTime()-new Date(A.happenedAt).getTime()):[]),m=Ve(()=>!a.value||a.value.length===0?0:a.value.reduce((A,T)=>{if(!T.disposedAt||T.disposedQuantity&&T.disposedQuantity<T.quantity){const B=T.disposedQuantity?T.quantity-T.disposedQuantity:T.quantity;return A+B}return A},0)),v=async()=>{i.value=!0,await P(),c.value=await e.getPriceHistory(s.card.id)},_=()=>{i.value=!1},x=A=>new Date(A).toLocaleDateString(),C=(A,T)=>new Be(A,T).format("de-DE"),S=A=>{A.target===A.currentTarget&&_()},P=async()=>{try{a.value=await kt.getByCardId(s.card.id),l.value=await Jt.getByCardId(s.card.id)}catch(A){console.error("Error loading card details:",A)}},M=A=>A.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-"),D=A=>A.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-");return(A,T)=>(U(),Z(et,null,[w("div",{class:"card h-100 card-item",onClick:T[0]||(T[0]=B=>!s.disableModal&&v())},[w("div",_$,[A.card.imageUrl?(U(),Z("div",{key:0,class:"card-img-top position-absolute top-0 start-0 w-100 h-100",style:En({backgroundImage:`url(${A.card.imageUrl})`,backgroundSize:"cover",backgroundPosition:"center"})},null,4)):(U(),Z("div",w$,[...T[4]||(T[4]=[w("span",{class:"text-muted"},"Missing Image",-1)])]))]),w("div",x$,[w("h3",k$,oe(A.card.name),1),w("p",C$,oe(A.card.set)+" #"+oe(A.card.number),1),w("div",S$,[n.value?(U(),Z("span",P$," Regular: "+oe(n.value.format("de-DE")),1)):Pe("",!0),r.value?(U(),Z("span",A$," Foil: "+oe(r.value.format("de-DE")),1)):Pe("",!0),!n.value&&!r.value&&o.value?(U(),Z("span",I$," Loading… ")):!n.value&&!r.value?(U(),Z("span",E$," Price unavailable ")):Pe("",!0)])])]),ze($e(cR),{open:i.value,"onUpdate:open":T[3]||(T[3]=B=>i.value=B)},{default:st(()=>[ze($e(qR),null,{default:st(()=>[ze($e(BR),{class:"modal-backdrop fade show"}),ze($e(RR),{class:"modal d-block compact-modal",onClick:S,onEscapeKeyDown:_},{default:st(()=>[w("div",O$,[w("div",M$,[w("div",D$,[ze($e(WR),{class:"modal-title h5 mb-0"},{default:st(()=>[yt(oe(A.card.name),1)]),_:1}),ze($e(dR),{"as-child":""},{default:st(()=>[...T[5]||(T[5]=[w("button",{type:"button",class:"btn-close","aria-label":"Close"},null,-1)])]),_:1})]),w("div",T$,[w("div",R$,[w("div",$$,[w("div",{class:At(["card-flipper position-relative",{"is-flipped":u.value}])},[w("div",F$,[w("div",L$,[A.card.imageUrl?(U(),Z("div",{key:0,class:"w-100 h-100 rounded-4",style:En({backgroundImage:`url(${A.card.imageUrl})`,backgroundSize:"cover",backgroundPosition:"center"})},null,4)):(U(),Z("div",B$,[...T[6]||(T[6]=[w("div",{class:"position-absolute top-50 start-50 translate-middle"},[w("span",{class:"text-muted"},"Missing Image")],-1)])]))]),w("div",j$,[A.card.imageUrlBack?(U(),Z("div",{key:0,class:"w-100 h-100 rounded-4",style:En({backgroundImage:`url(${A.card.imageUrlBack})`,backgroundSize:"cover",backgroundPosition:"center"})},null,4)):Pe("",!0)])]),A.card.layout==="transform"||A.card.layout==="modal_dfc"||A.card.layout==="reversible_card"||A.card.imageUrl&&A.card.imageUrlBack?(U(),Z("button",{key:0,onClick:T[1]||(T[1]=B=>u.value=!u.value),class:"btn btn-sm btn-dark flip-button"}," Flip ")):Pe("",!0)],2),w("img",{src:A.card.imageUrlBack,style:{display:"none"}},null,8,N$),w("dl",z$,[T[7]||(T[7]=w("dt",{class:"col text-muted"},"Set",-1)),w("dd",q$,oe(A.card.set)+" ("+oe(A.card.setCode)+")",1),T[8]||(T[8]=w("dt",{class:"col text-muted"},"Number",-1)),w("dd",U$,"#"+oe(A.card.number),1),T[9]||(T[9]=w("dt",{class:"col text-muted"},"Language",-1)),w("dd",W$,oe(A.card.lang),1),T[10]||(T[10]=w("dt",{class:"col text-muted"},"Finish",-1)),w("dd",V$,oe(A.card.finish),1),T[11]||(T[11]=w("dt",{class:"col text-muted"},"Links",-1)),w("dd",H$,[w("a",{href:`https://scryfall.com/card/${A.card.setCode}/${A.card.number}`,target:"_blank",rel:"noopener noreferrer",class:"link-primary text-decoration-none me-2"}," Scryfall ",8,K$),A.card.cardmarketId?(U(),Z("a",{key:0,href:`https://www.cardmarket.com/en/Magic/Products/Singles/${M(A.card.set)}/${D(A.card.name)}?language=1&minCondition=4`,target:"_blank",rel:"noopener noreferrer",class:"link-warning text-decoration-none"}," Cardmarket ",8,Y$)):(U(),Z("span",G$,"Cardmarket ID missing"))])])]),w("div",X$,[w("div",Q$,[T[12]||(T[12]=w("h3",{class:"h6 mb-0"},"Current Price",-1)),w("div",J$,[n.value?(U(),Z("span",Z$," Regular: "+oe(n.value.format("de-DE")),1)):Pe("",!0),r.value?(U(),Z("span",eF," Foil: "+oe(r.value.format("de-DE")),1)):Pe("",!0),!n.value&&!r.value&&o.value?(U(),Z("span",tF," Loading… ")):!n.value&&!r.value?(U(),Z("span",nF," Price unavailable ")):Pe("",!0)])]),c.value&&c.value.length>0?(U(),Z("div",rF,[T[13]||(T[13]=w("h3",{class:"h6 mb-2"},"Price History",-1)),ze(b$,{"price-points":c.value,transactions:l.value},null,8,["price-points","transactions"])])):Pe("",!0),a.value&&a.value.length?(U(),Z("div",sF,[T[23]||(T[23]=w("h3",{class:"h6 mb-2"},"Your Collection",-1)),w("div",iF,[w("div",null,[T[14]||(T[14]=w("span",{class:"text-muted"},"Lots:",-1)),T[15]||(T[15]=yt()),w("strong",null,oe(a.value.length),1)]),w("div",null,[T[16]||(T[16]=w("span",{class:"text-muted"},"Cards:",-1)),T[17]||(T[17]=yt()),w("strong",null,oe(m.value),1)])]),a.value.length>2?(U(),Z("button",{key:0,class:"btn btn-link btn-sm p-0 mt-1",onClick:T[2]||(T[2]=B=>f.value=!f.value)},oe(f.value?"Hide details":"Show details"),1)):Pe("",!0),Ls(w("div",oF,[(U(!0),Z(et,null,Ft(a.value,B=>(U(),Z("div",{key:B.id,class:"border rounded p-2 mb-2"},[w("div",aF,[w("div",lF,[T[18]||(T[18]=w("span",{class:"text-muted"},"Qty:",-1)),T[19]||(T[19]=yt()),w("span",cF,oe(B.quantity),1)]),w("div",uF,[T[20]||(T[20]=w("span",{class:"text-muted"},"Unit Cost:",-1)),w("span",dF,oe(C(B.unitCost,B.currency||"EUR")),1)]),w("div",fF,[T[21]||(T[21]=w("span",{class:"text-muted"},"Purchased:",-1)),w("span",hF,oe(x(B.purchasedAt)),1)]),B.disposedQuantity?(U(),Z("div",pF,[T[22]||(T[22]=w("span",{class:"text-muted"},"Disposed:",-1)),w("span",gF,oe(B.disposedQuantity),1)])):Pe("",!0)])]))),128))],512),[[Xw,f.value]])])):Pe("",!0),l.value&&l.value.length?(U(),Z("div",mF,[T[24]||(T[24]=w("h3",{class:"h6 mb-2"},"Transaction History",-1)),w("div",yF,[(U(!0),Z(et,null,Ft(p.value,B=>(U(),Z("div",{key:B.id,class:At(["tx-item d-flex align-items-center gap-2 p-2 mb-2 rounded border",{buy:/buy/i.test(B.kind),sell:/sell/i.test(B.kind)}])},[w("span",{class:At(["badge me-1",/buy/i.test(B.kind)?"bg-success-subtle text-success-emphasis":"bg-danger-subtle text-danger-emphasis"])},oe(B.kind),3),w("div",vF,[w("div",bF,oe(x(B.happenedAt)),1),w("div",_F,"Qty: "+oe(B.quantity),1)]),w("div",wF,oe(C(B.unitPrice,B.currency)),1)],2))),128))])])):Pe("",!0)])])])])])]),_:1})]),_:1})]),_:1},8,["open"])],64))}}),__=yn(xF,[["__scopeId","data-v-42efe03c"]]),kF={class:"container py-4"},CF={key:0,class:"text-center py-5"},SF={key:1,class:"text-center py-5"},PF={key:2},AF={class:"d-flex align-items-center justify-content-between mb-3"},IF={class:"d-flex gap-2"},EF={class:"card shadow-sm mb-4"},OF={class:"card-body"},MF={class:"d-flex align-items-start justify-content-between"},DF={class:"w-100"},TF={key:1,class:"d-flex align-items-center flex-nowrap gap-2"},RF={class:"input-group input-group-lg w-auto",style:{"max-width":"480px"}},$F={class:"d-flex flex-wrap align-items-center gap-2 mt-2"},FF={key:0,class:"badge text-uppercase bg-info text-dark"},LF={class:"text-muted"},BF={key:1,class:"text-success d-inline-flex align-items-center"},jF={key:0,class:"alert alert-warning mt-3 py-2 mb-0"},NF={key:0,class:"text-center py-5 text-muted"},zF={key:1,class:"row row-cols-2 row-cols-md-3 row-cols-lg-4 row-cols-xl-5 row-cols-xxl-6 g-3"},qF=["onClick"],UF={key:0,class:"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-success",title:"Face card"},WF={class:"modal-dialog"},VF={class:"modal-content"},HF={class:"modal-body"},KF={class:"mb-0"},YF={class:"modal-footer"},GF=["disabled"],XF=["disabled"],QF={key:0,class:"spinner-border spinner-border-sm me-1",role:"status","aria-hidden":"true"},JF={key:4,class:"modal-backdrop fade show"},ZF="https://placehold.co/200x280?text=Card+Image",eL=Ze({__name:"DeckDetailView",setup(t){const e=ef(),n=yv(),r=he(null),s=he([]),i=he({}),o=he(!0),a=he(!1),l=he(""),c=he(null),u=he(!1),f=he(!1),p=he(!1),m=Ve(()=>r.value?.faceCardId?_(r.value.faceCardId):null),v=V=>V?new Date(V).toLocaleDateString():"—",_=V=>i.value[V]||{id:V,name:"Unknown Card",set:"Unknown Set",setCode:"???",number:"???",lang:"en",finish:"nonfoil",imageUrl:ZF},x=()=>{r.value&&(a.value=!0,l.value=r.value.name,un(()=>{c.value?.focus(),c.value?.select()}))},C=async()=>{if(!r.value){a.value=!1;return}const V=l.value.trim();if(!V||V===r.value.name){a.value=!1;return}try{await fe().decks.update(r.value.id,{name:V}),r.value.name=V}catch(z){console.error("Error updating deck title:",z),alert("Failed to update deck title. Please try again.")}finally{a.value=!1}},S=()=>{a.value=!1,l.value=r.value?.name??""},P=()=>{u.value=!u.value},M=async V=>{await D(V),u.value=!1},D=async V=>{if(r.value)try{await fe().decks.update(r.value.id,{faceCardId:V}),r.value.faceCardId=V}catch(z){console.error("Error updating face card:",z),alert("Failed to update face card. Please try again.")}},A=async()=>{if(r.value)try{await fe().decks.update(r.value.id,{faceCardId:void 0}),r.value.faceCardId=void 0}catch(V){console.error("Error clearing face card:",V),alert("Failed to clear face card. Please try again.")}},T=()=>{f.value=!0},B=()=>{p.value||(f.value=!1)},E=async()=>{if(!(!r.value||p.value)){p.value=!0;try{const V=fe();await V.deck_cards.where("deckId").equals(r.value.id).delete(),await V.decks.delete(r.value.id),B(),n.push("/decks")}catch(V){console.error("Error deleting deck:",V),alert("Failed to delete deck. Please try again.")}finally{p.value=!1}}};return Tn(async()=>{try{const V=e.params.id,z=fe(),pe=await z.decks.get(V);if(!pe)return;r.value=pe,l.value=pe.name;const me=await z.deck_cards.where("deckId").equals(V).toArray();s.value=me;const Ce=me.map(we=>we.cardId).filter(Boolean);if(Ce.length){const we=await z.cards.where("id").anyOf(Ce).toArray();i.value=Object.fromEntries(we.map(xe=>[xe.id,xe]))}}catch(V){console.error("Error loading deck:",V)}finally{o.value=!1}}),(V,z)=>{const pe=Si("router-link");return U(),Z("div",kF,[o.value?(U(),Z("div",CF,[...z[1]||(z[1]=[w("div",{class:"spinner-border",role:"status","aria-hidden":"true"},null,-1),w("div",{class:"mt-2"},"Loading deck…",-1)])])):r.value?(U(),Z("div",PF,[w("div",AF,[ze(pe,{to:"/decks",class:"btn btn-link px-0"},{default:st(()=>[...z[4]||(z[4]=[yt(" ← Back to Decks ",-1)])]),_:1}),w("div",IF,[w("button",{onClick:P,class:At(["btn",u.value?"btn-glass-warning":"btn-glass-primary"])},oe(u.value?"Cancel Select Mode":"Select Face Card"),3),r.value.faceCardId?(U(),Z("button",{key:0,onClick:A,class:"btn btn-glass-secondary"}," Remove Face Card ")):Pe("",!0),w("button",{onClick:T,class:"btn btn-glass-danger"}," Delete Deck ")])]),w("div",EF,[w("div",OF,[w("div",MF,[w("div",DF,[a.value?(U(),Z("div",TF,[w("div",RF,[Ls(w("input",{ref_key:"titleInput",ref:c,"onUpdate:modelValue":z[0]||(z[0]=me=>l.value=me),onKeyup:[Qh(C,["enter"]),Qh(S,["esc"])],type:"text",class:"form-control",placeholder:"Deck title"},null,544),[[Dl,l.value]]),w("button",{onClick:C,class:"btn btn-glass-primary"},"Save"),w("button",{onClick:S,class:"btn btn-outline-secondary"},"Cancel")])])):(U(),Z("h1",{key:0,onClick:x,class:"h3 mb-2 editable",title:"Click to edit title"},[yt(oe(r.value.name)+" ",1),z[5]||(z[5]=w("span",{class:"ms-2 small text-muted"},"✏️",-1))])),w("div",$F,[r.value.platform?(U(),Z("span",FF,oe(r.value.platform),1)):Pe("",!0),w("small",LF,"Imported: "+oe(v(r.value.importedAt)),1),m.value?(U(),Z("small",BF,[...z[6]||(z[6]=[w("span",{class:"me-1"},"★",-1),yt(" Face card set ",-1)])])):Pe("",!0)])])]),u.value?(U(),Z("div",jF," Select mode is active — click a card below to set it as the face card. ")):Pe("",!0)])]),w("div",null,[z[8]||(z[8]=w("h2",{class:"h5 mb-3"},"Cards in Deck",-1)),s.value.length===0?(U(),Z("div",NF," No cards found in this deck. ")):(U(),Z("div",zF,[(U(!0),Z(et,null,Ft(s.value,me=>(U(),Z("div",{key:me.id,class:"col"},[w("div",{class:At(["position-relative h-100",{"border border-success rounded":me.cardId===r.value.faceCardId,"cursor-pointer":u.value}]),role:"button",onClick:Ce=>u.value?M(me.cardId):null},[ze(__,{card:_(me.cardId),"disable-modal":u.value},null,8,["card","disable-modal"]),me.cardId===r.value.faceCardId?(U(),Z("span",UF,[...z[7]||(z[7]=[yt(" ★ ",-1),w("span",{class:"visually-hidden"},"Face card",-1)])])):Pe("",!0)],10,qF)]))),128))]))])])):(U(),Z("div",SF,[z[3]||(z[3]=w("p",{class:"mb-3"},"Deck not found.",-1)),ze(pe,{to:"/decks",class:"btn btn-outline-secondary"},{default:st(()=>[...z[2]||(z[2]=[yt("← Back to Decks",-1)])]),_:1})])),f.value?(U(),Z("div",{key:3,class:"modal fade show",tabindex:"-1",style:{display:"block"},"aria-modal":"true",role:"dialog","aria-labelledby":"deleteDeckLabel",onClick:pl(B,["self"])},[w("div",WF,[w("div",VF,[w("div",{class:"modal-header"},[z[9]||(z[9]=w("h5",{id:"deleteDeckLabel",class:"modal-title"},"Delete this deck?",-1)),w("button",{type:"button",class:"btn-close","aria-label":"Close",onClick:B})]),w("div",HF,[w("p",KF,[z[10]||(z[10]=yt(" You’re about to delete ",-1)),w("strong",null,oe(r.value?.name),1),z[11]||(z[11]=yt(". This action cannot be undone. ",-1))])]),w("div",YF,[w("button",{class:"btn btn-outline-secondary",disabled:p.value,onClick:B}," Cancel ",8,GF),w("button",{class:"btn btn-danger",disabled:p.value,onClick:E},[p.value?(U(),Z("span",QF)):Pe("",!0),z[12]||(z[12]=yt(" Delete ",-1))],8,XF)])])])])):Pe("",!0),f.value?(U(),Z("div",JF)):Pe("",!0)])}}}),tL=yn(eL,[["__scopeId","data-v-166df857"]]),nL={key:0,class:"pagination-controls"},rL={class:"pagination justify-content-center"},sL=["onClick"],iL={class:"pagination-info text-center mt-2"},oL=Ze({__name:"PaginationComponent",props:{currentPage:{},totalItems:{},itemsPerPage:{},maxVisiblePages:{}},emits:["update:currentPage"],setup(t,{emit:e}){const n=t,r=e,s=Ve(()=>Math.ceil(n.totalItems/n.itemsPerPage)),i=Ve(()=>n.maxVisiblePages||5),o=Ve(()=>{const u=[],f=Math.floor(i.value/2);let p=Math.max(1,n.currentPage-f),m=Math.min(s.value,p+i.value-1);m-p+1<i.value&&(p=Math.max(1,m-i.value+1));for(let v=p;v<=m;v++)u.push(v);return u}),a=Ve(()=>(n.currentPage-1)*n.itemsPerPage),l=Ve(()=>n.currentPage*n.itemsPerPage),c=u=>{u>=1&&u<=s.value&&u!==n.currentPage&&r("update:currentPage",u)};return(u,f)=>s.value>1?(U(),Z("nav",nL,[w("ul",rL,[w("li",{class:At(["page-item",{disabled:u.currentPage===1}])},[w("a",{class:"page-link",href:"#",onClick:f[0]||(f[0]=pl(p=>c(u.currentPage-1),["prevent"]))},"Previous")],2),(U(!0),Z(et,null,Ft(o.value,p=>(U(),Z("li",{key:p,class:At(["page-item",{active:p===u.currentPage}])},[w("a",{class:"page-link",href:"#",onClick:pl(m=>c(p),["prevent"])},oe(p),9,sL)],2))),128)),w("li",{class:At(["page-item",{disabled:u.currentPage===s.value}])},[w("a",{class:"page-link",href:"#",onClick:f[1]||(f[1]=pl(p=>c(u.currentPage+1),["prevent"]))},"Next")],2)]),w("div",iL," Showing "+oe(a.value+1)+"-"+oe(Math.min(l.value,u.totalItems))+" of "+oe(u.totalItems)+" items ",1)])):Pe("",!0)}}),aL=yn(oL,[["__scopeId","data-v-7b87ee6f"]]),lL={class:"cards-view"},cL={class:"header"},uL={class:"controls"},dL={class:"search-box"},fL={class:"sort-controls"},hL={class:"page-size-controls"},pL={key:0,class:"loading"},gL={key:1,class:"empty-state"},mL={key:0},yL={key:1},vL={key:2},bL={class:"row g-4"},_L=Ze({__name:"CardsView",setup(t){const e=tf(),n=ef(),r=yv(),s=he(""),i=he("name"),o=he("asc"),a=he(parseInt(n.query.page)||1),l=he(parseInt(n.query.itemsPerPage)||24);Kt(()=>n.query,m=>{a.value=parseInt(m.page)||1,l.value=parseInt(m.itemsPerPage)||24}),Kt([a,l],()=>{const m={};a.value!==1&&(m.page=a.value.toString()),l.value!==24&&(m.itemsPerPage=l.value.toString()),s.value&&(m.search=s.value),i.value!=="name"&&(m.sortBy=i.value),o.value!=="asc"&&(m.sortDirection=o.value),r.replace({query:m})});const c=Ve(()=>{const m=e.getAllCards;if(!s.value)return m;const v=s.value.toLowerCase();return m.filter(_=>_.name.toLowerCase().includes(v)||_.set.toLowerCase().includes(v)||_.number.includes(v))}),u=Ve(()=>{const m=[...c.value];return m.sort((v,_)=>{let x=0;switch(i.value){case"name":x=v.name.localeCompare(_.name);break;case"set":x=v.set.localeCompare(_.set);break;case"price":{const C=e.getCardPrice(v.id)?.getCents()??0,S=e.getCardPrice(_.id)?.getCents()??0;x=C-S}break;case"owned":x=0;break;default:x=v.name.localeCompare(_.name)}return o.value==="asc"?x:-x}),m}),f=Ve(()=>{const m=(a.value-1)*l.value,v=m+l.value;return u.value.slice(m,v)}),p=m=>{a.value=m,window.scrollTo({top:0,behavior:"smooth"})};return Tn(()=>{n.query.search&&(s.value=n.query.search),n.query.sortBy&&(i.value=n.query.sortBy),n.query.sortDirection&&(o.value=n.query.sortDirection),e.loadCards(),setTimeout(()=>{e.loadCardPrices()},0)}),(m,v)=>(U(),Z("div",lL,[w("div",cL,[w("div",uL,[w("div",dL,[Ls(w("input",{"onUpdate:modelValue":v[0]||(v[0]=_=>s.value=_),type:"text",placeholder:"Search cards...",class:"form-control"},null,512),[[Dl,s.value]])]),w("div",fL,[Ls(w("select",{"onUpdate:modelValue":v[1]||(v[1]=_=>i.value=_),class:"form-select"},[...v[4]||(v[4]=[w("option",{value:"name"},"Name",-1),w("option",{value:"set"},"Set",-1),w("option",{value:"price"},"Price",-1),w("option",{value:"owned"},"Owned Quantity",-1)])],512),[[Gh,i.value]]),w("button",{onClick:v[2]||(v[2]=_=>o.value=o.value==="asc"?"desc":"asc"),class:"btn btn-glass-primary"},oe(o.value==="asc"?"↑":"↓"),1)]),w("div",hL,[v[6]||(v[6]=w("label",{for:"itemsPerPage",class:"form-label me-2"},"Items per page:",-1)),Ls(w("select",{id:"itemsPerPage","onUpdate:modelValue":v[3]||(v[3]=_=>l.value=_),class:"form-select",style:{width:"auto"}},[...v[5]||(v[5]=[w("option",{value:12},"12",-1),w("option",{value:24},"24",-1),w("option",{value:48},"48",-1),w("option",{value:96},"96",-1)])],512),[[Gh,l.value]])])])]),$e(e).loading||$e(e).loadingPrices?(U(),Z("div",pL," Loading cards and prices... ")):u.value.length===0?(U(),Z("div",gL,[s.value?(U(),Z("p",mL,"No cards match your search.")):(U(),Z("p",yL,"You don't have any cards in your collection yet."))])):(U(),Z("div",vL,[w("div",bL,[(U(!0),Z(et,null,Ft(f.value,_=>(U(),Z("div",{key:_.id,class:"col-xl-2 col-lg-3 col-md-4 col-sm-6"},[ze(__,{card:_},null,8,["card"])]))),128))]),ze(aL,{"current-page":a.value,"total-items":u.value.length,"items-per-page":l.value,"onUpdate:currentPage":p},null,8,["current-page","total-items","items-per-page"])]))]))}}),wL=yn(_L,[["__scopeId","data-v-9526db4f"]]),xL=[{path:"/",name:"home",component:XI},{path:"/import",component:iE,children:[{path:"",name:"import",redirect:"/import/cardmarket"},{path:"cardmarket",name:"import-cardmarket",component:dM},{path:"mtgjson",name:"import-mtgjson",component:jD},{path:"price-guide",name:"import-price-guide",component:iT},{path:"manabox",name:"import-manabox",component:()=>xv(()=>import("./ManaboxImportView-cB4-0LXN.js"),__vite__mapDeps([0,1]))}]},{path:"/import/deck",name:"deck-import",component:gT},{path:"/decks",name:"decks",component:MT},{path:"/decks/:id",name:"deck-detail",component:tL,props:!0},{path:"/cards",name:"cards",component:wL}],kL=I1({history:r1("/mtg-pwa/"),routes:xL});function CL(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:s,onRegisteredSW:i,onRegisterError:o}=t;let a,l;const c=async(f=!0)=>{await l};async function u(){if("serviceWorker"in navigator){if(a=await xv(async()=>{const{Workbox:f}=await import("./workbox-window.prod.es5-CwtvwXb3.js");return{Workbox:f}},[]).then(({Workbox:f})=>new f("/mtg-pwa/sw.js",{scope:"/mtg-pwa/",type:"classic"})).catch(f=>{o?.(f)}),!a)return;a.addEventListener("activated",f=>{(f.isUpdate||f.isExternal)&&window.location.reload()}),a.addEventListener("installed",f=>{f.isUpdate||r?.()}),a.register({immediate:e}).then(f=>{i?i("/mtg-pwa/sw.js",f):s?.(f)}).catch(f=>{o?.(f)})}}return l=u(),c}CL({immediate:!0,onRegistered(t){console.log("SW registered",t)},onRegisterError(t){console.error("SW registration error",t)}});const w_=kx(fk),SL=$1();w_.use(SL);async function PL(){try{await wp}catch(t){if(t instanceof Error&&t.name==="UpgradeError"&&t.message.includes("Not yet support for changing primary key"))console.warn("Database schema error detected. Attempting to recreate database..."),await Wo.delete("MtgTrackerDb"),await wp;else throw t}w_.use(kL).mount("#app");try{setTimeout(async()=>{await hi.schedulePriceUpdate()},1e3)}catch(t){console.error("Error initializing automatic price updates:",t instanceof Error?t:new Error(String(t)))}}PL();export{nl as I,yn as _,w as a,Pe as b,Z as c,Ze as d,At as n,U as o,he as r,oe as t};
