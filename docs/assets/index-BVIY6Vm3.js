(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();/**
* @vue/shared v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Ia(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const lt={},Kr=[],Cn=()=>{},Yl=()=>!1,Ko=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Sa=e=>e.startsWith("onUpdate:"),kt=Object.assign,Pa=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},ff=Object.prototype.hasOwnProperty,it=(e,t)=>ff.call(e,t),Fe=Array.isArray,Vr=e=>Ns(e)==="[object Map]",Vo=e=>Ns(e)==="[object Set]",Dc=e=>Ns(e)==="[object Date]",je=e=>typeof e=="function",ht=e=>typeof e=="string",cn=e=>typeof e=="symbol",ut=e=>e!==null&&typeof e=="object",Gl=e=>(ut(e)||je(e))&&je(e.then)&&je(e.catch),Jl=Object.prototype.toString,Ns=e=>Jl.call(e),pf=e=>Ns(e).slice(8,-1),Xl=e=>Ns(e)==="[object Object]",Oa=e=>ht(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,gs=Ia(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ho=e=>{const t=Object.create(null);return(n=>t[n]||(t[n]=e(n)))},hf=/-(\w)/g,nn=Ho(e=>e.replace(hf,(t,n)=>n?n.toUpperCase():"")),mf=/\B([A-Z])/g,Ar=Ho(e=>e.replace(mf,"-$1").toLowerCase()),Wo=Ho(e=>e.charAt(0).toUpperCase()+e.slice(1)),xo=Ho(e=>e?`on${Wo(e)}`:""),rr=(e,t)=>!Object.is(e,t),Co=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Zl=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},Oo=e=>{const t=parseFloat(e);return isNaN(t)?e:t},gf=e=>{const t=ht(e)?Number(e):NaN;return isNaN(t)?e:t};let $c;const zo=()=>$c||($c=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Nn(e){if(Fe(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],o=ht(r)?_f(r):Nn(r);if(o)for(const a in o)t[a]=o[a]}return t}else if(ht(e)||ut(e))return e}const yf=/;(?![^(]*\))/g,vf=/:([^]+)/,bf=/\/\*[^]*?\*\//g;function _f(e){const t={};return e.replace(bf,"").split(yf).forEach(n=>{if(n){const r=n.split(vf);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function It(e){let t="";if(ht(e))t=e;else if(Fe(e))for(let n=0;n<e.length;n++){const r=It(e[n]);r&&(t+=r+" ")}else if(ut(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function wf(e){if(!e)return null;let{class:t,style:n}=e;return t&&!ht(t)&&(e.class=It(t)),n&&(e.style=Nn(n)),e}const kf="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",xf=Ia(kf);function eu(e){return!!e||e===""}function Cf(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=Qo(e[r],t[r]);return n}function Qo(e,t){if(e===t)return!0;let n=Dc(e),r=Dc(t);if(n||r)return n&&r?e.getTime()===t.getTime():!1;if(n=cn(e),r=cn(t),n||r)return e===t;if(n=Fe(e),r=Fe(t),n||r)return n&&r?Cf(e,t):!1;if(n=ut(e),r=ut(t),n||r){if(!n||!r)return!1;const o=Object.keys(e).length,a=Object.keys(t).length;if(o!==a)return!1;for(const c in e){const u=e.hasOwnProperty(c),d=t.hasOwnProperty(c);if(u&&!d||!u&&d||!Qo(e[c],t[c]))return!1}}return String(e)===String(t)}function Af(e,t){return e.findIndex(n=>Qo(n,t))}const tu=e=>!!(e&&e.__v_isRef===!0),oe=e=>ht(e)?e:e==null?"":Fe(e)||ut(e)&&(e.toString===Jl||!je(e.toString))?tu(e)?oe(e.value):JSON.stringify(e,nu,2):String(e),nu=(e,t)=>tu(t)?nu(e,t.value):Vr(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,o],a)=>(n[Li(r,a)+" =>"]=o,n),{})}:Vo(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Li(n))}:cn(t)?Li(t):ut(t)&&!Fe(t)&&!Xl(t)?String(t):t,Li=(e,t="")=>{var n;return cn(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Mt;class ru{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Mt,!t&&Mt&&(this.index=(Mt.scopes||(Mt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=Mt;try{return Mt=this,t()}finally{Mt=n}}}on(){++this._on===1&&(this.prevScope=Mt,Mt=this)}off(){this._on>0&&--this._on===0&&(Mt=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function Yo(e){return new ru(e)}function Ra(){return Mt}function su(e,t=!1){Mt&&Mt.cleanups.push(e)}let dt;const ji=new WeakSet;class ou{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Mt&&Mt.active&&Mt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,ji.has(this)&&(ji.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||au(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Tc(this),cu(this);const t=dt,n=an;dt=this,an=!0;try{return this.fn()}finally{lu(this),dt=t,an=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Ta(t);this.deps=this.depsTail=void 0,Tc(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?ji.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){ia(this)&&this.run()}get dirty(){return ia(this)}}let iu=0,ys,vs;function au(e,t=!1){if(e.flags|=8,t){e.next=vs,vs=e;return}e.next=ys,ys=e}function Da(){iu++}function $a(){if(--iu>0)return;if(vs){let t=vs;for(vs=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;ys;){let t=ys;for(ys=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=n}}if(e)throw e}function cu(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function lu(e){let t,n=e.depsTail,r=n;for(;r;){const o=r.prevDep;r.version===-1?(r===n&&(n=o),Ta(r),Ef(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=o}e.deps=t,e.depsTail=n}function ia(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(uu(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function uu(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Ss)||(e.globalVersion=Ss,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!ia(e))))return;e.flags|=2;const t=e.dep,n=dt,r=an;dt=e,an=!0;try{cu(e);const o=e.fn(e._value);(t.version===0||rr(o,e._value))&&(e.flags|=128,e._value=o,t.version++)}catch(o){throw t.version++,o}finally{dt=n,an=r,lu(e),e.flags&=-3}}function Ta(e,t=!1){const{dep:n,prevSub:r,nextSub:o}=e;if(r&&(r.nextSub=o,e.prevSub=void 0),o&&(o.prevSub=r,e.nextSub=void 0),n.subs===e&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let a=n.computed.deps;a;a=a.nextDep)Ta(a,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function Ef(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let an=!0;const du=[];function Ln(){du.push(an),an=!1}function jn(){const e=du.pop();an=e===void 0?!0:e}function Tc(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=dt;dt=void 0;try{t()}finally{dt=n}}}let Ss=0;class If{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Fa{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!dt||!an||dt===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==dt)n=this.activeLink=new If(dt,this),dt.deps?(n.prevDep=dt.depsTail,dt.depsTail.nextDep=n,dt.depsTail=n):dt.deps=dt.depsTail=n,fu(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=dt.depsTail,n.nextDep=void 0,dt.depsTail.nextDep=n,dt.depsTail=n,dt.deps===n&&(dt.deps=r)}return n}trigger(t){this.version++,Ss++,this.notify(t)}notify(t){Da();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{$a()}}}function fu(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)fu(r)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Ro=new WeakMap,xr=Symbol(""),aa=Symbol(""),Ps=Symbol("");function Nt(e,t,n){if(an&&dt){let r=Ro.get(e);r||Ro.set(e,r=new Map);let o=r.get(n);o||(r.set(n,o=new Fa),o.map=r,o.key=n),o.track()}}function Mn(e,t,n,r,o,a){const c=Ro.get(e);if(!c){Ss++;return}const u=d=>{d&&d.trigger()};if(Da(),t==="clear")c.forEach(u);else{const d=Fe(e),h=d&&Oa(n);if(d&&n==="length"){const p=Number(r);c.forEach((g,v)=>{(v==="length"||v===Ps||!cn(v)&&v>=p)&&u(g)})}else switch((n!==void 0||c.has(void 0))&&u(c.get(n)),h&&u(c.get(Ps)),t){case"add":d?h&&u(c.get("length")):(u(c.get(xr)),Vr(e)&&u(c.get(aa)));break;case"delete":d||(u(c.get(xr)),Vr(e)&&u(c.get(aa)));break;case"set":Vr(e)&&u(c.get(xr));break}}$a()}function Sf(e,t){const n=Ro.get(e);return n&&n.get(t)}function Br(e){const t=Ze(e);return t===e?t:(Nt(t,"iterate",Ps),on(e)?t:t.map(Rt))}function Go(e){return Nt(e=Ze(e),"iterate",Ps),e}const Pf={__proto__:null,[Symbol.iterator](){return qi(this,Symbol.iterator,Rt)},concat(...e){return Br(this).concat(...e.map(t=>Fe(t)?Br(t):t))},entries(){return qi(this,"entries",e=>(e[1]=Rt(e[1]),e))},every(e,t){return Dn(this,"every",e,t,void 0,arguments)},filter(e,t){return Dn(this,"filter",e,t,n=>n.map(Rt),arguments)},find(e,t){return Dn(this,"find",e,t,Rt,arguments)},findIndex(e,t){return Dn(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Dn(this,"findLast",e,t,Rt,arguments)},findLastIndex(e,t){return Dn(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Dn(this,"forEach",e,t,void 0,arguments)},includes(...e){return Ui(this,"includes",e)},indexOf(...e){return Ui(this,"indexOf",e)},join(e){return Br(this).join(e)},lastIndexOf(...e){return Ui(this,"lastIndexOf",e)},map(e,t){return Dn(this,"map",e,t,void 0,arguments)},pop(){return ls(this,"pop")},push(...e){return ls(this,"push",e)},reduce(e,...t){return Fc(this,"reduce",e,t)},reduceRight(e,...t){return Fc(this,"reduceRight",e,t)},shift(){return ls(this,"shift")},some(e,t){return Dn(this,"some",e,t,void 0,arguments)},splice(...e){return ls(this,"splice",e)},toReversed(){return Br(this).toReversed()},toSorted(e){return Br(this).toSorted(e)},toSpliced(...e){return Br(this).toSpliced(...e)},unshift(...e){return ls(this,"unshift",e)},values(){return qi(this,"values",Rt)}};function qi(e,t,n){const r=Go(e),o=r[t]();return r!==e&&!on(e)&&(o._next=o.next,o.next=()=>{const a=o._next();return a.value&&(a.value=n(a.value)),a}),o}const Of=Array.prototype;function Dn(e,t,n,r,o,a){const c=Go(e),u=c!==e&&!on(e),d=c[t];if(d!==Of[t]){const g=d.apply(e,a);return u?Rt(g):g}let h=n;c!==e&&(u?h=function(g,v){return n.call(this,Rt(g),v,e)}:n.length>2&&(h=function(g,v){return n.call(this,g,v,e)}));const p=d.call(c,h,r);return u&&o?o(p):p}function Fc(e,t,n,r){const o=Go(e);let a=n;return o!==e&&(on(e)?n.length>3&&(a=function(c,u,d){return n.call(this,c,u,d,e)}):a=function(c,u,d){return n.call(this,c,Rt(u),d,e)}),o[t](a,...r)}function Ui(e,t,n){const r=Ze(e);Nt(r,"iterate",Ps);const o=r[t](...n);return(o===-1||o===!1)&&Na(n[0])?(n[0]=Ze(n[0]),r[t](...n)):o}function ls(e,t,n=[]){Ln(),Da();const r=Ze(e)[t].apply(e,n);return $a(),jn(),r}const Rf=Ia("__proto__,__v_isRef,__isVue"),pu=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(cn));function Df(e){cn(e)||(e=String(e));const t=Ze(this);return Nt(t,"has",e),t.hasOwnProperty(e)}class hu{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,r){if(n==="__v_skip")return t.__v_skip;const o=this._isReadonly,a=this._isShallow;if(n==="__v_isReactive")return!o;if(n==="__v_isReadonly")return o;if(n==="__v_isShallow")return a;if(n==="__v_raw")return r===(o?a?Uf:vu:a?yu:gu).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const c=Fe(t);if(!o){let d;if(c&&(d=Pf[n]))return d;if(n==="hasOwnProperty")return Df}const u=Reflect.get(t,n,_t(t)?t:r);return(cn(n)?pu.has(n):Rf(n))||(o||Nt(t,"get",n),a)?u:_t(u)?c&&Oa(n)?u:u.value:ut(u)?o?_u(u):Er(u):u}}class mu extends hu{constructor(t=!1){super(!1,t)}set(t,n,r,o){let a=t[n];if(!this._isShallow){const d=ir(a);if(!on(r)&&!ir(r)&&(a=Ze(a),r=Ze(r)),!Fe(t)&&_t(a)&&!_t(r))return d||(a.value=r),!0}const c=Fe(t)&&Oa(n)?Number(n)<t.length:it(t,n),u=Reflect.set(t,n,r,_t(t)?t:o);return t===Ze(o)&&(c?rr(r,a)&&Mn(t,"set",n,r):Mn(t,"add",n,r)),u}deleteProperty(t,n){const r=it(t,n);t[n];const o=Reflect.deleteProperty(t,n);return o&&r&&Mn(t,"delete",n,void 0),o}has(t,n){const r=Reflect.has(t,n);return(!cn(n)||!pu.has(n))&&Nt(t,"has",n),r}ownKeys(t){return Nt(t,"iterate",Fe(t)?"length":xr),Reflect.ownKeys(t)}}class $f extends hu{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const Tf=new mu,Ff=new $f,Mf=new mu(!0);const ca=e=>e,ho=e=>Reflect.getPrototypeOf(e);function Bf(e,t,n){return function(...r){const o=this.__v_raw,a=Ze(o),c=Vr(a),u=e==="entries"||e===Symbol.iterator&&c,d=e==="keys"&&c,h=o[e](...r),p=n?ca:t?Do:Rt;return!t&&Nt(a,"iterate",d?aa:xr),{next(){const{value:g,done:v}=h.next();return v?{value:g,done:v}:{value:u?[p(g[0]),p(g[1])]:p(g),done:v}},[Symbol.iterator](){return this}}}}function mo(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Nf(e,t){const n={get(o){const a=this.__v_raw,c=Ze(a),u=Ze(o);e||(rr(o,u)&&Nt(c,"get",o),Nt(c,"get",u));const{has:d}=ho(c),h=t?ca:e?Do:Rt;if(d.call(c,o))return h(a.get(o));if(d.call(c,u))return h(a.get(u));a!==c&&a.get(o)},get size(){const o=this.__v_raw;return!e&&Nt(Ze(o),"iterate",xr),o.size},has(o){const a=this.__v_raw,c=Ze(a),u=Ze(o);return e||(rr(o,u)&&Nt(c,"has",o),Nt(c,"has",u)),o===u?a.has(o):a.has(o)||a.has(u)},forEach(o,a){const c=this,u=c.__v_raw,d=Ze(u),h=t?ca:e?Do:Rt;return!e&&Nt(d,"iterate",xr),u.forEach((p,g)=>o.call(a,h(p),h(g),c))}};return kt(n,e?{add:mo("add"),set:mo("set"),delete:mo("delete"),clear:mo("clear")}:{add(o){!t&&!on(o)&&!ir(o)&&(o=Ze(o));const a=Ze(this);return ho(a).has.call(a,o)||(a.add(o),Mn(a,"add",o,o)),this},set(o,a){!t&&!on(a)&&!ir(a)&&(a=Ze(a));const c=Ze(this),{has:u,get:d}=ho(c);let h=u.call(c,o);h||(o=Ze(o),h=u.call(c,o));const p=d.call(c,o);return c.set(o,a),h?rr(a,p)&&Mn(c,"set",o,a):Mn(c,"add",o,a),this},delete(o){const a=Ze(this),{has:c,get:u}=ho(a);let d=c.call(a,o);d||(o=Ze(o),d=c.call(a,o)),u&&u.call(a,o);const h=a.delete(o);return d&&Mn(a,"delete",o,void 0),h},clear(){const o=Ze(this),a=o.size!==0,c=o.clear();return a&&Mn(o,"clear",void 0,void 0),c}}),["keys","values","entries",Symbol.iterator].forEach(o=>{n[o]=Bf(o,e,t)}),n}function Ma(e,t){const n=Nf(e,t);return(r,o,a)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?r:Reflect.get(it(n,o)&&o in r?n:r,o,a)}const Lf={get:Ma(!1,!1)},jf={get:Ma(!1,!0)},qf={get:Ma(!0,!1)};const gu=new WeakMap,yu=new WeakMap,vu=new WeakMap,Uf=new WeakMap;function Kf(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Vf(e){return e.__v_skip||!Object.isExtensible(e)?0:Kf(pf(e))}function Er(e){return ir(e)?e:Ba(e,!1,Tf,Lf,gu)}function bu(e){return Ba(e,!1,Mf,jf,yu)}function _u(e){return Ba(e,!0,Ff,qf,vu)}function Ba(e,t,n,r,o){if(!ut(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const a=Vf(e);if(a===0)return e;const c=o.get(e);if(c)return c;const u=new Proxy(e,a===2?r:n);return o.set(e,u),u}function sr(e){return ir(e)?sr(e.__v_raw):!!(e&&e.__v_isReactive)}function ir(e){return!!(e&&e.__v_isReadonly)}function on(e){return!!(e&&e.__v_isShallow)}function Na(e){return e?!!e.__v_raw:!1}function Ze(e){const t=e&&e.__v_raw;return t?Ze(t):e}function La(e){return!it(e,"__v_skip")&&Object.isExtensible(e)&&Zl(e,"__v_skip",!0),e}const Rt=e=>ut(e)?Er(e):e,Do=e=>ut(e)?_u(e):e;function _t(e){return e?e.__v_isRef===!0:!1}function Ie(e){return ku(e,!1)}function wu(e){return ku(e,!0)}function ku(e,t){return _t(e)?e:new Hf(e,t)}class Hf{constructor(t,n){this.dep=new Fa,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:Ze(t),this._value=n?t:Rt(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,r=this.__v_isShallow||on(t)||ir(t);t=r?t:Ze(t),rr(t,n)&&(this._rawValue=t,this._value=r?t:Rt(t),this.dep.trigger())}}function Ce(e){return _t(e)?e.value:e}function An(e){return je(e)?e():Ce(e)}const Wf={get:(e,t,n)=>t==="__v_raw"?e:Ce(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const o=e[t];return _t(o)&&!_t(n)?(o.value=n,!0):Reflect.set(e,t,n,r)}};function xu(e){return sr(e)?e:new Proxy(e,Wf)}function ja(e){const t=Fe(e)?new Array(e.length):{};for(const n in e)t[n]=Qf(e,n);return t}class zf{constructor(t,n,r){this._object=t,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return Sf(Ze(this._object),this._key)}}function Qf(e,t,n){const r=e[t];return _t(r)?r:new zf(e,t,n)}class Yf{constructor(t,n,r){this.fn=t,this.setter=n,this._value=void 0,this.dep=new Fa(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ss-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&dt!==this)return au(this,!0),!0}get value(){const t=this.dep.track();return uu(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Gf(e,t,n=!1){let r,o;return je(e)?r=e:(r=e.get,o=e.set),new Yf(r,o,n)}const go={},$o=new WeakMap;let br;function Jf(e,t=!1,n=br){if(n){let r=$o.get(n);r||$o.set(n,r=[]),r.push(e)}}function Xf(e,t,n=lt){const{immediate:r,deep:o,once:a,scheduler:c,augmentJob:u,call:d}=n,h=E=>o?E:on(E)||o===!1||o===0?Bn(E,1):Bn(E);let p,g,v,k,O=!1,j=!1;if(_t(e)?(g=()=>e.value,O=on(e)):sr(e)?(g=()=>h(e),O=!0):Fe(e)?(j=!0,O=e.some(E=>sr(E)||on(E)),g=()=>e.map(E=>{if(_t(E))return E.value;if(sr(E))return h(E);if(je(E))return d?d(E,2):E()})):je(e)?t?g=d?()=>d(e,2):e:g=()=>{if(v){Ln();try{v()}finally{jn()}}const E=br;br=p;try{return d?d(e,3,[k]):e(k)}finally{br=E}}:g=Cn,t&&o){const E=g,re=o===!0?1/0:o;g=()=>Bn(E(),re)}const K=Ra(),q=()=>{p.stop(),K&&K.active&&Pa(K.effects,p)};if(a&&t){const E=t;t=(...re)=>{E(...re),q()}}let V=j?new Array(e.length).fill(go):go;const T=E=>{if(!(!(p.flags&1)||!p.dirty&&!E))if(t){const re=p.run();if(o||O||(j?re.some((le,Ae)=>rr(le,V[Ae])):rr(re,V))){v&&v();const le=br;br=p;try{const Ae=[re,V===go?void 0:j&&V[0]===go?[]:V,k];V=re,d?d(t,3,Ae):t(...Ae)}finally{br=le}}}else p.run()};return u&&u(T),p=new ou(g),p.scheduler=c?()=>c(T,!1):T,k=E=>Jf(E,!1,p),v=p.onStop=()=>{const E=$o.get(p);if(E){if(d)d(E,4);else for(const re of E)re();$o.delete(p)}},t?r?T(!0):V=p.run():c?c(T.bind(null,!0),!0):p.run(),q.pause=p.pause.bind(p),q.resume=p.resume.bind(p),q.stop=q,q}function Bn(e,t=1/0,n){if(t<=0||!ut(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,_t(e))Bn(e.value,t,n);else if(Fe(e))for(let r=0;r<e.length;r++)Bn(e[r],t,n);else if(Vo(e)||Vr(e))e.forEach(r=>{Bn(r,t,n)});else if(Xl(e)){for(const r in e)Bn(e[r],t,n);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&Bn(e[r],t,n)}return e}/**
* @vue/runtime-core v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ls(e,t,n,r){try{return r?e(...r):e()}catch(o){Jo(o,t,n)}}function ln(e,t,n,r){if(je(e)){const o=Ls(e,t,n,r);return o&&Gl(o)&&o.catch(a=>{Jo(a,t,n)}),o}if(Fe(e)){const o=[];for(let a=0;a<e.length;a++)o.push(ln(e[a],t,n,r));return o}}function Jo(e,t,n,r=!0){const o=t?t.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:c}=t&&t.appContext.config||lt;if(t){let u=t.parent;const d=t.proxy,h=`https://vuejs.org/error-reference/#runtime-${n}`;for(;u;){const p=u.ec;if(p){for(let g=0;g<p.length;g++)if(p[g](e,d,h)===!1)return}u=u.parent}if(a){Ln(),Ls(a,null,10,[e,d,h]),jn();return}}Zf(e,n,o,r,c)}function Zf(e,t,n,r=!0,o=!1){if(o)throw e;console.error(e)}const Ht=[];let _n=-1;const Hr=[];let er=null,jr=0;const Cu=Promise.resolve();let To=null;function un(e){const t=To||Cu;return e?t.then(this?e.bind(this):e):t}function ep(e){let t=_n+1,n=Ht.length;for(;t<n;){const r=t+n>>>1,o=Ht[r],a=Os(o);a<e||a===e&&o.flags&2?t=r+1:n=r}return t}function qa(e){if(!(e.flags&1)){const t=Os(e),n=Ht[Ht.length-1];!n||!(e.flags&2)&&t>=Os(n)?Ht.push(e):Ht.splice(ep(t),0,e),e.flags|=1,Au()}}function Au(){To||(To=Cu.then(Iu))}function tp(e){Fe(e)?Hr.push(...e):er&&e.id===-1?er.splice(jr+1,0,e):e.flags&1||(Hr.push(e),e.flags|=1),Au()}function Mc(e,t,n=_n+1){for(;n<Ht.length;n++){const r=Ht[n];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;Ht.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Eu(e){if(Hr.length){const t=[...new Set(Hr)].sort((n,r)=>Os(n)-Os(r));if(Hr.length=0,er){er.push(...t);return}for(er=t,jr=0;jr<er.length;jr++){const n=er[jr];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}er=null,jr=0}}const Os=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Iu(e){try{for(_n=0;_n<Ht.length;_n++){const t=Ht[_n];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Ls(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;_n<Ht.length;_n++){const t=Ht[_n];t&&(t.flags&=-2)}_n=-1,Ht.length=0,Eu(),To=null,(Ht.length||Hr.length)&&Iu()}}let Dt=null,Su=null;function Fo(e){const t=Dt;return Dt=e,Su=e&&e.type.__scopeId||null,t}function rt(e,t=Dt,n){if(!t||e._n)return e;const r=(...o)=>{r._d&&Yc(-1);const a=Fo(t);let c;try{c=e(...o)}finally{Fo(a),r._d&&Yc(1)}return c};return r._n=!0,r._c=!0,r._d=!0,r}function Rs(e,t){if(Dt===null)return e;const n=ni(Dt),r=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[a,c,u,d=lt]=t[o];a&&(je(a)&&(a={mounted:a,updated:a}),a.deep&&Bn(c),r.push({dir:a,instance:n,value:c,oldValue:void 0,arg:u,modifiers:d}))}return e}function mr(e,t,n,r){const o=e.dirs,a=t&&t.dirs;for(let c=0;c<o.length;c++){const u=o[c];a&&(u.oldValue=a[c].value);let d=u.dir[r];d&&(Ln(),ln(d,n,8,[e.el,u,e,t]),jn())}}const Pu=Symbol("_vte"),np=e=>e.__isTeleport,bs=e=>e&&(e.disabled||e.disabled===""),Bc=e=>e&&(e.defer||e.defer===""),Nc=e=>typeof SVGElement<"u"&&e instanceof SVGElement,Lc=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,la=(e,t)=>{const n=e&&e.to;return ht(n)?t?t(n):null:n},Ou={name:"Teleport",__isTeleport:!0,process(e,t,n,r,o,a,c,u,d,h){const{mc:p,pc:g,pbc:v,o:{insert:k,querySelector:O,createText:j,createComment:K}}=h,q=bs(t.props);let{shapeFlag:V,children:T,dynamicChildren:E}=t;if(e==null){const re=t.el=j(""),le=t.anchor=j("");k(re,n,r),k(le,n,r);const Ae=(se,Oe)=>{V&16&&(o&&o.isCE&&(o.ce._teleportTarget=se),p(T,se,Oe,o,a,c,u,d))},Pe=()=>{const se=t.target=la(t.props,O),Oe=Ru(se,t,j,k);se&&(c!=="svg"&&Nc(se)?c="svg":c!=="mathml"&&Lc(se)&&(c="mathml"),q||(Ae(se,Oe),Ao(t,!1)))};q&&(Ae(n,le),Ao(t,!0)),Bc(t.props)?(t.el.__isMounted=!1,Vt(()=>{Pe(),delete t.el.__isMounted},a)):Pe()}else{if(Bc(t.props)&&e.el.__isMounted===!1){Vt(()=>{Ou.process(e,t,n,r,o,a,c,u,d,h)},a);return}t.el=e.el,t.targetStart=e.targetStart;const re=t.anchor=e.anchor,le=t.target=e.target,Ae=t.targetAnchor=e.targetAnchor,Pe=bs(e.props),se=Pe?n:le,Oe=Pe?re:Ae;if(c==="svg"||Nc(le)?c="svg":(c==="mathml"||Lc(le))&&(c="mathml"),E?(v(e.dynamicChildren,E,se,o,a,c,u),Ha(e,t,!0)):d||g(e,t,se,Oe,o,a,c,u,!1),q)Pe?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):yo(t,n,re,h,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const Ue=t.target=la(t.props,O);Ue&&yo(t,Ue,null,h,0)}else Pe&&yo(t,le,Ae,h,1);Ao(t,q)}},remove(e,t,n,{um:r,o:{remove:o}},a){const{shapeFlag:c,children:u,anchor:d,targetStart:h,targetAnchor:p,target:g,props:v}=e;if(g&&(o(h),o(p)),a&&o(d),c&16){const k=a||!bs(v);for(let O=0;O<u.length;O++){const j=u[O];r(j,t,n,k,!!j.dynamicChildren)}}},move:yo,hydrate:rp};function yo(e,t,n,{o:{insert:r},m:o},a=2){a===0&&r(e.targetAnchor,t,n);const{el:c,anchor:u,shapeFlag:d,children:h,props:p}=e,g=a===2;if(g&&r(c,t,n),(!g||bs(p))&&d&16)for(let v=0;v<h.length;v++)o(h[v],t,n,2);g&&r(u,t,n)}function rp(e,t,n,r,o,a,{o:{nextSibling:c,parentNode:u,querySelector:d,insert:h,createText:p}},g){const v=t.target=la(t.props,d);if(v){const k=bs(t.props),O=v._lpa||v.firstChild;if(t.shapeFlag&16)if(k)t.anchor=g(c(e),t,u(e),n,r,o,a),t.targetStart=O,t.targetAnchor=O&&c(O);else{t.anchor=c(e);let j=O;for(;j;){if(j&&j.nodeType===8){if(j.data==="teleport start anchor")t.targetStart=j;else if(j.data==="teleport anchor"){t.targetAnchor=j,v._lpa=t.targetAnchor&&c(t.targetAnchor);break}}j=c(j)}t.targetAnchor||Ru(v,t,p,h),g(O&&c(O),t,v,n,r,o,a)}Ao(t,k)}return t.anchor&&c(t.anchor)}const sp=Ou;function Ao(e,t){const n=e.ctx;if(n&&n.ut){let r,o;for(t?(r=e.el,o=e.anchor):(r=e.targetStart,o=e.targetAnchor);r&&r!==o;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function Ru(e,t,n,r){const o=t.targetStart=n(""),a=t.targetAnchor=n("");return o[Pu]=a,e&&(r(o,e),r(a,e)),a}const _r=Symbol("_leaveCb"),vo=Symbol("_enterCb");function op(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return In(()=>{e.isMounted=!0}),Ua(()=>{e.isUnmounting=!0}),e}const sn=[Function,Array],ip={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:sn,onEnter:sn,onAfterEnter:sn,onEnterCancelled:sn,onBeforeLeave:sn,onLeave:sn,onAfterLeave:sn,onLeaveCancelled:sn,onBeforeAppear:sn,onAppear:sn,onAfterAppear:sn,onAppearCancelled:sn};function ap(e,t){const{leavingVNodes:n}=e;let r=n.get(t.type);return r||(r=Object.create(null),n.set(t.type,r)),r}function ua(e,t,n,r,o){const{appear:a,mode:c,persisted:u=!1,onBeforeEnter:d,onEnter:h,onAfterEnter:p,onEnterCancelled:g,onBeforeLeave:v,onLeave:k,onAfterLeave:O,onLeaveCancelled:j,onBeforeAppear:K,onAppear:q,onAfterAppear:V,onAppearCancelled:T}=t,E=String(e.key),re=ap(n,e),le=(se,Oe)=>{se&&ln(se,r,9,Oe)},Ae=(se,Oe)=>{const Ue=Oe[1];le(se,Oe),Fe(se)?se.every(fe=>fe.length<=1)&&Ue():se.length<=1&&Ue()},Pe={mode:c,persisted:u,beforeEnter(se){let Oe=d;if(!n.isMounted)if(a)Oe=K||d;else return;se[_r]&&se[_r](!0);const Ue=re[E];Ue&&qr(e,Ue)&&Ue.el[_r]&&Ue.el[_r](),le(Oe,[se])},enter(se){let Oe=h,Ue=p,fe=g;if(!n.isMounted)if(a)Oe=q||h,Ue=V||p,fe=T||g;else return;let Se=!1;const qe=se[vo]=st=>{Se||(Se=!0,st?le(fe,[se]):le(Ue,[se]),Pe.delayedLeave&&Pe.delayedLeave(),se[vo]=void 0)};Oe?Ae(Oe,[se,qe]):qe()},leave(se,Oe){const Ue=String(e.key);if(se[vo]&&se[vo](!0),n.isUnmounting)return Oe();le(v,[se]);let fe=!1;const Se=se[_r]=qe=>{fe||(fe=!0,Oe(),qe?le(j,[se]):le(O,[se]),se[_r]=void 0,re[Ue]===e&&delete re[Ue])};re[Ue]=e,k?Ae(k,[se,Se]):Se()},clone(se){return ua(se,t,n,r)}};return Pe}function Ds(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Ds(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Du(e,t=!1,n){let r=[],o=0;for(let a=0;a<e.length;a++){let c=e[a];const u=n==null?c.key:String(n)+String(c.key!=null?c.key:a);c.type===Je?(c.patchFlag&128&&o++,r=r.concat(Du(c.children,t,u))):(t||c.type!==dn)&&r.push(u!=null?ar(c,{key:u}):c)}if(o>1)for(let a=0;a<r.length;a++)r[a].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function ct(e,t){return je(e)?kt({name:e.name},t,{setup:e}):e}function cp(){const e=Sn();return e?(e.appContext.config.idPrefix||"v")+"-"+e.ids[0]+e.ids[1]++:""}function $u(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function _s(e,t,n,r,o=!1){if(Fe(e)){e.forEach((O,j)=>_s(O,t&&(Fe(t)?t[j]:t),n,r,o));return}if(Wr(r)&&!o){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&_s(e,t,n,r.component.subTree);return}const a=r.shapeFlag&4?ni(r.component):r.el,c=o?null:a,{i:u,r:d}=e,h=t&&t.r,p=u.refs===lt?u.refs={}:u.refs,g=u.setupState,v=Ze(g),k=g===lt?Yl:O=>it(v,O);if(h!=null&&h!==d){if(ht(h))p[h]=null,k(h)&&(g[h]=null);else if(_t(h)){h.value=null;const O=t;O.k&&(p[O.k]=null)}}if(je(d))Ls(d,u,12,[c,p]);else{const O=ht(d),j=_t(d);if(O||j){const K=()=>{if(e.f){const q=O?k(d)?g[d]:p[d]:d.value;if(o)Fe(q)&&Pa(q,a);else if(Fe(q))q.includes(a)||q.push(a);else if(O)p[d]=[a],k(d)&&(g[d]=p[d]);else{const V=[a];d.value=V,e.k&&(p[e.k]=V)}}else O?(p[d]=c,k(d)&&(g[d]=c)):j&&(d.value=c,e.k&&(p[e.k]=c))};c?(K.id=-1,Vt(K,n)):K()}}}zo().requestIdleCallback;zo().cancelIdleCallback;const Wr=e=>!!e.type.__asyncLoader,Tu=e=>e.type.__isKeepAlive;function lp(e,t){Fu(e,"a",t)}function up(e,t){Fu(e,"da",t)}function Fu(e,t,n=Lt){const r=e.__wdc||(e.__wdc=()=>{let o=n;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if(Xo(t,r,n),n){let o=n.parent;for(;o&&o.parent;)Tu(o.parent.vnode)&&dp(r,t,n,o),o=o.parent}}function dp(e,t,n,r){const o=Xo(t,e,r,!0);js(()=>{Pa(r[t],o)},n)}function Xo(e,t,n=Lt,r=!1){if(n){const o=n[e]||(n[e]=[]),a=t.__weh||(t.__weh=(...c)=>{Ln();const u=qs(n),d=ln(t,n,e,c);return u(),jn(),d});return r?o.unshift(a):o.push(a),a}}const qn=e=>(t,n=Lt)=>{(!Fs||e==="sp")&&Xo(e,(...r)=>t(...r),n)},fp=qn("bm"),In=qn("m"),pp=qn("bu"),Mu=qn("u"),Ua=qn("bum"),js=qn("um"),hp=qn("sp"),mp=qn("rtg"),gp=qn("rtc");function yp(e,t=Lt){Xo("ec",e,t)}const vp="components";function Zo(e,t){return _p(vp,e,!0,t)||e}const bp=Symbol.for("v-ndc");function _p(e,t,n=!0,r=!1){const o=Dt||Lt;if(o){const a=o.type;{const u=oh(a,!1);if(u&&(u===t||u===nn(t)||u===Wo(nn(t))))return a}const c=jc(o[e]||a[e],t)||jc(o.appContext[e],t);return!c&&r?a:c}}function jc(e,t){return e&&(e[t]||e[nn(t)]||e[Wo(nn(t))])}function Bt(e,t,n,r){let o;const a=n,c=Fe(e);if(c||ht(e)){const u=c&&sr(e);let d=!1,h=!1;u&&(d=!on(e),h=ir(e),e=Go(e)),o=new Array(e.length);for(let p=0,g=e.length;p<g;p++)o[p]=t(d?h?Do(Rt(e[p])):Rt(e[p]):e[p],p,void 0,a)}else if(typeof e=="number"){o=new Array(e);for(let u=0;u<e;u++)o[u]=t(u+1,u,void 0,a)}else if(ut(e))if(e[Symbol.iterator])o=Array.from(e,(u,d)=>t(u,d,void 0,a));else{const u=Object.keys(e);o=new Array(u.length);for(let d=0,h=u.length;d<h;d++){const p=u[d];o[d]=t(e[p],p,d,a)}}else o=[];return o}function Yt(e,t,n={},r,o){if(Dt.ce||Dt.parent&&Wr(Dt.parent)&&Dt.parent.ce)return U(),St(Je,null,[We("slot",n,r)],64);let a=e[t];a&&a._c&&(a._d=!1),U();const c=a&&Bu(a(n)),u=n.key||c&&c.key,d=St(Je,{key:(u&&!cn(u)?u:`_${t}`)+(!c&&r?"_fb":"")},c||[],c&&e._===1?64:-2);return d.scopeId&&(d.slotScopeIds=[d.scopeId+"-s"]),a&&a._c&&(a._d=!0),d}function Bu(e){return e.some(t=>Ts(t)?!(t.type===dn||t.type===Je&&!Bu(t.children)):!0)?e:null}const da=e=>e?nd(e)?ni(e):da(e.parent):null,ws=kt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>da(e.parent),$root:e=>da(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Lu(e),$forceUpdate:e=>e.f||(e.f=()=>{qa(e.update)}),$nextTick:e=>e.n||(e.n=un.bind(e.proxy)),$watch:e=>Up.bind(e)}),Ki=(e,t)=>e!==lt&&!e.__isScriptSetup&&it(e,t),wp={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:r,data:o,props:a,accessCache:c,type:u,appContext:d}=e;let h;if(t[0]!=="$"){const k=c[t];if(k!==void 0)switch(k){case 1:return r[t];case 2:return o[t];case 4:return n[t];case 3:return a[t]}else{if(Ki(r,t))return c[t]=1,r[t];if(o!==lt&&it(o,t))return c[t]=2,o[t];if((h=e.propsOptions[0])&&it(h,t))return c[t]=3,a[t];if(n!==lt&&it(n,t))return c[t]=4,n[t];fa&&(c[t]=0)}}const p=ws[t];let g,v;if(p)return t==="$attrs"&&Nt(e.attrs,"get",""),p(e);if((g=u.__cssModules)&&(g=g[t]))return g;if(n!==lt&&it(n,t))return c[t]=4,n[t];if(v=d.config.globalProperties,it(v,t))return v[t]},set({_:e},t,n){const{data:r,setupState:o,ctx:a}=e;return Ki(o,t)?(o[t]=n,!0):r!==lt&&it(r,t)?(r[t]=n,!0):it(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(a[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:o,propsOptions:a,type:c}},u){let d,h;return!!(n[u]||e!==lt&&u[0]!=="$"&&it(e,u)||Ki(t,u)||(d=a[0])&&it(d,u)||it(r,u)||it(ws,u)||it(o.config.globalProperties,u)||(h=c.__cssModules)&&h[u])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:it(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function qc(e){return Fe(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let fa=!0;function kp(e){const t=Lu(e),n=e.proxy,r=e.ctx;fa=!1,t.beforeCreate&&Uc(t.beforeCreate,e,"bc");const{data:o,computed:a,methods:c,watch:u,provide:d,inject:h,created:p,beforeMount:g,mounted:v,beforeUpdate:k,updated:O,activated:j,deactivated:K,beforeDestroy:q,beforeUnmount:V,destroyed:T,unmounted:E,render:re,renderTracked:le,renderTriggered:Ae,errorCaptured:Pe,serverPrefetch:se,expose:Oe,inheritAttrs:Ue,components:fe,directives:Se,filters:qe}=t;if(h&&xp(h,r,null),c)for(const Be in c){const G=c[Be];je(G)&&(r[Be]=G.bind(n))}if(o){const Be=o.call(n,n);ut(Be)&&(e.data=Er(Be))}if(fa=!0,a)for(const Be in a){const G=a[Be],W=je(G)?G.bind(n,n):je(G.get)?G.get.bind(n,n):Cn,L=!je(G)&&je(G.set)?G.set.bind(n):Cn,Re=et({get:W,set:L});Object.defineProperty(r,Be,{enumerable:!0,configurable:!0,get:()=>Re.value,set:_e=>Re.value=_e})}if(u)for(const Be in u)Nu(u[Be],r,n,Be);if(d){const Be=je(d)?d.call(n):d;Reflect.ownKeys(Be).forEach(G=>{ks(G,Be[G])})}p&&Uc(p,e,"c");function He(Be,G){Fe(G)?G.forEach(W=>Be(W.bind(n))):G&&Be(G.bind(n))}if(He(fp,g),He(In,v),He(pp,k),He(Mu,O),He(lp,j),He(up,K),He(yp,Pe),He(gp,le),He(mp,Ae),He(Ua,V),He(js,E),He(hp,se),Fe(Oe))if(Oe.length){const Be=e.exposed||(e.exposed={});Oe.forEach(G=>{Object.defineProperty(Be,G,{get:()=>n[G],set:W=>n[G]=W,enumerable:!0})})}else e.exposed||(e.exposed={});re&&e.render===Cn&&(e.render=re),Ue!=null&&(e.inheritAttrs=Ue),fe&&(e.components=fe),Se&&(e.directives=Se),se&&$u(e)}function xp(e,t,n=Cn){Fe(e)&&(e=pa(e));for(const r in e){const o=e[r];let a;ut(o)?"default"in o?a=en(o.from||r,o.default,!0):a=en(o.from||r):a=en(o),_t(a)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>a.value,set:c=>a.value=c}):t[r]=a}}function Uc(e,t,n){ln(Fe(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function Nu(e,t,n,r){let o=r.includes(".")?Gu(n,r):()=>n[r];if(ht(e)){const a=t[e];je(a)&&tn(o,a)}else if(je(e))tn(o,e.bind(n));else if(ut(e))if(Fe(e))e.forEach(a=>Nu(a,t,n,r));else{const a=je(e.handler)?e.handler.bind(n):t[e.handler];je(a)&&tn(o,a,e)}}function Lu(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:o,optionsCache:a,config:{optionMergeStrategies:c}}=e.appContext,u=a.get(t);let d;return u?d=u:!o.length&&!n&&!r?d=t:(d={},o.length&&o.forEach(h=>Mo(d,h,c,!0)),Mo(d,t,c)),ut(t)&&a.set(t,d),d}function Mo(e,t,n,r=!1){const{mixins:o,extends:a}=t;a&&Mo(e,a,n,!0),o&&o.forEach(c=>Mo(e,c,n,!0));for(const c in t)if(!(r&&c==="expose")){const u=Cp[c]||n&&n[c];e[c]=u?u(e[c],t[c]):t[c]}return e}const Cp={data:Kc,props:Vc,emits:Vc,methods:ps,computed:ps,beforeCreate:Kt,created:Kt,beforeMount:Kt,mounted:Kt,beforeUpdate:Kt,updated:Kt,beforeDestroy:Kt,beforeUnmount:Kt,destroyed:Kt,unmounted:Kt,activated:Kt,deactivated:Kt,errorCaptured:Kt,serverPrefetch:Kt,components:ps,directives:ps,watch:Ep,provide:Kc,inject:Ap};function Kc(e,t){return t?e?function(){return kt(je(e)?e.call(this,this):e,je(t)?t.call(this,this):t)}:t:e}function Ap(e,t){return ps(pa(e),pa(t))}function pa(e){if(Fe(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Kt(e,t){return e?[...new Set([].concat(e,t))]:t}function ps(e,t){return e?kt(Object.create(null),e,t):t}function Vc(e,t){return e?Fe(e)&&Fe(t)?[...new Set([...e,...t])]:kt(Object.create(null),qc(e),qc(t??{})):t}function Ep(e,t){if(!e)return t;if(!t)return e;const n=kt(Object.create(null),e);for(const r in t)n[r]=Kt(e[r],t[r]);return n}function ju(){return{app:null,config:{isNativeTag:Yl,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Ip=0;function Sp(e,t){return function(r,o=null){je(r)||(r=kt({},r)),o!=null&&!ut(o)&&(o=null);const a=ju(),c=new WeakSet,u=[];let d=!1;const h=a.app={_uid:Ip++,_component:r,_props:o,_container:null,_context:a,_instance:null,version:ah,get config(){return a.config},set config(p){},use(p,...g){return c.has(p)||(p&&je(p.install)?(c.add(p),p.install(h,...g)):je(p)&&(c.add(p),p(h,...g))),h},mixin(p){return a.mixins.includes(p)||a.mixins.push(p),h},component(p,g){return g?(a.components[p]=g,h):a.components[p]},directive(p,g){return g?(a.directives[p]=g,h):a.directives[p]},mount(p,g,v){if(!d){const k=h._ceVNode||We(r,o);return k.appContext=a,v===!0?v="svg":v===!1&&(v=void 0),e(k,p,v),d=!0,h._container=p,p.__vue_app__=h,ni(k.component)}},onUnmount(p){u.push(p)},unmount(){d&&(ln(u,h._instance,16),e(null,h._container),delete h._container.__vue_app__)},provide(p,g){return a.provides[p]=g,h},runWithContext(p){const g=Cr;Cr=h;try{return p()}finally{Cr=g}}};return h}}let Cr=null;function ks(e,t){if(Lt){let n=Lt.provides;const r=Lt.parent&&Lt.parent.provides;r===n&&(n=Lt.provides=Object.create(r)),n[e]=t}}function en(e,t,n=!1){const r=Sn();if(r||Cr){let o=Cr?Cr._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(o&&e in o)return o[e];if(arguments.length>1)return n&&je(t)?t.call(r&&r.proxy):t}}function Pp(){return!!(Sn()||Cr)}const qu={},Uu=()=>Object.create(qu),Ku=e=>Object.getPrototypeOf(e)===qu;function Op(e,t,n,r=!1){const o={},a=Uu();e.propsDefaults=Object.create(null),Vu(e,t,o,a);for(const c in e.propsOptions[0])c in o||(o[c]=void 0);n?e.props=r?o:bu(o):e.type.props?e.props=o:e.props=a,e.attrs=a}function Rp(e,t,n,r){const{props:o,attrs:a,vnode:{patchFlag:c}}=e,u=Ze(o),[d]=e.propsOptions;let h=!1;if((r||c>0)&&!(c&16)){if(c&8){const p=e.vnode.dynamicProps;for(let g=0;g<p.length;g++){let v=p[g];if(ei(e.emitsOptions,v))continue;const k=t[v];if(d)if(it(a,v))k!==a[v]&&(a[v]=k,h=!0);else{const O=nn(v);o[O]=ha(d,u,O,k,e,!1)}else k!==a[v]&&(a[v]=k,h=!0)}}}else{Vu(e,t,o,a)&&(h=!0);let p;for(const g in u)(!t||!it(t,g)&&((p=Ar(g))===g||!it(t,p)))&&(d?n&&(n[g]!==void 0||n[p]!==void 0)&&(o[g]=ha(d,u,g,void 0,e,!0)):delete o[g]);if(a!==u)for(const g in a)(!t||!it(t,g))&&(delete a[g],h=!0)}h&&Mn(e.attrs,"set","")}function Vu(e,t,n,r){const[o,a]=e.propsOptions;let c=!1,u;if(t)for(let d in t){if(gs(d))continue;const h=t[d];let p;o&&it(o,p=nn(d))?!a||!a.includes(p)?n[p]=h:(u||(u={}))[p]=h:ei(e.emitsOptions,d)||(!(d in r)||h!==r[d])&&(r[d]=h,c=!0)}if(a){const d=Ze(n),h=u||lt;for(let p=0;p<a.length;p++){const g=a[p];n[g]=ha(o,d,g,h[g],e,!it(h,g))}}return c}function ha(e,t,n,r,o,a){const c=e[n];if(c!=null){const u=it(c,"default");if(u&&r===void 0){const d=c.default;if(c.type!==Function&&!c.skipFactory&&je(d)){const{propsDefaults:h}=o;if(n in h)r=h[n];else{const p=qs(o);r=h[n]=d.call(null,t),p()}}else r=d;o.ce&&o.ce._setProp(n,r)}c[0]&&(a&&!u?r=!1:c[1]&&(r===""||r===Ar(n))&&(r=!0))}return r}const Dp=new WeakMap;function Hu(e,t,n=!1){const r=n?Dp:t.propsCache,o=r.get(e);if(o)return o;const a=e.props,c={},u=[];let d=!1;if(!je(e)){const p=g=>{d=!0;const[v,k]=Hu(g,t,!0);kt(c,v),k&&u.push(...k)};!n&&t.mixins.length&&t.mixins.forEach(p),e.extends&&p(e.extends),e.mixins&&e.mixins.forEach(p)}if(!a&&!d)return ut(e)&&r.set(e,Kr),Kr;if(Fe(a))for(let p=0;p<a.length;p++){const g=nn(a[p]);Hc(g)&&(c[g]=lt)}else if(a)for(const p in a){const g=nn(p);if(Hc(g)){const v=a[p],k=c[g]=Fe(v)||je(v)?{type:v}:kt({},v),O=k.type;let j=!1,K=!0;if(Fe(O))for(let q=0;q<O.length;++q){const V=O[q],T=je(V)&&V.name;if(T==="Boolean"){j=!0;break}else T==="String"&&(K=!1)}else j=je(O)&&O.name==="Boolean";k[0]=j,k[1]=K,(j||it(k,"default"))&&u.push(g)}}const h=[c,u];return ut(e)&&r.set(e,h),h}function Hc(e){return e[0]!=="$"&&!gs(e)}const Ka=e=>e==="_"||e==="_ctx"||e==="$stable",Va=e=>Fe(e)?e.map(wn):[wn(e)],$p=(e,t,n)=>{if(t._n)return t;const r=rt((...o)=>Va(t(...o)),n);return r._c=!1,r},Wu=(e,t,n)=>{const r=e._ctx;for(const o in e){if(Ka(o))continue;const a=e[o];if(je(a))t[o]=$p(o,a,r);else if(a!=null){const c=Va(a);t[o]=()=>c}}},zu=(e,t)=>{const n=Va(t);e.slots.default=()=>n},Qu=(e,t,n)=>{for(const r in t)(n||!Ka(r))&&(e[r]=t[r])},Tp=(e,t,n)=>{const r=e.slots=Uu();if(e.vnode.shapeFlag&32){const o=t._;o?(Qu(r,t,n),n&&Zl(r,"_",o,!0)):Wu(t,r)}else t&&zu(e,t)},Fp=(e,t,n)=>{const{vnode:r,slots:o}=e;let a=!0,c=lt;if(r.shapeFlag&32){const u=t._;u?n&&u===1?a=!1:Qu(o,t,n):(a=!t.$stable,Wu(t,o)),c=t}else t&&(zu(e,t),c={default:1});if(a)for(const u in o)!Ka(u)&&c[u]==null&&delete o[u]},Vt=Yp;function Mp(e){return Bp(e)}function Bp(e,t){const n=zo();n.__VUE__=!0;const{insert:r,remove:o,patchProp:a,createElement:c,createText:u,createComment:d,setText:h,setElementText:p,parentNode:g,nextSibling:v,setScopeId:k=Cn,insertStaticContent:O}=e,j=(w,A,N,X=null,te=null,ee=null,me=void 0,pe=null,ue=!!A.dynamicChildren)=>{if(w===A)return;w&&!qr(w,A)&&(X=Z(w),_e(w,te,ee,!0),w=null),A.patchFlag===-2&&(ue=!1,A.dynamicChildren=null);const{type:ne,ref:Te,shapeFlag:ge}=A;switch(ne){case ti:K(w,A,N,X);break;case dn:q(w,A,N,X);break;case Hi:w==null&&V(A,N,X,me);break;case Je:fe(w,A,N,X,te,ee,me,pe,ue);break;default:ge&1?re(w,A,N,X,te,ee,me,pe,ue):ge&6?Se(w,A,N,X,te,ee,me,pe,ue):(ge&64||ge&128)&&ne.process(w,A,N,X,te,ee,me,pe,ue,Ee)}Te!=null&&te?_s(Te,w&&w.ref,ee,A||w,!A):Te==null&&w&&w.ref!=null&&_s(w.ref,null,ee,w,!0)},K=(w,A,N,X)=>{if(w==null)r(A.el=u(A.children),N,X);else{const te=A.el=w.el;A.children!==w.children&&h(te,A.children)}},q=(w,A,N,X)=>{w==null?r(A.el=d(A.children||""),N,X):A.el=w.el},V=(w,A,N,X)=>{[w.el,w.anchor]=O(w.children,A,N,X,w.el,w.anchor)},T=({el:w,anchor:A},N,X)=>{let te;for(;w&&w!==A;)te=v(w),r(w,N,X),w=te;r(A,N,X)},E=({el:w,anchor:A})=>{let N;for(;w&&w!==A;)N=v(w),o(w),w=N;o(A)},re=(w,A,N,X,te,ee,me,pe,ue)=>{A.type==="svg"?me="svg":A.type==="math"&&(me="mathml"),w==null?le(A,N,X,te,ee,me,pe,ue):se(w,A,te,ee,me,pe,ue)},le=(w,A,N,X,te,ee,me,pe)=>{let ue,ne;const{props:Te,shapeFlag:ge,transition:De,dirs:Me}=w;if(ue=w.el=c(w.type,ee,Te&&Te.is,Te),ge&8?p(ue,w.children):ge&16&&Pe(w.children,ue,null,X,te,Vi(w,ee),me,pe),Me&&mr(w,null,X,"created"),Ae(ue,w,w.scopeId,me,X),Te){for(const Ye in Te)Ye!=="value"&&!gs(Ye)&&a(ue,Ye,null,Te[Ye],ee,X);"value"in Te&&a(ue,"value",null,Te.value,ee),(ne=Te.onVnodeBeforeMount)&&vn(ne,X,w)}Me&&mr(w,null,X,"beforeMount");const Ke=Np(te,De);Ke&&De.beforeEnter(ue),r(ue,A,N),((ne=Te&&Te.onVnodeMounted)||Ke||Me)&&Vt(()=>{ne&&vn(ne,X,w),Ke&&De.enter(ue),Me&&mr(w,null,X,"mounted")},te)},Ae=(w,A,N,X,te)=>{if(N&&k(w,N),X)for(let ee=0;ee<X.length;ee++)k(w,X[ee]);if(te){let ee=te.subTree;if(A===ee||Xu(ee.type)&&(ee.ssContent===A||ee.ssFallback===A)){const me=te.vnode;Ae(w,me,me.scopeId,me.slotScopeIds,te.parent)}}},Pe=(w,A,N,X,te,ee,me,pe,ue=0)=>{for(let ne=ue;ne<w.length;ne++){const Te=w[ne]=pe?tr(w[ne]):wn(w[ne]);j(null,Te,A,N,X,te,ee,me,pe)}},se=(w,A,N,X,te,ee,me)=>{const pe=A.el=w.el;let{patchFlag:ue,dynamicChildren:ne,dirs:Te}=A;ue|=w.patchFlag&16;const ge=w.props||lt,De=A.props||lt;let Me;if(N&&gr(N,!1),(Me=De.onVnodeBeforeUpdate)&&vn(Me,N,A,w),Te&&mr(A,w,N,"beforeUpdate"),N&&gr(N,!0),(ge.innerHTML&&De.innerHTML==null||ge.textContent&&De.textContent==null)&&p(pe,""),ne?Oe(w.dynamicChildren,ne,pe,N,X,Vi(A,te),ee):me||G(w,A,pe,null,N,X,Vi(A,te),ee,!1),ue>0){if(ue&16)Ue(pe,ge,De,N,te);else if(ue&2&&ge.class!==De.class&&a(pe,"class",null,De.class,te),ue&4&&a(pe,"style",ge.style,De.style,te),ue&8){const Ke=A.dynamicProps;for(let Ye=0;Ye<Ke.length;Ye++){const Xe=Ke[Ye],wt=ge[Xe],xt=De[Xe];(xt!==wt||Xe==="value")&&a(pe,Xe,wt,xt,te,N)}}ue&1&&w.children!==A.children&&p(pe,A.children)}else!me&&ne==null&&Ue(pe,ge,De,N,te);((Me=De.onVnodeUpdated)||Te)&&Vt(()=>{Me&&vn(Me,N,A,w),Te&&mr(A,w,N,"updated")},X)},Oe=(w,A,N,X,te,ee,me)=>{for(let pe=0;pe<A.length;pe++){const ue=w[pe],ne=A[pe],Te=ue.el&&(ue.type===Je||!qr(ue,ne)||ue.shapeFlag&198)?g(ue.el):N;j(ue,ne,Te,null,X,te,ee,me,!0)}},Ue=(w,A,N,X,te)=>{if(A!==N){if(A!==lt)for(const ee in A)!gs(ee)&&!(ee in N)&&a(w,ee,A[ee],null,te,X);for(const ee in N){if(gs(ee))continue;const me=N[ee],pe=A[ee];me!==pe&&ee!=="value"&&a(w,ee,pe,me,te,X)}"value"in N&&a(w,"value",A.value,N.value,te)}},fe=(w,A,N,X,te,ee,me,pe,ue)=>{const ne=A.el=w?w.el:u(""),Te=A.anchor=w?w.anchor:u("");let{patchFlag:ge,dynamicChildren:De,slotScopeIds:Me}=A;Me&&(pe=pe?pe.concat(Me):Me),w==null?(r(ne,N,X),r(Te,N,X),Pe(A.children||[],N,Te,te,ee,me,pe,ue)):ge>0&&ge&64&&De&&w.dynamicChildren?(Oe(w.dynamicChildren,De,N,te,ee,me,pe),(A.key!=null||te&&A===te.subTree)&&Ha(w,A,!0)):G(w,A,N,Te,te,ee,me,pe,ue)},Se=(w,A,N,X,te,ee,me,pe,ue)=>{A.slotScopeIds=pe,w==null?A.shapeFlag&512?te.ctx.activate(A,N,X,me,ue):qe(A,N,X,te,ee,me,ue):st(w,A,ue)},qe=(w,A,N,X,te,ee,me)=>{const pe=w.component=eh(w,X,te);if(Tu(w)&&(pe.ctx.renderer=Ee),th(pe,!1,me),pe.asyncDep){if(te&&te.registerDep(pe,He,me),!w.el){const ue=pe.subTree=We(dn);q(null,ue,A,N),w.placeholder=ue.el}}else He(pe,w,A,N,te,ee,me)},st=(w,A,N)=>{const X=A.component=w.component;if(zp(w,A,N))if(X.asyncDep&&!X.asyncResolved){Be(X,A,N);return}else X.next=A,X.update();else A.el=w.el,X.vnode=A},He=(w,A,N,X,te,ee,me)=>{const pe=()=>{if(w.isMounted){let{next:ge,bu:De,u:Me,parent:Ke,vnode:Ye}=w;{const Ct=Yu(w);if(Ct){ge&&(ge.el=Ye.el,Be(w,ge,me)),Ct.asyncDep.then(()=>{w.isUnmounted||pe()});return}}let Xe=ge,wt;gr(w,!1),ge?(ge.el=Ye.el,Be(w,ge,me)):ge=Ye,De&&Co(De),(wt=ge.props&&ge.props.onVnodeBeforeUpdate)&&vn(wt,Ke,ge,Ye),gr(w,!0);const xt=zc(w),qt=w.subTree;w.subTree=xt,j(qt,xt,g(qt.el),Z(qt),w,te,ee),ge.el=xt.el,Xe===null&&Qp(w,xt.el),Me&&Vt(Me,te),(wt=ge.props&&ge.props.onVnodeUpdated)&&Vt(()=>vn(wt,Ke,ge,Ye),te)}else{let ge;const{el:De,props:Me}=A,{bm:Ke,m:Ye,parent:Xe,root:wt,type:xt}=w,qt=Wr(A);gr(w,!1),Ke&&Co(Ke),!qt&&(ge=Me&&Me.onVnodeBeforeMount)&&vn(ge,Xe,A),gr(w,!0);{wt.ce&&wt.ce._def.shadowRoot!==!1&&wt.ce._injectChildStyle(xt);const Ct=w.subTree=zc(w);j(null,Ct,N,X,w,te,ee),A.el=Ct.el}if(Ye&&Vt(Ye,te),!qt&&(ge=Me&&Me.onVnodeMounted)){const Ct=A;Vt(()=>vn(ge,Xe,Ct),te)}(A.shapeFlag&256||Xe&&Wr(Xe.vnode)&&Xe.vnode.shapeFlag&256)&&w.a&&Vt(w.a,te),w.isMounted=!0,A=N=X=null}};w.scope.on();const ue=w.effect=new ou(pe);w.scope.off();const ne=w.update=ue.run.bind(ue),Te=w.job=ue.runIfDirty.bind(ue);Te.i=w,Te.id=w.uid,ue.scheduler=()=>qa(Te),gr(w,!0),ne()},Be=(w,A,N)=>{A.component=w;const X=w.vnode.props;w.vnode=A,w.next=null,Rp(w,A.props,X,N),Fp(w,A.children,N),Ln(),Mc(w),jn()},G=(w,A,N,X,te,ee,me,pe,ue=!1)=>{const ne=w&&w.children,Te=w?w.shapeFlag:0,ge=A.children,{patchFlag:De,shapeFlag:Me}=A;if(De>0){if(De&128){L(ne,ge,N,X,te,ee,me,pe,ue);return}else if(De&256){W(ne,ge,N,X,te,ee,me,pe,ue);return}}Me&8?(Te&16&&mt(ne,te,ee),ge!==ne&&p(N,ge)):Te&16?Me&16?L(ne,ge,N,X,te,ee,me,pe,ue):mt(ne,te,ee,!0):(Te&8&&p(N,""),Me&16&&Pe(ge,N,X,te,ee,me,pe,ue))},W=(w,A,N,X,te,ee,me,pe,ue)=>{w=w||Kr,A=A||Kr;const ne=w.length,Te=A.length,ge=Math.min(ne,Te);let De;for(De=0;De<ge;De++){const Me=A[De]=ue?tr(A[De]):wn(A[De]);j(w[De],Me,N,null,te,ee,me,pe,ue)}ne>Te?mt(w,te,ee,!0,!1,ge):Pe(A,N,X,te,ee,me,pe,ue,ge)},L=(w,A,N,X,te,ee,me,pe,ue)=>{let ne=0;const Te=A.length;let ge=w.length-1,De=Te-1;for(;ne<=ge&&ne<=De;){const Me=w[ne],Ke=A[ne]=ue?tr(A[ne]):wn(A[ne]);if(qr(Me,Ke))j(Me,Ke,N,null,te,ee,me,pe,ue);else break;ne++}for(;ne<=ge&&ne<=De;){const Me=w[ge],Ke=A[De]=ue?tr(A[De]):wn(A[De]);if(qr(Me,Ke))j(Me,Ke,N,null,te,ee,me,pe,ue);else break;ge--,De--}if(ne>ge){if(ne<=De){const Me=De+1,Ke=Me<Te?A[Me].el:X;for(;ne<=De;)j(null,A[ne]=ue?tr(A[ne]):wn(A[ne]),N,Ke,te,ee,me,pe,ue),ne++}}else if(ne>De)for(;ne<=ge;)_e(w[ne],te,ee,!0),ne++;else{const Me=ne,Ke=ne,Ye=new Map;for(ne=Ke;ne<=De;ne++){const gt=A[ne]=ue?tr(A[ne]):wn(A[ne]);gt.key!=null&&Ye.set(gt.key,ne)}let Xe,wt=0;const xt=De-Ke+1;let qt=!1,Ct=0;const hn=new Array(xt);for(ne=0;ne<xt;ne++)hn[ne]=0;for(ne=Me;ne<=ge;ne++){const gt=w[ne];if(wt>=xt){_e(gt,te,ee,!0);continue}let ke;if(gt.key!=null)ke=Ye.get(gt.key);else for(Xe=Ke;Xe<=De;Xe++)if(hn[Xe-Ke]===0&&qr(gt,A[Xe])){ke=Xe;break}ke===void 0?_e(gt,te,ee,!0):(hn[ke-Ke]=ne+1,ke>=Ct?Ct=ke:qt=!0,j(gt,A[ke],N,null,te,ee,me,pe,ue),wt++)}const Sr=qt?Lp(hn):Kr;for(Xe=Sr.length-1,ne=xt-1;ne>=0;ne--){const gt=Ke+ne,ke=A[gt],Un=A[gt+1],mn=gt+1<Te?Un.el||Un.placeholder:X;hn[ne]===0?j(null,ke,N,mn,te,ee,me,pe,ue):qt&&(Xe<0||ne!==Sr[Xe]?Re(ke,N,mn,2):Xe--)}}},Re=(w,A,N,X,te=null)=>{const{el:ee,type:me,transition:pe,children:ue,shapeFlag:ne}=w;if(ne&6){Re(w.component.subTree,A,N,X);return}if(ne&128){w.suspense.move(A,N,X);return}if(ne&64){me.move(w,A,N,Ee);return}if(me===Je){r(ee,A,N);for(let ge=0;ge<ue.length;ge++)Re(ue[ge],A,N,X);r(w.anchor,A,N);return}if(me===Hi){T(w,A,N);return}if(X!==2&&ne&1&&pe)if(X===0)pe.beforeEnter(ee),r(ee,A,N),Vt(()=>pe.enter(ee),te);else{const{leave:ge,delayLeave:De,afterLeave:Me}=pe,Ke=()=>{w.ctx.isUnmounted?o(ee):r(ee,A,N)},Ye=()=>{ee._isLeaving&&ee[_r](!0),ge(ee,()=>{Ke(),Me&&Me()})};De?De(ee,Ke,Ye):Ye()}else r(ee,A,N)},_e=(w,A,N,X=!1,te=!1)=>{const{type:ee,props:me,ref:pe,children:ue,dynamicChildren:ne,shapeFlag:Te,patchFlag:ge,dirs:De,cacheIndex:Me}=w;if(ge===-2&&(te=!1),pe!=null&&(Ln(),_s(pe,null,N,w,!0),jn()),Me!=null&&(A.renderCache[Me]=void 0),Te&256){A.ctx.deactivate(w);return}const Ke=Te&1&&De,Ye=!Wr(w);let Xe;if(Ye&&(Xe=me&&me.onVnodeBeforeUnmount)&&vn(Xe,A,w),Te&6)jt(w.component,N,X);else{if(Te&128){w.suspense.unmount(N,X);return}Ke&&mr(w,null,A,"beforeUnmount"),Te&64?w.type.remove(w,A,N,Ee,X):ne&&!ne.hasOnce&&(ee!==Je||ge>0&&ge&64)?mt(ne,A,N,!1,!0):(ee===Je&&ge&384||!te&&Te&16)&&mt(ue,A,N),X&&Qe(w)}(Ye&&(Xe=me&&me.onVnodeUnmounted)||Ke)&&Vt(()=>{Xe&&vn(Xe,A,w),Ke&&mr(w,null,A,"unmounted")},N)},Qe=w=>{const{type:A,el:N,anchor:X,transition:te}=w;if(A===Je){zt(N,X);return}if(A===Hi){E(w);return}const ee=()=>{o(N),te&&!te.persisted&&te.afterLeave&&te.afterLeave()};if(w.shapeFlag&1&&te&&!te.persisted){const{leave:me,delayLeave:pe}=te,ue=()=>me(N,ee);pe?pe(w.el,ee,ue):ue()}else ee()},zt=(w,A)=>{let N;for(;w!==A;)N=v(w),o(w),w=N;o(A)},jt=(w,A,N)=>{const{bum:X,scope:te,job:ee,subTree:me,um:pe,m:ue,a:ne}=w;Wc(ue),Wc(ne),X&&Co(X),te.stop(),ee&&(ee.flags|=8,_e(me,w,A,N)),pe&&Vt(pe,A),Vt(()=>{w.isUnmounted=!0},A)},mt=(w,A,N,X=!1,te=!1,ee=0)=>{for(let me=ee;me<w.length;me++)_e(w[me],A,N,X,te)},Z=w=>{if(w.shapeFlag&6)return Z(w.component.subTree);if(w.shapeFlag&128)return w.suspense.next();const A=v(w.anchor||w.el),N=A&&A[Pu];return N?v(N):A};let we=!1;const Q=(w,A,N)=>{w==null?A._vnode&&_e(A._vnode,null,null,!0):j(A._vnode||null,w,A,null,null,null,N),A._vnode=w,we||(we=!0,Mc(),Eu(),we=!1)},Ee={p:j,um:_e,m:Re,r:Qe,mt:qe,mc:Pe,pc:G,pbc:Oe,n:Z,o:e};return{render:Q,hydrate:void 0,createApp:Sp(Q)}}function Vi({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function gr({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Np(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Ha(e,t,n=!1){const r=e.children,o=t.children;if(Fe(r)&&Fe(o))for(let a=0;a<r.length;a++){const c=r[a];let u=o[a];u.shapeFlag&1&&!u.dynamicChildren&&((u.patchFlag<=0||u.patchFlag===32)&&(u=o[a]=tr(o[a]),u.el=c.el),!n&&u.patchFlag!==-2&&Ha(c,u)),u.type===ti&&u.patchFlag!==-1&&(u.el=c.el),u.type===dn&&!u.el&&(u.el=c.el)}}function Lp(e){const t=e.slice(),n=[0];let r,o,a,c,u;const d=e.length;for(r=0;r<d;r++){const h=e[r];if(h!==0){if(o=n[n.length-1],e[o]<h){t[r]=o,n.push(r);continue}for(a=0,c=n.length-1;a<c;)u=a+c>>1,e[n[u]]<h?a=u+1:c=u;h<e[n[a]]&&(a>0&&(t[r]=n[a-1]),n[a]=r)}}for(a=n.length,c=n[a-1];a-- >0;)n[a]=c,c=t[c];return n}function Yu(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Yu(t)}function Wc(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const jp=Symbol.for("v-scx"),qp=()=>en(jp);function Gr(e,t){return Wa(e,null,t)}function tn(e,t,n){return Wa(e,t,n)}function Wa(e,t,n=lt){const{immediate:r,deep:o,flush:a,once:c}=n,u=kt({},n),d=t&&r||!t&&a!=="post";let h;if(Fs){if(a==="sync"){const k=qp();h=k.__watcherHandles||(k.__watcherHandles=[])}else if(!d){const k=()=>{};return k.stop=Cn,k.resume=Cn,k.pause=Cn,k}}const p=Lt;u.call=(k,O,j)=>ln(k,p,O,j);let g=!1;a==="post"?u.scheduler=k=>{Vt(k,p&&p.suspense)}:a!=="sync"&&(g=!0,u.scheduler=(k,O)=>{O?k():qa(k)}),u.augmentJob=k=>{t&&(k.flags|=4),g&&(k.flags|=2,p&&(k.id=p.uid,k.i=p))};const v=Xf(e,t,u);return Fs&&(h?h.push(v):d&&v()),v}function Up(e,t,n){const r=this.proxy,o=ht(e)?e.includes(".")?Gu(r,e):()=>r[e]:e.bind(r,r);let a;je(t)?a=t:(a=t.handler,n=t);const c=qs(this),u=Wa(o,a.bind(r),n);return c(),u}function Gu(e,t){const n=t.split(".");return()=>{let r=e;for(let o=0;o<n.length&&r;o++)r=r[n[o]];return r}}const Kp=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${nn(t)}Modifiers`]||e[`${Ar(t)}Modifiers`];function Vp(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||lt;let o=n;const a=t.startsWith("update:"),c=a&&Kp(r,t.slice(7));c&&(c.trim&&(o=n.map(p=>ht(p)?p.trim():p)),c.number&&(o=n.map(Oo)));let u,d=r[u=xo(t)]||r[u=xo(nn(t))];!d&&a&&(d=r[u=xo(Ar(t))]),d&&ln(d,e,6,o);const h=r[u+"Once"];if(h){if(!e.emitted)e.emitted={};else if(e.emitted[u])return;e.emitted[u]=!0,ln(h,e,6,o)}}function Ju(e,t,n=!1){const r=t.emitsCache,o=r.get(e);if(o!==void 0)return o;const a=e.emits;let c={},u=!1;if(!je(e)){const d=h=>{const p=Ju(h,t,!0);p&&(u=!0,kt(c,p))};!n&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}return!a&&!u?(ut(e)&&r.set(e,null),null):(Fe(a)?a.forEach(d=>c[d]=null):kt(c,a),ut(e)&&r.set(e,c),c)}function ei(e,t){return!e||!Ko(t)?!1:(t=t.slice(2).replace(/Once$/,""),it(e,t[0].toLowerCase()+t.slice(1))||it(e,Ar(t))||it(e,t))}function zc(e){const{type:t,vnode:n,proxy:r,withProxy:o,propsOptions:[a],slots:c,attrs:u,emit:d,render:h,renderCache:p,props:g,data:v,setupState:k,ctx:O,inheritAttrs:j}=e,K=Fo(e);let q,V;try{if(n.shapeFlag&4){const E=o||r,re=E;q=wn(h.call(re,E,p,g,k,v,O)),V=u}else{const E=t;q=wn(E.length>1?E(g,{attrs:u,slots:c,emit:d}):E(g,null)),V=t.props?u:Hp(u)}}catch(E){xs.length=0,Jo(E,e,1),q=We(dn)}let T=q;if(V&&j!==!1){const E=Object.keys(V),{shapeFlag:re}=T;E.length&&re&7&&(a&&E.some(Sa)&&(V=Wp(V,a)),T=ar(T,V,!1,!0))}return n.dirs&&(T=ar(T,null,!1,!0),T.dirs=T.dirs?T.dirs.concat(n.dirs):n.dirs),n.transition&&Ds(T,n.transition),q=T,Fo(K),q}const Hp=e=>{let t;for(const n in e)(n==="class"||n==="style"||Ko(n))&&((t||(t={}))[n]=e[n]);return t},Wp=(e,t)=>{const n={};for(const r in e)(!Sa(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function zp(e,t,n){const{props:r,children:o,component:a}=e,{props:c,children:u,patchFlag:d}=t,h=a.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&d>=0){if(d&1024)return!0;if(d&16)return r?Qc(r,c,h):!!c;if(d&8){const p=t.dynamicProps;for(let g=0;g<p.length;g++){const v=p[g];if(c[v]!==r[v]&&!ei(h,v))return!0}}}else return(o||u)&&(!u||!u.$stable)?!0:r===c?!1:r?c?Qc(r,c,h):!0:!!c;return!1}function Qc(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let o=0;o<r.length;o++){const a=r[o];if(t[a]!==e[a]&&!ei(n,a))return!0}return!1}function Qp({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const Xu=e=>e.__isSuspense;function Yp(e,t){t&&t.pendingBranch?Fe(e)?t.effects.push(...e):t.effects.push(e):tp(e)}const Je=Symbol.for("v-fgt"),ti=Symbol.for("v-txt"),dn=Symbol.for("v-cmt"),Hi=Symbol.for("v-stc"),xs=[];let Zt=null;function U(e=!1){xs.push(Zt=e?null:[])}function Gp(){xs.pop(),Zt=xs[xs.length-1]||null}let $s=1;function Yc(e,t=!1){$s+=e,e<0&&Zt&&t&&(Zt.hasOnce=!0)}function Zu(e){return e.dynamicChildren=$s>0?Zt||Kr:null,Gp(),$s>0&&Zt&&Zt.push(e),e}function J(e,t,n,r,o,a){return Zu(b(e,t,n,r,o,a,!0))}function St(e,t,n,r,o){return Zu(We(e,t,n,r,o,!0))}function Ts(e){return e?e.__v_isVNode===!0:!1}function qr(e,t){return e.type===t.type&&e.key===t.key}const ed=({key:e})=>e??null,Eo=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?ht(e)||_t(e)||je(e)?{i:Dt,r:e,k:t,f:!!n}:e:null);function b(e,t=null,n=null,r=0,o=null,a=e===Je?0:1,c=!1,u=!1){const d={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&ed(t),ref:t&&Eo(t),scopeId:Su,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:r,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:Dt};return u?(za(d,n),a&128&&e.normalize(d)):n&&(d.shapeFlag|=ht(n)?8:16),$s>0&&!c&&Zt&&(d.patchFlag>0||a&6)&&d.patchFlag!==32&&Zt.push(d),d}const We=Jp;function Jp(e,t=null,n=null,r=0,o=null,a=!1){if((!e||e===bp)&&(e=dn),Ts(e)){const u=ar(e,t,!0);return n&&za(u,n),$s>0&&!a&&Zt&&(u.shapeFlag&6?Zt[Zt.indexOf(e)]=u:Zt.push(u)),u.patchFlag=-2,u}if(ih(e)&&(e=e.__vccOpts),t){t=td(t);let{class:u,style:d}=t;u&&!ht(u)&&(t.class=It(u)),ut(d)&&(Na(d)&&!Fe(d)&&(d=kt({},d)),t.style=Nn(d))}const c=ht(e)?1:Xu(e)?128:np(e)?64:ut(e)?4:je(e)?2:0;return b(e,t,n,r,o,c,a,!0)}function td(e){return e?Na(e)||Ku(e)?kt({},e):e:null}function ar(e,t,n=!1,r=!1){const{props:o,ref:a,patchFlag:c,children:u,transition:d}=e,h=t?En(o||{},t):o,p={__v_isVNode:!0,__v_skip:!0,type:e.type,props:h,key:h&&ed(h),ref:t&&t.ref?n&&a?Fe(a)?a.concat(Eo(t)):[a,Eo(t)]:Eo(t):a,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:u,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Je?c===-1?16:c|16:c,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:d,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&ar(e.ssContent),ssFallback:e.ssFallback&&ar(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return d&&r&&Ds(p,d.clone(p)),p}function Wt(e=" ",t=0){return We(ti,null,e,t)}function $e(e="",t=!1){return t?(U(),St(dn,null,e)):We(dn,null,e)}function wn(e){return e==null||typeof e=="boolean"?We(dn):Fe(e)?We(Je,null,e.slice()):Ts(e)?tr(e):We(ti,null,String(e))}function tr(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:ar(e)}function za(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(Fe(t))n=16;else if(typeof t=="object")if(r&65){const o=t.default;o&&(o._c&&(o._d=!1),za(e,o()),o._c&&(o._d=!0));return}else{n=32;const o=t._;!o&&!Ku(t)?t._ctx=Dt:o===3&&Dt&&(Dt.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else je(t)?(t={default:t,_ctx:Dt},n=32):(t=String(t),r&64?(n=16,t=[Wt(t)]):n=8);e.children=t,e.shapeFlag|=n}function En(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const o in r)if(o==="class")t.class!==r.class&&(t.class=It([t.class,r.class]));else if(o==="style")t.style=Nn([t.style,r.style]);else if(Ko(o)){const a=t[o],c=r[o];c&&a!==c&&!(Fe(a)&&a.includes(c))&&(t[o]=a?[].concat(a,c):c)}else o!==""&&(t[o]=r[o])}return t}function vn(e,t,n,r=null){ln(e,t,7,[n,r])}const Xp=ju();let Zp=0;function eh(e,t,n){const r=e.type,o=(t?t.appContext:e.appContext)||Xp,a={uid:Zp++,vnode:e,type:r,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new ru(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Hu(r,o),emitsOptions:Ju(r,o),emit:null,emitted:null,propsDefaults:lt,inheritAttrs:r.inheritAttrs,ctx:lt,data:lt,props:lt,attrs:lt,slots:lt,refs:lt,setupState:lt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=Vp.bind(null,a),e.ce&&e.ce(a),a}let Lt=null;const Sn=()=>Lt||Dt;let Bo,ma;{const e=zo(),t=(n,r)=>{let o;return(o=e[n])||(o=e[n]=[]),o.push(r),a=>{o.length>1?o.forEach(c=>c(a)):o[0](a)}};Bo=t("__VUE_INSTANCE_SETTERS__",n=>Lt=n),ma=t("__VUE_SSR_SETTERS__",n=>Fs=n)}const qs=e=>{const t=Lt;return Bo(e),e.scope.on(),()=>{e.scope.off(),Bo(t)}},Gc=()=>{Lt&&Lt.scope.off(),Bo(null)};function nd(e){return e.vnode.shapeFlag&4}let Fs=!1;function th(e,t=!1,n=!1){t&&ma(t);const{props:r,children:o}=e.vnode,a=nd(e);Op(e,r,a,t),Tp(e,o,n||t);const c=a?nh(e,t):void 0;return t&&ma(!1),c}function nh(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,wp);const{setup:r}=n;if(r){Ln();const o=e.setupContext=r.length>1?sh(e):null,a=qs(e),c=Ls(r,e,0,[e.props,o]),u=Gl(c);if(jn(),a(),(u||e.sp)&&!Wr(e)&&$u(e),u){if(c.then(Gc,Gc),t)return c.then(d=>{Jc(e,d)}).catch(d=>{Jo(d,e,0)});e.asyncDep=c}else Jc(e,c)}else rd(e)}function Jc(e,t,n){je(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:ut(t)&&(e.setupState=xu(t)),rd(e)}function rd(e,t,n){const r=e.type;e.render||(e.render=r.render||Cn);{const o=qs(e);Ln();try{kp(e)}finally{jn(),o()}}}const rh={get(e,t){return Nt(e,"get",""),e[t]}};function sh(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,rh),slots:e.slots,emit:e.emit,expose:t}}function ni(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(xu(La(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in ws)return ws[n](e)},has(t,n){return n in t||n in ws}})):e.proxy}function oh(e,t=!0){return je(e)?e.displayName||e.name:e.name||t&&e.__name}function ih(e){return je(e)&&"__vccOpts"in e}const et=(e,t)=>Gf(e,t,Fs);function zr(e,t,n){const r=arguments.length;return r===2?ut(t)&&!Fe(t)?Ts(t)?We(e,null,[t]):We(e,t):We(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Ts(n)&&(n=[n]),We(e,t,n))}const ah="3.5.20";/**
* @vue/runtime-dom v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ga;const Xc=typeof window<"u"&&window.trustedTypes;if(Xc)try{ga=Xc.createPolicy("vue",{createHTML:e=>e})}catch{}const sd=ga?e=>ga.createHTML(e):e=>e,ch="http://www.w3.org/2000/svg",lh="http://www.w3.org/1998/Math/MathML",Fn=typeof document<"u"?document:null,Zc=Fn&&Fn.createElement("template"),uh={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const o=t==="svg"?Fn.createElementNS(ch,e):t==="mathml"?Fn.createElementNS(lh,e):n?Fn.createElement(e,{is:n}):Fn.createElement(e);return e==="select"&&r&&r.multiple!=null&&o.setAttribute("multiple",r.multiple),o},createText:e=>Fn.createTextNode(e),createComment:e=>Fn.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Fn.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,o,a){const c=n?n.previousSibling:t.lastChild;if(o&&(o===a||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),n),!(o===a||!(o=o.nextSibling)););else{Zc.innerHTML=sd(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const u=Zc.content;if(r==="svg"||r==="mathml"){const d=u.firstChild;for(;d.firstChild;)u.appendChild(d.firstChild);u.removeChild(d)}t.insertBefore(u,n)}return[c?c.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},Yn="transition",us="animation",Jr=Symbol("_vtc"),od={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},dh=kt({},ip,od),yr=(e,t=[])=>{Fe(e)?e.forEach(n=>n(...t)):e&&e(...t)},el=e=>e?Fe(e)?e.some(t=>t.length>1):e.length>1:!1;function fh(e){const t={};for(const fe in e)fe in od||(t[fe]=e[fe]);if(e.css===!1)return t;const{name:n="v",type:r,duration:o,enterFromClass:a=`${n}-enter-from`,enterActiveClass:c=`${n}-enter-active`,enterToClass:u=`${n}-enter-to`,appearFromClass:d=a,appearActiveClass:h=c,appearToClass:p=u,leaveFromClass:g=`${n}-leave-from`,leaveActiveClass:v=`${n}-leave-active`,leaveToClass:k=`${n}-leave-to`}=e,O=ph(o),j=O&&O[0],K=O&&O[1],{onBeforeEnter:q,onEnter:V,onEnterCancelled:T,onLeave:E,onLeaveCancelled:re,onBeforeAppear:le=q,onAppear:Ae=V,onAppearCancelled:Pe=T}=t,se=(fe,Se,qe,st)=>{fe._enterCancelled=st,Jn(fe,Se?p:u),Jn(fe,Se?h:c),qe&&qe()},Oe=(fe,Se)=>{fe._isLeaving=!1,Jn(fe,g),Jn(fe,k),Jn(fe,v),Se&&Se()},Ue=fe=>(Se,qe)=>{const st=fe?Ae:V,He=()=>se(Se,fe,qe);yr(st,[Se,He]),tl(()=>{Jn(Se,fe?d:a),bn(Se,fe?p:u),el(st)||nl(Se,r,j,He)})};return kt(t,{onBeforeEnter(fe){yr(q,[fe]),bn(fe,a),bn(fe,c)},onBeforeAppear(fe){yr(le,[fe]),bn(fe,d),bn(fe,h)},onEnter:Ue(!1),onAppear:Ue(!0),onLeave(fe,Se){fe._isLeaving=!0;const qe=()=>Oe(fe,Se);bn(fe,g),fe._enterCancelled?(bn(fe,v),ya()):(ya(),bn(fe,v)),tl(()=>{fe._isLeaving&&(Jn(fe,g),bn(fe,k),el(E)||nl(fe,r,K,qe))}),yr(E,[fe,qe])},onEnterCancelled(fe){se(fe,!1,void 0,!0),yr(T,[fe])},onAppearCancelled(fe){se(fe,!0,void 0,!0),yr(Pe,[fe])},onLeaveCancelled(fe){Oe(fe),yr(re,[fe])}})}function ph(e){if(e==null)return null;if(ut(e))return[Wi(e.enter),Wi(e.leave)];{const t=Wi(e);return[t,t]}}function Wi(e){return gf(e)}function bn(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[Jr]||(e[Jr]=new Set)).add(t)}function Jn(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.remove(r));const n=e[Jr];n&&(n.delete(t),n.size||(e[Jr]=void 0))}function tl(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let hh=0;function nl(e,t,n,r){const o=e._endId=++hh,a=()=>{o===e._endId&&r()};if(n!=null)return setTimeout(a,n);const{type:c,timeout:u,propCount:d}=id(e,t);if(!c)return r();const h=c+"end";let p=0;const g=()=>{e.removeEventListener(h,v),a()},v=k=>{k.target===e&&++p>=d&&g()};setTimeout(()=>{p<d&&g()},u+1),e.addEventListener(h,v)}function id(e,t){const n=window.getComputedStyle(e),r=O=>(n[O]||"").split(", "),o=r(`${Yn}Delay`),a=r(`${Yn}Duration`),c=rl(o,a),u=r(`${us}Delay`),d=r(`${us}Duration`),h=rl(u,d);let p=null,g=0,v=0;t===Yn?c>0&&(p=Yn,g=c,v=a.length):t===us?h>0&&(p=us,g=h,v=d.length):(g=Math.max(c,h),p=g>0?c>h?Yn:us:null,v=p?p===Yn?a.length:d.length:0);const k=p===Yn&&/\b(transform|all)(,|$)/.test(r(`${Yn}Property`).toString());return{type:p,timeout:g,propCount:v,hasTransform:k}}function rl(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,r)=>sl(n)+sl(e[r])))}function sl(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function ya(){return document.body.offsetHeight}function mh(e,t,n){const r=e[Jr];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const No=Symbol("_vod"),ad=Symbol("_vsh"),gh={name:"show",beforeMount(e,{value:t},{transition:n}){e[No]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):ds(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:r}){!t!=!n&&(r?t?(r.beforeEnter(e),ds(e,!0),r.enter(e)):r.leave(e,()=>{ds(e,!1)}):ds(e,t))},beforeUnmount(e,{value:t}){ds(e,t)}};function ds(e,t){e.style.display=t?e[No]:"none",e[ad]=!t}const yh=Symbol(""),vh=/(^|;)\s*display\s*:/;function bh(e,t,n){const r=e.style,o=ht(n);let a=!1;if(n&&!o){if(t)if(ht(t))for(const c of t.split(";")){const u=c.slice(0,c.indexOf(":")).trim();n[u]==null&&Io(r,u,"")}else for(const c in t)n[c]==null&&Io(r,c,"");for(const c in n)c==="display"&&(a=!0),Io(r,c,n[c])}else if(o){if(t!==n){const c=r[yh];c&&(n+=";"+c),r.cssText=n,a=vh.test(n)}}else t&&e.removeAttribute("style");No in e&&(e[No]=a?r.display:"",e[ad]&&(r.display="none"))}const ol=/\s*!important$/;function Io(e,t,n){if(Fe(n))n.forEach(r=>Io(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=_h(e,t);ol.test(n)?e.setProperty(Ar(r),n.replace(ol,""),"important"):e[r]=n}}const il=["Webkit","Moz","ms"],zi={};function _h(e,t){const n=zi[t];if(n)return n;let r=nn(t);if(r!=="filter"&&r in e)return zi[t]=r;r=Wo(r);for(let o=0;o<il.length;o++){const a=il[o]+r;if(a in e)return zi[t]=a}return t}const al="http://www.w3.org/1999/xlink";function cl(e,t,n,r,o,a=xf(t)){r&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(al,t.slice(6,t.length)):e.setAttributeNS(al,t,n):n==null||a&&!eu(n)?e.removeAttribute(t):e.setAttribute(t,a?"":cn(n)?String(n):n)}function ll(e,t,n,r,o){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?sd(n):n);return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){const u=a==="OPTION"?e.getAttribute("value")||"":e.value,d=n==null?e.type==="checkbox"?"on":"":String(n);(u!==d||!("_value"in e))&&(e.value=d),n==null&&e.removeAttribute(t),e._value=n;return}let c=!1;if(n===""||n==null){const u=typeof e[t];u==="boolean"?n=eu(n):n==null&&u==="string"?(n="",c=!0):u==="number"&&(n=0,c=!0)}try{e[t]=n}catch{}c&&e.removeAttribute(o||t)}function wr(e,t,n,r){e.addEventListener(t,n,r)}function wh(e,t,n,r){e.removeEventListener(t,n,r)}const ul=Symbol("_vei");function kh(e,t,n,r,o=null){const a=e[ul]||(e[ul]={}),c=a[t];if(r&&c)c.value=r;else{const[u,d]=xh(t);if(r){const h=a[t]=Eh(r,o);wr(e,u,h,d)}else c&&(wh(e,u,c,d),a[t]=void 0)}}const dl=/(?:Once|Passive|Capture)$/;function xh(e){let t;if(dl.test(e)){t={};let r;for(;r=e.match(dl);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Ar(e.slice(2)),t]}let Qi=0;const Ch=Promise.resolve(),Ah=()=>Qi||(Ch.then(()=>Qi=0),Qi=Date.now());function Eh(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;ln(Ih(r,n.value),t,5,[r])};return n.value=e,n.attached=Ah(),n}function Ih(e,t){if(Fe(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>o=>!o._stopped&&r&&r(o))}else return t}const fl=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Sh=(e,t,n,r,o,a)=>{const c=o==="svg";t==="class"?mh(e,r,c):t==="style"?bh(e,n,r):Ko(t)?Sa(t)||kh(e,t,n,r,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Ph(e,t,r,c))?(ll(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&cl(e,t,r,c,a,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!ht(r))?ll(e,nn(t),r,a,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),cl(e,t,r,c))};function Ph(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&fl(t)&&je(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const o=e.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return fl(t)&&ht(n)?!1:t in e}const cd=new WeakMap,ld=new WeakMap,Lo=Symbol("_moveCb"),pl=Symbol("_enterCb"),Oh=e=>(delete e.props.mode,e),Rh=Oh({name:"TransitionGroup",props:kt({},dh,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=Sn(),r=op();let o,a;return Mu(()=>{if(!o.length)return;const c=e.moveClass||`${e.name||"v"}-move`;if(!Mh(o[0].el,n.vnode.el,c)){o=[];return}o.forEach($h),o.forEach(Th);const u=o.filter(Fh);ya(),u.forEach(d=>{const h=d.el,p=h.style;bn(h,c),p.transform=p.webkitTransform=p.transitionDuration="";const g=h[Lo]=v=>{v&&v.target!==h||(!v||/transform$/.test(v.propertyName))&&(h.removeEventListener("transitionend",g),h[Lo]=null,Jn(h,c))};h.addEventListener("transitionend",g)}),o=[]}),()=>{const c=Ze(e),u=fh(c);let d=c.tag||Je;if(o=[],a)for(let h=0;h<a.length;h++){const p=a[h];p.el&&p.el instanceof Element&&(o.push(p),Ds(p,ua(p,u,r,n)),cd.set(p,p.el.getBoundingClientRect()))}a=t.default?Du(t.default()):[];for(let h=0;h<a.length;h++){const p=a[h];p.key!=null&&Ds(p,ua(p,u,r,n))}return We(d,null,a)}}}),Dh=Rh;function $h(e){const t=e.el;t[Lo]&&t[Lo](),t[pl]&&t[pl]()}function Th(e){ld.set(e,e.el.getBoundingClientRect())}function Fh(e){const t=cd.get(e),n=ld.get(e),r=t.left-n.left,o=t.top-n.top;if(r||o){const a=e.el.style;return a.transform=a.webkitTransform=`translate(${r}px,${o}px)`,a.transitionDuration="0s",e}}function Mh(e,t,n){const r=e.cloneNode(),o=e[Jr];o&&o.forEach(u=>{u.split(/\s+/).forEach(d=>d&&r.classList.remove(d))}),n.split(/\s+/).forEach(u=>u&&r.classList.add(u)),r.style.display="none";const a=t.nodeType===1?t:t.parentNode;a.appendChild(r);const{hasTransform:c}=id(r);return a.removeChild(r),c}const jo=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Fe(t)?n=>Co(t,n):t};function Bh(e){e.target.composing=!0}function hl(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Qr=Symbol("_assign"),va={created(e,{modifiers:{lazy:t,trim:n,number:r}},o){e[Qr]=jo(o);const a=r||o.props&&o.props.type==="number";wr(e,t?"change":"input",c=>{if(c.target.composing)return;let u=e.value;n&&(u=u.trim()),a&&(u=Oo(u)),e[Qr](u)}),n&&wr(e,"change",()=>{e.value=e.value.trim()}),t||(wr(e,"compositionstart",Bh),wr(e,"compositionend",hl),wr(e,"change",hl))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:r,trim:o,number:a}},c){if(e[Qr]=jo(c),e.composing)return;const u=(a||e.type==="number")&&!/^0\d/.test(e.value)?Oo(e.value):e.value,d=t??"";u!==d&&(document.activeElement===e&&e.type!=="range"&&(r&&t===n||o&&e.value.trim()===d)||(e.value=d))}},Nh={deep:!0,created(e,{value:t,modifiers:{number:n}},r){const o=Vo(t);wr(e,"change",()=>{const a=Array.prototype.filter.call(e.options,c=>c.selected).map(c=>n?Oo(qo(c)):qo(c));e[Qr](e.multiple?o?new Set(a):a:a[0]),e._assigning=!0,un(()=>{e._assigning=!1})}),e[Qr]=jo(r)},mounted(e,{value:t}){ml(e,t)},beforeUpdate(e,t,n){e[Qr]=jo(n)},updated(e,{value:t}){e._assigning||ml(e,t)}};function ml(e,t){const n=e.multiple,r=Fe(t);if(!(n&&!r&&!Vo(t))){for(let o=0,a=e.options.length;o<a;o++){const c=e.options[o],u=qo(c);if(n)if(r){const d=typeof u;d==="string"||d==="number"?c.selected=t.some(h=>String(h)===String(u)):c.selected=Af(t,u)>-1}else c.selected=t.has(u);else if(Qo(qo(c),t)){e.selectedIndex!==o&&(e.selectedIndex=o);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function qo(e){return"_value"in e?e._value:e.value}const Lh=kt({patchProp:Sh},uh);let gl;function jh(){return gl||(gl=Mp(Lh))}const qh=((...e)=>{const t=jh().createApp(...e),{mount:n}=t;return t.mount=r=>{const o=Kh(r);if(!o)return;const a=t._component;!je(a)&&!a.render&&!a.template&&(a.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const c=n(o,!1,Uh(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),c},t});function Uh(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Kh(e){return ht(e)?document.querySelector(e):e}const Vh="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%201024%201024'%20width='1024'%20height='1024'%3e%3cdefs%3e%3clinearGradient%20id='bgGrad'%20x1='0'%20y1='0'%20x2='1'%20y2='1'%3e%3cstop%20offset='0%25'%20stop-color='%23137ef2'/%3e%3cstop%20offset='100%25'%20stop-color='%235cb5f9'/%3e%3c/linearGradient%3e%3c!--%20Subtle%20soft%20shadow%20for%20floating%20cards%20--%3e%3cfilter%20id='softShadow'%20x='-20%25'%20y='-20%25'%20width='140%25'%20height='140%25'%3e%3cfeDropShadow%20dx='0'%20dy='14'%20stdDeviation='18'%20flood-color='%23000000'%20flood-opacity='0.22'/%3e%3c/filter%3e%3cfilter%20id='pageShadow'%20x='-20%25'%20y='-20%25'%20width='140%25'%20height='140%25'%3e%3cfeDropShadow%20dx='0'%20dy='10'%20stdDeviation='12'%20flood-color='%23000000'%20flood-opacity='0.18'/%3e%3c/filter%3e%3cfilter%20id='coinShadow'%20x='-20%25'%20y='-20%25'%20width='140%25'%20height='140%25'%3e%3cfeDropShadow%20dx='0'%20dy='10'%20stdDeviation='10'%20flood-color='%23000000'%20flood-opacity='0.25'/%3e%3c/filter%3e%3clinearGradient%20id='coinGrad'%20x1='0'%20y1='0'%20x2='0'%20y2='1'%3e%3cstop%20offset='0%25'%20stop-color='%23ffc02e'/%3e%3cstop%20offset='100%25'%20stop-color='%23ffaa19'/%3e%3c/linearGradient%3e%3clinearGradient%20id='coinRingGrad'%20x1='0'%20y1='0'%20x2='0'%20y2='1'%3e%3cstop%20offset='0%25'%20stop-color='%23FFC83A'/%3e%3cstop%20offset='100%25'%20stop-color='%23E59200'/%3e%3c/linearGradient%3e%3c/defs%3e%3c!--%20Rounded%20square%20background%20--%3e%3crect%20x='72'%20y='72'%20width='880'%20height='880'%20rx='220'%20fill='url(%23bgGrad)'/%3e%3c!--%20Back%20pages%20(slightly%20tilted)%20--%3e%3cg%20filter='url(%23softShadow)'%3e%3crect%20x='340'%20y='210'%20width='460'%20height='560'%20rx='42'%20fill='%23DDEBFF'%20opacity='0.9'%20transform='rotate(18%20750%20480)'/%3e%3crect%20x='300'%20y='230'%20width='470'%20height='560'%20rx='46'%20fill='%23EAF3FF'%20opacity='0.95'%20transform='rotate(12%20715%20490)'/%3e%3c/g%3e%3c!--%20Main%20notebook%20page%20--%3e%3cg%20filter='url(%23pageShadow)'%3e%3crect%20id='page'%20x='260'%20y='240'%20width='520'%20height='560'%20rx='54'%20fill='%23FFFFFF'/%3e%3c!--%20Inner%20card%20area%20--%3e%3crect%20x='356'%20y='322'%20width='330'%20height='420'%20rx='34'%20fill='%23EDEFF2'/%3e%3c/g%3e%3c!--%20Binder%20rings%20--%3e%3cg%3e%3ccircle%20cx='260'%20cy='360'%20r='34'%20fill='%232B2F38'/%3e%3ccircle%20cx='260'%20cy='520'%20r='34'%20fill='%232B2F38'/%3e%3ccircle%20cx='260'%20cy='680'%20r='34'%20fill='%232B2F38'/%3e%3c!--%20little%20highlights%20--%3e%3ccircle%20cx='248'%20cy='350'%20r='10'%20fill='%23FFFFFF'%20opacity='0.35'/%3e%3ccircle%20cx='248'%20cy='510'%20r='10'%20fill='%23FFFFFF'%20opacity='0.35'/%3e%3ccircle%20cx='248'%20cy='670'%20r='10'%20fill='%23FFFFFF'%20opacity='0.35'/%3e%3c/g%3e%3c!--%20Gold%20checkmark%20coin%20--%3e%3cg%20filter='url(%23coinShadow)'%3e%3c!--%20ring%20--%3e%3ccircle%20cx='690'%20cy='680'%20r='148'%20fill='url(%23coinRingGrad)'/%3e%3ccircle%20cx='690'%20cy='680'%20r='112'%20fill='url(%23coinGrad)'/%3e%3c!--%20check%20--%3e%3cg%20transform='translate(10,60)'%3e%3cpath%20d='M635%20683%20l-36%20-36%20a18%2018%200%200%201%2025%20-25%20l25%2025%2072%20-72%20a18%2018%200%201%201%2025%2025%20l-84%2084%20a18%2018%200%200%201%20-27%200z'%20fill='%23FFFFFF'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e";/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const Ur=typeof document<"u";function ud(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Hh(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&ud(e.default)}const ot=Object.assign;function Yi(e,t){const n={};for(const r in t){const o=t[r];n[r]=fn(o)?o.map(e):e(o)}return n}const Cs=()=>{},fn=Array.isArray,dd=/#/g,Wh=/&/g,zh=/\//g,Qh=/=/g,Yh=/\?/g,fd=/\+/g,Gh=/%5B/g,Jh=/%5D/g,pd=/%5E/g,Xh=/%60/g,hd=/%7B/g,Zh=/%7C/g,md=/%7D/g,em=/%20/g;function Qa(e){return encodeURI(""+e).replace(Zh,"|").replace(Gh,"[").replace(Jh,"]")}function tm(e){return Qa(e).replace(hd,"{").replace(md,"}").replace(pd,"^")}function ba(e){return Qa(e).replace(fd,"%2B").replace(em,"+").replace(dd,"%23").replace(Wh,"%26").replace(Xh,"`").replace(hd,"{").replace(md,"}").replace(pd,"^")}function nm(e){return ba(e).replace(Qh,"%3D")}function rm(e){return Qa(e).replace(dd,"%23").replace(Yh,"%3F")}function sm(e){return e==null?"":rm(e).replace(zh,"%2F")}function Ms(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const om=/\/$/,im=e=>e.replace(om,"");function Gi(e,t,n="/"){let r,o={},a="",c="";const u=t.indexOf("#");let d=t.indexOf("?");return u<d&&u>=0&&(d=-1),d>-1&&(r=t.slice(0,d),a=t.slice(d+1,u>-1?u:t.length),o=e(a)),u>-1&&(r=r||t.slice(0,u),c=t.slice(u,t.length)),r=um(r??t,n),{fullPath:r+(a&&"?")+a+c,path:r,query:o,hash:Ms(c)}}function am(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function yl(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function cm(e,t,n){const r=t.matched.length-1,o=n.matched.length-1;return r>-1&&r===o&&Xr(t.matched[r],n.matched[o])&&gd(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function Xr(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function gd(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!lm(e[n],t[n]))return!1;return!0}function lm(e,t){return fn(e)?vl(e,t):fn(t)?vl(t,e):e===t}function vl(e,t){return fn(t)?e.length===t.length&&e.every((n,r)=>n===t[r]):e.length===1&&e[0]===t}function um(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/"),o=r[r.length-1];(o===".."||o===".")&&r.push("");let a=n.length-1,c,u;for(c=0;c<r.length;c++)if(u=r[c],u!==".")if(u==="..")a>1&&a--;else break;return n.slice(0,a).join("/")+"/"+r.slice(c).join("/")}const Gn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Bs;(function(e){e.pop="pop",e.push="push"})(Bs||(Bs={}));var As;(function(e){e.back="back",e.forward="forward",e.unknown=""})(As||(As={}));function dm(e){if(!e)if(Ur){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),im(e)}const fm=/^[^#]+#/;function pm(e,t){return e.replace(fm,"#")+t}function hm(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const ri=()=>({left:window.scrollX,top:window.scrollY});function mm(e){let t;if("el"in e){const n=e.el,r=typeof n=="string"&&n.startsWith("#"),o=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!o)return;t=hm(o,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function bl(e,t){return(history.state?history.state.position-t:-1)+e}const _a=new Map;function gm(e,t){_a.set(e,t)}function ym(e){const t=_a.get(e);return _a.delete(e),t}let vm=()=>location.protocol+"//"+location.host;function yd(e,t){const{pathname:n,search:r,hash:o}=t,a=e.indexOf("#");if(a>-1){let u=o.includes(e.slice(a))?e.slice(a).length:1,d=o.slice(u);return d[0]!=="/"&&(d="/"+d),yl(d,"")}return yl(n,e)+r+o}function bm(e,t,n,r){let o=[],a=[],c=null;const u=({state:v})=>{const k=yd(e,location),O=n.value,j=t.value;let K=0;if(v){if(n.value=k,t.value=v,c&&c===O){c=null;return}K=j?v.position-j.position:0}else r(k);o.forEach(q=>{q(n.value,O,{delta:K,type:Bs.pop,direction:K?K>0?As.forward:As.back:As.unknown})})};function d(){c=n.value}function h(v){o.push(v);const k=()=>{const O=o.indexOf(v);O>-1&&o.splice(O,1)};return a.push(k),k}function p(){const{history:v}=window;v.state&&v.replaceState(ot({},v.state,{scroll:ri()}),"")}function g(){for(const v of a)v();a=[],window.removeEventListener("popstate",u),window.removeEventListener("beforeunload",p)}return window.addEventListener("popstate",u),window.addEventListener("beforeunload",p,{passive:!0}),{pauseListeners:d,listen:h,destroy:g}}function _l(e,t,n,r=!1,o=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:o?ri():null}}function _m(e){const{history:t,location:n}=window,r={value:yd(e,n)},o={value:t.state};o.value||a(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function a(d,h,p){const g=e.indexOf("#"),v=g>-1?(n.host&&document.querySelector("base")?e:e.slice(g))+d:vm()+e+d;try{t[p?"replaceState":"pushState"](h,"",v),o.value=h}catch(k){console.error(k),n[p?"replace":"assign"](v)}}function c(d,h){const p=ot({},t.state,_l(o.value.back,d,o.value.forward,!0),h,{position:o.value.position});a(d,p,!0),r.value=d}function u(d,h){const p=ot({},o.value,t.state,{forward:d,scroll:ri()});a(p.current,p,!0);const g=ot({},_l(r.value,d,null),{position:p.position+1},h);a(d,g,!1),r.value=d}return{location:r,state:o,push:u,replace:c}}function wm(e){e=dm(e);const t=_m(e),n=bm(e,t.state,t.location,t.replace);function r(a,c=!0){c||n.pauseListeners(),history.go(a)}const o=ot({location:"",base:e,go:r,createHref:pm.bind(null,e)},t,n);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>t.state.value}),o}function km(e){return typeof e=="string"||e&&typeof e=="object"}function vd(e){return typeof e=="string"||typeof e=="symbol"}const bd=Symbol("");var wl;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(wl||(wl={}));function Zr(e,t){return ot(new Error,{type:e,[bd]:!0},t)}function $n(e,t){return e instanceof Error&&bd in e&&(t==null||!!(e.type&t))}const kl="[^/]+?",xm={sensitive:!1,strict:!1,start:!0,end:!0},Cm=/[.+*?^${}()[\]/\\]/g;function Am(e,t){const n=ot({},xm,t),r=[];let o=n.start?"^":"";const a=[];for(const h of e){const p=h.length?[]:[90];n.strict&&!h.length&&(o+="/");for(let g=0;g<h.length;g++){const v=h[g];let k=40+(n.sensitive?.25:0);if(v.type===0)g||(o+="/"),o+=v.value.replace(Cm,"\\$&"),k+=40;else if(v.type===1){const{value:O,repeatable:j,optional:K,regexp:q}=v;a.push({name:O,repeatable:j,optional:K});const V=q||kl;if(V!==kl){k+=10;try{new RegExp(`(${V})`)}catch(E){throw new Error(`Invalid custom RegExp for param "${O}" (${V}): `+E.message)}}let T=j?`((?:${V})(?:/(?:${V}))*)`:`(${V})`;g||(T=K&&h.length<2?`(?:/${T})`:"/"+T),K&&(T+="?"),o+=T,k+=20,K&&(k+=-8),j&&(k+=-20),V===".*"&&(k+=-50)}p.push(k)}r.push(p)}if(n.strict&&n.end){const h=r.length-1;r[h][r[h].length-1]+=.7000000000000001}n.strict||(o+="/?"),n.end?o+="$":n.strict&&!o.endsWith("/")&&(o+="(?:/|$)");const c=new RegExp(o,n.sensitive?"":"i");function u(h){const p=h.match(c),g={};if(!p)return null;for(let v=1;v<p.length;v++){const k=p[v]||"",O=a[v-1];g[O.name]=k&&O.repeatable?k.split("/"):k}return g}function d(h){let p="",g=!1;for(const v of e){(!g||!p.endsWith("/"))&&(p+="/"),g=!1;for(const k of v)if(k.type===0)p+=k.value;else if(k.type===1){const{value:O,repeatable:j,optional:K}=k,q=O in h?h[O]:"";if(fn(q)&&!j)throw new Error(`Provided param "${O}" is an array but it is not repeatable (* or + modifiers)`);const V=fn(q)?q.join("/"):q;if(!V)if(K)v.length<2&&(p.endsWith("/")?p=p.slice(0,-1):g=!0);else throw new Error(`Missing required param "${O}"`);p+=V}}return p||"/"}return{re:c,score:r,keys:a,parse:u,stringify:d}}function Em(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function _d(e,t){let n=0;const r=e.score,o=t.score;for(;n<r.length&&n<o.length;){const a=Em(r[n],o[n]);if(a)return a;n++}if(Math.abs(o.length-r.length)===1){if(xl(r))return 1;if(xl(o))return-1}return o.length-r.length}function xl(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const Im={type:0,value:""},Sm=/[a-zA-Z0-9_]/;function Pm(e){if(!e)return[[]];if(e==="/")return[[Im]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(k){throw new Error(`ERR (${n})/"${h}": ${k}`)}let n=0,r=n;const o=[];let a;function c(){a&&o.push(a),a=[]}let u=0,d,h="",p="";function g(){h&&(n===0?a.push({type:0,value:h}):n===1||n===2||n===3?(a.length>1&&(d==="*"||d==="+")&&t(`A repeatable param (${h}) must be alone in its segment. eg: '/:ids+.`),a.push({type:1,value:h,regexp:p,repeatable:d==="*"||d==="+",optional:d==="*"||d==="?"})):t("Invalid state to consume buffer"),h="")}function v(){h+=d}for(;u<e.length;){if(d=e[u++],d==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:d==="/"?(h&&g(),c()):d===":"?(g(),n=1):v();break;case 4:v(),n=r;break;case 1:d==="("?n=2:Sm.test(d)?v():(g(),n=0,d!=="*"&&d!=="?"&&d!=="+"&&u--);break;case 2:d===")"?p[p.length-1]=="\\"?p=p.slice(0,-1)+d:n=3:p+=d;break;case 3:g(),n=0,d!=="*"&&d!=="?"&&d!=="+"&&u--,p="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${h}"`),g(),c(),o}function Om(e,t,n){const r=Am(Pm(e.path),n),o=ot(r,{record:e,parent:t,children:[],alias:[]});return t&&!o.record.aliasOf==!t.record.aliasOf&&t.children.push(o),o}function Rm(e,t){const n=[],r=new Map;t=Il({strict:!1,end:!0,sensitive:!1},t);function o(g){return r.get(g)}function a(g,v,k){const O=!k,j=Al(g);j.aliasOf=k&&k.record;const K=Il(t,g),q=[j];if("alias"in g){const E=typeof g.alias=="string"?[g.alias]:g.alias;for(const re of E)q.push(Al(ot({},j,{components:k?k.record.components:j.components,path:re,aliasOf:k?k.record:j})))}let V,T;for(const E of q){const{path:re}=E;if(v&&re[0]!=="/"){const le=v.record.path,Ae=le[le.length-1]==="/"?"":"/";E.path=v.record.path+(re&&Ae+re)}if(V=Om(E,v,K),k?k.alias.push(V):(T=T||V,T!==V&&T.alias.push(V),O&&g.name&&!El(V)&&c(g.name)),wd(V)&&d(V),j.children){const le=j.children;for(let Ae=0;Ae<le.length;Ae++)a(le[Ae],V,k&&k.children[Ae])}k=k||V}return T?()=>{c(T)}:Cs}function c(g){if(vd(g)){const v=r.get(g);v&&(r.delete(g),n.splice(n.indexOf(v),1),v.children.forEach(c),v.alias.forEach(c))}else{const v=n.indexOf(g);v>-1&&(n.splice(v,1),g.record.name&&r.delete(g.record.name),g.children.forEach(c),g.alias.forEach(c))}}function u(){return n}function d(g){const v=Tm(g,n);n.splice(v,0,g),g.record.name&&!El(g)&&r.set(g.record.name,g)}function h(g,v){let k,O={},j,K;if("name"in g&&g.name){if(k=r.get(g.name),!k)throw Zr(1,{location:g});K=k.record.name,O=ot(Cl(v.params,k.keys.filter(T=>!T.optional).concat(k.parent?k.parent.keys.filter(T=>T.optional):[]).map(T=>T.name)),g.params&&Cl(g.params,k.keys.map(T=>T.name))),j=k.stringify(O)}else if(g.path!=null)j=g.path,k=n.find(T=>T.re.test(j)),k&&(O=k.parse(j),K=k.record.name);else{if(k=v.name?r.get(v.name):n.find(T=>T.re.test(v.path)),!k)throw Zr(1,{location:g,currentLocation:v});K=k.record.name,O=ot({},v.params,g.params),j=k.stringify(O)}const q=[];let V=k;for(;V;)q.unshift(V.record),V=V.parent;return{name:K,path:j,params:O,matched:q,meta:$m(q)}}e.forEach(g=>a(g));function p(){n.length=0,r.clear()}return{addRoute:a,resolve:h,removeRoute:c,clearRoutes:p,getRoutes:u,getRecordMatcher:o}}function Cl(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function Al(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:Dm(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function Dm(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]=typeof n=="object"?n[r]:n;return t}function El(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function $m(e){return e.reduce((t,n)=>ot(t,n.meta),{})}function Il(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function Tm(e,t){let n=0,r=t.length;for(;n!==r;){const a=n+r>>1;_d(e,t[a])<0?r=a:n=a+1}const o=Fm(e);return o&&(r=t.lastIndexOf(o,r-1)),r}function Fm(e){let t=e;for(;t=t.parent;)if(wd(t)&&_d(e,t)===0)return t}function wd({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function Mm(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let o=0;o<r.length;++o){const a=r[o].replace(fd," "),c=a.indexOf("="),u=Ms(c<0?a:a.slice(0,c)),d=c<0?null:Ms(a.slice(c+1));if(u in t){let h=t[u];fn(h)||(h=t[u]=[h]),h.push(d)}else t[u]=d}return t}function Sl(e){let t="";for(let n in e){const r=e[n];if(n=nm(n),r==null){r!==void 0&&(t+=(t.length?"&":"")+n);continue}(fn(r)?r.map(a=>a&&ba(a)):[r&&ba(r)]).forEach(a=>{a!==void 0&&(t+=(t.length?"&":"")+n,a!=null&&(t+="="+a))})}return t}function Bm(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=fn(r)?r.map(o=>o==null?null:""+o):r==null?r:""+r)}return t}const Nm=Symbol(""),Pl=Symbol(""),si=Symbol(""),Ya=Symbol(""),wa=Symbol("");function fs(){let e=[];function t(r){return e.push(r),()=>{const o=e.indexOf(r);o>-1&&e.splice(o,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function nr(e,t,n,r,o,a=c=>c()){const c=r&&(r.enterCallbacks[o]=r.enterCallbacks[o]||[]);return()=>new Promise((u,d)=>{const h=v=>{v===!1?d(Zr(4,{from:n,to:t})):v instanceof Error?d(v):km(v)?d(Zr(2,{from:t,to:v})):(c&&r.enterCallbacks[o]===c&&typeof v=="function"&&c.push(v),u())},p=a(()=>e.call(r&&r.instances[o],t,n,h));let g=Promise.resolve(p);e.length<3&&(g=g.then(h)),g.catch(v=>d(v))})}function Ji(e,t,n,r,o=a=>a()){const a=[];for(const c of e)for(const u in c.components){let d=c.components[u];if(!(t!=="beforeRouteEnter"&&!c.instances[u]))if(ud(d)){const p=(d.__vccOpts||d)[t];p&&a.push(nr(p,n,r,c,u,o))}else{let h=d();a.push(()=>h.then(p=>{if(!p)throw new Error(`Couldn't resolve component "${u}" at "${c.path}"`);const g=Hh(p)?p.default:p;c.mods[u]=p,c.components[u]=g;const k=(g.__vccOpts||g)[t];return k&&nr(k,n,r,c,u,o)()}))}}return a}function Ol(e){const t=en(si),n=en(Ya),r=et(()=>{const d=Ce(e.to);return t.resolve(d)}),o=et(()=>{const{matched:d}=r.value,{length:h}=d,p=d[h-1],g=n.matched;if(!p||!g.length)return-1;const v=g.findIndex(Xr.bind(null,p));if(v>-1)return v;const k=Rl(d[h-2]);return h>1&&Rl(p)===k&&g[g.length-1].path!==k?g.findIndex(Xr.bind(null,d[h-2])):v}),a=et(()=>o.value>-1&&Km(n.params,r.value.params)),c=et(()=>o.value>-1&&o.value===n.matched.length-1&&gd(n.params,r.value.params));function u(d={}){if(Um(d)){const h=t[Ce(e.replace)?"replace":"push"](Ce(e.to)).catch(Cs);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>h),h}return Promise.resolve()}return{route:r,href:et(()=>r.value.href),isActive:a,isExactActive:c,navigate:u}}function Lm(e){return e.length===1?e[0]:e}const jm=ct({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Ol,setup(e,{slots:t}){const n=Er(Ol(e)),{options:r}=en(si),o=et(()=>({[Dl(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Dl(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const a=t.default&&Lm(t.default(n));return e.custom?a:zr("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:o.value},a)}}}),qm=jm;function Um(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Km(e,t){for(const n in t){const r=t[n],o=e[n];if(typeof r=="string"){if(r!==o)return!1}else if(!fn(o)||o.length!==r.length||r.some((a,c)=>a!==o[c]))return!1}return!0}function Rl(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Dl=(e,t,n)=>e??t??n,Vm=ct({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const r=en(wa),o=et(()=>e.route||r.value),a=en(Pl,0),c=et(()=>{let h=Ce(a);const{matched:p}=o.value;let g;for(;(g=p[h])&&!g.components;)h++;return h}),u=et(()=>o.value.matched[c.value]);ks(Pl,et(()=>c.value+1)),ks(Nm,u),ks(wa,o);const d=Ie();return tn(()=>[d.value,u.value,e.name],([h,p,g],[v,k,O])=>{p&&(p.instances[g]=h,k&&k!==p&&h&&h===v&&(p.leaveGuards.size||(p.leaveGuards=k.leaveGuards),p.updateGuards.size||(p.updateGuards=k.updateGuards))),h&&p&&(!k||!Xr(p,k)||!v)&&(p.enterCallbacks[g]||[]).forEach(j=>j(h))},{flush:"post"}),()=>{const h=o.value,p=e.name,g=u.value,v=g&&g.components[p];if(!v)return $l(n.default,{Component:v,route:h});const k=g.props[p],O=k?k===!0?h.params:typeof k=="function"?k(h):k:null,K=zr(v,ot({},O,t,{onVnodeUnmounted:q=>{q.component.isUnmounted&&(g.instances[p]=null)},ref:d}));return $l(n.default,{Component:K,route:h})||K}}});function $l(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const Hm=Vm;function Wm(e){const t=Rm(e.routes,e),n=e.parseQuery||Mm,r=e.stringifyQuery||Sl,o=e.history,a=fs(),c=fs(),u=fs(),d=wu(Gn);let h=Gn;Ur&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const p=Yi.bind(null,Z=>""+Z),g=Yi.bind(null,sm),v=Yi.bind(null,Ms);function k(Z,we){let Q,Ee;return vd(Z)?(Q=t.getRecordMatcher(Z),Ee=we):Ee=Z,t.addRoute(Ee,Q)}function O(Z){const we=t.getRecordMatcher(Z);we&&t.removeRoute(we)}function j(){return t.getRoutes().map(Z=>Z.record)}function K(Z){return!!t.getRecordMatcher(Z)}function q(Z,we){if(we=ot({},we||d.value),typeof Z=="string"){const N=Gi(n,Z,we.path),X=t.resolve({path:N.path},we),te=o.createHref(N.fullPath);return ot(N,X,{params:v(X.params),hash:Ms(N.hash),redirectedFrom:void 0,href:te})}let Q;if(Z.path!=null)Q=ot({},Z,{path:Gi(n,Z.path,we.path).path});else{const N=ot({},Z.params);for(const X in N)N[X]==null&&delete N[X];Q=ot({},Z,{params:g(N)}),we.params=g(we.params)}const Ee=t.resolve(Q,we),tt=Z.hash||"";Ee.params=p(v(Ee.params));const w=am(r,ot({},Z,{hash:tm(tt),path:Ee.path})),A=o.createHref(w);return ot({fullPath:w,hash:tt,query:r===Sl?Bm(Z.query):Z.query||{}},Ee,{redirectedFrom:void 0,href:A})}function V(Z){return typeof Z=="string"?Gi(n,Z,d.value.path):ot({},Z)}function T(Z,we){if(h!==Z)return Zr(8,{from:we,to:Z})}function E(Z){return Ae(Z)}function re(Z){return E(ot(V(Z),{replace:!0}))}function le(Z){const we=Z.matched[Z.matched.length-1];if(we&&we.redirect){const{redirect:Q}=we;let Ee=typeof Q=="function"?Q(Z):Q;return typeof Ee=="string"&&(Ee=Ee.includes("?")||Ee.includes("#")?Ee=V(Ee):{path:Ee},Ee.params={}),ot({query:Z.query,hash:Z.hash,params:Ee.path!=null?{}:Z.params},Ee)}}function Ae(Z,we){const Q=h=q(Z),Ee=d.value,tt=Z.state,w=Z.force,A=Z.replace===!0,N=le(Q);if(N)return Ae(ot(V(N),{state:typeof N=="object"?ot({},tt,N.state):tt,force:w,replace:A}),we||Q);const X=Q;X.redirectedFrom=we;let te;return!w&&cm(r,Ee,Q)&&(te=Zr(16,{to:X,from:Ee}),Re(Ee,Ee,!0,!1)),(te?Promise.resolve(te):Oe(X,Ee)).catch(ee=>$n(ee)?$n(ee,2)?ee:L(ee):G(ee,X,Ee)).then(ee=>{if(ee){if($n(ee,2))return Ae(ot({replace:A},V(ee.to),{state:typeof ee.to=="object"?ot({},tt,ee.to.state):tt,force:w}),we||X)}else ee=fe(X,Ee,!0,A,tt);return Ue(X,Ee,ee),ee})}function Pe(Z,we){const Q=T(Z,we);return Q?Promise.reject(Q):Promise.resolve()}function se(Z){const we=zt.values().next().value;return we&&typeof we.runWithContext=="function"?we.runWithContext(Z):Z()}function Oe(Z,we){let Q;const[Ee,tt,w]=zm(Z,we);Q=Ji(Ee.reverse(),"beforeRouteLeave",Z,we);for(const N of Ee)N.leaveGuards.forEach(X=>{Q.push(nr(X,Z,we))});const A=Pe.bind(null,Z,we);return Q.push(A),mt(Q).then(()=>{Q=[];for(const N of a.list())Q.push(nr(N,Z,we));return Q.push(A),mt(Q)}).then(()=>{Q=Ji(tt,"beforeRouteUpdate",Z,we);for(const N of tt)N.updateGuards.forEach(X=>{Q.push(nr(X,Z,we))});return Q.push(A),mt(Q)}).then(()=>{Q=[];for(const N of w)if(N.beforeEnter)if(fn(N.beforeEnter))for(const X of N.beforeEnter)Q.push(nr(X,Z,we));else Q.push(nr(N.beforeEnter,Z,we));return Q.push(A),mt(Q)}).then(()=>(Z.matched.forEach(N=>N.enterCallbacks={}),Q=Ji(w,"beforeRouteEnter",Z,we,se),Q.push(A),mt(Q))).then(()=>{Q=[];for(const N of c.list())Q.push(nr(N,Z,we));return Q.push(A),mt(Q)}).catch(N=>$n(N,8)?N:Promise.reject(N))}function Ue(Z,we,Q){u.list().forEach(Ee=>se(()=>Ee(Z,we,Q)))}function fe(Z,we,Q,Ee,tt){const w=T(Z,we);if(w)return w;const A=we===Gn,N=Ur?history.state:{};Q&&(Ee||A?o.replace(Z.fullPath,ot({scroll:A&&N&&N.scroll},tt)):o.push(Z.fullPath,tt)),d.value=Z,Re(Z,we,Q,A),L()}let Se;function qe(){Se||(Se=o.listen((Z,we,Q)=>{if(!jt.listening)return;const Ee=q(Z),tt=le(Ee);if(tt){Ae(ot(tt,{replace:!0,force:!0}),Ee).catch(Cs);return}h=Ee;const w=d.value;Ur&&gm(bl(w.fullPath,Q.delta),ri()),Oe(Ee,w).catch(A=>$n(A,12)?A:$n(A,2)?(Ae(ot(V(A.to),{force:!0}),Ee).then(N=>{$n(N,20)&&!Q.delta&&Q.type===Bs.pop&&o.go(-1,!1)}).catch(Cs),Promise.reject()):(Q.delta&&o.go(-Q.delta,!1),G(A,Ee,w))).then(A=>{A=A||fe(Ee,w,!1),A&&(Q.delta&&!$n(A,8)?o.go(-Q.delta,!1):Q.type===Bs.pop&&$n(A,20)&&o.go(-1,!1)),Ue(Ee,w,A)}).catch(Cs)}))}let st=fs(),He=fs(),Be;function G(Z,we,Q){L(Z);const Ee=He.list();return Ee.length?Ee.forEach(tt=>tt(Z,we,Q)):console.error(Z),Promise.reject(Z)}function W(){return Be&&d.value!==Gn?Promise.resolve():new Promise((Z,we)=>{st.add([Z,we])})}function L(Z){return Be||(Be=!Z,qe(),st.list().forEach(([we,Q])=>Z?Q(Z):we()),st.reset()),Z}function Re(Z,we,Q,Ee){const{scrollBehavior:tt}=e;if(!Ur||!tt)return Promise.resolve();const w=!Q&&ym(bl(Z.fullPath,0))||(Ee||!Q)&&history.state&&history.state.scroll||null;return un().then(()=>tt(Z,we,w)).then(A=>A&&mm(A)).catch(A=>G(A,Z,we))}const _e=Z=>o.go(Z);let Qe;const zt=new Set,jt={currentRoute:d,listening:!0,addRoute:k,removeRoute:O,clearRoutes:t.clearRoutes,hasRoute:K,getRoutes:j,resolve:q,options:e,push:E,replace:re,go:_e,back:()=>_e(-1),forward:()=>_e(1),beforeEach:a.add,beforeResolve:c.add,afterEach:u.add,onError:He.add,isReady:W,install(Z){const we=this;Z.component("RouterLink",qm),Z.component("RouterView",Hm),Z.config.globalProperties.$router=we,Object.defineProperty(Z.config.globalProperties,"$route",{enumerable:!0,get:()=>Ce(d)}),Ur&&!Qe&&d.value===Gn&&(Qe=!0,E(o.location).catch(tt=>{}));const Q={};for(const tt in Gn)Object.defineProperty(Q,tt,{get:()=>d.value[tt],enumerable:!0});Z.provide(si,we),Z.provide(Ya,bu(Q)),Z.provide(wa,d);const Ee=Z.unmount;zt.add(Z),Z.unmount=function(){zt.delete(Z),zt.size<1&&(h=Gn,Se&&Se(),Se=null,d.value=Gn,Qe=!1,Be=!1),Ee()}}};function mt(Z){return Z.reduce((we,Q)=>we.then(()=>se(Q)),Promise.resolve())}return jt}function zm(e,t){const n=[],r=[],o=[],a=Math.max(t.matched.length,e.matched.length);for(let c=0;c<a;c++){const u=t.matched[c];u&&(e.matched.find(h=>Xr(h,u))?r.push(u):n.push(u));const d=e.matched[c];d&&(t.matched.find(h=>Xr(h,d))||o.push(d))}return[n,r,o]}function Qm(){return en(si)}function kd(e){return en(Ya)}const Ym=["aria-label"],Gm={key:0},Jm={key:1},Xm=ct({__name:"ThemeSwitcher",setup(e){const t=Ie("light"),n=()=>{const r=t.value==="light"?"dark":"light";t.value=r,document.documentElement.setAttribute("data-theme",r),document.documentElement.setAttribute("data-bs-theme",r),localStorage.setItem("theme",r)};return In(()=>{const r=localStorage.getItem("theme"),o=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;let a="light";r?a=r:o&&(a="dark"),t.value=a,document.documentElement.setAttribute("data-theme",a),document.documentElement.setAttribute("data-bs-theme",a)}),(r,o)=>(U(),J("button",{type:"button",class:"btn btn-outline-primary",onClick:n,"aria-label":`Switch to ${t.value==="light"?"dark":"light"} mode`},[t.value==="light"?(U(),J("span",Gm,"  Dark ")):(U(),J("span",Jm,"  Light "))],8,Ym))}}),pn=(e,t)=>{const n=e.__vccOpts||e;for(const[r,o]of t)n[r]=o;return n},Zm=pn(Xm,[["__scopeId","data-v-c333c158"]]);/*!
 * pinia v3.0.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let xd;const oi=e=>xd=e,Cd=Symbol();function ka(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var Es;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Es||(Es={}));function eg(){const e=Yo(!0),t=e.run(()=>Ie({}));let n=[],r=[];const o=La({install(a){oi(o),o._a=a,a.provide(Cd,o),a.config.globalProperties.$pinia=o,r.forEach(c=>n.push(c)),r=[]},use(a){return this._a?n.push(a):r.push(a),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return o}const Ad=()=>{};function Tl(e,t,n,r=Ad){e.push(t);const o=()=>{const a=e.indexOf(t);a>-1&&(e.splice(a,1),r())};return!n&&Ra()&&su(o),o}function Nr(e,...t){e.slice().forEach(n=>{n(...t)})}const tg=e=>e(),Fl=Symbol(),Xi=Symbol();function xa(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,r)=>e.set(r,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n],o=e[n];ka(o)&&ka(r)&&e.hasOwnProperty(n)&&!_t(r)&&!sr(r)?e[n]=xa(o,r):e[n]=r}return e}const ng=Symbol();function rg(e){return!ka(e)||!Object.prototype.hasOwnProperty.call(e,ng)}const{assign:Xn}=Object;function sg(e){return!!(_t(e)&&e.effect)}function og(e,t,n,r){const{state:o,actions:a,getters:c}=t,u=n.state.value[e];let d;function h(){u||(n.state.value[e]=o?o():{});const p=ja(n.state.value[e]);return Xn(p,a,Object.keys(c||{}).reduce((g,v)=>(g[v]=La(et(()=>{oi(n);const k=n._s.get(e);return c[v].call(k,k)})),g),{}))}return d=Ed(e,h,t,n,r,!0),d}function Ed(e,t,n={},r,o,a){let c;const u=Xn({actions:{}},n),d={deep:!0};let h,p,g=[],v=[],k;const O=r.state.value[e];!a&&!O&&(r.state.value[e]={}),Ie({});let j;function K(Pe){let se;h=p=!1,typeof Pe=="function"?(Pe(r.state.value[e]),se={type:Es.patchFunction,storeId:e,events:k}):(xa(r.state.value[e],Pe),se={type:Es.patchObject,payload:Pe,storeId:e,events:k});const Oe=j=Symbol();un().then(()=>{j===Oe&&(h=!0)}),p=!0,Nr(g,se,r.state.value[e])}const q=a?function(){const{state:se}=n,Oe=se?se():{};this.$patch(Ue=>{Xn(Ue,Oe)})}:Ad;function V(){c.stop(),g=[],v=[],r._s.delete(e)}const T=(Pe,se="")=>{if(Fl in Pe)return Pe[Xi]=se,Pe;const Oe=function(){oi(r);const Ue=Array.from(arguments),fe=[],Se=[];function qe(Be){fe.push(Be)}function st(Be){Se.push(Be)}Nr(v,{args:Ue,name:Oe[Xi],store:re,after:qe,onError:st});let He;try{He=Pe.apply(this&&this.$id===e?this:re,Ue)}catch(Be){throw Nr(Se,Be),Be}return He instanceof Promise?He.then(Be=>(Nr(fe,Be),Be)).catch(Be=>(Nr(Se,Be),Promise.reject(Be))):(Nr(fe,He),He)};return Oe[Fl]=!0,Oe[Xi]=se,Oe},E={_p:r,$id:e,$onAction:Tl.bind(null,v),$patch:K,$reset:q,$subscribe(Pe,se={}){const Oe=Tl(g,Pe,se.detached,()=>Ue()),Ue=c.run(()=>tn(()=>r.state.value[e],fe=>{(se.flush==="sync"?p:h)&&Pe({storeId:e,type:Es.direct,events:k},fe)},Xn({},d,se)));return Oe},$dispose:V},re=Er(E);r._s.set(e,re);const Ae=(r._a&&r._a.runWithContext||tg)(()=>r._e.run(()=>(c=Yo()).run(()=>t({action:T}))));for(const Pe in Ae){const se=Ae[Pe];if(_t(se)&&!sg(se)||sr(se))a||(O&&rg(se)&&(_t(se)?se.value=O[Pe]:xa(se,O[Pe])),r.state.value[e][Pe]=se);else if(typeof se=="function"){const Oe=T(se,Pe);Ae[Pe]=Oe,u.actions[Pe]=se}}return Xn(re,Ae),Xn(Ze(re),Ae),Object.defineProperty(re,"$state",{get:()=>r.state.value[e],set:Pe=>{K(se=>{Xn(se,Pe)})}}),r._p.forEach(Pe=>{Xn(re,c.run(()=>Pe({store:re,app:r._a,pinia:r,options:u})))}),O&&a&&n.hydrate&&n.hydrate(re.$state,O),h=!0,p=!0,re}/*! #__NO_SIDE_EFFECTS__ */function ii(e,t,n){let r;const o=typeof t=="function";r=o?n:t;function a(c,u){const d=Pp();return c=c||(d?en(Cd,null):null),c&&oi(c),c=xd,c._s.has(e)||(o?Ed(e,t,r,c):og(e,r,c)),c._s.get(e)}return a.$id=e,a}const Is=ii("importStatus",()=>{const e=Ie([]);return{imports:e,addImport:d=>{const h={...d,createdAt:new Date};return e.value.push(h),h.id},updateImport:(d,h)=>{const p=e.value.findIndex(g=>g.id===d);p!==-1&&(e.value[p]={...e.value[p],...h})},completeImport:(d,h)=>{const p=e.value.findIndex(g=>g.id===d);p!==-1&&(e.value[p]={...e.value[p],status:h?"failed":"completed",errorMessage:h,completedAt:new Date,progress:100})},removeImport:d=>{e.value=e.value.filter(h=>h.id!==d)},clearCompletedImports:()=>{e.value=e.value.filter(d=>d.status==="pending"||d.status==="processing")},getActiveImports:()=>e.value.filter(d=>d.status==="pending"||d.status==="processing"),getCompletedImports:()=>e.value.filter(d=>d.status==="completed"||d.status==="failed")}}),ig={key:0,class:"import-status-indicator d-flex align-items-center"},ag={class:"d-flex align-items-center"},cg={class:"me-2"},lg={class:"d-flex align-items-center"},ug={class:"fw-medium"},dg={class:"progress mt-1",style:{height:"8px",width:"150px"}},fg=["aria-valuenow"],pg={class:"small text-muted"},hg={class:"import-alerts position-fixed top-0 end-0 p-3",style:{"z-index":"1050"}},mg={class:"d-flex justify-content-between"},gg={key:0,class:"small"},yg=["onClick"],vg=ct({__name:"ImportStatusIndicator",setup(e){const t=Is(),n=et(()=>t.getActiveImports()),r=et(()=>t.getCompletedImports()),o=et(()=>n.value.length>0?n.value[0]:null),a=u=>{t.removeImport(u)};let c=null;return In(()=>{c=window.setInterval(()=>{const u=new Date;t.imports.forEach(d=>{if((d.status==="completed"||d.status==="failed")&&d.completedAt){const h=new Date(d.completedAt);u.getTime()-h.getTime()>5e3&&t.removeImport(d.id)}})},1e3)}),js(()=>{c&&clearInterval(c)}),(u,d)=>(U(),J(Je,null,[o.value?(U(),J("div",ig,[b("div",ag,[b("div",cg,[b("div",lg,[d[0]||(d[0]=b("span",{class:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"},null,-1)),b("span",ug,oe(o.value.name),1)]),b("div",dg,[b("div",{class:"progress-bar",role:"progressbar",style:Nn({width:o.value.progress+"%"}),"aria-valuenow":o.value.progress,"aria-valuemin":"0","aria-valuemax":"100"},null,12,fg)]),b("div",pg,oe(o.value.processedItems)+" / "+oe(o.value.totalItems),1)])])])):$e("",!0),b("div",hg,[We(Dh,{name:"alert",tag:"div"},{default:rt(()=>[(U(!0),J(Je,null,Bt(r.value,h=>(U(),J("div",{key:h.id,class:It(["alert",h.status==="completed"?"alert-success":"alert-danger"]),role:"alert"},[b("div",mg,[b("div",null,[b("strong",null,oe(h.name),1),Wt(" "+oe(h.status==="completed"?"import completed successfully!":"import failed.")+" ",1),h.errorMessage?(U(),J("div",gg,oe(h.errorMessage),1)):$e("",!0)]),b("button",{type:"button",class:"btn-close",onClick:p=>a(h.id)},null,8,yg)])],2))),128))]),_:1})])],64))}}),bg=pn(vg,[["__scopeId","data-v-5aaf7e33"]]),_g={class:"navbar navbar-expand-md navbar-light bg-body fixed-top border-bottom"},wg={class:"container-fluid"},kg=["aria-expanded"],xg={class:"navbar-nav me-auto"},Cg={class:"nav-item"},Ag={class:"nav-item"},Eg={class:"nav-item"},Ig={class:"nav-item"},Sg={class:"d-flex align-items-center"},Pg=ct({__name:"Navigation",setup(e){const t=kd(),n=et(()=>t.name==="decks"||t.name==="deck-detail"||t.name==="deck-import"),r=Ie(!1);return(o,a)=>{const c=Zo("router-link");return U(),J("nav",_g,[b("div",wg,[We(c,{to:"/",class:"navbar-brand"},{default:rt(()=>[...a[1]||(a[1]=[b("img",{style:{"max-width":"40px"},src:Vh,alt:"logo"},null,-1),Wt(" MTG Collection Tracker ",-1)])]),_:1}),b("button",{class:"navbar-toggler",type:"button",onClick:a[0]||(a[0]=u=>r.value=!r.value),"aria-controls":"navbarNav","aria-expanded":r.value,"aria-label":"Toggle navigation"},[...a[2]||(a[2]=[b("span",{class:"navbar-toggler-icon"},null,-1)])],8,kg),b("div",{id:"navbarNav",class:It(["collapse navbar-collapse",{show:r.value}])},[b("ul",xg,[b("li",Cg,[We(c,{to:"/",class:It(["nav-link",{active:Ce(t).name==="home"}])},{default:rt(()=>[...a[3]||(a[3]=[Wt(" Dashboard ",-1)])]),_:1},8,["class"])]),b("li",Ag,[We(c,{to:"/decks",class:It(["nav-link",{active:n.value}])},{default:rt(()=>[...a[4]||(a[4]=[Wt(" Decks ",-1)])]),_:1},8,["class"])]),b("li",Eg,[We(c,{to:"/cards",class:It(["nav-link",{active:Ce(t).name==="cards"}])},{default:rt(()=>[...a[5]||(a[5]=[Wt(" Cards ",-1)])]),_:1},8,["class"])]),b("li",Ig,[We(c,{to:"/import/cardmarket",class:It(["nav-link",{active:Ce(t).name==="cardmarket-import"}])},{default:rt(()=>[...a[6]||(a[6]=[Wt(" Cardmarket Import ",-1)])]),_:1},8,["class"])])]),b("div",Sg,[We(bg),We(Zm)])],2)])])}}}),Og=pn(Pg,[["__scopeId","data-v-3f898029"]]),Rg={class:"container-lg",style:{"padding-top":"calc(var(--app-navbar-h) + 1.5rem)","padding-bottom":"1.5rem"}},Dg=ct({__name:"App",setup(e){return(t,n)=>{const r=Zo("router-view");return U(),J(Je,null,[We(Og),b("main",Rg,[We(r)])],64)}}});var $g=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Tg(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var So={exports:{}},Fg=So.exports,Ml;function Mg(){return Ml||(Ml=1,(function(e,t){(function(n,r){e.exports=r()})(Fg,function(){var n=function(s,i){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,f){l.__proto__=f}||function(l,f){for(var m in f)Object.prototype.hasOwnProperty.call(f,m)&&(l[m]=f[m])})(s,i)},r=function(){return(r=Object.assign||function(s){for(var i,l=1,f=arguments.length;l<f;l++)for(var m in i=arguments[l])Object.prototype.hasOwnProperty.call(i,m)&&(s[m]=i[m]);return s}).apply(this,arguments)};function o(s,i,l){for(var f,m=0,y=i.length;m<y;m++)!f&&m in i||((f=f||Array.prototype.slice.call(i,0,m))[m]=i[m]);return s.concat(f||Array.prototype.slice.call(i))}var a=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:$g,c=Object.keys,u=Array.isArray;function d(s,i){return typeof i!="object"||c(i).forEach(function(l){s[l]=i[l]}),s}typeof Promise>"u"||a.Promise||(a.Promise=Promise);var h=Object.getPrototypeOf,p={}.hasOwnProperty;function g(s,i){return p.call(s,i)}function v(s,i){typeof i=="function"&&(i=i(h(s))),(typeof Reflect>"u"?c:Reflect.ownKeys)(i).forEach(function(l){O(s,l,i[l])})}var k=Object.defineProperty;function O(s,i,l,f){k(s,i,d(l&&g(l,"get")&&typeof l.get=="function"?{get:l.get,set:l.set,configurable:!0}:{value:l,configurable:!0,writable:!0},f))}function j(s){return{from:function(i){return s.prototype=Object.create(i.prototype),O(s.prototype,"constructor",s),{extend:v.bind(null,s.prototype)}}}}var K=Object.getOwnPropertyDescriptor,q=[].slice;function V(s,i,l){return q.call(s,i,l)}function T(s,i){return i(s)}function E(s){if(!s)throw new Error("Assertion Failed")}function re(s){a.setImmediate?setImmediate(s):setTimeout(s,0)}function le(s,i){if(typeof i=="string"&&g(s,i))return s[i];if(!i)return s;if(typeof i!="string"){for(var l=[],f=0,m=i.length;f<m;++f){var y=le(s,i[f]);l.push(y)}return l}var _=i.indexOf(".");if(_!==-1){var x=s[i.substr(0,_)];return x==null?void 0:le(x,i.substr(_+1))}}function Ae(s,i,l){if(s&&i!==void 0&&!("isFrozen"in Object&&Object.isFrozen(s)))if(typeof i!="string"&&"length"in i){E(typeof l!="string"&&"length"in l);for(var f=0,m=i.length;f<m;++f)Ae(s,i[f],l[f])}else{var y,_,x=i.indexOf(".");x!==-1?(y=i.substr(0,x),(_=i.substr(x+1))===""?l===void 0?u(s)&&!isNaN(parseInt(y))?s.splice(y,1):delete s[y]:s[y]=l:Ae(x=!(x=s[y])||!g(s,y)?s[y]={}:x,_,l)):l===void 0?u(s)&&!isNaN(parseInt(i))?s.splice(i,1):delete s[i]:s[i]=l}}function Pe(s){var i,l={};for(i in s)g(s,i)&&(l[i]=s[i]);return l}var se=[].concat;function Oe(s){return se.apply([],s)}var Ke="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Oe([8,16,32,64].map(function(s){return["Int","Uint","Float"].map(function(i){return i+s+"Array"})}))).filter(function(s){return a[s]}),Ue=new Set(Ke.map(function(s){return a[s]})),fe=null;function Se(s){return fe=new WeakMap,s=(function i(l){if(!l||typeof l!="object")return l;var f=fe.get(l);if(f)return f;if(u(l)){f=[],fe.set(l,f);for(var m=0,y=l.length;m<y;++m)f.push(i(l[m]))}else if(Ue.has(l.constructor))f=l;else{var _,x=h(l);for(_ in f=x===Object.prototype?{}:Object.create(x),fe.set(l,f),l)g(l,_)&&(f[_]=i(l[_]))}return f})(s),fe=null,s}var qe={}.toString;function st(s){return qe.call(s).slice(8,-1)}var He=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Be=typeof He=="symbol"?function(s){var i;return s!=null&&(i=s[He])&&i.apply(s)}:function(){return null};function G(s,i){return i=s.indexOf(i),0<=i&&s.splice(i,1),0<=i}var W={};function L(s){var i,l,f,m;if(arguments.length===1){if(u(s))return s.slice();if(this===W&&typeof s=="string")return[s];if(m=Be(s)){for(l=[];!(f=m.next()).done;)l.push(f.value);return l}if(s==null)return[s];if(typeof(i=s.length)!="number")return[s];for(l=new Array(i);i--;)l[i]=s[i];return l}for(i=arguments.length,l=new Array(i);i--;)l[i]=arguments[i];return l}var Re=typeof Symbol<"u"?function(s){return s[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Me=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],rn=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Me),_e={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Qe(s,i){this.name=s,this.message=i}function zt(s,i){return s+". Errors: "+Object.keys(i).map(function(l){return i[l].toString()}).filter(function(l,f,m){return m.indexOf(l)===f}).join(`
`)}function jt(s,i,l,f){this.failures=i,this.failedKeys=f,this.successCount=l,this.message=zt(s,i)}function mt(s,i){this.name="BulkError",this.failures=Object.keys(i).map(function(l){return i[l]}),this.failuresByPos=i,this.message=zt(s,this.failures)}j(Qe).from(Error).extend({toString:function(){return this.name+": "+this.message}}),j(jt).from(Qe),j(mt).from(Qe);var Z=rn.reduce(function(s,i){return s[i]=i+"Error",s},{}),we=Qe,Q=rn.reduce(function(s,i){var l=i+"Error";function f(m,y){this.name=l,m?typeof m=="string"?(this.message="".concat(m).concat(y?`
 `+y:""),this.inner=y||null):typeof m=="object"&&(this.message="".concat(m.name," ").concat(m.message),this.inner=m):(this.message=_e[i]||l,this.inner=null)}return j(f).from(we),s[i]=f,s},{});Q.Syntax=SyntaxError,Q.Type=TypeError,Q.Range=RangeError;var Ee=Me.reduce(function(s,i){return s[i+"Error"]=Q[i],s},{}),tt=rn.reduce(function(s,i){return["Syntax","Type","Range"].indexOf(i)===-1&&(s[i+"Error"]=Q[i]),s},{});function w(){}function A(s){return s}function N(s,i){return s==null||s===A?i:function(l){return i(s(l))}}function X(s,i){return function(){s.apply(this,arguments),i.apply(this,arguments)}}function te(s,i){return s===w?i:function(){var l=s.apply(this,arguments);l!==void 0&&(arguments[0]=l);var f=this.onsuccess,m=this.onerror;this.onsuccess=null,this.onerror=null;var y=i.apply(this,arguments);return f&&(this.onsuccess=this.onsuccess?X(f,this.onsuccess):f),m&&(this.onerror=this.onerror?X(m,this.onerror):m),y!==void 0?y:l}}function ee(s,i){return s===w?i:function(){s.apply(this,arguments);var l=this.onsuccess,f=this.onerror;this.onsuccess=this.onerror=null,i.apply(this,arguments),l&&(this.onsuccess=this.onsuccess?X(l,this.onsuccess):l),f&&(this.onerror=this.onerror?X(f,this.onerror):f)}}function me(s,i){return s===w?i:function(l){var f=s.apply(this,arguments);d(l,f);var m=this.onsuccess,y=this.onerror;return this.onsuccess=null,this.onerror=null,l=i.apply(this,arguments),m&&(this.onsuccess=this.onsuccess?X(m,this.onsuccess):m),y&&(this.onerror=this.onerror?X(y,this.onerror):y),f===void 0?l===void 0?void 0:l:d(f,l)}}function pe(s,i){return s===w?i:function(){return i.apply(this,arguments)!==!1&&s.apply(this,arguments)}}function ue(s,i){return s===w?i:function(){var l=s.apply(this,arguments);if(l&&typeof l.then=="function"){for(var f=this,m=arguments.length,y=new Array(m);m--;)y[m]=arguments[m];return l.then(function(){return i.apply(f,y)})}return i.apply(this,arguments)}}tt.ModifyError=jt,tt.DexieError=Qe,tt.BulkError=mt;var ne=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Te(s){ne=s}var ge={},De=100,Ke=typeof Promise>"u"?[]:(function(){var s=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[s,h(s),s];var i=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[i,h(i),s]})(),Me=Ke[0],rn=Ke[1],Ke=Ke[2],rn=rn&&rn.then,Ye=Me&&Me.constructor,Xe=!!Ke,wt=function(s,i){Un.push([s,i]),qt&&(queueMicrotask(qd),qt=!1)},xt=!0,qt=!0,Ct=[],hn=[],Sr=A,gt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:w,pgp:!1,env:{},finalize:w},ke=gt,Un=[],mn=0,Ks=[];function ve(s){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var i=this._PSD=ke;if(typeof s!="function"){if(s!==ge)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&li(this,this._value))}this._state=null,this._value=null,++i.ref,(function l(f,m){try{m(function(y){if(f._state===null){if(y===f)throw new TypeError("A promise cannot be resolved with itself.");var _=f._lib&&Pr();y&&typeof y.then=="function"?l(f,function(x,I){y instanceof ve?y._then(x,I):y.then(x,I)}):(f._state=!0,f._value=y,tc(f)),_&&Or()}},li.bind(null,f))}catch(y){li(f,y)}})(this,s)}var ci={get:function(){var s=ke,i=zs;function l(f,m){var y=this,_=!s.global&&(s!==ke||i!==zs),x=_&&!Vn(),I=new ve(function(P,D){ui(y,new ec(rc(f,s,_,x),rc(m,s,_,x),P,D,s))});return this._consoleTask&&(I._consoleTask=this._consoleTask),I}return l.prototype=ge,l},set:function(s){O(this,"then",s&&s.prototype===ge?ci:{get:function(){return s},set:ci.set})}};function ec(s,i,l,f,m){this.onFulfilled=typeof s=="function"?s:null,this.onRejected=typeof i=="function"?i:null,this.resolve=l,this.reject=f,this.psd=m}function li(s,i){var l,f;hn.push(i),s._state===null&&(l=s._lib&&Pr(),i=Sr(i),s._state=!1,s._value=i,f=s,Ct.some(function(m){return m._value===f._value})||Ct.push(f),tc(s),l&&Or())}function tc(s){var i=s._listeners;s._listeners=[];for(var l=0,f=i.length;l<f;++l)ui(s,i[l]);var m=s._PSD;--m.ref||m.finalize(),mn===0&&(++mn,wt(function(){--mn==0&&di()},[]))}function ui(s,i){if(s._state!==null){var l=s._state?i.onFulfilled:i.onRejected;if(l===null)return(s._state?i.resolve:i.reject)(s._value);++i.psd.ref,++mn,wt(jd,[l,s,i])}else s._listeners.push(i)}function jd(s,i,l){try{var f,m=i._value;!i._state&&hn.length&&(hn=[]),f=ne&&i._consoleTask?i._consoleTask.run(function(){return s(m)}):s(m),i._state||hn.indexOf(m)!==-1||(function(y){for(var _=Ct.length;_;)if(Ct[--_]._value===y._value)return Ct.splice(_,1)})(i),l.resolve(f)}catch(y){l.reject(y)}finally{--mn==0&&di(),--l.psd.ref||l.psd.finalize()}}function qd(){lr(gt,function(){Pr()&&Or()})}function Pr(){var s=xt;return qt=xt=!1,s}function Or(){var s,i,l;do for(;0<Un.length;)for(s=Un,Un=[],l=s.length,i=0;i<l;++i){var f=s[i];f[0].apply(null,f[1])}while(0<Un.length);qt=xt=!0}function di(){var s=Ct;Ct=[],s.forEach(function(f){f._PSD.onunhandled.call(null,f._value,f)});for(var i=Ks.slice(0),l=i.length;l;)i[--l]()}function Vs(s){return new ve(ge,!1,s)}function pt(s,i){var l=ke;return function(){var f=Pr(),m=ke;try{return Hn(l,!0),s.apply(this,arguments)}catch(y){i&&i(y)}finally{Hn(m,!1),f&&Or()}}}v(ve.prototype,{then:ci,_then:function(s,i){ui(this,new ec(null,null,s,i,ke))},catch:function(s){if(arguments.length===1)return this.then(null,s);var i=s,l=arguments[1];return typeof i=="function"?this.then(null,function(f){return(f instanceof i?l:Vs)(f)}):this.then(null,function(f){return(f&&f.name===i?l:Vs)(f)})},finally:function(s){return this.then(function(i){return ve.resolve(s()).then(function(){return i})},function(i){return ve.resolve(s()).then(function(){return Vs(i)})})},timeout:function(s,i){var l=this;return s<1/0?new ve(function(f,m){var y=setTimeout(function(){return m(new Q.Timeout(i))},s);l.then(f,m).finally(clearTimeout.bind(null,y))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&O(ve.prototype,Symbol.toStringTag,"Dexie.Promise"),gt.env=nc(),v(ve,{all:function(){var s=L.apply(null,arguments).map(Qs);return new ve(function(i,l){s.length===0&&i([]);var f=s.length;s.forEach(function(m,y){return ve.resolve(m).then(function(_){s[y]=_,--f||i(s)},l)})})},resolve:function(s){return s instanceof ve?s:s&&typeof s.then=="function"?new ve(function(i,l){s.then(i,l)}):new ve(ge,!0,s)},reject:Vs,race:function(){var s=L.apply(null,arguments).map(Qs);return new ve(function(i,l){s.map(function(f){return ve.resolve(f).then(i,l)})})},PSD:{get:function(){return ke},set:function(s){return ke=s}},totalEchoes:{get:function(){return zs}},newPSD:Kn,usePSD:lr,scheduler:{get:function(){return wt},set:function(s){wt=s}},rejectionMapper:{get:function(){return Sr},set:function(s){Sr=s}},follow:function(s,i){return new ve(function(l,f){return Kn(function(m,y){var _=ke;_.unhandleds=[],_.onunhandled=y,_.finalize=X(function(){var x,I=this;x=function(){I.unhandleds.length===0?m():y(I.unhandleds[0])},Ks.push(function P(){x(),Ks.splice(Ks.indexOf(P),1)}),++mn,wt(function(){--mn==0&&di()},[])},_.finalize),s()},i,l,f)})}}),Ye&&(Ye.allSettled&&O(ve,"allSettled",function(){var s=L.apply(null,arguments).map(Qs);return new ve(function(i){s.length===0&&i([]);var l=s.length,f=new Array(l);s.forEach(function(m,y){return ve.resolve(m).then(function(_){return f[y]={status:"fulfilled",value:_}},function(_){return f[y]={status:"rejected",reason:_}}).then(function(){return--l||i(f)})})})}),Ye.any&&typeof AggregateError<"u"&&O(ve,"any",function(){var s=L.apply(null,arguments).map(Qs);return new ve(function(i,l){s.length===0&&l(new AggregateError([]));var f=s.length,m=new Array(f);s.forEach(function(y,_){return ve.resolve(y).then(function(x){return i(x)},function(x){m[_]=x,--f||l(new AggregateError(m))})})})}),Ye.withResolvers&&(ve.withResolvers=Ye.withResolvers));var At={awaits:0,echoes:0,id:0},Ud=0,Hs=[],Ws=0,zs=0,Kd=0;function Kn(s,i,l,f){var m=ke,y=Object.create(m);return y.parent=m,y.ref=0,y.global=!1,y.id=++Kd,gt.env,y.env=Xe?{Promise:ve,PromiseProp:{value:ve,configurable:!0,writable:!0},all:ve.all,race:ve.race,allSettled:ve.allSettled,any:ve.any,resolve:ve.resolve,reject:ve.reject}:{},i&&d(y,i),++m.ref,y.finalize=function(){--this.parent.ref||this.parent.finalize()},f=lr(y,s,l,f),y.ref===0&&y.finalize(),f}function Rr(){return At.id||(At.id=++Ud),++At.awaits,At.echoes+=De,At.id}function Vn(){return!!At.awaits&&(--At.awaits==0&&(At.id=0),At.echoes=At.awaits*De,!0)}function Qs(s){return At.echoes&&s&&s.constructor===Ye?(Rr(),s.then(function(i){return Vn(),i},function(i){return Vn(),vt(i)})):s}function Vd(){var s=Hs[Hs.length-1];Hs.pop(),Hn(s,!1)}function Hn(s,i){var l,f=ke;(i?!At.echoes||Ws++&&s===ke:!Ws||--Ws&&s===ke)||queueMicrotask(i?(function(m){++zs,At.echoes&&--At.echoes!=0||(At.echoes=At.awaits=At.id=0),Hs.push(ke),Hn(m,!0)}).bind(null,s):Vd),s!==ke&&(ke=s,f===gt&&(gt.env=nc()),Xe&&(l=gt.env.Promise,i=s.env,(f.global||s.global)&&(Object.defineProperty(a,"Promise",i.PromiseProp),l.all=i.all,l.race=i.race,l.resolve=i.resolve,l.reject=i.reject,i.allSettled&&(l.allSettled=i.allSettled),i.any&&(l.any=i.any))))}function nc(){var s=a.Promise;return Xe?{Promise:s,PromiseProp:Object.getOwnPropertyDescriptor(a,"Promise"),all:s.all,race:s.race,allSettled:s.allSettled,any:s.any,resolve:s.resolve,reject:s.reject}:{}}function lr(s,i,l,f,m){var y=ke;try{return Hn(s,!0),i(l,f,m)}finally{Hn(y,!1)}}function rc(s,i,l,f){return typeof s!="function"?s:function(){var m=ke;l&&Rr(),Hn(i,!0);try{return s.apply(this,arguments)}finally{Hn(m,!1),f&&queueMicrotask(Vn)}}}function fi(s){Promise===Ye&&At.echoes===0?Ws===0?s():enqueueNativeMicroTask(s):setTimeout(s,0)}(""+rn).indexOf("[native code]")===-1&&(Rr=Vn=w);var vt=ve.reject,ur="",On="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",sc="String expected.",Dr=[],Ys="__dbnames",pi="readonly",hi="readwrite";function dr(s,i){return s?i?function(){return s.apply(this,arguments)&&i.apply(this,arguments)}:s:i}var oc={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Gs(s){return typeof s!="string"||/\./.test(s)?function(i){return i}:function(i){return i[s]===void 0&&s in i&&delete(i=Se(i))[s],i}}function ic(){throw Q.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function ze(s,i){try{var l=ac(s),f=ac(i);if(l!==f)return l==="Array"?1:f==="Array"?-1:l==="binary"?1:f==="binary"?-1:l==="string"?1:f==="string"?-1:l==="Date"?1:f!=="Date"?NaN:-1;switch(l){case"number":case"Date":case"string":return i<s?1:s<i?-1:0;case"binary":return(function(m,y){for(var _=m.length,x=y.length,I=_<x?_:x,P=0;P<I;++P)if(m[P]!==y[P])return m[P]<y[P]?-1:1;return _===x?0:_<x?-1:1})(cc(s),cc(i));case"Array":return(function(m,y){for(var _=m.length,x=y.length,I=_<x?_:x,P=0;P<I;++P){var D=ze(m[P],y[P]);if(D!==0)return D}return _===x?0:_<x?-1:1})(s,i)}}catch{}return NaN}function ac(s){var i=typeof s;return i!="object"?i:ArrayBuffer.isView(s)?"binary":(s=st(s),s==="ArrayBuffer"?"binary":s)}function cc(s){return s instanceof Uint8Array?s:ArrayBuffer.isView(s)?new Uint8Array(s.buffer,s.byteOffset,s.byteLength):new Uint8Array(s)}function Js(s,i,l){var f=s.schema.yProps;return f?(i&&0<l.numFailures&&(i=i.filter(function(m,y){return!l.failures[y]})),Promise.all(f.map(function(m){return m=m.updatesTable,i?s.db.table(m).where("k").anyOf(i).delete():s.db.table(m).clear()})).then(function(){return l})):l}var lc=(ft.prototype._trans=function(s,i,l){var f=this._tx||ke.trans,m=this.name,y=ne&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(s==="readonly"?"read":"write"," ").concat(this.name));function _(P,D,C){if(!C.schema[m])throw new Q.NotFound("Table "+m+" not part of transaction");return i(C.idbtrans,C)}var x=Pr();try{var I=f&&f.db._novip===this.db._novip?f===ke.trans?f._promise(s,_,l):Kn(function(){return f._promise(s,_,l)},{trans:f,transless:ke.transless||ke}):(function P(D,C,M,S){if(D.idbdb&&(D._state.openComplete||ke.letThrough||D._vip)){var R=D._createTransaction(C,M,D._dbSchema);try{R.create(),D._state.PR1398_maxLoop=3}catch(F){return F.name===Z.InvalidState&&D.isOpen()&&0<--D._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),D.close({disableAutoOpen:!1}),D.open().then(function(){return P(D,C,M,S)})):vt(F)}return R._promise(C,function(F,$){return Kn(function(){return ke.trans=R,S(F,$,R)})}).then(function(F){if(C==="readwrite")try{R.idbtrans.commit()}catch{}return C==="readonly"?F:R._completion.then(function(){return F})})}if(D._state.openComplete)return vt(new Q.DatabaseClosed(D._state.dbOpenError));if(!D._state.isBeingOpened){if(!D._state.autoOpen)return vt(new Q.DatabaseClosed);D.open().catch(w)}return D._state.dbReadyPromise.then(function(){return P(D,C,M,S)})})(this.db,s,[this.name],_);return y&&(I._consoleTask=y,I=I.catch(function(P){return console.trace(P),vt(P)})),I}finally{x&&Or()}},ft.prototype.get=function(s,i){var l=this;return s&&s.constructor===Object?this.where(s).first(i):s==null?vt(new Q.Type("Invalid argument to Table.get()")):this._trans("readonly",function(f){return l.core.get({trans:f,key:s}).then(function(m){return l.hook.reading.fire(m)})}).then(i)},ft.prototype.where=function(s){if(typeof s=="string")return new this.db.WhereClause(this,s);if(u(s))return new this.db.WhereClause(this,"[".concat(s.join("+"),"]"));var i=c(s);if(i.length===1)return this.where(i[0]).equals(s[i[0]]);var l=this.schema.indexes.concat(this.schema.primKey).filter(function(x){if(x.compound&&i.every(function(P){return 0<=x.keyPath.indexOf(P)})){for(var I=0;I<i.length;++I)if(i.indexOf(x.keyPath[I])===-1)return!1;return!0}return!1}).sort(function(x,I){return x.keyPath.length-I.keyPath.length})[0];if(l&&this.db._maxKey!==ur){var y=l.keyPath.slice(0,i.length);return this.where(y).equals(y.map(function(I){return s[I]}))}!l&&ne&&console.warn("The query ".concat(JSON.stringify(s)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(i.join("+"),"]"));var f=this.schema.idxByName;function m(x,I){return ze(x,I)===0}var _=i.reduce(function(C,I){var P=C[0],D=C[1],C=f[I],M=s[I];return[P||C,P||!C?dr(D,C&&C.multi?function(S){return S=le(S,I),u(S)&&S.some(function(R){return m(M,R)})}:function(S){return m(M,le(S,I))}):D]},[null,null]),y=_[0],_=_[1];return y?this.where(y.name).equals(s[y.keyPath]).filter(_):l?this.filter(_):this.where(i).equals("")},ft.prototype.filter=function(s){return this.toCollection().and(s)},ft.prototype.count=function(s){return this.toCollection().count(s)},ft.prototype.offset=function(s){return this.toCollection().offset(s)},ft.prototype.limit=function(s){return this.toCollection().limit(s)},ft.prototype.each=function(s){return this.toCollection().each(s)},ft.prototype.toArray=function(s){return this.toCollection().toArray(s)},ft.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},ft.prototype.orderBy=function(s){return new this.db.Collection(new this.db.WhereClause(this,u(s)?"[".concat(s.join("+"),"]"):s))},ft.prototype.reverse=function(){return this.toCollection().reverse()},ft.prototype.mapToClass=function(s){var i,l=this.db,f=this.name;function m(){return i!==null&&i.apply(this,arguments)||this}(this.schema.mappedClass=s).prototype instanceof ic&&((function(I,P){if(typeof P!="function"&&P!==null)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");function D(){this.constructor=I}n(I,P),I.prototype=P===null?Object.create(P):(D.prototype=P.prototype,new D)})(m,i=s),Object.defineProperty(m.prototype,"db",{get:function(){return l},enumerable:!1,configurable:!0}),m.prototype.table=function(){return f},s=m);for(var y=new Set,_=s.prototype;_;_=h(_))Object.getOwnPropertyNames(_).forEach(function(I){return y.add(I)});function x(I){if(!I)return I;var P,D=Object.create(s.prototype);for(P in I)if(!y.has(P))try{D[P]=I[P]}catch{}return D}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=x,this.hook("reading",x),s},ft.prototype.defineClass=function(){return this.mapToClass(function(s){d(this,s)})},ft.prototype.add=function(s,i){var l=this,f=this.schema.primKey,m=f.auto,y=f.keyPath,_=s;return y&&m&&(_=Gs(y)(s)),this._trans("readwrite",function(x){return l.core.mutate({trans:x,type:"add",keys:i!=null?[i]:null,values:[_]})}).then(function(x){return x.numFailures?ve.reject(x.failures[0]):x.lastResult}).then(function(x){if(y)try{Ae(s,y,x)}catch{}return x})},ft.prototype.update=function(s,i){return typeof s!="object"||u(s)?this.where(":id").equals(s).modify(i):(s=le(s,this.schema.primKey.keyPath),s===void 0?vt(new Q.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(s).modify(i))},ft.prototype.put=function(s,i){var l=this,f=this.schema.primKey,m=f.auto,y=f.keyPath,_=s;return y&&m&&(_=Gs(y)(s)),this._trans("readwrite",function(x){return l.core.mutate({trans:x,type:"put",values:[_],keys:i!=null?[i]:null})}).then(function(x){return x.numFailures?ve.reject(x.failures[0]):x.lastResult}).then(function(x){if(y)try{Ae(s,y,x)}catch{}return x})},ft.prototype.delete=function(s){var i=this;return this._trans("readwrite",function(l){return i.core.mutate({trans:l,type:"delete",keys:[s]}).then(function(f){return Js(i,[s],f)}).then(function(f){return f.numFailures?ve.reject(f.failures[0]):void 0})})},ft.prototype.clear=function(){var s=this;return this._trans("readwrite",function(i){return s.core.mutate({trans:i,type:"deleteRange",range:oc}).then(function(l){return Js(s,null,l)})}).then(function(i){return i.numFailures?ve.reject(i.failures[0]):void 0})},ft.prototype.bulkGet=function(s){var i=this;return this._trans("readonly",function(l){return i.core.getMany({keys:s,trans:l}).then(function(f){return f.map(function(m){return i.hook.reading.fire(m)})})})},ft.prototype.bulkAdd=function(s,i,l){var f=this,m=Array.isArray(i)?i:void 0,y=(l=l||(m?void 0:i))?l.allKeys:void 0;return this._trans("readwrite",function(_){var P=f.schema.primKey,x=P.auto,P=P.keyPath;if(P&&m)throw new Q.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(m&&m.length!==s.length)throw new Q.InvalidArgument("Arguments objects and keys must have the same length");var I=s.length,P=P&&x?s.map(Gs(P)):s;return f.core.mutate({trans:_,type:"add",keys:m,values:P,wantResults:y}).then(function(R){var C=R.numFailures,M=R.results,S=R.lastResult,R=R.failures;if(C===0)return y?M:S;throw new mt("".concat(f.name,".bulkAdd(): ").concat(C," of ").concat(I," operations failed"),R)})})},ft.prototype.bulkPut=function(s,i,l){var f=this,m=Array.isArray(i)?i:void 0,y=(l=l||(m?void 0:i))?l.allKeys:void 0;return this._trans("readwrite",function(_){var P=f.schema.primKey,x=P.auto,P=P.keyPath;if(P&&m)throw new Q.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(m&&m.length!==s.length)throw new Q.InvalidArgument("Arguments objects and keys must have the same length");var I=s.length,P=P&&x?s.map(Gs(P)):s;return f.core.mutate({trans:_,type:"put",keys:m,values:P,wantResults:y}).then(function(R){var C=R.numFailures,M=R.results,S=R.lastResult,R=R.failures;if(C===0)return y?M:S;throw new mt("".concat(f.name,".bulkPut(): ").concat(C," of ").concat(I," operations failed"),R)})})},ft.prototype.bulkUpdate=function(s){var i=this,l=this.core,f=s.map(function(_){return _.key}),m=s.map(function(_){return _.changes}),y=[];return this._trans("readwrite",function(_){return l.getMany({trans:_,keys:f,cache:"clone"}).then(function(x){var I=[],P=[];s.forEach(function(C,M){var S=C.key,R=C.changes,F=x[M];if(F){for(var $=0,B=Object.keys(R);$<B.length;$++){var H=B[$],z=R[H];if(H===i.schema.primKey.keyPath){if(ze(z,S)!==0)throw new Q.Constraint("Cannot update primary key in bulkUpdate()")}else Ae(F,H,z)}y.push(M),I.push(S),P.push(F)}});var D=I.length;return l.mutate({trans:_,type:"put",keys:I,values:P,updates:{keys:f,changeSpecs:m}}).then(function(C){var M=C.numFailures,S=C.failures;if(M===0)return D;for(var R=0,F=Object.keys(S);R<F.length;R++){var $,B=F[R],H=y[Number(B)];H!=null&&($=S[B],delete S[B],S[H]=$)}throw new mt("".concat(i.name,".bulkUpdate(): ").concat(M," of ").concat(D," operations failed"),S)})})})},ft.prototype.bulkDelete=function(s){var i=this,l=s.length;return this._trans("readwrite",function(f){return i.core.mutate({trans:f,type:"delete",keys:s}).then(function(m){return Js(i,s,m)})}).then(function(_){var m=_.numFailures,y=_.lastResult,_=_.failures;if(m===0)return y;throw new mt("".concat(i.name,".bulkDelete(): ").concat(m," of ").concat(l," operations failed"),_)})},ft);function ft(){}function es(s){function i(_,x){if(x){for(var I=arguments.length,P=new Array(I-1);--I;)P[I-1]=arguments[I];return l[_].subscribe.apply(null,P),s}if(typeof _=="string")return l[_]}var l={};i.addEventType=y;for(var f=1,m=arguments.length;f<m;++f)y(arguments[f]);return i;function y(_,x,I){if(typeof _!="object"){var P;x=x||pe;var D={subscribers:[],fire:I=I||w,subscribe:function(C){D.subscribers.indexOf(C)===-1&&(D.subscribers.push(C),D.fire=x(D.fire,C))},unsubscribe:function(C){D.subscribers=D.subscribers.filter(function(M){return M!==C}),D.fire=D.subscribers.reduce(x,I)}};return l[_]=i[_]=D}c(P=_).forEach(function(C){var M=P[C];if(u(M))y(C,P[C][0],P[C][1]);else{if(M!=="asap")throw new Q.InvalidArgument("Invalid event config");var S=y(C,A,function(){for(var R=arguments.length,F=new Array(R);R--;)F[R]=arguments[R];S.subscribers.forEach(function($){re(function(){$.apply(null,F)})})})}})}}function ts(s,i){return j(i).from({prototype:s}),i}function $r(s,i){return!(s.filter||s.algorithm||s.or)&&(i?s.justLimit:!s.replayFilter)}function mi(s,i){s.filter=dr(s.filter,i)}function gi(s,i,l){var f=s.replayFilter;s.replayFilter=f?function(){return dr(f(),i())}:i,s.justLimit=l&&!f}function Xs(s,i){if(s.isPrimKey)return i.primaryKey;var l=i.getIndexByKeyPath(s.index);if(!l)throw new Q.Schema("KeyPath "+s.index+" on object store "+i.name+" is not indexed");return l}function uc(s,i,l){var f=Xs(s,i.schema);return i.openCursor({trans:l,values:!s.keysOnly,reverse:s.dir==="prev",unique:!!s.unique,query:{index:f,range:s.range}})}function Zs(s,i,l,f){var m=s.replayFilter?dr(s.filter,s.replayFilter()):s.filter;if(s.or){var y={},_=function(x,I,P){var D,C;m&&!m(I,P,function(M){return I.stop(M)},function(M){return I.fail(M)})||((C=""+(D=I.primaryKey))=="[object ArrayBuffer]"&&(C=""+new Uint8Array(D)),g(y,C)||(y[C]=!0,i(x,I,P)))};return Promise.all([s.or._iterate(_,l),dc(uc(s,f,l),s.algorithm,_,!s.keysOnly&&s.valueMapper)])}return dc(uc(s,f,l),dr(s.algorithm,m),i,!s.keysOnly&&s.valueMapper)}function dc(s,i,l,f){var m=pt(f?function(y,_,x){return l(f(y),_,x)}:l);return s.then(function(y){if(y)return y.start(function(){var _=function(){return y.continue()};i&&!i(y,function(x){return _=x},function(x){y.stop(x),_=w},function(x){y.fail(x),_=w})||m(y.value,y,function(x){return _=x}),_()})})}var ns=(fc.prototype.execute=function(s){var i=this["@@propmod"];if(i.add!==void 0){var l=i.add;if(u(l))return o(o([],u(s)?s:[],!0),l).sort();if(typeof l=="number")return(Number(s)||0)+l;if(typeof l=="bigint")try{return BigInt(s)+l}catch{return BigInt(0)+l}throw new TypeError("Invalid term ".concat(l))}if(i.remove!==void 0){var f=i.remove;if(u(f))return u(s)?s.filter(function(m){return!f.includes(m)}).sort():[];if(typeof f=="number")return Number(s)-f;if(typeof f=="bigint")try{return BigInt(s)-f}catch{return BigInt(0)-f}throw new TypeError("Invalid subtrahend ".concat(f))}return l=(l=i.replacePrefix)===null||l===void 0?void 0:l[0],l&&typeof s=="string"&&s.startsWith(l)?i.replacePrefix[1]+s.substring(l.length):s},fc);function fc(s){this["@@propmod"]=s}var Hd=(nt.prototype._read=function(s,i){var l=this._ctx;return l.error?l.table._trans(null,vt.bind(null,l.error)):l.table._trans("readonly",s).then(i)},nt.prototype._write=function(s){var i=this._ctx;return i.error?i.table._trans(null,vt.bind(null,i.error)):i.table._trans("readwrite",s,"locked")},nt.prototype._addAlgorithm=function(s){var i=this._ctx;i.algorithm=dr(i.algorithm,s)},nt.prototype._iterate=function(s,i){return Zs(this._ctx,s,i,this._ctx.table.core)},nt.prototype.clone=function(s){var i=Object.create(this.constructor.prototype),l=Object.create(this._ctx);return s&&d(l,s),i._ctx=l,i},nt.prototype.raw=function(){return this._ctx.valueMapper=null,this},nt.prototype.each=function(s){var i=this._ctx;return this._read(function(l){return Zs(i,s,l,i.table.core)})},nt.prototype.count=function(s){var i=this;return this._read(function(l){var f=i._ctx,m=f.table.core;if($r(f,!0))return m.count({trans:l,query:{index:Xs(f,m.schema),range:f.range}}).then(function(_){return Math.min(_,f.limit)});var y=0;return Zs(f,function(){return++y,!1},l,m).then(function(){return y})}).then(s)},nt.prototype.sortBy=function(s,i){var l=s.split(".").reverse(),f=l[0],m=l.length-1;function y(I,P){return P?y(I[l[P]],P-1):I[f]}var _=this._ctx.dir==="next"?1:-1;function x(I,P){return ze(y(I,m),y(P,m))*_}return this.toArray(function(I){return I.sort(x)}).then(i)},nt.prototype.toArray=function(s){var i=this;return this._read(function(l){var f=i._ctx;if(f.dir==="next"&&$r(f,!0)&&0<f.limit){var m=f.valueMapper,y=Xs(f,f.table.core.schema);return f.table.core.query({trans:l,limit:f.limit,values:!0,query:{index:y,range:f.range}}).then(function(x){return x=x.result,m?x.map(m):x})}var _=[];return Zs(f,function(x){return _.push(x)},l,f.table.core).then(function(){return _})},s)},nt.prototype.offset=function(s){var i=this._ctx;return s<=0||(i.offset+=s,$r(i)?gi(i,function(){var l=s;return function(f,m){return l===0||(l===1?--l:m(function(){f.advance(l),l=0}),!1)}}):gi(i,function(){var l=s;return function(){return--l<0}})),this},nt.prototype.limit=function(s){return this._ctx.limit=Math.min(this._ctx.limit,s),gi(this._ctx,function(){var i=s;return function(l,f,m){return--i<=0&&f(m),0<=i}},!0),this},nt.prototype.until=function(s,i){return mi(this._ctx,function(l,f,m){return!s(l.value)||(f(m),i)}),this},nt.prototype.first=function(s){return this.limit(1).toArray(function(i){return i[0]}).then(s)},nt.prototype.last=function(s){return this.reverse().first(s)},nt.prototype.filter=function(s){var i;return mi(this._ctx,function(l){return s(l.value)}),(i=this._ctx).isMatch=dr(i.isMatch,s),this},nt.prototype.and=function(s){return this.filter(s)},nt.prototype.or=function(s){return new this.db.WhereClause(this._ctx.table,s,this)},nt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},nt.prototype.desc=function(){return this.reverse()},nt.prototype.eachKey=function(s){var i=this._ctx;return i.keysOnly=!i.isMatch,this.each(function(l,f){s(f.key,f)})},nt.prototype.eachUniqueKey=function(s){return this._ctx.unique="unique",this.eachKey(s)},nt.prototype.eachPrimaryKey=function(s){var i=this._ctx;return i.keysOnly=!i.isMatch,this.each(function(l,f){s(f.primaryKey,f)})},nt.prototype.keys=function(s){var i=this._ctx;i.keysOnly=!i.isMatch;var l=[];return this.each(function(f,m){l.push(m.key)}).then(function(){return l}).then(s)},nt.prototype.primaryKeys=function(s){var i=this._ctx;if(i.dir==="next"&&$r(i,!0)&&0<i.limit)return this._read(function(f){var m=Xs(i,i.table.core.schema);return i.table.core.query({trans:f,values:!1,limit:i.limit,query:{index:m,range:i.range}})}).then(function(f){return f.result}).then(s);i.keysOnly=!i.isMatch;var l=[];return this.each(function(f,m){l.push(m.primaryKey)}).then(function(){return l}).then(s)},nt.prototype.uniqueKeys=function(s){return this._ctx.unique="unique",this.keys(s)},nt.prototype.firstKey=function(s){return this.limit(1).keys(function(i){return i[0]}).then(s)},nt.prototype.lastKey=function(s){return this.reverse().firstKey(s)},nt.prototype.distinct=function(){var s=this._ctx,s=s.index&&s.table.schema.idxByName[s.index];if(!s||!s.multi)return this;var i={};return mi(this._ctx,function(m){var f=m.primaryKey.toString(),m=g(i,f);return i[f]=!0,!m}),this},nt.prototype.modify=function(s){var i=this,l=this._ctx;return this._write(function(f){var m,y,_;_=typeof s=="function"?s:(m=c(s),y=m.length,function(B){for(var H=!1,z=0;z<y;++z){var Y=m[z],ie=s[Y],de=le(B,Y);ie instanceof ns?(Ae(B,Y,ie.execute(de)),H=!0):de!==ie&&(Ae(B,Y,ie),H=!0)}return H});var x=l.table.core,C=x.schema.primaryKey,I=C.outbound,P=C.extractKey,D=200,C=i.db._options.modifyChunkSize;C&&(D=typeof C=="object"?C[x.name]||C["*"]||200:C);function M(B,Y){var z=Y.failures,Y=Y.numFailures;R+=B-Y;for(var ie=0,de=c(z);ie<de.length;ie++){var ae=de[ie];S.push(z[ae])}}var S=[],R=0,F=[],$=s===pc;return i.clone().primaryKeys().then(function(B){function H(Y){var ie=Math.min(D,B.length-Y),de=B.slice(Y,Y+ie);return($?Promise.resolve([]):x.getMany({trans:f,keys:de,cache:"immutable"})).then(function(ae){var ce=[],ye=[],he=I?[]:null,be=$?de:[];if(!$)for(var Ve=0;Ve<ie;++Ve){var Ge=ae[Ve],Le={value:Se(Ge),primKey:B[Y+Ve]};_.call(Le,Le.value,Le)!==!1&&(Le.value==null?be.push(B[Y+Ve]):I||ze(P(Ge),P(Le.value))===0?(ye.push(Le.value),I&&he.push(B[Y+Ve])):(be.push(B[Y+Ve]),ce.push(Le.value)))}return Promise.resolve(0<ce.length&&x.mutate({trans:f,type:"add",values:ce}).then(function(yt){for(var Ne in yt.failures)be.splice(parseInt(Ne),1);M(ce.length,yt)})).then(function(){return(0<ye.length||z&&typeof s=="object")&&x.mutate({trans:f,type:"put",keys:he,values:ye,criteria:z,changeSpec:typeof s!="function"&&s,isAdditionalChunk:0<Y}).then(function(yt){return M(ye.length,yt)})}).then(function(){return(0<be.length||z&&$)&&x.mutate({trans:f,type:"delete",keys:be,criteria:z,isAdditionalChunk:0<Y}).then(function(yt){return Js(l.table,be,yt)}).then(function(yt){return M(be.length,yt)})}).then(function(){return B.length>Y+ie&&H(Y+D)})})}var z=$r(l)&&l.limit===1/0&&(typeof s!="function"||$)&&{index:l.index,range:l.range};return H(0).then(function(){if(0<S.length)throw new jt("Error modifying one or more objects",S,R,F);return B.length})})})},nt.prototype.delete=function(){var s=this._ctx,i=s.range;return!$r(s)||s.table.schema.yProps||!s.isPrimKey&&i.type!==3?this.modify(pc):this._write(function(l){var f=s.table.core.schema.primaryKey,m=i;return s.table.core.count({trans:l,query:{index:f,range:m}}).then(function(y){return s.table.core.mutate({trans:l,type:"deleteRange",range:m}).then(function(I){var x=I.failures,I=I.numFailures;if(I)throw new jt("Could not delete some values",Object.keys(x).map(function(P){return x[P]}),y-I);return y-I})})})},nt);function nt(){}var pc=function(s,i){return i.value=null};function Wd(s,i){return s<i?-1:s===i?0:1}function zd(s,i){return i<s?-1:s===i?0:1}function Gt(s,i,l){return s=s instanceof mc?new s.Collection(s):s,s._ctx.error=new(l||TypeError)(i),s}function Tr(s){return new s.Collection(s,function(){return hc("")}).limit(0)}function eo(s,i,l,f){var m,y,_,x,I,P,D,C=l.length;if(!l.every(function(R){return typeof R=="string"}))return Gt(s,sc);function M(R){m=R==="next"?function($){return $.toUpperCase()}:function($){return $.toLowerCase()},y=R==="next"?function($){return $.toLowerCase()}:function($){return $.toUpperCase()},_=R==="next"?Wd:zd;var F=l.map(function($){return{lower:y($),upper:m($)}}).sort(function($,B){return _($.lower,B.lower)});x=F.map(function($){return $.upper}),I=F.map(function($){return $.lower}),D=(P=R)==="next"?"":f}M("next"),s=new s.Collection(s,function(){return Wn(x[0],I[C-1]+f)}),s._ondirectionchange=function(R){M(R)};var S=0;return s._addAlgorithm(function(R,F,$){var B=R.key;if(typeof B!="string")return!1;var H=y(B);if(i(H,I,S))return!0;for(var z=null,Y=S;Y<C;++Y){var ie=(function(de,ae,ce,ye,he,be){for(var Ve=Math.min(de.length,ye.length),Ge=-1,Le=0;Le<Ve;++Le){var yt=ae[Le];if(yt!==ye[Le])return he(de[Le],ce[Le])<0?de.substr(0,Le)+ce[Le]+ce.substr(Le+1):he(de[Le],ye[Le])<0?de.substr(0,Le)+ye[Le]+ce.substr(Le+1):0<=Ge?de.substr(0,Ge)+ae[Ge]+ce.substr(Ge+1):null;he(de[Le],yt)<0&&(Ge=Le)}return Ve<ye.length&&be==="next"?de+ce.substr(de.length):Ve<de.length&&be==="prev"?de.substr(0,ce.length):Ge<0?null:de.substr(0,Ge)+ye[Ge]+ce.substr(Ge+1)})(B,H,x[Y],I[Y],_,P);ie===null&&z===null?S=Y+1:(z===null||0<_(z,ie))&&(z=ie)}return F(z!==null?function(){R.continue(z+D)}:$),!1}),s}function Wn(s,i,l,f){return{type:2,lower:s,upper:i,lowerOpen:l,upperOpen:f}}function hc(s){return{type:1,lower:s,upper:s}}var mc=(Object.defineProperty(Et.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Et.prototype.between=function(s,i,l,f){l=l!==!1,f=f===!0;try{return 0<this._cmp(s,i)||this._cmp(s,i)===0&&(l||f)&&(!l||!f)?Tr(this):new this.Collection(this,function(){return Wn(s,i,!l,!f)})}catch{return Gt(this,On)}},Et.prototype.equals=function(s){return s==null?Gt(this,On):new this.Collection(this,function(){return hc(s)})},Et.prototype.above=function(s){return s==null?Gt(this,On):new this.Collection(this,function(){return Wn(s,void 0,!0)})},Et.prototype.aboveOrEqual=function(s){return s==null?Gt(this,On):new this.Collection(this,function(){return Wn(s,void 0,!1)})},Et.prototype.below=function(s){return s==null?Gt(this,On):new this.Collection(this,function(){return Wn(void 0,s,!1,!0)})},Et.prototype.belowOrEqual=function(s){return s==null?Gt(this,On):new this.Collection(this,function(){return Wn(void 0,s)})},Et.prototype.startsWith=function(s){return typeof s!="string"?Gt(this,sc):this.between(s,s+ur,!0,!0)},Et.prototype.startsWithIgnoreCase=function(s){return s===""?this.startsWith(s):eo(this,function(i,l){return i.indexOf(l[0])===0},[s],ur)},Et.prototype.equalsIgnoreCase=function(s){return eo(this,function(i,l){return i===l[0]},[s],"")},Et.prototype.anyOfIgnoreCase=function(){var s=L.apply(W,arguments);return s.length===0?Tr(this):eo(this,function(i,l){return l.indexOf(i)!==-1},s,"")},Et.prototype.startsWithAnyOfIgnoreCase=function(){var s=L.apply(W,arguments);return s.length===0?Tr(this):eo(this,function(i,l){return l.some(function(f){return i.indexOf(f)===0})},s,ur)},Et.prototype.anyOf=function(){var s=this,i=L.apply(W,arguments),l=this._cmp;try{i.sort(l)}catch{return Gt(this,On)}if(i.length===0)return Tr(this);var f=new this.Collection(this,function(){return Wn(i[0],i[i.length-1])});f._ondirectionchange=function(y){l=y==="next"?s._ascending:s._descending,i.sort(l)};var m=0;return f._addAlgorithm(function(y,_,x){for(var I=y.key;0<l(I,i[m]);)if(++m===i.length)return _(x),!1;return l(I,i[m])===0||(_(function(){y.continue(i[m])}),!1)}),f},Et.prototype.notEqual=function(s){return this.inAnyRange([[-1/0,s],[s,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Et.prototype.noneOf=function(){var s=L.apply(W,arguments);if(s.length===0)return new this.Collection(this);try{s.sort(this._ascending)}catch{return Gt(this,On)}var i=s.reduce(function(l,f){return l?l.concat([[l[l.length-1][1],f]]):[[-1/0,f]]},null);return i.push([s[s.length-1],this.db._maxKey]),this.inAnyRange(i,{includeLowers:!1,includeUppers:!1})},Et.prototype.inAnyRange=function(B,i){var l=this,f=this._cmp,m=this._ascending,y=this._descending,_=this._min,x=this._max;if(B.length===0)return Tr(this);if(!B.every(function(H){return H[0]!==void 0&&H[1]!==void 0&&m(H[0],H[1])<=0}))return Gt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Q.InvalidArgument);var I=!i||i.includeLowers!==!1,P=i&&i.includeUppers===!0,D,C=m;function M(H,z){return C(H[0],z[0])}try{(D=B.reduce(function(H,z){for(var Y=0,ie=H.length;Y<ie;++Y){var de=H[Y];if(f(z[0],de[1])<0&&0<f(z[1],de[0])){de[0]=_(de[0],z[0]),de[1]=x(de[1],z[1]);break}}return Y===ie&&H.push(z),H},[])).sort(M)}catch{return Gt(this,On)}var S=0,R=P?function(H){return 0<m(H,D[S][1])}:function(H){return 0<=m(H,D[S][1])},F=I?function(H){return 0<y(H,D[S][0])}:function(H){return 0<=y(H,D[S][0])},$=R,B=new this.Collection(this,function(){return Wn(D[0][0],D[D.length-1][1],!I,!P)});return B._ondirectionchange=function(H){C=H==="next"?($=R,m):($=F,y),D.sort(M)},B._addAlgorithm(function(H,z,Y){for(var ie,de=H.key;$(de);)if(++S===D.length)return z(Y),!1;return!R(ie=de)&&!F(ie)||(l._cmp(de,D[S][1])===0||l._cmp(de,D[S][0])===0||z(function(){C===m?H.continue(D[S][0]):H.continue(D[S][1])}),!1)}),B},Et.prototype.startsWithAnyOf=function(){var s=L.apply(W,arguments);return s.every(function(i){return typeof i=="string"})?s.length===0?Tr(this):this.inAnyRange(s.map(function(i){return[i,i+ur]})):Gt(this,"startsWithAnyOf() only works with strings")},Et);function Et(){}function gn(s){return pt(function(i){return rs(i),s(i.target.error),!1})}function rs(s){s.stopPropagation&&s.stopPropagation(),s.preventDefault&&s.preventDefault()}var ss="storagemutated",yi="x-storagemutated-1",zn=es(null,ss),Qd=(yn.prototype._lock=function(){return E(!ke.global),++this._reculock,this._reculock!==1||ke.global||(ke.lockOwnerFor=this),this},yn.prototype._unlock=function(){if(E(!ke.global),--this._reculock==0)for(ke.global||(ke.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var s=this._blockedFuncs.shift();try{lr(s[1],s[0])}catch{}}return this},yn.prototype._locked=function(){return this._reculock&&ke.lockOwnerFor!==this},yn.prototype.create=function(s){var i=this;if(!this.mode)return this;var l=this.db.idbdb,f=this.db._state.dbOpenError;if(E(!this.idbtrans),!s&&!l)switch(f&&f.name){case"DatabaseClosedError":throw new Q.DatabaseClosed(f);case"MissingAPIError":throw new Q.MissingAPI(f.message,f);default:throw new Q.OpenFailed(f)}if(!this.active)throw new Q.TransactionInactive;return E(this._completion._state===null),(s=this.idbtrans=s||(this.db.core||l).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=pt(function(m){rs(m),i._reject(s.error)}),s.onabort=pt(function(m){rs(m),i.active&&i._reject(new Q.Abort(s.error)),i.active=!1,i.on("abort").fire(m)}),s.oncomplete=pt(function(){i.active=!1,i._resolve(),"mutatedParts"in s&&zn.storagemutated.fire(s.mutatedParts)}),this},yn.prototype._promise=function(s,i,l){var f=this;if(s==="readwrite"&&this.mode!=="readwrite")return vt(new Q.ReadOnly("Transaction is readonly"));if(!this.active)return vt(new Q.TransactionInactive);if(this._locked())return new ve(function(y,_){f._blockedFuncs.push([function(){f._promise(s,i,l).then(y,_)},ke])});if(l)return Kn(function(){var y=new ve(function(_,x){f._lock();var I=i(_,x,f);I&&I.then&&I.then(_,x)});return y.finally(function(){return f._unlock()}),y._lib=!0,y});var m=new ve(function(y,_){var x=i(y,_,f);x&&x.then&&x.then(y,_)});return m._lib=!0,m},yn.prototype._root=function(){return this.parent?this.parent._root():this},yn.prototype.waitFor=function(s){var i,l=this._root(),f=ve.resolve(s);l._waitingFor?l._waitingFor=l._waitingFor.then(function(){return f}):(l._waitingFor=f,l._waitingQueue=[],i=l.idbtrans.objectStore(l.storeNames[0]),(function y(){for(++l._spinCount;l._waitingQueue.length;)l._waitingQueue.shift()();l._waitingFor&&(i.get(-1/0).onsuccess=y)})());var m=l._waitingFor;return new ve(function(y,_){f.then(function(x){return l._waitingQueue.push(pt(y.bind(null,x)))},function(x){return l._waitingQueue.push(pt(_.bind(null,x)))}).finally(function(){l._waitingFor===m&&(l._waitingFor=null)})})},yn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Q.Abort))},yn.prototype.table=function(s){var i=this._memoizedTables||(this._memoizedTables={});if(g(i,s))return i[s];var l=this.schema[s];if(!l)throw new Q.NotFound("Table "+s+" not part of transaction");return l=new this.db.Table(s,l,this),l.core=this.db.core.table(s),i[s]=l},yn);function yn(){}function vi(s,i,l,f,m,y,_,x){return{name:s,keyPath:i,unique:l,multi:f,auto:m,compound:y,src:(l&&!_?"&":"")+(f?"*":"")+(m?"++":"")+gc(i),type:x}}function gc(s){return typeof s=="string"?s:s?"["+[].join.call(s,"+")+"]":""}function bi(s,i,l){return{name:s,primKey:i,indexes:l,mappedClass:null,idxByName:(f=function(m){return[m.name,m]},l.reduce(function(m,y,_){return _=f(y,_),_&&(m[_[0]]=_[1]),m},{}))};var f}var os=function(s){try{return s.only([[]]),os=function(){return[[]]},[[]]}catch{return os=function(){return ur},ur}};function _i(s){return s==null?function(){}:typeof s=="string"?(i=s).split(".").length===1?function(l){return l[i]}:function(l){return le(l,i)}:function(l){return le(l,s)};var i}function yc(s){return[].slice.call(s)}var Yd=0;function is(s){return s==null?":id":typeof s=="string"?s:"[".concat(s.join("+"),"]")}function Gd(s,i,I){function f($){if($.type===3)return null;if($.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var S=$.lower,R=$.upper,F=$.lowerOpen,$=$.upperOpen;return S===void 0?R===void 0?null:i.upperBound(R,!!$):R===void 0?i.lowerBound(S,!!F):i.bound(S,R,!!F,!!$)}function m(M){var S,R=M.name;return{name:R,schema:M,mutate:function(F){var $=F.trans,B=F.type,H=F.keys,z=F.values,Y=F.range;return new Promise(function(ie,de){ie=pt(ie);var ae=$.objectStore(R),ce=ae.keyPath==null,ye=B==="put"||B==="add";if(!ye&&B!=="delete"&&B!=="deleteRange")throw new Error("Invalid operation type: "+B);var he,be=(H||z||{length:1}).length;if(H&&z&&H.length!==z.length)throw new Error("Given keys array must have same length as given values array.");if(be===0)return ie({numFailures:0,failures:{},results:[],lastResult:void 0});function Ve(Ut){++yt,rs(Ut)}var Ge=[],Le=[],yt=0;if(B==="deleteRange"){if(Y.type===4)return ie({numFailures:yt,failures:Le,results:[],lastResult:void 0});Y.type===3?Ge.push(he=ae.clear()):Ge.push(he=ae.delete(f(Y)))}else{var ce=ye?ce?[z,H]:[z,null]:[H,null],Ne=ce[0],Tt=ce[1];if(ye)for(var Ft=0;Ft<be;++Ft)Ge.push(he=Tt&&Tt[Ft]!==void 0?ae[B](Ne[Ft],Tt[Ft]):ae[B](Ne[Ft])),he.onerror=Ve;else for(Ft=0;Ft<be;++Ft)Ge.push(he=ae[B](Ne[Ft])),he.onerror=Ve}function po(Ut){Ut=Ut.target.result,Ge.forEach(function(hr,Ni){return hr.error!=null&&(Le[Ni]=hr.error)}),ie({numFailures:yt,failures:Le,results:B==="delete"?H:Ge.map(function(hr){return hr.result}),lastResult:Ut})}he.onerror=function(Ut){Ve(Ut),po(Ut)},he.onsuccess=po})},getMany:function(F){var $=F.trans,B=F.keys;return new Promise(function(H,z){H=pt(H);for(var Y,ie=$.objectStore(R),de=B.length,ae=new Array(de),ce=0,ye=0,he=function(Ge){Ge=Ge.target,ae[Ge._pos]=Ge.result,++ye===ce&&H(ae)},be=gn(z),Ve=0;Ve<de;++Ve)B[Ve]!=null&&((Y=ie.get(B[Ve]))._pos=Ve,Y.onsuccess=he,Y.onerror=be,++ce);ce===0&&H(ae)})},get:function(F){var $=F.trans,B=F.key;return new Promise(function(H,z){H=pt(H);var Y=$.objectStore(R).get(B);Y.onsuccess=function(ie){return H(ie.target.result)},Y.onerror=gn(z)})},query:(S=P,function(F){return new Promise(function($,B){$=pt($);var H,z,Y,ce=F.trans,ie=F.values,de=F.limit,he=F.query,ae=de===1/0?void 0:de,ye=he.index,he=he.range,ce=ce.objectStore(R),ye=ye.isPrimaryKey?ce:ce.index(ye.name),he=f(he);if(de===0)return $({result:[]});S?((ae=ie?ye.getAll(he,ae):ye.getAllKeys(he,ae)).onsuccess=function(be){return $({result:be.target.result})},ae.onerror=gn(B)):(H=0,z=!ie&&"openKeyCursor"in ye?ye.openKeyCursor(he):ye.openCursor(he),Y=[],z.onsuccess=function(be){var Ve=z.result;return Ve?(Y.push(ie?Ve.value:Ve.primaryKey),++H===de?$({result:Y}):void Ve.continue()):$({result:Y})},z.onerror=gn(B))})}),openCursor:function(F){var $=F.trans,B=F.values,H=F.query,z=F.reverse,Y=F.unique;return new Promise(function(ie,de){ie=pt(ie);var ye=H.index,ae=H.range,ce=$.objectStore(R),ce=ye.isPrimaryKey?ce:ce.index(ye.name),ye=z?Y?"prevunique":"prev":Y?"nextunique":"next",he=!B&&"openKeyCursor"in ce?ce.openKeyCursor(f(ae),ye):ce.openCursor(f(ae),ye);he.onerror=gn(de),he.onsuccess=pt(function(be){var Ve,Ge,Le,yt,Ne=he.result;Ne?(Ne.___id=++Yd,Ne.done=!1,Ve=Ne.continue.bind(Ne),Ge=(Ge=Ne.continuePrimaryKey)&&Ge.bind(Ne),Le=Ne.advance.bind(Ne),yt=function(){throw new Error("Cursor not stopped")},Ne.trans=$,Ne.stop=Ne.continue=Ne.continuePrimaryKey=Ne.advance=function(){throw new Error("Cursor not started")},Ne.fail=pt(de),Ne.next=function(){var Tt=this,Ft=1;return this.start(function(){return Ft--?Tt.continue():Tt.stop()}).then(function(){return Tt})},Ne.start=function(Tt){function Ft(){if(he.result)try{Tt()}catch(Ut){Ne.fail(Ut)}else Ne.done=!0,Ne.start=function(){throw new Error("Cursor behind last entry")},Ne.stop()}var po=new Promise(function(Ut,hr){Ut=pt(Ut),he.onerror=gn(hr),Ne.fail=hr,Ne.stop=function(Ni){Ne.stop=Ne.continue=Ne.continuePrimaryKey=Ne.advance=yt,Ut(Ni)}});return he.onsuccess=pt(function(Ut){he.onsuccess=Ft,Ft()}),Ne.continue=Ve,Ne.continuePrimaryKey=Ge,Ne.advance=Le,Ft(),po},ie(Ne)):ie(null)},de)})},count:function(F){var $=F.query,B=F.trans,H=$.index,z=$.range;return new Promise(function(Y,ie){var de=B.objectStore(R),ae=H.isPrimaryKey?de:de.index(H.name),de=f(z),ae=de?ae.count(de):ae.count();ae.onsuccess=pt(function(ce){return Y(ce.target.result)}),ae.onerror=gn(ie)})}}}var y,_,x,D=(_=I,x=yc((y=s).objectStoreNames),{schema:{name:y.name,tables:x.map(function(M){return _.objectStore(M)}).map(function(M){var S=M.keyPath,$=M.autoIncrement,R=u(S),F={},$={name:M.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:S==null,compound:R,keyPath:S,autoIncrement:$,unique:!0,extractKey:_i(S)},indexes:yc(M.indexNames).map(function(B){return M.index(B)}).map(function(Y){var H=Y.name,z=Y.unique,ie=Y.multiEntry,Y=Y.keyPath,ie={name:H,compound:u(Y),keyPath:Y,unique:z,multiEntry:ie,extractKey:_i(Y)};return F[is(Y)]=ie}),getIndexByKeyPath:function(B){return F[is(B)]}};return F[":id"]=$.primaryKey,S!=null&&(F[is(S)]=$.primaryKey),$})},hasGetAll:0<x.length&&"getAll"in _.objectStore(x[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),I=D.schema,P=D.hasGetAll,D=I.tables.map(m),C={};return D.forEach(function(M){return C[M.name]=M}),{stack:"dbcore",transaction:s.transaction.bind(s),table:function(M){if(!C[M])throw new Error("Table '".concat(M,"' not found"));return C[M]},MIN_KEY:-1/0,MAX_KEY:os(i),schema:I}}function Jd(s,i,l,f){var m=l.IDBKeyRange;return l.indexedDB,{dbcore:(f=Gd(i,m,f),s.dbcore.reduce(function(y,_){return _=_.create,r(r({},y),_(y))},f))}}function to(s,f){var l=f.db,f=Jd(s._middlewares,l,s._deps,f);s.core=f.dbcore,s.tables.forEach(function(m){var y=m.name;s.core.schema.tables.some(function(_){return _.name===y})&&(m.core=s.core.table(y),s[y]instanceof s.Table&&(s[y].core=m.core))})}function no(s,i,l,f){l.forEach(function(m){var y=f[m];i.forEach(function(_){var x=(function I(P,D){return K(P,D)||(P=h(P))&&I(P,D)})(_,m);(!x||"value"in x&&x.value===void 0)&&(_===s.Transaction.prototype||_ instanceof s.Transaction?O(_,m,{get:function(){return this.table(m)},set:function(I){k(this,m,{value:I,writable:!0,configurable:!0,enumerable:!0})}}):_[m]=new s.Table(m,y))})})}function wi(s,i){i.forEach(function(l){for(var f in l)l[f]instanceof s.Table&&delete l[f]})}function Xd(s,i){return s._cfg.version-i._cfg.version}function Zd(s,i,l,f){var m=s._dbSchema;l.objectStoreNames.contains("$meta")&&!m.$meta&&(m.$meta=bi("$meta",bc("")[0],[]),s._storeNames.push("$meta"));var y=s._createTransaction("readwrite",s._storeNames,m);y.create(l),y._completion.catch(f);var _=y._reject.bind(y),x=ke.transless||ke;Kn(function(){return ke.trans=y,ke.transless=x,i!==0?(to(s,l),P=i,((I=y).storeNames.includes("$meta")?I.table("$meta").get("version").then(function(D){return D??P}):ve.resolve(P)).then(function(D){return M=D,S=y,R=l,F=[],D=(C=s)._versions,$=C._dbSchema=so(0,C.idbdb,R),(D=D.filter(function(B){return B._cfg.version>=M})).length!==0?(D.forEach(function(B){F.push(function(){var H=$,z=B._cfg.dbschema;oo(C,H,R),oo(C,z,R),$=C._dbSchema=z;var Y=ki(H,z);Y.add.forEach(function(ye){xi(R,ye[0],ye[1].primKey,ye[1].indexes)}),Y.change.forEach(function(ye){if(ye.recreate)throw new Q.Upgrade("Not yet support for changing primary key");var he=R.objectStore(ye.name);ye.add.forEach(function(be){return ro(he,be)}),ye.change.forEach(function(be){he.deleteIndex(be.name),ro(he,be)}),ye.del.forEach(function(be){return he.deleteIndex(be)})});var ie=B._cfg.contentUpgrade;if(ie&&B._cfg.version>M){to(C,R),S._memoizedTables={};var de=Pe(z);Y.del.forEach(function(ye){de[ye]=H[ye]}),wi(C,[C.Transaction.prototype]),no(C,[C.Transaction.prototype],c(de),de),S.schema=de;var ae,ce=Re(ie);return ce&&Rr(),Y=ve.follow(function(){var ye;(ae=ie(S))&&ce&&(ye=Vn.bind(null,null),ae.then(ye,ye))}),ae&&typeof ae.then=="function"?ve.resolve(ae):Y.then(function(){return ae})}}),F.push(function(H){var z,Y,ie=B._cfg.dbschema;z=ie,Y=H,[].slice.call(Y.db.objectStoreNames).forEach(function(de){return z[de]==null&&Y.db.deleteObjectStore(de)}),wi(C,[C.Transaction.prototype]),no(C,[C.Transaction.prototype],C._storeNames,C._dbSchema),S.schema=C._dbSchema}),F.push(function(H){C.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(C.idbdb.version/10)===B._cfg.version?(C.idbdb.deleteObjectStore("$meta"),delete C._dbSchema.$meta,C._storeNames=C._storeNames.filter(function(z){return z!=="$meta"})):H.objectStore("$meta").put(B._cfg.version,"version"))})}),(function B(){return F.length?ve.resolve(F.shift()(S.idbtrans)).then(B):ve.resolve()})().then(function(){vc($,R)})):ve.resolve();var C,M,S,R,F,$}).catch(_)):(c(m).forEach(function(D){xi(l,D,m[D].primKey,m[D].indexes)}),to(s,l),void ve.follow(function(){return s.on.populate.fire(y)}).catch(_));var I,P})}function ef(s,i){vc(s._dbSchema,i),i.db.version%10!=0||i.objectStoreNames.contains("$meta")||i.db.createObjectStore("$meta").add(Math.ceil(i.db.version/10-1),"version");var l=so(0,s.idbdb,i);oo(s,s._dbSchema,i);for(var f=0,m=ki(l,s._dbSchema).change;f<m.length;f++){var y=(function(_){if(_.change.length||_.recreate)return console.warn("Unable to patch indexes of table ".concat(_.name," because it has changes on the type of index or primary key.")),{value:void 0};var x=i.objectStore(_.name);_.add.forEach(function(I){ne&&console.debug("Dexie upgrade patch: Creating missing index ".concat(_.name,".").concat(I.src)),ro(x,I)})})(m[f]);if(typeof y=="object")return y.value}}function ki(s,i){var l,f={del:[],add:[],change:[]};for(l in s)i[l]||f.del.push(l);for(l in i){var m=s[l],y=i[l];if(m){var _={name:l,def:y,recreate:!1,del:[],add:[],change:[]};if(""+(m.primKey.keyPath||"")!=""+(y.primKey.keyPath||"")||m.primKey.auto!==y.primKey.auto)_.recreate=!0,f.change.push(_);else{var x=m.idxByName,I=y.idxByName,P=void 0;for(P in x)I[P]||_.del.push(P);for(P in I){var D=x[P],C=I[P];D?D.src!==C.src&&_.change.push(C):_.add.push(C)}(0<_.del.length||0<_.add.length||0<_.change.length)&&f.change.push(_)}}else f.add.push([l,y])}return f}function xi(s,i,l,f){var m=s.db.createObjectStore(i,l.keyPath?{keyPath:l.keyPath,autoIncrement:l.auto}:{autoIncrement:l.auto});return f.forEach(function(y){return ro(m,y)}),m}function vc(s,i){c(s).forEach(function(l){i.db.objectStoreNames.contains(l)||(ne&&console.debug("Dexie: Creating missing table",l),xi(i,l,s[l].primKey,s[l].indexes))})}function ro(s,i){s.createIndex(i.name,i.keyPath,{unique:i.unique,multiEntry:i.multi})}function so(s,i,l){var f={};return V(i.objectStoreNames,0).forEach(function(m){for(var y=l.objectStore(m),_=vi(gc(P=y.keyPath),P||"",!0,!1,!!y.autoIncrement,P&&typeof P!="string",!0),x=[],I=0;I<y.indexNames.length;++I){var D=y.index(y.indexNames[I]),P=D.keyPath,D=vi(D.name,P,!!D.unique,!!D.multiEntry,!1,P&&typeof P!="string",!1);x.push(D)}f[m]=bi(m,_,x)}),f}function oo(s,i,l){for(var f=l.db.objectStoreNames,m=0;m<f.length;++m){var y=f[m],_=l.objectStore(y);s._hasGetAll="getAll"in _;for(var x=0;x<_.indexNames.length;++x){var I=_.indexNames[x],P=_.index(I).keyPath,D=typeof P=="string"?P:"["+V(P).join("+")+"]";!i[y]||(P=i[y].idxByName[D])&&(P.name=I,delete i[y].idxByName[D],i[y].idxByName[I]=P)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&a.WorkerGlobalScope&&a instanceof a.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(s._hasGetAll=!1)}function bc(s){return s.split(",").map(function(i,l){var y=i.split(":"),f=(m=y[1])===null||m===void 0?void 0:m.trim(),m=(i=y[0].trim()).replace(/([&*]|\+\+)/g,""),y=/^\[/.test(m)?m.match(/^\[(.*)\]$/)[1].split("+"):m;return vi(m,y||null,/\&/.test(i),/\*/.test(i),/\+\+/.test(i),u(y),l===0,f)})}var tf=(Fr.prototype._createTableSchema=bi,Fr.prototype._parseIndexSyntax=bc,Fr.prototype._parseStoresSpec=function(s,i){var l=this;c(s).forEach(function(f){if(s[f]!==null){var m=l._parseIndexSyntax(s[f]),y=m.shift();if(!y)throw new Q.Schema("Invalid schema for table "+f+": "+s[f]);if(y.unique=!0,y.multi)throw new Q.Schema("Primary key cannot be multiEntry*");m.forEach(function(_){if(_.auto)throw new Q.Schema("Only primary key can be marked as autoIncrement (++)");if(!_.keyPath)throw new Q.Schema("Index must have a name and cannot be an empty string")}),m=l._createTableSchema(f,y,m),i[f]=m}})},Fr.prototype.stores=function(l){var i=this.db;this._cfg.storesSource=this._cfg.storesSource?d(this._cfg.storesSource,l):l;var l=i._versions,f={},m={};return l.forEach(function(y){d(f,y._cfg.storesSource),m=y._cfg.dbschema={},y._parseStoresSpec(f,m)}),i._dbSchema=m,wi(i,[i._allTables,i,i.Transaction.prototype]),no(i,[i._allTables,i,i.Transaction.prototype,this._cfg.tables],c(m),m),i._storeNames=c(m),this},Fr.prototype.upgrade=function(s){return this._cfg.contentUpgrade=ue(this._cfg.contentUpgrade||w,s),this},Fr);function Fr(){}function Ci(s,i){var l=s._dbNamesDB;return l||(l=s._dbNamesDB=new Rn(Ys,{addons:[],indexedDB:s,IDBKeyRange:i})).version(1).stores({dbnames:"name"}),l.table("dbnames")}function Ai(s){return s&&typeof s.databases=="function"}function Ei(s){return Kn(function(){return ke.letThrough=!0,s()})}function Ii(s){return!("from"in s)}var $t=function(s,i){if(!this){var l=new $t;return s&&"d"in s&&d(l,s),l}d(this,arguments.length?{d:1,from:s,to:1<arguments.length?i:s}:{d:0})};function as(s,i,l){var f=ze(i,l);if(!isNaN(f)){if(0<f)throw RangeError();if(Ii(s))return d(s,{from:i,to:l,d:1});var m=s.l,f=s.r;if(ze(l,s.from)<0)return m?as(m,i,l):s.l={from:i,to:l,d:1,l:null,r:null},wc(s);if(0<ze(i,s.to))return f?as(f,i,l):s.r={from:i,to:l,d:1,l:null,r:null},wc(s);ze(i,s.from)<0&&(s.from=i,s.l=null,s.d=f?f.d+1:1),0<ze(l,s.to)&&(s.to=l,s.r=null,s.d=s.l?s.l.d+1:1),l=!s.r,m&&!s.l&&cs(s,m),f&&l&&cs(s,f)}}function cs(s,i){Ii(i)||(function l(f,I){var y=I.from,_=I.to,x=I.l,I=I.r;as(f,y,_),x&&l(f,x),I&&l(f,I)})(s,i)}function _c(s,i){var l=io(i),f=l.next();if(f.done)return!1;for(var m=f.value,y=io(s),_=y.next(m.from),x=_.value;!f.done&&!_.done;){if(ze(x.from,m.to)<=0&&0<=ze(x.to,m.from))return!0;ze(m.from,x.from)<0?m=(f=l.next(x.from)).value:x=(_=y.next(m.from)).value}return!1}function io(s){var i=Ii(s)?null:{s:0,n:s};return{next:function(l){for(var f=0<arguments.length;i;)switch(i.s){case 0:if(i.s=1,f)for(;i.n.l&&ze(l,i.n.from)<0;)i={up:i,n:i.n.l,s:1};else for(;i.n.l;)i={up:i,n:i.n.l,s:1};case 1:if(i.s=2,!f||ze(l,i.n.to)<=0)return{value:i.n,done:!1};case 2:if(i.n.r){i.s=3,i={up:i,n:i.n.r,s:0};continue}case 3:i=i.up}return{done:!0}}}}function wc(s){var i,l,f=(((i=s.r)===null||i===void 0?void 0:i.d)||0)-(((l=s.l)===null||l===void 0?void 0:l.d)||0),m=1<f?"r":f<-1?"l":"";m&&(i=m=="r"?"l":"r",l=r({},s),f=s[m],s.from=f.from,s.to=f.to,s[m]=f[m],l[m]=f[i],(s[i]=l).d=kc(l)),s.d=kc(s)}function kc(l){var i=l.r,l=l.l;return(i?l?Math.max(i.d,l.d):i.d:l?l.d:0)+1}function ao(s,i){return c(i).forEach(function(l){s[l]?cs(s[l],i[l]):s[l]=(function f(m){var y,_,x={};for(y in m)g(m,y)&&(_=m[y],x[y]=!_||typeof _!="object"||Ue.has(_.constructor)?_:f(_));return x})(i[l])}),s}function Si(s,i){return s.all||i.all||Object.keys(s).some(function(l){return i[l]&&_c(i[l],s[l])})}v($t.prototype,((rn={add:function(s){return cs(this,s),this},addKey:function(s){return as(this,s,s),this},addKeys:function(s){var i=this;return s.forEach(function(l){return as(i,l,l)}),this},hasKey:function(s){var i=io(this).next(s).value;return i&&ze(i.from,s)<=0&&0<=ze(i.to,s)}})[He]=function(){return io(this)},rn));var fr={},Pi={},Oi=!1;function co(s){ao(Pi,s),Oi||(Oi=!0,setTimeout(function(){Oi=!1,Ri(Pi,!(Pi={}))},0))}function Ri(s,i){i===void 0&&(i=!1);var l=new Set;if(s.all)for(var f=0,m=Object.values(fr);f<m.length;f++)xc(_=m[f],s,l,i);else for(var y in s){var _,x=/^idb\:\/\/(.*)\/(.*)\//.exec(y);x&&(y=x[1],x=x[2],(_=fr["idb://".concat(y,"/").concat(x)])&&xc(_,s,l,i))}l.forEach(function(I){return I()})}function xc(s,i,l,f){for(var m=[],y=0,_=Object.entries(s.queries.query);y<_.length;y++){for(var x=_[y],I=x[0],P=[],D=0,C=x[1];D<C.length;D++){var M=C[D];Si(i,M.obsSet)?M.subscribers.forEach(function($){return l.add($)}):f&&P.push(M)}f&&m.push([I,P])}if(f)for(var S=0,R=m;S<R.length;S++){var F=R[S],I=F[0],P=F[1];s.queries.query[I]=P}}function nf(s){var i=s._state,l=s._deps.indexedDB;if(i.isBeingOpened||s.idbdb)return i.dbReadyPromise.then(function(){return i.dbOpenError?vt(i.dbOpenError):s});i.isBeingOpened=!0,i.dbOpenError=null,i.openComplete=!1;var f=i.openCanceller,m=Math.round(10*s.verno),y=!1;function _(){if(i.openCanceller!==f)throw new Q.DatabaseClosed("db.open() was cancelled")}function x(){return new ve(function(M,S){if(_(),!l)throw new Q.MissingAPI;var R=s.name,F=i.autoSchema||!m?l.open(R):l.open(R,m);if(!F)throw new Q.MissingAPI;F.onerror=gn(S),F.onblocked=pt(s._fireOnBlocked),F.onupgradeneeded=pt(function($){var B;D=F.transaction,i.autoSchema&&!s._options.allowEmptyDB?(F.onerror=rs,D.abort(),F.result.close(),(B=l.deleteDatabase(R)).onsuccess=B.onerror=pt(function(){S(new Q.NoSuchDatabase("Database ".concat(R," doesnt exist")))})):(D.onerror=gn(S),$=$.oldVersion>Math.pow(2,62)?0:$.oldVersion,C=$<1,s.idbdb=F.result,y&&ef(s,D),Zd(s,$/10,D,S))},S),F.onsuccess=pt(function(){D=null;var $,B,H,z,Y,ie=s.idbdb=F.result,de=V(ie.objectStoreNames);if(0<de.length)try{var ae=ie.transaction((z=de).length===1?z[0]:z,"readonly");if(i.autoSchema)B=ie,H=ae,($=s).verno=B.version/10,H=$._dbSchema=so(0,B,H),$._storeNames=V(B.objectStoreNames,0),no($,[$._allTables],c(H),H);else if(oo(s,s._dbSchema,ae),((Y=ki(so(0,(Y=s).idbdb,ae),Y._dbSchema)).add.length||Y.change.some(function(ce){return ce.add.length||ce.change.length}))&&!y)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),ie.close(),m=ie.version+1,y=!0,M(x());to(s,ae)}catch{}Dr.push(s),ie.onversionchange=pt(function(ce){i.vcFired=!0,s.on("versionchange").fire(ce)}),ie.onclose=pt(function(ce){s.on("close").fire(ce)}),C&&(Y=s._deps,ae=R,ie=Y.indexedDB,Y=Y.IDBKeyRange,Ai(ie)||ae===Ys||Ci(ie,Y).put({name:ae}).catch(w)),M()},S)}).catch(function(M){switch(M?.name){case"UnknownError":if(0<i.PR1398_maxLoop)return i.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),x();break;case"VersionError":if(0<m)return m=0,x()}return ve.reject(M)})}var I,P=i.dbReadyResolve,D=null,C=!1;return ve.race([f,(typeof navigator>"u"?ve.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(M){function S(){return indexedDB.databases().finally(M)}I=setInterval(S,100),S()}).finally(function(){return clearInterval(I)}):Promise.resolve()).then(x)]).then(function(){return _(),i.onReadyBeingFired=[],ve.resolve(Ei(function(){return s.on.ready.fire(s.vip)})).then(function M(){if(0<i.onReadyBeingFired.length){var S=i.onReadyBeingFired.reduce(ue,w);return i.onReadyBeingFired=[],ve.resolve(Ei(function(){return S(s.vip)})).then(M)}})}).finally(function(){i.openCanceller===f&&(i.onReadyBeingFired=null,i.isBeingOpened=!1)}).catch(function(M){i.dbOpenError=M;try{D&&D.abort()}catch{}return f===i.openCanceller&&s._close(),vt(M)}).finally(function(){i.openComplete=!0,P()}).then(function(){var M;return C&&(M={},s.tables.forEach(function(S){S.schema.indexes.forEach(function(R){R.name&&(M["idb://".concat(s.name,"/").concat(S.name,"/").concat(R.name)]=new $t(-1/0,[[[]]]))}),M["idb://".concat(s.name,"/").concat(S.name,"/")]=M["idb://".concat(s.name,"/").concat(S.name,"/:dels")]=new $t(-1/0,[[[]]])}),zn(ss).fire(M),Ri(M,!0)),s})}function Di(s){function i(y){return s.next(y)}var l=m(i),f=m(function(y){return s.throw(y)});function m(y){return function(I){var x=y(I),I=x.value;return x.done?I:I&&typeof I.then=="function"?I.then(l,f):u(I)?Promise.all(I).then(l,f):l(I)}}return m(i)()}function lo(s,i,l){for(var f=u(s)?s.slice():[s],m=0;m<l;++m)f.push(i);return f}var rf={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(s){return r(r({},s),{table:function(i){var l=s.table(i),f=l.schema,m={},y=[];function _(C,M,S){var R=is(C),F=m[R]=m[R]||[],$=C==null?0:typeof C=="string"?1:C.length,B=0<M,B=r(r({},S),{name:B?"".concat(R,"(virtual-from:").concat(S.name,")"):S.name,lowLevelIndex:S,isVirtual:B,keyTail:M,keyLength:$,extractKey:_i(C),unique:!B&&S.unique});return F.push(B),B.isPrimaryKey||y.push(B),1<$&&_($===2?C[0]:C.slice(0,$-1),M+1,S),F.sort(function(H,z){return H.keyTail-z.keyTail}),B}i=_(f.primaryKey.keyPath,0,f.primaryKey),m[":id"]=[i];for(var x=0,I=f.indexes;x<I.length;x++){var P=I[x];_(P.keyPath,0,P)}function D(C){var M,S=C.query.index;return S.isVirtual?r(r({},C),{query:{index:S.lowLevelIndex,range:(M=C.query.range,S=S.keyTail,{type:M.type===1?2:M.type,lower:lo(M.lower,M.lowerOpen?s.MAX_KEY:s.MIN_KEY,S),lowerOpen:!0,upper:lo(M.upper,M.upperOpen?s.MIN_KEY:s.MAX_KEY,S),upperOpen:!0})}}):C}return r(r({},l),{schema:r(r({},f),{primaryKey:i,indexes:y,getIndexByKeyPath:function(C){return(C=m[is(C)])&&C[0]}}),count:function(C){return l.count(D(C))},query:function(C){return l.query(D(C))},openCursor:function(C){var M=C.query.index,S=M.keyTail,R=M.isVirtual,F=M.keyLength;return R?l.openCursor(D(C)).then(function(B){return B&&$(B)}):l.openCursor(C);function $(B){return Object.create(B,{continue:{value:function(H){H!=null?B.continue(lo(H,C.reverse?s.MAX_KEY:s.MIN_KEY,S)):C.unique?B.continue(B.key.slice(0,F).concat(C.reverse?s.MIN_KEY:s.MAX_KEY,S)):B.continue()}},continuePrimaryKey:{value:function(H,z){B.continuePrimaryKey(lo(H,s.MAX_KEY,S),z)}},primaryKey:{get:function(){return B.primaryKey}},key:{get:function(){var H=B.key;return F===1?H[0]:H.slice(0,F)}},value:{get:function(){return B.value}}})}}})}})}};function $i(s,i,l,f){return l=l||{},f=f||"",c(s).forEach(function(m){var y,_,x;g(i,m)?(y=s[m],_=i[m],typeof y=="object"&&typeof _=="object"&&y&&_?(x=st(y))!==st(_)?l[f+m]=i[m]:x==="Object"?$i(y,_,l,f+m+"."):y!==_&&(l[f+m]=i[m]):y!==_&&(l[f+m]=i[m])):l[f+m]=void 0}),c(i).forEach(function(m){g(s,m)||(l[f+m]=i[m])}),l}function Ti(s,i){return i.type==="delete"?i.keys:i.keys||i.values.map(s.extractKey)}var sf={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(s){return r(r({},s),{table:function(i){var l=s.table(i),f=l.schema.primaryKey;return r(r({},l),{mutate:function(m){var y=ke.trans,_=y.table(i).hook,x=_.deleting,I=_.creating,P=_.updating;switch(m.type){case"add":if(I.fire===w)break;return y._promise("readwrite",function(){return D(m)},!0);case"put":if(I.fire===w&&P.fire===w)break;return y._promise("readwrite",function(){return D(m)},!0);case"delete":if(x.fire===w)break;return y._promise("readwrite",function(){return D(m)},!0);case"deleteRange":if(x.fire===w)break;return y._promise("readwrite",function(){return(function C(M,S,R){return l.query({trans:M,values:!1,query:{index:f,range:S},limit:R}).then(function(F){var $=F.result;return D({type:"delete",keys:$,trans:M}).then(function(B){return 0<B.numFailures?Promise.reject(B.failures[0]):$.length<R?{failures:[],numFailures:0,lastResult:void 0}:C(M,r(r({},S),{lower:$[$.length-1],lowerOpen:!0}),R)})})})(m.trans,m.range,1e4)},!0)}return l.mutate(m);function D(C){var M,S,R,F=ke.trans,$=C.keys||Ti(f,C);if(!$)throw new Error("Keys missing");return(C=C.type==="add"||C.type==="put"?r(r({},C),{keys:$}):r({},C)).type!=="delete"&&(C.values=o([],C.values)),C.keys&&(C.keys=o([],C.keys)),M=l,R=$,((S=C).type==="add"?Promise.resolve([]):M.getMany({trans:S.trans,keys:R,cache:"immutable"})).then(function(B){var H=$.map(function(z,Y){var ie,de,ae,ce=B[Y],ye={onerror:null,onsuccess:null};return C.type==="delete"?x.fire.call(ye,z,ce,F):C.type==="add"||ce===void 0?(ie=I.fire.call(ye,z,C.values[Y],F),z==null&&ie!=null&&(C.keys[Y]=z=ie,f.outbound||Ae(C.values[Y],f.keyPath,z))):(ie=$i(ce,C.values[Y]),(de=P.fire.call(ye,ie,z,ce,F))&&(ae=C.values[Y],Object.keys(de).forEach(function(he){g(ae,he)?ae[he]=de[he]:Ae(ae,he,de[he])}))),ye});return l.mutate(C).then(function(z){for(var Y=z.failures,ie=z.results,de=z.numFailures,z=z.lastResult,ae=0;ae<$.length;++ae){var ce=(ie||$)[ae],ye=H[ae];ce==null?ye.onerror&&ye.onerror(Y[ae]):ye.onsuccess&&ye.onsuccess(C.type==="put"&&B[ae]?C.values[ae]:ce)}return{failures:Y,results:ie,numFailures:de,lastResult:z}}).catch(function(z){return H.forEach(function(Y){return Y.onerror&&Y.onerror(z)}),Promise.reject(z)})})}}})}})}};function Cc(s,i,l){try{if(!i||i.keys.length<s.length)return null;for(var f=[],m=0,y=0;m<i.keys.length&&y<s.length;++m)ze(i.keys[m],s[y])===0&&(f.push(l?Se(i.values[m]):i.values[m]),++y);return f.length===s.length?f:null}catch{return null}}var of={stack:"dbcore",level:-1,create:function(s){return{table:function(i){var l=s.table(i);return r(r({},l),{getMany:function(f){if(!f.cache)return l.getMany(f);var m=Cc(f.keys,f.trans._cache,f.cache==="clone");return m?ve.resolve(m):l.getMany(f).then(function(y){return f.trans._cache={keys:f.keys,values:f.cache==="clone"?Se(y):y},y})},mutate:function(f){return f.type!=="add"&&(f.trans._cache=null),l.mutate(f)}})}}}};function Ac(s,i){return s.trans.mode==="readonly"&&!!s.subscr&&!s.trans.explicit&&s.trans.db._options.cache!=="disabled"&&!i.schema.primaryKey.outbound}function Ec(s,i){switch(s){case"query":return i.values&&!i.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var af={stack:"dbcore",level:0,name:"Observability",create:function(s){var i=s.schema.name,l=new $t(s.MIN_KEY,s.MAX_KEY);return r(r({},s),{transaction:function(f,m,y){if(ke.subscr&&m!=="readonly")throw new Q.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(ke.querier));return s.transaction(f,m,y)},table:function(f){var m=s.table(f),y=m.schema,_=y.primaryKey,C=y.indexes,x=_.extractKey,I=_.outbound,P=_.autoIncrement&&C.filter(function(S){return S.compound&&S.keyPath.includes(_.keyPath)}),D=r(r({},m),{mutate:function(S){function R(he){return he="idb://".concat(i,"/").concat(f,"/").concat(he),z[he]||(z[he]=new $t)}var F,$,B,H=S.trans,z=S.mutatedParts||(S.mutatedParts={}),Y=R(""),ie=R(":dels"),de=S.type,ye=S.type==="deleteRange"?[S.range]:S.type==="delete"?[S.keys]:S.values.length<50?[Ti(_,S).filter(function(he){return he}),S.values]:[],ae=ye[0],ce=ye[1],ye=S.trans._cache;return u(ae)?(Y.addKeys(ae),(ye=de==="delete"||ae.length===ce.length?Cc(ae,ye):null)||ie.addKeys(ae),(ye||ce)&&(F=R,$=ye,B=ce,y.indexes.forEach(function(he){var be=F(he.name||"");function Ve(Le){return Le!=null?he.extractKey(Le):null}function Ge(Le){return he.multiEntry&&u(Le)?Le.forEach(function(yt){return be.addKey(yt)}):be.addKey(Le)}($||B).forEach(function(Le,Tt){var Ne=$&&Ve($[Tt]),Tt=B&&Ve(B[Tt]);ze(Ne,Tt)!==0&&(Ne!=null&&Ge(Ne),Tt!=null&&Ge(Tt))})}))):ae?(ce={from:(ce=ae.lower)!==null&&ce!==void 0?ce:s.MIN_KEY,to:(ce=ae.upper)!==null&&ce!==void 0?ce:s.MAX_KEY},ie.add(ce),Y.add(ce)):(Y.add(l),ie.add(l),y.indexes.forEach(function(he){return R(he.name).add(l)})),m.mutate(S).then(function(he){return!ae||S.type!=="add"&&S.type!=="put"||(Y.addKeys(he.results),P&&P.forEach(function(be){for(var Ve=S.values.map(function(Ne){return be.extractKey(Ne)}),Ge=be.keyPath.findIndex(function(Ne){return Ne===_.keyPath}),Le=0,yt=he.results.length;Le<yt;++Le)Ve[Le][Ge]=he.results[Le];R(be.name).addKeys(Ve)})),H.mutatedParts=ao(H.mutatedParts||{},z),he})}}),C=function(R){var F=R.query,R=F.index,F=F.range;return[R,new $t((R=F.lower)!==null&&R!==void 0?R:s.MIN_KEY,(F=F.upper)!==null&&F!==void 0?F:s.MAX_KEY)]},M={get:function(S){return[_,new $t(S.key)]},getMany:function(S){return[_,new $t().addKeys(S.keys)]},count:C,query:C,openCursor:C};return c(M).forEach(function(S){D[S]=function(R){var F=ke.subscr,$=!!F,B=Ac(ke,m)&&Ec(S,R)?R.obsSet={}:F;if($){var H=function(ce){return ce="idb://".concat(i,"/").concat(f,"/").concat(ce),B[ce]||(B[ce]=new $t)},z=H(""),Y=H(":dels"),F=M[S](R),$=F[0],F=F[1];if((S==="query"&&$.isPrimaryKey&&!R.values?Y:H($.name||"")).add(F),!$.isPrimaryKey){if(S!=="count"){var ie=S==="query"&&I&&R.values&&m.query(r(r({},R),{values:!1}));return m[S].apply(this,arguments).then(function(ce){if(S==="query"){if(I&&R.values)return ie.then(function(Ve){return Ve=Ve.result,z.addKeys(Ve),ce});var ye=R.values?ce.result.map(x):ce.result;(R.values?z:Y).addKeys(ye)}else if(S==="openCursor"){var he=ce,be=R.values;return he&&Object.create(he,{key:{get:function(){return Y.addKey(he.primaryKey),he.key}},primaryKey:{get:function(){var Ve=he.primaryKey;return Y.addKey(Ve),Ve}},value:{get:function(){return be&&z.addKey(he.primaryKey),he.value}}})}return ce})}Y.add(l)}}return m[S].apply(this,arguments)}}),D}})}};function Ic(s,i,l){if(l.numFailures===0)return i;if(i.type==="deleteRange")return null;var f=i.keys?i.keys.length:"values"in i&&i.values?i.values.length:1;return l.numFailures===f?null:(i=r({},i),u(i.keys)&&(i.keys=i.keys.filter(function(m,y){return!(y in l.failures)})),"values"in i&&u(i.values)&&(i.values=i.values.filter(function(m,y){return!(y in l.failures)})),i)}function Fi(s,i){return l=s,((f=i).lower===void 0||(f.lowerOpen?0<ze(l,f.lower):0<=ze(l,f.lower)))&&(s=s,(i=i).upper===void 0||(i.upperOpen?ze(s,i.upper)<0:ze(s,i.upper)<=0));var l,f}function Sc(s,i,M,f,m,y){if(!M||M.length===0)return s;var _=i.query.index,x=_.multiEntry,I=i.query.range,P=f.schema.primaryKey.extractKey,D=_.extractKey,C=(_.lowLevelIndex||_).extractKey,M=M.reduce(function(S,R){var F=S,$=[];if(R.type==="add"||R.type==="put")for(var B=new $t,H=R.values.length-1;0<=H;--H){var z,Y=R.values[H],ie=P(Y);B.hasKey(ie)||(z=D(Y),(x&&u(z)?z.some(function(he){return Fi(he,I)}):Fi(z,I))&&(B.addKey(ie),$.push(Y)))}switch(R.type){case"add":var de=new $t().addKeys(i.values?S.map(function(be){return P(be)}):S),F=S.concat(i.values?$.filter(function(be){return be=P(be),!de.hasKey(be)&&(de.addKey(be),!0)}):$.map(function(be){return P(be)}).filter(function(be){return!de.hasKey(be)&&(de.addKey(be),!0)}));break;case"put":var ae=new $t().addKeys(R.values.map(function(be){return P(be)}));F=S.filter(function(be){return!ae.hasKey(i.values?P(be):be)}).concat(i.values?$:$.map(function(be){return P(be)}));break;case"delete":var ce=new $t().addKeys(R.keys);F=S.filter(function(be){return!ce.hasKey(i.values?P(be):be)});break;case"deleteRange":var ye=R.range;F=S.filter(function(be){return!Fi(P(be),ye)})}return F},s);return M===s?s:(M.sort(function(S,R){return ze(C(S),C(R))||ze(P(S),P(R))}),i.limit&&i.limit<1/0&&(M.length>i.limit?M.length=i.limit:s.length===i.limit&&M.length<i.limit&&(m.dirty=!0)),y?Object.freeze(M):M)}function Pc(s,i){return ze(s.lower,i.lower)===0&&ze(s.upper,i.upper)===0&&!!s.lowerOpen==!!i.lowerOpen&&!!s.upperOpen==!!i.upperOpen}function cf(s,i){return(function(l,f,m,y){if(l===void 0)return f!==void 0?-1:0;if(f===void 0)return 1;if((f=ze(l,f))===0){if(m&&y)return 0;if(m)return 1;if(y)return-1}return f})(s.lower,i.lower,s.lowerOpen,i.lowerOpen)<=0&&0<=(function(l,f,m,y){if(l===void 0)return f!==void 0?1:0;if(f===void 0)return-1;if((f=ze(l,f))===0){if(m&&y)return 0;if(m)return-1;if(y)return 1}return f})(s.upper,i.upper,s.upperOpen,i.upperOpen)}function lf(s,i,l,f){s.subscribers.add(l),f.addEventListener("abort",function(){var m,y;s.subscribers.delete(l),s.subscribers.size===0&&(m=s,y=i,setTimeout(function(){m.subscribers.size===0&&G(y,m)},3e3))})}var uf={stack:"dbcore",level:0,name:"Cache",create:function(s){var i=s.schema.name;return r(r({},s),{transaction:function(l,f,m){var y,_,x=s.transaction(l,f,m);return f==="readwrite"&&(_=(y=new AbortController).signal,m=function(I){return function(){if(y.abort(),f==="readwrite"){for(var P=new Set,D=0,C=l;D<C.length;D++){var M=C[D],S=fr["idb://".concat(i,"/").concat(M)];if(S){var R=s.table(M),F=S.optimisticOps.filter(function(be){return be.trans===x});if(x._explicit&&I&&x.mutatedParts)for(var $=0,B=Object.values(S.queries.query);$<B.length;$++)for(var H=0,z=(de=B[$]).slice();H<z.length;H++)Si((ae=z[H]).obsSet,x.mutatedParts)&&(G(de,ae),ae.subscribers.forEach(function(be){return P.add(be)}));else if(0<F.length){S.optimisticOps=S.optimisticOps.filter(function(be){return be.trans!==x});for(var Y=0,ie=Object.values(S.queries.query);Y<ie.length;Y++)for(var de,ae,ce,ye=0,he=(de=ie[Y]).slice();ye<he.length;ye++)(ae=he[ye]).res!=null&&x.mutatedParts&&(I&&!ae.dirty?(ce=Object.isFrozen(ae.res),ce=Sc(ae.res,ae.req,F,R,ae,ce),ae.dirty?(G(de,ae),ae.subscribers.forEach(function(be){return P.add(be)})):ce!==ae.res&&(ae.res=ce,ae.promise=ve.resolve({result:ce}))):(ae.dirty&&G(de,ae),ae.subscribers.forEach(function(be){return P.add(be)})))}}}P.forEach(function(be){return be()})}}},x.addEventListener("abort",m(!1),{signal:_}),x.addEventListener("error",m(!1),{signal:_}),x.addEventListener("complete",m(!0),{signal:_})),x},table:function(l){var f=s.table(l),m=f.schema.primaryKey;return r(r({},f),{mutate:function(y){var _=ke.trans;if(m.outbound||_.db._options.cache==="disabled"||_.explicit||_.idbtrans.mode!=="readwrite")return f.mutate(y);var x=fr["idb://".concat(i,"/").concat(l)];return x?(_=f.mutate(y),y.type!=="add"&&y.type!=="put"||!(50<=y.values.length||Ti(m,y).some(function(I){return I==null}))?(x.optimisticOps.push(y),y.mutatedParts&&co(y.mutatedParts),_.then(function(I){0<I.numFailures&&(G(x.optimisticOps,y),(I=Ic(0,y,I))&&x.optimisticOps.push(I),y.mutatedParts&&co(y.mutatedParts))}),_.catch(function(){G(x.optimisticOps,y),y.mutatedParts&&co(y.mutatedParts)})):_.then(function(I){var P=Ic(0,r(r({},y),{values:y.values.map(function(D,C){var M;return I.failures[C]?D:(D=(M=m.keyPath)!==null&&M!==void 0&&M.includes(".")?Se(D):r({},D),Ae(D,m.keyPath,I.results[C]),D)})}),I);x.optimisticOps.push(P),queueMicrotask(function(){return y.mutatedParts&&co(y.mutatedParts)})}),_):f.mutate(y)},query:function(y){if(!Ac(ke,f)||!Ec("query",y))return f.query(y);var _=((P=ke.trans)===null||P===void 0?void 0:P.db._options.cache)==="immutable",C=ke,x=C.requery,I=C.signal,P=(function(R,F,$,B){var H=fr["idb://".concat(R,"/").concat(F)];if(!H)return[];if(!(F=H.queries[$]))return[null,!1,H,null];var z=F[(B.query?B.query.index.name:null)||""];if(!z)return[null,!1,H,null];switch($){case"query":var Y=z.find(function(ie){return ie.req.limit===B.limit&&ie.req.values===B.values&&Pc(ie.req.query.range,B.query.range)});return Y?[Y,!0,H,z]:[z.find(function(ie){return("limit"in ie.req?ie.req.limit:1/0)>=B.limit&&(!B.values||ie.req.values)&&cf(ie.req.query.range,B.query.range)}),!1,H,z];case"count":return Y=z.find(function(ie){return Pc(ie.req.query.range,B.query.range)}),[Y,!!Y,H,z]}})(i,l,"query",y),D=P[0],C=P[1],M=P[2],S=P[3];return D&&C?D.obsSet=y.obsSet:(C=f.query(y).then(function(R){var F=R.result;if(D&&(D.res=F),_){for(var $=0,B=F.length;$<B;++$)Object.freeze(F[$]);Object.freeze(F)}else R.result=Se(F);return R}).catch(function(R){return S&&D&&G(S,D),Promise.reject(R)}),D={obsSet:y.obsSet,promise:C,subscribers:new Set,type:"query",req:y,dirty:!1},S?S.push(D):(S=[D],(M=M||(fr["idb://".concat(i,"/").concat(l)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[y.query.index.name||""]=S)),lf(D,S,x,I),D.promise.then(function(R){return{result:Sc(R.result,y,M?.optimisticOps,f,D,_)}})}})}})}};function uo(s,i){return new Proxy(s,{get:function(l,f,m){return f==="db"?i:Reflect.get(l,f,m)}})}var Rn=(bt.prototype.version=function(s){if(isNaN(s)||s<.1)throw new Q.Type("Given version is not a positive number");if(s=Math.round(10*s)/10,this.idbdb||this._state.isBeingOpened)throw new Q.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,s);var i=this._versions,l=i.filter(function(f){return f._cfg.version===s})[0];return l||(l=new this.Version(s),i.push(l),i.sort(Xd),l.stores({}),this._state.autoSchema=!1,l)},bt.prototype._whenReady=function(s){var i=this;return this.idbdb&&(this._state.openComplete||ke.letThrough||this._vip)?s():new ve(function(l,f){if(i._state.openComplete)return f(new Q.DatabaseClosed(i._state.dbOpenError));if(!i._state.isBeingOpened){if(!i._state.autoOpen)return void f(new Q.DatabaseClosed);i.open().catch(w)}i._state.dbReadyPromise.then(l,f)}).then(s)},bt.prototype.use=function(s){var i=s.stack,l=s.create,f=s.level,m=s.name;return m&&this.unuse({stack:i,name:m}),s=this._middlewares[i]||(this._middlewares[i]=[]),s.push({stack:i,create:l,level:f??10,name:m}),s.sort(function(y,_){return y.level-_.level}),this},bt.prototype.unuse=function(s){var i=s.stack,l=s.name,f=s.create;return i&&this._middlewares[i]&&(this._middlewares[i]=this._middlewares[i].filter(function(m){return f?m.create!==f:!!l&&m.name!==l})),this},bt.prototype.open=function(){var s=this;return lr(gt,function(){return nf(s)})},bt.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var s=this._state,i=Dr.indexOf(this);if(0<=i&&Dr.splice(i,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}s.isBeingOpened||(s.dbReadyPromise=new ve(function(l){s.dbReadyResolve=l}),s.openCanceller=new ve(function(l,f){s.cancelOpen=f}))},bt.prototype.close=function(l){var i=(l===void 0?{disableAutoOpen:!0}:l).disableAutoOpen,l=this._state;i?(l.isBeingOpened&&l.cancelOpen(new Q.DatabaseClosed),this._close(),l.autoOpen=!1,l.dbOpenError=new Q.DatabaseClosed):(this._close(),l.autoOpen=this._options.autoOpen||l.isBeingOpened,l.openComplete=!1,l.dbOpenError=null)},bt.prototype.delete=function(s){var i=this;s===void 0&&(s={disableAutoOpen:!0});var l=0<arguments.length&&typeof arguments[0]!="object",f=this._state;return new ve(function(m,y){function _(){i.close(s);var x=i._deps.indexedDB.deleteDatabase(i.name);x.onsuccess=pt(function(){var I,P,D;I=i._deps,P=i.name,D=I.indexedDB,I=I.IDBKeyRange,Ai(D)||P===Ys||Ci(D,I).delete(P).catch(w),m()}),x.onerror=gn(y),x.onblocked=i._fireOnBlocked}if(l)throw new Q.InvalidArgument("Invalid closeOptions argument to db.delete()");f.isBeingOpened?f.dbReadyPromise.then(_):_()})},bt.prototype.backendDB=function(){return this.idbdb},bt.prototype.isOpen=function(){return this.idbdb!==null},bt.prototype.hasBeenClosed=function(){var s=this._state.dbOpenError;return s&&s.name==="DatabaseClosed"},bt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},bt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(bt.prototype,"tables",{get:function(){var s=this;return c(this._allTables).map(function(i){return s._allTables[i]})},enumerable:!1,configurable:!0}),bt.prototype.transaction=function(){var s=(function(i,l,f){var m=arguments.length;if(m<2)throw new Q.InvalidArgument("Too few arguments");for(var y=new Array(m-1);--m;)y[m-1]=arguments[m];return f=y.pop(),[i,Oe(y),f]}).apply(this,arguments);return this._transaction.apply(this,s)},bt.prototype._transaction=function(s,i,l){var f=this,m=ke.trans;m&&m.db===this&&s.indexOf("!")===-1||(m=null);var y,_,x=s.indexOf("?")!==-1;s=s.replace("!","").replace("?","");try{if(_=i.map(function(P){if(P=P instanceof f.Table?P.name:P,typeof P!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return P}),s=="r"||s===pi)y=pi;else{if(s!="rw"&&s!=hi)throw new Q.InvalidArgument("Invalid transaction mode: "+s);y=hi}if(m){if(m.mode===pi&&y===hi){if(!x)throw new Q.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");m=null}m&&_.forEach(function(P){if(m&&m.storeNames.indexOf(P)===-1){if(!x)throw new Q.SubTransaction("Table "+P+" not included in parent transaction.");m=null}}),x&&m&&!m.active&&(m=null)}}catch(P){return m?m._promise(null,function(D,C){C(P)}):vt(P)}var I=(function P(D,C,M,S,R){return ve.resolve().then(function(){var F=ke.transless||ke,$=D._createTransaction(C,M,D._dbSchema,S);if($.explicit=!0,F={trans:$,transless:F},S)$.idbtrans=S.idbtrans;else try{$.create(),$.idbtrans._explicit=!0,D._state.PR1398_maxLoop=3}catch(z){return z.name===Z.InvalidState&&D.isOpen()&&0<--D._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),D.close({disableAutoOpen:!1}),D.open().then(function(){return P(D,C,M,null,R)})):vt(z)}var B,H=Re(R);return H&&Rr(),F=ve.follow(function(){var z;(B=R.call($,$))&&(H?(z=Vn.bind(null,null),B.then(z,z)):typeof B.next=="function"&&typeof B.throw=="function"&&(B=Di(B)))},F),(B&&typeof B.then=="function"?ve.resolve(B).then(function(z){return $.active?z:vt(new Q.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):F.then(function(){return B})).then(function(z){return S&&$._resolve(),$._completion.then(function(){return z})}).catch(function(z){return $._reject(z),vt(z)})})}).bind(null,this,y,_,m,l);return m?m._promise(y,I,"lock"):ke.trans?lr(ke.transless,function(){return f._whenReady(I)}):this._whenReady(I)},bt.prototype.table=function(s){if(!g(this._allTables,s))throw new Q.InvalidTable("Table ".concat(s," does not exist"));return this._allTables[s]},bt);function bt(s,i){var l=this;this._middlewares={},this.verno=0;var f=bt.dependencies;this._options=i=r({addons:bt.addons,autoOpen:!0,indexedDB:f.indexedDB,IDBKeyRange:f.IDBKeyRange,cache:"cloned"},i),this._deps={indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange},f=i.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var m,y,_,x,I,P={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:w,dbReadyPromise:null,cancelOpen:w,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:i.autoOpen};P.dbReadyPromise=new ve(function(C){P.dbReadyResolve=C}),P.openCanceller=new ve(function(C,M){P.cancelOpen=M}),this._state=P,this.name=s,this.on=es(this,"populate","blocked","versionchange","close",{ready:[ue,w]}),this.once=function(C,M){var S=function(){for(var R=[],F=0;F<arguments.length;F++)R[F]=arguments[F];l.on(C).unsubscribe(S),M.apply(l,R)};return l.on(C,S)},this.on.ready.subscribe=T(this.on.ready.subscribe,function(C){return function(M,S){bt.vip(function(){var R,F=l._state;F.openComplete?(F.dbOpenError||ve.resolve().then(M),S&&C(M)):F.onReadyBeingFired?(F.onReadyBeingFired.push(M),S&&C(M)):(C(M),R=l,S||C(function $(){R.on.ready.unsubscribe(M),R.on.ready.unsubscribe($)}))})}}),this.Collection=(m=this,ts(Hd.prototype,function(B,$){this.db=m;var S=oc,R=null;if($)try{S=$()}catch(H){R=H}var F=B._ctx,$=F.table,B=$.hook.reading.fire;this._ctx={table:$,index:F.index,isPrimKey:!F.index||$.schema.primKey.keyPath&&F.index===$.schema.primKey.name,range:S,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:R,or:F.or,valueMapper:B!==A?B:null}})),this.Table=(y=this,ts(lc.prototype,function(C,M,S){this.db=y,this._tx=S,this.name=C,this.schema=M,this.hook=y._allTables[C]?y._allTables[C].hook:es(null,{creating:[te,w],reading:[N,A],updating:[me,w],deleting:[ee,w]})})),this.Transaction=(_=this,ts(Qd.prototype,function(C,M,S,R,F){var $=this;C!=="readonly"&&M.forEach(function(B){B=(B=S[B])===null||B===void 0?void 0:B.yProps,B&&(M=M.concat(B.map(function(H){return H.updatesTable})))}),this.db=_,this.mode=C,this.storeNames=M,this.schema=S,this.chromeTransactionDurability=R,this.idbtrans=null,this.on=es(this,"complete","error","abort"),this.parent=F||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ve(function(B,H){$._resolve=B,$._reject=H}),this._completion.then(function(){$.active=!1,$.on.complete.fire()},function(B){var H=$.active;return $.active=!1,$.on.error.fire(B),$.parent?$.parent._reject(B):H&&$.idbtrans&&$.idbtrans.abort(),vt(B)})})),this.Version=(x=this,ts(tf.prototype,function(C){this.db=x,this._cfg={version:C,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(I=this,ts(mc.prototype,function(C,M,S){if(this.db=I,this._ctx={table:C,index:M===":id"?null:M,or:S},this._cmp=this._ascending=ze,this._descending=function(R,F){return ze(F,R)},this._max=function(R,F){return 0<ze(R,F)?R:F},this._min=function(R,F){return ze(R,F)<0?R:F},this._IDBKeyRange=I._deps.IDBKeyRange,!this._IDBKeyRange)throw new Q.MissingAPI})),this.on("versionchange",function(C){0<C.newVersion?console.warn("Another connection wants to upgrade database '".concat(l.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(l.name,"'. Closing db now to resume the delete request.")),l.close({disableAutoOpen:!1})}),this.on("blocked",function(C){!C.newVersion||C.newVersion<C.oldVersion?console.warn("Dexie.delete('".concat(l.name,"') was blocked")):console.warn("Upgrade '".concat(l.name,"' blocked by other connection holding version ").concat(C.oldVersion/10))}),this._maxKey=os(i.IDBKeyRange),this._createTransaction=function(C,M,S,R){return new l.Transaction(C,M,S,l._options.chromeTransactionDurability,R)},this._fireOnBlocked=function(C){l.on("blocked").fire(C),Dr.filter(function(M){return M.name===l.name&&M!==l&&!M._state.vcFired}).map(function(M){return M.on("versionchange").fire(C)})},this.use(of),this.use(uf),this.use(af),this.use(rf),this.use(sf);var D=new Proxy(this,{get:function(C,M,S){if(M==="_vip")return!0;if(M==="table")return function(F){return uo(l.table(F),D)};var R=Reflect.get(C,M,S);return R instanceof lc?uo(R,D):M==="tables"?R.map(function(F){return uo(F,D)}):M==="_createTransaction"?function(){return uo(R.apply(this,arguments),D)}:R}});this.vip=D,f.forEach(function(C){return C(l)})}var fo,rn=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",df=(Mi.prototype.subscribe=function(s,i,l){return this._subscribe(s&&typeof s!="function"?s:{next:s,error:i,complete:l})},Mi.prototype[rn]=function(){return this},Mi);function Mi(s){this._subscribe=s}try{fo={indexedDB:a.indexedDB||a.mozIndexedDB||a.webkitIndexedDB||a.msIndexedDB,IDBKeyRange:a.IDBKeyRange||a.webkitIDBKeyRange}}catch{fo={indexedDB:null,IDBKeyRange:null}}function Oc(s){var i,l=!1,f=new df(function(m){var y=Re(s),_,x=!1,I={},P={},D={get closed(){return x},unsubscribe:function(){x||(x=!0,_&&_.abort(),C&&zn.storagemutated.unsubscribe(S))}};m.start&&m.start(D);var C=!1,M=function(){return fi(R)},S=function(F){ao(I,F),Si(P,I)&&M()},R=function(){var F,$,B;!x&&fo.indexedDB&&(I={},F={},_&&_.abort(),_=new AbortController,B=(function(H){var z=Pr();try{y&&Rr();var Y=Kn(s,H);return Y=y?Y.finally(Vn):Y}finally{z&&Or()}})($={subscr:F,signal:_.signal,requery:M,querier:s,trans:null}),Promise.resolve(B).then(function(H){l=!0,i=H,x||$.signal.aborted||(I={},(function(z){for(var Y in z)if(g(z,Y))return;return 1})(P=F)||C||(zn(ss,S),C=!0),fi(function(){return!x&&m.next&&m.next(H)}))},function(H){l=!1,["DatabaseClosedError","AbortError"].includes(H?.name)||x||fi(function(){x||m.error&&m.error(H)})}))};return setTimeout(M,0),D});return f.hasValue=function(){return l},f.getValue=function(){return i},f}var pr=Rn;function Bi(s){var i=Qn;try{Qn=!0,zn.storagemutated.fire(s),Ri(s,!0)}finally{Qn=i}}v(pr,r(r({},tt),{delete:function(s){return new pr(s,{addons:[]}).delete()},exists:function(s){return new pr(s,{addons:[]}).open().then(function(i){return i.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(s){try{return i=pr.dependencies,l=i.indexedDB,i=i.IDBKeyRange,(Ai(l)?Promise.resolve(l.databases()).then(function(f){return f.map(function(m){return m.name}).filter(function(m){return m!==Ys})}):Ci(l,i).toCollection().primaryKeys()).then(s)}catch{return vt(new Q.MissingAPI)}var i,l},defineClass:function(){return function(s){d(this,s)}},ignoreTransaction:function(s){return ke.trans?lr(ke.transless,s):s()},vip:Ei,async:function(s){return function(){try{var i=Di(s.apply(this,arguments));return i&&typeof i.then=="function"?i:ve.resolve(i)}catch(l){return vt(l)}}},spawn:function(s,i,l){try{var f=Di(s.apply(l,i||[]));return f&&typeof f.then=="function"?f:ve.resolve(f)}catch(m){return vt(m)}},currentTransaction:{get:function(){return ke.trans||null}},waitFor:function(s,i){return i=ve.resolve(typeof s=="function"?pr.ignoreTransaction(s):s).timeout(i||6e4),ke.trans?ke.trans.waitFor(i):i},Promise:ve,debug:{get:function(){return ne},set:function(s){Te(s)}},derive:j,extend:d,props:v,override:T,Events:es,on:zn,liveQuery:Oc,extendObservabilitySet:ao,getByKeyPath:le,setByKeyPath:Ae,delByKeyPath:function(s,i){typeof i=="string"?Ae(s,i,void 0):"length"in i&&[].map.call(i,function(l){Ae(s,l,void 0)})},shallowClone:Pe,deepClone:Se,getObjectDiff:$i,cmp:ze,asap:re,minKey:-1/0,addons:[],connections:Dr,errnames:Z,dependencies:fo,cache:fr,semVer:"4.2.0",version:"4.2.0".split(".").map(function(s){return parseInt(s)}).reduce(function(s,i,l){return s+i/Math.pow(10,2*l)})})),pr.maxKey=os(pr.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(zn(ss,function(s){Qn||(s=new CustomEvent(yi,{detail:s}),Qn=!0,dispatchEvent(s),Qn=!1)}),addEventListener(yi,function(s){s=s.detail,Qn||Bi(s)}));var Mr,Qn=!1,Rc=function(){};return typeof BroadcastChannel<"u"&&((Rc=function(){(Mr=new BroadcastChannel(yi)).onmessage=function(s){return s.data&&Bi(s.data)}})(),typeof Mr.unref=="function"&&Mr.unref(),zn(ss,function(s){Qn||Mr.postMessage(s)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(s){if(!Rn.disableBfCache&&s.persisted){ne&&console.debug("Dexie: handling persisted pagehide"),Mr?.close();for(var i=0,l=Dr;i<l.length;i++)l[i].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(s){!Rn.disableBfCache&&s.persisted&&(ne&&console.debug("Dexie: handling persisted pageshow"),Rc(),Bi({all:new $t(-1/0,[[]])}))})),ve.rejectionMapper=function(s,i){return!s||s instanceof Qe||s instanceof TypeError||s instanceof SyntaxError||!s.name||!Ee[s.name]?s:(i=new Ee[s.name](i||s.message,s),"stack"in s&&O(i,"stack",{get:function(){return this.inner.stack}}),i)},Te(ne),r(Rn,Object.freeze({__proto__:null,Dexie:Rn,liveQuery:Oc,Entity:ic,cmp:ze,PropModification:ns,replacePrefix:function(s,i){return new ns({replacePrefix:[s,i]})},add:function(s){return new ns({add:s})},remove:function(s){return new ns({remove:s})},default:Rn,RangeSet:$t,mergeRanges:cs,rangesOverlap:_c}),{default:Rn}),Rn})})(So)),So.exports}var Bg=Mg();const Ca=Tg(Bg),Bl=Symbol.for("Dexie"),Uo=globalThis[Bl]||(globalThis[Bl]=Ca);if(Ca.semVer!==Uo.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Ca.semVer} and ${Uo.semVer}`);const{liveQuery:Pw,mergeRanges:Ow,rangesOverlap:Rw,RangeSet:Dw,cmp:$w,Entity:Tw,PropModification:Fw,replacePrefix:Mw,add:Bw,remove:Nw,DexieYProvider:Lw}=Uo;class Ng extends Uo{cards;card_lots;holdings;transactions;scans;decks;deck_cards;price_points;valuations;settings;scan_sale_links;constructor(){super("MtgTrackerDb"),this.version(1).stores({cards:"id, oracleId, name, set, setCode, number, lang, finish",holdings:"id, cardId, acquisitionId, source, createdAt",transactions:"id, kind, cardId, source, externalRef, happenedAt",scans:"id, cardFingerprint, cardId, source, scannedAt",decks:"id, platform, name, importedAt",deck_cards:"[deckId+cardId], deckId, cardId",price_points:"id, cardId, provider, asOf",valuations:"id, asOf",settings:"k"}),this.version(2).stores({cards:"id, oracleId, name, set, setCode, number, lang, finish, createdAt, updatedAt",holdings:"id, cardId, acquisitionId, source, createdAt, updatedAt",transactions:"id, kind, cardId, source, externalRef, happenedAt, createdAt, updatedAt",scans:"id, cardFingerprint, cardId, source, scannedAt, createdAt, updatedAt",decks:"id, platform, name, importedAt, createdAt, updatedAt",deck_cards:"[deckId+cardId], deckId, cardId, createdAt",price_points:"id, cardId, provider, asOf, createdAt",valuations:"id, asOf, createdAt",settings:"k, createdAt, updatedAt",scan_sale_links:"id, scanId, transactionId, matchedAt, createdAt"}).upgrade(async t=>{const n=new Date;await t.table("cards").toCollection().modify(r=>{r.createdAt=r.createdAt||n,r.updatedAt=r.updatedAt||n}),await t.table("holdings").toCollection().modify(r=>{r.createdAt=r.createdAt||n,r.updatedAt=r.updatedAt||n}),await t.table("transactions").toCollection().modify(r=>{r.createdAt=r.createdAt||n,r.updatedAt=r.updatedAt||n}),await t.table("scans").toCollection().modify(r=>{r.createdAt=r.createdAt||n,r.updatedAt=r.updatedAt||n}),await t.table("decks").toCollection().modify(r=>{r.createdAt=r.createdAt||n,r.updatedAt=r.updatedAt||n}),await t.table("deck_cards").toCollection().modify(r=>{r.createdAt=r.createdAt||n}),await t.table("price_points").toCollection().modify(r=>{r.createdAt=r.createdAt||n}),await t.table("valuations").toCollection().modify(r=>{r.createdAt=r.createdAt||n}),await t.table("settings").toCollection().modify(r=>{r.createdAt=r.createdAt||n,r.updatedAt=r.updatedAt||n})}),this.version(3).stores({cards:"id, oracleId, name, set, setCode, number, lang, finish, createdAt, updatedAt",holdings:"id, cardId, acquisitionId, source, createdAt, updatedAt",transactions:"id, kind, cardId, source, externalRef, happenedAt, createdAt, updatedAt",scans:"id, cardFingerprint, cardId, source, scannedAt, createdAt, updatedAt",decks:"id, platform, name, importedAt, createdAt, updatedAt",deck_cards:"[deckId+cardId], deckId, cardId, createdAt",price_points:"id, cardId, provider, currency, asOf, createdAt, [cardId+asOf], [provider+asOf]",valuations:"id, asOf, createdAt, [asOf+createdAt]",settings:"k, createdAt, updatedAt",scan_sale_links:"id, scanId, transactionId, matchedAt, createdAt"}),this.version(4).stores({cards:"id, oracleId, name, set, setCode, number, lang, finish, createdAt, updatedAt",card_lots:"id, cardId, acquisitionId, source, purchasedAt, disposedAt, createdAt, updatedAt, [cardId+purchasedAt], [acquisitionId+cardId]",holdings:"id, cardId, acquisitionId, source, createdAt, updatedAt",transactions:"id, kind, cardId, lotId, source, externalRef, happenedAt, relatedTransactionId, createdAt, updatedAt, [lotId+kind]",scans:"id, cardFingerprint, cardId, lotId, source, scannedAt, boosterPackId, createdAt, updatedAt, [lotId+scannedAt]",decks:"id, platform, name, importedAt, createdAt, updatedAt",deck_cards:"id, deckId, cardId, lotId, addedAt, removedAt, createdAt, [deckId+cardId], [lotId+addedAt]",price_points:"id, cardId, provider, currency, asOf, source, createdAt, [cardId+asOf], [provider+asOf]",valuations:"id, asOf, createdAt, [asOf+createdAt]",settings:"k, createdAt, updatedAt",scan_sale_links:"id, scanId, transactionId, quantity, matchedAt, createdAt"}).upgrade(async t=>{const n=new Date;await t.table("deck_cards").toCollection().modify(r=>{try{r.id||(r.id=`deckcard-${Date.now()}-${Math.random().toString(36).substr(2,9)}`),r.addedAt||(r.addedAt=r.createdAt||n),r.role||(r.role="main"),(!r.cardId||r.cardId==="")&&(r.cardId="unknown-card"),r.deckId||(r.deckId="unknown-deck"),typeof r.quantity!="number"&&(r.quantity=1),r.createdAt||(r.createdAt=n)}catch(o){console.error("Error upgrading deck card:",o,r);return}})}),this.version(7).stores({cards:"id, oracleId, name, set, setCode, number, lang, finish, layout, imageUrl, imageUrlBack, createdAt, updatedAt",card_lots:"id, cardId, acquisitionId, source, purchasedAt, disposedAt, createdAt, updatedAt, externalRef, [cardId+purchasedAt], [acquisitionId+cardId], [externalRef]",holdings:"id, cardId, acquisitionId, source, createdAt, updatedAt",transactions:"id, kind, cardId, lotId, source, externalRef, happenedAt, relatedTransactionId, createdAt, updatedAt, [lotId+kind]",scans:"id, cardFingerprint, cardId, lotId, source, scannedAt, boosterPackId, createdAt, updatedAt, [lotId+scannedAt]",decks:"id, platform, name, importedAt, createdAt, updatedAt",deck_cards:"id, deckId, cardId, lotId, addedAt, removedAt, createdAt, [deckId+cardId], [lotId+addedAt]",price_points:"id, cardId, provider, currency, asOf, source, createdAt, [cardId+asOf], [provider+asOf]",valuations:"id, asOf, createdAt, [asOf+createdAt]",settings:"k, createdAt, updatedAt",scan_sale_links:"id, scanId, transactionId, quantity, matchedAt, createdAt"}).upgrade(async t=>{await t.table("cards").toCollection().modify(n=>{n.layout=n.layout||"normal"})}),this.version(5).stores({cards:"id, oracleId, name, set, setCode, number, lang, finish, createdAt, updatedAt",card_lots:"id, cardId, acquisitionId, source, purchasedAt, disposedAt, createdAt, updatedAt, externalRef, [cardId+purchasedAt], [acquisitionId+cardId], [externalRef]",holdings:"id, cardId, acquisitionId, source, createdAt, updatedAt",transactions:"id, kind, cardId, lotId, source, externalRef, happenedAt, relatedTransactionId, createdAt, updatedAt, [lotId+kind]",scans:"id, cardFingerprint, cardId, lotId, source, scannedAt, boosterPackId, createdAt, updatedAt, [lotId+scannedAt]",decks:"id, platform, name, importedAt, createdAt, updatedAt",deck_cards:"id, deckId, cardId, lotId, addedAt, removedAt, createdAt, [deckId+cardId], [lotId+addedAt]",price_points:"id, cardId, provider, currency, asOf, source, createdAt, [cardId+asOf], [provider+asOf]",valuations:"id, asOf, createdAt, [asOf+createdAt]",settings:"k, createdAt, updatedAt",scan_sale_links:"id, scanId, transactionId, quantity, matchedAt, createdAt"})}}const xe=new Ng,xn={async add(e){return await xe.cards.add(e)},async getById(e){return await xe.cards.get(e)},async getAll(){return await xe.cards.toArray()},async update(e,t){return await xe.cards.update(e,t)},async delete(e){await xe.cards.delete(e)}},Ot={async add(e){return await xe.card_lots.add(e)},async getById(e){return await xe.card_lots.get(e)},async getAll(){return await xe.card_lots.toArray()},async getByCardId(e){return await xe.card_lots.where("cardId").equals(e).toArray()},async getByExternalRef(e){return await xe.card_lots.where("externalRef").equals(e).toArray()},async getActiveLotsByCardId(e){return await xe.card_lots.where("cardId").equals(e).and(t=>!t.disposedAt).toArray()},async update(e,t){return await xe.card_lots.update(e,t)},async delete(e){await xe.card_lots.delete(e)}},hs={async add(e){return await xe.holdings.add(e)},async getById(e){return await xe.holdings.get(e)},async getAll(){return await xe.holdings.toArray()},async getByCardId(e){return await xe.holdings.where("cardId").equals(e).toArray()},async update(e,t){return await xe.holdings.update(e,t)},async delete(e){await xe.holdings.delete(e)}},kn={async add(e){return await xe.transactions.add(e)},async getById(e){return await xe.transactions.get(e)},async getAll(){return await xe.transactions.toArray()},async getByCardId(e){return await xe.transactions.where("cardId").equals(e).toArray()},async getByLotId(e){return await xe.transactions.where("lotId").equals(e).toArray()},async getByKind(e){return await xe.transactions.where("kind").equals(e).toArray()},async getBuyTransactionsByCardId(e){return await xe.transactions.where("cardId").equals(e).and(t=>t.kind==="BUY").toArray()},async getSellTransactionsByCardId(e){return await xe.transactions.where("cardId").equals(e).and(t=>t.kind==="SELL").toArray()},async update(e,t){return await xe.transactions.update(e,t)},async delete(e){await xe.transactions.delete(e)}},Aa={async add(e){return await xe.price_points.add(e)},async getById(e){return await xe.price_points.get(e)},async getByCardId(e){return await xe.price_points.where("cardId").equals(e).toArray()},async update(e,t){return await xe.price_points.update(e,t)},async delete(e){await xe.price_points.delete(e)}},Zi={async set(e,t){const n={k:e,v:t,createdAt:new Date,updatedAt:new Date};return await xe.settings.put(n)},async get(e){return(await xe.settings.get(e))?.v},async getAll(){return await xe.settings.toArray()},async delete(e){await xe.settings.delete(e)}};class at{cents;currency;constructor(t,n="EUR"){this.cents=Math.round(t),this.currency=n}static parse(t,n="EUR"){if(typeof t=="number")return new at(t*100,n);const r=t.replace(/[$\s]/g,"").replace(",","."),o=parseFloat(r);return new at(isNaN(o)?0:o*100,n)}getCents(){return this.cents}getDecimal(){return this.cents/100}getCurrency(){return this.currency}add(t){if(this.currency!==t.currency)throw new Error("Cannot add Money values with different currencies");return new at(this.cents+t.cents,this.currency)}subtract(t){if(this.currency!==t.currency)throw new Error("Cannot subtract Money values with different currencies");return new at(this.cents-t.cents,this.currency)}multiply(t){return new at(this.cents*t,this.currency)}divide(t){return new at(this.cents/t,this.currency)}format(t="de-DE"){return new Intl.NumberFormat(t,{style:"currency",currency:this.currency,minimumFractionDigits:2,maximumFractionDigits:2}).format(this.getDecimal())}isZero(){return this.cents===0}isPositive(){return this.cents>0}isNegative(){return this.cents<0}}const Ga=ii("cards",{state:()=>({cards:{},cardPrices:{},loading:!1,loadingPrices:!1,error:null}),getters:{getCardById:e=>t=>e.cards[t],getAllCards:e=>Object.values(e.cards),getCardsBySet:e=>t=>Object.values(e.cards).filter(n=>n.setCode===t),getCardPrice:e=>t=>e.cardPrices[t]||null},actions:{async loadCards(){this.loading=!0,this.error=null;try{const e=await xn.getAll();this.cards=e.reduce((t,n)=>(t[n.id]=n,t),{})}catch(e){this.error=e instanceof Error?e.message:"Failed to load cards",console.error("Error loading cards:",e)}finally{this.loading=!1}},async loadCardPrices(){this.loadingPrices=!0,this.error=null;try{const e=await xe.price_points.toArray(),t={},n={};e.forEach(r=>{n[r.cardId]||(n[r.cardId]=[]),n[r.cardId].push(r)}),Object.keys(n).forEach(r=>{const o=n[r];if(o.length>0){o.sort((c,u)=>u.asOf.getTime()-c.asOf.getTime());const a=o[0];t[r]=new at(a.price,a.currency)}}),this.cardPrices=t}catch(e){this.error=e instanceof Error?e.message:"Failed to load card prices",console.error("Error loading card prices:",e)}finally{this.loadingPrices=!1}},async loadCardsAndPrices(){await Promise.all([this.loadCards(),this.loadCardPrices()])},async addCard(e){try{await xn.add(e),this.cards[e.id]=e}catch(t){throw this.error=t instanceof Error?t.message:"Failed to add card",console.error("Error adding card:",t),t}},async updateCard(e,t){try{await xn.update(e,t),this.cards[e]&&(this.cards[e]={...this.cards[e],...t})}catch(n){throw this.error=n instanceof Error?n.message:"Failed to update card",console.error("Error updating card:",n),n}},async removeCard(e){try{await xn.delete(e),delete this.cards[e],delete this.cardPrices[e]}catch(t){throw this.error=t instanceof Error?t.message:"Failed to remove card",console.error("Error removing card:",t),t}}}}),Lg=ii("holdings",{state:()=>({holdings:{},loading:!1,error:null}),getters:{getHoldingById:e=>t=>e.holdings[t],getAllHoldings:e=>Object.values(e.holdings),getHoldingsByCardId:e=>t=>Object.values(e.holdings).filter(n=>n.cardId===t),getTotalQuantityByCardId:e=>t=>Object.values(e.holdings).filter(n=>n.cardId===t).reduce((n,r)=>n+r.quantity,0)},actions:{async loadHoldings(){this.loading=!0,this.error=null;try{const e=await hs.getAll();this.holdings=e.reduce((t,n)=>(t[n.id]=n,t),{})}catch(e){this.error=e instanceof Error?e.message:"Failed to load holdings",console.error("Error loading holdings:",e)}finally{this.loading=!1}},async addHolding(e){try{await hs.add(e),this.holdings[e.id]=e}catch(t){throw this.error=t instanceof Error?t.message:"Failed to add holding",console.error("Error adding holding:",t),t}},async updateHolding(e,t){try{await hs.update(e,t),this.holdings[e]&&(this.holdings[e]={...this.holdings[e],...t})}catch(n){throw this.error=n instanceof Error?n.message:"Failed to update holding",console.error("Error updating holding:",n),n}},async removeHolding(e){try{await hs.delete(e),delete this.holdings[e]}catch(t){throw this.error=t instanceof Error?t.message:"Failed to remove holding",console.error("Error removing holding:",t),t}}}}),jg=ii("transactions",{state:()=>({transactions:{},loading:!1,error:null}),getters:{getTransactionById:e=>t=>e.transactions[t],getAllTransactions:e=>Object.values(e.transactions),getTransactionsByCardId:e=>t=>Object.values(e.transactions).filter(n=>n.cardId===t),getTransactionsByKind:e=>t=>Object.values(e.transactions).filter(n=>n.kind===t),getTotalValueByKind:e=>t=>Object.values(e.transactions).filter(n=>n.kind===t).reduce((n,r)=>{const o=r.unitPrice*r.quantity,a=r.fees||0,c=r.shipping||0;return t==="BUY"?n+o+a+c:n+o-a-c},0)},actions:{async loadTransactions(){this.loading=!0,this.error=null;try{const e=await kn.getAll();this.transactions=e.reduce((t,n)=>(t[n.id]=n,t),{})}catch(e){this.error=e instanceof Error?e.message:"Failed to load transactions",console.error("Error loading transactions:",e)}finally{this.loading=!1}},async addTransaction(e){try{await kn.add(e),this.transactions[e.id]=e}catch(t){throw this.error=t instanceof Error?t.message:"Failed to add transaction",console.error("Error adding transaction:",t),t}},async updateTransaction(e,t){try{await kn.update(e,t),this.transactions[e]&&(this.transactions[e]={...this.transactions[e],...t})}catch(n){throw this.error=n instanceof Error?n.message:"Failed to update transaction",console.error("Error updating transaction:",n),n}},async removeTransaction(e){try{await kn.delete(e),delete this.transactions[e]}catch(t){throw this.error=t instanceof Error?t.message:"Failed to remove transaction",console.error("Error removing transaction:",t),t}}}});class bo{static async calculateLotValue(t){if(t.cardId){const n=await Aa.getByCardId(t.cardId);if(n.length>0){n.sort((c,u)=>u.asOf.getTime()-c.asOf.getTime());const r=n[0],o=new at(r.price,r.currency),a=t.disposedQuantity?t.quantity-t.disposedQuantity:t.quantity;return o.multiply(a)}}return new at(0,"EUR")}static async calculateLotCostBasis(t){const n=new at(t.unitCost,t.currency||"EUR"),r=t.disposedQuantity?t.quantity-t.disposedQuantity:t.quantity;return n.multiply(r)}static async calculateRealizedPnL(){const t=await kn.getByKind("SELL");let n=new at(0,"EUR");for(const r of t){const o=new at(r.unitPrice,r.currency).multiply(r.quantity);let a=new at(0,"EUR");if(r.lotId){const h=await Ot.getById(r.lotId);h&&(a=new at(h.unitCost,h.currency||"EUR").multiply(r.quantity))}else r.cardId&&(a=await this.calculateFIFOCostForCard(r.cardId,r.quantity));const c=new at(r.fees,r.currency),u=new at(r.shipping,r.currency),d=o.subtract(a).subtract(c).subtract(u);n=n.add(d)}return n}static async calculateFIFOCostForCard(t,n){const o=(await Ot.getByCardId(t)).filter(u=>!u.disposedAt||u.disposedQuantity&&u.disposedQuantity<u.quantity).sort((u,d)=>u.purchasedAt.getTime()-d.purchasedAt.getTime());let a=n,c=new at(0,"EUR");for(const u of o){if(a<=0)break;const d=u.disposedQuantity?u.quantity-u.disposedQuantity:u.quantity,h=Math.min(a,d),g=new at(u.unitCost,u.currency||"EUR").multiply(h);c=c.add(g),a-=h}return c}static async calculatePortfolioValue(){const t=await Ot.getAll();let n=new at(0,"EUR");for(const r of t)if(!r.disposedAt||r.disposedQuantity&&r.disposedQuantity<r.quantity){const o=await this.calculateLotValue(r);n=n.add(o)}return n}static async calculateTotalCostBasis(){const t=await Ot.getAll();let n=new at(0,"EUR");for(const r of t)if(!r.disposedAt||r.disposedQuantity&&r.disposedQuantity<r.quantity){const o=await this.calculateLotCostBasis(r);n=n.add(o)}return n}static async calculateUnrealizedPnL(){const t=await this.calculatePortfolioValue(),n=await this.calculateTotalCostBasis();return t.subtract(n)}static async getActiveLots(){return(await Ot.getAll()).filter(n=>!n.disposedAt||n.disposedQuantity&&n.disposedQuantity<n.quantity)}static async getOwnedQuantity(t){const n=await Ot.getByCardId(t);let r=0;for(const o of n)o.disposedAt?o.disposedQuantity&&o.disposedQuantity<o.quantity&&(r+=o.quantity-o.disposedQuantity):r+=o.quantity;return r}}class Xt{static BASE_URL="https://api.scryfall.com";static lastRequestTime=0;static RATE_LIMIT_DELAY=100;static async enforceRateLimit(){const n=Date.now()-this.lastRequestTime;if(n<this.RATE_LIMIT_DELAY){const r=this.RATE_LIMIT_DELAY-n;await new Promise(o=>setTimeout(o,r))}this.lastRequestTime=Date.now()}static async getPriceById(t){try{await this.enforceRateLimit();const n=await fetch(`${this.BASE_URL}/cards/${t}`);if(!n.ok)return null;const o=(await n.json()).prices?.eur;return o?at.parse(o,"EUR"):null}catch(n){return console.error("Error fetching price from Scryfall:",n),null}}static async getPriceBySetAndNumber(t,n){try{await this.enforceRateLimit();const r=await fetch(`${this.BASE_URL}/cards/${t}/${n}`);if(!r.ok)return null;const a=(await r.json()).prices?.eur;return a?at.parse(a,"EUR"):null}catch(r){return console.error("Error fetching price from Scryfall:",r),null}}static async getImageUrlById(t){try{await this.enforceRateLimit();const n=await fetch(`${this.BASE_URL}/cards/${t}`);if(!n.ok)return null;const r=await n.json();return(r.layout==="transform"||r.layout==="modal_dfc"||r.layout==="reversible_card")&&r.card_faces&&r.card_faces.length===2?{front:r.card_faces[0].image_uris?.normal||r.card_faces[0].image_uris?.large||r.card_faces[0].image_uris?.small||"",back:r.card_faces[1].image_uris?.normal||r.card_faces[1].image_uris?.large||r.card_faces[1].image_uris?.small||"",layout:r.layout}:r.image_uris?{front:r.image_uris.normal||r.image_uris.large||r.image_uris.small||"",back:"",layout:r.layout||"normal"}:r.card_faces&&r.card_faces.length>0&&r.card_faces[0].image_uris?{front:r.card_faces[0].image_uris.normal||r.card_faces[0].image_uris.large||r.card_faces[0].image_uris.small||"",back:"",layout:r.layout||"normal"}:{front:r.image_uris?.normal||r.image_uris?.large||r.image_uris?.small||"",back:"",layout:r.layout||"normal"}}catch(n){return console.error("Error fetching image from Scryfall:",n),null}}static async getImageUrlBySetAndNumber(t,n){try{await this.enforceRateLimit();const r=await fetch(`${this.BASE_URL}/cards/${t}/${n}`);if(!r.ok)return null;const o=await r.json();return(o.layout==="transform"||o.layout==="modal_dfc"||o.layout==="reversible_card")&&o.card_faces&&o.card_faces.length===2?{front:o.card_faces[0].image_uris?.normal||o.card_faces[0].image_uris?.large||o.card_faces[0].image_uris?.small||"",back:o.card_faces[1].image_uris?.normal||o.card_faces[1].image_uris?.large||o.card_faces[1].image_uris?.small||"",layout:o.layout}:o.image_uris?{front:o.image_uris.normal||o.image_uris.large||o.image_uris.small||"",back:"",layout:o.layout||"normal"}:o.card_faces&&o.card_faces.length>0&&o.card_faces[0].image_uris?{front:o.card_faces[0].image_uris.normal||o.card_faces[0].image_uris.large||o.card_faces[0].image_uris.small||"",back:"",layout:o.layout||"normal"}:{front:o.image_uris?.normal||o.image_uris?.large||o.image_uris?.small||"",back:"",layout:o.layout||"normal"}}catch(r){return console.error("Error fetching image from Scryfall:",r),null}}static async getByCardmarketId(t){try{await this.enforceRateLimit();const n=await fetch(`${this.BASE_URL}/cards/cardmarket/${t}`);if(!n.ok){console.error(`Scryfall API error for cardmarket_id ${t}: ${n.status} ${n.statusText}`);try{const r=await n.text();console.error(`Scryfall API error details: ${r}`)}catch{console.error("Could not read error response body")}return null}return await n.json()}catch(n){return console.error("Error fetching card by Cardmarket ID from Scryfall:",n),null}}static async getByCardmarketIds(t){try{if(!t||t.length===0)return[];if(t.length===1){const o=await this.getByCardmarketId(t[0]);return o?[o]:[]}await this.enforceRateLimit();const n=await fetch(`${this.BASE_URL}/cards/collection`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifiers:t.map(o=>({cardmarket_id:o}))})});if(!n.ok){console.error(`Scryfall API error for batch cardmarket_ids: ${n.status} ${n.statusText}`);try{const o=await n.text();console.error(`Scryfall API error details: ${o}`)}catch{console.error("Could not read error response body")}return await this.getByCardmarketIdsIndividually(t)}return(await n.json()).data||[]}catch(n){return console.error("Error fetching cards by Cardmarket IDs from Scryfall:",n),await this.getByCardmarketIdsIndividually(t)}}static async getByCardmarketIdsIndividually(t){const n=[];for(const r of t){const o=await this.getByCardmarketId(r);o&&n.push(o)}return n}static async hydrateCard(t){try{if(t.scryfall_id){await this.enforceRateLimit();const n=await fetch(`${this.BASE_URL}/cards/${t.scryfall_id}`);if(n.ok)return await n.json()}if(t.setCode&&t.collectorNumber){await this.enforceRateLimit();const n=await fetch(`${this.BASE_URL}/cards/${t.setCode}/${t.collectorNumber}`);if(n.ok)return await n.json()}if(t.name&&t.setCode){await this.enforceRateLimit();let n=await fetch(`${this.BASE_URL}/cards/named?exact=${encodeURIComponent(t.name)}&set=${encodeURIComponent(t.setCode)}`);if(n.ok)return await n.json();if(t.version&&(await this.enforceRateLimit(),n=await fetch(`${this.BASE_URL}/cards/named?exact=${encodeURIComponent(t.name)}&set=${encodeURIComponent(t.setCode)}&include_variations=true`),n.ok))return await n.json();if(await this.enforceRateLimit(),n=await fetch(`${this.BASE_URL}/cards/named?fuzzy=${encodeURIComponent(t.name)}&set=${encodeURIComponent(t.setCode)}`),n.ok)return await n.json()}return null}catch(n){return console.error("Error hydrating card with Scryfall data:",n),null}}}class qg{static async syncPrices(){try{const t=new Date,n=await xn.getAll();for(const r of n)try{const o=await Xt.getPriceById(r.id);if(o){const a=t.toISOString().split("T")[0],u={id:`${r.id}:scryfall:${a}`,cardId:r.id,provider:"scryfall",currency:o.getCurrency(),price:o.getCents(),asOf:t,createdAt:t};await xe.price_points.put(u)}}catch(o){console.error(`Error syncing price for card ${r.id}:`,o)}}catch(t){throw console.error("Error syncing prices:",t),t}}static async syncPriceForCard(t){try{const n=new Date,r=await xn.getById(t);if(!r){console.warn(`Card with ID ${t} not found`);return}const o=await Xt.getPriceById(r.id);if(o){const a=n.toISOString().split("T")[0],u={id:`${r.id}:scryfall:${a}`,cardId:r.id,provider:"scryfall",currency:o.getCurrency(),price:o.getCents(),asOf:n,createdAt:n};await xe.price_points.put(u)}}catch(n){throw console.error(`Error syncing price for card ${t}:`,n),n}}static async needsPriceUpdate(){try{const t=await xe.price_points.orderBy("asOf").last();if(!t)return!0;const n=new Date,r=new Date(t.asOf);return(n.getTime()-r.getTime())/(1e3*60*60)>=24}catch(t){return console.error("Error checking if price update is needed:",t),!0}}static async needsPriceUpdateForCard(t){try{const n=await Aa.getByCardId(t);if(n.length===0)return!0;n.sort((u,d)=>d.asOf.getTime()-u.asOf.getTime());const r=n[0],o=new Date,a=new Date(r.asOf);return(o.getTime()-a.getTime())/(1e3*60*60)>=24}catch(n){return console.error(`Error checking if price update is needed for card ${t}:`,n),!0}}static async getLatestPriceForCard(t){try{const n=await Aa.getByCardId(t);if(n.length===0)return null;n.sort((o,a)=>a.asOf.getTime()-o.asOf.getTime());const r=n[0];return{price:r.price,asOf:r.asOf}}catch(n){return console.error(`Error getting latest price for card ${t}:`,n),null}}}class ms{static async needsPriceUpdate(){try{const t=await Zi.get("last_price_update_timestamp");if(!t)return!0;const n=Date.now(),r=new Date(t).getTime();return(n-r)/(1e3*60*60)>=24}catch(t){return console.error("Error checking if price update is needed:",t),!0}}static async schedulePriceUpdate(){try{await this.needsPriceUpdate()&&await this.updatePrices()}catch(t){throw console.error("Error scheduling price update:",t),t}}static async updatePrices(){try{await qg.syncPrices();const t=new Date().toISOString();await Zi.set("last_price_update_timestamp",t),console.log(`Prices updated successfully at ${t}`)}catch(t){throw console.error("Error updating prices:",t),t}}static async getLastUpdateTime(){try{const t=await Zi.get("last_price_update_timestamp");return t?new Date(t):null}catch(t){return console.error("Error getting last update time:",t),null}}static async getNextUpdateTime(){try{const t=await this.getLastUpdateTime();return t?new Date(t.getTime()+1440*60*1e3):new Date}catch(t){return console.error("Error calculating next update time:",t),null}}}const Nl=Ie(null),Ll=Ie(null),vr=Ie(!1);function Ug(){const e=o=>o?o.toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Never",t=async()=>{try{Nl.value=await ms.getLastUpdateTime(),Ll.value=await ms.getNextUpdateTime()}catch(o){console.error("Error updating price info:",o)}};return{lastUpdate:Nl,nextUpdate:Ll,isUpdating:vr,formatDate:e,updatePriceInfo:t,checkAndScheduleUpdate:async()=>{if(!vr.value){vr.value=!0;try{await ms.schedulePriceUpdate(),await t()}catch(o){console.error("Error scheduling price update:",o)}finally{vr.value=!1}}},forceUpdatePrices:async()=>{if(!vr.value){vr.value=!0;try{await ms.updatePrices(),await t()}catch(o){throw console.error("Error updating prices:",o),o}finally{vr.value=!1}}}}}const Kg={class:"home"},Vg={class:"price-update-info card mb-4"},Hg={class:"card-body"},Wg={class:"price-update-details"},zg={class:"update-info"},Qg={class:"value"},Yg={class:"update-info"},Gg={class:"value"},Jg={class:"update-actions"},Xg=["disabled"],Zg={class:"dashboard-stats row g-4"},ey={class:"col-lg-3 col-md-6"},ty={class:"card h-100 border"},ny={class:"card-body"},ry={class:"stat-value"},sy={class:"col-lg-3 col-md-6"},oy={class:"card h-100 border"},iy={class:"card-body"},ay={class:"stat-value"},cy={class:"col-lg-3 col-md-6"},ly={class:"card h-100 border"},uy={class:"card-body"},dy={class:"col-lg-3 col-md-6"},fy={class:"card h-100 border"},py={class:"card-body"},hy=ct({__name:"HomeView",setup(e){const t=Ga(),n=Lg(),r=jg(),{formatDate:o,checkAndScheduleUpdate:a,forceUpdatePrices:c,lastUpdate:u,nextUpdate:d,isUpdating:h}=Ug(),p=Ie("0.00"),g=Ie("0.00"),v=Ie("0.00"),k=Ie("0.00"),O=q=>q.format("de-DE"),j=async()=>{try{await t.loadCards(),await n.loadHoldings(),await r.loadTransactions();const q=await bo.calculatePortfolioValue(),V=await bo.calculateTotalCostBasis(),T=await bo.calculateUnrealizedPnL(),E=await bo.calculateRealizedPnL();p.value=O(q),g.value=O(V),v.value=O(T),k.value=O(E)}catch(q){console.error("Error loading dashboard data:",q)}},K=async()=>{try{await c(),await j(),alert("Prices refreshed successfully")}catch(q){console.error("Error refreshing prices:",q),alert("Failed to refresh prices: "+q.message)}};return In(async()=>{await a(),await j()}),(q,V)=>(U(),J("div",Kg,[V[7]||(V[7]=b("h1",null,"MTG Collection Tracker",-1)),b("div",Vg,[b("div",Hg,[V[2]||(V[2]=b("h2",{class:"card-title"},"Price Updates",-1)),b("div",Wg,[b("div",zg,[V[0]||(V[0]=b("span",{class:"label"},"Last Update:",-1)),b("span",Qg,oe(Ce(o)(Ce(u))),1)]),b("div",Yg,[V[1]||(V[1]=b("span",{class:"label"},"Next Update:",-1)),b("span",Gg,oe(Ce(o)(Ce(d))),1)])]),b("div",Jg,[b("button",{onClick:K,class:"btn btn-primary",disabled:Ce(h)},oe(Ce(h)?"Updating...":"Refresh Prices Now"),9,Xg)])])]),b("div",Zg,[b("div",ey,[b("div",ty,[b("div",ny,[V[3]||(V[3]=b("h2",{class:"card-title"},"Portfolio Value",-1)),b("p",ry,oe(p.value),1)])])]),b("div",sy,[b("div",oy,[b("div",iy,[V[4]||(V[4]=b("h2",{class:"card-title"},"Total Cost",-1)),b("p",ay,oe(g.value),1)])])]),b("div",cy,[b("div",ly,[b("div",uy,[V[5]||(V[5]=b("h2",{class:"card-title"},"Unrealized P/L",-1)),b("p",{class:It(["stat-value",parseFloat(v.value)>=0?"positive":"negative"])},oe(v.value),3)])])]),b("div",dy,[b("div",fy,[b("div",py,[V[6]||(V[6]=b("h2",{class:"card-title"},"Realized P/L",-1)),b("p",{class:It(["stat-value",parseFloat(k.value)>=0?"positive":"negative"])},oe(k.value),3)])])])])]))}}),my=pn(hy,[["__scopeId","data-v-1e962a3a"]]),Qt=e=>e.toLowerCase().normalize("NFKD").replace(new RegExp("\\p{Diacritic}","gu"),"").replace(/[\s-]+/g," ").replace(/[:'"]/g,"").trim();function Yr(e){const t=new Map;for(const n of e)t.set(Qt(n.name),n);return{byName:t}}async function jl(e){const t=e.trim(),n=Qt(t),r=await ql(),a=(await gy()).get(n);if(a)return console.log(`Set code resolved from alias: ${t} -> ${a}`),a;const c=r.byName.get(n);if(c)return console.log(`Set code resolved from exact match: ${t} -> ${c.code}`),await Jt(n,c.code),c.code;if(/^commander:\s*/i.test(t)&&/: extras$/i.test(t)){const h=t.replace(/^commander:\s*/i,"").replace(/: extras$/i,"").trim(),p=r.byName.get(Qt(`${h} Commander`));if(p)return console.log(`Set code resolved from commander + extras nested: ${t} -> ${p.code}`),await Jt(n,p.code),p.code;const g=r.byName.get(Qt(h));if(g)return console.log(`Set code resolved from commander + extras nested (base): ${t} -> ${g.code}`),await Jt(n,g.code),g.code}if(/^commander:\s*/i.test(t)){const h=t.replace(/^commander:\s*/i,"").trim(),p=r.byName.get(Qt(`${h} Commander`));if(p)return console.log(`Set code resolved from commander rewrite (commander): ${t} -> ${p.code}`),await Jt(n,p.code),p.code;const g=r.byName.get(Qt(h));if(g)return console.log(`Set code resolved from commander rewrite (base): ${t} -> ${g.code}`),await Jt(n,g.code),g.code}if(/: extras$/i.test(t)){const h=Qt(t.replace(/: extras$/i,"")),p=r.byName.get(h);if(p)return console.log(`Set code resolved from extras suffix: ${t} -> ${p.code}`),await Jt(n,p.code),p.code}if(/^universes beyond:\s*/i.test(t)){const h=t.replace(/^universes beyond:\s*/i,"").trim();if(/: extras$/i.test(h)){const g=Qt(h.replace(/: extras$/i,"")),v=r.byName.get(g);if(v)return console.log(`Set code resolved from universes beyond + extras: ${t} -> ${v.code}`),await Jt(n,v.code),v.code}const p=r.byName.get(Qt(h));if(p)return console.log(`Set code resolved from universes beyond: ${t} -> ${p.code}`),await Jt(n,p.code),p.code}if(/^magic: the gathering -\s*/i.test(t)){const h=t.replace(/^magic: the gathering -\s*/i,"").trim();if(/: extras$/i.test(h)){const g=Qt(h.replace(/: extras$/i,"")),v=r.byName.get(g);if(v)return console.log(`Set code resolved from magic: the gathering - extras: ${t} -> ${v.code}`),await Jt(n,v.code),v.code}const p=r.byName.get(Qt(h));if(p)return console.log(`Set code resolved from magic: the gathering -: ${t} -> ${p.code}`),await Jt(n,p.code),p.code}if(/^secret lair drop series:/i.test(t)){const h=t.replace(/^secret lair drop series:/i,"").trim();if(/: extras$/i.test(h)){const g=Qt(h.replace(/: extras$/i,"")),v=r.byName.get(g);if(v)return console.log(`Set code resolved from secret lair drop series + extras: ${t} -> ${v.code}`),await Jt(n,v.code),v.code}const p=r.byName.get(Qt(h));if(p)return console.log(`Set code resolved from secret lair drop series: ${t} -> ${p.code}`),await Jt(n,p.code),p.code}console.log(`Set code unresolved: ${t}`),await Id();const d=(await ql()).byName.get(n);return d?(console.log(`Set code resolved from fresh exact match: ${t} -> ${d.code}`),d.code):(await Jt(n,null),null)}async function ql(){try{const e=Date.now()-6048e5,t=await xe.settings.get("scryfall_sets_cache");return t&&t.v&&t.v.fetchedAt>e?(console.log("Using cached Scryfall sets data"),Yr(t.v.sets)):(console.log("Refreshing Scryfall sets cache (no cache or old cache)"),await Id())}catch(e){console.error("Error in getSetIndex:",e);try{const t=await xe.settings.get("scryfall_sets_cache");if(t&&t.v)return console.log("Using old cached Scryfall sets data due to error"),Yr(t.v.sets)}catch(t){console.error("Error accessing cached Scryfall sets data:",t)}return console.log("Returning empty Scryfall sets index"),Yr([])}}async function Id(){try{console.log("Fetching Scryfall sets data...");const e=await fetch("https://api.scryfall.com/sets");if(!e.ok)throw new Error(`Failed to fetch sets: ${e.status} ${e.statusText}`);const n=(await e.json()).data||[];return console.log(`Fetched ${n.length} Scryfall sets`),await xe.settings.put({k:"scryfall_sets_cache",v:{sets:n,fetchedAt:Date.now()},createdAt:new Date,updatedAt:new Date}),Yr(n)}catch(e){console.error("Error refreshing Scryfall sets cache:",e);try{const t=await xe.settings.get("scryfall_sets_cache");if(t&&t.v)return console.log("Using old cached Scryfall sets data due to fetch error"),Yr(t.v.sets)}catch(t){console.error("Error accessing cached Scryfall sets data:",t)}return console.log("Returning empty Scryfall sets index due to errors"),Yr([])}}async function gy(){const e=new Map,t=await xe.settings.get("set_code_aliases");if(t&&t.v)for(const[n,r]of Object.entries(t.v))e.set(n,r);return e}async function Jt(e,t){try{const n=Qt(e),r=await xe.settings.get("set_code_aliases");let o={};r&&r.v&&(o={...r.v}),o[n]=t,await xe.settings.put({k:"set_code_aliases",v:o,createdAt:r?.createdAt||new Date,updatedAt:new Date})}catch(n){console.error("Error storing set code alias:",n)}}const Pt=[];for(let e=0;e<256;++e)Pt.push((e+256).toString(16).slice(1));function yy(e,t=0){return(Pt[e[t+0]]+Pt[e[t+1]]+Pt[e[t+2]]+Pt[e[t+3]]+"-"+Pt[e[t+4]]+Pt[e[t+5]]+"-"+Pt[e[t+6]]+Pt[e[t+7]]+"-"+Pt[e[t+8]]+Pt[e[t+9]]+"-"+Pt[e[t+10]]+Pt[e[t+11]]+Pt[e[t+12]]+Pt[e[t+13]]+Pt[e[t+14]]+Pt[e[t+15]]).toLowerCase()}let ea;const vy=new Uint8Array(16);function by(){if(!ea){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");ea=crypto.getRandomValues.bind(crypto)}return ea(vy)}const _y=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ul={randomUUID:_y};function wy(e,t,n){e=e||{};const r=e.random??e.rng?.()??by();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,yy(r)}function Po(e,t,n){return Ul.randomUUID&&!e?Ul.randomUUID():wy(e)}class kr{static async importCardmarketTransactions(t){const n=Is(),r=Po();n.addImport({id:r,type:"cardmarket",name:"Cardmarket Transactions",status:"pending",progress:0,totalItems:t.length,processedItems:0});try{const o=new Date;for(let a=0;a<t.length;a++){const c=t[a];n.updateImport(r,{status:"processing",processedItems:a+1,progress:Math.round((a+1)/t.length*100)});const u=`cardmarket:${c.reference}:${c.lineNumber}`;if(await xe.transactions.where("externalRef").equals(u).first())continue;const h=at.parse(c.amount,"EUR"),p={id:`tx-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,kind:h.isPositive()?"SELL":"BUY",quantity:1,unitPrice:h.getCents(),fees:0,shipping:0,currency:"EUR",source:"cardmarket",externalRef:u,happenedAt:new Date(c.date),createdAt:o,updatedAt:o};await kn.add(p)}n.completeImport(r)}catch(o){throw console.error("Error importing Cardmarket transactions:",o),n.completeImport(r,o.message),o}}static async importCardmarketOrders(t){const n=Is(),r=Po();n.addImport({id:r,type:"cardmarket",name:"Cardmarket Orders",status:"pending",progress:0,totalItems:t.length,processedItems:0});try{const o=new Date;for(let a=0;a<t.length;a++){const c=t[a];n.updateImport(r,{status:"processing",processedItems:a+1,progress:Math.round((a+1)/t.length*100)});const u=`cardmarket:order:${c.orderId}:${c.lineNumber}`;if(await xe.transactions.where("externalRef").equals(u).first())continue;const h=at.parse(c.merchandiseValue,"EUR"),p=at.parse(c.shipmentCosts,"EUR"),g=at.parse(c.commission,"EUR"),v={id:`order-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,kind:c.direction==="sale"?"SELL":"BUY",quantity:parseInt(c.articleCount)||1,unitPrice:Math.round(h.getCents()/(parseInt(c.articleCount)||1)),fees:g.getCents(),shipping:p.getCents(),currency:"EUR",source:"cardmarket",externalRef:u,happenedAt:new Date(c.dateOfPurchase),createdAt:o,updatedAt:o};await kn.add(v)}n.completeImport(r)}catch(o){throw console.error("Error importing Cardmarket orders:",o),n.completeImport(r,o.message),o}}static async importCardmarketArticles(t){const n=Is(),r=Po();n.addImport({id:r,type:"cardmarket",name:"Cardmarket Articles",status:"pending",progress:0,totalItems:t.length,processedItems:0});try{const o=new Date;for(let a=0;a<t.length;a++){const c=t[a];n.updateImport(r,{status:"processing",processedItems:a+1,progress:Math.round((a+1)/t.length*100)});let u=null,d=null;if(c.productId){const K=c.productId.split(" | ").map(q=>q.trim());if(K.length===1)u=await Xt.getByCardmarketId(K[0]),console.log(JSON.stringify({product_ids:K,resolved_via:"cardmarket_id",cardmarket_id:K[0],final_uri:`/cards/cardmarket/${K[0]}`}));else if(K.length>1){const q=await Xt.getByCardmarketIds(K);q&&q.length>0&&(u=q[0],console.log(JSON.stringify({product_ids:K,resolved_via:"cardmarket_id",cardmarket_id:K[0],final_uri:"/cards/collection"})))}d=u?.id||null}const h=K=>{const q=[/-\s*(\d+[a-zA-Z]*)\s*-/i,/-\s*([IVXLCDM]+)\s*-/i,/\s+(\d+[a-zA-Z]*)\s*$/i,/\((\d+[a-zA-Z]*)\)/i];for(const V of q){const T=K.match(V);if(T)return T[1]}return""};let p=h(c.name);if(!d){const K=await jl(c.expansion);let q=c.name,V=null;const T=c.name.match(/^(.+?)\s*\((V\.\d+)\)$/i);T&&(q=T[1].trim(),V=T[2]),p=h(c.name),console.log(JSON.stringify({product_ids:c.productId?c.productId.split(" | ").map(E=>E.trim()):[],resolved_via:"set+cn",set_code:K,collector_number:p,final_uri:K?`/cards/${K}/${p}`:""})),u=await Xt.hydrateCard({name:q,setCode:K||c.expansion,collectorNumber:p,version:V}),d=u?.id||null,d||console.log(JSON.stringify({product_ids:c.productId?c.productId.split(" | ").map(E=>E.trim()):[],resolved_via:"none",set_code:null,collector_number:"",final_uri:"",name:c.name,expansion:c.expansion}))}const g=at.parse(c.price,"EUR");if(d)if(await xn.getById(d))try{const q=o.toISOString().split("T")[0],V=`${d}:scryfall:${q}`;if(!await xe.price_points.get(V)){const E=await Xt.getPriceById(d);if(E){const re={id:V,cardId:d,provider:"scryfall",currency:E.getCurrency(),price:E.getCents(),asOf:o,createdAt:o};await xe.price_points.put(re)}}}catch(q){console.error(`Error checking/updating price for existing card ${d}:`,q)}else{const q=u||await Xt.hydrateCard({scryfall_id:d,name:c.name,setCode:c.expansion,collectorNumber:""}),V=await Xt.getImageUrlById(d),T={id:d,oracleId:q?.oracle_id||u?.oracle_id||"",name:c.name,set:q?.set_name||u?.set_name||c.expansion,setCode:q?.set||u?.set||await jl(c.expansion)||"",number:q?.collector_number||u?.collector_number||p||"",lang:q?.lang||u?.lang||"en",finish:"nonfoil",layout:V?.layout||"normal",imageUrl:V?.front||"",imageUrlBack:V?.back||"",createdAt:o,updatedAt:o};await xn.add(T);try{const E=await Xt.getPriceById(d);if(E){const re=o.toISOString().split("T")[0],Ae={id:`${d}:scryfall:${re}`,cardId:d,provider:"scryfall",currency:E.getCurrency(),price:E.getCents(),asOf:o,createdAt:o};await xe.price_points.put(Ae)}}catch(E){console.error(`Error fetching price for new card ${d}:`,E)}}let v;if(c.direction==="purchase"){const K=`cardmarket:lot:${c.shipmentId}:${c.lineNumber}`,q=await Ot.getByExternalRef(K);let V=null;if(q.length>0)V=q[0];else{const T=await Ot.getByCardId(d||"");for(const E of T)if(!(await kn.getByLotId(E.id)).some(Ae=>Ae.kind==="BUY")){V=E;break}}if(V)await Ot.update(V.id,{unitCost:g.getCents(),source:"cardmarket",purchasedAt:new Date(c.dateOfPurchase),updatedAt:o}),v=V.id;else{const T=`lot-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,E={id:T,cardId:d||"",quantity:parseInt(c.amount)||1,unitCost:g.getCents(),condition:"",language:"",foil:!1,finish:"nonfoil",source:"cardmarket",currency:"EUR",externalRef:K,purchasedAt:new Date(c.dateOfPurchase),createdAt:o,updatedAt:o};await Ot.add(E),v=T}}const k=`cardmarket:article:${c.shipmentId}:${c.lineNumber}`;if(await xe.transactions.where("externalRef").equals(k).first())continue;const j={id:`article-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,kind:c.direction==="sale"?"SELL":"BUY",cardId:d||void 0,lotId:v,quantity:parseInt(c.amount)||1,unitPrice:g.getCents(),fees:0,shipping:0,currency:"EUR",source:"cardmarket",externalRef:k,happenedAt:new Date(c.dateOfPurchase),createdAt:o,updatedAt:o};await kn.add(j)}n.completeImport(r)}catch(o){throw console.error("Error importing Cardmarket articles:",o),n.completeImport(r,o.message),o}}static async getOrCreateLotForPurchase(t,n,r,o){const a=new Date,c=await Ot.getByCardId(t);for(const h of c)if(!(await kn.getByLotId(h.id)).some(v=>v.kind==="BUY"))return await Ot.update(h.id,{unitCost:r,quantity:h.quantity+n,source:"cardmarket",purchasedAt:o,updatedAt:a}),h.id;const u=`lot-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,d={id:u,cardId:t,quantity:n,unitCost:r,condition:"NM",language:"en",foil:!1,finish:"nonfoil",source:"cardmarket",currency:"EUR",purchasedAt:o,createdAt:a,updatedAt:a};return await Ot.add(d),u}static async getLotForSale(t,n){const o=(await Ot.getByCardId(t)).filter(a=>!a.disposedAt||a.disposedQuantity&&a.disposedQuantity<a.quantity).sort((a,c)=>a.purchasedAt.getTime()-c.purchasedAt.getTime());for(const a of o){const c=a.disposedQuantity?a.quantity-a.disposedQuantity:a.quantity;if(c>=n)return{lotId:a.id,remainingQuantity:c-n}}return null}static async checkForExistingImports(t){const n=[];for(const r of t){const o=`cardmarket:article:${r.shipmentId}:${r.lineNumber}`,a=await xe.transactions.where("externalRef").equals(o).first();n.push({article:r,exists:!!a})}return n}}const ky={class:"csv-import"},xy={class:"import-section"},Cy={class:"mb-3"},Ay={class:"mb-3"},Ey={class:"mb-3"},Iy={class:"import-section"},Sy={class:"mb-3"},Py=ct({__name:"CsvImportView",setup(e){const t=Ie(null),n=(u,d)=>{t.value={type:u,message:d},setTimeout(()=>{t.value=null},5e3)},r=async u=>{const d=u.target,h=d.files?.[0];if(h)try{const g=(await h.text()).split(`
`),v=g[0].split(";").map(O=>O.trim()),k=[];for(let O=1;O<g.length;O++){const j=g[O].trim();if(!j)continue;const K=j.split(";"),q={};for(let V=0;V<v.length;V++){const T=v[V].toLowerCase(),E=K[V]?K[V].trim():"";switch(T){case"reference":case"referenz":case"transaktions-id":q.reference=E;break;case"date":case"datum":case"date paid":q.date=E;break;case"category":case"kategorie":q.category=E;break;case"type":case"typ":q.type=E;break;case"counterpart":case"gegenpartei":q.counterpart=E;break;case"amount":case"betrag":q.amount=E;break;case"closing balance (eur)":case"balance after":case"saldo danach (eur)":q.balanceAfter=E;break}}q.reference&&(q.currency="EUR",k.push(q))}await kr.importCardmarketTransactions(k),n("success",`Successfully imported ${k.length} transactions`),d.value=""}catch(p){console.error("Error importing transactions:",p),n("error","Failed to import transactions: "+p.message)}},o=async u=>{const d=u.target,h=d.files?.[0];if(h)try{const g=h.name.toLowerCase().includes("purchased")?"purchase":"sale",k=(await h.text()).split(`
`),O=k[0].split(";").map(K=>K.trim()),j=[];for(let K=1;K<k.length;K++){const q=k[K].trim();if(!q)continue;const V=q.split(";"),T={};for(let E=0;E<O.length;E++){const re=O[E].toLowerCase(),le=V[E]?V[E].trim():"";switch(re){case"order id":case"orderid":case"bestellnummer":T.orderId=le;break;case"date of purchase":case"date":case"date of payment":case"kaufdatum":case"zahlungsdatum":T.dateOfPurchase=le;break;case"username":case"benutzername":T.username=le;break;case"country":case"land":T.country=le;break;case"city":case"stadt":T.city=le;break;case"article count":case"items":case"anzahl artikel":T.articleCount=le;break;case"merchandise value":case"warenwert":T.merchandiseValue=le;break;case"shipment costs":case"versandkosten":T.shipmentCosts=le;break;case"commission":case"trustee service fee":case"provision":T.commission=le;break;case"total value":case"gesamtwert":T.totalValue=le;break}}T.orderId&&(T.direction=g,T.currency="EUR",j.push(T))}await kr.importCardmarketOrders(j),n("success",`Successfully imported ${j.length} ${g} orders`),d.value=""}catch(p){console.error("Error importing orders:",p),n("error","Failed to import orders: "+p.message)}},a=async u=>{const d=u.target,h=d.files?.[0];if(h)try{const g=h.name.toLowerCase().includes("purchased")?"purchase":"sale",k=(await h.text()).split(`
`),O=k[0].split(";").map(K=>K.trim()),j=[];for(let K=1;K<k.length;K++){const q=k[K].trim();if(!q)continue;const V=q.split(";"),T={};for(let E=0;E<O.length;E++){const re=O[E].toLowerCase(),le=V[E]?V[E].trim():"";switch(re){case"shipment nr.":case"shipment nr":case"shipment id":case"order id":case"bestellnummer":T.shipmentId=le;break;case"date of purchase":case"date":T.dateOfPurchase=le;break;case"product id":case"produkt id":T.productId=le;break;case"article":case"artikel":case"localized product name":case"produktname":T.name=le;break;case"expansion":case"erweiterung":T.expansion=le;break;case"category":case"kategorie":T.category=le;break;case"amount":case"anzahl":T.amount=le;break;case"article value":case"price":case"preis":T.price=le;break;case"total":T.total=le;break;case"currency":T.currency=le;break;case"comments":T.comments=le;break}}T.shipmentId&&(T.direction=g,T.currency||(T.currency="EUR"),j.push(T))}await kr.importCardmarketArticles(j),n("success",`Successfully imported ${j.length} ${g} articles`),d.value=""}catch(p){console.error("Error importing articles:",p),n("error","Failed to import articles: "+p.message)}},c=async u=>{const d=u.target;d.files?.[0]&&(n("success","ManaBox import functionality would be implemented here"),d.value="")};return(u,d)=>(U(),J("div",ky,[d[8]||(d[8]=b("h1",null,"Import CSV Files",-1)),b("div",xy,[d[3]||(d[3]=b("h2",null,"Cardmarket Data",-1)),d[4]||(d[4]=b("p",null,"Import your Cardmarket transaction data to track your purchases and sales.",-1)),b("div",Cy,[d[0]||(d[0]=b("label",{for:"transactions-csv",class:"form-label"}," Upload Transactions CSV ",-1)),b("input",{id:"transactions-csv",type:"file",accept:".csv",onChange:r,class:"form-control"},null,32)]),b("div",Ay,[d[1]||(d[1]=b("label",{for:"orders-csv",class:"form-label"}," Upload Orders CSV ",-1)),b("input",{id:"orders-csv",type:"file",accept:".csv",onChange:o,class:"form-control"},null,32)]),b("div",Ey,[d[2]||(d[2]=b("label",{for:"articles-csv",class:"form-label"}," Upload Articles CSV ",-1)),b("input",{id:"articles-csv",type:"file",accept:".csv",onChange:a,class:"form-control"},null,32)])]),b("div",Iy,[d[6]||(d[6]=b("h2",null,"ManaBox Scans",-1)),d[7]||(d[7]=b("p",null,"Import your ManaBox scan data to track your physical collection.",-1)),b("div",Sy,[d[5]||(d[5]=b("label",{for:"manabox-csv",class:"form-label"}," Upload ManaBox CSV ",-1)),b("input",{id:"manabox-csv",type:"file",accept:".csv",onChange:c,class:"form-control"},null,32)])]),t.value?(U(),J("div",{key:0,class:It(["status-message",t.value.type])},oe(t.value.message),3)):$e("",!0)]))}}),Oy=pn(Py,[["__scopeId","data-v-a64310e9"]]);function Ry(e){return new Worker("/mtg-pwa/assets/cardmarketCsv-GHGAoa0o.js",{name:e?.name})}const Dy={class:"cardmarket-wizard"},$y={class:"wizard-progress"},Ty={class:"step-number"},Fy={class:"step-label"},My={class:"card"},By={class:"card-body"},Ny={class:"wizard-content"},Ly={key:0,class:"step-content"},jy={class:"file-upload-section"},qy={class:"mb-3"},Uy={key:0,class:"files-info"},Ky={class:"file-list"},Vy={class:"file-name"},Hy={class:"file-type"},Wy={class:"file-size"},zy={key:0,class:"error-messages"},Qy={key:1,class:"step-content"},Yy={key:0,class:"preview-stats"},Gy={class:"stat"},Jy={class:"stat-value"},Xy={class:"stat"},Zy={class:"stat-value"},ev={class:"stat"},tv={class:"stat-value"},nv={key:1,class:"preview-table-container"},rv={class:"preview-table-wrapper"},sv={class:"preview-table"},ov={key:0},iv={key:1},av={key:2},cv={key:3},lv={key:4},uv={key:5},dv={key:6},fv={key:7},pv={key:8},hv={key:9},mv={key:10},gv={key:11},yv={key:12},vv={key:13},bv={key:14},_v={key:0},wv={key:1},kv={key:2},xv={key:3},Cv={key:4},Av={key:5},Ev={key:6},Iv={key:7},Sv={key:8},Pv={key:9},Ov={key:10},Rv={key:11},Dv={key:12},$v={key:13},Tv={key:14},Fv={key:0},Mv=["colspan"],Bv={key:2,class:"invalid-rows-section"},Nv={class:"invalid-rows"},Lv={class:"row-number"},jv={class:"row-errors"},qv={key:0,class:"more-rows"},Uv={key:2,class:"step-content"},Kv={key:0,class:"conflicts-section"},Vv={class:"conflicts-list"},Hv={class:"flex-grow-1"},Wv={class:"fw-medium"},zv={class:"small text-muted"},Qv={key:1,class:"conflicts-section"},Yv={class:"conflicts-list"},Gv={class:"flex-grow-1"},Jv={class:"fw-medium"},Xv={class:"small text-muted"},Zv={key:3,class:"step-content"},eb={class:"summary-stats"},tb={class:"stat"},nb={class:"stat-value"},rb={class:"stat"},sb={class:"stat-value"},ob={key:0,class:"stat"},ib={class:"stat-value"},ab={class:"summary-details"},cb={class:"summary-grid"},lb={class:"summary-item"},ub={class:"summary-value"},db={class:"summary-item"},fb={class:"summary-value"},pb={class:"summary-item"},hb={class:"summary-value"},mb={key:0,class:"import-status error"},gb={class:"wizard-navigation pt-3"},yb=["disabled"],vb=["disabled"],bb=ct({__name:"CardmarketImportWizard",setup(e){const t=[{key:"upload",title:"Upload"},{key:"preview",title:"Preview"},{key:"conflicts",title:"Conflicts"},{key:"summary",title:"Summary"}],n=Ie(0),r=Ie([]),o=Ie({}),a=Ie({}),c=Ie({}),u=Ie(!1),d=Ie(null),h=Ie({}),p=Ie([]),g=G=>{if(G===0)return"0 Bytes";const W=1024,L=["Bytes","KB","MB","GB"],Re=Math.floor(Math.log(G)/Math.log(W));return parseFloat((G/Math.pow(W,Re)).toFixed(2))+" "+L[Re]},v=G=>new Intl.NumberFormat("en-EU",{style:"currency",currency:"EUR"}).format(G/100),k=async G=>{const L=G.target.files;if(!(!L||L.length===0)){p.value=[],r.value=Array.from(L);try{for(const Re of r.value){if(!Re.name.endsWith(".csv")){p.value.push(`File ${Re.name} is not a CSV file.`);continue}const _e=await Re.text();o.value[Re.name]=_e,a.value[Re.name]=st(Re.name)}await O()}catch(Re){p.value.push("Failed to read the files: "+Re.message)}}},O=async()=>{try{c.value={};for(const[G,W]of Object.entries(o.value)){const L=a.value[G];if(L==="unknown"){console.warn(`Skipping unknown file type: ${G}`);continue}const Re=new Ry;let _e="",Qe="sale";switch(L){case"transactions":_e="parseTransactions";break;case"sold-orders":_e="parseOrders",Qe="sale";break;case"purchased-orders":_e="parseOrders",Qe="purchase";break;case"sold-articles":_e="parseArticles",Qe="sale";break;case"purchased-articles":_e="parseArticles",Qe="purchase";break}Re.postMessage({type:_e,data:W,direction:Qe});const zt=await new Promise((jt,mt)=>{Re.onmessage=Z=>{const{type:we,result:Q,error:Ee}=Z.data;console.log("Worker response type:",we),Ee?mt(new Error(Ee)):jt(Q)},Re.onerror=Z=>{mt(Z)}});c.value[L]=zt,Re.terminate()}await He()}catch(G){p.value.push("Failed to parse CSV data: "+G.message)}},j=et(()=>n.value===0?r.value.length>0&&p.value.length===0:!0),K=async()=>{j.value&&(n.value===0&&await O(),n.value<t.length-1&&n.value++)},q=()=>{n.value>0&&n.value--},V=async()=>{if(!u.value){u.value=!0,d.value=null;try{for(const[G,W]of Object.entries(c.value)){if(!W||W.length===0)continue;const L=Se(W,G);switch(G){case"transactions":await kr.importCardmarketTransactions(L);break;case"sold-orders":case"purchased-orders":await kr.importCardmarketOrders(L);break;case"sold-articles":case"purchased-articles":await kr.importCardmarketArticles(L);break}}d.value="Import completed successfully! Check the status indicator in the top right for details.",setTimeout(()=>{n.value=0,r.value=[],o.value={},a.value={},c.value={},p.value=[],u.value=!1,d.value=null},3e3)}catch(G){d.value="Failed to import data: "+G.message,u.value=!1}}},T=G=>Se(c.value[G]||[],G),E=G=>Se(c.value[G]||[],G).filter(L=>Be(G,L)),re=()=>Object.values(c.value).reduce((G,W)=>G+(W?.length||0),0),le=()=>{let G=0;for(const[W,L]of Object.entries(c.value))L&&(G+=Se(L,W).length);return G},Ae=G=>{if(/^\d{2}\.\d{2}\.\d{4} \d{2}:\d{2}:\d{2}$/.test(G)){const Re=G.split(" ")[0].split("."),_e=parseInt(Re[0],10),Qe=parseInt(Re[1],10)-1,zt=parseInt(Re[2],10),jt=new Date(zt,Qe,_e);return jt.getFullYear()===zt&&jt.getMonth()===Qe&&jt.getDate()===_e}if(/^\d{2}\.\d{2}\.\d{4}$/.test(G)){const W=G.split("."),L=parseInt(W[0],10),Re=parseInt(W[1],10)-1,_e=parseInt(W[2],10),Qe=new Date(_e,Re,L);return Qe.getFullYear()===_e&&Qe.getMonth()===Re&&Qe.getDate()===L}if(/^\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}$/.test(G)){const W=new Date(G);return!isNaN(W.getTime())}if(/^\d{4}-\d{2}-\d{2}$/.test(G)){const W=new Date(G);return!isNaN(W.getTime())}return!1},Pe=G=>{const W=G.replace(/[$\s]/g,"").replace(",",".");return!isNaN(parseFloat(W))},se=G=>{const W=parseInt(G,10);return!isNaN(W)&&W>0};function Oe(G){switch(G){case"transactions":return"Transaction Summary";case"sold-orders":return"Sold Orders";case"purchased-orders":return"Purchased Orders";case"sold-articles":return"Sold Articles";case"purchased-articles":return"Purchased Articles";default:return"Unknown File Type"}}const Ue=G=>{switch(G){case"transactions":return 5;case"sold-orders":case"purchased-orders":return 6;case"sold-articles":case"purchased-articles":return 8;default:return 5}},fe=(G,W)=>{const L=[];if(!G.date&&!G.dateOfPurchase)L.push("Date is required");else{const Re=G.date||G.dateOfPurchase;Ae(Re)||L.push("Invalid date format (expected DD.MM.YYYY or YYYY-MM-DD)")}return W.includes("articles")?(G.name||L.push("Card name is required"),G.expansion||L.push("Expansion/Set is required"),G.price?Pe(G.price)||L.push("Invalid price format (expected numeric value)"):L.push("Price is required"),G.amount?se(G.amount)||L.push("Invalid quantity (expected positive integer)"):L.push("Quantity is required"),G.shipmentId||L.push("Order ID is required")):W.includes("orders")?(G.dateOfPurchase?Ae(G.dateOfPurchase)||L.push("Invalid date format (expected DD.MM.YYYY or YYYY-MM-DD)"):L.push("Date is required"),G.orderId||L.push("Order ID is required"),G.articleCount?se(G.articleCount)||L.push("Invalid article count (expected positive integer)"):L.push("Article count is required"),G.merchandiseValue?Pe(G.merchandiseValue)||L.push("Invalid merchandise value format (expected numeric value)"):L.push("Merchandise value is required")):W==="transactions"&&(G.reference||L.push("Reference is required"),G.amount?Pe(G.amount)||L.push("Invalid amount format (expected numeric value)"):L.push("Amount is required"),G.category||L.push("Category is required"),G.type||L.push("Type is required")),L},Se=(G,W="articles")=>G.filter(L=>fe(L,W).length===0),qe=(G,W="articles")=>G.map((L,Re)=>({index:Re,row:L,errors:fe(L,W)})).filter(L=>L.errors.length>0),st=G=>{const W=G.toLowerCase();return W.includes("transaction")?"transactions":W.includes("sold orders")?"sold-orders":W.includes("purchased orders")?"purchased-orders":W.includes("sold articles")?"sold-articles":W.includes("purchased articles")?"purchased-articles":"unknown"},He=async()=>{try{h.value={};for(const[G,W]of Object.entries(c.value))if(!(!W||W.length===0)&&G.includes("articles")){const L=await kr.checkForExistingImports(W);for(const Re of L){const _e=`${G}:${Re.article.shipmentId}:${Re.article.lineNumber}`;h.value[_e]=Re.exists}}}catch(G){console.error("Error checking for existing imports:",G)}},Be=(G,W)=>{const L=`${G}:${W.shipmentId}:${W.lineNumber}`;return!!h.value[L]};return(G,W)=>(U(),J("div",Dy,[W[30]||(W[30]=b("h1",null,"Cardmarket Import Wizard",-1)),b("div",$y,[(U(),J(Je,null,Bt(t,(L,Re)=>b("div",{key:L.key,class:It(["step",{active:n.value===Re,completed:Re<n.value}])},[b("div",Ty,oe(Re+1),1),b("div",Fy,oe(L.title),1)],2)),64))]),b("div",My,[b("div",By,[b("div",Ny,[n.value===0?(U(),J("div",Ly,[W[2]||(W[2]=b("h2",null,"Upload CSV Files",-1)),W[3]||(W[3]=b("p",null,"Please select all Cardmarket CSV export files to import. You can select multiple files at once.",-1)),b("div",jy,[b("div",qy,[W[0]||(W[0]=b("label",{for:"csv-files",class:"form-label"}," Choose CSV Files ",-1)),b("input",{id:"csv-files",type:"file",accept:".csv",multiple:"",onChange:k,class:"form-control"},null,32)]),r.value.length>0?(U(),J("div",Uy,[W[1]||(W[1]=b("h3",null,"Uploaded Files",-1)),b("ul",Ky,[(U(!0),J(Je,null,Bt(r.value,L=>(U(),J("li",{key:L.name,class:"file-item"},[b("span",Vy,oe(L.name),1),b("span",Hy,"("+oe(st(L.name))+")",1),b("span",Wy,"- "+oe(g(L.size)),1)]))),128))])])):$e("",!0)]),p.value.length>0?(U(),J("div",zy,[(U(!0),J(Je,null,Bt(p.value,L=>(U(),J("div",{key:L,class:"error-message"},oe(L),1))),128))])):$e("",!0)])):n.value===1?(U(),J("div",Qy,[W[11]||(W[11]=b("h2",null,"Preview Data",-1)),W[12]||(W[12]=b("p",null,"Review the data that will be imported. Check for any issues before proceeding.",-1)),(U(!0),J(Je,null,Bt(a.value,(L,Re)=>(U(),J("div",{key:Re,class:"file-preview"},[b("h3",null,oe(Oe(L)),1),c.value[L]&&c.value[L].length>0?(U(),J("div",Yy,[b("div",Gy,[b("div",Jy,oe(c.value[L].length),1),W[4]||(W[4]=b("div",{class:"stat-label"},"Total Rows",-1))]),b("div",Xy,[b("div",Zy,oe(Se(c.value[L],L).length),1),W[5]||(W[5]=b("div",{class:"stat-label"},"Valid Rows",-1))]),b("div",ev,[b("div",tv,oe(qe(c.value[L],L).length),1),W[6]||(W[6]=b("div",{class:"stat-label"},"Invalid Rows",-1))])])):$e("",!0),c.value[L]&&c.value[L].length>0?(U(),J("div",nv,[W[8]||(W[8]=b("h4",null,"Valid Data Preview",-1)),b("div",rv,[b("table",sv,[b("thead",null,[b("tr",null,[L==="transactions"?(U(),J("th",ov,"Reference")):(U(),J("th",iv,"Line")),W[7]||(W[7]=b("th",null,"Date",-1)),L.includes("articles")?(U(),J("th",av,"Card Name")):$e("",!0),L.includes("articles")?(U(),J("th",cv,"Expansion")):$e("",!0),L.includes("articles")?(U(),J("th",lv,"Price")):$e("",!0),L.includes("articles")?(U(),J("th",uv,"Quantity")):$e("",!0),L.includes("articles")?(U(),J("th",dv,"Order ID")):$e("",!0),L.includes("articles")?(U(),J("th",fv,"Status")):$e("",!0),L.includes("orders")?(U(),J("th",pv,"Order ID")):$e("",!0),L.includes("orders")?(U(),J("th",hv,"Username")):$e("",!0),L.includes("orders")?(U(),J("th",mv,"Article Count")):$e("",!0),L.includes("orders")?(U(),J("th",gv,"Merchandise Value")):$e("",!0),L==="transactions"?(U(),J("th",yv,"Category")):$e("",!0),L==="transactions"?(U(),J("th",vv,"Type")):$e("",!0),L==="transactions"?(U(),J("th",bv,"Amount")):$e("",!0)])]),b("tbody",null,[(U(!0),J(Je,null,Bt(Se(c.value[L],L).slice(0,5),(_e,Qe)=>(U(),J("tr",{key:Qe},[L==="transactions"?(U(),J("td",_v,oe(_e.reference),1)):(U(),J("td",wv,oe(_e.lineNumber),1)),b("td",null,oe(_e.date||_e.dateOfPurchase),1),L.includes("articles")?(U(),J("td",kv,oe(_e.name),1)):$e("",!0),L.includes("articles")?(U(),J("td",xv,oe(_e.expansion),1)):$e("",!0),L.includes("articles")?(U(),J("td",Cv,oe(v(parseFloat(_e.price.replace(/[$\s]/g,"").replace(",","."))*100)),1)):$e("",!0),L.includes("articles")?(U(),J("td",Av,oe(_e.amount),1)):$e("",!0),L.includes("articles")?(U(),J("td",Ev,oe(_e.shipmentId),1)):$e("",!0),L.includes("articles")?(U(),J("td",Iv,[b("span",{class:It(Be(L,_e)?"text-success":"text-primary")},oe(Be(L,_e)?"Already Imported":"New"),3)])):$e("",!0),L.includes("orders")?(U(),J("td",Sv,oe(_e.orderId),1)):$e("",!0),L.includes("orders")?(U(),J("td",Pv,oe(_e.username),1)):$e("",!0),L.includes("orders")?(U(),J("td",Ov,oe(_e.articleCount),1)):$e("",!0),L.includes("orders")?(U(),J("td",Rv,oe(v(parseFloat(_e.merchandiseValue.replace(/[$\s]/g,"").replace(",","."))*100)),1)):$e("",!0),L==="transactions"?(U(),J("td",Dv,oe(_e.category),1)):$e("",!0),L==="transactions"?(U(),J("td",$v,oe(_e.type),1)):$e("",!0),L==="transactions"?(U(),J("td",Tv,oe(v(parseFloat(_e.amount.replace(/[$\s]/g,"").replace(",","."))*100)),1)):$e("",!0)]))),128)),Se(c.value[L],L).length>5?(U(),J("tr",Fv,[b("td",{colspan:Ue(L),class:"more-rows-cell"}," ... and "+oe(Se(c.value[L],L).length-5)+" more rows ",9,Mv)])):$e("",!0)])])])])):$e("",!0),qe(c.value[L],L).length>0?(U(),J("div",Bv,[W[9]||(W[9]=b("h4",null,"Invalid Rows",-1)),W[10]||(W[10]=b("p",null,"The following rows have issues and will be skipped:",-1)),b("div",Nv,[(U(!0),J(Je,null,Bt(qe(c.value[L],L).slice(0,3),(_e,Qe)=>(U(),J("div",{key:Qe,class:"invalid-row"},[b("div",Lv,"Row "+oe(_e.row.lineNumber||_e.row.reference),1),b("div",jv,oe(_e.errors.join(", ")),1)]))),128)),qe(c.value[L],L).length>3?(U(),J("div",qv," ... and "+oe(qe(c.value[L],L).length-3)+" more rows ",1)):$e("",!0)])])):$e("",!0)]))),128))])):n.value===2?(U(),J("div",Uv,[W[19]||(W[19]=b("h2",null,"Resolve Conflicts",-1)),W[20]||(W[20]=b("p",null,"Check for duplicate imports and resolve any conflicts.",-1)),(U(!0),J(Je,null,Bt(a.value,(L,Re)=>(U(),J("div",{key:Re,class:"file-conflicts"},[b("h3",null,oe(Oe(L)),1),L.includes("articles")&&E(L).length>0?(U(),J("div",Kv,[W[14]||(W[14]=b("h4",null,"Already Imported Articles",-1)),W[15]||(W[15]=b("p",null,"The following articles have already been imported and will be skipped:",-1)),b("div",Vv,[(U(!0),J(Je,null,Bt(E(L),(_e,Qe)=>(U(),J("div",{key:Qe,class:"d-flex justify-content-between align-items-center p-2 bg-light rounded"},[b("div",Hv,[b("div",Wv,oe(_e.name),1),b("div",zv,oe(_e.expansion)+"  "+oe(_e.amount)+"  "+oe(v(parseFloat(_e.price.replace(/[$\s]/g,"").replace(",","."))*100))+"  Order #"+oe(_e.shipmentId),1)]),W[13]||(W[13]=b("div",{class:"ms-3"},[b("span",{class:"text-success fw-medium"},"Already Imported")],-1))]))),128))])])):$e("",!0),L.includes("articles")&&T(L).length>0?(U(),J("div",Qv,[W[17]||(W[17]=b("h4",null,"New Articles to Import",-1)),W[18]||(W[18]=b("p",null,"The following articles will be imported:",-1)),b("div",Yv,[(U(!0),J(Je,null,Bt(T(L).filter(_e=>!Be(L,_e)),(_e,Qe)=>(U(),J("div",{key:Qe,class:"d-flex justify-content-between align-items-center p-2 bg-light rounded"},[b("div",Gv,[b("div",Jv,oe(_e.name),1),b("div",Xv,oe(_e.expansion)+"  "+oe(_e.amount)+"  "+oe(v(parseFloat(_e.price.replace(/[$\s]/g,"").replace(",","."))*100))+"  Order #"+oe(_e.shipmentId),1)]),W[16]||(W[16]=b("div",{class:"ms-3"},[b("span",{class:"text-primary fw-medium"},"New")],-1))]))),128))])])):$e("",!0)]))),128))])):n.value===3?(U(),J("div",Zv,[W[28]||(W[28]=b("h2",null,"Import Summary",-1)),W[29]||(W[29]=b("p",null,"Review the import summary before finalizing.",-1)),(U(!0),J(Je,null,Bt(a.value,(L,Re)=>(U(),J("div",{key:Re,class:"file-summary"},[b("h3",null,oe(Oe(L)),1),b("div",eb,[b("div",tb,[b("div",nb,oe(T(L).length),1),W[21]||(W[21]=b("div",{class:"stat-label"},"New Records",-1))]),b("div",rb,[b("div",sb,oe(qe(c.value[L]||[],L).length),1),W[22]||(W[22]=b("div",{class:"stat-label"},"Invalid Rows",-1))]),L.includes("articles")?(U(),J("div",ob,[b("div",ib,oe(E(L).length),1),W[23]||(W[23]=b("div",{class:"stat-label"},"Already Imported",-1))])):$e("",!0)])]))),128)),b("div",ab,[W[27]||(W[27]=b("h3",null,"Import Details",-1)),b("div",cb,[b("div",lb,[W[24]||(W[24]=b("div",{class:"summary-label"},"Files Uploaded",-1)),b("div",ub,oe(r.value.length),1)]),b("div",db,[W[25]||(W[25]=b("div",{class:"summary-label"},"Total Rows Parsed",-1)),b("div",fb,oe(re()),1)]),b("div",pb,[W[26]||(W[26]=b("div",{class:"summary-label"},"Total Valid Rows",-1)),b("div",hb,oe(le()),1)])])]),d.value?(U(),J("div",mb,oe(d.value),1)):$e("",!0)])):$e("",!0)])])]),b("div",gb,[n.value>0?(U(),J("button",{key:0,onClick:q,class:"btn btn-secondary"}," Previous ")):$e("",!0),n.value<t.length-1?(U(),J("button",{key:1,onClick:K,class:"btn btn-primary",disabled:!j.value}," Next ",8,yb)):$e("",!0),n.value===t.length-1?(U(),J("button",{key:2,onClick:V,class:"btn btn-primary",disabled:u.value},oe(u.value?"Importing...":"Import Data"),9,vb)):$e("",!0)])]))}}),_b=pn(bb,[["__scopeId","data-v-5dd0d645"]]);class wb{static normalizeFingerprint(t){return{name:t.name.trim().toLowerCase(),setCode:t.setCode.trim().toLowerCase(),collectorNumber:t.collectorNumber.trim().toLowerCase(),finish:t.finish.trim().toLowerCase(),language:t.language.trim().toLowerCase()}}static compareFingerprints(t,n){const r=this.normalizeFingerprint(t),o=this.normalizeFingerprint(n);return r.name===o.name&&r.setCode===o.setCode&&r.collectorNumber===o.collectorNumber&&r.finish===o.finish&&r.language===o.language}static async resolveFingerprint(t){try{const n=await Xt.hydrateCard({name:t.name,setCode:t.setCode,collectorNumber:t.collectorNumber});return n&&n.id?n.id:null}catch(n){return console.error("Error resolving fingerprint:",n),null}}}class kb{static async importDeckFromText(t,n){let r,o;try{r=Is();const a=n.split(`
`).map(c=>c.trim()).filter(c=>c);o=Po(),r.addImport({id:o,type:"deck",name:t,status:"pending",progress:0,totalItems:a.length,processedItems:0})}catch(a){console.warn("Could not initialize import status store:",a),r=null,o=null}try{const a=new Date,c=`deck-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,u={id:c,platform:"csv",name:t,commander:"",url:"",importedAt:a,createdAt:a,updatedAt:a};await xe.decks.add(u);const d=n.split(`
`).map(p=>p.trim()).filter(p=>p);if(console.log("Processing deck import:",{deckName:t,lineCount:d.length}),r&&o)try{r.updateImport(o,{status:"processing"})}catch(p){console.warn("Could not update import status:",p)}for(let p=0;p<d.length;p++){const v=d[p].trim();if(!v)continue;if(console.log("Processing line:",v),r&&o)try{r.updateImport(o,{processedItems:p+1,progress:Math.round((p+1)/d.length*100)})}catch(O){console.warn("Could not update import progress:",O)}const k=v.match(/^(\d+)\s+(.+?)\s*\(([^)]+)\)\s*(\d+)(?:\s*\*F\*\s*)?$/i);if(k){const[,O,j,K,q]=k,V=parseInt(O)||1;if(console.log("Parsed card:",{quantity:V,cardName:j,setCode:K,collectorNumber:q}),j&&K&&q){const T={name:j.trim(),setCode:K.trim(),collectorNumber:q.trim(),finish:"nonfoil",language:"en"},E=await wb.resolveFingerprint(T);if(console.log("Resolved card ID:",E),E){const se=new Date;if(!await xn.getById(E)){const Se=await Xt.hydrateCard({scryfall_id:E,name:j.trim(),setCode:K.trim(),collectorNumber:q.trim()}),qe=await Xt.getImageUrlById(E),st={id:E,oracleId:Se?.oracle_id||"",name:j.trim(),set:Se?.set_name||K.trim(),setCode:Se?.set||K.trim(),number:Se?.collector_number||q.trim(),lang:Se?.lang||"en",finish:"nonfoil",layout:qe?.layout||"normal",imageUrl:qe?.front||"",imageUrlBack:qe?.back||"",createdAt:se,updatedAt:se};await xn.add(st),console.log("Added new card to database:",st);try{const He=await Xt.getPriceById(E);if(He){const Be=se.toISOString().split("T")[0],W={id:`${E}:scryfall:${Be}`,cardId:E,provider:"scryfall",currency:He.getCurrency(),price:He.getCents(),asOf:se,createdAt:se};await xe.price_points.put(W)}}catch(He){console.error(`Error fetching price for new card ${E}:`,He)}}const fe=(await Ot.getByCardId(E)).reduce((Se,qe)=>{if(!qe.disposedAt||qe.disposedQuantity&&qe.disposedQuantity<qe.quantity){const st=qe.disposedQuantity?qe.quantity-qe.disposedQuantity:qe.quantity;return Se+st}return Se},0);if(fe<V){const Se=V-fe,st={id:`lot-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,cardId:E,quantity:Se,unitCost:0,condition:"unknown",language:"en",foil:!1,finish:"nonfoil",source:"deck_import",currency:"EUR",purchasedAt:se,createdAt:se,updatedAt:se};await Ot.add(st),console.log("Added new lot for deck import:",st)}}let re;const le=await Ot.getByCardId(E||"");if(le.length>0){for(const se of le)if((se.disposedQuantity?se.quantity-se.disposedQuantity:se.quantity)>=V&&!se.disposedAt){re=se.id;break}!re&&le.length>0&&(re=le[0].id)}const Ae=new Date,Pe={id:`deckcard-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,deckId:c||"unknown-deck",cardId:E||"unknown-card",lotId:re,quantity:typeof V=="number"&&V>0?V:1,role:"main",addedAt:Ae,createdAt:Ae};await xe.deck_cards.add(Pe),console.log("Added deck card:",Pe)}}else console.log("Line did not match expected format:",v)}const h=await xe.deck_cards.where("deckId").equals(c).count();if(console.log("Total cards imported:",h),r&&o)try{r.completeImport(o)}catch(p){console.warn("Could not complete import status:",p)}}catch(a){if(console.error("Error importing deck from text:",a),r&&o)try{r.completeImport(o,a.message)}catch(c){console.warn("Could not update import status to failed:",c)}throw a}}static async calculateDeckCoverage(t){try{const n=await xe.deck_cards.where("deckId").equals(t).toArray();let r=0,o=0;for(const c of n){r+=c.quantity;const d=(await hs.getByCardId(c.cardId)).reduce((h,p)=>h+p.quantity,0);o+=Math.min(c.quantity,d)}const a=r>0?Math.round(o/r*100):100;return{totalCards:r,ownedCards:o,coveragePercentage:a}}catch(n){throw console.error("Error calculating deck coverage:",n),n}}}const xb={class:"deck-import"},Cb={class:"import-section"},Ab={class:"mb-3"},Eb={class:"mb-3"},Ib=["disabled"],Sb={key:0,class:"status-message error"},Pb=ct({__name:"DeckImportView",setup(e){const t=Ie(""),n=Ie(""),r=Ie(!1),o=Ie(null),a=async()=>{if(!t.value.trim()){o.value="Please enter a deck name";return}if(!n.value.trim()){o.value="Please paste your decklist";return}r.value=!0,o.value=null;try{await kb.importDeckFromText(t.value.trim(),n.value.trim()),o.value="Deck import started successfully! Check the status indicator in the top right for progress.",setTimeout(()=>{t.value="",n.value="",r.value=!1,o.value=null},3e3)}catch(c){o.value="Failed to import deck: "+c.message,r.value=!1}};return(c,u)=>(U(),J("div",xb,[u[7]||(u[7]=b("h1",null,"Import Deck",-1)),b("div",Cb,[u[4]||(u[4]=b("h2",null,"Moxfield Deck Import",-1)),u[5]||(u[5]=b("p",null,"Copy and paste your decklist from Moxfield to track which cards you own and which you're missing.",-1)),b("div",Ab,[u[2]||(u[2]=b("label",{for:"deck-name",class:"form-label"},"Deck Name",-1)),Rs(b("input",{id:"deck-name","onUpdate:modelValue":u[0]||(u[0]=d=>t.value=d),type:"text",placeholder:"Enter a name for your deck",class:"form-control"},null,512),[[va,t.value]])]),b("div",Eb,[u[3]||(u[3]=b("label",{for:"decklist",class:"form-label"},"Decklist",-1)),Rs(b("textarea",{id:"decklist","onUpdate:modelValue":u[1]||(u[1]=d=>n.value=d),placeholder:`Paste your decklist here (e.g., 4 Lightning Bolt
2 Counterspell)`,rows:"10",class:"form-control"},null,512),[[va,n.value]])]),b("button",{onClick:a,disabled:r.value,class:"btn btn-primary mb-4"},oe(r.value?"Importing...":"Import Deck"),9,Ib),o.value?(U(),J("div",Sb,oe(o.value),1)):$e("",!0),u[6]||(u[6]=b("div",{class:"instructions"},[b("h3",null,"How to copy from Moxfield:"),b("ol",null,[b("li",null,"Open your deck on Moxfield.com"),b("li",null,'Click the "Export" button'),b("li",null,'Select "Text" format'),b("li",null,"Copy the text and paste it here")])],-1))])]))}}),Ob=pn(Pb,[["__scopeId","data-v-dde8fd34"]]),Rb={class:"decks-view"},Db={class:"header"},$b={key:0,class:"loading"},Tb={key:1,class:"empty-state"},Fb={key:2,class:"row g-4"},Mb=["onClick"],Bb={class:"deck-info"},Nb={class:"platform"},Lb={class:"date"},jb={class:"card-count"},qb=ct({__name:"DecksView",setup(e){const t=Qm(),n=Ie([]),r=Ie(!0),o=Ie({}),a=h=>new Date(h).toLocaleDateString(),c=h=>o.value[h]||0,u=h=>{t.push(`/decks/${h}`)},d=async()=>{try{const h=await xe.decks.toArray();n.value=h;for(const p of h){const g=await xe.deck_cards.where("deckId").equals(p.id).count();o.value[p.id]=g}}catch(h){console.error("Error loading decks:",h)}finally{r.value=!1}};return In(()=>{d()}),(h,p)=>{const g=Zo("router-link");return U(),J("div",Rb,[b("div",Db,[p[1]||(p[1]=b("h1",null,"Decks",-1)),We(g,{to:"/import/deck",class:"btn btn-primary"},{default:rt(()=>[...p[0]||(p[0]=[Wt(" Import Deck ",-1)])]),_:1})]),r.value?(U(),J("div",$b," Loading decks... ")):n.value.length===0?(U(),J("div",Tb,[p[3]||(p[3]=b("p",null,"You haven't imported any decks yet.",-1)),We(g,{to:"/import/deck",class:"btn btn-primary"},{default:rt(()=>[...p[2]||(p[2]=[Wt(" Import Your First Deck ",-1)])]),_:1})])):(U(),J("div",Fb,[(U(!0),J(Je,null,Bt(n.value,v=>(U(),J("div",{key:v.id,class:"col-lg-4 col-md-6"},[b("div",{class:"deck-card h-100",onClick:k=>u(v.id)},[b("h2",null,oe(v.name),1),b("p",Bb,[b("span",Nb,oe(v.platform),1),b("span",Lb,oe(a(v.importedAt)),1)]),b("p",jb,oe(c(v.id))+" cards",1)],8,Mb)]))),128))]))])}}}),Ub=pn(qb,[["__scopeId","data-v-a321a24f"]]);function Sd(e,t){const n=typeof e=="string"&&!t?`${e}Context`:t,r=Symbol(n);return[c=>{const u=en(r,c);if(u||u===null)return u;throw new Error(`Injection \`${r.toString()}\` not found. Component must be used within ${Array.isArray(e)?`one of the following components: ${e.join(", ")}`:`\`${e}\``}`)},c=>(ks(r,c),c)]}function or(){let e=document.activeElement;if(e==null)return null;for(;e!=null&&e.shadowRoot!=null&&e.shadowRoot.activeElement!=null;)e=e.shadowRoot.activeElement;return e}function Pd(e,t,n){const r=n.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&r.addEventListener(e,t,{once:!0}),r.dispatchEvent(o)}function Ja(e){return e?e.flatMap(t=>t.type===Je?Ja(t.children):[t]):[]}const[Kb,jw]=Sd("ConfigProvider");function Od(e){return Ra()?(su(e),!0):!1}function Vb(e){let t=!1,n;const r=Yo(!0);return(...o)=>(t||(n=r.run(()=>e(...o)),t=!0),n)}function Hb(e){let t=0,n,r;const o=()=>{t-=1,r&&t<=0&&(r.stop(),n=void 0,r=void 0)};return(...a)=>(t+=1,r||(r=Yo(!0),n=r.run(()=>e(...a))),Od(o),n)}const Ir=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Wb=e=>typeof e<"u",zb=Object.prototype.toString,Qb=e=>zb.call(e)==="[object Object]",Kl=Yb();function Yb(){var e,t;return Ir&&((e=window?.navigator)==null?void 0:e.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((t=window?.navigator)==null?void 0:t.maxTouchPoints)>2&&/iPad|Macintosh/.test(window?.navigator.userAgent))}function Gb(e){return Sn()}function ta(e){return Array.isArray(e)?e:[e]}function Jb(e,t){Gb()&&Ua(e,t)}function Xb(e,t,n){return tn(e,t,{...n,immediate:!0})}const Xa=Ir?window:void 0;function ai(e){var t;const n=An(e);return(t=n?.$el)!=null?t:n}function Rd(...e){const t=[],n=()=>{t.forEach(u=>u()),t.length=0},r=(u,d,h,p)=>(u.addEventListener(d,h,p),()=>u.removeEventListener(d,h,p)),o=et(()=>{const u=ta(An(e[0])).filter(d=>d!=null);return u.every(d=>typeof d!="string")?u:void 0}),a=Xb(()=>{var u,d;return[(d=(u=o.value)==null?void 0:u.map(h=>ai(h)))!=null?d:[Xa].filter(h=>h!=null),ta(An(o.value?e[1]:e[0])),ta(Ce(o.value?e[2]:e[1])),An(o.value?e[3]:e[2])]},([u,d,h,p])=>{if(n(),!u?.length||!d?.length||!h?.length)return;const g=Qb(p)?{...p}:p;t.push(...u.flatMap(v=>d.flatMap(k=>h.map(O=>r(v,k,O,g)))))},{flush:"post"}),c=()=>{a(),n()};return Od(n),c}function Zb(){const e=wu(!1),t=Sn();return t&&In(()=>{e.value=!0},t),e}function e_(e){return typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0}function t_(...e){let t,n,r={};e.length===3?(t=e[0],n=e[1],r=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,n=e[0],r=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:o=Xa,eventName:a="keydown",passive:c=!1,dedupe:u=!1}=r,d=e_(t);return Rd(o,a,p=>{p.repeat&&An(u)||d(p)&&n(p)},c)}function n_(e){return JSON.parse(JSON.stringify(e))}function r_(e,t,n,r={}){var o,a,c;const{clone:u=!1,passive:d=!1,eventName:h,deep:p=!1,defaultValue:g,shouldEmit:v}=r,k=Sn(),O=n||k?.emit||((o=k?.$emit)==null?void 0:o.bind(k))||((c=(a=k?.proxy)==null?void 0:a.$emit)==null?void 0:c.bind(k?.proxy));let j=h;j=j||`update:${t.toString()}`;const K=T=>u?typeof u=="function"?u(T):n_(T):T,q=()=>Wb(e[t])?K(e[t]):g,V=T=>{v?v(T)&&O(j,T):O(j,T)};if(d){const T=q(),E=Ie(T);let re=!1;return tn(()=>e[t],le=>{re||(re=!0,E.value=K(le),un(()=>re=!1))}),tn(E,le=>{!re&&(le!==e[t]||p)&&V(le)},{deep:p}),E}else return et({get(){return q()},set(T){V(T)}})}function na(e){if(e===null||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);return t!==null&&t!==Object.prototype&&Object.getPrototypeOf(t)!==null||Symbol.iterator in e?!1:Symbol.toStringTag in e?Object.prototype.toString.call(e)==="[object Module]":!0}function Ea(e,t,n=".",r){if(!na(t))return Ea(e,{},n,r);const o=Object.assign({},t);for(const a in e){if(a==="__proto__"||a==="constructor")continue;const c=e[a];c!=null&&(r&&r(o,a,c,n)||(Array.isArray(c)&&Array.isArray(o[a])?o[a]=[...c,...o[a]]:na(c)&&na(o[a])?o[a]=Ea(c,o[a],(n?`${n}.`:"")+a.toString(),r):o[a]=c))}return o}function s_(e){return(...t)=>t.reduce((n,r)=>Ea(n,r,"",e),{})}const o_=s_(),i_=Hb(()=>{const e=Ie(new Map),t=Ie(),n=et(()=>{for(const c of e.value.values())if(c)return!0;return!1}),r=Kb({scrollBody:Ie(!0)});let o=null;const a=()=>{document.body.style.paddingRight="",document.body.style.marginRight="",document.body.style.pointerEvents="",document.documentElement.style.removeProperty("--scrollbar-width"),document.body.style.overflow=t.value??"",Kl&&o?.(),t.value=void 0};return tn(n,(c,u)=>{if(!Ir)return;if(!c){u&&a();return}t.value===void 0&&(t.value=document.body.style.overflow);const d=window.innerWidth-document.documentElement.clientWidth,h={padding:d,margin:0},p=r.scrollBody?.value?typeof r.scrollBody.value=="object"?o_({padding:r.scrollBody.value.padding===!0?d:r.scrollBody.value.padding,margin:r.scrollBody.value.margin===!0?d:r.scrollBody.value.margin},h):h:{padding:0,margin:0};d>0&&(document.body.style.paddingRight=typeof p.padding=="number"?`${p.padding}px`:String(p.padding),document.body.style.marginRight=typeof p.margin=="number"?`${p.margin}px`:String(p.margin),document.documentElement.style.setProperty("--scrollbar-width",`${d}px`),document.body.style.overflow="hidden"),Kl&&(o=Rd(document,"touchmove",g=>c_(g),{passive:!1})),un(()=>{document.body.style.pointerEvents="none",document.body.style.overflow="hidden"})},{immediate:!0,flush:"sync"}),e});function a_(e){const t=Math.random().toString(36).substring(2,7),n=i_();n.value.set(t,e);const r=et({get:()=>n.value.get(t)??!1,set:o=>n.value.set(t,o)});return Jb(()=>{n.value.delete(t)}),r}function Dd(e){const t=window.getComputedStyle(e);if(t.overflowX==="scroll"||t.overflowY==="scroll"||t.overflowX==="auto"&&e.clientWidth<e.scrollWidth||t.overflowY==="auto"&&e.clientHeight<e.scrollHeight)return!0;{const n=e.parentNode;return!(n instanceof Element)||n.tagName==="BODY"?!1:Dd(n)}}function c_(e){const t=e||window.event,n=t.target;return n instanceof Element&&Dd(n)?!1:t.touches.length>1?!0:(t.preventDefault&&t.cancelable&&t.preventDefault(),!1)}function Za(e){const t=Sn(),n=t?.type.emits,r={};return n?.length||console.warn(`No emitted event found. Please check component: ${t?.type.__name}`),n?.forEach(o=>{r[xo(nn(o))]=(...a)=>e(o,...a)}),r}function Pn(){const e=Sn(),t=Ie(),n=et(()=>["#text","#comment"].includes(t.value?.$el.nodeName)?t.value?.$el.nextElementSibling:ai(t)),r=Object.assign({},e.exposed),o={};for(const c in e.props)Object.defineProperty(o,c,{enumerable:!0,configurable:!0,get:()=>e.props[c]});if(Object.keys(r).length>0)for(const c in r)Object.defineProperty(o,c,{enumerable:!0,configurable:!0,get:()=>r[c]});Object.defineProperty(o,"$el",{enumerable:!0,configurable:!0,get:()=>e.vnode.el}),e.exposed=o;function a(c){t.value=c,c&&(Object.defineProperty(o,"$el",{enumerable:!0,configurable:!0,get:()=>c instanceof Element?c:c.$el}),e.exposed=o)}return{forwardRef:a,currentRef:t,currentElement:n}}var l_=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Lr=new WeakMap,_o=new WeakMap,wo={},ra=0,$d=function(e){return e&&(e.host||$d(e.parentNode))},u_=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=$d(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},d_=function(e,t,n,r){var o=u_(t,Array.isArray(e)?e:[e]);wo[n]||(wo[n]=new WeakMap);var a=wo[n],c=[],u=new Set,d=new Set(o),h=function(g){!g||u.has(g)||(u.add(g),h(g.parentNode))};o.forEach(h);var p=function(g){!g||d.has(g)||Array.prototype.forEach.call(g.children,function(v){if(u.has(v))p(v);else try{var k=v.getAttribute(r),O=k!==null&&k!=="false",j=(Lr.get(v)||0)+1,K=(a.get(v)||0)+1;Lr.set(v,j),a.set(v,K),c.push(v),j===1&&O&&_o.set(v,!0),K===1&&v.setAttribute(n,"true"),O||v.setAttribute(r,"true")}catch(q){console.error("aria-hidden: cannot operate on ",v,q)}})};return p(t),u.clear(),ra++,function(){c.forEach(function(g){var v=Lr.get(g)-1,k=a.get(g)-1;Lr.set(g,v),a.set(g,k),v||(_o.has(g)||g.removeAttribute(r),_o.delete(g)),k||g.removeAttribute(n)}),ra--,ra||(Lr=new WeakMap,Lr=new WeakMap,_o=new WeakMap,wo={})}},f_=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),o=l_(e);return o?(r.push.apply(r,Array.from(o.querySelectorAll("[aria-live], script"))),d_(r,o,n,"aria-hidden")):function(){return null}};function p_(e){let t;tn(()=>ai(e),n=>{n?t=f_(n):t&&t()}),js(()=>{t&&t()})}function Vl(e,t="reka"){return`${t}-${cp?.()}`}function h_(e,t){const n=Ie(e);function r(a){return t[n.value][a]??n.value}return{state:n,dispatch:a=>{n.value=r(a)}}}function m_(e,t){const n=Ie({}),r=Ie("none"),o=Ie(e),a=e.value?"mounted":"unmounted";let c;const u=t.value?.ownerDocument.defaultView??Xa,{state:d,dispatch:h}=h_(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}}),p=K=>{if(Ir){const q=new CustomEvent(K,{bubbles:!1,cancelable:!1});t.value?.dispatchEvent(q)}};tn(e,async(K,q)=>{const V=q!==K;if(await un(),V){const T=r.value,E=ko(t.value);K?(h("MOUNT"),p("enter"),E==="none"&&p("after-enter")):E==="none"||E==="undefined"||n.value?.display==="none"?(h("UNMOUNT"),p("leave"),p("after-leave")):q&&T!==E?(h("ANIMATION_OUT"),p("leave")):(h("UNMOUNT"),p("after-leave"))}},{immediate:!0});const g=K=>{const q=ko(t.value),V=q.includes(K.animationName),T=d.value==="mounted"?"enter":"leave";if(K.target===t.value&&V&&(p(`after-${T}`),h("ANIMATION_END"),!o.value)){const E=t.value.style.animationFillMode;t.value.style.animationFillMode="forwards",c=u?.setTimeout(()=>{t.value?.style.animationFillMode==="forwards"&&(t.value.style.animationFillMode=E)})}K.target===t.value&&q==="none"&&h("ANIMATION_END")},v=K=>{K.target===t.value&&(r.value=ko(t.value))},k=tn(t,(K,q)=>{K?(n.value=getComputedStyle(K),K.addEventListener("animationstart",v),K.addEventListener("animationcancel",g),K.addEventListener("animationend",g)):(h("ANIMATION_END"),c!==void 0&&u?.clearTimeout(c),q?.removeEventListener("animationstart",v),q?.removeEventListener("animationcancel",g),q?.removeEventListener("animationend",g))},{immediate:!0}),O=tn(d,()=>{const K=ko(t.value);r.value=d.value==="mounted"?K:"none"});return js(()=>{k(),O()}),{isPresent:et(()=>["mounted","unmountSuspended"].includes(d.value))}}function ko(e){return e&&getComputedStyle(e).animationName||"none"}var Td=ct({name:"Presence",props:{present:{type:Boolean,required:!0},forceMount:{type:Boolean}},slots:{},setup(e,{slots:t,expose:n}){const{present:r,forceMount:o}=ja(e),a=Ie(),{isPresent:c}=m_(r,a);n({present:c});let u=t.default({present:c.value});u=Ja(u||[]);const d=Sn();if(u&&u?.length>1){const h=d?.parent?.type.name?`<${d.parent.type.name} />`:"component";throw new Error([`Detected an invalid children for \`${h}\` for  \`Presence\` component.`,"","Note: Presence works similarly to `v-if` directly, but it waits for animation/transition to finished before unmounting. So it expect only one direct child of valid VNode type.","You can apply a few solutions:",["Provide a single child element so that `presence` directive attach correctly.","Ensure the first child is an actual element instead of a raw text node or comment node."].map(p=>`  - ${p}`).join(`
`)].join(`
`))}return()=>o.value||r.value||c.value?zr(t.default({present:c.value})[0],{ref:h=>{const p=ai(h);return typeof p?.hasAttribute>"u"||(p?.hasAttribute("data-reka-popper-content-wrapper")?a.value=p.firstElementChild:a.value=p),p}}):null}});const g_=ct({name:"PrimitiveSlot",inheritAttrs:!1,setup(e,{attrs:t,slots:n}){return()=>{if(!n.default)return null;const r=Ja(n.default()),o=r.findIndex(d=>d.type!==dn);if(o===-1)return r;const a=r[o];delete a.props?.ref;const c=a.props?En(t,a.props):t,u=ar({...a,props:{}},c);return r.length===1?u:(r[o]=u,r)}}}),y_=["area","img","input"],Us=ct({name:"Primitive",inheritAttrs:!1,props:{asChild:{type:Boolean,default:!1},as:{type:[String,Object],default:"div"}},setup(e,{attrs:t,slots:n}){const r=e.asChild?"template":e.as;return typeof r=="string"&&y_.includes(r)?()=>zr(r,t):r!=="template"?()=>zr(e.as,t,{default:n.default}):()=>zr(g_,t,{default:n.default})}}),[cr,v_]=Sd("DialogRoot");var b_=ct({inheritAttrs:!1,__name:"DialogRoot",props:{open:{type:Boolean,required:!1,default:void 0},defaultOpen:{type:Boolean,required:!1,default:!1},modal:{type:Boolean,required:!1,default:!0}},emits:["update:open"],setup(e,{emit:t}){const n=e,o=r_(n,"open",t,{defaultValue:n.defaultOpen,passive:n.open===void 0}),a=Ie(),c=Ie(),{modal:u}=ja(n);return v_({open:o,modal:u,openModal:()=>{o.value=!0},onOpenChange:d=>{o.value=d},onOpenToggle:()=>{o.value=!o.value},contentId:"",titleId:"",descriptionId:"",triggerElement:a,contentElement:c}),(d,h)=>Yt(d.$slots,"default",{open:Ce(o),close:()=>o.value=!1})}}),__=b_,w_=ct({__name:"DialogClose",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(e){const t=e;Pn();const n=cr();return(r,o)=>(U(),St(Ce(Us),En(t,{type:r.as==="button"?"button":void 0,onClick:o[0]||(o[0]=a=>Ce(n).onOpenChange(!1))}),{default:rt(()=>[Yt(r.$slots,"default")]),_:3},16,["type"]))}}),k_=w_;const x_="dismissableLayer.pointerDownOutside",C_="dismissableLayer.focusOutside";function Fd(e,t){const n=t.closest("[data-dismissable-layer]"),r=e.dataset.dismissableLayer===""?e:e.querySelector("[data-dismissable-layer]"),o=Array.from(e.ownerDocument.querySelectorAll("[data-dismissable-layer]"));return!!(n&&(r===n||o.indexOf(r)<o.indexOf(n)))}function A_(e,t,n=!0){const r=t?.value?.ownerDocument??globalThis?.document,o=Ie(!1),a=Ie(()=>{});return Gr(c=>{if(!Ir||!An(n))return;const u=async h=>{const p=h.target;if(!(!t?.value||!p)){if(Fd(t.value,p)){o.value=!1;return}if(h.target&&!o.value){let k=function(){Pd(x_,e,v)};var g=k;const v={originalEvent:h};h.pointerType==="touch"?(r.removeEventListener("click",a.value),a.value=k,r.addEventListener("click",a.value,{once:!0})):k()}else r.removeEventListener("click",a.value);o.value=!1}},d=window.setTimeout(()=>{r.addEventListener("pointerdown",u)},0);c(()=>{window.clearTimeout(d),r.removeEventListener("pointerdown",u),r.removeEventListener("click",a.value)})}),{onPointerDownCapture:()=>{An(n)&&(o.value=!0)}}}function E_(e,t,n=!0){const r=t?.value?.ownerDocument??globalThis?.document,o=Ie(!1);return Gr(a=>{if(!Ir||!An(n))return;const c=async u=>{if(!t?.value)return;await un(),await un();const d=u.target;!t.value||!d||Fd(t.value,d)||u.target&&!o.value&&Pd(C_,e,{originalEvent:u})};r.addEventListener("focusin",c),a(()=>r.removeEventListener("focusin",c))}),{onFocusCapture:()=>{An(n)&&(o.value=!0)},onBlurCapture:()=>{An(n)&&(o.value=!1)}}}const Tn=Er({layersRoot:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set});var I_=ct({__name:"DismissableLayer",props:{disableOutsidePointerEvents:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","dismiss"],setup(e,{emit:t}){const n=e,r=t,{forwardRef:o,currentElement:a}=Pn(),c=et(()=>a.value?.ownerDocument??globalThis.document),u=et(()=>Tn.layersRoot),d=et(()=>a.value?Array.from(u.value).indexOf(a.value):-1),h=et(()=>Tn.layersWithOutsidePointerEventsDisabled.size>0),p=et(()=>{const O=Array.from(u.value),[j]=[...Tn.layersWithOutsidePointerEventsDisabled].slice(-1),K=O.indexOf(j);return d.value>=K}),g=A_(async O=>{const j=[...Tn.branches].some(K=>K?.contains(O.target));!p.value||j||(r("pointerDownOutside",O),r("interactOutside",O),await un(),O.defaultPrevented||r("dismiss"))},a),v=E_(O=>{[...Tn.branches].some(K=>K?.contains(O.target))||(r("focusOutside",O),r("interactOutside",O),O.defaultPrevented||r("dismiss"))},a);t_("Escape",O=>{d.value===u.value.size-1&&(r("escapeKeyDown",O),O.defaultPrevented||r("dismiss"))});let k;return Gr(O=>{a.value&&(n.disableOutsidePointerEvents&&(Tn.layersWithOutsidePointerEventsDisabled.size===0&&(k=c.value.body.style.pointerEvents,c.value.body.style.pointerEvents="none"),Tn.layersWithOutsidePointerEventsDisabled.add(a.value)),u.value.add(a.value),O(()=>{n.disableOutsidePointerEvents&&Tn.layersWithOutsidePointerEventsDisabled.size===1&&(c.value.body.style.pointerEvents=k)}))}),Gr(O=>{O(()=>{a.value&&(u.value.delete(a.value),Tn.layersWithOutsidePointerEventsDisabled.delete(a.value))})}),(O,j)=>(U(),St(Ce(Us),{ref:Ce(o),"as-child":O.asChild,as:O.as,"data-dismissable-layer":"",style:Nn({pointerEvents:h.value?p.value?"auto":"none":void 0}),onFocusCapture:Ce(v).onFocusCapture,onBlurCapture:Ce(v).onBlurCapture,onPointerdownCapture:Ce(g).onPointerDownCapture},{default:rt(()=>[Yt(O.$slots,"default")]),_:3},8,["as-child","as","style","onFocusCapture","onBlurCapture","onPointerdownCapture"]))}}),S_=I_;const P_=Vb(()=>Ie([]));function O_(){const e=P_();return{add(t){const n=e.value[0];t!==n&&n?.pause(),e.value=Hl(e.value,t),e.value.unshift(t)},remove(t){e.value=Hl(e.value,t),e.value[0]?.resume()}}}function Hl(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function R_(e){return e.filter(t=>t.tagName!=="A")}const sa="focusScope.autoFocusOnMount",oa="focusScope.autoFocusOnUnmount",Wl={bubbles:!1,cancelable:!0};function D_(e,{select:t=!1}={}){const n=or();for(const r of e)if(Zn(r,{select:t}),or()!==n)return!0}function $_(e){const t=Md(e),n=zl(t,e),r=zl(t.reverse(),e);return[n,r]}function Md(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function zl(e,t){for(const n of e)if(!T_(n,{upTo:t}))return n}function T_(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function F_(e){return e instanceof HTMLInputElement&&"select"in e}function Zn(e,{select:t=!1}={}){if(e&&e.focus){const n=or();e.focus({preventScroll:!0}),e!==n&&F_(e)&&t&&e.select()}}var M_=ct({__name:"FocusScope",props:{loop:{type:Boolean,required:!1,default:!1},trapped:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["mountAutoFocus","unmountAutoFocus"],setup(e,{emit:t}){const n=e,r=t,{currentRef:o,currentElement:a}=Pn(),c=Ie(null),u=O_(),d=Er({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}});Gr(p=>{if(!Ir)return;const g=a.value;if(!n.trapped)return;function v(K){if(d.paused||!g)return;const q=K.target;g.contains(q)?c.value=q:Zn(c.value,{select:!0})}function k(K){if(d.paused||!g)return;const q=K.relatedTarget;q!==null&&(g.contains(q)||Zn(c.value,{select:!0}))}function O(K){g.contains(c.value)||Zn(g)}document.addEventListener("focusin",v),document.addEventListener("focusout",k);const j=new MutationObserver(O);g&&j.observe(g,{childList:!0,subtree:!0}),p(()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",k),j.disconnect()})}),Gr(async p=>{const g=a.value;if(await un(),!g)return;u.add(d);const v=or();if(!g.contains(v)){const O=new CustomEvent(sa,Wl);g.addEventListener(sa,j=>r("mountAutoFocus",j)),g.dispatchEvent(O),O.defaultPrevented||(D_(R_(Md(g)),{select:!0}),or()===v&&Zn(g))}p(()=>{g.removeEventListener(sa,K=>r("mountAutoFocus",K));const O=new CustomEvent(oa,Wl),j=K=>{r("unmountAutoFocus",K)};g.addEventListener(oa,j),g.dispatchEvent(O),setTimeout(()=>{O.defaultPrevented||Zn(v??document.body,{select:!0}),g.removeEventListener(oa,j),u.remove(d)},0)})});function h(p){if(!n.loop&&!n.trapped||d.paused)return;const g=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,v=or();if(g&&v){const k=p.currentTarget,[O,j]=$_(k);O&&j?!p.shiftKey&&v===j?(p.preventDefault(),n.loop&&Zn(O,{select:!0})):p.shiftKey&&v===O&&(p.preventDefault(),n.loop&&Zn(j,{select:!0})):v===k&&p.preventDefault()}}return(p,g)=>(U(),St(Ce(Us),{ref_key:"currentRef",ref:o,tabindex:"-1","as-child":p.asChild,as:p.as,onKeydown:h},{default:rt(()=>[Yt(p.$slots,"default")]),_:3},8,["as-child","as"]))}}),B_=M_;function N_(e){return e?"open":"closed"}var L_=ct({__name:"DialogContentImpl",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(e,{emit:t}){const n=e,r=t,o=cr(),{forwardRef:a,currentElement:c}=Pn();return o.titleId||=Vl(void 0,"reka-dialog-title"),o.descriptionId||=Vl(void 0,"reka-dialog-description"),In(()=>{o.contentElement=c,or()!==document.body&&(o.triggerElement.value=or())}),(u,d)=>(U(),St(Ce(B_),{"as-child":"",loop:"",trapped:n.trapFocus,onMountAutoFocus:d[5]||(d[5]=h=>r("openAutoFocus",h)),onUnmountAutoFocus:d[6]||(d[6]=h=>r("closeAutoFocus",h))},{default:rt(()=>[We(Ce(S_),En({id:Ce(o).contentId,ref:Ce(a),as:u.as,"as-child":u.asChild,"disable-outside-pointer-events":u.disableOutsidePointerEvents,role:"dialog","aria-describedby":Ce(o).descriptionId,"aria-labelledby":Ce(o).titleId,"data-state":Ce(N_)(Ce(o).open.value)},u.$attrs,{onDismiss:d[0]||(d[0]=h=>Ce(o).onOpenChange(!1)),onEscapeKeyDown:d[1]||(d[1]=h=>r("escapeKeyDown",h)),onFocusOutside:d[2]||(d[2]=h=>r("focusOutside",h)),onInteractOutside:d[3]||(d[3]=h=>r("interactOutside",h)),onPointerDownOutside:d[4]||(d[4]=h=>r("pointerDownOutside",h))}),{default:rt(()=>[Yt(u.$slots,"default")]),_:3},16,["id","as","as-child","disable-outside-pointer-events","aria-describedby","aria-labelledby","data-state"])]),_:3},8,["trapped"]))}}),Bd=L_,j_=ct({__name:"DialogContentModal",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(e,{emit:t}){const n=e,r=t,o=cr(),a=Za(r),{forwardRef:c,currentElement:u}=Pn();return p_(u),(d,h)=>(U(),St(Bd,En({...n,...Ce(a)},{ref:Ce(c),"trap-focus":Ce(o).open.value,"disable-outside-pointer-events":!0,onCloseAutoFocus:h[0]||(h[0]=p=>{p.defaultPrevented||(p.preventDefault(),Ce(o).triggerElement.value?.focus())}),onPointerDownOutside:h[1]||(h[1]=p=>{const g=p.detail.originalEvent,v=g.button===0&&g.ctrlKey===!0;(g.button===2||v)&&p.preventDefault()}),onFocusOutside:h[2]||(h[2]=p=>{p.preventDefault()})}),{default:rt(()=>[Yt(d.$slots,"default")]),_:3},16,["trap-focus"]))}}),q_=j_,U_=ct({__name:"DialogContentNonModal",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(e,{emit:t}){const n=e,o=Za(t);Pn();const a=cr(),c=Ie(!1),u=Ie(!1);return(d,h)=>(U(),St(Bd,En({...n,...Ce(o)},{"trap-focus":!1,"disable-outside-pointer-events":!1,onCloseAutoFocus:h[0]||(h[0]=p=>{p.defaultPrevented||(c.value||Ce(a).triggerElement.value?.focus(),p.preventDefault()),c.value=!1,u.value=!1}),onInteractOutside:h[1]||(h[1]=p=>{p.defaultPrevented||(c.value=!0,p.detail.originalEvent.type==="pointerdown"&&(u.value=!0));const g=p.target;Ce(a).triggerElement.value?.contains(g)&&p.preventDefault(),p.detail.originalEvent.type==="focusin"&&u.value&&p.preventDefault()})}),{default:rt(()=>[Yt(d.$slots,"default")]),_:3},16))}}),K_=U_,V_=ct({__name:"DialogContent",props:{forceMount:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(e,{emit:t}){const n=e,r=t,o=cr(),a=Za(r),{forwardRef:c}=Pn();return(u,d)=>(U(),St(Ce(Td),{present:u.forceMount||Ce(o).open.value},{default:rt(()=>[Ce(o).modal.value?(U(),St(q_,En({key:0,ref:Ce(c)},{...n,...Ce(a),...u.$attrs}),{default:rt(()=>[Yt(u.$slots,"default")]),_:3},16)):(U(),St(K_,En({key:1,ref:Ce(c)},{...n,...Ce(a),...u.$attrs}),{default:rt(()=>[Yt(u.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),H_=V_,W_=ct({__name:"DialogOverlayImpl",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(e){const t=cr();return a_(!0),Pn(),(n,r)=>(U(),St(Ce(Us),{as:n.as,"as-child":n.asChild,"data-state":Ce(t).open.value?"open":"closed",style:{"pointer-events":"auto"}},{default:rt(()=>[Yt(n.$slots,"default")]),_:3},8,["as","as-child","data-state"]))}}),z_=W_,Q_=ct({__name:"DialogOverlay",props:{forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(e){const t=cr(),{forwardRef:n}=Pn();return(r,o)=>Ce(t)?.modal.value?(U(),St(Ce(Td),{key:0,present:r.forceMount||Ce(t).open.value},{default:rt(()=>[We(z_,En(r.$attrs,{ref:Ce(n),as:r.as,"as-child":r.asChild}),{default:rt(()=>[Yt(r.$slots,"default")]),_:3},16,["as","as-child"])]),_:3},8,["present"])):$e("v-if",!0)}}),Y_=Q_,G_=ct({__name:"Teleport",props:{to:{type:null,required:!1,default:"body"},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(e){const t=Zb();return(n,r)=>Ce(t)||n.forceMount?(U(),St(sp,{key:0,to:n.to,disabled:n.disabled,defer:n.defer},[Yt(n.$slots,"default")],8,["to","disabled","defer"])):$e("v-if",!0)}}),J_=G_,X_=ct({__name:"DialogPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(e){const t=e;return(n,r)=>(U(),St(Ce(J_),wf(td(t)),{default:rt(()=>[Yt(n.$slots,"default")]),_:3},16))}}),Z_=X_,e0=ct({__name:"DialogTitle",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"h2"}},setup(e){const t=e,n=cr();return Pn(),(r,o)=>(U(),St(Ce(Us),En(t,{id:Ce(n).titleId}),{default:rt(()=>[Yt(r.$slots,"default")]),_:3},16,["id"]))}}),t0=e0;const n0={class:"card-image-container position-relative overflow-hidden rounded",style:{"padding-bottom":"140%"}},r0={key:1,class:"placeholder-image card-img-top position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center"},s0={class:"card-body"},o0={class:"card-title fs-6 fw-medium mb-1"},i0={class:"card-text small text-muted mb-2"},a0={key:0,class:"d-flex justify-content-between small"},c0={class:"text-success fw-medium"},l0={key:1,class:"small text-muted fst-italic"},u0={class:"modal-dialog modal-dialog-centered modal-lg"},d0={class:"modal-content"},f0={class:"modal-header py-2"},p0={class:"modal-body py-3"},h0={class:"row g-3 align-items-start"},m0={class:"col-lg-5"},g0={class:"card-inner",style:{"padding-bottom":"140%"}},y0={class:"card-front"},v0={key:1,class:"placeholder-image w-100 h-100 rounded-4 position-relative"},b0={class:"card-back"},_0=["src"],w0={class:"row row-cols-2 g-2 small mt-3 mb-0 meta-grid"},k0={class:"col text-end fw-semibold"},x0={class:"col text-end fw-semibold"},C0={class:"col text-end fw-semibold"},A0={class:"col text-end fw-semibold"},E0={class:"col-lg-7"},I0={class:"d-flex justify-content-between align-items-center mb-3"},S0={key:0,class:"h5 mb-0 text-success fw-bold"},P0={key:1,class:"small text-muted fst-italic"},O0={key:2,class:"small text-muted fst-italic"},R0={key:0,class:"mb-3"},D0={class:"d-flex gap-3 small"},$0={class:"mt-2 border rounded-3 p-2 small",style:{"max-height":"30vh",overflow:"auto"}},T0={class:"row g-2 align-items-center"},F0={class:"col-6 col-md-3"},M0={class:"fw-medium"},B0={class:"col-6 col-md-3"},N0={class:"fw-medium"},L0={class:"col-6 col-md-3"},j0={class:"fw-medium"},q0={key:0,class:"col-6 col-md-3"},U0={class:"fw-medium"},K0={key:1},V0={class:"mt-2 small",style:{"max-height":"30vh",overflow:"auto"}},H0={class:"flex-grow-1"},W0={class:"fw-medium"},z0={class:"text-muted"},Q0={class:"fw-semibold"},Y0=ct({inheritAttrs:!0,__name:"CardComponent",props:{card:{}},setup(e){const t=e,n=Ga(),r=Ie(!1),o=Ie(null),a=Ie(!1),c=Ie([]),u=Ie([]),d=Ie(!1),h=Ie(!1),p=et(()=>u.value?[...u.value].sort((T,E)=>new Date(E.happenedAt).getTime()-new Date(T.happenedAt).getTime()):[]),g=et(()=>{const T=n.getCardPrice(t.card.id);return T||o.value}),v=et(()=>!c.value||c.value.length===0?0:c.value.reduce((T,E)=>{if(!E.disposedAt||E.disposedQuantity&&E.disposedQuantity<E.quantity){const re=E.disposedQuantity?E.quantity-E.disposedQuantity:E.quantity;return T+re}return T},0)),k=()=>{r.value=!0,q()},O=()=>{r.value=!1},j=T=>new Date(T).toLocaleDateString(),K=(T,E)=>new at(T,E).format("de-DE"),q=async()=>{try{await V(),c.value=await xe.card_lots.where("cardId").equals(t.card.id).toArray(),u.value=await xe.transactions.where("cardId").equals(t.card.id).toArray()}catch(T){console.error("Error loading card details:",T)}},V=async()=>{a.value=!0;try{const T=await xe.price_points.where("cardId").equals(t.card.id).toArray();if(T.length>0){T.sort((re,le)=>le.asOf.getTime()-re.asOf.getTime());const E=T[0];o.value=new at(E.price,E.currency)}}catch(T){console.error("Error loading current price:",T)}finally{a.value=!1}};return(T,E)=>(U(),J(Je,null,[b("div",{class:"card h-100 card-item",onClick:k},[b("div",n0,[T.card.imageUrl?(U(),J("div",{key:0,class:"card-img-top position-absolute top-0 start-0 w-100 h-100",style:Nn({backgroundImage:`url(${T.card.imageUrl})`,backgroundSize:"cover",backgroundPosition:"center"})},null,4)):(U(),J("div",r0,[...E[3]||(E[3]=[b("span",{class:"text-muted"},"Missing Image",-1)])]))]),b("div",s0,[b("h3",o0,oe(T.card.name),1),b("p",i0,oe(T.card.set)+" #"+oe(T.card.number),1),g.value?(U(),J("div",a0,[E[4]||(E[4]=b("span",{class:"text-muted"},"Current:",-1)),b("span",c0,oe(g.value.format("de-DE")),1)])):a.value||Ce(n).loadingPrices?(U(),J("div",l0," Loading... ")):$e("",!0)])]),We(Ce(__),{open:r.value,"onUpdate:open":E[2]||(E[2]=re=>r.value=re)},{default:rt(()=>[We(Ce(Z_),null,{default:rt(()=>[We(Ce(Y_),{class:"modal-backdrop fade show",onClick:O}),We(Ce(H_),{class:"modal d-block compact-modal",onPointerDownOutside:O,onEscapeKeyDown:O},{default:rt(()=>[b("div",u0,[b("div",d0,[b("div",f0,[We(Ce(t0),{class:"modal-title h5 mb-0"},{default:rt(()=>[Wt(oe(T.card.name),1)]),_:1}),We(Ce(k_),{"as-child":""},{default:rt(()=>[...E[5]||(E[5]=[b("button",{type:"button",class:"btn-close","aria-label":"Close"},null,-1)])]),_:1})]),b("div",p0,[b("div",h0,[b("div",m0,[b("div",{class:It(["card-flipper position-relative",{"is-flipped":d.value}])},[b("div",g0,[b("div",y0,[T.card.imageUrl?(U(),J("div",{key:0,class:"w-100 h-100 rounded-4",style:Nn({backgroundImage:`url(${T.card.imageUrl})`,backgroundSize:"cover",backgroundPosition:"center"})},null,4)):(U(),J("div",v0,[...E[6]||(E[6]=[b("div",{class:"position-absolute top-50 start-50 translate-middle"},[b("span",{class:"text-muted"},"Missing Image")],-1)])]))]),b("div",b0,[T.card.imageUrlBack?(U(),J("div",{key:0,class:"w-100 h-100 rounded-4",style:Nn({backgroundImage:`url(${T.card.imageUrlBack})`,backgroundSize:"cover",backgroundPosition:"center"})},null,4)):$e("",!0)])]),T.card.layout==="transform"||T.card.layout==="modal_dfc"||T.card.layout==="reversible_card"?(U(),J("button",{key:0,onClick:E[0]||(E[0]=re=>d.value=!d.value),class:"btn btn-sm btn-dark flip-button"}," Flip ")):$e("",!0)],2),b("img",{src:T.card.imageUrlBack,style:{display:"none"}},null,8,_0),b("dl",w0,[E[7]||(E[7]=b("dt",{class:"col text-muted"},"Set",-1)),b("dd",k0,oe(T.card.set)+" ("+oe(T.card.setCode)+")",1),E[8]||(E[8]=b("dt",{class:"col text-muted"},"Number",-1)),b("dd",x0,"#"+oe(T.card.number),1),E[9]||(E[9]=b("dt",{class:"col text-muted"},"Language",-1)),b("dd",C0,oe(T.card.lang),1),E[10]||(E[10]=b("dt",{class:"col text-muted"},"Finish",-1)),b("dd",A0,oe(T.card.finish),1)])]),b("div",E0,[b("div",I0,[E[11]||(E[11]=b("h3",{class:"h6 mb-0"},"Current Price",-1)),o.value?(U(),J("span",S0,oe(o.value.format("de-DE")),1)):a.value?(U(),J("span",P0,"Loading")):(U(),J("span",O0,"Price unavailable"))]),c.value&&c.value.length?(U(),J("div",R0,[E[21]||(E[21]=b("h3",{class:"h6 mb-2"},"Your Collection",-1)),b("div",D0,[b("div",null,[E[12]||(E[12]=b("span",{class:"text-muted"},"Lots:",-1)),E[13]||(E[13]=Wt()),b("strong",null,oe(c.value.length),1)]),b("div",null,[E[14]||(E[14]=b("span",{class:"text-muted"},"Cards:",-1)),E[15]||(E[15]=Wt()),b("strong",null,oe(v.value),1)])]),c.value.length>2?(U(),J("button",{key:0,class:"btn btn-link btn-sm p-0 mt-1",onClick:E[1]||(E[1]=re=>h.value=!h.value)},oe(h.value?"Hide details":"Show details"),1)):$e("",!0),Rs(b("div",$0,[(U(!0),J(Je,null,Bt(c.value,re=>(U(),J("div",{key:re.id,class:"border rounded p-2 mb-2"},[b("div",T0,[b("div",F0,[E[16]||(E[16]=b("span",{class:"text-muted"},"Qty:",-1)),E[17]||(E[17]=Wt()),b("span",M0,oe(re.quantity),1)]),b("div",B0,[E[18]||(E[18]=b("span",{class:"text-muted"},"Unit Cost:",-1)),b("span",N0,oe(K(re.unitCost,re.currency||"EUR")),1)]),b("div",L0,[E[19]||(E[19]=b("span",{class:"text-muted"},"Purchased:",-1)),b("span",j0,oe(j(re.purchasedAt)),1)]),re.disposedQuantity?(U(),J("div",q0,[E[20]||(E[20]=b("span",{class:"text-muted"},"Disposed:",-1)),b("span",U0,oe(re.disposedQuantity),1)])):$e("",!0)])]))),128))],512),[[gh,h.value]])])):$e("",!0),u.value&&u.value.length?(U(),J("div",K0,[E[22]||(E[22]=b("h3",{class:"h6 mb-2"},"Transaction History",-1)),b("div",V0,[(U(!0),J(Je,null,Bt(p.value,re=>(U(),J("div",{key:re.id,class:It(["tx-item d-flex align-items-center gap-2 p-2 mb-2 rounded border",{buy:/buy/i.test(re.kind),sell:/sell/i.test(re.kind)}])},[b("span",{class:It(["badge me-1",/buy/i.test(re.kind)?"bg-success-subtle text-success-emphasis":"bg-danger-subtle text-danger-emphasis"])},oe(re.kind),3),b("div",H0,[b("div",W0,oe(j(re.happenedAt)),1),b("div",z0,"Qty: "+oe(re.quantity),1)]),b("div",Q0,oe(K(re.unitPrice,re.currency)),1)],2))),128))])])):$e("",!0)])])])])])]),_:1})]),_:1})]),_:1},8,["open"])],64))}}),Nd=pn(Y0,[["__scopeId","data-v-5453b9cb"]]),G0={class:"deck-detail-view"},J0={key:0,class:"loading"},X0={key:1,class:"deck-detail"},Z0={class:"deck-header"},ew={class:"deck-meta"},tw={class:"platform"},nw={class:"date"},rw={class:"cards-section"},sw={key:0,class:"empty-state"},ow={key:1,class:"cards-grid"},iw={key:2,class:"error"},aw=ct({__name:"DeckDetailView",setup(e){const t=kd(),n=Ie(null),r=Ie([]),o=Ie({}),a=Ie(!0),c=h=>new Date(h).toLocaleDateString(),u=h=>o.value[h]||{id:h,name:"Unknown Card",set:"Unknown Set",setCode:"???",number:"???",lang:"en",finish:"nonfoil",imageUrl:"https://placehold.co/200x280?text=Card+Image"},d=async()=>{try{const h=t.params.id,p=await xe.decks.get(h);if(!p)return;n.value=p;const g=await xe.deck_cards.where("deckId").equals(h).toArray();r.value=g;const v=g.map(k=>k.cardId).filter(k=>k);if(v.length>0){const k=await xe.cards.where("id").anyOf(v).toArray();o.value=Object.fromEntries(k.map(O=>[O.id,O]))}}catch(h){console.error("Error loading deck:",h)}finally{a.value=!1}};return In(()=>{d()}),(h,p)=>{const g=Zo("router-link");return U(),J("div",G0,[a.value?(U(),J("div",J0," Loading deck... ")):n.value?(U(),J("div",X0,[b("div",Z0,[We(g,{to:"/decks",class:"back-link"},{default:rt(()=>[...p[0]||(p[0]=[Wt("  Back to Decks ",-1)])]),_:1}),b("h1",null,oe(n.value.name),1),b("p",ew,[b("span",tw,oe(n.value.platform),1),b("span",nw,"Imported: "+oe(c(n.value.importedAt)),1)])]),b("div",rw,[p[2]||(p[2]=b("h2",null,"Cards in Deck",-1)),r.value.length===0?(U(),J("div",sw,[...p[1]||(p[1]=[b("p",null,"No cards found in this deck.",-1)])])):(U(),J("div",ow,[(U(!0),J(Je,null,Bt(r.value,v=>(U(),St(Nd,{key:v.id,card:u(v.cardId)},null,8,["card"]))),128))]))])])):(U(),J("div",iw,[p[4]||(p[4]=b("p",null,"Deck not found.",-1)),We(g,{to:"/decks",class:"back-link"},{default:rt(()=>[...p[3]||(p[3]=[Wt("  Back to Decks ",-1)])]),_:1})]))])}}}),cw=pn(aw,[["__scopeId","data-v-aee401d9"]]),lw={class:"cards-view"},uw={class:"header"},dw={class:"controls"},fw={class:"search-box"},pw={class:"sort-controls"},hw={key:0,class:"loading"},mw={key:1,class:"empty-state"},gw={key:0},yw={key:1},vw={key:2,class:"row g-4"},bw=ct({__name:"CardsView",setup(e){const t=Ga(),n=Ie(""),r=Ie("name"),o=Ie("asc"),a=et(()=>{const u=t.getAllCards;if(!n.value)return u;const d=n.value.toLowerCase();return u.filter(h=>h.name.toLowerCase().includes(d)||h.set.toLowerCase().includes(d)||h.number.includes(d))}),c=et(()=>{const u=[...a.value];return u.sort((d,h)=>{let p=0;switch(r.value){case"name":p=d.name.localeCompare(h.name);break;case"set":p=d.set.localeCompare(h.set);break;case"price":{const g=t.getCardPrice(d.id)?.getCents()??0,v=t.getCardPrice(h.id)?.getCents()??0;p=g-v}break;case"owned":p=0;break;default:p=d.name.localeCompare(h.name)}return o.value==="asc"?p:-p}),u});return In(()=>{t.loadCardsAndPrices()}),(u,d)=>(U(),J("div",lw,[b("div",uw,[b("div",dw,[b("div",fw,[Rs(b("input",{"onUpdate:modelValue":d[0]||(d[0]=h=>n.value=h),type:"text",placeholder:"Search cards...",class:"form-control"},null,512),[[va,n.value]])]),b("div",pw,[Rs(b("select",{"onUpdate:modelValue":d[1]||(d[1]=h=>r.value=h),class:"form-select"},[...d[3]||(d[3]=[b("option",{value:"name"},"Name",-1),b("option",{value:"set"},"Set",-1),b("option",{value:"price"},"Price",-1),b("option",{value:"owned"},"Owned Quantity",-1)])],512),[[Nh,r.value]]),b("button",{onClick:d[2]||(d[2]=h=>o.value=o.value==="asc"?"desc":"asc"),class:"btn btn-outline-primary"},oe(o.value==="asc"?"":""),1)])])]),Ce(t).loading||Ce(t).loadingPrices?(U(),J("div",hw," Loading cards and prices... ")):c.value.length===0?(U(),J("div",mw,[n.value?(U(),J("p",gw,"No cards match your search.")):(U(),J("p",yw,"You don't have any cards in your collection yet."))])):(U(),J("div",vw,[(U(!0),J(Je,null,Bt(c.value,h=>(U(),J("div",{key:h.id,class:"col-xl-2 col-lg-3 col-md-4 col-sm-6"},[We(Nd,{card:h},null,8,["card"])]))),128))]))]))}}),_w=pn(bw,[["__scopeId","data-v-c166bf67"]]),ww=[{path:"/",name:"home",component:my},{path:"/import/csv",name:"csv-import",component:Oy},{path:"/import/cardmarket",name:"cardmarket-import",component:_b},{path:"/import/deck",name:"deck-import",component:Ob},{path:"/decks",name:"decks",component:Ub},{path:"/decks/:id",name:"deck-detail",component:cw,props:!0},{path:"/cards",name:"cards",component:_w}],kw=Wm({history:wm("/mtg-pwa/"),routes:ww}),xw="modulepreload",Cw=function(e){return"/mtg-pwa/"+e},Ql={},Aw=function(t,n,r){let o=Promise.resolve();if(n&&n.length>0){let h=function(p){return Promise.all(p.map(g=>Promise.resolve(g).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};var c=h;document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=u?.nonce||u?.getAttribute("nonce");o=h(n.map(p=>{if(p=Cw(p),p in Ql)return;Ql[p]=!0;const g=p.endsWith(".css"),v=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${v}`))return;const k=document.createElement("link");if(k.rel=g?"stylesheet":xw,g||(k.as="script"),k.crossOrigin="",k.href=p,d&&k.setAttribute("nonce",d),document.head.appendChild(k),g)return new Promise((O,j)=>{k.addEventListener("load",O),k.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${p}`)))})}))}function a(u){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=u,window.dispatchEvent(d),!d.defaultPrevented)throw u}return o.then(u=>{for(const d of u||[])d.status==="rejected"&&a(d.reason);return t().catch(a)})};function Ew(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:o,onRegisteredSW:a,onRegisterError:c}=e;let u,d;const h=async(g=!0)=>{await d};async function p(){if("serviceWorker"in navigator){if(u=await Aw(async()=>{const{Workbox:g}=await import("./workbox-window.prod.es5-CwtvwXb3.js");return{Workbox:g}},[]).then(({Workbox:g})=>new g("/mtg-pwa/sw.js",{scope:"/mtg-pwa/",type:"classic"})).catch(g=>{c?.(g)}),!u)return;u.addEventListener("activated",g=>{(g.isUpdate||g.isExternal)&&window.location.reload()}),u.addEventListener("installed",g=>{g.isUpdate||r?.()}),u.register({immediate:t}).then(g=>{a?a("/mtg-pwa/sw.js",g):o?.(g)}).catch(g=>{c?.(g)})}}return d=p(),h}Ew({immediate:!0,onRegistered(e){console.log("SW registered",e)},onRegisterError(e){console.error("SW registration error",e)}});const Ld=qh(Dg),Iw=eg();Ld.use(Iw);async function Sw(){try{await ms.schedulePriceUpdate()}catch(e){console.error("Error initializing automatic price updates:",e)}Ld.use(kw).mount("#app")}Sw();
