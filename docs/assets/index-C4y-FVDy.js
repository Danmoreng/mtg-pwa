(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();/**
* @vue/shared v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Md(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const mt={},gi=[],or=()=>{},zm=()=>!1,Hl=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Td=t=>t.startsWith("onUpdate:"),Bt=Object.assign,Dd=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},W_=Object.prototype.hasOwnProperty,ft=(t,e)=>W_.call(t,e),ze=Array.isArray,mi=t=>Qo(t)==="[object Map]",Kl=t=>Qo(t)==="[object Set]",uh=t=>Qo(t)==="[object Date]",Ye=t=>typeof t=="function",It=t=>typeof t=="string",Wn=t=>typeof t=="symbol",yt=t=>t!==null&&typeof t=="object",qm=t=>(yt(t)||Ye(t))&&Ye(t.then)&&Ye(t.catch),Um=Object.prototype.toString,Qo=t=>Um.call(t),V_=t=>Qo(t).slice(8,-1),Wm=t=>Qo(t)==="[object Object]",Rd=t=>It(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,vo=Md(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Yl=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},H_=/-(\w)/g,En=Yl(t=>t.replace(H_,(e,n)=>n?n.toUpperCase():"")),K_=/\B([A-Z])/g,os=Yl(t=>t.replace(K_,"-$1").toLowerCase()),Gl=Yl(t=>t.charAt(0).toUpperCase()+t.slice(1)),ol=Yl(t=>t?`on${Gl(t)}`:""),Qr=(t,e)=>!Object.is(t,e),al=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},Vm=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},bl=t=>{const e=parseFloat(t);return isNaN(e)?t:e},Y_=t=>{const e=It(t)?Number(t):NaN;return isNaN(e)?t:e};let dh;const Xl=()=>dh||(dh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function An(t){if(ze(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=It(r)?J_(r):An(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(It(t)||yt(t))return t}const G_=/;(?![^(]*\))/g,X_=/:([^]+)/,Q_=/\/\*[^]*?\*\//g;function J_(t){const e={};return t.replace(Q_,"").split(G_).forEach(n=>{if(n){const r=n.split(X_);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function At(t){let e="";if(It(t))e=t;else if(ze(t))for(let n=0;n<t.length;n++){const r=At(t[n]);r&&(e+=r+" ")}else if(yt(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function Z_(t){if(!t)return null;let{class:e,style:n}=t;return e&&!It(e)&&(t.class=At(e)),n&&(t.style=An(n)),t}const e0="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",t0=Md(e0);function Hm(t){return!!t||t===""}function n0(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=Ql(t[r],e[r]);return n}function Ql(t,e){if(t===e)return!0;let n=uh(t),r=uh(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=Wn(t),r=Wn(e),n||r)return t===e;if(n=ze(t),r=ze(e),n||r)return n&&r?n0(t,e):!1;if(n=yt(t),r=yt(e),n||r){if(!n||!r)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!Ql(t[o],e[o]))return!1}}return String(t)===String(e)}function r0(t,e){return t.findIndex(n=>Ql(n,e))}const Km=t=>!!(t&&t.__v_isRef===!0),oe=t=>It(t)?t:t==null?"":ze(t)||yt(t)&&(t.toString===Um||!Ye(t.toString))?Km(t)?oe(t.value):JSON.stringify(t,Ym,2):String(t),Ym=(t,e)=>Km(e)?Ym(t,e.value):mi(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],i)=>(n[nu(r,i)+" =>"]=s,n),{})}:Kl(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>nu(n))}:Wn(e)?nu(e):yt(e)&&!ze(e)&&!Wm(e)?String(e):e,nu=(t,e="")=>{var n;return Wn(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let rn;class Gm{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=rn,!e&&rn&&(this.index=(rn.scopes||(rn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=rn;try{return rn=this,e()}finally{rn=n}}}on(){++this._on===1&&(this.prevScope=rn,rn=this)}off(){this._on>0&&--this._on===0&&(rn=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function Jl(t){return new Gm(t)}function $d(){return rn}function Xm(t,e=!1){rn&&rn.cleanups.push(t)}let vt;const ru=new WeakSet;class Qm{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,rn&&rn.active&&rn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,ru.has(this)&&(ru.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Zm(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,fh(this),ey(this);const e=vt,n=Un;vt=this,Un=!0;try{return this.fn()}finally{ty(this),vt=e,Un=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Bd(e);this.deps=this.depsTail=void 0,fh(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?ru.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Hu(this)&&this.run()}get dirty(){return Hu(this)}}let Jm=0,bo,_o;function Zm(t,e=!1){if(t.flags|=8,e){t.next=_o,_o=t;return}t.next=bo,bo=t}function Fd(){Jm++}function Ld(){if(--Jm>0)return;if(_o){let e=_o;for(_o=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;bo;){let e=bo;for(bo=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function ey(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function ty(t){let e,n=t.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),Bd(r),s0(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}t.deps=e,t.depsTail=n}function Hu(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(ny(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function ny(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Ro)||(t.globalVersion=Ro,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Hu(t))))return;t.flags|=2;const e=t.dep,n=vt,r=Un;vt=t,Un=!0;try{ey(t);const s=t.fn(t._value);(e.version===0||Qr(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(s){throw e.version++,s}finally{vt=n,Un=r,ty(t),t.flags&=-3}}function Bd(t,e=!1){const{dep:n,prevSub:r,nextSub:s}=t;if(r&&(r.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)Bd(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function s0(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let Un=!0;const ry=[];function Ir(){ry.push(Un),Un=!1}function Er(){const t=ry.pop();Un=t===void 0?!0:t}function fh(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=vt;vt=void 0;try{e()}finally{vt=n}}}let Ro=0;class i0{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class jd{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!vt||!Un||vt===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==vt)n=this.activeLink=new i0(vt,this),vt.deps?(n.prevDep=vt.depsTail,vt.depsTail.nextDep=n,vt.depsTail=n):vt.deps=vt.depsTail=n,sy(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=vt.depsTail,n.nextDep=void 0,vt.depsTail.nextDep=n,vt.depsTail=n,vt.deps===n&&(vt.deps=r)}return n}trigger(e){this.version++,Ro++,this.notify(e)}notify(e){Fd();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Ld()}}}function sy(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)sy(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const _l=new WeakMap,$s=Symbol(""),Ku=Symbol(""),$o=Symbol("");function sn(t,e,n){if(Un&&vt){let r=_l.get(t);r||_l.set(t,r=new Map);let s=r.get(n);s||(r.set(n,s=new jd),s.map=r,s.key=n),s.track()}}function Sr(t,e,n,r,s,i){const o=_l.get(t);if(!o){Ro++;return}const a=l=>{l&&l.trigger()};if(Fd(),e==="clear")o.forEach(a);else{const l=ze(t),c=l&&Rd(n);if(l&&n==="length"){const u=Number(r);o.forEach((f,p)=>{(p==="length"||p===$o||!Wn(p)&&p>=u)&&a(f)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),c&&a(o.get($o)),e){case"add":l?c&&a(o.get("length")):(a(o.get($s)),mi(t)&&a(o.get(Ku)));break;case"delete":l||(a(o.get($s)),mi(t)&&a(o.get(Ku)));break;case"set":mi(t)&&a(o.get($s));break}}Ld()}function o0(t,e){const n=_l.get(t);return n&&n.get(e)}function si(t){const e=tt(t);return e===t?e:(sn(e,"iterate",$o),zn(t)?e:e.map(Gt))}function Zl(t){return sn(t=tt(t),"iterate",$o),t}const a0={__proto__:null,[Symbol.iterator](){return su(this,Symbol.iterator,Gt)},concat(...t){return si(this).concat(...t.map(e=>ze(e)?si(e):e))},entries(){return su(this,"entries",t=>(t[1]=Gt(t[1]),t))},every(t,e){return hr(this,"every",t,e,void 0,arguments)},filter(t,e){return hr(this,"filter",t,e,n=>n.map(Gt),arguments)},find(t,e){return hr(this,"find",t,e,Gt,arguments)},findIndex(t,e){return hr(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return hr(this,"findLast",t,e,Gt,arguments)},findLastIndex(t,e){return hr(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return hr(this,"forEach",t,e,void 0,arguments)},includes(...t){return iu(this,"includes",t)},indexOf(...t){return iu(this,"indexOf",t)},join(t){return si(this).join(t)},lastIndexOf(...t){return iu(this,"lastIndexOf",t)},map(t,e){return hr(this,"map",t,e,void 0,arguments)},pop(){return Gi(this,"pop")},push(...t){return Gi(this,"push",t)},reduce(t,...e){return hh(this,"reduce",t,e)},reduceRight(t,...e){return hh(this,"reduceRight",t,e)},shift(){return Gi(this,"shift")},some(t,e){return hr(this,"some",t,e,void 0,arguments)},splice(...t){return Gi(this,"splice",t)},toReversed(){return si(this).toReversed()},toSorted(t){return si(this).toSorted(t)},toSpliced(...t){return si(this).toSpliced(...t)},unshift(...t){return Gi(this,"unshift",t)},values(){return su(this,"values",Gt)}};function su(t,e,n){const r=Zl(t),s=r[e]();return r!==t&&!zn(t)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.value&&(i.value=n(i.value)),i}),s}const l0=Array.prototype;function hr(t,e,n,r,s,i){const o=Zl(t),a=o!==t&&!zn(t),l=o[e];if(l!==l0[e]){const f=l.apply(t,i);return a?Gt(f):f}let c=n;o!==t&&(a?c=function(f,p){return n.call(this,Gt(f),p,t)}:n.length>2&&(c=function(f,p){return n.call(this,f,p,t)}));const u=l.call(o,c,r);return a&&s?s(u):u}function hh(t,e,n,r){const s=Zl(t);let i=n;return s!==t&&(zn(t)?n.length>3&&(i=function(o,a,l){return n.call(this,o,a,l,t)}):i=function(o,a,l){return n.call(this,o,Gt(a),l,t)}),s[e](i,...r)}function iu(t,e,n){const r=tt(t);sn(r,"iterate",$o);const s=r[e](...n);return(s===-1||s===!1)&&Jo(n[0])?(n[0]=tt(n[0]),r[e](...n)):s}function Gi(t,e,n=[]){Ir(),Fd();const r=tt(t)[e].apply(t,n);return Ld(),Er(),r}const c0=Md("__proto__,__v_isRef,__isVue"),iy=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Wn));function u0(t){Wn(t)||(t=String(t));const e=tt(this);return sn(e,"has",t),e.hasOwnProperty(t)}class oy{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?_0:uy:i?cy:ly).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=ze(e);if(!s){let l;if(o&&(l=a0[n]))return l;if(n==="hasOwnProperty")return u0}const a=Reflect.get(e,n,Rt(e)?e:r);return(Wn(n)?iy.has(n):c0(n))||(s||sn(e,"get",n),i)?a:Rt(a)?o&&Rd(n)?a:a.value:yt(a)?s?fy(a):Us(a):a}}class ay extends oy{constructor(e=!1){super(!1,e)}set(e,n,r,s){let i=e[n];if(!this._isShallow){const l=rs(i);if(!zn(r)&&!rs(r)&&(i=tt(i),r=tt(r)),!ze(e)&&Rt(i)&&!Rt(r))return l||(i.value=r),!0}const o=ze(e)&&Rd(n)?Number(n)<e.length:ft(e,n),a=Reflect.set(e,n,r,Rt(e)?e:s);return e===tt(s)&&(o?Qr(r,i)&&Sr(e,"set",n,r):Sr(e,"add",n,r)),a}deleteProperty(e,n){const r=ft(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&Sr(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!Wn(n)||!iy.has(n))&&sn(e,"has",n),r}ownKeys(e){return sn(e,"iterate",ze(e)?"length":$s),Reflect.ownKeys(e)}}class d0 extends oy{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const f0=new ay,h0=new d0,p0=new ay(!0);const Yu=t=>t,$a=t=>Reflect.getPrototypeOf(t);function g0(t,e,n){return function(...r){const s=this.__v_raw,i=tt(s),o=mi(i),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=s[t](...r),u=n?Yu:e?wl:Gt;return!e&&sn(i,"iterate",l?Ku:$s),{next(){const{value:f,done:p}=c.next();return p?{value:f,done:p}:{value:a?[u(f[0]),u(f[1])]:u(f),done:p}},[Symbol.iterator](){return this}}}}function Fa(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function m0(t,e){const n={get(s){const i=this.__v_raw,o=tt(i),a=tt(s);t||(Qr(s,a)&&sn(o,"get",s),sn(o,"get",a));const{has:l}=$a(o),c=e?Yu:t?wl:Gt;if(l.call(o,s))return c(i.get(s));if(l.call(o,a))return c(i.get(a));i!==o&&i.get(s)},get size(){const s=this.__v_raw;return!t&&sn(tt(s),"iterate",$s),s.size},has(s){const i=this.__v_raw,o=tt(i),a=tt(s);return t||(Qr(s,a)&&sn(o,"has",s),sn(o,"has",a)),s===a?i.has(s):i.has(s)||i.has(a)},forEach(s,i){const o=this,a=o.__v_raw,l=tt(a),c=e?Yu:t?wl:Gt;return!t&&sn(l,"iterate",$s),a.forEach((u,f)=>s.call(i,c(u),c(f),o))}};return Bt(n,t?{add:Fa("add"),set:Fa("set"),delete:Fa("delete"),clear:Fa("clear")}:{add(s){!e&&!zn(s)&&!rs(s)&&(s=tt(s));const i=tt(this);return $a(i).has.call(i,s)||(i.add(s),Sr(i,"add",s,s)),this},set(s,i){!e&&!zn(i)&&!rs(i)&&(i=tt(i));const o=tt(this),{has:a,get:l}=$a(o);let c=a.call(o,s);c||(s=tt(s),c=a.call(o,s));const u=l.call(o,s);return o.set(s,i),c?Qr(i,u)&&Sr(o,"set",s,i):Sr(o,"add",s,i),this},delete(s){const i=tt(this),{has:o,get:a}=$a(i);let l=o.call(i,s);l||(s=tt(s),l=o.call(i,s)),a&&a.call(i,s);const c=i.delete(s);return l&&Sr(i,"delete",s,void 0),c},clear(){const s=tt(this),i=s.size!==0,o=s.clear();return i&&Sr(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=g0(s,t,e)}),n}function Nd(t,e){const n=m0(t,e);return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(ft(n,s)&&s in r?n:r,s,i)}const y0={get:Nd(!1,!1)},v0={get:Nd(!1,!0)},b0={get:Nd(!0,!1)};const ly=new WeakMap,cy=new WeakMap,uy=new WeakMap,_0=new WeakMap;function w0(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function x0(t){return t.__v_skip||!Object.isExtensible(t)?0:w0(V_(t))}function Us(t){return rs(t)?t:zd(t,!1,f0,y0,ly)}function dy(t){return zd(t,!1,p0,v0,cy)}function fy(t){return zd(t,!0,h0,b0,uy)}function zd(t,e,n,r,s){if(!yt(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=x0(t);if(i===0)return t;const o=s.get(t);if(o)return o;const a=new Proxy(t,i===2?r:n);return s.set(t,a),a}function Jr(t){return rs(t)?Jr(t.__v_raw):!!(t&&t.__v_isReactive)}function rs(t){return!!(t&&t.__v_isReadonly)}function zn(t){return!!(t&&t.__v_isShallow)}function Jo(t){return t?!!t.__v_raw:!1}function tt(t){const e=t&&t.__v_raw;return e?tt(e):t}function qd(t){return!ft(t,"__v_skip")&&Object.isExtensible(t)&&Vm(t,"__v_skip",!0),t}const Gt=t=>yt(t)?Us(t):t,wl=t=>yt(t)?fy(t):t;function Rt(t){return t?t.__v_isRef===!0:!1}function pe(t){return hy(t,!1)}function ec(t){return hy(t,!0)}function hy(t,e){return Rt(t)?t:new k0(t,e)}class k0{constructor(e,n){this.dep=new jd,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:tt(e),this._value=n?e:Gt(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||zn(e)||rs(e);e=r?e:tt(e),Qr(e,n)&&(this._rawValue=e,this._value=r?e:Gt(e),this.dep.trigger())}}function $e(t){return Rt(t)?t.value:t}function ar(t){return Ye(t)?t():$e(t)}const C0={get:(t,e,n)=>e==="__v_raw"?t:$e(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return Rt(s)&&!Rt(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function py(t){return Jr(t)?t:new Proxy(t,C0)}function Ud(t){const e=ze(t)?new Array(t.length):{};for(const n in t)e[n]=P0(t,n);return e}class S0{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return o0(tt(this._object),this._key)}}function P0(t,e,n){const r=t[e];return Rt(r)?r:new S0(t,e,n)}class A0{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new jd(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ro-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&vt!==this)return Zm(this,!0),!0}get value(){const e=this.dep.track();return ny(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function I0(t,e,n=!1){let r,s;return Ye(t)?r=t:(r=t.get,s=t.set),new A0(r,s,n)}const La={},xl=new WeakMap;let As;function E0(t,e=!1,n=As){if(n){let r=xl.get(n);r||xl.set(n,r=[]),r.push(t)}}function O0(t,e,n=mt){const{immediate:r,deep:s,once:i,scheduler:o,augmentJob:a,call:l}=n,c=O=>s?O:zn(O)||s===!1||s===0?Pr(O,1):Pr(O);let u,f,p,g,v=!1,_=!1;if(Rt(t)?(f=()=>t.value,v=zn(t)):Jr(t)?(f=()=>c(t),v=!0):ze(t)?(_=!0,v=t.some(O=>Jr(O)||zn(O)),f=()=>t.map(O=>{if(Rt(O))return O.value;if(Jr(O))return c(O);if(Ye(O))return l?l(O,2):O()})):Ye(t)?e?f=l?()=>l(t,2):t:f=()=>{if(p){Ir();try{p()}finally{Er()}}const O=As;As=u;try{return l?l(t,3,[g]):t(g)}finally{As=O}}:f=or,e&&s){const O=f,F=s===!0?1/0:s;f=()=>Pr(O(),F)}const x=$d(),C=()=>{u.stop(),x&&x.active&&Dd(x.effects,u)};if(i&&e){const O=e;e=(...F)=>{O(...F),C()}}let S=_?new Array(t.length).fill(La):La;const A=O=>{if(!(!(u.flags&1)||!u.dirty&&!O))if(e){const F=u.run();if(s||v||(_?F.some((M,D)=>Qr(M,S[D])):Qr(F,S))){p&&p();const M=As;As=u;try{const D=[F,S===La?void 0:_&&S[0]===La?[]:S,g];S=F,l?l(e,3,D):e(...D)}finally{As=M}}}else u.run()};return a&&a(A),u=new Qm(f),u.scheduler=o?()=>o(A,!1):A,g=O=>E0(O,!1,u),p=u.onStop=()=>{const O=xl.get(u);if(O){if(l)l(O,4);else for(const F of O)F();xl.delete(u)}},e?r?A(!0):S=u.run():o?o(A.bind(null,!0),!0):u.run(),C.pause=u.pause.bind(u),C.resume=u.resume.bind(u),C.stop=C,C}function Pr(t,e=1/0,n){if(e<=0||!yt(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,Rt(t))Pr(t.value,e,n);else if(ze(t))for(let r=0;r<t.length;r++)Pr(t[r],e,n);else if(Kl(t)||mi(t))t.forEach(r=>{Pr(r,e,n)});else if(Wm(t)){for(const r in t)Pr(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Pr(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Zo(t,e,n,r){try{return r?t(...r):t()}catch(s){tc(s,e,n)}}function Vn(t,e,n,r){if(Ye(t)){const s=Zo(t,e,n,r);return s&&qm(s)&&s.catch(i=>{tc(i,e,n)}),s}if(ze(t)){const s=[];for(let i=0;i<t.length;i++)s.push(Vn(t[i],e,n,r));return s}}function tc(t,e,n,r=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||mt;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const u=a.ec;if(u){for(let f=0;f<u.length;f++)if(u[f](t,l,c)===!1)return}a=a.parent}if(i){Ir(),Zo(i,null,10,[t,l,c]),Er();return}}M0(t,n,s,r,o)}function M0(t,e,n,r=!0,s=!1){if(s)throw t;console.error(t)}const pn=[];let nr=-1;const yi=[];let Hr=null,ci=0;const gy=Promise.resolve();let kl=null;function ln(t){const e=kl||gy;return t?e.then(this?t.bind(this):t):e}function T0(t){let e=nr+1,n=pn.length;for(;e<n;){const r=e+n>>>1,s=pn[r],i=Fo(s);i<t||i===t&&s.flags&2?e=r+1:n=r}return e}function Wd(t){if(!(t.flags&1)){const e=Fo(t),n=pn[pn.length-1];!n||!(t.flags&2)&&e>=Fo(n)?pn.push(t):pn.splice(T0(e),0,t),t.flags|=1,my()}}function my(){kl||(kl=gy.then(vy))}function D0(t){ze(t)?yi.push(...t):Hr&&t.id===-1?Hr.splice(ci+1,0,t):t.flags&1||(yi.push(t),t.flags|=1),my()}function ph(t,e,n=nr+1){for(;n<pn.length;n++){const r=pn[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;pn.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function yy(t){if(yi.length){const e=[...new Set(yi)].sort((n,r)=>Fo(n)-Fo(r));if(yi.length=0,Hr){Hr.push(...e);return}for(Hr=e,ci=0;ci<Hr.length;ci++){const n=Hr[ci];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Hr=null,ci=0}}const Fo=t=>t.id==null?t.flags&2?-1:1/0:t.id;function vy(t){try{for(nr=0;nr<pn.length;nr++){const e=pn[nr];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Zo(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;nr<pn.length;nr++){const e=pn[nr];e&&(e.flags&=-2)}nr=-1,pn.length=0,yy(),kl=null,(pn.length||yi.length)&&vy()}}let Xt=null,by=null;function Cl(t){const e=Xt;return Xt=t,by=t&&t.type.__scopeId||null,e}function at(t,e=Xt,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&Ah(-1);const i=Cl(e);let o;try{o=t(...s)}finally{Cl(i),r._d&&Ah(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Fs(t,e){if(Xt===null)return t;const n=oc(Xt),r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,o,a,l=mt]=e[s];i&&(Ye(i)&&(i={mounted:i,updated:i}),i.deep&&Pr(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function gs(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let l=a.dir[r];l&&(Ir(),Vn(l,n,8,[t.el,a,t,e]),Er())}}const _y=Symbol("_vte"),R0=t=>t.__isTeleport,wo=t=>t&&(t.disabled||t.disabled===""),gh=t=>t&&(t.defer||t.defer===""),mh=t=>typeof SVGElement<"u"&&t instanceof SVGElement,yh=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,Gu=(t,e)=>{const n=t&&t.to;return It(n)?e?e(n):null:n},wy={name:"Teleport",__isTeleport:!0,process(t,e,n,r,s,i,o,a,l,c){const{mc:u,pc:f,pbc:p,o:{insert:g,querySelector:v,createText:_,createComment:x}}=c,C=wo(e.props);let{shapeFlag:S,children:A,dynamicChildren:O}=e;if(t==null){const F=e.el=_(""),M=e.anchor=_("");g(F,n,r),g(M,n,r);const D=(P,Z)=>{S&16&&(s&&s.isCE&&(s.ce._teleportTarget=P),u(A,P,Z,s,i,o,a,l))},B=()=>{const P=e.target=Gu(e.props,v),Z=xy(P,e,_,g);P&&(o!=="svg"&&mh(P)?o="svg":o!=="mathml"&&yh(P)&&(o="mathml"),C||(D(P,Z),ll(e,!1)))};C&&(D(n,M),ll(e,!0)),gh(e.props)?(e.el.__isMounted=!1,hn(()=>{B(),delete e.el.__isMounted},i)):B()}else{if(gh(e.props)&&t.el.__isMounted===!1){hn(()=>{wy.process(t,e,n,r,s,i,o,a,l,c)},i);return}e.el=t.el,e.targetStart=t.targetStart;const F=e.anchor=t.anchor,M=e.target=t.target,D=e.targetAnchor=t.targetAnchor,B=wo(t.props),P=B?n:M,Z=B?F:D;if(o==="svg"||mh(M)?o="svg":(o==="mathml"||yh(M))&&(o="mathml"),O?(p(t.dynamicChildren,O,P,s,i,o,a),Kd(t,e,!0)):l||f(t,e,P,Z,s,i,o,a,!1),C)B?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):Ba(e,n,F,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const Y=e.target=Gu(e.props,v);Y&&Ba(e,Y,null,c,0)}else B&&Ba(e,M,D,c,1);ll(e,C)}},remove(t,e,n,{um:r,o:{remove:s}},i){const{shapeFlag:o,children:a,anchor:l,targetStart:c,targetAnchor:u,target:f,props:p}=t;if(f&&(s(c),s(u)),i&&s(l),o&16){const g=i||!wo(p);for(let v=0;v<a.length;v++){const _=a[v];r(_,e,n,g,!!_.dynamicChildren)}}},move:Ba,hydrate:$0};function Ba(t,e,n,{o:{insert:r},m:s},i=2){i===0&&r(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:c,props:u}=t,f=i===2;if(f&&r(o,e,n),(!f||wo(u))&&l&16)for(let p=0;p<c.length;p++)s(c[p],e,n,2);f&&r(a,e,n)}function $0(t,e,n,r,s,i,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:c,createText:u}},f){const p=e.target=Gu(e.props,l);if(p){const g=wo(e.props),v=p._lpa||p.firstChild;if(e.shapeFlag&16)if(g)e.anchor=f(o(t),e,a(t),n,r,s,i),e.targetStart=v,e.targetAnchor=v&&o(v);else{e.anchor=o(t);let _=v;for(;_;){if(_&&_.nodeType===8){if(_.data==="teleport start anchor")e.targetStart=_;else if(_.data==="teleport anchor"){e.targetAnchor=_,p._lpa=e.targetAnchor&&o(e.targetAnchor);break}}_=o(_)}e.targetAnchor||xy(p,e,u,c),f(v&&o(v),e,p,n,r,s,i)}ll(e,g)}return e.anchor&&o(e.anchor)}const F0=wy;function ll(t,e){const n=t.ctx;if(n&&n.ut){let r,s;for(e?(r=t.el,s=t.anchor):(r=t.targetStart,s=t.targetAnchor);r&&r!==s;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function xy(t,e,n,r){const s=e.targetStart=n(""),i=e.targetAnchor=n("");return s[_y]=i,t&&(r(s,t),r(i,t)),i}const Is=Symbol("_leaveCb"),ja=Symbol("_enterCb");function L0(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Mn(()=>{t.isMounted=!0}),rc(()=>{t.isUnmounting=!0}),t}const Dn=[Function,Array],B0={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Dn,onEnter:Dn,onAfterEnter:Dn,onEnterCancelled:Dn,onBeforeLeave:Dn,onLeave:Dn,onAfterLeave:Dn,onLeaveCancelled:Dn,onBeforeAppear:Dn,onAppear:Dn,onAfterAppear:Dn,onAppearCancelled:Dn};function j0(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function Xu(t,e,n,r,s){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:u,onEnterCancelled:f,onBeforeLeave:p,onLeave:g,onAfterLeave:v,onLeaveCancelled:_,onBeforeAppear:x,onAppear:C,onAfterAppear:S,onAppearCancelled:A}=e,O=String(t.key),F=j0(n,t),M=(P,Z)=>{P&&Vn(P,r,9,Z)},D=(P,Z)=>{const Y=Z[1];M(P,Z),ze(P)?P.every(z=>z.length<=1)&&Y():P.length<=1&&Y()},B={mode:o,persisted:a,beforeEnter(P){let Z=l;if(!n.isMounted)if(i)Z=x||l;else return;P[Is]&&P[Is](!0);const Y=F[O];Y&&ui(t,Y)&&Y.el[Is]&&Y.el[Is](),M(Z,[P])},enter(P){let Z=c,Y=u,z=f;if(!n.isMounted)if(i)Z=C||c,Y=S||u,z=A||f;else return;let fe=!1;const me=P[ja]=Ae=>{fe||(fe=!0,Ae?M(z,[P]):M(Y,[P]),B.delayedLeave&&B.delayedLeave(),P[ja]=void 0)};Z?D(Z,[P,me]):me()},leave(P,Z){const Y=String(t.key);if(P[ja]&&P[ja](!0),n.isUnmounting)return Z();M(p,[P]);let z=!1;const fe=P[Is]=me=>{z||(z=!0,Z(),me?M(_,[P]):M(v,[P]),P[Is]=void 0,F[Y]===t&&delete F[Y])};F[Y]=t,g?D(g,[P,fe]):fe()},clone(P){return Xu(P,e,n,r)}};return B}function Lo(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Lo(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function ky(t,e=!1,n){let r=[],s=0;for(let i=0;i<t.length;i++){let o=t[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===et?(o.patchFlag&128&&s++,r=r.concat(ky(o.children,e,a))):(e||o.type!==Hn)&&r.push(a!=null?ss(o,{key:a}):o)}if(s>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function Ze(t,e){return Ye(t)?Bt({name:t.name},e,{setup:t}):t}function N0(){const t=cr();return t?(t.appContext.config.idPrefix||"v")+"-"+t.ids[0]+t.ids[1]++:""}function Cy(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function xo(t,e,n,r,s=!1){if(ze(t)){t.forEach((v,_)=>xo(v,e&&(ze(e)?e[_]:e),n,r,s));return}if(vi(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&xo(t,e,n,r.component.subTree);return}const i=r.shapeFlag&4?oc(r.component):r.el,o=s?null:i,{i:a,r:l}=t,c=e&&e.r,u=a.refs===mt?a.refs={}:a.refs,f=a.setupState,p=tt(f),g=f===mt?zm:v=>ft(p,v);if(c!=null&&c!==l){if(It(c))u[c]=null,g(c)&&(f[c]=null);else if(Rt(c)){c.value=null;const v=e;v.k&&(u[v.k]=null)}}if(Ye(l))Zo(l,a,12,[o,u]);else{const v=It(l),_=Rt(l);if(v||_){const x=()=>{if(t.f){const C=v?g(l)?f[l]:u[l]:l.value;if(s)ze(C)&&Dd(C,i);else if(ze(C))C.includes(i)||C.push(i);else if(v)u[l]=[i],g(l)&&(f[l]=u[l]);else{const S=[i];l.value=S,t.k&&(u[t.k]=S)}}else v?(u[l]=o,g(l)&&(f[l]=o)):_&&(l.value=o,t.k&&(u[t.k]=o))};o?(x.id=-1,hn(x,n)):x()}}}Xl().requestIdleCallback;Xl().cancelIdleCallback;const vi=t=>!!t.type.__asyncLoader,Sy=t=>t.type.__isKeepAlive;function z0(t,e){Py(t,"a",e)}function q0(t,e){Py(t,"da",e)}function Py(t,e,n=on){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(nc(e,r,n),n){let s=n.parent;for(;s&&s.parent;)Sy(s.parent.vnode)&&U0(r,e,n,s),s=s.parent}}function U0(t,e,n,r){const s=nc(e,t,r,!0);$i(()=>{Dd(r[e],s)},n)}function nc(t,e,n=on,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{Ir();const a=ea(n),l=Vn(e,n,t,o);return a(),Er(),l});return r?s.unshift(i):s.push(i),i}}const Mr=t=>(e,n=on)=>{(!No||t==="sp")&&nc(t,(...r)=>e(...r),n)},W0=Mr("bm"),Mn=Mr("m"),V0=Mr("bu"),Ay=Mr("u"),rc=Mr("bum"),$i=Mr("um"),H0=Mr("sp"),K0=Mr("rtg"),Y0=Mr("rtc");function G0(t,e=on){nc("ec",t,e)}const X0="components";function Ci(t,e){return J0(X0,t,!0,e)||t}const Q0=Symbol.for("v-ndc");function J0(t,e,n=!0,r=!1){const s=Xt||on;if(s){const i=s.type;{const a=Lw(i,!1);if(a&&(a===e||a===En(e)||a===Gl(En(e))))return i}const o=vh(s[t]||i[t],e)||vh(s.appContext[t],e);return!o&&r?i:o}}function vh(t,e){return t&&(t[e]||t[En(e)]||t[Gl(En(e))])}function Ft(t,e,n,r){let s;const i=n,o=ze(t);if(o||It(t)){const a=o&&Jr(t);let l=!1,c=!1;a&&(l=!zn(t),c=rs(t),t=Zl(t)),s=new Array(t.length);for(let u=0,f=t.length;u<f;u++)s[u]=e(l?c?wl(Gt(t[u])):Gt(t[u]):t[u],u,void 0,i)}else if(typeof t=="number"){s=new Array(t);for(let a=0;a<t;a++)s[a]=e(a+1,a,void 0,i)}else if(yt(t))if(t[Symbol.iterator])s=Array.from(t,(a,l)=>e(a,l,void 0,i));else{const a=Object.keys(t);s=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const u=a[l];s[l]=e(t[u],u,l,i)}}else s=[];return s}function _n(t,e,n={},r,s){if(Xt.ce||Xt.parent&&vi(Xt.parent)&&Xt.parent.ce)return U(),Jt(et,null,[Ue("slot",n,r)],64);let i=t[e];i&&i._c&&(i._d=!1),U();const o=i&&Iy(i(n)),a=n.key||o&&o.key,l=Jt(et,{key:(a&&!Wn(a)?a:`_${e}`)+(!o&&r?"_fb":"")},o||[],o&&t._===1?64:-2);return l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),i&&i._c&&(i._d=!0),l}function Iy(t){return t.some(e=>jo(e)?!(e.type===Hn||e.type===et&&!Iy(e.children)):!0)?t:null}const Qu=t=>t?Yy(t)?oc(t):Qu(t.parent):null,ko=Bt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Qu(t.parent),$root:t=>Qu(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Oy(t),$forceUpdate:t=>t.f||(t.f=()=>{Wd(t.update)}),$nextTick:t=>t.n||(t.n=ln.bind(t.proxy)),$watch:t=>_w.bind(t)}),ou=(t,e)=>t!==mt&&!t.__isScriptSetup&&ft(t,e),Z0={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const g=o[e];if(g!==void 0)switch(g){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(ou(r,e))return o[e]=1,r[e];if(s!==mt&&ft(s,e))return o[e]=2,s[e];if((c=t.propsOptions[0])&&ft(c,e))return o[e]=3,i[e];if(n!==mt&&ft(n,e))return o[e]=4,n[e];Ju&&(o[e]=0)}}const u=ko[e];let f,p;if(u)return e==="$attrs"&&sn(t.attrs,"get",""),u(t);if((f=a.__cssModules)&&(f=f[e]))return f;if(n!==mt&&ft(n,e))return o[e]=4,n[e];if(p=l.config.globalProperties,ft(p,e))return p[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return ou(s,e)?(s[e]=n,!0):r!==mt&&ft(r,e)?(r[e]=n,!0):ft(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:i,type:o}},a){let l,c;return!!(n[a]||t!==mt&&a[0]!=="$"&&ft(t,a)||ou(e,a)||(l=i[0])&&ft(l,a)||ft(r,a)||ft(ko,a)||ft(s.config.globalProperties,a)||(c=o.__cssModules)&&c[a])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:ft(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function bh(t){return ze(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Ju=!0;function ew(t){const e=Oy(t),n=t.proxy,r=t.ctx;Ju=!1,e.beforeCreate&&_h(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:f,mounted:p,beforeUpdate:g,updated:v,activated:_,deactivated:x,beforeDestroy:C,beforeUnmount:S,destroyed:A,unmounted:O,render:F,renderTracked:M,renderTriggered:D,errorCaptured:B,serverPrefetch:P,expose:Z,inheritAttrs:Y,components:z,directives:fe,filters:me}=e;if(c&&tw(c,r,null),o)for(const Pe in o){const te=o[Pe];Ye(te)&&(r[Pe]=te.bind(n))}if(s){const Pe=s.call(n,n);yt(Pe)&&(t.data=Us(Pe))}if(Ju=!0,i)for(const Pe in i){const te=i[Pe],ee=Ye(te)?te.bind(n,n):Ye(te.get)?te.get.bind(n,n):or,G=!Ye(te)&&Ye(te.set)?te.set.bind(n):or,Le=Ve({get:ee,set:G});Object.defineProperty(r,Pe,{enumerable:!0,configurable:!0,get:()=>Le.value,set:we=>Le.value=we})}if(a)for(const Pe in a)Ey(a[Pe],r,n,Pe);if(l){const Pe=Ye(l)?l.call(n):l;Reflect.ownKeys(Pe).forEach(te=>{Co(te,Pe[te])})}u&&_h(u,t,"c");function Ce(Pe,te){ze(te)?te.forEach(ee=>Pe(ee.bind(n))):te&&Pe(te.bind(n))}if(Ce(W0,f),Ce(Mn,p),Ce(V0,g),Ce(Ay,v),Ce(z0,_),Ce(q0,x),Ce(G0,B),Ce(Y0,M),Ce(K0,D),Ce(rc,S),Ce($i,O),Ce(H0,P),ze(Z))if(Z.length){const Pe=t.exposed||(t.exposed={});Z.forEach(te=>{Object.defineProperty(Pe,te,{get:()=>n[te],set:ee=>n[te]=ee,enumerable:!0})})}else t.exposed||(t.exposed={});F&&t.render===or&&(t.render=F),Y!=null&&(t.inheritAttrs=Y),z&&(t.components=z),fe&&(t.directives=fe),P&&Cy(t)}function tw(t,e,n=or){ze(t)&&(t=Zu(t));for(const r in t){const s=t[r];let i;yt(s)?"default"in s?i=In(s.from||r,s.default,!0):i=In(s.from||r):i=In(s),Rt(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function _h(t,e,n){Vn(ze(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function Ey(t,e,n,r){let s=r.includes(".")?zy(n,r):()=>n[r];if(It(t)){const i=e[t];Ye(i)&&Ht(s,i)}else if(Ye(t))Ht(s,t.bind(n));else if(yt(t))if(ze(t))t.forEach(i=>Ey(i,e,n,r));else{const i=Ye(t.handler)?t.handler.bind(n):e[t.handler];Ye(i)&&Ht(s,i,t)}}function Oy(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let l;return a?l=a:!s.length&&!n&&!r?l=e:(l={},s.length&&s.forEach(c=>Sl(l,c,o,!0)),Sl(l,e,o)),yt(e)&&i.set(e,l),l}function Sl(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&Sl(t,i,n,!0),s&&s.forEach(o=>Sl(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=nw[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const nw={data:wh,props:xh,emits:xh,methods:fo,computed:fo,beforeCreate:fn,created:fn,beforeMount:fn,mounted:fn,beforeUpdate:fn,updated:fn,beforeDestroy:fn,beforeUnmount:fn,destroyed:fn,unmounted:fn,activated:fn,deactivated:fn,errorCaptured:fn,serverPrefetch:fn,components:fo,directives:fo,watch:sw,provide:wh,inject:rw};function wh(t,e){return e?t?function(){return Bt(Ye(t)?t.call(this,this):t,Ye(e)?e.call(this,this):e)}:e:t}function rw(t,e){return fo(Zu(t),Zu(e))}function Zu(t){if(ze(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function fn(t,e){return t?[...new Set([].concat(t,e))]:e}function fo(t,e){return t?Bt(Object.create(null),t,e):e}function xh(t,e){return t?ze(t)&&ze(e)?[...new Set([...t,...e])]:Bt(Object.create(null),bh(t),bh(e??{})):e}function sw(t,e){if(!t)return e;if(!e)return t;const n=Bt(Object.create(null),t);for(const r in e)n[r]=fn(t[r],e[r]);return n}function My(){return{app:null,config:{isNativeTag:zm,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let iw=0;function ow(t,e){return function(r,s=null){Ye(r)||(r=Bt({},r)),s!=null&&!yt(s)&&(s=null);const i=My(),o=new WeakSet,a=[];let l=!1;const c=i.app={_uid:iw++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:Xy,get config(){return i.config},set config(u){},use(u,...f){return o.has(u)||(u&&Ye(u.install)?(o.add(u),u.install(c,...f)):Ye(u)&&(o.add(u),u(c,...f))),c},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),c},component(u,f){return f?(i.components[u]=f,c):i.components[u]},directive(u,f){return f?(i.directives[u]=f,c):i.directives[u]},mount(u,f,p){if(!l){const g=c._ceVNode||Ue(r,s);return g.appContext=i,p===!0?p="svg":p===!1&&(p=void 0),t(g,u,p),l=!0,c._container=u,u.__vue_app__=c,oc(g.component)}},onUnmount(u){a.push(u)},unmount(){l&&(Vn(a,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(u,f){return i.provides[u]=f,c},runWithContext(u){const f=Ls;Ls=c;try{return u()}finally{Ls=f}}};return c}}let Ls=null;function Co(t,e){if(on){let n=on.provides;const r=on.parent&&on.parent.provides;r===n&&(n=on.provides=Object.create(r)),n[t]=e}}function In(t,e,n=!1){const r=cr();if(r||Ls){let s=Ls?Ls._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&Ye(e)?e.call(r&&r.proxy):e}}function aw(){return!!(cr()||Ls)}const Ty={},Dy=()=>Object.create(Ty),Ry=t=>Object.getPrototypeOf(t)===Ty;function lw(t,e,n,r=!1){const s={},i=Dy();t.propsDefaults=Object.create(null),$y(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:dy(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function cw(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,a=tt(s),[l]=t.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let f=0;f<u.length;f++){let p=u[f];if(sc(t.emitsOptions,p))continue;const g=e[p];if(l)if(ft(i,p))g!==i[p]&&(i[p]=g,c=!0);else{const v=En(p);s[v]=ed(l,a,v,g,t,!1)}else g!==i[p]&&(i[p]=g,c=!0)}}}else{$y(t,e,s,i)&&(c=!0);let u;for(const f in a)(!e||!ft(e,f)&&((u=os(f))===f||!ft(e,u)))&&(l?n&&(n[f]!==void 0||n[u]!==void 0)&&(s[f]=ed(l,a,f,void 0,t,!0)):delete s[f]);if(i!==a)for(const f in i)(!e||!ft(e,f))&&(delete i[f],c=!0)}c&&Sr(t.attrs,"set","")}function $y(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(vo(l))continue;const c=e[l];let u;s&&ft(s,u=En(l))?!i||!i.includes(u)?n[u]=c:(a||(a={}))[u]=c:sc(t.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(i){const l=tt(n),c=a||mt;for(let u=0;u<i.length;u++){const f=i[u];n[f]=ed(s,l,f,c[f],t,!ft(c,f))}}return o}function ed(t,e,n,r,s,i){const o=t[n];if(o!=null){const a=ft(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Ye(l)){const{propsDefaults:c}=s;if(n in c)r=c[n];else{const u=ea(s);r=c[n]=l.call(null,e),u()}}else r=l;s.ce&&s.ce._setProp(n,r)}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===os(n))&&(r=!0))}return r}const uw=new WeakMap;function Fy(t,e,n=!1){const r=n?uw:e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},a=[];let l=!1;if(!Ye(t)){const u=f=>{l=!0;const[p,g]=Fy(f,e,!0);Bt(o,p),g&&a.push(...g)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!i&&!l)return yt(t)&&r.set(t,gi),gi;if(ze(i))for(let u=0;u<i.length;u++){const f=En(i[u]);kh(f)&&(o[f]=mt)}else if(i)for(const u in i){const f=En(u);if(kh(f)){const p=i[u],g=o[f]=ze(p)||Ye(p)?{type:p}:Bt({},p),v=g.type;let _=!1,x=!0;if(ze(v))for(let C=0;C<v.length;++C){const S=v[C],A=Ye(S)&&S.name;if(A==="Boolean"){_=!0;break}else A==="String"&&(x=!1)}else _=Ye(v)&&v.name==="Boolean";g[0]=_,g[1]=x,(_||ft(g,"default"))&&a.push(f)}}const c=[o,a];return yt(t)&&r.set(t,c),c}function kh(t){return t[0]!=="$"&&!vo(t)}const Vd=t=>t==="_"||t==="_ctx"||t==="$stable",Hd=t=>ze(t)?t.map(ir):[ir(t)],dw=(t,e,n)=>{if(e._n)return e;const r=at((...s)=>Hd(e(...s)),n);return r._c=!1,r},Ly=(t,e,n)=>{const r=t._ctx;for(const s in t){if(Vd(s))continue;const i=t[s];if(Ye(i))e[s]=dw(s,i,r);else if(i!=null){const o=Hd(i);e[s]=()=>o}}},By=(t,e)=>{const n=Hd(e);t.slots.default=()=>n},jy=(t,e,n)=>{for(const r in e)(n||!Vd(r))&&(t[r]=e[r])},fw=(t,e,n)=>{const r=t.slots=Dy();if(t.vnode.shapeFlag&32){const s=e._;s?(jy(r,e,n),n&&Vm(r,"_",s,!0)):Ly(e,r)}else e&&By(t,e)},hw=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=mt;if(r.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:jy(s,e,n):(i=!e.$stable,Ly(e,s)),o=e}else e&&(By(t,e),o={default:1});if(i)for(const a in s)!Vd(a)&&o[a]==null&&delete s[a]},hn=Aw;function pw(t){return gw(t)}function gw(t,e){const n=Xl();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:f,nextSibling:p,setScopeId:g=or,insertStaticContent:v}=t,_=(E,$,Q,le=null,de=null,ce=null,Ie=void 0,xe=null,be=!!$.dynamicChildren)=>{if(E===$)return;E&&!ui(E,$)&&(le=ae(E),we(E,de,ce,!0),E=null),$.patchFlag===-2&&(be=!1,$.dynamicChildren=null);const{type:he,ref:Ne,shapeFlag:Ee}=$;switch(he){case ic:x(E,$,Q,le);break;case Hn:C(E,$,Q,le);break;case cl:E==null&&S($,Q,le,Ie);break;case et:z(E,$,Q,le,de,ce,Ie,xe,be);break;default:Ee&1?F(E,$,Q,le,de,ce,Ie,xe,be):Ee&6?fe(E,$,Q,le,de,ce,Ie,xe,be):(Ee&64||Ee&128)&&he.process(E,$,Q,le,de,ce,Ie,xe,be,Fe)}Ne!=null&&de?xo(Ne,E&&E.ref,ce,$||E,!$):Ne==null&&E&&E.ref!=null&&xo(E.ref,null,ce,E,!0)},x=(E,$,Q,le)=>{if(E==null)r($.el=a($.children),Q,le);else{const de=$.el=E.el;$.children!==E.children&&c(de,$.children)}},C=(E,$,Q,le)=>{E==null?r($.el=l($.children||""),Q,le):$.el=E.el},S=(E,$,Q,le)=>{[E.el,E.anchor]=v(E.children,$,Q,le,E.el,E.anchor)},A=({el:E,anchor:$},Q,le)=>{let de;for(;E&&E!==$;)de=p(E),r(E,Q,le),E=de;r($,Q,le)},O=({el:E,anchor:$})=>{let Q;for(;E&&E!==$;)Q=p(E),s(E),E=Q;s($)},F=(E,$,Q,le,de,ce,Ie,xe,be)=>{$.type==="svg"?Ie="svg":$.type==="math"&&(Ie="mathml"),E==null?M($,Q,le,de,ce,Ie,xe,be):P(E,$,de,ce,Ie,xe,be)},M=(E,$,Q,le,de,ce,Ie,xe)=>{let be,he;const{props:Ne,shapeFlag:Ee,transition:je,dirs:qe}=E;if(be=E.el=o(E.type,ce,Ne&&Ne.is,Ne),Ee&8?u(be,E.children):Ee&16&&B(E.children,be,null,le,de,au(E,ce),Ie,xe),qe&&gs(E,null,le,"created"),D(be,E,E.scopeId,Ie,le),Ne){for(const it in Ne)it!=="value"&&!vo(it)&&i(be,it,null,Ne[it],ce,le);"value"in Ne&&i(be,"value",null,Ne.value,ce),(he=Ne.onVnodeBeforeMount)&&Jn(he,le,E)}qe&&gs(E,null,le,"beforeMount");const Ge=mw(de,je);Ge&&je.beforeEnter(be),r(be,$,Q),((he=Ne&&Ne.onVnodeMounted)||Ge||qe)&&hn(()=>{he&&Jn(he,le,E),Ge&&je.enter(be),qe&&gs(E,null,le,"mounted")},de)},D=(E,$,Q,le,de)=>{if(Q&&g(E,Q),le)for(let ce=0;ce<le.length;ce++)g(E,le[ce]);if(de){let ce=de.subTree;if($===ce||Uy(ce.type)&&(ce.ssContent===$||ce.ssFallback===$)){const Ie=de.vnode;D(E,Ie,Ie.scopeId,Ie.slotScopeIds,de.parent)}}},B=(E,$,Q,le,de,ce,Ie,xe,be=0)=>{for(let he=be;he<E.length;he++){const Ne=E[he]=xe?Kr(E[he]):ir(E[he]);_(null,Ne,$,Q,le,de,ce,Ie,xe)}},P=(E,$,Q,le,de,ce,Ie)=>{const xe=$.el=E.el;let{patchFlag:be,dynamicChildren:he,dirs:Ne}=$;be|=E.patchFlag&16;const Ee=E.props||mt,je=$.props||mt;let qe;if(Q&&ms(Q,!1),(qe=je.onVnodeBeforeUpdate)&&Jn(qe,Q,$,E),Ne&&gs($,E,Q,"beforeUpdate"),Q&&ms(Q,!0),(Ee.innerHTML&&je.innerHTML==null||Ee.textContent&&je.textContent==null)&&u(xe,""),he?Z(E.dynamicChildren,he,xe,Q,le,au($,de),ce):Ie||te(E,$,xe,null,Q,le,au($,de),ce,!1),be>0){if(be&16)Y(xe,Ee,je,Q,de);else if(be&2&&Ee.class!==je.class&&i(xe,"class",null,je.class,de),be&4&&i(xe,"style",Ee.style,je.style,de),be&8){const Ge=$.dynamicProps;for(let it=0;it<Ge.length;it++){const lt=Ge[it],$t=Ee[lt],jt=je[lt];(jt!==$t||lt==="value")&&i(xe,lt,$t,jt,de,Q)}}be&1&&E.children!==$.children&&u(xe,$.children)}else!Ie&&he==null&&Y(xe,Ee,je,Q,de);((qe=je.onVnodeUpdated)||Ne)&&hn(()=>{qe&&Jn(qe,Q,$,E),Ne&&gs($,E,Q,"updated")},le)},Z=(E,$,Q,le,de,ce,Ie)=>{for(let xe=0;xe<$.length;xe++){const be=E[xe],he=$[xe],Ne=be.el&&(be.type===et||!ui(be,he)||be.shapeFlag&198)?f(be.el):Q;_(be,he,Ne,null,le,de,ce,Ie,!0)}},Y=(E,$,Q,le,de)=>{if($!==Q){if($!==mt)for(const ce in $)!vo(ce)&&!(ce in Q)&&i(E,ce,$[ce],null,de,le);for(const ce in Q){if(vo(ce))continue;const Ie=Q[ce],xe=$[ce];Ie!==xe&&ce!=="value"&&i(E,ce,xe,Ie,de,le)}"value"in Q&&i(E,"value",$.value,Q.value,de)}},z=(E,$,Q,le,de,ce,Ie,xe,be)=>{const he=$.el=E?E.el:a(""),Ne=$.anchor=E?E.anchor:a("");let{patchFlag:Ee,dynamicChildren:je,slotScopeIds:qe}=$;qe&&(xe=xe?xe.concat(qe):qe),E==null?(r(he,Q,le),r(Ne,Q,le),B($.children||[],Q,Ne,de,ce,Ie,xe,be)):Ee>0&&Ee&64&&je&&E.dynamicChildren?(Z(E.dynamicChildren,je,Q,de,ce,Ie,xe),($.key!=null||de&&$===de.subTree)&&Kd(E,$,!0)):te(E,$,Q,Ne,de,ce,Ie,xe,be)},fe=(E,$,Q,le,de,ce,Ie,xe,be)=>{$.slotScopeIds=xe,E==null?$.shapeFlag&512?de.ctx.activate($,Q,le,Ie,be):me($,Q,le,de,ce,Ie,be):Ae(E,$,be)},me=(E,$,Q,le,de,ce,Ie)=>{const xe=E.component=Tw(E,le,de);if(Sy(E)&&(xe.ctx.renderer=Fe),Dw(xe,!1,Ie),xe.asyncDep){if(de&&de.registerDep(xe,Ce,Ie),!E.el){const be=xe.subTree=Ue(Hn);C(null,be,$,Q),E.placeholder=be.el}}else Ce(xe,E,$,Q,de,ce,Ie)},Ae=(E,$,Q)=>{const le=$.component=E.component;if(Sw(E,$,Q))if(le.asyncDep&&!le.asyncResolved){Pe(le,$,Q);return}else le.next=$,le.update();else $.el=E.el,le.vnode=$},Ce=(E,$,Q,le,de,ce,Ie)=>{const xe=()=>{if(E.isMounted){let{next:Ee,bu:je,u:qe,parent:Ge,vnode:it}=E;{const Nt=Ny(E);if(Nt){Ee&&(Ee.el=it.el,Pe(E,Ee,Ie)),Nt.asyncDep.then(()=>{E.isUnmounted||xe()});return}}let lt=Ee,$t;ms(E,!1),Ee?(Ee.el=it.el,Pe(E,Ee,Ie)):Ee=it,je&&al(je),($t=Ee.props&&Ee.props.onVnodeBeforeUpdate)&&Jn($t,Ge,Ee,it),ms(E,!0);const jt=Sh(E),un=E.subTree;E.subTree=jt,_(un,jt,f(un.el),ae(un),E,de,ce),Ee.el=jt.el,lt===null&&Pw(E,jt.el),qe&&hn(qe,de),($t=Ee.props&&Ee.props.onVnodeUpdated)&&hn(()=>Jn($t,Ge,Ee,it),de)}else{let Ee;const{el:je,props:qe}=$,{bm:Ge,m:it,parent:lt,root:$t,type:jt}=E,un=vi($);ms(E,!1),Ge&&al(Ge),!un&&(Ee=qe&&qe.onVnodeBeforeMount)&&Jn(Ee,lt,$),ms(E,!0);{$t.ce&&$t.ce._def.shadowRoot!==!1&&$t.ce._injectChildStyle(jt);const Nt=E.subTree=Sh(E);_(null,Nt,Q,le,E,de,ce),$.el=Nt.el}if(it&&hn(it,de),!un&&(Ee=qe&&qe.onVnodeMounted)){const Nt=$;hn(()=>Jn(Ee,lt,Nt),de)}($.shapeFlag&256||lt&&vi(lt.vnode)&&lt.vnode.shapeFlag&256)&&E.a&&hn(E.a,de),E.isMounted=!0,$=Q=le=null}};E.scope.on();const be=E.effect=new Qm(xe);E.scope.off();const he=E.update=be.run.bind(be),Ne=E.job=be.runIfDirty.bind(be);Ne.i=E,Ne.id=E.uid,be.scheduler=()=>Wd(Ne),ms(E,!0),he()},Pe=(E,$,Q)=>{$.component=E;const le=E.vnode.props;E.vnode=$,E.next=null,cw(E,$.props,le,Q),hw(E,$.children,Q),Ir(),ph(E),Er()},te=(E,$,Q,le,de,ce,Ie,xe,be=!1)=>{const he=E&&E.children,Ne=E?E.shapeFlag:0,Ee=$.children,{patchFlag:je,shapeFlag:qe}=$;if(je>0){if(je&128){G(he,Ee,Q,le,de,ce,Ie,xe,be);return}else if(je&256){ee(he,Ee,Q,le,de,ce,Ie,xe,be);return}}qe&8?(Ne&16&&st(he,de,ce),Ee!==he&&u(Q,Ee)):Ne&16?qe&16?G(he,Ee,Q,le,de,ce,Ie,xe,be):st(he,de,ce,!0):(Ne&8&&u(Q,""),qe&16&&B(Ee,Q,le,de,ce,Ie,xe,be))},ee=(E,$,Q,le,de,ce,Ie,xe,be)=>{E=E||gi,$=$||gi;const he=E.length,Ne=$.length,Ee=Math.min(he,Ne);let je;for(je=0;je<Ee;je++){const qe=$[je]=be?Kr($[je]):ir($[je]);_(E[je],qe,Q,null,de,ce,Ie,xe,be)}he>Ne?st(E,de,ce,!0,!1,Ee):B($,Q,le,de,ce,Ie,xe,be,Ee)},G=(E,$,Q,le,de,ce,Ie,xe,be)=>{let he=0;const Ne=$.length;let Ee=E.length-1,je=Ne-1;for(;he<=Ee&&he<=je;){const qe=E[he],Ge=$[he]=be?Kr($[he]):ir($[he]);if(ui(qe,Ge))_(qe,Ge,Q,null,de,ce,Ie,xe,be);else break;he++}for(;he<=Ee&&he<=je;){const qe=E[Ee],Ge=$[je]=be?Kr($[je]):ir($[je]);if(ui(qe,Ge))_(qe,Ge,Q,null,de,ce,Ie,xe,be);else break;Ee--,je--}if(he>Ee){if(he<=je){const qe=je+1,Ge=qe<Ne?$[qe].el:le;for(;he<=je;)_(null,$[he]=be?Kr($[he]):ir($[he]),Q,Ge,de,ce,Ie,xe,be),he++}}else if(he>je)for(;he<=Ee;)we(E[he],de,ce,!0),he++;else{const qe=he,Ge=he,it=new Map;for(he=Ge;he<=je;he++){const Et=$[he]=be?Kr($[he]):ir($[he]);Et.key!=null&&it.set(Et.key,he)}let lt,$t=0;const jt=je-Ge+1;let un=!1,Nt=0;const Yn=new Array(jt);for(he=0;he<jt;he++)Yn[he]=0;for(he=qe;he<=Ee;he++){const Et=E[he];if($t>=jt){we(Et,de,ce,!0);continue}let Re;if(Et.key!=null)Re=it.get(Et.key);else for(lt=Ge;lt<=je;lt++)if(Yn[lt-Ge]===0&&ui(Et,$[lt])){Re=lt;break}Re===void 0?we(Et,de,ce,!0):(Yn[Re-Ge]=he+1,Re>=Nt?Nt=Re:un=!0,_(Et,$[Re],Q,null,de,ce,Ie,xe,be),$t++)}const Gs=un?yw(Yn):gi;for(lt=Gs.length-1,he=jt-1;he>=0;he--){const Et=Ge+he,Re=$[Et],Tr=$[Et+1],Gn=Et+1<Ne?Tr.el||Tr.placeholder:le;Yn[he]===0?_(null,Re,Q,Gn,de,ce,Ie,xe,be):un&&(lt<0||he!==Gs[lt]?Le(Re,Q,Gn,2):lt--)}}},Le=(E,$,Q,le,de=null)=>{const{el:ce,type:Ie,transition:xe,children:be,shapeFlag:he}=E;if(he&6){Le(E.component.subTree,$,Q,le);return}if(he&128){E.suspense.move($,Q,le);return}if(he&64){Ie.move(E,$,Q,Fe);return}if(Ie===et){r(ce,$,Q);for(let Ee=0;Ee<be.length;Ee++)Le(be[Ee],$,Q,le);r(E.anchor,$,Q);return}if(Ie===cl){A(E,$,Q);return}if(le!==2&&he&1&&xe)if(le===0)xe.beforeEnter(ce),r(ce,$,Q),hn(()=>xe.enter(ce),de);else{const{leave:Ee,delayLeave:je,afterLeave:qe}=xe,Ge=()=>{E.ctx.isUnmounted?s(ce):r(ce,$,Q)},it=()=>{ce._isLeaving&&ce[Is](!0),Ee(ce,()=>{Ge(),qe&&qe()})};je?je(ce,Ge,it):it()}else r(ce,$,Q)},we=(E,$,Q,le=!1,de=!1)=>{const{type:ce,props:Ie,ref:xe,children:be,dynamicChildren:he,shapeFlag:Ne,patchFlag:Ee,dirs:je,cacheIndex:qe}=E;if(Ee===-2&&(de=!1),xe!=null&&(Ir(),xo(xe,null,Q,E,!0),Er()),qe!=null&&($.renderCache[qe]=void 0),Ne&256){$.ctx.deactivate(E);return}const Ge=Ne&1&&je,it=!vi(E);let lt;if(it&&(lt=Ie&&Ie.onVnodeBeforeUnmount)&&Jn(lt,$,E),Ne&6)gt(E.component,Q,le);else{if(Ne&128){E.suspense.unmount(Q,le);return}Ge&&gs(E,null,$,"beforeUnmount"),Ne&64?E.type.remove(E,$,Q,Fe,le):he&&!he.hasOnce&&(ce!==et||Ee>0&&Ee&64)?st(he,$,Q,!1,!0):(ce===et&&Ee&384||!de&&Ne&16)&&st(be,$,Q),le&&We(E)}(it&&(lt=Ie&&Ie.onVnodeUnmounted)||Ge)&&hn(()=>{lt&&Jn(lt,$,E),Ge&&gs(E,null,$,"unmounted")},Q)},We=E=>{const{type:$,el:Q,anchor:le,transition:de}=E;if($===et){wt(Q,le);return}if($===cl){O(E);return}const ce=()=>{s(Q),de&&!de.persisted&&de.afterLeave&&de.afterLeave()};if(E.shapeFlag&1&&de&&!de.persisted){const{leave:Ie,delayLeave:xe}=de,be=()=>Ie(Q,ce);xe?xe(E.el,ce,be):be()}else ce()},wt=(E,$)=>{let Q;for(;E!==$;)Q=p(E),s(E),E=Q;s($)},gt=(E,$,Q)=>{const{bum:le,scope:de,job:ce,subTree:Ie,um:xe,m:be,a:he}=E;Ch(be),Ch(he),le&&al(le),de.stop(),ce&&(ce.flags|=8,we(Ie,E,$,Q)),xe&&hn(xe,$),hn(()=>{E.isUnmounted=!0},$)},st=(E,$,Q,le=!1,de=!1,ce=0)=>{for(let Ie=ce;Ie<E.length;Ie++)we(E[Ie],$,Q,le,de)},ae=E=>{if(E.shapeFlag&6)return ae(E.component.subTree);if(E.shapeFlag&128)return E.suspense.next();const $=p(E.anchor||E.el),Q=$&&$[_y];return Q?p(Q):$};let Me=!1;const re=(E,$,Q)=>{E==null?$._vnode&&we($._vnode,null,null,!0):_($._vnode||null,E,$,null,null,null,Q),$._vnode=E,Me||(Me=!0,ph(),yy(),Me=!1)},Fe={p:_,um:we,m:Le,r:We,mt:me,mc:B,pc:te,pbc:Z,n:ae,o:t};return{render:re,hydrate:void 0,createApp:ow(re)}}function au({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function ms({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function mw(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Kd(t,e,n=!1){const r=t.children,s=e.children;if(ze(r)&&ze(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=Kr(s[i]),a.el=o.el),!n&&a.patchFlag!==-2&&Kd(o,a)),a.type===ic&&a.patchFlag!==-1&&(a.el=o.el),a.type===Hn&&!a.el&&(a.el=o.el)}}function yw(t){const e=t.slice(),n=[0];let r,s,i,o,a;const l=t.length;for(r=0;r<l;r++){const c=t[r];if(c!==0){if(s=n[n.length-1],t[s]<c){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<c?i=a+1:o=a;c<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function Ny(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Ny(e)}function Ch(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const vw=Symbol.for("v-scx"),bw=()=>In(vw);function Si(t,e){return Yd(t,null,e)}function Ht(t,e,n){return Yd(t,e,n)}function Yd(t,e,n=mt){const{immediate:r,deep:s,flush:i,once:o}=n,a=Bt({},n),l=e&&r||!e&&i!=="post";let c;if(No){if(i==="sync"){const g=bw();c=g.__watcherHandles||(g.__watcherHandles=[])}else if(!l){const g=()=>{};return g.stop=or,g.resume=or,g.pause=or,g}}const u=on;a.call=(g,v,_)=>Vn(g,u,v,_);let f=!1;i==="post"?a.scheduler=g=>{hn(g,u&&u.suspense)}:i!=="sync"&&(f=!0,a.scheduler=(g,v)=>{v?g():Wd(g)}),a.augmentJob=g=>{e&&(g.flags|=4),f&&(g.flags|=2,u&&(g.id=u.uid,g.i=u))};const p=O0(t,e,a);return No&&(c?c.push(p):l&&p()),p}function _w(t,e,n){const r=this.proxy,s=It(t)?t.includes(".")?zy(r,t):()=>r[t]:t.bind(r,r);let i;Ye(e)?i=e:(i=e.handler,n=e);const o=ea(this),a=Yd(s,i.bind(r),n);return o(),a}function zy(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const ww=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${En(e)}Modifiers`]||t[`${os(e)}Modifiers`];function xw(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||mt;let s=n;const i=e.startsWith("update:"),o=i&&ww(r,e.slice(7));o&&(o.trim&&(s=n.map(u=>It(u)?u.trim():u)),o.number&&(s=n.map(bl)));let a,l=r[a=ol(e)]||r[a=ol(En(e))];!l&&i&&(l=r[a=ol(os(e))]),l&&Vn(l,t,6,s);const c=r[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Vn(c,t,6,s)}}function qy(t,e,n=!1){const r=e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},a=!1;if(!Ye(t)){const l=c=>{const u=qy(c,e,!0);u&&(a=!0,Bt(o,u))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!a?(yt(t)&&r.set(t,null),null):(ze(i)?i.forEach(l=>o[l]=null):Bt(o,i),yt(t)&&r.set(t,o),o)}function sc(t,e){return!t||!Hl(e)?!1:(e=e.slice(2).replace(/Once$/,""),ft(t,e[0].toLowerCase()+e.slice(1))||ft(t,os(e))||ft(t,e))}function Sh(t){const{type:e,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:o,attrs:a,emit:l,render:c,renderCache:u,props:f,data:p,setupState:g,ctx:v,inheritAttrs:_}=t,x=Cl(t);let C,S;try{if(n.shapeFlag&4){const O=s||r,F=O;C=ir(c.call(F,O,u,f,g,p,v)),S=a}else{const O=e;C=ir(O.length>1?O(f,{attrs:a,slots:o,emit:l}):O(f,null)),S=e.props?a:kw(a)}}catch(O){So.length=0,tc(O,t,1),C=Ue(Hn)}let A=C;if(S&&_!==!1){const O=Object.keys(S),{shapeFlag:F}=A;O.length&&F&7&&(i&&O.some(Td)&&(S=Cw(S,i)),A=ss(A,S,!1,!0))}return n.dirs&&(A=ss(A,null,!1,!0),A.dirs=A.dirs?A.dirs.concat(n.dirs):n.dirs),n.transition&&Lo(A,n.transition),C=A,Cl(x),C}const kw=t=>{let e;for(const n in t)(n==="class"||n==="style"||Hl(n))&&((e||(e={}))[n]=t[n]);return e},Cw=(t,e)=>{const n={};for(const r in t)(!Td(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function Sw(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:a,patchFlag:l}=e,c=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?Ph(r,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let f=0;f<u.length;f++){const p=u[f];if(o[p]!==r[p]&&!sc(c,p))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?Ph(r,o,c):!0:!!o;return!1}function Ph(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!sc(n,i))return!0}return!1}function Pw({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const Uy=t=>t.__isSuspense;function Aw(t,e){e&&e.pendingBranch?ze(t)?e.effects.push(...t):e.effects.push(t):D0(t)}const et=Symbol.for("v-fgt"),ic=Symbol.for("v-txt"),Hn=Symbol.for("v-cmt"),cl=Symbol.for("v-stc"),So=[];let Pn=null;function U(t=!1){So.push(Pn=t?null:[])}function Iw(){So.pop(),Pn=So[So.length-1]||null}let Bo=1;function Ah(t,e=!1){Bo+=t,t<0&&Pn&&e&&(Pn.hasOnce=!0)}function Wy(t){return t.dynamicChildren=Bo>0?Pn||gi:null,Iw(),Bo>0&&Pn&&Pn.push(t),t}function J(t,e,n,r,s,i){return Wy(w(t,e,n,r,s,i,!0))}function Jt(t,e,n,r,s){return Wy(Ue(t,e,n,r,s,!0))}function jo(t){return t?t.__v_isVNode===!0:!1}function ui(t,e){return t.type===e.type&&t.key===e.key}const Vy=({key:t})=>t??null,ul=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?It(t)||Rt(t)||Ye(t)?{i:Xt,r:t,k:e,f:!!n}:t:null);function w(t,e=null,n=null,r=0,s=null,i=t===et?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Vy(e),ref:e&&ul(e),scopeId:by,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Xt};return a?(Gd(l,n),i&128&&t.normalize(l)):n&&(l.shapeFlag|=It(n)?8:16),Bo>0&&!o&&Pn&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Pn.push(l),l}const Ue=Ew;function Ew(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===Q0)&&(t=Hn),jo(t)){const a=ss(t,e,!0);return n&&Gd(a,n),Bo>0&&!i&&Pn&&(a.shapeFlag&6?Pn[Pn.indexOf(t)]=a:Pn.push(a)),a.patchFlag=-2,a}if(Bw(t)&&(t=t.__vccOpts),e){e=Hy(e);let{class:a,style:l}=e;a&&!It(a)&&(e.class=At(a)),yt(l)&&(Jo(l)&&!ze(l)&&(l=Bt({},l)),e.style=An(l))}const o=It(t)?1:Uy(t)?128:R0(t)?64:yt(t)?4:Ye(t)?2:0;return w(t,e,n,r,s,o,i,!0)}function Hy(t){return t?Jo(t)||Ry(t)?Bt({},t):t:null}function ss(t,e,n=!1,r=!1){const{props:s,ref:i,patchFlag:o,children:a,transition:l}=t,c=e?lr(s||{},e):s,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&Vy(c),ref:e&&e.ref?n&&i?ze(i)?i.concat(ul(e)):[i,ul(e)]:ul(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==et?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&ss(t.ssContent),ssFallback:t.ssFallback&&ss(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&Lo(u,l.clone(u)),u}function bt(t=" ",e=0){return Ue(ic,null,t,e)}function Ky(t,e){const n=Ue(cl,null,t);return n.staticCount=e,n}function ke(t="",e=!1){return e?(U(),Jt(Hn,null,t)):Ue(Hn,null,t)}function ir(t){return t==null||typeof t=="boolean"?Ue(Hn):ze(t)?Ue(et,null,t.slice()):jo(t)?Kr(t):Ue(ic,null,String(t))}function Kr(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:ss(t)}function Gd(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(ze(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),Gd(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!Ry(e)?e._ctx=Xt:s===3&&Xt&&(Xt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Ye(e)?(e={default:e,_ctx:Xt},n=32):(e=String(e),r&64?(n=16,e=[bt(e)]):n=8);t.children=e,t.shapeFlag|=n}function lr(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=At([e.class,r.class]));else if(s==="style")e.style=An([e.style,r.style]);else if(Hl(s)){const i=e[s],o=r[s];o&&i!==o&&!(ze(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function Jn(t,e,n,r=null){Vn(t,e,7,[n,r])}const Ow=My();let Mw=0;function Tw(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||Ow,i={uid:Mw++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Gm(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Fy(r,s),emitsOptions:qy(r,s),emit:null,emitted:null,propsDefaults:mt,inheritAttrs:r.inheritAttrs,ctx:mt,data:mt,props:mt,attrs:mt,slots:mt,refs:mt,setupState:mt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=xw.bind(null,i),t.ce&&t.ce(i),i}let on=null;const cr=()=>on||Xt;let Pl,td;{const t=Xl(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};Pl=e("__VUE_INSTANCE_SETTERS__",n=>on=n),td=e("__VUE_SSR_SETTERS__",n=>No=n)}const ea=t=>{const e=on;return Pl(t),t.scope.on(),()=>{t.scope.off(),Pl(e)}},Ih=()=>{on&&on.scope.off(),Pl(null)};function Yy(t){return t.vnode.shapeFlag&4}let No=!1;function Dw(t,e=!1,n=!1){e&&td(e);const{props:r,children:s}=t.vnode,i=Yy(t);lw(t,r,i,e),fw(t,s,n||e);const o=i?Rw(t,e):void 0;return e&&td(!1),o}function Rw(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Z0);const{setup:r}=n;if(r){Ir();const s=t.setupContext=r.length>1?Fw(t):null,i=ea(t),o=Zo(r,t,0,[t.props,s]),a=qm(o);if(Er(),i(),(a||t.sp)&&!vi(t)&&Cy(t),a){if(o.then(Ih,Ih),e)return o.then(l=>{Eh(t,l)}).catch(l=>{tc(l,t,0)});t.asyncDep=o}else Eh(t,o)}else Gy(t)}function Eh(t,e,n){Ye(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:yt(e)&&(t.setupState=py(e)),Gy(t)}function Gy(t,e,n){const r=t.type;t.render||(t.render=r.render||or);{const s=ea(t);Ir();try{ew(t)}finally{Er(),s()}}}const $w={get(t,e){return sn(t,"get",""),t[e]}};function Fw(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,$w),slots:t.slots,emit:t.emit,expose:e}}function oc(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(py(qd(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in ko)return ko[n](t)},has(e,n){return n in e||n in ko}})):t.proxy}function Lw(t,e=!0){return Ye(t)?t.displayName||t.name:t.name||e&&t.__name}function Bw(t){return Ye(t)&&"__vccOpts"in t}const Ve=(t,e)=>I0(t,e,No);function Ar(t,e,n){const r=arguments.length;return r===2?yt(e)&&!ze(e)?jo(e)?Ue(t,null,[e]):Ue(t,e):Ue(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&jo(n)&&(n=[n]),Ue(t,e,n))}const Xy="3.5.20";/**
* @vue/runtime-dom v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let nd;const Oh=typeof window<"u"&&window.trustedTypes;if(Oh)try{nd=Oh.createPolicy("vue",{createHTML:t=>t})}catch{}const Qy=nd?t=>nd.createHTML(t):t=>t,jw="http://www.w3.org/2000/svg",Nw="http://www.w3.org/1998/Math/MathML",kr=typeof document<"u"?document:null,Mh=kr&&kr.createElement("template"),zw={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?kr.createElementNS(jw,t):e==="mathml"?kr.createElementNS(Nw,t):n?kr.createElement(t,{is:n}):kr.createElement(t);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>kr.createTextNode(t),createComment:t=>kr.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>kr.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{Mh.innerHTML=Qy(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=Mh.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},jr="transition",Xi="animation",Pi=Symbol("_vtc"),Jy={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},qw=Bt({},B0,Jy),ys=(t,e=[])=>{ze(t)?t.forEach(n=>n(...e)):t&&t(...e)},Th=t=>t?ze(t)?t.some(e=>e.length>1):t.length>1:!1;function Uw(t){const e={};for(const z in t)z in Jy||(e[z]=t[z]);if(t.css===!1)return e;const{name:n="v",type:r,duration:s,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=i,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:g=`${n}-leave-to`}=t,v=Ww(s),_=v&&v[0],x=v&&v[1],{onBeforeEnter:C,onEnter:S,onEnterCancelled:A,onLeave:O,onLeaveCancelled:F,onBeforeAppear:M=C,onAppear:D=S,onAppearCancelled:B=A}=e,P=(z,fe,me,Ae)=>{z._enterCancelled=Ae,qr(z,fe?u:a),qr(z,fe?c:o),me&&me()},Z=(z,fe)=>{z._isLeaving=!1,qr(z,f),qr(z,g),qr(z,p),fe&&fe()},Y=z=>(fe,me)=>{const Ae=z?D:S,Ce=()=>P(fe,z,me);ys(Ae,[fe,Ce]),Dh(()=>{qr(fe,z?l:i),er(fe,z?u:a),Th(Ae)||Rh(fe,r,_,Ce)})};return Bt(e,{onBeforeEnter(z){ys(C,[z]),er(z,i),er(z,o)},onBeforeAppear(z){ys(M,[z]),er(z,l),er(z,c)},onEnter:Y(!1),onAppear:Y(!0),onLeave(z,fe){z._isLeaving=!0;const me=()=>Z(z,fe);er(z,f),z._enterCancelled?(er(z,p),rd()):(rd(),er(z,p)),Dh(()=>{z._isLeaving&&(qr(z,f),er(z,g),Th(O)||Rh(z,r,x,me))}),ys(O,[z,me])},onEnterCancelled(z){P(z,!1,void 0,!0),ys(A,[z])},onAppearCancelled(z){P(z,!0,void 0,!0),ys(B,[z])},onLeaveCancelled(z){Z(z),ys(F,[z])}})}function Ww(t){if(t==null)return null;if(yt(t))return[lu(t.enter),lu(t.leave)];{const e=lu(t);return[e,e]}}function lu(t){return Y_(t)}function er(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[Pi]||(t[Pi]=new Set)).add(e)}function qr(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[Pi];n&&(n.delete(e),n.size||(t[Pi]=void 0))}function Dh(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let Vw=0;function Rh(t,e,n,r){const s=t._endId=++Vw,i=()=>{s===t._endId&&r()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:a,propCount:l}=Zy(t,e);if(!o)return r();const c=o+"end";let u=0;const f=()=>{t.removeEventListener(c,p),i()},p=g=>{g.target===t&&++u>=l&&f()};setTimeout(()=>{u<l&&f()},a+1),t.addEventListener(c,p)}function Zy(t,e){const n=window.getComputedStyle(t),r=v=>(n[v]||"").split(", "),s=r(`${jr}Delay`),i=r(`${jr}Duration`),o=$h(s,i),a=r(`${Xi}Delay`),l=r(`${Xi}Duration`),c=$h(a,l);let u=null,f=0,p=0;e===jr?o>0&&(u=jr,f=o,p=i.length):e===Xi?c>0&&(u=Xi,f=c,p=l.length):(f=Math.max(o,c),u=f>0?o>c?jr:Xi:null,p=u?u===jr?i.length:l.length:0);const g=u===jr&&/\b(transform|all)(,|$)/.test(r(`${jr}Property`).toString());return{type:u,timeout:f,propCount:p,hasTransform:g}}function $h(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>Fh(n)+Fh(t[r])))}function Fh(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function rd(){return document.body.offsetHeight}function Hw(t,e,n){const r=t[Pi];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Al=Symbol("_vod"),ev=Symbol("_vsh"),Kw={name:"show",beforeMount(t,{value:e},{transition:n}){t[Al]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Qi(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),Qi(t,!0),r.enter(t)):r.leave(t,()=>{Qi(t,!1)}):Qi(t,e))},beforeUnmount(t,{value:e}){Qi(t,e)}};function Qi(t,e){t.style.display=e?t[Al]:"none",t[ev]=!e}const Yw=Symbol(""),Gw=/(^|;)\s*display\s*:/;function Xw(t,e,n){const r=t.style,s=It(n);let i=!1;if(n&&!s){if(e)if(It(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&dl(r,a,"")}else for(const o in e)n[o]==null&&dl(r,o,"");for(const o in n)o==="display"&&(i=!0),dl(r,o,n[o])}else if(s){if(e!==n){const o=r[Yw];o&&(n+=";"+o),r.cssText=n,i=Gw.test(n)}}else e&&t.removeAttribute("style");Al in t&&(t[Al]=i?r.display:"",t[ev]&&(r.display="none"))}const Lh=/\s*!important$/;function dl(t,e,n){if(ze(n))n.forEach(r=>dl(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=Qw(t,e);Lh.test(n)?t.setProperty(os(r),n.replace(Lh,""),"important"):t[r]=n}}const Bh=["Webkit","Moz","ms"],cu={};function Qw(t,e){const n=cu[e];if(n)return n;let r=En(e);if(r!=="filter"&&r in t)return cu[e]=r;r=Gl(r);for(let s=0;s<Bh.length;s++){const i=Bh[s]+r;if(i in t)return cu[e]=i}return e}const jh="http://www.w3.org/1999/xlink";function Nh(t,e,n,r,s,i=t0(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(jh,e.slice(6,e.length)):t.setAttributeNS(jh,e,n):n==null||i&&!Hm(n)?t.removeAttribute(e):t.setAttribute(e,i?"":Wn(n)?String(n):n)}function zh(t,e,n,r,s){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?Qy(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=Hm(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(s||e)}function Ts(t,e,n,r){t.addEventListener(e,n,r)}function Jw(t,e,n,r){t.removeEventListener(e,n,r)}const qh=Symbol("_vei");function Zw(t,e,n,r,s=null){const i=t[qh]||(t[qh]={}),o=i[e];if(r&&o)o.value=r;else{const[a,l]=ex(e);if(r){const c=i[e]=rx(r,s);Ts(t,a,c,l)}else o&&(Jw(t,a,o,l),i[e]=void 0)}}const Uh=/(?:Once|Passive|Capture)$/;function ex(t){let e;if(Uh.test(t)){e={};let r;for(;r=t.match(Uh);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):os(t.slice(2)),e]}let uu=0;const tx=Promise.resolve(),nx=()=>uu||(tx.then(()=>uu=0),uu=Date.now());function rx(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Vn(sx(r,n.value),e,5,[r])};return n.value=t,n.attached=nx(),n}function sx(t,e){if(ze(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const Wh=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,ix=(t,e,n,r,s,i)=>{const o=s==="svg";e==="class"?Hw(t,r,o):e==="style"?Xw(t,n,r):Hl(e)?Td(e)||Zw(t,e,n,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):ox(t,e,r,o))?(zh(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Nh(t,e,r,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!It(r))?zh(t,En(e),r,i,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),Nh(t,e,r,o))};function ox(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&Wh(e)&&Ye(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Wh(e)&&It(n)?!1:e in t}const tv=new WeakMap,nv=new WeakMap,Il=Symbol("_moveCb"),Vh=Symbol("_enterCb"),ax=t=>(delete t.props.mode,t),lx=ax({name:"TransitionGroup",props:Bt({},qw,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=cr(),r=L0();let s,i;return Ay(()=>{if(!s.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!hx(s[0].el,n.vnode.el,o)){s=[];return}s.forEach(ux),s.forEach(dx);const a=s.filter(fx);rd(),a.forEach(l=>{const c=l.el,u=c.style;er(c,o),u.transform=u.webkitTransform=u.transitionDuration="";const f=c[Il]=p=>{p&&p.target!==c||(!p||/transform$/.test(p.propertyName))&&(c.removeEventListener("transitionend",f),c[Il]=null,qr(c,o))};c.addEventListener("transitionend",f)}),s=[]}),()=>{const o=tt(t),a=Uw(o);let l=o.tag||et;if(s=[],i)for(let c=0;c<i.length;c++){const u=i[c];u.el&&u.el instanceof Element&&(s.push(u),Lo(u,Xu(u,a,r,n)),tv.set(u,u.el.getBoundingClientRect()))}i=e.default?ky(e.default()):[];for(let c=0;c<i.length;c++){const u=i[c];u.key!=null&&Lo(u,Xu(u,a,r,n))}return Ue(l,null,i)}}}),cx=lx;function ux(t){const e=t.el;e[Il]&&e[Il](),e[Vh]&&e[Vh]()}function dx(t){nv.set(t,t.el.getBoundingClientRect())}function fx(t){const e=tv.get(t),n=nv.get(t),r=e.left-n.left,s=e.top-n.top;if(r||s){const i=t.el.style;return i.transform=i.webkitTransform=`translate(${r}px,${s}px)`,i.transitionDuration="0s",t}}function hx(t,e,n){const r=t.cloneNode(),s=t[Pi];s&&s.forEach(a=>{a.split(/\s+/).forEach(l=>l&&r.classList.remove(l))}),n.split(/\s+/).forEach(a=>a&&r.classList.add(a)),r.style.display="none";const i=e.nodeType===1?e:e.parentNode;i.appendChild(r);const{hasTransform:o}=Zy(r);return i.removeChild(r),o}const El=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ze(e)?n=>al(e,n):e};function px(t){t.target.composing=!0}function Hh(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const bi=Symbol("_assign"),Ol={created(t,{modifiers:{lazy:e,trim:n,number:r}},s){t[bi]=El(s);const i=r||s.props&&s.props.type==="number";Ts(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),i&&(a=bl(a)),t[bi](a)}),n&&Ts(t,"change",()=>{t.value=t.value.trim()}),e||(Ts(t,"compositionstart",px),Ts(t,"compositionend",Hh),Ts(t,"change",Hh))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},o){if(t[bi]=El(o),t.composing)return;const a=(i||t.type==="number")&&!/^0\d/.test(t.value)?bl(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||s&&t.value.trim()===l)||(t.value=l))}},Kh={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const s=Kl(e);Ts(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?bl(Ml(o)):Ml(o));t[bi](t.multiple?s?new Set(i):i:i[0]),t._assigning=!0,ln(()=>{t._assigning=!1})}),t[bi]=El(r)},mounted(t,{value:e}){Yh(t,e)},beforeUpdate(t,e,n){t[bi]=El(n)},updated(t,{value:e}){t._assigning||Yh(t,e)}};function Yh(t,e){const n=t.multiple,r=ze(e);if(!(n&&!r&&!Kl(e))){for(let s=0,i=t.options.length;s<i;s++){const o=t.options[s],a=Ml(o);if(n)if(r){const l=typeof a;l==="string"||l==="number"?o.selected=e.some(c=>String(c)===String(a)):o.selected=r0(e,a)>-1}else o.selected=e.has(a);else if(Ql(Ml(o),e)){t.selectedIndex!==s&&(t.selectedIndex=s);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Ml(t){return"_value"in t?t._value:t.value}const gx=["ctrl","shift","alt","meta"],mx={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>gx.some(n=>t[`${n}Key`]&&!e.includes(n))},fl=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=((s,...i)=>{for(let o=0;o<e.length;o++){const a=mx[e[o]];if(a&&a(s,e))return}return t(s,...i)}))},yx={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Gh=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=(s=>{if(!("key"in s))return;const i=os(s.key);if(e.some(o=>o===i||yx[o]===i))return t(s)}))},vx=Bt({patchProp:ix},zw);let Xh;function bx(){return Xh||(Xh=pw(vx))}const _x=((...t)=>{const e=bx().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=xx(r);if(!s)return;const i=e._component;!Ye(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=n(s,!1,wx(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e});function wx(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function xx(t){return It(t)?document.querySelector(t):t}const kx="/mtg-pwa/icons/icon-256.png";/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const di=typeof document<"u";function rv(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Cx(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&rv(t.default)}const dt=Object.assign;function du(t,e){const n={};for(const r in e){const s=e[r];n[r]=Kn(s)?s.map(t):t(s)}return n}const Po=()=>{},Kn=Array.isArray,sv=/#/g,Sx=/&/g,Px=/\//g,Ax=/=/g,Ix=/\?/g,iv=/\+/g,Ex=/%5B/g,Ox=/%5D/g,ov=/%5E/g,Mx=/%60/g,av=/%7B/g,Tx=/%7C/g,lv=/%7D/g,Dx=/%20/g;function Xd(t){return encodeURI(""+t).replace(Tx,"|").replace(Ex,"[").replace(Ox,"]")}function Rx(t){return Xd(t).replace(av,"{").replace(lv,"}").replace(ov,"^")}function sd(t){return Xd(t).replace(iv,"%2B").replace(Dx,"+").replace(sv,"%23").replace(Sx,"%26").replace(Mx,"`").replace(av,"{").replace(lv,"}").replace(ov,"^")}function $x(t){return sd(t).replace(Ax,"%3D")}function Fx(t){return Xd(t).replace(sv,"%23").replace(Ix,"%3F")}function Lx(t){return t==null?"":Fx(t).replace(Px,"%2F")}function zo(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const Bx=/\/$/,jx=t=>t.replace(Bx,"");function fu(t,e,n="/"){let r,s={},i="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=e.slice(0,l),i=e.slice(l+1,a>-1?a:e.length),s=t(i)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=Ux(r??e,n),{fullPath:r+(i&&"?")+i+o,path:r,query:s,hash:zo(o)}}function Nx(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Qh(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function zx(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&Ai(e.matched[r],n.matched[s])&&cv(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Ai(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function cv(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!qx(t[n],e[n]))return!1;return!0}function qx(t,e){return Kn(t)?Jh(t,e):Kn(e)?Jh(e,t):t===e}function Jh(t,e){return Kn(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function Ux(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o).join("/")}const Nr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var qo;(function(t){t.pop="pop",t.push="push"})(qo||(qo={}));var Ao;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Ao||(Ao={}));function Wx(t){if(!t)if(di){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),jx(t)}const Vx=/^[^#]+#/;function Hx(t,e){return t.replace(Vx,"#")+e}function Kx(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const ac=()=>({left:window.scrollX,top:window.scrollY});function Yx(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=Kx(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Zh(t,e){return(history.state?history.state.position-e:-1)+t}const id=new Map;function Gx(t,e){id.set(t,e)}function Xx(t){const e=id.get(t);return id.delete(t),e}let Qx=()=>location.protocol+"//"+location.host;function uv(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let a=s.includes(t.slice(i))?t.slice(i).length:1,l=s.slice(a);return l[0]!=="/"&&(l="/"+l),Qh(l,"")}return Qh(n,t)+r+s}function Jx(t,e,n,r){let s=[],i=[],o=null;const a=({state:p})=>{const g=uv(t,location),v=n.value,_=e.value;let x=0;if(p){if(n.value=g,e.value=p,o&&o===v){o=null;return}x=_?p.position-_.position:0}else r(g);s.forEach(C=>{C(n.value,v,{delta:x,type:qo.pop,direction:x?x>0?Ao.forward:Ao.back:Ao.unknown})})};function l(){o=n.value}function c(p){s.push(p);const g=()=>{const v=s.indexOf(p);v>-1&&s.splice(v,1)};return i.push(g),g}function u(){const{history:p}=window;p.state&&p.replaceState(dt({},p.state,{scroll:ac()}),"")}function f(){for(const p of i)p();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:f}}function ep(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?ac():null}}function Zx(t){const{history:e,location:n}=window,r={value:uv(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,c,u){const f=t.indexOf("#"),p=f>-1?(n.host&&document.querySelector("base")?t:t.slice(f))+l:Qx()+t+l;try{e[u?"replaceState":"pushState"](c,"",p),s.value=c}catch(g){console.error(g),n[u?"replace":"assign"](p)}}function o(l,c){const u=dt({},e.state,ep(s.value.back,l,s.value.forward,!0),c,{position:s.value.position});i(l,u,!0),r.value=l}function a(l,c){const u=dt({},s.value,e.state,{forward:l,scroll:ac()});i(u.current,u,!0);const f=dt({},ep(r.value,l,null),{position:u.position+1},c);i(l,f,!1),r.value=l}return{location:r,state:s,push:a,replace:o}}function e1(t){t=Wx(t);const e=Zx(t),n=Jx(t,e.state,e.location,e.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=dt({location:"",base:t,go:r,createHref:Hx.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function t1(t){return typeof t=="string"||t&&typeof t=="object"}function dv(t){return typeof t=="string"||typeof t=="symbol"}const fv=Symbol("");var tp;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(tp||(tp={}));function Ii(t,e){return dt(new Error,{type:t,[fv]:!0},e)}function pr(t,e){return t instanceof Error&&fv in t&&(e==null||!!(t.type&e))}const np="[^/]+?",n1={sensitive:!1,strict:!1,start:!0,end:!0},r1=/[.+*?^${}()[\]/\\]/g;function s1(t,e){const n=dt({},n1,e),r=[];let s=n.start?"^":"";const i=[];for(const c of t){const u=c.length?[]:[90];n.strict&&!c.length&&(s+="/");for(let f=0;f<c.length;f++){const p=c[f];let g=40+(n.sensitive?.25:0);if(p.type===0)f||(s+="/"),s+=p.value.replace(r1,"\\$&"),g+=40;else if(p.type===1){const{value:v,repeatable:_,optional:x,regexp:C}=p;i.push({name:v,repeatable:_,optional:x});const S=C||np;if(S!==np){g+=10;try{new RegExp(`(${S})`)}catch(O){throw new Error(`Invalid custom RegExp for param "${v}" (${S}): `+O.message)}}let A=_?`((?:${S})(?:/(?:${S}))*)`:`(${S})`;f||(A=x&&c.length<2?`(?:/${A})`:"/"+A),x&&(A+="?"),s+=A,g+=20,x&&(g+=-8),_&&(g+=-20),S===".*"&&(g+=-50)}u.push(g)}r.push(u)}if(n.strict&&n.end){const c=r.length-1;r[c][r[c].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(c){const u=c.match(o),f={};if(!u)return null;for(let p=1;p<u.length;p++){const g=u[p]||"",v=i[p-1];f[v.name]=g&&v.repeatable?g.split("/"):g}return f}function l(c){let u="",f=!1;for(const p of t){(!f||!u.endsWith("/"))&&(u+="/"),f=!1;for(const g of p)if(g.type===0)u+=g.value;else if(g.type===1){const{value:v,repeatable:_,optional:x}=g,C=v in c?c[v]:"";if(Kn(C)&&!_)throw new Error(`Provided param "${v}" is an array but it is not repeatable (* or + modifiers)`);const S=Kn(C)?C.join("/"):C;if(!S)if(x)p.length<2&&(u.endsWith("/")?u=u.slice(0,-1):f=!0);else throw new Error(`Missing required param "${v}"`);u+=S}}return u||"/"}return{re:o,score:r,keys:i,parse:a,stringify:l}}function i1(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function hv(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=i1(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(rp(r))return 1;if(rp(s))return-1}return s.length-r.length}function rp(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const o1={type:0,value:""},a1=/[a-zA-Z0-9_]/;function l1(t){if(!t)return[[]];if(t==="/")return[[o1]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(g){throw new Error(`ERR (${n})/"${c}": ${g}`)}let n=0,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let a=0,l,c="",u="";function f(){c&&(n===0?i.push({type:0,value:c}):n===1||n===2||n===3?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function p(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(c&&f(),o()):l===":"?(f(),n=1):p();break;case 4:p(),n=r;break;case 1:l==="("?n=2:a1.test(l)?p():(f(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:n=3:u+=l;break;case 3:f(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${c}"`),f(),o(),s}function c1(t,e,n){const r=s1(l1(t.path),n),s=dt(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function u1(t,e){const n=[],r=new Map;e=ap({strict:!1,end:!0,sensitive:!1},e);function s(f){return r.get(f)}function i(f,p,g){const v=!g,_=ip(f);_.aliasOf=g&&g.record;const x=ap(e,f),C=[_];if("alias"in f){const O=typeof f.alias=="string"?[f.alias]:f.alias;for(const F of O)C.push(ip(dt({},_,{components:g?g.record.components:_.components,path:F,aliasOf:g?g.record:_})))}let S,A;for(const O of C){const{path:F}=O;if(p&&F[0]!=="/"){const M=p.record.path,D=M[M.length-1]==="/"?"":"/";O.path=p.record.path+(F&&D+F)}if(S=c1(O,p,x),g?g.alias.push(S):(A=A||S,A!==S&&A.alias.push(S),v&&f.name&&!op(S)&&o(f.name)),pv(S)&&l(S),_.children){const M=_.children;for(let D=0;D<M.length;D++)i(M[D],S,g&&g.children[D])}g=g||S}return A?()=>{o(A)}:Po}function o(f){if(dv(f)){const p=r.get(f);p&&(r.delete(f),n.splice(n.indexOf(p),1),p.children.forEach(o),p.alias.forEach(o))}else{const p=n.indexOf(f);p>-1&&(n.splice(p,1),f.record.name&&r.delete(f.record.name),f.children.forEach(o),f.alias.forEach(o))}}function a(){return n}function l(f){const p=h1(f,n);n.splice(p,0,f),f.record.name&&!op(f)&&r.set(f.record.name,f)}function c(f,p){let g,v={},_,x;if("name"in f&&f.name){if(g=r.get(f.name),!g)throw Ii(1,{location:f});x=g.record.name,v=dt(sp(p.params,g.keys.filter(A=>!A.optional).concat(g.parent?g.parent.keys.filter(A=>A.optional):[]).map(A=>A.name)),f.params&&sp(f.params,g.keys.map(A=>A.name))),_=g.stringify(v)}else if(f.path!=null)_=f.path,g=n.find(A=>A.re.test(_)),g&&(v=g.parse(_),x=g.record.name);else{if(g=p.name?r.get(p.name):n.find(A=>A.re.test(p.path)),!g)throw Ii(1,{location:f,currentLocation:p});x=g.record.name,v=dt({},p.params,f.params),_=g.stringify(v)}const C=[];let S=g;for(;S;)C.unshift(S.record),S=S.parent;return{name:x,path:_,params:v,matched:C,meta:f1(C)}}t.forEach(f=>i(f));function u(){n.length=0,r.clear()}return{addRoute:i,resolve:c,removeRoute:o,clearRoutes:u,getRoutes:a,getRecordMatcher:s}}function sp(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function ip(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:d1(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function d1(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function op(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function f1(t){return t.reduce((e,n)=>dt(e,n.meta),{})}function ap(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function h1(t,e){let n=0,r=e.length;for(;n!==r;){const i=n+r>>1;hv(t,e[i])<0?r=i:n=i+1}const s=p1(t);return s&&(r=e.lastIndexOf(s,r-1)),r}function p1(t){let e=t;for(;e=e.parent;)if(pv(e)&&hv(t,e)===0)return e}function pv({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function g1(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<r.length;++s){const i=r[s].replace(iv," "),o=i.indexOf("="),a=zo(o<0?i:i.slice(0,o)),l=o<0?null:zo(i.slice(o+1));if(a in e){let c=e[a];Kn(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function lp(t){let e="";for(let n in t){const r=t[n];if(n=$x(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(Kn(r)?r.map(i=>i&&sd(i)):[r&&sd(r)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function m1(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=Kn(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const y1=Symbol(""),cp=Symbol(""),lc=Symbol(""),Qd=Symbol(""),od=Symbol("");function Ji(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Yr(t,e,n,r,s,i=o=>o()){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((a,l)=>{const c=p=>{p===!1?l(Ii(4,{from:n,to:e})):p instanceof Error?l(p):t1(p)?l(Ii(2,{from:e,to:p})):(o&&r.enterCallbacks[s]===o&&typeof p=="function"&&o.push(p),a())},u=i(()=>t.call(r&&r.instances[s],e,n,c));let f=Promise.resolve(u);t.length<3&&(f=f.then(c)),f.catch(p=>l(p))})}function hu(t,e,n,r,s=i=>i()){const i=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(rv(l)){const u=(l.__vccOpts||l)[e];u&&i.push(Yr(u,n,r,o,a,s))}else{let c=l();i.push(()=>c.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const f=Cx(u)?u.default:u;o.mods[a]=u,o.components[a]=f;const g=(f.__vccOpts||f)[e];return g&&Yr(g,n,r,o,a,s)()}))}}return i}function up(t){const e=In(lc),n=In(Qd),r=Ve(()=>{const l=$e(t.to);return e.resolve(l)}),s=Ve(()=>{const{matched:l}=r.value,{length:c}=l,u=l[c-1],f=n.matched;if(!u||!f.length)return-1;const p=f.findIndex(Ai.bind(null,u));if(p>-1)return p;const g=dp(l[c-2]);return c>1&&dp(u)===g&&f[f.length-1].path!==g?f.findIndex(Ai.bind(null,l[c-2])):p}),i=Ve(()=>s.value>-1&&x1(n.params,r.value.params)),o=Ve(()=>s.value>-1&&s.value===n.matched.length-1&&cv(n.params,r.value.params));function a(l={}){if(w1(l)){const c=e[$e(t.replace)?"replace":"push"]($e(t.to)).catch(Po);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:r,href:Ve(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}function v1(t){return t.length===1?t[0]:t}const b1=Ze({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:up,setup(t,{slots:e}){const n=Us(up(t)),{options:r}=In(lc),s=Ve(()=>({[fp(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[fp(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&v1(e.default(n));return t.custom?i:Ar("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),_1=b1;function w1(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function x1(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!Kn(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function dp(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const fp=(t,e,n)=>t??e??n,k1=Ze({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=In(od),s=Ve(()=>t.route||r.value),i=In(cp,0),o=Ve(()=>{let c=$e(i);const{matched:u}=s.value;let f;for(;(f=u[c])&&!f.components;)c++;return c}),a=Ve(()=>s.value.matched[o.value]);Co(cp,Ve(()=>o.value+1)),Co(y1,a),Co(od,s);const l=pe();return Ht(()=>[l.value,a.value,t.name],([c,u,f],[p,g,v])=>{u&&(u.instances[f]=c,g&&g!==u&&c&&c===p&&(u.leaveGuards.size||(u.leaveGuards=g.leaveGuards),u.updateGuards.size||(u.updateGuards=g.updateGuards))),c&&u&&(!g||!Ai(u,g)||!p)&&(u.enterCallbacks[f]||[]).forEach(_=>_(c))},{flush:"post"}),()=>{const c=s.value,u=t.name,f=a.value,p=f&&f.components[u];if(!p)return hp(n.default,{Component:p,route:c});const g=f.props[u],v=g?g===!0?c.params:typeof g=="function"?g(c):g:null,x=Ar(p,dt({},v,e,{onVnodeUnmounted:C=>{C.component.isUnmounted&&(f.instances[u]=null)},ref:l}));return hp(n.default,{Component:x,route:c})||x}}});function hp(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const C1=k1;function S1(t){const e=u1(t.routes,t),n=t.parseQuery||g1,r=t.stringifyQuery||lp,s=t.history,i=Ji(),o=Ji(),a=Ji(),l=ec(Nr);let c=Nr;di&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=du.bind(null,ae=>""+ae),f=du.bind(null,Lx),p=du.bind(null,zo);function g(ae,Me){let re,Fe;return dv(ae)?(re=e.getRecordMatcher(ae),Fe=Me):Fe=ae,e.addRoute(Fe,re)}function v(ae){const Me=e.getRecordMatcher(ae);Me&&e.removeRoute(Me)}function _(){return e.getRoutes().map(ae=>ae.record)}function x(ae){return!!e.getRecordMatcher(ae)}function C(ae,Me){if(Me=dt({},Me||l.value),typeof ae=="string"){const Q=fu(n,ae,Me.path),le=e.resolve({path:Q.path},Me),de=s.createHref(Q.fullPath);return dt(Q,le,{params:p(le.params),hash:zo(Q.hash),redirectedFrom:void 0,href:de})}let re;if(ae.path!=null)re=dt({},ae,{path:fu(n,ae.path,Me.path).path});else{const Q=dt({},ae.params);for(const le in Q)Q[le]==null&&delete Q[le];re=dt({},ae,{params:f(Q)}),Me.params=f(Me.params)}const Fe=e.resolve(re,Me),nt=ae.hash||"";Fe.params=u(p(Fe.params));const E=Nx(r,dt({},ae,{hash:Rx(nt),path:Fe.path})),$=s.createHref(E);return dt({fullPath:E,hash:nt,query:r===lp?m1(ae.query):ae.query||{}},Fe,{redirectedFrom:void 0,href:$})}function S(ae){return typeof ae=="string"?fu(n,ae,l.value.path):dt({},ae)}function A(ae,Me){if(c!==ae)return Ii(8,{from:Me,to:ae})}function O(ae){return D(ae)}function F(ae){return O(dt(S(ae),{replace:!0}))}function M(ae){const Me=ae.matched[ae.matched.length-1];if(Me&&Me.redirect){const{redirect:re}=Me;let Fe=typeof re=="function"?re(ae):re;return typeof Fe=="string"&&(Fe=Fe.includes("?")||Fe.includes("#")?Fe=S(Fe):{path:Fe},Fe.params={}),dt({query:ae.query,hash:ae.hash,params:Fe.path!=null?{}:ae.params},Fe)}}function D(ae,Me){const re=c=C(ae),Fe=l.value,nt=ae.state,E=ae.force,$=ae.replace===!0,Q=M(re);if(Q)return D(dt(S(Q),{state:typeof Q=="object"?dt({},nt,Q.state):nt,force:E,replace:$}),Me||re);const le=re;le.redirectedFrom=Me;let de;return!E&&zx(r,Fe,re)&&(de=Ii(16,{to:le,from:Fe}),Le(Fe,Fe,!0,!1)),(de?Promise.resolve(de):Z(le,Fe)).catch(ce=>pr(ce)?pr(ce,2)?ce:G(ce):te(ce,le,Fe)).then(ce=>{if(ce){if(pr(ce,2))return D(dt({replace:$},S(ce.to),{state:typeof ce.to=="object"?dt({},nt,ce.to.state):nt,force:E}),Me||le)}else ce=z(le,Fe,!0,$,nt);return Y(le,Fe,ce),ce})}function B(ae,Me){const re=A(ae,Me);return re?Promise.reject(re):Promise.resolve()}function P(ae){const Me=wt.values().next().value;return Me&&typeof Me.runWithContext=="function"?Me.runWithContext(ae):ae()}function Z(ae,Me){let re;const[Fe,nt,E]=P1(ae,Me);re=hu(Fe.reverse(),"beforeRouteLeave",ae,Me);for(const Q of Fe)Q.leaveGuards.forEach(le=>{re.push(Yr(le,ae,Me))});const $=B.bind(null,ae,Me);return re.push($),st(re).then(()=>{re=[];for(const Q of i.list())re.push(Yr(Q,ae,Me));return re.push($),st(re)}).then(()=>{re=hu(nt,"beforeRouteUpdate",ae,Me);for(const Q of nt)Q.updateGuards.forEach(le=>{re.push(Yr(le,ae,Me))});return re.push($),st(re)}).then(()=>{re=[];for(const Q of E)if(Q.beforeEnter)if(Kn(Q.beforeEnter))for(const le of Q.beforeEnter)re.push(Yr(le,ae,Me));else re.push(Yr(Q.beforeEnter,ae,Me));return re.push($),st(re)}).then(()=>(ae.matched.forEach(Q=>Q.enterCallbacks={}),re=hu(E,"beforeRouteEnter",ae,Me,P),re.push($),st(re))).then(()=>{re=[];for(const Q of o.list())re.push(Yr(Q,ae,Me));return re.push($),st(re)}).catch(Q=>pr(Q,8)?Q:Promise.reject(Q))}function Y(ae,Me,re){a.list().forEach(Fe=>P(()=>Fe(ae,Me,re)))}function z(ae,Me,re,Fe,nt){const E=A(ae,Me);if(E)return E;const $=Me===Nr,Q=di?history.state:{};re&&(Fe||$?s.replace(ae.fullPath,dt({scroll:$&&Q&&Q.scroll},nt)):s.push(ae.fullPath,nt)),l.value=ae,Le(ae,Me,re,$),G()}let fe;function me(){fe||(fe=s.listen((ae,Me,re)=>{if(!gt.listening)return;const Fe=C(ae),nt=M(Fe);if(nt){D(dt(nt,{replace:!0,force:!0}),Fe).catch(Po);return}c=Fe;const E=l.value;di&&Gx(Zh(E.fullPath,re.delta),ac()),Z(Fe,E).catch($=>pr($,12)?$:pr($,2)?(D(dt(S($.to),{force:!0}),Fe).then(Q=>{pr(Q,20)&&!re.delta&&re.type===qo.pop&&s.go(-1,!1)}).catch(Po),Promise.reject()):(re.delta&&s.go(-re.delta,!1),te($,Fe,E))).then($=>{$=$||z(Fe,E,!1),$&&(re.delta&&!pr($,8)?s.go(-re.delta,!1):re.type===qo.pop&&pr($,20)&&s.go(-1,!1)),Y(Fe,E,$)}).catch(Po)}))}let Ae=Ji(),Ce=Ji(),Pe;function te(ae,Me,re){G(ae);const Fe=Ce.list();return Fe.length?Fe.forEach(nt=>nt(ae,Me,re)):console.error(ae),Promise.reject(ae)}function ee(){return Pe&&l.value!==Nr?Promise.resolve():new Promise((ae,Me)=>{Ae.add([ae,Me])})}function G(ae){return Pe||(Pe=!ae,me(),Ae.list().forEach(([Me,re])=>ae?re(ae):Me()),Ae.reset()),ae}function Le(ae,Me,re,Fe){const{scrollBehavior:nt}=t;if(!di||!nt)return Promise.resolve();const E=!re&&Xx(Zh(ae.fullPath,0))||(Fe||!re)&&history.state&&history.state.scroll||null;return ln().then(()=>nt(ae,Me,E)).then($=>$&&Yx($)).catch($=>te($,ae,Me))}const we=ae=>s.go(ae);let We;const wt=new Set,gt={currentRoute:l,listening:!0,addRoute:g,removeRoute:v,clearRoutes:e.clearRoutes,hasRoute:x,getRoutes:_,resolve:C,options:t,push:O,replace:F,go:we,back:()=>we(-1),forward:()=>we(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:Ce.add,isReady:ee,install(ae){const Me=this;ae.component("RouterLink",_1),ae.component("RouterView",C1),ae.config.globalProperties.$router=Me,Object.defineProperty(ae.config.globalProperties,"$route",{enumerable:!0,get:()=>$e(l)}),di&&!We&&l.value===Nr&&(We=!0,O(s.location).catch(nt=>{}));const re={};for(const nt in Nr)Object.defineProperty(re,nt,{get:()=>l.value[nt],enumerable:!0});ae.provide(lc,Me),ae.provide(Qd,dy(re)),ae.provide(od,l);const Fe=ae.unmount;wt.add(ae),ae.unmount=function(){wt.delete(ae),wt.size<1&&(c=Nr,fe&&fe(),fe=null,l.value=Nr,We=!1,Pe=!1),Fe()}}};function st(ae){return ae.reduce((Me,re)=>Me.then(()=>P(re)),Promise.resolve())}return gt}function P1(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(c=>Ai(c,a))?r.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(c=>Ai(c,l))||s.push(l))}return[n,r,s]}function gv(){return In(lc)}function Jd(t){return In(Qd)}const A1=["aria-label"],I1={key:0,class:"icon-sun"},E1={key:1,class:"icon-moon"},O1=Ze({__name:"ThemeSwitcher",setup(t){const e=pe("light"),n=()=>{const r=e.value==="light"?"dark":"light";e.value=r,document.documentElement.setAttribute("data-theme",r),document.documentElement.setAttribute("data-bs-theme",r),localStorage.setItem("theme",r)};return Mn(()=>{const r=localStorage.getItem("theme"),s=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;let i="light";r?i=r:s&&(i="dark"),e.value=i,document.documentElement.setAttribute("data-theme",i),document.documentElement.setAttribute("data-bs-theme",i)}),(r,s)=>(U(),J("button",{type:"button",class:"btn-icon",onClick:n,"aria-label":`Switch to ${e.value==="light"?"dark":"light"} mode`},[e.value==="dark"?(U(),J("span",I1,[...s[0]||(s[0]=[Ky('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-e843c561><circle cx="12" cy="12" r="5" data-v-e843c561></circle><line x1="12" y1="1" x2="12" y2="3" data-v-e843c561></line><line x1="12" y1="21" x2="12" y2="23" data-v-e843c561></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64" data-v-e843c561></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78" data-v-e843c561></line><line x1="1" y1="12" x2="3" y2="12" data-v-e843c561></line><line x1="21" y1="12" x2="23" y2="12" data-v-e843c561></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36" data-v-e843c561></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22" data-v-e843c561></line></svg>',1)])])):(U(),J("span",E1,[...s[1]||(s[1]=[w("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[w("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})],-1)])]))],8,A1))}}),gn=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},M1=gn(O1,[["__scopeId","data-v-e843c561"]]);/*!
 * pinia v3.0.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let mv;const cc=t=>mv=t,yv=Symbol();function ad(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Io;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Io||(Io={}));function T1(){const t=Jl(!0),e=t.run(()=>pe({}));let n=[],r=[];const s=qd({install(i){cc(s),s._a=i,i.provide(yv,s),i.config.globalProperties.$pinia=s,r.forEach(o=>n.push(o)),r=[]},use(i){return this._a?n.push(i):r.push(i),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return s}const vv=()=>{};function pp(t,e,n,r=vv){t.push(e);const s=()=>{const i=t.indexOf(e);i>-1&&(t.splice(i,1),r())};return!n&&$d()&&Xm(s),s}function ii(t,...e){t.slice().forEach(n=>{n(...e)})}const D1=t=>t(),gp=Symbol(),pu=Symbol();function ld(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,r)=>t.set(r,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],s=t[n];ad(s)&&ad(r)&&t.hasOwnProperty(n)&&!Rt(r)&&!Jr(r)?t[n]=ld(s,r):t[n]=r}return t}const R1=Symbol();function $1(t){return!ad(t)||!Object.prototype.hasOwnProperty.call(t,R1)}const{assign:Ur}=Object;function F1(t){return!!(Rt(t)&&t.effect)}function L1(t,e,n,r){const{state:s,actions:i,getters:o}=e,a=n.state.value[t];let l;function c(){a||(n.state.value[t]=s?s():{});const u=Ud(n.state.value[t]);return Ur(u,i,Object.keys(o||{}).reduce((f,p)=>(f[p]=qd(Ve(()=>{cc(n);const g=n._s.get(t);return o[p].call(g,g)})),f),{}))}return l=bv(t,c,e,n,r,!0),l}function bv(t,e,n={},r,s,i){let o;const a=Ur({actions:{}},n),l={deep:!0};let c,u,f=[],p=[],g;const v=r.state.value[t];!i&&!v&&(r.state.value[t]={}),pe({});let _;function x(B){let P;c=u=!1,typeof B=="function"?(B(r.state.value[t]),P={type:Io.patchFunction,storeId:t,events:g}):(ld(r.state.value[t],B),P={type:Io.patchObject,payload:B,storeId:t,events:g});const Z=_=Symbol();ln().then(()=>{_===Z&&(c=!0)}),u=!0,ii(f,P,r.state.value[t])}const C=i?function(){const{state:P}=n,Z=P?P():{};this.$patch(Y=>{Ur(Y,Z)})}:vv;function S(){o.stop(),f=[],p=[],r._s.delete(t)}const A=(B,P="")=>{if(gp in B)return B[pu]=P,B;const Z=function(){cc(r);const Y=Array.from(arguments),z=[],fe=[];function me(Pe){z.push(Pe)}function Ae(Pe){fe.push(Pe)}ii(p,{args:Y,name:Z[pu],store:F,after:me,onError:Ae});let Ce;try{Ce=B.apply(this&&this.$id===t?this:F,Y)}catch(Pe){throw ii(fe,Pe),Pe}return Ce instanceof Promise?Ce.then(Pe=>(ii(z,Pe),Pe)).catch(Pe=>(ii(fe,Pe),Promise.reject(Pe))):(ii(z,Ce),Ce)};return Z[gp]=!0,Z[pu]=P,Z},O={_p:r,$id:t,$onAction:pp.bind(null,p),$patch:x,$reset:C,$subscribe(B,P={}){const Z=pp(f,B,P.detached,()=>Y()),Y=o.run(()=>Ht(()=>r.state.value[t],z=>{(P.flush==="sync"?u:c)&&B({storeId:t,type:Io.direct,events:g},z)},Ur({},l,P)));return Z},$dispose:S},F=Us(O);r._s.set(t,F);const D=(r._a&&r._a.runWithContext||D1)(()=>r._e.run(()=>(o=Jl()).run(()=>e({action:A}))));for(const B in D){const P=D[B];if(Rt(P)&&!F1(P)||Jr(P))i||(v&&$1(P)&&(Rt(P)?P.value=v[B]:ld(P,v[B])),r.state.value[t][B]=P);else if(typeof P=="function"){const Z=A(P,B);D[B]=Z,a.actions[B]=P}}return Ur(F,D),Ur(tt(F),D),Object.defineProperty(F,"$state",{get:()=>r.state.value[t],set:B=>{x(P=>{Ur(P,B)})}}),r._p.forEach(B=>{Ur(F,o.run(()=>B({store:F,app:r._a,pinia:r,options:a})))}),v&&i&&n.hydrate&&n.hydrate(F.$state,v),c=!0,u=!0,F}/*! #__NO_SIDE_EFFECTS__ */function uc(t,e,n){let r;const s=typeof e=="function";r=s?n:e;function i(o,a){const l=aw();return o=o||(l?In(yv,null):null),o&&cc(o),o=mv,o._s.has(t)||(s?bv(t,e,r,o):L1(t,r,o)),o._s.get(t)}return i.$id=t,i}const _i=uc("importStatus",()=>{const t=pe([]);return{imports:t,addImport:l=>{const c={...l,createdAt:new Date};return t.value.push(c),c.id},updateImport:(l,c)=>{const u=t.value.findIndex(f=>f.id===l);u!==-1&&(t.value[u]={...t.value[u],...c})},completeImport:(l,c)=>{const u=t.value.findIndex(f=>f.id===l);u!==-1&&(t.value[u]={...t.value[u],status:c?"failed":"completed",errorMessage:c,completedAt:new Date,progress:100})},removeImport:l=>{t.value=t.value.filter(c=>c.id!==l)},clearCompletedImports:()=>{t.value=t.value.filter(l=>l.status==="pending"||l.status==="processing")},getActiveImports:()=>t.value.filter(l=>l.status==="pending"||l.status==="processing"),getCompletedImports:()=>t.value.filter(l=>l.status==="completed"||l.status==="failed")}}),B1={key:0,class:"import-status-indicator",style:{width:"200px"}},j1={class:"d-flex justify-content-between align-items-baseline"},N1=["title"],z1={class:"small text-muted flex-shrink-0 ms-2"},q1={class:"progress mt-1"},U1=["aria-valuenow"],W1={class:"import-alerts position-fixed top-0 end-0 p-3",style:{"z-index":"1050"}},V1={class:"d-flex justify-content-between"},H1={key:0,class:"small"},K1=["onClick"],Y1=Ze({__name:"ImportStatusIndicator",setup(t){const e=_i(),n=Ve(()=>e.getActiveImports()),r=Ve(()=>e.getCompletedImports()),s=Ve(()=>n.value.length>0?n.value[0]:null),i=a=>{e.removeImport(a)};let o=null;return Mn(()=>{o=window.setInterval(()=>{const a=new Date;e.imports.forEach(l=>{if((l.status==="completed"||l.status==="failed")&&l.completedAt){const c=new Date(l.completedAt);a.getTime()-c.getTime()>5e3&&e.removeImport(l.id)}})},1e3)}),$i(()=>{o&&clearInterval(o)}),(a,l)=>(U(),J(et,null,[s.value?(U(),J("div",B1,[w("div",j1,[w("span",{class:"fw-medium small text-truncate",title:s.value.name},oe(s.value.name),9,N1),w("span",z1,oe(s.value.processedItems)+" / "+oe(s.value.totalItems),1)]),w("div",q1,[w("div",{class:"progress-bar",role:"progressbar",style:An({width:s.value.progress+"%"}),"aria-valuenow":s.value.progress,"aria-valuemin":"0","aria-valuemax":"100"},null,12,U1)])])):ke("",!0),w("div",W1,[Ue(cx,{name:"alert",tag:"div"},{default:at(()=>[(U(!0),J(et,null,Ft(r.value,c=>(U(),J("div",{key:c.id,class:At(["alert",c.status==="completed"?"alert-success":"alert-danger"]),role:"alert"},[w("div",V1,[w("div",null,[w("strong",null,oe(c.name),1),bt(" "+oe(c.status==="completed"?"import completed successfully!":"import failed.")+" ",1),c.errorMessage?(U(),J("div",H1,oe(c.errorMessage),1)):ke("",!0)]),w("button",{type:"button",class:"btn-close",onClick:u=>i(c.id)},null,8,K1)])],2))),128))]),_:1})])],64))}}),G1=gn(Y1,[["__scopeId","data-v-0987b82f"]]),X1={class:"navbar navbar-expand-md navbar-light glass fixed-top"},Q1={class:"container-fluid"},J1=["aria-expanded"],Z1={class:"nav-item"},ek={class:"nav-item"},tk={class:"nav-item"},nk={class:"nav-item"},rk={class:"d-flex align-items-center"},sk=Ze({__name:"Navigation",setup(t){const e=Jd(),n=Ve(()=>e.name==="decks"||e.name==="deck-detail"||e.name==="deck-import"),r=pe(!1),s=()=>{r.value=!r.value},i=pe(null),o=pe(null);let a=null;function l(g){const v=i.value,_=o.value;if(!v||!_||!g)return;const x=v.getBoundingClientRect(),C=g.getBoundingClientRect(),S=12,A=Math.max(32,Math.round(C.height*.72)),O=Math.max(C.width+S*2,80),F=C.left-x.left+v.scrollLeft-S,M=C.top-x.top+v.scrollTop+(C.height-A)/2;_.style.setProperty("--_x",`${F}px`),_.style.setProperty("--_y",`${M}px`),_.style.setProperty("--_w",`${O}px`),_.style.setProperty("--_h",`${A}px`),_.style.opacity="1";const D=getComputedStyle(g).color||getComputedStyle(document.documentElement).getPropertyValue("--bs-primary")||"#0d6efd";_.style.setProperty("--nav-accent",D.trim())}function c(){return i.value?.querySelector(".nav-link.active")}function u(){const g=c();g&&l(g)}function f(g){const v=g.currentTarget;v&&l(v)}function p(){i.value&&(a=new ResizeObserver(()=>u()),a.observe(i.value),window.addEventListener("resize",u,{passive:!0}))}return Mn(async()=>{await ln();const g=c()||i.value?.querySelector(".nav-link");g&&l(g),p()}),rc(()=>{a&&i.value&&a.unobserve(i.value),window.removeEventListener("resize",u)}),Ht(()=>e.fullPath,()=>ln().then(u)),Ht(r,()=>ln().then(u)),(g,v)=>{const _=Ci("router-link");return U(),J("nav",X1,[w("div",Q1,[Ue(_,{to:"/",class:"navbar-brand"},{default:at(()=>[...v[0]||(v[0]=[w("img",{style:{"max-width":"48px"},src:kx,alt:"logo"},null,-1),bt(" MTG Collection Tracker ",-1)])]),_:1}),w("button",{class:"navbar-toggler",type:"button",onClick:s,"aria-controls":"navbarNav","aria-expanded":r.value,"aria-label":"Toggle navigation"},[...v[1]||(v[1]=[w("span",{class:"navbar-toggler-icon"},null,-1)])],8,J1),w("div",{id:"navbarNav",class:At(["collapse navbar-collapse",{show:r.value}])},[w("ul",{class:"navbar-nav me-auto",ref_key:"navList",ref:i,onMouseleave:u},[w("div",{class:"nav-bubble",ref_key:"bubble",ref:o,"aria-hidden":"true"},null,512),w("li",Z1,[Ue(_,{to:"/",class:At(["nav-link",{active:$e(e).name==="home"}]),onMouseenter:f,onFocusin:f},{default:at(()=>[...v[2]||(v[2]=[bt("Dashboard",-1)])]),_:1},8,["class"])]),w("li",ek,[Ue(_,{to:"/decks",class:At(["nav-link",{active:n.value}]),onMouseenter:f,onFocusin:f},{default:at(()=>[...v[3]||(v[3]=[bt("Decks",-1)])]),_:1},8,["class"])]),w("li",tk,[Ue(_,{to:"/cards",class:At(["nav-link",{active:$e(e).name==="cards"}]),onMouseenter:f,onFocusin:f},{default:at(()=>[...v[4]||(v[4]=[bt("Cards",-1)])]),_:1},8,["class"])]),w("li",nk,[Ue(_,{to:"/import",class:At(["nav-link",{active:$e(e).path.startsWith("/import")}]),onMouseenter:f,onFocusin:f},{default:at(()=>[...v[5]||(v[5]=[bt("Data Import",-1)])]),_:1},8,["class"])])],544),w("div",rk,[Ue(G1),Ue(M1)])],2)])])}}}),ik={class:"noise-overlay","aria-hidden":"true"},ok=Ze({__name:"NoiseOverlay",setup(t){return(e,n)=>(U(),J("div",ik))}}),ak=gn(ok,[["__scopeId","data-v-63a7b15c"]]),lk={class:"container-lg",style:{"padding-top":"calc(var(--app-navbar-h) + 1.5rem)","padding-bottom":"1.5rem"}},ck=Ze({__name:"App",setup(t){return(e,n)=>{const r=Ci("router-view");return U(),J(et,null,[Ue(ak),Ue(sk),w("main",lk,[Ue(r)])],64)}}});var uk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _v(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function dk(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){var s=!1;try{s=this instanceof r}catch{}return s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var hl={exports:{}},fk=hl.exports,mp;function hk(){return mp||(mp=1,(function(t,e){(function(n,r){t.exports=r()})(fk,function(){var n=function(d,h){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,y){m.__proto__=y}||function(m,y){for(var b in y)Object.prototype.hasOwnProperty.call(y,b)&&(m[b]=y[b])})(d,h)},r=function(){return(r=Object.assign||function(d){for(var h,m=1,y=arguments.length;m<y;m++)for(var b in h=arguments[m])Object.prototype.hasOwnProperty.call(h,b)&&(d[b]=h[b]);return d}).apply(this,arguments)};function s(d,h,m){for(var y,b=0,k=h.length;b<k;b++)!y&&b in h||((y=y||Array.prototype.slice.call(h,0,b))[b]=h[b]);return d.concat(y||Array.prototype.slice.call(h))}var i=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:uk,o=Object.keys,a=Array.isArray;function l(d,h){return typeof h!="object"||o(h).forEach(function(m){d[m]=h[m]}),d}typeof Promise>"u"||i.Promise||(i.Promise=Promise);var c=Object.getPrototypeOf,u={}.hasOwnProperty;function f(d,h){return u.call(d,h)}function p(d,h){typeof h=="function"&&(h=h(c(d))),(typeof Reflect>"u"?o:Reflect.ownKeys)(h).forEach(function(m){v(d,m,h[m])})}var g=Object.defineProperty;function v(d,h,m,y){g(d,h,l(m&&f(m,"get")&&typeof m.get=="function"?{get:m.get,set:m.set,configurable:!0}:{value:m,configurable:!0,writable:!0},y))}function _(d){return{from:function(h){return d.prototype=Object.create(h.prototype),v(d.prototype,"constructor",d),{extend:p.bind(null,d.prototype)}}}}var x=Object.getOwnPropertyDescriptor,C=[].slice;function S(d,h,m){return C.call(d,h,m)}function A(d,h){return h(d)}function O(d){if(!d)throw new Error("Assertion Failed")}function F(d){i.setImmediate?setImmediate(d):setTimeout(d,0)}function M(d,h){if(typeof h=="string"&&f(d,h))return d[h];if(!h)return d;if(typeof h!="string"){for(var m=[],y=0,b=h.length;y<b;++y){var k=M(d,h[y]);m.push(k)}return m}var I=h.indexOf(".");if(I!==-1){var T=d[h.substr(0,I)];return T==null?void 0:M(T,h.substr(I+1))}}function D(d,h,m){if(d&&h!==void 0&&!("isFrozen"in Object&&Object.isFrozen(d)))if(typeof h!="string"&&"length"in h){O(typeof m!="string"&&"length"in m);for(var y=0,b=h.length;y<b;++y)D(d,h[y],m[y])}else{var k,I,T=h.indexOf(".");T!==-1?(k=h.substr(0,T),(I=h.substr(T+1))===""?m===void 0?a(d)&&!isNaN(parseInt(k))?d.splice(k,1):delete d[k]:d[k]=m:D(T=!(T=d[k])||!f(d,k)?d[k]={}:T,I,m)):m===void 0?a(d)&&!isNaN(parseInt(h))?d.splice(h,1):delete d[h]:d[h]=m}}function B(d){var h,m={};for(h in d)f(d,h)&&(m[h]=d[h]);return m}var P=[].concat;function Z(d){return P.apply([],d)}var Ge="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Z([8,16,32,64].map(function(d){return["Int","Uint","Float"].map(function(h){return h+d+"Array"})}))).filter(function(d){return i[d]}),Y=new Set(Ge.map(function(d){return i[d]})),z=null;function fe(d){return z=new WeakMap,d=(function h(m){if(!m||typeof m!="object")return m;var y=z.get(m);if(y)return y;if(a(m)){y=[],z.set(m,y);for(var b=0,k=m.length;b<k;++b)y.push(h(m[b]))}else if(Y.has(m.constructor))y=m;else{var I,T=c(m);for(I in y=T===Object.prototype?{}:Object.create(T),z.set(m,y),m)f(m,I)&&(y[I]=h(m[I]))}return y})(d),z=null,d}var me={}.toString;function Ae(d){return me.call(d).slice(8,-1)}var Ce=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Pe=typeof Ce=="symbol"?function(d){var h;return d!=null&&(h=d[Ce])&&h.apply(d)}:function(){return null};function te(d,h){return h=d.indexOf(h),0<=h&&d.splice(h,1),0<=h}var ee={};function G(d){var h,m,y,b;if(arguments.length===1){if(a(d))return d.slice();if(this===ee&&typeof d=="string")return[d];if(b=Pe(d)){for(m=[];!(y=b.next()).done;)m.push(y.value);return m}if(d==null)return[d];if(typeof(h=d.length)!="number")return[d];for(m=new Array(h);h--;)m[h]=d[h];return m}for(h=arguments.length,m=new Array(h);h--;)m[h]=arguments[h];return m}var Le=typeof Symbol<"u"?function(d){return d[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},qe=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Tn=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(qe),we={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function We(d,h){this.name=d,this.message=h}function wt(d,h){return d+". Errors: "+Object.keys(h).map(function(m){return h[m].toString()}).filter(function(m,y,b){return b.indexOf(m)===y}).join(`
`)}function gt(d,h,m,y){this.failures=h,this.failedKeys=y,this.successCount=m,this.message=wt(d,h)}function st(d,h){this.name="BulkError",this.failures=Object.keys(h).map(function(m){return h[m]}),this.failuresByPos=h,this.message=wt(d,this.failures)}_(We).from(Error).extend({toString:function(){return this.name+": "+this.message}}),_(gt).from(We),_(st).from(We);var ae=Tn.reduce(function(d,h){return d[h]=h+"Error",d},{}),Me=We,re=Tn.reduce(function(d,h){var m=h+"Error";function y(b,k){this.name=m,b?typeof b=="string"?(this.message="".concat(b).concat(k?`
 `+k:""),this.inner=k||null):typeof b=="object"&&(this.message="".concat(b.name," ").concat(b.message),this.inner=b):(this.message=we[h]||m,this.inner=null)}return _(y).from(Me),d[h]=y,d},{});re.Syntax=SyntaxError,re.Type=TypeError,re.Range=RangeError;var Fe=qe.reduce(function(d,h){return d[h+"Error"]=re[h],d},{}),nt=Tn.reduce(function(d,h){return["Syntax","Type","Range"].indexOf(h)===-1&&(d[h+"Error"]=re[h]),d},{});function E(){}function $(d){return d}function Q(d,h){return d==null||d===$?h:function(m){return h(d(m))}}function le(d,h){return function(){d.apply(this,arguments),h.apply(this,arguments)}}function de(d,h){return d===E?h:function(){var m=d.apply(this,arguments);m!==void 0&&(arguments[0]=m);var y=this.onsuccess,b=this.onerror;this.onsuccess=null,this.onerror=null;var k=h.apply(this,arguments);return y&&(this.onsuccess=this.onsuccess?le(y,this.onsuccess):y),b&&(this.onerror=this.onerror?le(b,this.onerror):b),k!==void 0?k:m}}function ce(d,h){return d===E?h:function(){d.apply(this,arguments);var m=this.onsuccess,y=this.onerror;this.onsuccess=this.onerror=null,h.apply(this,arguments),m&&(this.onsuccess=this.onsuccess?le(m,this.onsuccess):m),y&&(this.onerror=this.onerror?le(y,this.onerror):y)}}function Ie(d,h){return d===E?h:function(m){var y=d.apply(this,arguments);l(m,y);var b=this.onsuccess,k=this.onerror;return this.onsuccess=null,this.onerror=null,m=h.apply(this,arguments),b&&(this.onsuccess=this.onsuccess?le(b,this.onsuccess):b),k&&(this.onerror=this.onerror?le(k,this.onerror):k),y===void 0?m===void 0?void 0:m:l(y,m)}}function xe(d,h){return d===E?h:function(){return h.apply(this,arguments)!==!1&&d.apply(this,arguments)}}function be(d,h){return d===E?h:function(){var m=d.apply(this,arguments);if(m&&typeof m.then=="function"){for(var y=this,b=arguments.length,k=new Array(b);b--;)k[b]=arguments[b];return m.then(function(){return h.apply(y,k)})}return h.apply(this,arguments)}}nt.ModifyError=gt,nt.DexieError=We,nt.BulkError=st;var he=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Ne(d){he=d}var Ee={},je=100,Ge=typeof Promise>"u"?[]:(function(){var d=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[d,c(d),d];var h=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[h,c(h),d]})(),qe=Ge[0],Tn=Ge[1],Ge=Ge[2],Tn=Tn&&Tn.then,it=qe&&qe.constructor,lt=!!Ge,$t=function(d,h){Tr.push([d,h]),un&&(queueMicrotask(__),un=!1)},jt=!0,un=!0,Nt=[],Yn=[],Gs=$,Et={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:E,pgp:!1,env:{},finalize:E},Re=Et,Tr=[],Gn=0,da=[];function Te(d){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var h=this._PSD=Re;if(typeof d!="function"){if(d!==Ee)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Pc(this,this._value))}this._state=null,this._value=null,++h.ref,(function m(y,b){try{b(function(k){if(y._state===null){if(k===y)throw new TypeError("A promise cannot be resolved with itself.");var I=y._lib&&Xs();k&&typeof k.then=="function"?m(y,function(T,L){k instanceof Te?k._then(T,L):k.then(T,L)}):(y._state=!0,y._value=k,Df(y)),I&&Qs()}},Pc.bind(null,y))}catch(k){Pc(y,k)}})(this,d)}var Sc={get:function(){var d=Re,h=ga;function m(y,b){var k=this,I=!d.global&&(d!==Re||h!==ga),T=I&&!Rr(),L=new Te(function(N,W){Ac(k,new Tf($f(y,d,I,T),$f(b,d,I,T),N,W,d))});return this._consoleTask&&(L._consoleTask=this._consoleTask),L}return m.prototype=Ee,m},set:function(d){v(this,"then",d&&d.prototype===Ee?Sc:{get:function(){return d},set:Sc.set})}};function Tf(d,h,m,y,b){this.onFulfilled=typeof d=="function"?d:null,this.onRejected=typeof h=="function"?h:null,this.resolve=m,this.reject=y,this.psd=b}function Pc(d,h){var m,y;Yn.push(h),d._state===null&&(m=d._lib&&Xs(),h=Gs(h),d._state=!1,d._value=h,y=d,Nt.some(function(b){return b._value===y._value})||Nt.push(y),Df(d),m&&Qs())}function Df(d){var h=d._listeners;d._listeners=[];for(var m=0,y=h.length;m<y;++m)Ac(d,h[m]);var b=d._PSD;--b.ref||b.finalize(),Gn===0&&(++Gn,$t(function(){--Gn==0&&Ic()},[]))}function Ac(d,h){if(d._state!==null){var m=d._state?h.onFulfilled:h.onRejected;if(m===null)return(d._state?h.resolve:h.reject)(d._value);++h.psd.ref,++Gn,$t(b_,[m,d,h])}else d._listeners.push(h)}function b_(d,h,m){try{var y,b=h._value;!h._state&&Yn.length&&(Yn=[]),y=he&&h._consoleTask?h._consoleTask.run(function(){return d(b)}):d(b),h._state||Yn.indexOf(b)!==-1||(function(k){for(var I=Nt.length;I;)if(Nt[--I]._value===k._value)return Nt.splice(I,1)})(h),m.resolve(y)}catch(k){m.reject(k)}finally{--Gn==0&&Ic(),--m.psd.ref||m.psd.finalize()}}function __(){cs(Et,function(){Xs()&&Qs()})}function Xs(){var d=jt;return un=jt=!1,d}function Qs(){var d,h,m;do for(;0<Tr.length;)for(d=Tr,Tr=[],m=d.length,h=0;h<m;++h){var y=d[h];y[0].apply(null,y[1])}while(0<Tr.length);un=jt=!0}function Ic(){var d=Nt;Nt=[],d.forEach(function(y){y._PSD.onunhandled.call(null,y._value,y)});for(var h=da.slice(0),m=h.length;m;)h[--m]()}function fa(d){return new Te(Ee,!1,d)}function St(d,h){var m=Re;return function(){var y=Xs(),b=Re;try{return $r(m,!0),d.apply(this,arguments)}catch(k){h&&h(k)}finally{$r(b,!1),y&&Qs()}}}p(Te.prototype,{then:Sc,_then:function(d,h){Ac(this,new Tf(null,null,d,h,Re))},catch:function(d){if(arguments.length===1)return this.then(null,d);var h=d,m=arguments[1];return typeof h=="function"?this.then(null,function(y){return(y instanceof h?m:fa)(y)}):this.then(null,function(y){return(y&&y.name===h?m:fa)(y)})},finally:function(d){return this.then(function(h){return Te.resolve(d()).then(function(){return h})},function(h){return Te.resolve(d()).then(function(){return fa(h)})})},timeout:function(d,h){var m=this;return d<1/0?new Te(function(y,b){var k=setTimeout(function(){return b(new re.Timeout(h))},d);m.then(y,b).finally(clearTimeout.bind(null,k))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&v(Te.prototype,Symbol.toStringTag,"Dexie.Promise"),Et.env=Rf(),p(Te,{all:function(){var d=G.apply(null,arguments).map(ma);return new Te(function(h,m){d.length===0&&h([]);var y=d.length;d.forEach(function(b,k){return Te.resolve(b).then(function(I){d[k]=I,--y||h(d)},m)})})},resolve:function(d){return d instanceof Te?d:d&&typeof d.then=="function"?new Te(function(h,m){d.then(h,m)}):new Te(Ee,!0,d)},reject:fa,race:function(){var d=G.apply(null,arguments).map(ma);return new Te(function(h,m){d.map(function(y){return Te.resolve(y).then(h,m)})})},PSD:{get:function(){return Re},set:function(d){return Re=d}},totalEchoes:{get:function(){return ga}},newPSD:Dr,usePSD:cs,scheduler:{get:function(){return $t},set:function(d){$t=d}},rejectionMapper:{get:function(){return Gs},set:function(d){Gs=d}},follow:function(d,h){return new Te(function(m,y){return Dr(function(b,k){var I=Re;I.unhandleds=[],I.onunhandled=k,I.finalize=le(function(){var T,L=this;T=function(){L.unhandleds.length===0?b():k(L.unhandleds[0])},da.push(function N(){T(),da.splice(da.indexOf(N),1)}),++Gn,$t(function(){--Gn==0&&Ic()},[])},I.finalize),d()},h,m,y)})}}),it&&(it.allSettled&&v(Te,"allSettled",function(){var d=G.apply(null,arguments).map(ma);return new Te(function(h){d.length===0&&h([]);var m=d.length,y=new Array(m);d.forEach(function(b,k){return Te.resolve(b).then(function(I){return y[k]={status:"fulfilled",value:I}},function(I){return y[k]={status:"rejected",reason:I}}).then(function(){return--m||h(y)})})})}),it.any&&typeof AggregateError<"u"&&v(Te,"any",function(){var d=G.apply(null,arguments).map(ma);return new Te(function(h,m){d.length===0&&m(new AggregateError([]));var y=d.length,b=new Array(y);d.forEach(function(k,I){return Te.resolve(k).then(function(T){return h(T)},function(T){b[I]=T,--y||m(new AggregateError(b))})})})}),it.withResolvers&&(Te.withResolvers=it.withResolvers));var zt={awaits:0,echoes:0,id:0},w_=0,ha=[],pa=0,ga=0,x_=0;function Dr(d,h,m,y){var b=Re,k=Object.create(b);return k.parent=b,k.ref=0,k.global=!1,k.id=++x_,Et.env,k.env=lt?{Promise:Te,PromiseProp:{value:Te,configurable:!0,writable:!0},all:Te.all,race:Te.race,allSettled:Te.allSettled,any:Te.any,resolve:Te.resolve,reject:Te.reject}:{},h&&l(k,h),++b.ref,k.finalize=function(){--this.parent.ref||this.parent.finalize()},y=cs(k,d,m,y),k.ref===0&&k.finalize(),y}function Js(){return zt.id||(zt.id=++w_),++zt.awaits,zt.echoes+=je,zt.id}function Rr(){return!!zt.awaits&&(--zt.awaits==0&&(zt.id=0),zt.echoes=zt.awaits*je,!0)}function ma(d){return zt.echoes&&d&&d.constructor===it?(Js(),d.then(function(h){return Rr(),h},function(h){return Rr(),Tt(h)})):d}function k_(){var d=ha[ha.length-1];ha.pop(),$r(d,!1)}function $r(d,h){var m,y=Re;(h?!zt.echoes||pa++&&d===Re:!pa||--pa&&d===Re)||queueMicrotask(h?(function(b){++ga,zt.echoes&&--zt.echoes!=0||(zt.echoes=zt.awaits=zt.id=0),ha.push(Re),$r(b,!0)}).bind(null,d):k_),d!==Re&&(Re=d,y===Et&&(Et.env=Rf()),lt&&(m=Et.env.Promise,h=d.env,(y.global||d.global)&&(Object.defineProperty(i,"Promise",h.PromiseProp),m.all=h.all,m.race=h.race,m.resolve=h.resolve,m.reject=h.reject,h.allSettled&&(m.allSettled=h.allSettled),h.any&&(m.any=h.any))))}function Rf(){var d=i.Promise;return lt?{Promise:d,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:d.all,race:d.race,allSettled:d.allSettled,any:d.any,resolve:d.resolve,reject:d.reject}:{}}function cs(d,h,m,y,b){var k=Re;try{return $r(d,!0),h(m,y,b)}finally{$r(k,!1)}}function $f(d,h,m,y){return typeof d!="function"?d:function(){var b=Re;m&&Js(),$r(h,!0);try{return d.apply(this,arguments)}finally{$r(b,!1),y&&queueMicrotask(Rr)}}}function Ec(d){Promise===it&&zt.echoes===0?pa===0?d():enqueueNativeMicroTask(d):setTimeout(d,0)}(""+Tn).indexOf("[native code]")===-1&&(Js=Rr=E);var Tt=Te.reject,us="￿",dr="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Ff="String expected.",Zs=[],ya="__dbnames",Oc="readonly",Mc="readwrite";function ds(d,h){return d?h?function(){return d.apply(this,arguments)&&h.apply(this,arguments)}:d:h}var Lf={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function va(d){return typeof d!="string"||/\./.test(d)?function(h){return h}:function(h){return h[d]===void 0&&d in h&&delete(h=fe(h))[d],h}}function Bf(){throw re.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function rt(d,h){try{var m=jf(d),y=jf(h);if(m!==y)return m==="Array"?1:y==="Array"?-1:m==="binary"?1:y==="binary"?-1:m==="string"?1:y==="string"?-1:m==="Date"?1:y!=="Date"?NaN:-1;switch(m){case"number":case"Date":case"string":return h<d?1:d<h?-1:0;case"binary":return(function(b,k){for(var I=b.length,T=k.length,L=I<T?I:T,N=0;N<L;++N)if(b[N]!==k[N])return b[N]<k[N]?-1:1;return I===T?0:I<T?-1:1})(Nf(d),Nf(h));case"Array":return(function(b,k){for(var I=b.length,T=k.length,L=I<T?I:T,N=0;N<L;++N){var W=rt(b[N],k[N]);if(W!==0)return W}return I===T?0:I<T?-1:1})(d,h)}}catch{}return NaN}function jf(d){var h=typeof d;return h!="object"?h:ArrayBuffer.isView(d)?"binary":(d=Ae(d),d==="ArrayBuffer"?"binary":d)}function Nf(d){return d instanceof Uint8Array?d:ArrayBuffer.isView(d)?new Uint8Array(d.buffer,d.byteOffset,d.byteLength):new Uint8Array(d)}function ba(d,h,m){var y=d.schema.yProps;return y?(h&&0<m.numFailures&&(h=h.filter(function(b,k){return!m.failures[k]})),Promise.all(y.map(function(b){return b=b.updatesTable,h?d.db.table(b).where("k").anyOf(h).delete():d.db.table(b).clear()})).then(function(){return m})):m}var zf=(xt.prototype._trans=function(d,h,m){var y=this._tx||Re.trans,b=this.name,k=he&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(d==="readonly"?"read":"write"," ").concat(this.name));function I(N,W,R){if(!R.schema[b])throw new re.NotFound("Table "+b+" not part of transaction");return h(R.idbtrans,R)}var T=Xs();try{var L=y&&y.db._novip===this.db._novip?y===Re.trans?y._promise(d,I,m):Dr(function(){return y._promise(d,I,m)},{trans:y,transless:Re.transless||Re}):(function N(W,R,K,j){if(W.idbdb&&(W._state.openComplete||Re.letThrough||W._vip)){var q=W._createTransaction(R,K,W._dbSchema);try{q.create(),W._state.PR1398_maxLoop=3}catch(H){return H.name===ae.InvalidState&&W.isOpen()&&0<--W._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),W.close({disableAutoOpen:!1}),W.open().then(function(){return N(W,R,K,j)})):Tt(H)}return q._promise(R,function(H,V){return Dr(function(){return Re.trans=q,j(H,V,q)})}).then(function(H){if(R==="readwrite")try{q.idbtrans.commit()}catch{}return R==="readonly"?H:q._completion.then(function(){return H})})}if(W._state.openComplete)return Tt(new re.DatabaseClosed(W._state.dbOpenError));if(!W._state.isBeingOpened){if(!W._state.autoOpen)return Tt(new re.DatabaseClosed);W.open().catch(E)}return W._state.dbReadyPromise.then(function(){return N(W,R,K,j)})})(this.db,d,[this.name],I);return k&&(L._consoleTask=k,L=L.catch(function(N){return console.trace(N),Tt(N)})),L}finally{T&&Qs()}},xt.prototype.get=function(d,h){var m=this;return d&&d.constructor===Object?this.where(d).first(h):d==null?Tt(new re.Type("Invalid argument to Table.get()")):this._trans("readonly",function(y){return m.core.get({trans:y,key:d}).then(function(b){return m.hook.reading.fire(b)})}).then(h)},xt.prototype.where=function(d){if(typeof d=="string")return new this.db.WhereClause(this,d);if(a(d))return new this.db.WhereClause(this,"[".concat(d.join("+"),"]"));var h=o(d);if(h.length===1)return this.where(h[0]).equals(d[h[0]]);var m=this.schema.indexes.concat(this.schema.primKey).filter(function(T){if(T.compound&&h.every(function(N){return 0<=T.keyPath.indexOf(N)})){for(var L=0;L<h.length;++L)if(h.indexOf(T.keyPath[L])===-1)return!1;return!0}return!1}).sort(function(T,L){return T.keyPath.length-L.keyPath.length})[0];if(m&&this.db._maxKey!==us){var k=m.keyPath.slice(0,h.length);return this.where(k).equals(k.map(function(L){return d[L]}))}!m&&he&&console.warn("The query ".concat(JSON.stringify(d)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(h.join("+"),"]"));var y=this.schema.idxByName;function b(T,L){return rt(T,L)===0}var I=h.reduce(function(R,L){var N=R[0],W=R[1],R=y[L],K=d[L];return[N||R,N||!R?ds(W,R&&R.multi?function(j){return j=M(j,L),a(j)&&j.some(function(q){return b(K,q)})}:function(j){return b(K,M(j,L))}):W]},[null,null]),k=I[0],I=I[1];return k?this.where(k.name).equals(d[k.keyPath]).filter(I):m?this.filter(I):this.where(h).equals("")},xt.prototype.filter=function(d){return this.toCollection().and(d)},xt.prototype.count=function(d){return this.toCollection().count(d)},xt.prototype.offset=function(d){return this.toCollection().offset(d)},xt.prototype.limit=function(d){return this.toCollection().limit(d)},xt.prototype.each=function(d){return this.toCollection().each(d)},xt.prototype.toArray=function(d){return this.toCollection().toArray(d)},xt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},xt.prototype.orderBy=function(d){return new this.db.Collection(new this.db.WhereClause(this,a(d)?"[".concat(d.join("+"),"]"):d))},xt.prototype.reverse=function(){return this.toCollection().reverse()},xt.prototype.mapToClass=function(d){var h,m=this.db,y=this.name;function b(){return h!==null&&h.apply(this,arguments)||this}(this.schema.mappedClass=d).prototype instanceof Bf&&((function(L,N){if(typeof N!="function"&&N!==null)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function W(){this.constructor=L}n(L,N),L.prototype=N===null?Object.create(N):(W.prototype=N.prototype,new W)})(b,h=d),Object.defineProperty(b.prototype,"db",{get:function(){return m},enumerable:!1,configurable:!0}),b.prototype.table=function(){return y},d=b);for(var k=new Set,I=d.prototype;I;I=c(I))Object.getOwnPropertyNames(I).forEach(function(L){return k.add(L)});function T(L){if(!L)return L;var N,W=Object.create(d.prototype);for(N in L)if(!k.has(N))try{W[N]=L[N]}catch{}return W}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=T,this.hook("reading",T),d},xt.prototype.defineClass=function(){return this.mapToClass(function(d){l(this,d)})},xt.prototype.add=function(d,h){var m=this,y=this.schema.primKey,b=y.auto,k=y.keyPath,I=d;return k&&b&&(I=va(k)(d)),this._trans("readwrite",function(T){return m.core.mutate({trans:T,type:"add",keys:h!=null?[h]:null,values:[I]})}).then(function(T){return T.numFailures?Te.reject(T.failures[0]):T.lastResult}).then(function(T){if(k)try{D(d,k,T)}catch{}return T})},xt.prototype.update=function(d,h){return typeof d!="object"||a(d)?this.where(":id").equals(d).modify(h):(d=M(d,this.schema.primKey.keyPath),d===void 0?Tt(new re.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(d).modify(h))},xt.prototype.put=function(d,h){var m=this,y=this.schema.primKey,b=y.auto,k=y.keyPath,I=d;return k&&b&&(I=va(k)(d)),this._trans("readwrite",function(T){return m.core.mutate({trans:T,type:"put",values:[I],keys:h!=null?[h]:null})}).then(function(T){return T.numFailures?Te.reject(T.failures[0]):T.lastResult}).then(function(T){if(k)try{D(d,k,T)}catch{}return T})},xt.prototype.delete=function(d){var h=this;return this._trans("readwrite",function(m){return h.core.mutate({trans:m,type:"delete",keys:[d]}).then(function(y){return ba(h,[d],y)}).then(function(y){return y.numFailures?Te.reject(y.failures[0]):void 0})})},xt.prototype.clear=function(){var d=this;return this._trans("readwrite",function(h){return d.core.mutate({trans:h,type:"deleteRange",range:Lf}).then(function(m){return ba(d,null,m)})}).then(function(h){return h.numFailures?Te.reject(h.failures[0]):void 0})},xt.prototype.bulkGet=function(d){var h=this;return this._trans("readonly",function(m){return h.core.getMany({keys:d,trans:m}).then(function(y){return y.map(function(b){return h.hook.reading.fire(b)})})})},xt.prototype.bulkAdd=function(d,h,m){var y=this,b=Array.isArray(h)?h:void 0,k=(m=m||(b?void 0:h))?m.allKeys:void 0;return this._trans("readwrite",function(I){var N=y.schema.primKey,T=N.auto,N=N.keyPath;if(N&&b)throw new re.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(b&&b.length!==d.length)throw new re.InvalidArgument("Arguments objects and keys must have the same length");var L=d.length,N=N&&T?d.map(va(N)):d;return y.core.mutate({trans:I,type:"add",keys:b,values:N,wantResults:k}).then(function(q){var R=q.numFailures,K=q.results,j=q.lastResult,q=q.failures;if(R===0)return k?K:j;throw new st("".concat(y.name,".bulkAdd(): ").concat(R," of ").concat(L," operations failed"),q)})})},xt.prototype.bulkPut=function(d,h,m){var y=this,b=Array.isArray(h)?h:void 0,k=(m=m||(b?void 0:h))?m.allKeys:void 0;return this._trans("readwrite",function(I){var N=y.schema.primKey,T=N.auto,N=N.keyPath;if(N&&b)throw new re.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(b&&b.length!==d.length)throw new re.InvalidArgument("Arguments objects and keys must have the same length");var L=d.length,N=N&&T?d.map(va(N)):d;return y.core.mutate({trans:I,type:"put",keys:b,values:N,wantResults:k}).then(function(q){var R=q.numFailures,K=q.results,j=q.lastResult,q=q.failures;if(R===0)return k?K:j;throw new st("".concat(y.name,".bulkPut(): ").concat(R," of ").concat(L," operations failed"),q)})})},xt.prototype.bulkUpdate=function(d){var h=this,m=this.core,y=d.map(function(I){return I.key}),b=d.map(function(I){return I.changes}),k=[];return this._trans("readwrite",function(I){return m.getMany({trans:I,keys:y,cache:"clone"}).then(function(T){var L=[],N=[];d.forEach(function(R,K){var j=R.key,q=R.changes,H=T[K];if(H){for(var V=0,X=Object.keys(q);V<X.length;V++){var ne=X[V],se=q[ne];if(ne===h.schema.primKey.keyPath){if(rt(se,j)!==0)throw new re.Constraint("Cannot update primary key in bulkUpdate()")}else D(H,ne,se)}k.push(K),L.push(j),N.push(H)}});var W=L.length;return m.mutate({trans:I,type:"put",keys:L,values:N,updates:{keys:y,changeSpecs:b}}).then(function(R){var K=R.numFailures,j=R.failures;if(K===0)return W;for(var q=0,H=Object.keys(j);q<H.length;q++){var V,X=H[q],ne=k[Number(X)];ne!=null&&(V=j[X],delete j[X],j[ne]=V)}throw new st("".concat(h.name,".bulkUpdate(): ").concat(K," of ").concat(W," operations failed"),j)})})})},xt.prototype.bulkDelete=function(d){var h=this,m=d.length;return this._trans("readwrite",function(y){return h.core.mutate({trans:y,type:"delete",keys:d}).then(function(b){return ba(h,d,b)})}).then(function(I){var b=I.numFailures,k=I.lastResult,I=I.failures;if(b===0)return k;throw new st("".concat(h.name,".bulkDelete(): ").concat(b," of ").concat(m," operations failed"),I)})},xt);function xt(){}function Ni(d){function h(I,T){if(T){for(var L=arguments.length,N=new Array(L-1);--L;)N[L-1]=arguments[L];return m[I].subscribe.apply(null,N),d}if(typeof I=="string")return m[I]}var m={};h.addEventType=k;for(var y=1,b=arguments.length;y<b;++y)k(arguments[y]);return h;function k(I,T,L){if(typeof I!="object"){var N;T=T||xe;var W={subscribers:[],fire:L=L||E,subscribe:function(R){W.subscribers.indexOf(R)===-1&&(W.subscribers.push(R),W.fire=T(W.fire,R))},unsubscribe:function(R){W.subscribers=W.subscribers.filter(function(K){return K!==R}),W.fire=W.subscribers.reduce(T,L)}};return m[I]=h[I]=W}o(N=I).forEach(function(R){var K=N[R];if(a(K))k(R,N[R][0],N[R][1]);else{if(K!=="asap")throw new re.InvalidArgument("Invalid event config");var j=k(R,$,function(){for(var q=arguments.length,H=new Array(q);q--;)H[q]=arguments[q];j.subscribers.forEach(function(V){F(function(){V.apply(null,H)})})})}})}}function zi(d,h){return _(h).from({prototype:d}),h}function ei(d,h){return!(d.filter||d.algorithm||d.or)&&(h?d.justLimit:!d.replayFilter)}function Tc(d,h){d.filter=ds(d.filter,h)}function Dc(d,h,m){var y=d.replayFilter;d.replayFilter=y?function(){return ds(y(),h())}:h,d.justLimit=m&&!y}function _a(d,h){if(d.isPrimKey)return h.primaryKey;var m=h.getIndexByKeyPath(d.index);if(!m)throw new re.Schema("KeyPath "+d.index+" on object store "+h.name+" is not indexed");return m}function qf(d,h,m){var y=_a(d,h.schema);return h.openCursor({trans:m,values:!d.keysOnly,reverse:d.dir==="prev",unique:!!d.unique,query:{index:y,range:d.range}})}function wa(d,h,m,y){var b=d.replayFilter?ds(d.filter,d.replayFilter()):d.filter;if(d.or){var k={},I=function(T,L,N){var W,R;b&&!b(L,N,function(K){return L.stop(K)},function(K){return L.fail(K)})||((R=""+(W=L.primaryKey))=="[object ArrayBuffer]"&&(R=""+new Uint8Array(W)),f(k,R)||(k[R]=!0,h(T,L,N)))};return Promise.all([d.or._iterate(I,m),Uf(qf(d,y,m),d.algorithm,I,!d.keysOnly&&d.valueMapper)])}return Uf(qf(d,y,m),ds(d.algorithm,b),h,!d.keysOnly&&d.valueMapper)}function Uf(d,h,m,y){var b=St(y?function(k,I,T){return m(y(k),I,T)}:m);return d.then(function(k){if(k)return k.start(function(){var I=function(){return k.continue()};h&&!h(k,function(T){return I=T},function(T){k.stop(T),I=E},function(T){k.fail(T),I=E})||b(k.value,k,function(T){return I=T}),I()})})}var qi=(Wf.prototype.execute=function(d){var h=this["@@propmod"];if(h.add!==void 0){var m=h.add;if(a(m))return s(s([],a(d)?d:[],!0),m).sort();if(typeof m=="number")return(Number(d)||0)+m;if(typeof m=="bigint")try{return BigInt(d)+m}catch{return BigInt(0)+m}throw new TypeError("Invalid term ".concat(m))}if(h.remove!==void 0){var y=h.remove;if(a(y))return a(d)?d.filter(function(b){return!y.includes(b)}).sort():[];if(typeof y=="number")return Number(d)-y;if(typeof y=="bigint")try{return BigInt(d)-y}catch{return BigInt(0)-y}throw new TypeError("Invalid subtrahend ".concat(y))}return m=(m=h.replacePrefix)===null||m===void 0?void 0:m[0],m&&typeof d=="string"&&d.startsWith(m)?h.replacePrefix[1]+d.substring(m.length):d},Wf);function Wf(d){this["@@propmod"]=d}var C_=(ct.prototype._read=function(d,h){var m=this._ctx;return m.error?m.table._trans(null,Tt.bind(null,m.error)):m.table._trans("readonly",d).then(h)},ct.prototype._write=function(d){var h=this._ctx;return h.error?h.table._trans(null,Tt.bind(null,h.error)):h.table._trans("readwrite",d,"locked")},ct.prototype._addAlgorithm=function(d){var h=this._ctx;h.algorithm=ds(h.algorithm,d)},ct.prototype._iterate=function(d,h){return wa(this._ctx,d,h,this._ctx.table.core)},ct.prototype.clone=function(d){var h=Object.create(this.constructor.prototype),m=Object.create(this._ctx);return d&&l(m,d),h._ctx=m,h},ct.prototype.raw=function(){return this._ctx.valueMapper=null,this},ct.prototype.each=function(d){var h=this._ctx;return this._read(function(m){return wa(h,d,m,h.table.core)})},ct.prototype.count=function(d){var h=this;return this._read(function(m){var y=h._ctx,b=y.table.core;if(ei(y,!0))return b.count({trans:m,query:{index:_a(y,b.schema),range:y.range}}).then(function(I){return Math.min(I,y.limit)});var k=0;return wa(y,function(){return++k,!1},m,b).then(function(){return k})}).then(d)},ct.prototype.sortBy=function(d,h){var m=d.split(".").reverse(),y=m[0],b=m.length-1;function k(L,N){return N?k(L[m[N]],N-1):L[y]}var I=this._ctx.dir==="next"?1:-1;function T(L,N){return rt(k(L,b),k(N,b))*I}return this.toArray(function(L){return L.sort(T)}).then(h)},ct.prototype.toArray=function(d){var h=this;return this._read(function(m){var y=h._ctx;if(y.dir==="next"&&ei(y,!0)&&0<y.limit){var b=y.valueMapper,k=_a(y,y.table.core.schema);return y.table.core.query({trans:m,limit:y.limit,values:!0,query:{index:k,range:y.range}}).then(function(T){return T=T.result,b?T.map(b):T})}var I=[];return wa(y,function(T){return I.push(T)},m,y.table.core).then(function(){return I})},d)},ct.prototype.offset=function(d){var h=this._ctx;return d<=0||(h.offset+=d,ei(h)?Dc(h,function(){var m=d;return function(y,b){return m===0||(m===1?--m:b(function(){y.advance(m),m=0}),!1)}}):Dc(h,function(){var m=d;return function(){return--m<0}})),this},ct.prototype.limit=function(d){return this._ctx.limit=Math.min(this._ctx.limit,d),Dc(this._ctx,function(){var h=d;return function(m,y,b){return--h<=0&&y(b),0<=h}},!0),this},ct.prototype.until=function(d,h){return Tc(this._ctx,function(m,y,b){return!d(m.value)||(y(b),h)}),this},ct.prototype.first=function(d){return this.limit(1).toArray(function(h){return h[0]}).then(d)},ct.prototype.last=function(d){return this.reverse().first(d)},ct.prototype.filter=function(d){var h;return Tc(this._ctx,function(m){return d(m.value)}),(h=this._ctx).isMatch=ds(h.isMatch,d),this},ct.prototype.and=function(d){return this.filter(d)},ct.prototype.or=function(d){return new this.db.WhereClause(this._ctx.table,d,this)},ct.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},ct.prototype.desc=function(){return this.reverse()},ct.prototype.eachKey=function(d){var h=this._ctx;return h.keysOnly=!h.isMatch,this.each(function(m,y){d(y.key,y)})},ct.prototype.eachUniqueKey=function(d){return this._ctx.unique="unique",this.eachKey(d)},ct.prototype.eachPrimaryKey=function(d){var h=this._ctx;return h.keysOnly=!h.isMatch,this.each(function(m,y){d(y.primaryKey,y)})},ct.prototype.keys=function(d){var h=this._ctx;h.keysOnly=!h.isMatch;var m=[];return this.each(function(y,b){m.push(b.key)}).then(function(){return m}).then(d)},ct.prototype.primaryKeys=function(d){var h=this._ctx;if(h.dir==="next"&&ei(h,!0)&&0<h.limit)return this._read(function(y){var b=_a(h,h.table.core.schema);return h.table.core.query({trans:y,values:!1,limit:h.limit,query:{index:b,range:h.range}})}).then(function(y){return y.result}).then(d);h.keysOnly=!h.isMatch;var m=[];return this.each(function(y,b){m.push(b.primaryKey)}).then(function(){return m}).then(d)},ct.prototype.uniqueKeys=function(d){return this._ctx.unique="unique",this.keys(d)},ct.prototype.firstKey=function(d){return this.limit(1).keys(function(h){return h[0]}).then(d)},ct.prototype.lastKey=function(d){return this.reverse().firstKey(d)},ct.prototype.distinct=function(){var d=this._ctx,d=d.index&&d.table.schema.idxByName[d.index];if(!d||!d.multi)return this;var h={};return Tc(this._ctx,function(b){var y=b.primaryKey.toString(),b=f(h,y);return h[y]=!0,!b}),this},ct.prototype.modify=function(d){var h=this,m=this._ctx;return this._write(function(y){var b,k,I;I=typeof d=="function"?d:(b=o(d),k=b.length,function(X){for(var ne=!1,se=0;se<k;++se){var ie=b[se],ge=d[ie],_e=M(X,ie);ge instanceof qi?(D(X,ie,ge.execute(_e)),ne=!0):_e!==ge&&(D(X,ie,ge),ne=!0)}return ne});var T=m.table.core,R=T.schema.primaryKey,L=R.outbound,N=R.extractKey,W=200,R=h.db._options.modifyChunkSize;R&&(W=typeof R=="object"?R[T.name]||R["*"]||200:R);function K(X,ie){var se=ie.failures,ie=ie.numFailures;q+=X-ie;for(var ge=0,_e=o(se);ge<_e.length;ge++){var ye=_e[ge];j.push(se[ye])}}var j=[],q=0,H=[],V=d===Vf;return h.clone().primaryKeys().then(function(X){function ne(ie){var ge=Math.min(W,X.length-ie),_e=X.slice(ie,ie+ge);return(V?Promise.resolve([]):T.getMany({trans:y,keys:_e,cache:"immutable"})).then(function(ye){var ve=[],Oe=[],Se=L?[]:null,De=V?_e:[];if(!V)for(var Xe=0;Xe<ge;++Xe){var ot=ye[Xe],Ke={value:fe(ot),primKey:X[ie+Xe]};I.call(Ke,Ke.value,Ke)!==!1&&(Ke.value==null?De.push(X[ie+Xe]):L||rt(N(ot),N(Ke.value))===0?(Oe.push(Ke.value),L&&Se.push(X[ie+Xe])):(De.push(X[ie+Xe]),ve.push(Ke.value)))}return Promise.resolve(0<ve.length&&T.mutate({trans:y,type:"add",values:ve}).then(function(Ot){for(var He in Ot.failures)De.splice(parseInt(He),1);K(ve.length,Ot)})).then(function(){return(0<Oe.length||se&&typeof d=="object")&&T.mutate({trans:y,type:"put",keys:Se,values:Oe,criteria:se,changeSpec:typeof d!="function"&&d,isAdditionalChunk:0<ie}).then(function(Ot){return K(Oe.length,Ot)})}).then(function(){return(0<De.length||se&&V)&&T.mutate({trans:y,type:"delete",keys:De,criteria:se,isAdditionalChunk:0<ie}).then(function(Ot){return ba(m.table,De,Ot)}).then(function(Ot){return K(De.length,Ot)})}).then(function(){return X.length>ie+ge&&ne(ie+W)})})}var se=ei(m)&&m.limit===1/0&&(typeof d!="function"||V)&&{index:m.index,range:m.range};return ne(0).then(function(){if(0<j.length)throw new gt("Error modifying one or more objects",j,q,H);return X.length})})})},ct.prototype.delete=function(){var d=this._ctx,h=d.range;return!ei(d)||d.table.schema.yProps||!d.isPrimKey&&h.type!==3?this.modify(Vf):this._write(function(m){var y=d.table.core.schema.primaryKey,b=h;return d.table.core.count({trans:m,query:{index:y,range:b}}).then(function(k){return d.table.core.mutate({trans:m,type:"deleteRange",range:b}).then(function(L){var T=L.failures,L=L.numFailures;if(L)throw new gt("Could not delete some values",Object.keys(T).map(function(N){return T[N]}),k-L);return k-L})})})},ct);function ct(){}var Vf=function(d,h){return h.value=null};function S_(d,h){return d<h?-1:d===h?0:1}function P_(d,h){return h<d?-1:d===h?0:1}function xn(d,h,m){return d=d instanceof Kf?new d.Collection(d):d,d._ctx.error=new(m||TypeError)(h),d}function ti(d){return new d.Collection(d,function(){return Hf("")}).limit(0)}function xa(d,h,m,y){var b,k,I,T,L,N,W,R=m.length;if(!m.every(function(q){return typeof q=="string"}))return xn(d,Ff);function K(q){b=q==="next"?function(V){return V.toUpperCase()}:function(V){return V.toLowerCase()},k=q==="next"?function(V){return V.toLowerCase()}:function(V){return V.toUpperCase()},I=q==="next"?S_:P_;var H=m.map(function(V){return{lower:k(V),upper:b(V)}}).sort(function(V,X){return I(V.lower,X.lower)});T=H.map(function(V){return V.upper}),L=H.map(function(V){return V.lower}),W=(N=q)==="next"?"":y}K("next"),d=new d.Collection(d,function(){return Fr(T[0],L[R-1]+y)}),d._ondirectionchange=function(q){K(q)};var j=0;return d._addAlgorithm(function(q,H,V){var X=q.key;if(typeof X!="string")return!1;var ne=k(X);if(h(ne,L,j))return!0;for(var se=null,ie=j;ie<R;++ie){var ge=(function(_e,ye,ve,Oe,Se,De){for(var Xe=Math.min(_e.length,Oe.length),ot=-1,Ke=0;Ke<Xe;++Ke){var Ot=ye[Ke];if(Ot!==Oe[Ke])return Se(_e[Ke],ve[Ke])<0?_e.substr(0,Ke)+ve[Ke]+ve.substr(Ke+1):Se(_e[Ke],Oe[Ke])<0?_e.substr(0,Ke)+Oe[Ke]+ve.substr(Ke+1):0<=ot?_e.substr(0,ot)+ye[ot]+ve.substr(ot+1):null;Se(_e[Ke],Ot)<0&&(ot=Ke)}return Xe<Oe.length&&De==="next"?_e+ve.substr(_e.length):Xe<_e.length&&De==="prev"?_e.substr(0,ve.length):ot<0?null:_e.substr(0,ot)+Oe[ot]+ve.substr(ot+1)})(X,ne,T[ie],L[ie],I,N);ge===null&&se===null?j=ie+1:(se===null||0<I(se,ge))&&(se=ge)}return H(se!==null?function(){q.continue(se+W)}:V),!1}),d}function Fr(d,h,m,y){return{type:2,lower:d,upper:h,lowerOpen:m,upperOpen:y}}function Hf(d){return{type:1,lower:d,upper:d}}var Kf=(Object.defineProperty(qt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),qt.prototype.between=function(d,h,m,y){m=m!==!1,y=y===!0;try{return 0<this._cmp(d,h)||this._cmp(d,h)===0&&(m||y)&&(!m||!y)?ti(this):new this.Collection(this,function(){return Fr(d,h,!m,!y)})}catch{return xn(this,dr)}},qt.prototype.equals=function(d){return d==null?xn(this,dr):new this.Collection(this,function(){return Hf(d)})},qt.prototype.above=function(d){return d==null?xn(this,dr):new this.Collection(this,function(){return Fr(d,void 0,!0)})},qt.prototype.aboveOrEqual=function(d){return d==null?xn(this,dr):new this.Collection(this,function(){return Fr(d,void 0,!1)})},qt.prototype.below=function(d){return d==null?xn(this,dr):new this.Collection(this,function(){return Fr(void 0,d,!1,!0)})},qt.prototype.belowOrEqual=function(d){return d==null?xn(this,dr):new this.Collection(this,function(){return Fr(void 0,d)})},qt.prototype.startsWith=function(d){return typeof d!="string"?xn(this,Ff):this.between(d,d+us,!0,!0)},qt.prototype.startsWithIgnoreCase=function(d){return d===""?this.startsWith(d):xa(this,function(h,m){return h.indexOf(m[0])===0},[d],us)},qt.prototype.equalsIgnoreCase=function(d){return xa(this,function(h,m){return h===m[0]},[d],"")},qt.prototype.anyOfIgnoreCase=function(){var d=G.apply(ee,arguments);return d.length===0?ti(this):xa(this,function(h,m){return m.indexOf(h)!==-1},d,"")},qt.prototype.startsWithAnyOfIgnoreCase=function(){var d=G.apply(ee,arguments);return d.length===0?ti(this):xa(this,function(h,m){return m.some(function(y){return h.indexOf(y)===0})},d,us)},qt.prototype.anyOf=function(){var d=this,h=G.apply(ee,arguments),m=this._cmp;try{h.sort(m)}catch{return xn(this,dr)}if(h.length===0)return ti(this);var y=new this.Collection(this,function(){return Fr(h[0],h[h.length-1])});y._ondirectionchange=function(k){m=k==="next"?d._ascending:d._descending,h.sort(m)};var b=0;return y._addAlgorithm(function(k,I,T){for(var L=k.key;0<m(L,h[b]);)if(++b===h.length)return I(T),!1;return m(L,h[b])===0||(I(function(){k.continue(h[b])}),!1)}),y},qt.prototype.notEqual=function(d){return this.inAnyRange([[-1/0,d],[d,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},qt.prototype.noneOf=function(){var d=G.apply(ee,arguments);if(d.length===0)return new this.Collection(this);try{d.sort(this._ascending)}catch{return xn(this,dr)}var h=d.reduce(function(m,y){return m?m.concat([[m[m.length-1][1],y]]):[[-1/0,y]]},null);return h.push([d[d.length-1],this.db._maxKey]),this.inAnyRange(h,{includeLowers:!1,includeUppers:!1})},qt.prototype.inAnyRange=function(X,h){var m=this,y=this._cmp,b=this._ascending,k=this._descending,I=this._min,T=this._max;if(X.length===0)return ti(this);if(!X.every(function(ne){return ne[0]!==void 0&&ne[1]!==void 0&&b(ne[0],ne[1])<=0}))return xn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",re.InvalidArgument);var L=!h||h.includeLowers!==!1,N=h&&h.includeUppers===!0,W,R=b;function K(ne,se){return R(ne[0],se[0])}try{(W=X.reduce(function(ne,se){for(var ie=0,ge=ne.length;ie<ge;++ie){var _e=ne[ie];if(y(se[0],_e[1])<0&&0<y(se[1],_e[0])){_e[0]=I(_e[0],se[0]),_e[1]=T(_e[1],se[1]);break}}return ie===ge&&ne.push(se),ne},[])).sort(K)}catch{return xn(this,dr)}var j=0,q=N?function(ne){return 0<b(ne,W[j][1])}:function(ne){return 0<=b(ne,W[j][1])},H=L?function(ne){return 0<k(ne,W[j][0])}:function(ne){return 0<=k(ne,W[j][0])},V=q,X=new this.Collection(this,function(){return Fr(W[0][0],W[W.length-1][1],!L,!N)});return X._ondirectionchange=function(ne){R=ne==="next"?(V=q,b):(V=H,k),W.sort(K)},X._addAlgorithm(function(ne,se,ie){for(var ge,_e=ne.key;V(_e);)if(++j===W.length)return se(ie),!1;return!q(ge=_e)&&!H(ge)||(m._cmp(_e,W[j][1])===0||m._cmp(_e,W[j][0])===0||se(function(){R===b?ne.continue(W[j][0]):ne.continue(W[j][1])}),!1)}),X},qt.prototype.startsWithAnyOf=function(){var d=G.apply(ee,arguments);return d.every(function(h){return typeof h=="string"})?d.length===0?ti(this):this.inAnyRange(d.map(function(h){return[h,h+us]})):xn(this,"startsWithAnyOf() only works with strings")},qt);function qt(){}function Xn(d){return St(function(h){return Ui(h),d(h.target.error),!1})}function Ui(d){d.stopPropagation&&d.stopPropagation(),d.preventDefault&&d.preventDefault()}var Wi="storagemutated",Rc="x-storagemutated-1",Lr=Ni(null,Wi),A_=(Qn.prototype._lock=function(){return O(!Re.global),++this._reculock,this._reculock!==1||Re.global||(Re.lockOwnerFor=this),this},Qn.prototype._unlock=function(){if(O(!Re.global),--this._reculock==0)for(Re.global||(Re.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var d=this._blockedFuncs.shift();try{cs(d[1],d[0])}catch{}}return this},Qn.prototype._locked=function(){return this._reculock&&Re.lockOwnerFor!==this},Qn.prototype.create=function(d){var h=this;if(!this.mode)return this;var m=this.db.idbdb,y=this.db._state.dbOpenError;if(O(!this.idbtrans),!d&&!m)switch(y&&y.name){case"DatabaseClosedError":throw new re.DatabaseClosed(y);case"MissingAPIError":throw new re.MissingAPI(y.message,y);default:throw new re.OpenFailed(y)}if(!this.active)throw new re.TransactionInactive;return O(this._completion._state===null),(d=this.idbtrans=d||(this.db.core||m).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=St(function(b){Ui(b),h._reject(d.error)}),d.onabort=St(function(b){Ui(b),h.active&&h._reject(new re.Abort(d.error)),h.active=!1,h.on("abort").fire(b)}),d.oncomplete=St(function(){h.active=!1,h._resolve(),"mutatedParts"in d&&Lr.storagemutated.fire(d.mutatedParts)}),this},Qn.prototype._promise=function(d,h,m){var y=this;if(d==="readwrite"&&this.mode!=="readwrite")return Tt(new re.ReadOnly("Transaction is readonly"));if(!this.active)return Tt(new re.TransactionInactive);if(this._locked())return new Te(function(k,I){y._blockedFuncs.push([function(){y._promise(d,h,m).then(k,I)},Re])});if(m)return Dr(function(){var k=new Te(function(I,T){y._lock();var L=h(I,T,y);L&&L.then&&L.then(I,T)});return k.finally(function(){return y._unlock()}),k._lib=!0,k});var b=new Te(function(k,I){var T=h(k,I,y);T&&T.then&&T.then(k,I)});return b._lib=!0,b},Qn.prototype._root=function(){return this.parent?this.parent._root():this},Qn.prototype.waitFor=function(d){var h,m=this._root(),y=Te.resolve(d);m._waitingFor?m._waitingFor=m._waitingFor.then(function(){return y}):(m._waitingFor=y,m._waitingQueue=[],h=m.idbtrans.objectStore(m.storeNames[0]),(function k(){for(++m._spinCount;m._waitingQueue.length;)m._waitingQueue.shift()();m._waitingFor&&(h.get(-1/0).onsuccess=k)})());var b=m._waitingFor;return new Te(function(k,I){y.then(function(T){return m._waitingQueue.push(St(k.bind(null,T)))},function(T){return m._waitingQueue.push(St(I.bind(null,T)))}).finally(function(){m._waitingFor===b&&(m._waitingFor=null)})})},Qn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new re.Abort))},Qn.prototype.table=function(d){var h=this._memoizedTables||(this._memoizedTables={});if(f(h,d))return h[d];var m=this.schema[d];if(!m)throw new re.NotFound("Table "+d+" not part of transaction");return m=new this.db.Table(d,m,this),m.core=this.db.core.table(d),h[d]=m},Qn);function Qn(){}function $c(d,h,m,y,b,k,I,T){return{name:d,keyPath:h,unique:m,multi:y,auto:b,compound:k,src:(m&&!I?"&":"")+(y?"*":"")+(b?"++":"")+Yf(h),type:T}}function Yf(d){return typeof d=="string"?d:d?"["+[].join.call(d,"+")+"]":""}function Fc(d,h,m){return{name:d,primKey:h,indexes:m,mappedClass:null,idxByName:(y=function(b){return[b.name,b]},m.reduce(function(b,k,I){return I=y(k,I),I&&(b[I[0]]=I[1]),b},{}))};var y}var Vi=function(d){try{return d.only([[]]),Vi=function(){return[[]]},[[]]}catch{return Vi=function(){return us},us}};function Lc(d){return d==null?function(){}:typeof d=="string"?(h=d).split(".").length===1?function(m){return m[h]}:function(m){return M(m,h)}:function(m){return M(m,d)};var h}function Gf(d){return[].slice.call(d)}var I_=0;function Hi(d){return d==null?":id":typeof d=="string"?d:"[".concat(d.join("+"),"]")}function E_(d,h,L){function y(V){if(V.type===3)return null;if(V.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var j=V.lower,q=V.upper,H=V.lowerOpen,V=V.upperOpen;return j===void 0?q===void 0?null:h.upperBound(q,!!V):q===void 0?h.lowerBound(j,!!H):h.bound(j,q,!!H,!!V)}function b(K){var j,q=K.name;return{name:q,schema:K,mutate:function(H){var V=H.trans,X=H.type,ne=H.keys,se=H.values,ie=H.range;return new Promise(function(ge,_e){ge=St(ge);var ye=V.objectStore(q),ve=ye.keyPath==null,Oe=X==="put"||X==="add";if(!Oe&&X!=="delete"&&X!=="deleteRange")throw new Error("Invalid operation type: "+X);var Se,De=(ne||se||{length:1}).length;if(ne&&se&&ne.length!==se.length)throw new Error("Given keys array must have same length as given values array.");if(De===0)return ge({numFailures:0,failures:{},results:[],lastResult:void 0});function Xe(dn){++Ot,Ui(dn)}var ot=[],Ke=[],Ot=0;if(X==="deleteRange"){if(ie.type===4)return ge({numFailures:Ot,failures:Ke,results:[],lastResult:void 0});ie.type===3?ot.push(Se=ye.clear()):ot.push(Se=ye.delete(y(ie)))}else{var ve=Oe?ve?[se,ne]:[se,null]:[ne,null],He=ve[0],en=ve[1];if(Oe)for(var tn=0;tn<De;++tn)ot.push(Se=en&&en[tn]!==void 0?ye[X](He[tn],en[tn]):ye[X](He[tn])),Se.onerror=Xe;else for(tn=0;tn<De;++tn)ot.push(Se=ye[X](He[tn])),Se.onerror=Xe}function Ra(dn){dn=dn.target.result,ot.forEach(function(ps,tu){return ps.error!=null&&(Ke[tu]=ps.error)}),ge({numFailures:Ot,failures:Ke,results:X==="delete"?ne:ot.map(function(ps){return ps.result}),lastResult:dn})}Se.onerror=function(dn){Xe(dn),Ra(dn)},Se.onsuccess=Ra})},getMany:function(H){var V=H.trans,X=H.keys;return new Promise(function(ne,se){ne=St(ne);for(var ie,ge=V.objectStore(q),_e=X.length,ye=new Array(_e),ve=0,Oe=0,Se=function(ot){ot=ot.target,ye[ot._pos]=ot.result,++Oe===ve&&ne(ye)},De=Xn(se),Xe=0;Xe<_e;++Xe)X[Xe]!=null&&((ie=ge.get(X[Xe]))._pos=Xe,ie.onsuccess=Se,ie.onerror=De,++ve);ve===0&&ne(ye)})},get:function(H){var V=H.trans,X=H.key;return new Promise(function(ne,se){ne=St(ne);var ie=V.objectStore(q).get(X);ie.onsuccess=function(ge){return ne(ge.target.result)},ie.onerror=Xn(se)})},query:(j=N,function(H){return new Promise(function(V,X){V=St(V);var ne,se,ie,ve=H.trans,ge=H.values,_e=H.limit,Se=H.query,ye=_e===1/0?void 0:_e,Oe=Se.index,Se=Se.range,ve=ve.objectStore(q),Oe=Oe.isPrimaryKey?ve:ve.index(Oe.name),Se=y(Se);if(_e===0)return V({result:[]});j?((ye=ge?Oe.getAll(Se,ye):Oe.getAllKeys(Se,ye)).onsuccess=function(De){return V({result:De.target.result})},ye.onerror=Xn(X)):(ne=0,se=!ge&&"openKeyCursor"in Oe?Oe.openKeyCursor(Se):Oe.openCursor(Se),ie=[],se.onsuccess=function(De){var Xe=se.result;return Xe?(ie.push(ge?Xe.value:Xe.primaryKey),++ne===_e?V({result:ie}):void Xe.continue()):V({result:ie})},se.onerror=Xn(X))})}),openCursor:function(H){var V=H.trans,X=H.values,ne=H.query,se=H.reverse,ie=H.unique;return new Promise(function(ge,_e){ge=St(ge);var Oe=ne.index,ye=ne.range,ve=V.objectStore(q),ve=Oe.isPrimaryKey?ve:ve.index(Oe.name),Oe=se?ie?"prevunique":"prev":ie?"nextunique":"next",Se=!X&&"openKeyCursor"in ve?ve.openKeyCursor(y(ye),Oe):ve.openCursor(y(ye),Oe);Se.onerror=Xn(_e),Se.onsuccess=St(function(De){var Xe,ot,Ke,Ot,He=Se.result;He?(He.___id=++I_,He.done=!1,Xe=He.continue.bind(He),ot=(ot=He.continuePrimaryKey)&&ot.bind(He),Ke=He.advance.bind(He),Ot=function(){throw new Error("Cursor not stopped")},He.trans=V,He.stop=He.continue=He.continuePrimaryKey=He.advance=function(){throw new Error("Cursor not started")},He.fail=St(_e),He.next=function(){var en=this,tn=1;return this.start(function(){return tn--?en.continue():en.stop()}).then(function(){return en})},He.start=function(en){function tn(){if(Se.result)try{en()}catch(dn){He.fail(dn)}else He.done=!0,He.start=function(){throw new Error("Cursor behind last entry")},He.stop()}var Ra=new Promise(function(dn,ps){dn=St(dn),Se.onerror=Xn(ps),He.fail=ps,He.stop=function(tu){He.stop=He.continue=He.continuePrimaryKey=He.advance=Ot,dn(tu)}});return Se.onsuccess=St(function(dn){Se.onsuccess=tn,tn()}),He.continue=Xe,He.continuePrimaryKey=ot,He.advance=Ke,tn(),Ra},ge(He)):ge(null)},_e)})},count:function(H){var V=H.query,X=H.trans,ne=V.index,se=V.range;return new Promise(function(ie,ge){var _e=X.objectStore(q),ye=ne.isPrimaryKey?_e:_e.index(ne.name),_e=y(se),ye=_e?ye.count(_e):ye.count();ye.onsuccess=St(function(ve){return ie(ve.target.result)}),ye.onerror=Xn(ge)})}}}var k,I,T,W=(I=L,T=Gf((k=d).objectStoreNames),{schema:{name:k.name,tables:T.map(function(K){return I.objectStore(K)}).map(function(K){var j=K.keyPath,V=K.autoIncrement,q=a(j),H={},V={name:K.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:j==null,compound:q,keyPath:j,autoIncrement:V,unique:!0,extractKey:Lc(j)},indexes:Gf(K.indexNames).map(function(X){return K.index(X)}).map(function(ie){var ne=ie.name,se=ie.unique,ge=ie.multiEntry,ie=ie.keyPath,ge={name:ne,compound:a(ie),keyPath:ie,unique:se,multiEntry:ge,extractKey:Lc(ie)};return H[Hi(ie)]=ge}),getIndexByKeyPath:function(X){return H[Hi(X)]}};return H[":id"]=V.primaryKey,j!=null&&(H[Hi(j)]=V.primaryKey),V})},hasGetAll:0<T.length&&"getAll"in I.objectStore(T[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),L=W.schema,N=W.hasGetAll,W=L.tables.map(b),R={};return W.forEach(function(K){return R[K.name]=K}),{stack:"dbcore",transaction:d.transaction.bind(d),table:function(K){if(!R[K])throw new Error("Table '".concat(K,"' not found"));return R[K]},MIN_KEY:-1/0,MAX_KEY:Vi(h),schema:L}}function O_(d,h,m,y){var b=m.IDBKeyRange;return m.indexedDB,{dbcore:(y=E_(h,b,y),d.dbcore.reduce(function(k,I){return I=I.create,r(r({},k),I(k))},y))}}function ka(d,y){var m=y.db,y=O_(d._middlewares,m,d._deps,y);d.core=y.dbcore,d.tables.forEach(function(b){var k=b.name;d.core.schema.tables.some(function(I){return I.name===k})&&(b.core=d.core.table(k),d[k]instanceof d.Table&&(d[k].core=b.core))})}function Ca(d,h,m,y){m.forEach(function(b){var k=y[b];h.forEach(function(I){var T=(function L(N,W){return x(N,W)||(N=c(N))&&L(N,W)})(I,b);(!T||"value"in T&&T.value===void 0)&&(I===d.Transaction.prototype||I instanceof d.Transaction?v(I,b,{get:function(){return this.table(b)},set:function(L){g(this,b,{value:L,writable:!0,configurable:!0,enumerable:!0})}}):I[b]=new d.Table(b,k))})})}function Bc(d,h){h.forEach(function(m){for(var y in m)m[y]instanceof d.Table&&delete m[y]})}function M_(d,h){return d._cfg.version-h._cfg.version}function T_(d,h,m,y){var b=d._dbSchema;m.objectStoreNames.contains("$meta")&&!b.$meta&&(b.$meta=Fc("$meta",Qf("")[0],[]),d._storeNames.push("$meta"));var k=d._createTransaction("readwrite",d._storeNames,b);k.create(m),k._completion.catch(y);var I=k._reject.bind(k),T=Re.transless||Re;Dr(function(){return Re.trans=k,Re.transless=T,h!==0?(ka(d,m),N=h,((L=k).storeNames.includes("$meta")?L.table("$meta").get("version").then(function(W){return W??N}):Te.resolve(N)).then(function(W){return K=W,j=k,q=m,H=[],W=(R=d)._versions,V=R._dbSchema=Pa(0,R.idbdb,q),(W=W.filter(function(X){return X._cfg.version>=K})).length!==0?(W.forEach(function(X){H.push(function(){var ne=V,se=X._cfg.dbschema;Aa(R,ne,q),Aa(R,se,q),V=R._dbSchema=se;var ie=jc(ne,se);ie.add.forEach(function(Oe){Nc(q,Oe[0],Oe[1].primKey,Oe[1].indexes)}),ie.change.forEach(function(Oe){if(Oe.recreate)throw new re.Upgrade("Not yet support for changing primary key");var Se=q.objectStore(Oe.name);Oe.add.forEach(function(De){return Sa(Se,De)}),Oe.change.forEach(function(De){Se.deleteIndex(De.name),Sa(Se,De)}),Oe.del.forEach(function(De){return Se.deleteIndex(De)})});var ge=X._cfg.contentUpgrade;if(ge&&X._cfg.version>K){ka(R,q),j._memoizedTables={};var _e=B(se);ie.del.forEach(function(Oe){_e[Oe]=ne[Oe]}),Bc(R,[R.Transaction.prototype]),Ca(R,[R.Transaction.prototype],o(_e),_e),j.schema=_e;var ye,ve=Le(ge);return ve&&Js(),ie=Te.follow(function(){var Oe;(ye=ge(j))&&ve&&(Oe=Rr.bind(null,null),ye.then(Oe,Oe))}),ye&&typeof ye.then=="function"?Te.resolve(ye):ie.then(function(){return ye})}}),H.push(function(ne){var se,ie,ge=X._cfg.dbschema;se=ge,ie=ne,[].slice.call(ie.db.objectStoreNames).forEach(function(_e){return se[_e]==null&&ie.db.deleteObjectStore(_e)}),Bc(R,[R.Transaction.prototype]),Ca(R,[R.Transaction.prototype],R._storeNames,R._dbSchema),j.schema=R._dbSchema}),H.push(function(ne){R.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(R.idbdb.version/10)===X._cfg.version?(R.idbdb.deleteObjectStore("$meta"),delete R._dbSchema.$meta,R._storeNames=R._storeNames.filter(function(se){return se!=="$meta"})):ne.objectStore("$meta").put(X._cfg.version,"version"))})}),(function X(){return H.length?Te.resolve(H.shift()(j.idbtrans)).then(X):Te.resolve()})().then(function(){Xf(V,q)})):Te.resolve();var R,K,j,q,H,V}).catch(I)):(o(b).forEach(function(W){Nc(m,W,b[W].primKey,b[W].indexes)}),ka(d,m),void Te.follow(function(){return d.on.populate.fire(k)}).catch(I));var L,N})}function D_(d,h){Xf(d._dbSchema,h),h.db.version%10!=0||h.objectStoreNames.contains("$meta")||h.db.createObjectStore("$meta").add(Math.ceil(h.db.version/10-1),"version");var m=Pa(0,d.idbdb,h);Aa(d,d._dbSchema,h);for(var y=0,b=jc(m,d._dbSchema).change;y<b.length;y++){var k=(function(I){if(I.change.length||I.recreate)return console.warn("Unable to patch indexes of table ".concat(I.name," because it has changes on the type of index or primary key.")),{value:void 0};var T=h.objectStore(I.name);I.add.forEach(function(L){he&&console.debug("Dexie upgrade patch: Creating missing index ".concat(I.name,".").concat(L.src)),Sa(T,L)})})(b[y]);if(typeof k=="object")return k.value}}function jc(d,h){var m,y={del:[],add:[],change:[]};for(m in d)h[m]||y.del.push(m);for(m in h){var b=d[m],k=h[m];if(b){var I={name:m,def:k,recreate:!1,del:[],add:[],change:[]};if(""+(b.primKey.keyPath||"")!=""+(k.primKey.keyPath||"")||b.primKey.auto!==k.primKey.auto)I.recreate=!0,y.change.push(I);else{var T=b.idxByName,L=k.idxByName,N=void 0;for(N in T)L[N]||I.del.push(N);for(N in L){var W=T[N],R=L[N];W?W.src!==R.src&&I.change.push(R):I.add.push(R)}(0<I.del.length||0<I.add.length||0<I.change.length)&&y.change.push(I)}}else y.add.push([m,k])}return y}function Nc(d,h,m,y){var b=d.db.createObjectStore(h,m.keyPath?{keyPath:m.keyPath,autoIncrement:m.auto}:{autoIncrement:m.auto});return y.forEach(function(k){return Sa(b,k)}),b}function Xf(d,h){o(d).forEach(function(m){h.db.objectStoreNames.contains(m)||(he&&console.debug("Dexie: Creating missing table",m),Nc(h,m,d[m].primKey,d[m].indexes))})}function Sa(d,h){d.createIndex(h.name,h.keyPath,{unique:h.unique,multiEntry:h.multi})}function Pa(d,h,m){var y={};return S(h.objectStoreNames,0).forEach(function(b){for(var k=m.objectStore(b),I=$c(Yf(N=k.keyPath),N||"",!0,!1,!!k.autoIncrement,N&&typeof N!="string",!0),T=[],L=0;L<k.indexNames.length;++L){var W=k.index(k.indexNames[L]),N=W.keyPath,W=$c(W.name,N,!!W.unique,!!W.multiEntry,!1,N&&typeof N!="string",!1);T.push(W)}y[b]=Fc(b,I,T)}),y}function Aa(d,h,m){for(var y=m.db.objectStoreNames,b=0;b<y.length;++b){var k=y[b],I=m.objectStore(k);d._hasGetAll="getAll"in I;for(var T=0;T<I.indexNames.length;++T){var L=I.indexNames[T],N=I.index(L).keyPath,W=typeof N=="string"?N:"["+S(N).join("+")+"]";!h[k]||(N=h[k].idxByName[W])&&(N.name=L,delete h[k].idxByName[W],h[k].idxByName[L]=N)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(d._hasGetAll=!1)}function Qf(d){return d.split(",").map(function(h,m){var k=h.split(":"),y=(b=k[1])===null||b===void 0?void 0:b.trim(),b=(h=k[0].trim()).replace(/([&*]|\+\+)/g,""),k=/^\[/.test(b)?b.match(/^\[(.*)\]$/)[1].split("+"):b;return $c(b,k||null,/\&/.test(h),/\*/.test(h),/\+\+/.test(h),a(k),m===0,y)})}var R_=(ni.prototype._createTableSchema=Fc,ni.prototype._parseIndexSyntax=Qf,ni.prototype._parseStoresSpec=function(d,h){var m=this;o(d).forEach(function(y){if(d[y]!==null){var b=m._parseIndexSyntax(d[y]),k=b.shift();if(!k)throw new re.Schema("Invalid schema for table "+y+": "+d[y]);if(k.unique=!0,k.multi)throw new re.Schema("Primary key cannot be multiEntry*");b.forEach(function(I){if(I.auto)throw new re.Schema("Only primary key can be marked as autoIncrement (++)");if(!I.keyPath)throw new re.Schema("Index must have a name and cannot be an empty string")}),b=m._createTableSchema(y,k,b),h[y]=b}})},ni.prototype.stores=function(m){var h=this.db;this._cfg.storesSource=this._cfg.storesSource?l(this._cfg.storesSource,m):m;var m=h._versions,y={},b={};return m.forEach(function(k){l(y,k._cfg.storesSource),b=k._cfg.dbschema={},k._parseStoresSpec(y,b)}),h._dbSchema=b,Bc(h,[h._allTables,h,h.Transaction.prototype]),Ca(h,[h._allTables,h,h.Transaction.prototype,this._cfg.tables],o(b),b),h._storeNames=o(b),this},ni.prototype.upgrade=function(d){return this._cfg.contentUpgrade=be(this._cfg.contentUpgrade||E,d),this},ni);function ni(){}function zc(d,h){var m=d._dbNamesDB;return m||(m=d._dbNamesDB=new fr(ya,{addons:[],indexedDB:d,IDBKeyRange:h})).version(1).stores({dbnames:"name"}),m.table("dbnames")}function qc(d){return d&&typeof d.databases=="function"}function Uc(d){return Dr(function(){return Re.letThrough=!0,d()})}function Wc(d){return!("from"in d)}var Zt=function(d,h){if(!this){var m=new Zt;return d&&"d"in d&&l(m,d),m}l(this,arguments.length?{d:1,from:d,to:1<arguments.length?h:d}:{d:0})};function Ki(d,h,m){var y=rt(h,m);if(!isNaN(y)){if(0<y)throw RangeError();if(Wc(d))return l(d,{from:h,to:m,d:1});var b=d.l,y=d.r;if(rt(m,d.from)<0)return b?Ki(b,h,m):d.l={from:h,to:m,d:1,l:null,r:null},Zf(d);if(0<rt(h,d.to))return y?Ki(y,h,m):d.r={from:h,to:m,d:1,l:null,r:null},Zf(d);rt(h,d.from)<0&&(d.from=h,d.l=null,d.d=y?y.d+1:1),0<rt(m,d.to)&&(d.to=m,d.r=null,d.d=d.l?d.l.d+1:1),m=!d.r,b&&!d.l&&Yi(d,b),y&&m&&Yi(d,y)}}function Yi(d,h){Wc(h)||(function m(y,L){var k=L.from,I=L.to,T=L.l,L=L.r;Ki(y,k,I),T&&m(y,T),L&&m(y,L)})(d,h)}function Jf(d,h){var m=Ia(h),y=m.next();if(y.done)return!1;for(var b=y.value,k=Ia(d),I=k.next(b.from),T=I.value;!y.done&&!I.done;){if(rt(T.from,b.to)<=0&&0<=rt(T.to,b.from))return!0;rt(b.from,T.from)<0?b=(y=m.next(T.from)).value:T=(I=k.next(b.from)).value}return!1}function Ia(d){var h=Wc(d)?null:{s:0,n:d};return{next:function(m){for(var y=0<arguments.length;h;)switch(h.s){case 0:if(h.s=1,y)for(;h.n.l&&rt(m,h.n.from)<0;)h={up:h,n:h.n.l,s:1};else for(;h.n.l;)h={up:h,n:h.n.l,s:1};case 1:if(h.s=2,!y||rt(m,h.n.to)<=0)return{value:h.n,done:!1};case 2:if(h.n.r){h.s=3,h={up:h,n:h.n.r,s:0};continue}case 3:h=h.up}return{done:!0}}}}function Zf(d){var h,m,y=(((h=d.r)===null||h===void 0?void 0:h.d)||0)-(((m=d.l)===null||m===void 0?void 0:m.d)||0),b=1<y?"r":y<-1?"l":"";b&&(h=b=="r"?"l":"r",m=r({},d),y=d[b],d.from=y.from,d.to=y.to,d[b]=y[b],m[b]=y[h],(d[h]=m).d=eh(m)),d.d=eh(d)}function eh(m){var h=m.r,m=m.l;return(h?m?Math.max(h.d,m.d):h.d:m?m.d:0)+1}function Ea(d,h){return o(h).forEach(function(m){d[m]?Yi(d[m],h[m]):d[m]=(function y(b){var k,I,T={};for(k in b)f(b,k)&&(I=b[k],T[k]=!I||typeof I!="object"||Y.has(I.constructor)?I:y(I));return T})(h[m])}),d}function Vc(d,h){return d.all||h.all||Object.keys(d).some(function(m){return h[m]&&Jf(h[m],d[m])})}p(Zt.prototype,((Tn={add:function(d){return Yi(this,d),this},addKey:function(d){return Ki(this,d,d),this},addKeys:function(d){var h=this;return d.forEach(function(m){return Ki(h,m,m)}),this},hasKey:function(d){var h=Ia(this).next(d).value;return h&&rt(h.from,d)<=0&&0<=rt(h.to,d)}})[Ce]=function(){return Ia(this)},Tn));var fs={},Hc={},Kc=!1;function Oa(d){Ea(Hc,d),Kc||(Kc=!0,setTimeout(function(){Kc=!1,Yc(Hc,!(Hc={}))},0))}function Yc(d,h){h===void 0&&(h=!1);var m=new Set;if(d.all)for(var y=0,b=Object.values(fs);y<b.length;y++)th(I=b[y],d,m,h);else for(var k in d){var I,T=/^idb\:\/\/(.*)\/(.*)\//.exec(k);T&&(k=T[1],T=T[2],(I=fs["idb://".concat(k,"/").concat(T)])&&th(I,d,m,h))}m.forEach(function(L){return L()})}function th(d,h,m,y){for(var b=[],k=0,I=Object.entries(d.queries.query);k<I.length;k++){for(var T=I[k],L=T[0],N=[],W=0,R=T[1];W<R.length;W++){var K=R[W];Vc(h,K.obsSet)?K.subscribers.forEach(function(V){return m.add(V)}):y&&N.push(K)}y&&b.push([L,N])}if(y)for(var j=0,q=b;j<q.length;j++){var H=q[j],L=H[0],N=H[1];d.queries.query[L]=N}}function $_(d){var h=d._state,m=d._deps.indexedDB;if(h.isBeingOpened||d.idbdb)return h.dbReadyPromise.then(function(){return h.dbOpenError?Tt(h.dbOpenError):d});h.isBeingOpened=!0,h.dbOpenError=null,h.openComplete=!1;var y=h.openCanceller,b=Math.round(10*d.verno),k=!1;function I(){if(h.openCanceller!==y)throw new re.DatabaseClosed("db.open() was cancelled")}function T(){return new Te(function(K,j){if(I(),!m)throw new re.MissingAPI;var q=d.name,H=h.autoSchema||!b?m.open(q):m.open(q,b);if(!H)throw new re.MissingAPI;H.onerror=Xn(j),H.onblocked=St(d._fireOnBlocked),H.onupgradeneeded=St(function(V){var X;W=H.transaction,h.autoSchema&&!d._options.allowEmptyDB?(H.onerror=Ui,W.abort(),H.result.close(),(X=m.deleteDatabase(q)).onsuccess=X.onerror=St(function(){j(new re.NoSuchDatabase("Database ".concat(q," doesnt exist")))})):(W.onerror=Xn(j),V=V.oldVersion>Math.pow(2,62)?0:V.oldVersion,R=V<1,d.idbdb=H.result,k&&D_(d,W),T_(d,V/10,W,j))},j),H.onsuccess=St(function(){W=null;var V,X,ne,se,ie,ge=d.idbdb=H.result,_e=S(ge.objectStoreNames);if(0<_e.length)try{var ye=ge.transaction((se=_e).length===1?se[0]:se,"readonly");if(h.autoSchema)X=ge,ne=ye,(V=d).verno=X.version/10,ne=V._dbSchema=Pa(0,X,ne),V._storeNames=S(X.objectStoreNames,0),Ca(V,[V._allTables],o(ne),ne);else if(Aa(d,d._dbSchema,ye),((ie=jc(Pa(0,(ie=d).idbdb,ye),ie._dbSchema)).add.length||ie.change.some(function(ve){return ve.add.length||ve.change.length}))&&!k)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),ge.close(),b=ge.version+1,k=!0,K(T());ka(d,ye)}catch{}Zs.push(d),ge.onversionchange=St(function(ve){h.vcFired=!0,d.on("versionchange").fire(ve)}),ge.onclose=St(function(ve){d.on("close").fire(ve)}),R&&(ie=d._deps,ye=q,ge=ie.indexedDB,ie=ie.IDBKeyRange,qc(ge)||ye===ya||zc(ge,ie).put({name:ye}).catch(E)),K()},j)}).catch(function(K){switch(K?.name){case"UnknownError":if(0<h.PR1398_maxLoop)return h.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),T();break;case"VersionError":if(0<b)return b=0,T()}return Te.reject(K)})}var L,N=h.dbReadyResolve,W=null,R=!1;return Te.race([y,(typeof navigator>"u"?Te.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(K){function j(){return indexedDB.databases().finally(K)}L=setInterval(j,100),j()}).finally(function(){return clearInterval(L)}):Promise.resolve()).then(T)]).then(function(){return I(),h.onReadyBeingFired=[],Te.resolve(Uc(function(){return d.on.ready.fire(d.vip)})).then(function K(){if(0<h.onReadyBeingFired.length){var j=h.onReadyBeingFired.reduce(be,E);return h.onReadyBeingFired=[],Te.resolve(Uc(function(){return j(d.vip)})).then(K)}})}).finally(function(){h.openCanceller===y&&(h.onReadyBeingFired=null,h.isBeingOpened=!1)}).catch(function(K){h.dbOpenError=K;try{W&&W.abort()}catch{}return y===h.openCanceller&&d._close(),Tt(K)}).finally(function(){h.openComplete=!0,N()}).then(function(){var K;return R&&(K={},d.tables.forEach(function(j){j.schema.indexes.forEach(function(q){q.name&&(K["idb://".concat(d.name,"/").concat(j.name,"/").concat(q.name)]=new Zt(-1/0,[[[]]]))}),K["idb://".concat(d.name,"/").concat(j.name,"/")]=K["idb://".concat(d.name,"/").concat(j.name,"/:dels")]=new Zt(-1/0,[[[]]])}),Lr(Wi).fire(K),Yc(K,!0)),d})}function Gc(d){function h(k){return d.next(k)}var m=b(h),y=b(function(k){return d.throw(k)});function b(k){return function(L){var T=k(L),L=T.value;return T.done?L:L&&typeof L.then=="function"?L.then(m,y):a(L)?Promise.all(L).then(m,y):m(L)}}return b(h)()}function Ma(d,h,m){for(var y=a(d)?d.slice():[d],b=0;b<m;++b)y.push(h);return y}var F_={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(d){return r(r({},d),{table:function(h){var m=d.table(h),y=m.schema,b={},k=[];function I(R,K,j){var q=Hi(R),H=b[q]=b[q]||[],V=R==null?0:typeof R=="string"?1:R.length,X=0<K,X=r(r({},j),{name:X?"".concat(q,"(virtual-from:").concat(j.name,")"):j.name,lowLevelIndex:j,isVirtual:X,keyTail:K,keyLength:V,extractKey:Lc(R),unique:!X&&j.unique});return H.push(X),X.isPrimaryKey||k.push(X),1<V&&I(V===2?R[0]:R.slice(0,V-1),K+1,j),H.sort(function(ne,se){return ne.keyTail-se.keyTail}),X}h=I(y.primaryKey.keyPath,0,y.primaryKey),b[":id"]=[h];for(var T=0,L=y.indexes;T<L.length;T++){var N=L[T];I(N.keyPath,0,N)}function W(R){var K,j=R.query.index;return j.isVirtual?r(r({},R),{query:{index:j.lowLevelIndex,range:(K=R.query.range,j=j.keyTail,{type:K.type===1?2:K.type,lower:Ma(K.lower,K.lowerOpen?d.MAX_KEY:d.MIN_KEY,j),lowerOpen:!0,upper:Ma(K.upper,K.upperOpen?d.MIN_KEY:d.MAX_KEY,j),upperOpen:!0})}}):R}return r(r({},m),{schema:r(r({},y),{primaryKey:h,indexes:k,getIndexByKeyPath:function(R){return(R=b[Hi(R)])&&R[0]}}),count:function(R){return m.count(W(R))},query:function(R){return m.query(W(R))},openCursor:function(R){var K=R.query.index,j=K.keyTail,q=K.isVirtual,H=K.keyLength;return q?m.openCursor(W(R)).then(function(X){return X&&V(X)}):m.openCursor(R);function V(X){return Object.create(X,{continue:{value:function(ne){ne!=null?X.continue(Ma(ne,R.reverse?d.MAX_KEY:d.MIN_KEY,j)):R.unique?X.continue(X.key.slice(0,H).concat(R.reverse?d.MIN_KEY:d.MAX_KEY,j)):X.continue()}},continuePrimaryKey:{value:function(ne,se){X.continuePrimaryKey(Ma(ne,d.MAX_KEY,j),se)}},primaryKey:{get:function(){return X.primaryKey}},key:{get:function(){var ne=X.key;return H===1?ne[0]:ne.slice(0,H)}},value:{get:function(){return X.value}}})}}})}})}};function Xc(d,h,m,y){return m=m||{},y=y||"",o(d).forEach(function(b){var k,I,T;f(h,b)?(k=d[b],I=h[b],typeof k=="object"&&typeof I=="object"&&k&&I?(T=Ae(k))!==Ae(I)?m[y+b]=h[b]:T==="Object"?Xc(k,I,m,y+b+"."):k!==I&&(m[y+b]=h[b]):k!==I&&(m[y+b]=h[b])):m[y+b]=void 0}),o(h).forEach(function(b){f(d,b)||(m[y+b]=h[b])}),m}function Qc(d,h){return h.type==="delete"?h.keys:h.keys||h.values.map(d.extractKey)}var L_={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(d){return r(r({},d),{table:function(h){var m=d.table(h),y=m.schema.primaryKey;return r(r({},m),{mutate:function(b){var k=Re.trans,I=k.table(h).hook,T=I.deleting,L=I.creating,N=I.updating;switch(b.type){case"add":if(L.fire===E)break;return k._promise("readwrite",function(){return W(b)},!0);case"put":if(L.fire===E&&N.fire===E)break;return k._promise("readwrite",function(){return W(b)},!0);case"delete":if(T.fire===E)break;return k._promise("readwrite",function(){return W(b)},!0);case"deleteRange":if(T.fire===E)break;return k._promise("readwrite",function(){return(function R(K,j,q){return m.query({trans:K,values:!1,query:{index:y,range:j},limit:q}).then(function(H){var V=H.result;return W({type:"delete",keys:V,trans:K}).then(function(X){return 0<X.numFailures?Promise.reject(X.failures[0]):V.length<q?{failures:[],numFailures:0,lastResult:void 0}:R(K,r(r({},j),{lower:V[V.length-1],lowerOpen:!0}),q)})})})(b.trans,b.range,1e4)},!0)}return m.mutate(b);function W(R){var K,j,q,H=Re.trans,V=R.keys||Qc(y,R);if(!V)throw new Error("Keys missing");return(R=R.type==="add"||R.type==="put"?r(r({},R),{keys:V}):r({},R)).type!=="delete"&&(R.values=s([],R.values)),R.keys&&(R.keys=s([],R.keys)),K=m,q=V,((j=R).type==="add"?Promise.resolve([]):K.getMany({trans:j.trans,keys:q,cache:"immutable"})).then(function(X){var ne=V.map(function(se,ie){var ge,_e,ye,ve=X[ie],Oe={onerror:null,onsuccess:null};return R.type==="delete"?T.fire.call(Oe,se,ve,H):R.type==="add"||ve===void 0?(ge=L.fire.call(Oe,se,R.values[ie],H),se==null&&ge!=null&&(R.keys[ie]=se=ge,y.outbound||D(R.values[ie],y.keyPath,se))):(ge=Xc(ve,R.values[ie]),(_e=N.fire.call(Oe,ge,se,ve,H))&&(ye=R.values[ie],Object.keys(_e).forEach(function(Se){f(ye,Se)?ye[Se]=_e[Se]:D(ye,Se,_e[Se])}))),Oe});return m.mutate(R).then(function(se){for(var ie=se.failures,ge=se.results,_e=se.numFailures,se=se.lastResult,ye=0;ye<V.length;++ye){var ve=(ge||V)[ye],Oe=ne[ye];ve==null?Oe.onerror&&Oe.onerror(ie[ye]):Oe.onsuccess&&Oe.onsuccess(R.type==="put"&&X[ye]?R.values[ye]:ve)}return{failures:ie,results:ge,numFailures:_e,lastResult:se}}).catch(function(se){return ne.forEach(function(ie){return ie.onerror&&ie.onerror(se)}),Promise.reject(se)})})}}})}})}};function nh(d,h,m){try{if(!h||h.keys.length<d.length)return null;for(var y=[],b=0,k=0;b<h.keys.length&&k<d.length;++b)rt(h.keys[b],d[k])===0&&(y.push(m?fe(h.values[b]):h.values[b]),++k);return y.length===d.length?y:null}catch{return null}}var B_={stack:"dbcore",level:-1,create:function(d){return{table:function(h){var m=d.table(h);return r(r({},m),{getMany:function(y){if(!y.cache)return m.getMany(y);var b=nh(y.keys,y.trans._cache,y.cache==="clone");return b?Te.resolve(b):m.getMany(y).then(function(k){return y.trans._cache={keys:y.keys,values:y.cache==="clone"?fe(k):k},k})},mutate:function(y){return y.type!=="add"&&(y.trans._cache=null),m.mutate(y)}})}}}};function rh(d,h){return d.trans.mode==="readonly"&&!!d.subscr&&!d.trans.explicit&&d.trans.db._options.cache!=="disabled"&&!h.schema.primaryKey.outbound}function sh(d,h){switch(d){case"query":return h.values&&!h.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var j_={stack:"dbcore",level:0,name:"Observability",create:function(d){var h=d.schema.name,m=new Zt(d.MIN_KEY,d.MAX_KEY);return r(r({},d),{transaction:function(y,b,k){if(Re.subscr&&b!=="readonly")throw new re.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Re.querier));return d.transaction(y,b,k)},table:function(y){var b=d.table(y),k=b.schema,I=k.primaryKey,R=k.indexes,T=I.extractKey,L=I.outbound,N=I.autoIncrement&&R.filter(function(j){return j.compound&&j.keyPath.includes(I.keyPath)}),W=r(r({},b),{mutate:function(j){function q(Se){return Se="idb://".concat(h,"/").concat(y,"/").concat(Se),se[Se]||(se[Se]=new Zt)}var H,V,X,ne=j.trans,se=j.mutatedParts||(j.mutatedParts={}),ie=q(""),ge=q(":dels"),_e=j.type,Oe=j.type==="deleteRange"?[j.range]:j.type==="delete"?[j.keys]:j.values.length<50?[Qc(I,j).filter(function(Se){return Se}),j.values]:[],ye=Oe[0],ve=Oe[1],Oe=j.trans._cache;return a(ye)?(ie.addKeys(ye),(Oe=_e==="delete"||ye.length===ve.length?nh(ye,Oe):null)||ge.addKeys(ye),(Oe||ve)&&(H=q,V=Oe,X=ve,k.indexes.forEach(function(Se){var De=H(Se.name||"");function Xe(Ke){return Ke!=null?Se.extractKey(Ke):null}function ot(Ke){return Se.multiEntry&&a(Ke)?Ke.forEach(function(Ot){return De.addKey(Ot)}):De.addKey(Ke)}(V||X).forEach(function(Ke,en){var He=V&&Xe(V[en]),en=X&&Xe(X[en]);rt(He,en)!==0&&(He!=null&&ot(He),en!=null&&ot(en))})}))):ye?(ve={from:(ve=ye.lower)!==null&&ve!==void 0?ve:d.MIN_KEY,to:(ve=ye.upper)!==null&&ve!==void 0?ve:d.MAX_KEY},ge.add(ve),ie.add(ve)):(ie.add(m),ge.add(m),k.indexes.forEach(function(Se){return q(Se.name).add(m)})),b.mutate(j).then(function(Se){return!ye||j.type!=="add"&&j.type!=="put"||(ie.addKeys(Se.results),N&&N.forEach(function(De){for(var Xe=j.values.map(function(He){return De.extractKey(He)}),ot=De.keyPath.findIndex(function(He){return He===I.keyPath}),Ke=0,Ot=Se.results.length;Ke<Ot;++Ke)Xe[Ke][ot]=Se.results[Ke];q(De.name).addKeys(Xe)})),ne.mutatedParts=Ea(ne.mutatedParts||{},se),Se})}}),R=function(q){var H=q.query,q=H.index,H=H.range;return[q,new Zt((q=H.lower)!==null&&q!==void 0?q:d.MIN_KEY,(H=H.upper)!==null&&H!==void 0?H:d.MAX_KEY)]},K={get:function(j){return[I,new Zt(j.key)]},getMany:function(j){return[I,new Zt().addKeys(j.keys)]},count:R,query:R,openCursor:R};return o(K).forEach(function(j){W[j]=function(q){var H=Re.subscr,V=!!H,X=rh(Re,b)&&sh(j,q)?q.obsSet={}:H;if(V){var ne=function(ve){return ve="idb://".concat(h,"/").concat(y,"/").concat(ve),X[ve]||(X[ve]=new Zt)},se=ne(""),ie=ne(":dels"),H=K[j](q),V=H[0],H=H[1];if((j==="query"&&V.isPrimaryKey&&!q.values?ie:ne(V.name||"")).add(H),!V.isPrimaryKey){if(j!=="count"){var ge=j==="query"&&L&&q.values&&b.query(r(r({},q),{values:!1}));return b[j].apply(this,arguments).then(function(ve){if(j==="query"){if(L&&q.values)return ge.then(function(Xe){return Xe=Xe.result,se.addKeys(Xe),ve});var Oe=q.values?ve.result.map(T):ve.result;(q.values?se:ie).addKeys(Oe)}else if(j==="openCursor"){var Se=ve,De=q.values;return Se&&Object.create(Se,{key:{get:function(){return ie.addKey(Se.primaryKey),Se.key}},primaryKey:{get:function(){var Xe=Se.primaryKey;return ie.addKey(Xe),Xe}},value:{get:function(){return De&&se.addKey(Se.primaryKey),Se.value}}})}return ve})}ie.add(m)}}return b[j].apply(this,arguments)}}),W}})}};function ih(d,h,m){if(m.numFailures===0)return h;if(h.type==="deleteRange")return null;var y=h.keys?h.keys.length:"values"in h&&h.values?h.values.length:1;return m.numFailures===y?null:(h=r({},h),a(h.keys)&&(h.keys=h.keys.filter(function(b,k){return!(k in m.failures)})),"values"in h&&a(h.values)&&(h.values=h.values.filter(function(b,k){return!(k in m.failures)})),h)}function Jc(d,h){return m=d,((y=h).lower===void 0||(y.lowerOpen?0<rt(m,y.lower):0<=rt(m,y.lower)))&&(d=d,(h=h).upper===void 0||(h.upperOpen?rt(d,h.upper)<0:rt(d,h.upper)<=0));var m,y}function oh(d,h,K,y,b,k){if(!K||K.length===0)return d;var I=h.query.index,T=I.multiEntry,L=h.query.range,N=y.schema.primaryKey.extractKey,W=I.extractKey,R=(I.lowLevelIndex||I).extractKey,K=K.reduce(function(j,q){var H=j,V=[];if(q.type==="add"||q.type==="put")for(var X=new Zt,ne=q.values.length-1;0<=ne;--ne){var se,ie=q.values[ne],ge=N(ie);X.hasKey(ge)||(se=W(ie),(T&&a(se)?se.some(function(Se){return Jc(Se,L)}):Jc(se,L))&&(X.addKey(ge),V.push(ie)))}switch(q.type){case"add":var _e=new Zt().addKeys(h.values?j.map(function(De){return N(De)}):j),H=j.concat(h.values?V.filter(function(De){return De=N(De),!_e.hasKey(De)&&(_e.addKey(De),!0)}):V.map(function(De){return N(De)}).filter(function(De){return!_e.hasKey(De)&&(_e.addKey(De),!0)}));break;case"put":var ye=new Zt().addKeys(q.values.map(function(De){return N(De)}));H=j.filter(function(De){return!ye.hasKey(h.values?N(De):De)}).concat(h.values?V:V.map(function(De){return N(De)}));break;case"delete":var ve=new Zt().addKeys(q.keys);H=j.filter(function(De){return!ve.hasKey(h.values?N(De):De)});break;case"deleteRange":var Oe=q.range;H=j.filter(function(De){return!Jc(N(De),Oe)})}return H},d);return K===d?d:(K.sort(function(j,q){return rt(R(j),R(q))||rt(N(j),N(q))}),h.limit&&h.limit<1/0&&(K.length>h.limit?K.length=h.limit:d.length===h.limit&&K.length<h.limit&&(b.dirty=!0)),k?Object.freeze(K):K)}function ah(d,h){return rt(d.lower,h.lower)===0&&rt(d.upper,h.upper)===0&&!!d.lowerOpen==!!h.lowerOpen&&!!d.upperOpen==!!h.upperOpen}function N_(d,h){return(function(m,y,b,k){if(m===void 0)return y!==void 0?-1:0;if(y===void 0)return 1;if((y=rt(m,y))===0){if(b&&k)return 0;if(b)return 1;if(k)return-1}return y})(d.lower,h.lower,d.lowerOpen,h.lowerOpen)<=0&&0<=(function(m,y,b,k){if(m===void 0)return y!==void 0?1:0;if(y===void 0)return-1;if((y=rt(m,y))===0){if(b&&k)return 0;if(b)return-1;if(k)return 1}return y})(d.upper,h.upper,d.upperOpen,h.upperOpen)}function z_(d,h,m,y){d.subscribers.add(m),y.addEventListener("abort",function(){var b,k;d.subscribers.delete(m),d.subscribers.size===0&&(b=d,k=h,setTimeout(function(){b.subscribers.size===0&&te(k,b)},3e3))})}var q_={stack:"dbcore",level:0,name:"Cache",create:function(d){var h=d.schema.name;return r(r({},d),{transaction:function(m,y,b){var k,I,T=d.transaction(m,y,b);return y==="readwrite"&&(I=(k=new AbortController).signal,b=function(L){return function(){if(k.abort(),y==="readwrite"){for(var N=new Set,W=0,R=m;W<R.length;W++){var K=R[W],j=fs["idb://".concat(h,"/").concat(K)];if(j){var q=d.table(K),H=j.optimisticOps.filter(function(De){return De.trans===T});if(T._explicit&&L&&T.mutatedParts)for(var V=0,X=Object.values(j.queries.query);V<X.length;V++)for(var ne=0,se=(_e=X[V]).slice();ne<se.length;ne++)Vc((ye=se[ne]).obsSet,T.mutatedParts)&&(te(_e,ye),ye.subscribers.forEach(function(De){return N.add(De)}));else if(0<H.length){j.optimisticOps=j.optimisticOps.filter(function(De){return De.trans!==T});for(var ie=0,ge=Object.values(j.queries.query);ie<ge.length;ie++)for(var _e,ye,ve,Oe=0,Se=(_e=ge[ie]).slice();Oe<Se.length;Oe++)(ye=Se[Oe]).res!=null&&T.mutatedParts&&(L&&!ye.dirty?(ve=Object.isFrozen(ye.res),ve=oh(ye.res,ye.req,H,q,ye,ve),ye.dirty?(te(_e,ye),ye.subscribers.forEach(function(De){return N.add(De)})):ve!==ye.res&&(ye.res=ve,ye.promise=Te.resolve({result:ve}))):(ye.dirty&&te(_e,ye),ye.subscribers.forEach(function(De){return N.add(De)})))}}}N.forEach(function(De){return De()})}}},T.addEventListener("abort",b(!1),{signal:I}),T.addEventListener("error",b(!1),{signal:I}),T.addEventListener("complete",b(!0),{signal:I})),T},table:function(m){var y=d.table(m),b=y.schema.primaryKey;return r(r({},y),{mutate:function(k){var I=Re.trans;if(b.outbound||I.db._options.cache==="disabled"||I.explicit||I.idbtrans.mode!=="readwrite")return y.mutate(k);var T=fs["idb://".concat(h,"/").concat(m)];return T?(I=y.mutate(k),k.type!=="add"&&k.type!=="put"||!(50<=k.values.length||Qc(b,k).some(function(L){return L==null}))?(T.optimisticOps.push(k),k.mutatedParts&&Oa(k.mutatedParts),I.then(function(L){0<L.numFailures&&(te(T.optimisticOps,k),(L=ih(0,k,L))&&T.optimisticOps.push(L),k.mutatedParts&&Oa(k.mutatedParts))}),I.catch(function(){te(T.optimisticOps,k),k.mutatedParts&&Oa(k.mutatedParts)})):I.then(function(L){var N=ih(0,r(r({},k),{values:k.values.map(function(W,R){var K;return L.failures[R]?W:(W=(K=b.keyPath)!==null&&K!==void 0&&K.includes(".")?fe(W):r({},W),D(W,b.keyPath,L.results[R]),W)})}),L);T.optimisticOps.push(N),queueMicrotask(function(){return k.mutatedParts&&Oa(k.mutatedParts)})}),I):y.mutate(k)},query:function(k){if(!rh(Re,y)||!sh("query",k))return y.query(k);var I=((N=Re.trans)===null||N===void 0?void 0:N.db._options.cache)==="immutable",R=Re,T=R.requery,L=R.signal,N=(function(q,H,V,X){var ne=fs["idb://".concat(q,"/").concat(H)];if(!ne)return[];if(!(H=ne.queries[V]))return[null,!1,ne,null];var se=H[(X.query?X.query.index.name:null)||""];if(!se)return[null,!1,ne,null];switch(V){case"query":var ie=se.find(function(ge){return ge.req.limit===X.limit&&ge.req.values===X.values&&ah(ge.req.query.range,X.query.range)});return ie?[ie,!0,ne,se]:[se.find(function(ge){return("limit"in ge.req?ge.req.limit:1/0)>=X.limit&&(!X.values||ge.req.values)&&N_(ge.req.query.range,X.query.range)}),!1,ne,se];case"count":return ie=se.find(function(ge){return ah(ge.req.query.range,X.query.range)}),[ie,!!ie,ne,se]}})(h,m,"query",k),W=N[0],R=N[1],K=N[2],j=N[3];return W&&R?W.obsSet=k.obsSet:(R=y.query(k).then(function(q){var H=q.result;if(W&&(W.res=H),I){for(var V=0,X=H.length;V<X;++V)Object.freeze(H[V]);Object.freeze(H)}else q.result=fe(H);return q}).catch(function(q){return j&&W&&te(j,W),Promise.reject(q)}),W={obsSet:k.obsSet,promise:R,subscribers:new Set,type:"query",req:k,dirty:!1},j?j.push(W):(j=[W],(K=K||(fs["idb://".concat(h,"/").concat(m)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[k.query.index.name||""]=j)),z_(W,j,T,L),W.promise.then(function(q){return{result:oh(q.result,k,K?.optimisticOps,y,W,I)}})}})}})}};function Ta(d,h){return new Proxy(d,{get:function(m,y,b){return y==="db"?h:Reflect.get(m,y,b)}})}var fr=(Dt.prototype.version=function(d){if(isNaN(d)||d<.1)throw new re.Type("Given version is not a positive number");if(d=Math.round(10*d)/10,this.idbdb||this._state.isBeingOpened)throw new re.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,d);var h=this._versions,m=h.filter(function(y){return y._cfg.version===d})[0];return m||(m=new this.Version(d),h.push(m),h.sort(M_),m.stores({}),this._state.autoSchema=!1,m)},Dt.prototype._whenReady=function(d){var h=this;return this.idbdb&&(this._state.openComplete||Re.letThrough||this._vip)?d():new Te(function(m,y){if(h._state.openComplete)return y(new re.DatabaseClosed(h._state.dbOpenError));if(!h._state.isBeingOpened){if(!h._state.autoOpen)return void y(new re.DatabaseClosed);h.open().catch(E)}h._state.dbReadyPromise.then(m,y)}).then(d)},Dt.prototype.use=function(d){var h=d.stack,m=d.create,y=d.level,b=d.name;return b&&this.unuse({stack:h,name:b}),d=this._middlewares[h]||(this._middlewares[h]=[]),d.push({stack:h,create:m,level:y??10,name:b}),d.sort(function(k,I){return k.level-I.level}),this},Dt.prototype.unuse=function(d){var h=d.stack,m=d.name,y=d.create;return h&&this._middlewares[h]&&(this._middlewares[h]=this._middlewares[h].filter(function(b){return y?b.create!==y:!!m&&b.name!==m})),this},Dt.prototype.open=function(){var d=this;return cs(Et,function(){return $_(d)})},Dt.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var d=this._state,h=Zs.indexOf(this);if(0<=h&&Zs.splice(h,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}d.isBeingOpened||(d.dbReadyPromise=new Te(function(m){d.dbReadyResolve=m}),d.openCanceller=new Te(function(m,y){d.cancelOpen=y}))},Dt.prototype.close=function(m){var h=(m===void 0?{disableAutoOpen:!0}:m).disableAutoOpen,m=this._state;h?(m.isBeingOpened&&m.cancelOpen(new re.DatabaseClosed),this._close(),m.autoOpen=!1,m.dbOpenError=new re.DatabaseClosed):(this._close(),m.autoOpen=this._options.autoOpen||m.isBeingOpened,m.openComplete=!1,m.dbOpenError=null)},Dt.prototype.delete=function(d){var h=this;d===void 0&&(d={disableAutoOpen:!0});var m=0<arguments.length&&typeof arguments[0]!="object",y=this._state;return new Te(function(b,k){function I(){h.close(d);var T=h._deps.indexedDB.deleteDatabase(h.name);T.onsuccess=St(function(){var L,N,W;L=h._deps,N=h.name,W=L.indexedDB,L=L.IDBKeyRange,qc(W)||N===ya||zc(W,L).delete(N).catch(E),b()}),T.onerror=Xn(k),T.onblocked=h._fireOnBlocked}if(m)throw new re.InvalidArgument("Invalid closeOptions argument to db.delete()");y.isBeingOpened?y.dbReadyPromise.then(I):I()})},Dt.prototype.backendDB=function(){return this.idbdb},Dt.prototype.isOpen=function(){return this.idbdb!==null},Dt.prototype.hasBeenClosed=function(){var d=this._state.dbOpenError;return d&&d.name==="DatabaseClosed"},Dt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Dt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Dt.prototype,"tables",{get:function(){var d=this;return o(this._allTables).map(function(h){return d._allTables[h]})},enumerable:!1,configurable:!0}),Dt.prototype.transaction=function(){var d=(function(h,m,y){var b=arguments.length;if(b<2)throw new re.InvalidArgument("Too few arguments");for(var k=new Array(b-1);--b;)k[b-1]=arguments[b];return y=k.pop(),[h,Z(k),y]}).apply(this,arguments);return this._transaction.apply(this,d)},Dt.prototype._transaction=function(d,h,m){var y=this,b=Re.trans;b&&b.db===this&&d.indexOf("!")===-1||(b=null);var k,I,T=d.indexOf("?")!==-1;d=d.replace("!","").replace("?","");try{if(I=h.map(function(N){if(N=N instanceof y.Table?N.name:N,typeof N!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return N}),d=="r"||d===Oc)k=Oc;else{if(d!="rw"&&d!=Mc)throw new re.InvalidArgument("Invalid transaction mode: "+d);k=Mc}if(b){if(b.mode===Oc&&k===Mc){if(!T)throw new re.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");b=null}b&&I.forEach(function(N){if(b&&b.storeNames.indexOf(N)===-1){if(!T)throw new re.SubTransaction("Table "+N+" not included in parent transaction.");b=null}}),T&&b&&!b.active&&(b=null)}}catch(N){return b?b._promise(null,function(W,R){R(N)}):Tt(N)}var L=(function N(W,R,K,j,q){return Te.resolve().then(function(){var H=Re.transless||Re,V=W._createTransaction(R,K,W._dbSchema,j);if(V.explicit=!0,H={trans:V,transless:H},j)V.idbtrans=j.idbtrans;else try{V.create(),V.idbtrans._explicit=!0,W._state.PR1398_maxLoop=3}catch(se){return se.name===ae.InvalidState&&W.isOpen()&&0<--W._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),W.close({disableAutoOpen:!1}),W.open().then(function(){return N(W,R,K,null,q)})):Tt(se)}var X,ne=Le(q);return ne&&Js(),H=Te.follow(function(){var se;(X=q.call(V,V))&&(ne?(se=Rr.bind(null,null),X.then(se,se)):typeof X.next=="function"&&typeof X.throw=="function"&&(X=Gc(X)))},H),(X&&typeof X.then=="function"?Te.resolve(X).then(function(se){return V.active?se:Tt(new re.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):H.then(function(){return X})).then(function(se){return j&&V._resolve(),V._completion.then(function(){return se})}).catch(function(se){return V._reject(se),Tt(se)})})}).bind(null,this,k,I,b,m);return b?b._promise(k,L,"lock"):Re.trans?cs(Re.transless,function(){return y._whenReady(L)}):this._whenReady(L)},Dt.prototype.table=function(d){if(!f(this._allTables,d))throw new re.InvalidTable("Table ".concat(d," does not exist"));return this._allTables[d]},Dt);function Dt(d,h){var m=this;this._middlewares={},this.verno=0;var y=Dt.dependencies;this._options=h=r({addons:Dt.addons,autoOpen:!0,indexedDB:y.indexedDB,IDBKeyRange:y.IDBKeyRange,cache:"cloned"},h),this._deps={indexedDB:h.indexedDB,IDBKeyRange:h.IDBKeyRange},y=h.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var b,k,I,T,L,N={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:E,dbReadyPromise:null,cancelOpen:E,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:h.autoOpen};N.dbReadyPromise=new Te(function(R){N.dbReadyResolve=R}),N.openCanceller=new Te(function(R,K){N.cancelOpen=K}),this._state=N,this.name=d,this.on=Ni(this,"populate","blocked","versionchange","close",{ready:[be,E]}),this.once=function(R,K){var j=function(){for(var q=[],H=0;H<arguments.length;H++)q[H]=arguments[H];m.on(R).unsubscribe(j),K.apply(m,q)};return m.on(R,j)},this.on.ready.subscribe=A(this.on.ready.subscribe,function(R){return function(K,j){Dt.vip(function(){var q,H=m._state;H.openComplete?(H.dbOpenError||Te.resolve().then(K),j&&R(K)):H.onReadyBeingFired?(H.onReadyBeingFired.push(K),j&&R(K)):(R(K),q=m,j||R(function V(){q.on.ready.unsubscribe(K),q.on.ready.unsubscribe(V)}))})}}),this.Collection=(b=this,zi(C_.prototype,function(X,V){this.db=b;var j=Lf,q=null;if(V)try{j=V()}catch(ne){q=ne}var H=X._ctx,V=H.table,X=V.hook.reading.fire;this._ctx={table:V,index:H.index,isPrimKey:!H.index||V.schema.primKey.keyPath&&H.index===V.schema.primKey.name,range:j,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:q,or:H.or,valueMapper:X!==$?X:null}})),this.Table=(k=this,zi(zf.prototype,function(R,K,j){this.db=k,this._tx=j,this.name=R,this.schema=K,this.hook=k._allTables[R]?k._allTables[R].hook:Ni(null,{creating:[de,E],reading:[Q,$],updating:[Ie,E],deleting:[ce,E]})})),this.Transaction=(I=this,zi(A_.prototype,function(R,K,j,q,H){var V=this;R!=="readonly"&&K.forEach(function(X){X=(X=j[X])===null||X===void 0?void 0:X.yProps,X&&(K=K.concat(X.map(function(ne){return ne.updatesTable})))}),this.db=I,this.mode=R,this.storeNames=K,this.schema=j,this.chromeTransactionDurability=q,this.idbtrans=null,this.on=Ni(this,"complete","error","abort"),this.parent=H||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Te(function(X,ne){V._resolve=X,V._reject=ne}),this._completion.then(function(){V.active=!1,V.on.complete.fire()},function(X){var ne=V.active;return V.active=!1,V.on.error.fire(X),V.parent?V.parent._reject(X):ne&&V.idbtrans&&V.idbtrans.abort(),Tt(X)})})),this.Version=(T=this,zi(R_.prototype,function(R){this.db=T,this._cfg={version:R,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(L=this,zi(Kf.prototype,function(R,K,j){if(this.db=L,this._ctx={table:R,index:K===":id"?null:K,or:j},this._cmp=this._ascending=rt,this._descending=function(q,H){return rt(H,q)},this._max=function(q,H){return 0<rt(q,H)?q:H},this._min=function(q,H){return rt(q,H)<0?q:H},this._IDBKeyRange=L._deps.IDBKeyRange,!this._IDBKeyRange)throw new re.MissingAPI})),this.on("versionchange",function(R){0<R.newVersion?console.warn("Another connection wants to upgrade database '".concat(m.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(m.name,"'. Closing db now to resume the delete request.")),m.close({disableAutoOpen:!1})}),this.on("blocked",function(R){!R.newVersion||R.newVersion<R.oldVersion?console.warn("Dexie.delete('".concat(m.name,"') was blocked")):console.warn("Upgrade '".concat(m.name,"' blocked by other connection holding version ").concat(R.oldVersion/10))}),this._maxKey=Vi(h.IDBKeyRange),this._createTransaction=function(R,K,j,q){return new m.Transaction(R,K,j,m._options.chromeTransactionDurability,q)},this._fireOnBlocked=function(R){m.on("blocked").fire(R),Zs.filter(function(K){return K.name===m.name&&K!==m&&!K._state.vcFired}).map(function(K){return K.on("versionchange").fire(R)})},this.use(B_),this.use(q_),this.use(j_),this.use(F_),this.use(L_);var W=new Proxy(this,{get:function(R,K,j){if(K==="_vip")return!0;if(K==="table")return function(H){return Ta(m.table(H),W)};var q=Reflect.get(R,K,j);return q instanceof zf?Ta(q,W):K==="tables"?q.map(function(H){return Ta(H,W)}):K==="_createTransaction"?function(){return Ta(q.apply(this,arguments),W)}:q}});this.vip=W,y.forEach(function(R){return R(m)})}var Da,Tn=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",U_=(Zc.prototype.subscribe=function(d,h,m){return this._subscribe(d&&typeof d!="function"?d:{next:d,error:h,complete:m})},Zc.prototype[Tn]=function(){return this},Zc);function Zc(d){this._subscribe=d}try{Da={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch{Da={indexedDB:null,IDBKeyRange:null}}function lh(d){var h,m=!1,y=new U_(function(b){var k=Le(d),I,T=!1,L={},N={},W={get closed(){return T},unsubscribe:function(){T||(T=!0,I&&I.abort(),R&&Lr.storagemutated.unsubscribe(j))}};b.start&&b.start(W);var R=!1,K=function(){return Ec(q)},j=function(H){Ea(L,H),Vc(N,L)&&K()},q=function(){var H,V,X;!T&&Da.indexedDB&&(L={},H={},I&&I.abort(),I=new AbortController,X=(function(ne){var se=Xs();try{k&&Js();var ie=Dr(d,ne);return ie=k?ie.finally(Rr):ie}finally{se&&Qs()}})(V={subscr:H,signal:I.signal,requery:K,querier:d,trans:null}),Promise.resolve(X).then(function(ne){m=!0,h=ne,T||V.signal.aborted||(L={},(function(se){for(var ie in se)if(f(se,ie))return;return 1})(N=H)||R||(Lr(Wi,j),R=!0),Ec(function(){return!T&&b.next&&b.next(ne)}))},function(ne){m=!1,["DatabaseClosedError","AbortError"].includes(ne?.name)||T||Ec(function(){T||b.error&&b.error(ne)})}))};return setTimeout(K,0),W});return y.hasValue=function(){return m},y.getValue=function(){return h},y}var hs=fr;function eu(d){var h=Br;try{Br=!0,Lr.storagemutated.fire(d),Yc(d,!0)}finally{Br=h}}p(hs,r(r({},nt),{delete:function(d){return new hs(d,{addons:[]}).delete()},exists:function(d){return new hs(d,{addons:[]}).open().then(function(h){return h.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(d){try{return h=hs.dependencies,m=h.indexedDB,h=h.IDBKeyRange,(qc(m)?Promise.resolve(m.databases()).then(function(y){return y.map(function(b){return b.name}).filter(function(b){return b!==ya})}):zc(m,h).toCollection().primaryKeys()).then(d)}catch{return Tt(new re.MissingAPI)}var h,m},defineClass:function(){return function(d){l(this,d)}},ignoreTransaction:function(d){return Re.trans?cs(Re.transless,d):d()},vip:Uc,async:function(d){return function(){try{var h=Gc(d.apply(this,arguments));return h&&typeof h.then=="function"?h:Te.resolve(h)}catch(m){return Tt(m)}}},spawn:function(d,h,m){try{var y=Gc(d.apply(m,h||[]));return y&&typeof y.then=="function"?y:Te.resolve(y)}catch(b){return Tt(b)}},currentTransaction:{get:function(){return Re.trans||null}},waitFor:function(d,h){return h=Te.resolve(typeof d=="function"?hs.ignoreTransaction(d):d).timeout(h||6e4),Re.trans?Re.trans.waitFor(h):h},Promise:Te,debug:{get:function(){return he},set:function(d){Ne(d)}},derive:_,extend:l,props:p,override:A,Events:Ni,on:Lr,liveQuery:lh,extendObservabilitySet:Ea,getByKeyPath:M,setByKeyPath:D,delByKeyPath:function(d,h){typeof h=="string"?D(d,h,void 0):"length"in h&&[].map.call(h,function(m){D(d,m,void 0)})},shallowClone:B,deepClone:fe,getObjectDiff:Xc,cmp:rt,asap:F,minKey:-1/0,addons:[],connections:Zs,errnames:ae,dependencies:Da,cache:fs,semVer:"4.2.0",version:"4.2.0".split(".").map(function(d){return parseInt(d)}).reduce(function(d,h,m){return d+h/Math.pow(10,2*m)})})),hs.maxKey=Vi(hs.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Lr(Wi,function(d){Br||(d=new CustomEvent(Rc,{detail:d}),Br=!0,dispatchEvent(d),Br=!1)}),addEventListener(Rc,function(d){d=d.detail,Br||eu(d)}));var ri,Br=!1,ch=function(){};return typeof BroadcastChannel<"u"&&((ch=function(){(ri=new BroadcastChannel(Rc)).onmessage=function(d){return d.data&&eu(d.data)}})(),typeof ri.unref=="function"&&ri.unref(),Lr(Wi,function(d){Br||ri.postMessage(d)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(d){if(!fr.disableBfCache&&d.persisted){he&&console.debug("Dexie: handling persisted pagehide"),ri?.close();for(var h=0,m=Zs;h<m.length;h++)m[h].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(d){!fr.disableBfCache&&d.persisted&&(he&&console.debug("Dexie: handling persisted pageshow"),ch(),eu({all:new Zt(-1/0,[[]])}))})),Te.rejectionMapper=function(d,h){return!d||d instanceof We||d instanceof TypeError||d instanceof SyntaxError||!d.name||!Fe[d.name]?d:(h=new Fe[d.name](h||d.message,d),"stack"in d&&v(h,"stack",{get:function(){return this.inner.stack}}),h)},Ne(he),r(fr,Object.freeze({__proto__:null,Dexie:fr,liveQuery:lh,Entity:Bf,cmp:rt,PropModification:qi,replacePrefix:function(d,h){return new qi({replacePrefix:[d,h]})},add:function(d){return new qi({add:d})},remove:function(d){return new qi({remove:d})},default:fr,RangeSet:Zt,mergeRanges:Yi,rangesOverlap:Jf}),{default:fr}),fr})})(hl)),hl.exports}var pk=hk();const cd=_v(pk),yp=Symbol.for("Dexie"),Tl=globalThis[yp]||(globalThis[yp]=cd);if(cd.semVer!==Tl.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${cd.semVer} and ${Tl.semVer}`);const{liveQuery:xL,mergeRanges:kL,rangesOverlap:CL,RangeSet:SL,cmp:PL,Entity:AL,PropModification:IL,replacePrefix:EL,add:OL,remove:ML,DexieYProvider:TL}=Tl;class gk extends Tl{cards;card_lots;acquisitions;transactions;scans;decks;deck_cards;price_points;valuations;settings;scan_sale_links;constructor(){super("MtgTrackerDb"),this.version(1).stores({cards:"id, oracleId, name, set, setCode, number, lang, finish",transactions:"id, kind, cardId, source, externalRef, happenedAt",scans:"id, cardFingerprint, cardId, source, scannedAt",decks:"id, platform, name, importedAt",deck_cards:"[deckId+cardId], deckId, cardId",price_points:"id, cardId, provider, asOf",valuations:"id, asOf",settings:"k"}),this.version(2).stores({cards:"id, oracleId, name, set, setCode, number, lang, finish, createdAt, updatedAt",transactions:"id, kind, cardId, source, externalRef, happenedAt, createdAt, updatedAt",scans:"id, cardFingerprint, cardId, source, scannedAt, createdAt, updatedAt",decks:"id, platform, name, importedAt, createdAt, updatedAt",deck_cards:"[deckId+cardId], deckId, cardId, createdAt",price_points:"id, cardId, provider, asOf, createdAt",valuations:"id, asOf, createdAt",settings:"k, createdAt, updatedAt",scan_sale_links:"id, scanId, transactionId, matchedAt, createdAt"}).upgrade(async e=>{const n=new Date;await e.table("cards").toCollection().modify(r=>{r.createdAt=r.createdAt||n,r.updatedAt=r.updatedAt||n}),await e.table("transactions").toCollection().modify(r=>{r.createdAt=r.createdAt||n,r.updatedAt=r.updatedAt||n}),await e.table("scans").toCollection().modify(r=>{r.createdAt=r.createdAt||n,r.updatedAt=r.updatedAt||n}),await e.table("decks").toCollection().modify(r=>{r.createdAt=r.createdAt||n,r.updatedAt=r.updatedAt||n}),await e.table("deck_cards").toCollection().modify(r=>{r.createdAt=r.createdAt||n}),await e.table("price_points").toCollection().modify(r=>{r.createdAt=r.createdAt||n}),await e.table("valuations").toCollection().modify(r=>{r.createdAt=r.createdAt||n}),await e.table("settings").toCollection().modify(r=>{r.createdAt=r.createdAt||n,r.updatedAt=r.updatedAt||n})}),this.version(3).stores({cards:"id, oracleId, name, set, setCode, number, lang, finish, createdAt, updatedAt",transactions:"id, kind, cardId, source, externalRef, happenedAt, createdAt, updatedAt",scans:"id, cardFingerprint, cardId, source, scannedAt, createdAt, updatedAt",decks:"id, platform, name, importedAt, createdAt, updatedAt",deck_cards:"[deckId+cardId], deckId, cardId, createdAt",price_points:"id, cardId, provider, currency, asOf, createdAt, [cardId+asOf], [provider+asOf]",valuations:"id, asOf, createdAt, [asOf+createdAt]",settings:"k, createdAt, updatedAt",scan_sale_links:"id, scanId, transactionId, matchedAt, createdAt"}),this.version(4).stores({cards:"id, oracleId, name, set, setCode, number, lang, finish, createdAt, updatedAt",card_lots:"id, cardId, acquisitionId, source, purchasedAt, disposedAt, createdAt, updatedAt, [cardId+purchasedAt], [acquisitionId+cardId]",transactions:"id, kind, cardId, lotId, source, externalRef, happenedAt, relatedTransactionId, createdAt, updatedAt, [lotId+kind]",scans:"id, cardFingerprint, cardId, lotId, source, scannedAt, boosterPackId, createdAt, updatedAt, [lotId+scannedAt]",decks:"id, platform, name, importedAt, createdAt, updatedAt",deck_cards:"id, deckId, cardId, lotId, addedAt, removedAt, createdAt, [deckId+cardId], [lotId+addedAt]",price_points:"id, cardId, provider, currency, asOf, source, createdAt, [cardId+asOf], [provider+asOf]",valuations:"id, asOf, createdAt, [asOf+createdAt]",settings:"k, createdAt, updatedAt",scan_sale_links:"id, scanId, transactionId, quantity, matchedAt, createdAt"}).upgrade(async e=>{const n=new Date;await e.table("deck_cards").toCollection().modify(r=>{try{r.id||(r.id=`deckcard-${Date.now()}-${Math.random().toString(36).substr(2,9)}`),r.addedAt||(r.addedAt=r.createdAt||n),r.role||(r.role="main"),(!r.cardId||r.cardId==="")&&(r.cardId="unknown-card"),r.deckId||(r.deckId="unknown-deck"),typeof r.quantity!="number"&&(r.quantity=1),r.createdAt||(r.createdAt=n)}catch(s){console.error("Error upgrading deck card:",s,r);return}})}),this.version(5).stores({cards:"id, oracleId, name, set, setCode, number, lang, finish, createdAt, updatedAt",card_lots:"id, cardId, acquisitionId, source, purchasedAt, disposedAt, createdAt, updatedAt, externalRef, [cardId+purchasedAt], [acquisitionId+cardId], [externalRef]",transactions:"id, kind, cardId, lotId, source, externalRef, happenedAt, relatedTransactionId, createdAt, updatedAt, [lotId+kind]",scans:"id, cardFingerprint, cardId, lotId, source, scannedAt, boosterPackId, createdAt, updatedAt, [lotId+scannedAt]",decks:"id, platform, name, importedAt, createdAt, updatedAt",deck_cards:"id, deckId, cardId, lotId, addedAt, removedAt, createdAt, [deckId+cardId], [lotId+addedAt]",price_points:"id, cardId, provider, currency, asOf, source, createdAt, [cardId+asOf], [provider+asOf]",valuations:"id, asOf, createdAt, [asOf+createdAt]",settings:"k, createdAt, updatedAt",scan_sale_links:"id, scanId, transactionId, quantity, matchedAt, createdAt"}),this.version(6).stores({cards:"id, oracleId, name, set, setCode, number, lang, finish, layout, imageUrl, imageUrlBack, createdAt, updatedAt",card_lots:"id, cardId, acquisitionId, source, purchasedAt, disposedAt, createdAt, updatedAt, externalRef, [cardId+purchasedAt], [acquisitionId+cardId], [externalRef]",transactions:"id, kind, cardId, lotId, source, externalRef, happenedAt, relatedTransactionId, createdAt, updatedAt, [lotId+kind]",scans:"id, cardFingerprint, cardId, lotId, source, scannedAt, boosterPackId, createdAt, updatedAt, [lotId+scannedAt]",decks:"id, platform, name, importedAt, createdAt, updatedAt",deck_cards:"id, deckId, cardId, lotId, addedAt, removedAt, createdAt, [deckId+cardId], [lotId+addedAt]",price_points:"id, cardId, provider, currency, asOf, source, createdAt, [cardId+asOf], [provider+asOf]",valuations:"id, asOf, createdAt, [asOf+createdAt]",settings:"k, createdAt, updatedAt",scan_sale_links:"id, scanId, transactionId, quantity, matchedAt, createdAt"}).upgrade(async e=>{await e.table("cards").toCollection().modify(n=>{n.layout=n.layout||"normal"})}),this.version(7).stores({holdings:null}),this.version(8).stores({cards:"id, oracleId, name, set, setCode, number, lang, finish, layout, imageUrl, imageUrlBack, cardmarketId, createdAt, updatedAt",card_lots:"id, cardId, acquisitionId, source, purchasedAt, disposedAt, createdAt, updatedAt, externalRef, [cardId+purchasedAt], [acquisitionId+cardId], [externalRef]",transactions:"id, kind, cardId, lotId, source, externalRef, happenedAt, relatedTransactionId, createdAt, updatedAt, [lotId+kind]",scans:"id, cardFingerprint, cardId, lotId, source, scannedAt, boosterPackId, createdAt, updatedAt, [lotId+scannedAt]",decks:"id, platform, name, importedAt, createdAt, updatedAt",deck_cards:"id, deckId, cardId, lotId, addedAt, removedAt, createdAt, [deckId+cardId], [lotId+addedAt]",price_points:"id, cardId, provider, finish, date, currency, priceCent, asOf, createdAt, [cardId+date], [cardId+asOf], [provider+asOf], [cardId+provider+finish+date]",valuations:"id, asOf, createdAt, [asOf+createdAt]",settings:"k, createdAt, updatedAt",scan_sale_links:"id, scanId, transactionId, quantity, matchedAt, createdAt"}).upgrade(async e=>{const n=e.table("price_points"),r=await n.toArray();for(const s of r){if(s.priceCent==null&&s.price!=null){const f=typeof s.price=="number"&&s.price<1e3;s.priceCent=f?Math.round(s.price*100):s.price,delete s.price}let i=s.finish??"nonfoil",o=s.date??(s.asOf?new Date(s.asOf).toISOString().slice(0,10):void 0);const a=String(s.id??"").split(":"),l=a[2],c=a[3]??a[2];(l==="foil"||l==="etched")&&(i=l),/^\d{4}-\d{2}-\d{2}$/.test(c)&&(o=c);let u="scryfall";s.source&&(s.source==="mtgjson"?u="mtgjson.cardmarket":s.source==="cardmarket"?u="cardmarket.priceguide":u="scryfall"),s.finish=i,s.provider=u,s.date=o??new Date().toISOString().slice(0,10),s.currency=s.currency??"EUR",s.createdAt=s.createdAt??new Date,s.asOf=s.asOf??new Date,s.id=`${s.cardId}:${u}:${i}:${s.date}`,await n.put(s)}}),this.version(9).stores({acquisitions:"id, kind, source, externalRef, currency, happenedAt, createdAt, updatedAt, [source+externalRef]",cards:"id, oracleId, name, set, setCode, number, lang, finish, layout, imageUrl, imageUrlBack, cardmarketId, createdAt, updatedAt",card_lots:"id, cardId, acquisitionId, source, purchasedAt, disposedAt, createdAt, updatedAt, externalRef, [cardId+purchasedAt], [acquisitionId+purchasedAt], [externalRef]",transactions:"id, kind, cardId, lotId, source, externalRef, happenedAt, relatedTransactionId, createdAt, updatedAt, [lotId+kind], [cardId+kind], [source+externalRef], happenedAt",scans:"id, cardFingerprint, cardId, lotId, acquisitionId, source, scannedAt, boosterPackId, externalRef, createdAt, updatedAt, [lotId+scannedAt], [acquisitionId+scannedAt], [cardId+scannedAt], [acquisitionId+externalRef]",decks:"id, platform, name, importedAt, createdAt, updatedAt",deck_cards:"id, deckId, cardId, lotId, addedAt, removedAt, createdAt, [deckId+cardId], [lotId+addedAt]",price_points:"id, cardId, provider, finish, date, currency, priceCent, asOf, createdAt, [cardId+date], [cardId+asOf], [provider+asOf], [cardId+provider+finish+date]",valuations:"id, asOf, createdAt, [asOf+createdAt]",settings:"k, createdAt, updatedAt",scan_sale_links:"id, scanId, transactionId, quantity, matchedAt, createdAt, strategy, score"}).upgrade(async e=>{})}}const ue=new gk,Bn={async add(t){return await ue.cards.add(t)},async getById(t){return await ue.cards.get(t)},async getAll(){return await ue.cards.toArray()},async getByCardmarketIds(t){return await ue.cards.where("cardmarketId").anyOf(t).toArray()},async update(t,e){return await ue.cards.update(t,e)},async delete(t){await ue.cards.delete(t)}},Pt={async add(t){return await ue.card_lots.add(t)},async getById(t){return await ue.card_lots.get(t)},async getAll(){return await ue.card_lots.toArray()},async getByCardId(t){return await ue.card_lots.where("cardId").equals(t).toArray()},async getByExternalRef(t){return await ue.card_lots.where("externalRef").equals(t).toArray()},async getByAcquisitionId(t){return await ue.card_lots.where("acquisitionId").equals(t).toArray()},async getActiveLotsByCardId(t){return await ue.card_lots.where("cardId").equals(t).and(e=>!e.disposedAt).toArray()},async update(t,e){return await ue.card_lots.update(t,e)},async delete(t){await ue.card_lots.delete(t)}},an={async add(t){return await ue.transactions.add(t)},async getById(t){return await ue.transactions.get(t)},async getAll(){return await ue.transactions.toArray()},async getByCardId(t){return await ue.transactions.where("cardId").equals(t).toArray()},async getByLotId(t){return await ue.transactions.where("lotId").equals(t).toArray()},async getByKind(t){return await ue.transactions.where("kind").equals(t).toArray()},async getBuyTransactionsByCardId(t){return await ue.transactions.where("cardId").equals(t).and(e=>e.kind==="BUY").toArray()},async getSellTransactionsByCardId(t){return await ue.transactions.where("cardId").equals(t).and(e=>e.kind==="SELL").toArray()},async getBySourceRef(t,e){return await ue.transactions.where("[source+externalRef]").equals([t,e]).toArray()},async update(t,e){return await ue.transactions.update(t,e)},async delete(t){await ue.transactions.delete(t)}},vp={async add(t){return await ue.scans.add(t)},async getById(t){return await ue.scans.get(t)},async getAll(){return await ue.scans.toArray()},async getByCardId(t){return await ue.scans.where("cardId").equals(t).toArray()},async getByLotId(t){return await ue.scans.where("lotId").equals(t).toArray()},async getByAcquisitionId(t){return await ue.scans.where("acquisitionId").equals(t).toArray()},async getByAcquisitionAndExternalRef(t,e){return await ue.scans.where("[acquisitionId+externalRef]").equals([t,e]).first()},async update(t,e){return await ue.scans.update(t,e)},async delete(t){await ue.scans.delete(t)}},bp={async add(t){return await ue.decks.add(t)},async getById(t){return await ue.decks.get(t)},async getAll(){return await ue.decks.toArray()},async update(t,e){return await ue.decks.update(t,e)},async delete(t){await ue.decks.delete(t)}},_p={async add(t){if(!t.id)throw new Error("DeckCard id is required");if(!t.deckId)throw new Error("DeckCard deckId is required");if(!t.cardId)throw new Error("DeckCard cardId is required");if(typeof t.quantity!="number"||t.quantity<=0)throw new Error("DeckCard quantity must be a positive number");if(!t.role)throw new Error("DeckCard role is required");if(!t.addedAt)throw new Error("DeckCard addedAt is required");if(!t.createdAt)throw new Error("DeckCard createdAt is required");await ue.deck_cards.add(t)},async getById(t){return await ue.deck_cards.get(t)},async getByDeckId(t){return await ue.deck_cards.where("deckId").equals(t).toArray()},async getByCardId(t){return await ue.deck_cards.where("cardId").equals(t).toArray()},async getByDeckIdAndCardId(t,e){return await ue.deck_cards.where("[deckId+cardId]").equals([t,e]).first()},async getByLotId(t){return await ue.deck_cards.where("lotId").equals(t).toArray()},async deleteByDeckId(t){await ue.deck_cards.where("deckId").equals(t).delete()},async update(t,e){return await ue.deck_cards.update(t,e)},async delete(t){await ue.deck_cards.delete(t)}},ho={async add(t){return await ue.price_points.add(t)},async getById(t){return await ue.price_points.get(t)},async getByCardId(t){return await ue.price_points.where("cardId").equals(t).toArray()},async getByCardIdAndDate(t,e){return await ue.price_points.where("[cardId+date]").equals([t,e]).toArray()},async getByCardIdAndProviderAndFinishAndDate(t,e,n,r){return await ue.price_points.where("[cardId+provider+finish+date]").equals([t,e,n,r]).toArray()},async update(t,e){return await ue.price_points.update(t,e)},async bulkPut(t){await ue.price_points.bulkPut(t)},async delete(t){await ue.price_points.delete(t)}},ud={async add(t){return await ue.valuations.add(t)},async getById(t){return await ue.valuations.get(t)},async getAll(){return await ue.valuations.toArray()},async update(t,e){return await ue.valuations.update(t,e)},async delete(t){await ue.valuations.delete(t)}},Uo={async add(t){return ue.acquisitions.add(t)},async getById(t){return ue.acquisitions.get(t)},async getByExternalRef(t,e){return ue.acquisitions.where("[source+externalRef]").equals([t,e]).first()},async update(t,e){return ue.acquisitions.update(t,e)}},Bs={async set(t,e){const n={k:t,v:e,createdAt:new Date,updatedAt:new Date};return await ue.settings.put(n)},async get(t){return(await ue.settings.get(t))?.v},async getAll(){return await ue.settings.toArray()},async delete(t){await ue.settings.delete(t)}};class Be{cents;currency;constructor(e,n="EUR"){this.cents=Math.round(e),this.currency=n}static parse(e,n="EUR"){if(typeof e=="number")return new Be(e*100,n);const r=e.replace(/[€$£\s]/g,"").replace(",","."),s=parseFloat(r);return new Be(isNaN(s)?0:s*100,n)}getCents(){return this.cents}getDecimal(){return this.cents/100}getCurrency(){return this.currency}add(e){if(this.currency!==e.currency)throw new Error("Cannot add Money values with different currencies");return new Be(this.cents+e.cents,this.currency)}subtract(e){if(this.currency!==e.currency)throw new Error("Cannot subtract Money values with different currencies");return new Be(this.cents-e.cents,this.currency)}multiply(e){return new Be(this.cents*e,this.currency)}divide(e){return new Be(this.cents/e,this.currency)}format(e="de-DE"){return new Intl.NumberFormat(e,{style:"currency",currency:this.currency,minimumFractionDigits:2,maximumFractionDigits:2}).format(this.getDecimal())}isZero(){return this.cents===0}isPositive(){return this.cents>0}isNegative(){return this.cents<0}}const mk="mtgjson.idMap.v1",yk={"mtgjson.cardmarket":3,"cardmarket.priceguide":2,scryfall:1},Zd=uc("cards",{state:()=>({cards:{},cardPrices:{},cardLatest:{},idMap:null,loading:!1,loadingPrices:!1,error:null}),getters:{getCardById:t=>e=>t.cards[e],getAllCards:t=>Object.values(t.cards),getCardsBySet:t=>e=>Object.values(t.cards).filter(n=>n.setCode===e),getCardPrice:t=>e=>t.cardPrices[e]||null,getLatestNonfoil:t=>e=>t.cardLatest[e]?.nonfoil||null,getLatestFoil:t=>e=>t.cardLatest[e]?.foil||null},actions:{async loadCards(){this.loading=!0,this.error=null;try{const t=await Bn.getAll();this.cards=t.reduce((e,n)=>(e[n.id]=n,e),{})}catch(t){this.error=t instanceof Error?t.message:"Failed to load cards",console.error("Error loading cards:",t)}finally{this.loading=!1}},async ensureIdMap(){if(!this.idMap)try{this.idMap=await Bs.get(mk)??null}catch(t){console.warn("[cardsStore] Could not load id map",t),this.idMap=null}},uuidForCard(t){const e=this.idMap;if(!e)return null;const n=e[t.id]||(t.oracleId?e[t.oracleId]:void 0);return n?String(n).toLowerCase():null},_pickLatestForFinish(t,e){const n=a=>{try{return new Date(a).toISOString().slice(0,10)}catch{return}},r={};for(const a of t){if((a.finish??"nonfoil")!==e)continue;const c=a.date??(a.asOf?n(a.asOf):void 0);if(!c)continue;const u=yk[a.provider??""]??0,f=a.asOf?new Date(a.asOf).getTime():0,p=r[c];(!p||u>p.rank||u===p.rank&&f>p.asOfTs)&&(r[c]={priceCent:a.priceCent,currency:a.currency??"EUR",rank:u,asOfTs:f})}const s=Object.keys(r);if(!s.length)return null;const i=s.sort((a,l)=>a.localeCompare(l)).at(-1),o=r[i];return new Be(o.priceCent,o.currency)},async loadLatestForCard(t){const e=this.cards[t];if(!e)return;const r=(await ue.price_points.where("cardId").equals(t).toArray()).map(a=>({date:a.date,asOf:a.asOf,provider:a.provider,finish:a.finish??"nonfoil",priceCent:a.priceCent,currency:a.currency??"EUR"})),s=this._pickLatestForFinish(r,"nonfoil"),i=this._pickLatestForFinish(r,"foil");this.cardLatest[t]={nonfoil:s||void 0,foil:i||void 0};const o=(e.finish==="foil"?i:s)||i||s||null;o?this.cardPrices[t]=o:delete this.cardPrices[t]},async loadCardPrices(){this.loadingPrices=!0,this.error=null;try{Object.keys(this.cards).length||await this.loadCards(),await this.ensureIdMap();const t=Object.values(this.cards),e=8;for(let n=0;n<t.length;n+=e){const r=t.slice(n,n+e);await Promise.all(r.map(s=>this.loadLatestForCard(s.id)))}}catch(t){this.error=t instanceof Error?t.message:"Failed to load card prices",console.error("Error loading card prices:",t)}finally{this.loadingPrices=!1}},async getPriceHistory(t){if(!this.cards[t])return[];const n=s=>{try{return new Date(s).toISOString().slice(0,10)}catch{return}};return(await ue.price_points.where("cardId").equals(t).toArray()).map(s=>({...s,date:s.date??(s.asOf?n(s.asOf):void 0)})).filter(s=>typeof s.date=="string").sort((s,i)=>s.date.localeCompare(i.date))},async loadCardsAndPrices(){await this.loadCards(),await this.loadCardPrices()},async addCard(t){await Bn.add(t),this.cards[t.id]=t},async updateCard(t,e){await Bn.update(t,e),this.cards[t]&&(this.cards[t]={...this.cards[t],...e})},async removeCard(t){await Bn.delete(t),delete this.cards[t],delete this.cardPrices[t],delete this.cardLatest[t]}}}),vk=uc("holdings",{state:()=>({holdings:{},loading:!1,error:null}),getters:{getHoldingByCardId:t=>e=>t.holdings[e],getAllHoldings:t=>Object.values(t.holdings),getTotalQuantityByCardId:t=>e=>t.holdings[e]?.quantity||0},actions:{async loadHoldings(){this.loading=!0,this.error=null;try{const t=await Pt.getAll(),n=(await Bn.getAll()).reduce((s,i)=>(s[i.id]=i,s),{}),r={};for(const s of t){if(s.disposedAt)continue;const i=r[s.cardId],o=s.quantity-(s.disposedQuantity||0);i?(i.quantity+=o,i.totalCost+=s.totalAcquisitionCostCent||s.unitCost*o,i.averageCost=i.totalCost/i.quantity):r[s.cardId]={cardId:s.cardId,quantity:o,totalCost:s.totalAcquisitionCostCent||s.unitCost*o,averageCost:s.totalAcquisitionCostCent?s.totalAcquisitionCostCent/s.quantity:s.unitCost,card:n[s.cardId]}}this.holdings=r}catch(t){this.error=t instanceof Error?t.message:"Failed to load holdings",console.error("Error loading holdings:",t)}finally{this.loading=!1}}}}),bk=uc("transactions",{state:()=>({transactions:{},loading:!1,error:null}),getters:{getTransactionById:t=>e=>t.transactions[e],getAllTransactions:t=>Object.values(t.transactions),getTransactionsByCardId:t=>e=>Object.values(t.transactions).filter(n=>n.cardId===e),getTransactionsByKind:t=>e=>Object.values(t.transactions).filter(n=>n.kind===e),getTotalValueByKind:t=>e=>Object.values(t.transactions).filter(n=>n.kind===e).reduce((n,r)=>{const s=r.unitPrice*r.quantity,i=r.fees||0,o=r.shipping||0;return e==="BUY"?n+s+i+o:n+s-i-o},0)},actions:{async loadTransactions(){this.loading=!0,this.error=null;try{const t=await an.getAll();this.transactions=t.reduce((e,n)=>(e[n.id]=n,e),{})}catch(t){this.error=t instanceof Error?t.message:"Failed to load transactions",console.error("Error loading transactions:",t)}finally{this.loading=!1}},async addTransaction(t){try{await an.add(t),this.transactions[t.id]=t}catch(e){throw this.error=e instanceof Error?e.message:"Failed to add transaction",console.error("Error adding transaction:",e),e}},async updateTransaction(t,e){try{await an.update(t,e),this.transactions[t]&&(this.transactions[t]={...this.transactions[t],...e})}catch(n){throw this.error=n instanceof Error?n.message:"Failed to update transaction",console.error("Error updating transaction:",n),n}},async removeTransaction(t){try{await an.delete(t),delete this.transactions[t]}catch(e){throw this.error=e instanceof Error?e.message:"Failed to remove transaction",console.error("Error removing transaction:",e),e}}}});class Dl{static PROVIDER_PRECEDENCE=["cardmarket.priceguide","mtgjson.cardmarket","scryfall"];static async getLatestPriceForCard(e){try{const n=await ho.getByCardId(e);if(n.length===0)return null;const r=this.sortPricePointsByPrecedence(n);if(r.length===0)return null;const s=r[0];return{price:new Be(s.priceCent,s.currency),asOf:s.asOf,provider:s.provider}}catch(n){return console.error(`Error getting latest price for card ${e}:`,n),null}}static async getPricePointsForCard(e,n){try{let r=await ho.getByCardId(e);return n?.source&&(r=r.filter(s=>s.provider===n.source)),n?.finish&&(r=r.filter(s=>s.finish===n.finish)),n?.startDate&&(r=r.filter(s=>new Date(s.asOf)>=n.startDate)),n?.endDate&&(r=r.filter(s=>new Date(s.asOf)<=n.endDate)),r=this.sortPricePointsByPrecedence(r),n?.limit&&(r=r.slice(0,n.limit)),r}catch(r){return console.error(`Error getting price points for card ${e}:`,r),[]}}static async getPriceForDate(e,n){try{const r=n.toISOString().split("T")[0];let s=await ho.getByCardIdAndDate(e,r);if(s.length===0||(s=this.sortPricePointsByPrecedence(s),s.length===0))return null;const i=s[0];return{price:new Be(i.priceCent,i.currency),provider:i.provider,finish:i.finish}}catch(r){return console.error(`Error getting price for card ${e} on date ${n.toISOString().split("T")[0]}:`,r),null}}static async getPriceForDateAndFinish(e,n,r){try{const s=n.toISOString().split("T")[0];let i=await ho.getByCardIdAndDate(e,s);if(i.length===0||(i=i.filter(a=>a.finish===r),i.length===0)||(i=this.sortPricePointsByPrecedence(i),i.length===0))return null;const o=i[0];return{price:new Be(o.priceCent,o.currency),provider:o.provider}}catch(s){return console.error(`Error getting price for card ${e} on date ${n.toISOString().split("T")[0]} with finish ${r}:`,s),null}}static sortPricePointsByPrecedence(e){return e.sort((n,r)=>{const s=this.PROVIDER_PRECEDENCE.indexOf(n.provider),i=this.PROVIDER_PRECEDENCE.indexOf(r.provider),o=s===-1?1/0:s,a=i===-1?1/0:i;return o!==a?o-a:new Date(r.asOf).getTime()-new Date(n.asOf).getTime()})}static getSourcePrecedence(e){const n=this.PROVIDER_PRECEDENCE.indexOf(e);return n===-1?1/0:n}}async function _k(t,e=new Date){const n=await Uo.getById(t);if(!n)throw new Error("Acquisition not found");const r=(n.totalPriceCent??0)+(n.totalFeesCent??0)+(n.totalShippingCent??0),s=await Pt.getByAcquisitionId(t);let i=0,o=0,a=0;const l=[];for(const c of s){const f=(await an.getByLotId(c.id)).filter(S=>S.kind==="SELL"&&S.happenedAt<=e);let p=0,g=0,v=0,_=0,x=0;for(const S of f){p+=S.quantity*S.unitPrice-(S.fees||0)+(S.shipping||0);const A=c.totalAcquisitionCostCent||c.unitCost*c.quantity;g+=A/c.quantity*S.quantity,v+=S.fees||0,_+=S.shipping||0}x=p-g,i+=p,o+=x;const C=c.quantity-f.reduce((S,A)=>S+A.quantity,0);if(C>0){const S=await Dl.getLatestPriceForCard(c.cardId),A=S?S.price.getCents():0,O=C*A,M=(c.totalAcquisitionCostCent||c.unitCost*c.quantity)/c.quantity,D=O-C*M;a+=D}l.push({lotId:c.id,cardId:c.cardId,quantity:c.quantity,acquisitionCostCent:c.totalAcquisitionCostCent||c.unitCost*c.quantity,saleRevenueCent:p,feesCent:v,shippingCent:_,realizedPnLCent:x})}return{totalCostCent:r,totalRevenueCent:i,realizedPnLCent:o,unrealizedPnLCent:a,lots:l}}async function wk(t,e,n){const r=[];switch(e){case"equal_per_card":for(const o of t)r.push(o.quantity);break;case"by_market_price":const s=n?.provider||"scryfall",i=n?.date||new Date().toISOString().slice(0,10);for(const o of t){const a=await ho.getByCardIdAndProviderAndFinishAndDate(o.cardId,s,o.finish||"nonfoil",i);if(a.length>0){const l=a[0];r.push(l.priceCent*o.quantity)}else r.push(o.quantity)}break;case"by_rarity":for(const o of t)r.push(o.quantity*1);break;case"manual":for(const o of t)r.push(o.quantity);break}return r}async function xk(t,e,n){return ue.transaction("rw",ue.card_lots,ue.acquisitions,ue.price_points,async()=>{const r=await Uo.getById(t);if(!r)throw new Error("Acquisition not found");const s=(r.totalPriceCent??0)+(r.totalFeesCent??0)+(r.totalShippingCent??0),i=await Pt.getByAcquisitionId(t),o=await wk(i,e,n),a=o.reduce((_,x)=>_+x,0)||1,l=i.map((_,x)=>s*(o[x]/a)),c=l.map(_=>Math.floor(_)),u=c.reduce((_,x)=>_+x,0);let f=s-u;const p=l.map((_,x)=>_-c[x]),g=i.map((_,x)=>({lot:_,remainder:p[x],originalIndex:x})).sort((_,x)=>x.remainder-_.remainder),v=[...c];for(let _=0;_<f;_++){const x=g[_];x&&v[x.originalIndex]++}for(let _=0;_<i.length;_++){const x=v[_],C=Math.floor(x/Math.max(1,i[_].quantity));await Pt.update(i[_].id,{totalAcquisitionCostCent:x,unitCost:C,acquisitionPriceCent:x,updatedAt:new Date})}await Uo.update(t,{totalCostCent:s,allocationMethod:e,allocationAsOf:new Date,allocationSourceRev:n?.provider?`${n.provider}:${n?.date??""}`:void 0,updatedAt:new Date})})}class Gr{static async calculateLotValue(e){if(e.cardId){const n=await Dl.getLatestPriceForCard(e.cardId);if(n){const r=n.price,s=e.disposedQuantity?e.quantity-e.disposedQuantity:e.quantity;return r.multiply(s)}}return new Be(0,"EUR")}static async calculateLotCostBasis(e){if(e.totalAcquisitionCostCent){const i=(e.disposedQuantity?e.quantity-e.disposedQuantity:e.quantity)/e.quantity;return new Be(e.totalAcquisitionCostCent*i,e.currency||"EUR")}const n=new Be(e.unitCost,e.currency||"EUR"),r=e.disposedQuantity?e.quantity-e.disposedQuantity:e.quantity;return n.multiply(r)}static async calculateRealizedPnL(){const e=await an.getByKind("SELL");let n=new Be(0,"EUR");for(const r of e){const s=new Be(r.unitPrice,r.currency).multiply(r.quantity);let i=new Be(0,"EUR");if(r.lotId){const c=await Pt.getById(r.lotId);c&&(i=(c.totalAcquisitionCostCent?new Be(c.totalAcquisitionCostCent,c.currency||"EUR"):new Be(c.unitCost,c.currency||"EUR").multiply(c.quantity)).multiply(r.quantity/c.quantity))}else r.cardId&&(i=await this.calculateFIFOCostForCard(r.cardId,r.quantity));const o=new Be(r.fees,r.currency),a=new Be(r.shipping,r.currency),l=s.subtract(i).subtract(o).subtract(a);n=n.add(l)}return n}static async calculateFIFOCostForCard(e,n){const s=(await Pt.getByCardId(e)).filter(a=>!a.disposedAt||a.disposedQuantity&&a.disposedQuantity<a.quantity).sort((a,l)=>a.purchasedAt.getTime()-l.purchasedAt.getTime());let i=n,o=new Be(0,"EUR");for(const a of s){if(i<=0)break;const l=a.disposedQuantity?a.quantity-a.disposedQuantity:a.quantity,c=Math.min(i,l),f=new Be(a.unitCost,a.currency||"EUR").multiply(c);o=o.add(f),i-=c}return o}static async calculatePortfolioValue(){const e=await Pt.getAll();let n=new Be(0,"EUR");for(const r of e)if(!r.disposedAt||r.disposedQuantity&&r.disposedQuantity<r.quantity){const s=await this.calculateLotValue(r);n=n.add(s)}return n}static async calculateTotalCostBasis(){const e=await Pt.getAll();let n=new Be(0,"EUR");for(const r of e)if(!r.disposedAt||r.disposedQuantity&&r.disposedQuantity<r.quantity){const s=await this.calculateLotCostBasis(r);n=n.add(s)}return n}static async calculateUnrealizedPnL(){const e=await this.calculatePortfolioValue(),n=await this.calculateTotalCostBasis();return e.subtract(n)}static async getActiveLots(){return(await Pt.getAll()).filter(n=>!n.disposedAt||n.disposedQuantity&&n.disposedQuantity<n.quantity)}static async getOwnedQuantity(e){const n=await Pt.getByCardId(e);let r=0;for(const s of n)s.disposedAt?s.disposedQuantity&&s.disposedQuantity<s.quantity&&(r+=s.quantity-s.disposedQuantity):r+=s.quantity;return r}static async createValuationSnapshot(){try{const e=new Date;if(e.setHours(0,0,0,0),(await ud.getAll()).find(l=>{const c=new Date(l.asOf);return c.setHours(0,0,0,0),c.getTime()===e.getTime()})){console.log("Valuation snapshot for today already exists");return}const s=await this.calculatePortfolioValue(),i=await this.calculateTotalCostBasis(),o=await this.calculateRealizedPnL(),a={id:`valuation-${Date.now()}`,asOf:new Date,totalValue:s.getCents(),totalCostBasis:i.getCents(),realizedPnLToDate:o.getCents(),createdAt:new Date};await ud.add(a),console.log("Valuation snapshot created:",a)}catch(e){throw console.error("Error creating valuation snapshot:",e),e}}static async getAcquisitionPnL(e,n=new Date){return await _k(e,n)}static async allocateAcquisitionCosts(e,n,r){return await xk(e,n,r)}}class Es{static calculateTrueAcquisitionCost(e,n,r,s){const i=e+n+r;return Math.round(i/s*100)}static calculateNetRevenuePerCard(e,n,r,s){const i=e-n-r;return Math.round(i/s*100)}static async getTotalFees(e,n){const r=await an.getAll();let s=new Be(0,"EUR");for(const i of r)e&&new Date(i.happenedAt)<e||n&&new Date(i.happenedAt)>n||(s=s.add(new Be(i.fees||0,"EUR")));return s}static async getTotalShippingCosts(e,n,r){const s=await an.getAll();let i=new Be(0,"EUR");for(const o of s)e==="purchase"&&o.kind!=="BUY"||e==="sale"&&o.kind!=="SELL"||n&&new Date(o.happenedAt)<n||r&&new Date(o.happenedAt)>r||(i=i.add(new Be(o.shipping||0,o.currency||"EUR")));return i}static calculateLotNetProfit(e){if(!e.disposedAt||!e.salePriceCent)return 0;const n=e.totalAcquisitionCostCent||e.unitCost*e.quantity;return(e.totalSaleRevenueCent||e.salePriceCent*e.quantity-(e.saleFeesCent||0)+(e.saleShippingCent||0))-n}static async getTotalNetProfit(){const e=await Pt.getAll();let n=new Be(0,"EUR");for(const r of e)if(r.disposedAt&&r.totalNetProfitCent!==void 0)n=n.add(new Be(r.totalNetProfitCent,"EUR"));else if(r.disposedAt&&r.salePriceCent){const s=this.calculateLotNetProfit(r);n=n.add(new Be(s,"EUR"))}return n}static async getTotalRevenue(){const e=await an.getByKind("SELL");let n=new Be(0,"EUR");for(const r of e){const s=new Be(r.unitPrice*r.quantity,r.currency);n=n.add(s)}return n}static async getTotalCosts(){const e=await an.getByKind("BUY");let n=new Be(0,"EUR");for(const r of e){const s=new Be(r.unitPrice*r.quantity,r.currency),i=new Be(r.fees||0,r.currency),o=new Be(r.shipping||0,r.currency);n=n.add(s).add(i).add(o)}return n}}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function ta(t){return t+.5|0}const Xr=(t,e,n)=>Math.max(Math.min(t,n),e);function po(t){return Xr(ta(t*2.55),0,255)}function Zr(t){return Xr(ta(t*255),0,255)}function Cr(t){return Xr(ta(t/2.55)/100,0,1)}function wp(t){return Xr(ta(t*100),0,100)}const Rn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},dd=[..."0123456789ABCDEF"],kk=t=>dd[t&15],Ck=t=>dd[(t&240)>>4]+dd[t&15],Na=t=>(t&240)>>4===(t&15),Sk=t=>Na(t.r)&&Na(t.g)&&Na(t.b)&&Na(t.a);function Pk(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Rn[t[1]]*17,g:255&Rn[t[2]]*17,b:255&Rn[t[3]]*17,a:e===5?Rn[t[4]]*17:255}:(e===7||e===9)&&(n={r:Rn[t[1]]<<4|Rn[t[2]],g:Rn[t[3]]<<4|Rn[t[4]],b:Rn[t[5]]<<4|Rn[t[6]],a:e===9?Rn[t[7]]<<4|Rn[t[8]]:255})),n}const Ak=(t,e)=>t<255?e(t):"";function Ik(t){var e=Sk(t)?kk:Ck;return t?"#"+e(t.r)+e(t.g)+e(t.b)+Ak(t.a,e):void 0}const Ek=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function wv(t,e,n){const r=e*Math.min(n,1-n),s=(i,o=(i+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[s(0),s(8),s(4)]}function Ok(t,e,n){const r=(s,i=(s+t/60)%6)=>n-n*e*Math.max(Math.min(i,4-i,1),0);return[r(5),r(3),r(1)]}function Mk(t,e,n){const r=wv(t,1,.5);let s;for(e+n>1&&(s=1/(e+n),e*=s,n*=s),s=0;s<3;s++)r[s]*=1-e-n,r[s]+=e;return r}function Tk(t,e,n,r,s){return t===s?(e-n)/r+(e<n?6:0):e===s?(n-t)/r+2:(t-e)/r+4}function ef(t){const n=t.r/255,r=t.g/255,s=t.b/255,i=Math.max(n,r,s),o=Math.min(n,r,s),a=(i+o)/2;let l,c,u;return i!==o&&(u=i-o,c=a>.5?u/(2-i-o):u/(i+o),l=Tk(n,r,s,u,i),l=l*60+.5),[l|0,c||0,a]}function tf(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(Zr)}function nf(t,e,n){return tf(wv,t,e,n)}function Dk(t,e,n){return tf(Mk,t,e,n)}function Rk(t,e,n){return tf(Ok,t,e,n)}function xv(t){return(t%360+360)%360}function $k(t){const e=Ek.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?po(+e[5]):Zr(+e[5]));const s=xv(+e[2]),i=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=Dk(s,i,o):e[1]==="hsv"?r=Rk(s,i,o):r=nf(s,i,o),{r:r[0],g:r[1],b:r[2],a:n}}function Fk(t,e){var n=ef(t);n[0]=xv(n[0]+e),n=nf(n),t.r=n[0],t.g=n[1],t.b=n[2]}function Lk(t){if(!t)return;const e=ef(t),n=e[0],r=wp(e[1]),s=wp(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${s}%, ${Cr(t.a)})`:`hsl(${n}, ${r}%, ${s}%)`}const xp={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},kp={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Bk(){const t={},e=Object.keys(kp),n=Object.keys(xp);let r,s,i,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],s=0;s<n.length;s++)i=n[s],a=a.replace(i,xp[i]);i=parseInt(kp[o],16),t[a]=[i>>16&255,i>>8&255,i&255]}return t}let za;function jk(t){za||(za=Bk(),za.transparent=[0,0,0,0]);const e=za[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const Nk=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function zk(t){const e=Nk.exec(t);let n=255,r,s,i;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?po(o):Xr(o*255,0,255)}return r=+e[1],s=+e[3],i=+e[5],r=255&(e[2]?po(r):Xr(r,0,255)),s=255&(e[4]?po(s):Xr(s,0,255)),i=255&(e[6]?po(i):Xr(i,0,255)),{r,g:s,b:i,a:n}}}function qk(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Cr(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const gu=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,oi=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function Uk(t,e,n){const r=oi(Cr(t.r)),s=oi(Cr(t.g)),i=oi(Cr(t.b));return{r:Zr(gu(r+n*(oi(Cr(e.r))-r))),g:Zr(gu(s+n*(oi(Cr(e.g))-s))),b:Zr(gu(i+n*(oi(Cr(e.b))-i))),a:t.a+n*(e.a-t.a)}}function qa(t,e,n){if(t){let r=ef(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=nf(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function kv(t,e){return t&&Object.assign(e||{},t)}function Cp(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Zr(t[3]))):(e=kv(t,{r:0,g:0,b:0,a:1}),e.a=Zr(e.a)),e}function Wk(t){return t.charAt(0)==="r"?zk(t):$k(t)}class Wo{constructor(e){if(e instanceof Wo)return e;const n=typeof e;let r;n==="object"?r=Cp(e):n==="string"&&(r=Pk(e)||jk(e)||Wk(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=kv(this._rgb);return e&&(e.a=Cr(e.a)),e}set rgb(e){this._rgb=Cp(e)}rgbString(){return this._valid?qk(this._rgb):void 0}hexString(){return this._valid?Ik(this._rgb):void 0}hslString(){return this._valid?Lk(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,s=e.rgb;let i;const o=n===i?.5:n,a=2*o-1,l=r.a-s.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;i=1-c,r.r=255&c*r.r+i*s.r+.5,r.g=255&c*r.g+i*s.g+.5,r.b=255&c*r.b+i*s.b+.5,r.a=o*r.a+(1-o)*s.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=Uk(this._rgb,e._rgb,n)),this}clone(){return new Wo(this.rgb)}alpha(e){return this._rgb.a=Zr(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=ta(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return qa(this._rgb,2,e),this}darken(e){return qa(this._rgb,2,-e),this}saturate(e){return qa(this._rgb,1,e),this}desaturate(e){return qa(this._rgb,1,-e),this}rotate(e){return Fk(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function gr(){}const Vk=(()=>{let t=0;return()=>t++})();function _t(t){return t==null}function kt(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Je(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Kt(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Zn(t,e){return Kt(t)?t:e}function Qe(t,e){return typeof t>"u"?e:t}const Hk=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,Cv=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function pt(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function ht(t,e,n,r){let s,i,o;if(kt(t))for(i=t.length,s=0;s<i;s++)e.call(n,t[s],s);else if(Je(t))for(o=Object.keys(t),i=o.length,s=0;s<i;s++)e.call(n,t[o[s]],o[s])}function Rl(t,e){let n,r,s,i;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(s=t[n],i=e[n],s.datasetIndex!==i.datasetIndex||s.index!==i.index)return!1;return!0}function $l(t){if(kt(t))return t.map($l);if(Je(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let s=0;for(;s<r;++s)e[n[s]]=$l(t[n[s]]);return e}return t}function Sv(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function Kk(t,e,n,r){if(!Sv(t))return;const s=e[t],i=n[t];Je(s)&&Je(i)?Vo(s,i,r):e[t]=$l(i)}function Vo(t,e,n){const r=kt(e)?e:[e],s=r.length;if(!Je(t))return t;n=n||{};const i=n.merger||Kk;let o;for(let a=0;a<s;++a){if(o=r[a],!Je(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)i(l[c],t,o,n)}return t}function Eo(t,e){return Vo(t,e,{merger:Yk})}function Yk(t,e,n){if(!Sv(t))return;const r=e[t],s=n[t];Je(r)&&Je(s)?Eo(r,s):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=$l(s))}const Sp={"":t=>t,x:t=>t.x,y:t=>t.y};function Gk(t){const e=t.split("."),n=[];let r="";for(const s of e)r+=s,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function Xk(t){const e=Gk(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function Ho(t,e){return(Sp[e]||(Sp[e]=Xk(e)))(t)}function rf(t){return t.charAt(0).toUpperCase()+t.slice(1)}const On=t=>typeof t<"u",bn=t=>typeof t=="function",Pp=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function Qk(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const ut=Math.PI,Ut=2*ut,Jk=Ut+ut,Fl=Number.POSITIVE_INFINITY,sf=ut/180,Qt=ut/2,Fn=ut/4,Ll=ut*2/3,Pv=Math.log10,Ei=Math.sign;function Oo(t,e,n){return Math.abs(t-e)<n}function Ap(t){const e=Math.round(t);t=Oo(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(Pv(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function Zk(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((s,i)=>s-i).pop(),e}function eC(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Ns(t){return!eC(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function tC(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function nC(t,e,n){let r,s,i;for(r=0,s=t.length;r<s;r++)i=t[r][n],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function Wt(t){return t*(ut/180)}function Av(t){return t*(180/ut)}function Ip(t){if(!Kt(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function fd(t,e){const n=e.x-t.x,r=e.y-t.y,s=Math.sqrt(n*n+r*r);let i=Math.atan2(r,n);return i<-.5*ut&&(i+=Ut),{angle:i,distance:s}}function Oi(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function rC(t,e){return(t-e+Jk)%Ut-ut}function sr(t){return(t%Ut+Ut)%Ut}function Bl(t,e,n,r){const s=sr(t),i=sr(e),o=sr(n),a=sr(i-s),l=sr(o-s),c=sr(s-i),u=sr(s-o);return s===i||s===o||r&&i===o||a>l&&c<u}function jn(t,e,n){return Math.max(e,Math.min(n,t))}function sC(t){return jn(t,-32768,32767)}function hi(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function of(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,s=0,i;for(;r-s>1;)i=s+r>>1,n(i)?s=i:r=i;return{lo:s,hi:r}}const Ds=(t,e,n,r)=>of(t,n,r?s=>{const i=t[s][e];return i<n||i===n&&t[s+1][e]===n}:s=>t[s][e]<n),iC=(t,e,n)=>of(t,n,r=>t[r][e]>=n);function oC(t,e,n){let r=0,s=t.length;for(;r<s&&t[r]<e;)r++;for(;s>r&&t[s-1]>n;)s--;return r>0||s<t.length?t.slice(r,s):t}const Iv=["push","pop","shift","splice","unshift"];function aC(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Iv.forEach(n=>{const r="_onData"+rf(n),s=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...i){const o=s.apply(this,i);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...i)}),o}})})}function Ep(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,s=r.indexOf(e);s!==-1&&r.splice(s,1),!(r.length>0)&&(Iv.forEach(i=>{delete t[i]}),delete t._chartjs)}function lC(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const Ev=(function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame})();function Ov(t,e){let n=[],r=!1;return function(...s){n=s,r||(r=!0,Ev.call(window,()=>{r=!1,t.apply(e,n)}))}}function cC(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const af=t=>t==="start"?"left":t==="end"?"right":"center",nn=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,uC=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function dC(t,e,n){const r=e.length;let s=0,i=r;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=o.axis,{min:f,max:p,minDefined:g,maxDefined:v}=o.getUserBounds();if(g){if(s=Math.min(Ds(l,u,f).lo,n?r:Ds(e,u,o.getPixelForValue(f)).lo),c){const _=l.slice(0,s+1).reverse().findIndex(x=>!_t(x[a.axis]));s-=Math.max(0,_)}s=jn(s,0,r-1)}if(v){let _=Math.max(Ds(l,o.axis,p,!0).hi+1,n?0:Ds(e,u,o.getPixelForValue(p),!0).hi+1);if(c){const x=l.slice(_-1).findIndex(C=>!_t(C[a.axis]));_+=Math.max(0,x)}i=jn(_,s,r)-s}else i=r-s}return{start:s,count:i}}function fC(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,s={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=s,!0;const i=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,s),i}const Ua=t=>t===0||t===1,Op=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Ut/n)),Mp=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Ut/n)+1,Mo={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Qt)+1,easeOutSine:t=>Math.sin(t*Qt),easeInOutSine:t=>-.5*(Math.cos(ut*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Ua(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Ua(t)?t:Op(t,.075,.3),easeOutElastic:t=>Ua(t)?t:Mp(t,.075,.3),easeInOutElastic(t){return Ua(t)?t:t<.5?.5*Op(t*2,.1125,.45):.5+.5*Mp(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Mo.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Mo.easeInBounce(t*2)*.5:Mo.easeOutBounce(t*2-1)*.5+.5};function lf(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Tp(t){return lf(t)?t:new Wo(t)}function mu(t){return lf(t)?t:new Wo(t).saturate(.5).darken(.1).hexString()}const hC=["x","y","borderWidth","radius","tension"],pC=["color","borderColor","backgroundColor"];function gC(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:pC},numbers:{type:"number",properties:hC}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function mC(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Dp=new Map;function yC(t,e){e=e||{};const n=t+JSON.stringify(e);let r=Dp.get(n);return r||(r=new Intl.NumberFormat(t,e),Dp.set(n,r)),r}function cf(t,e,n){return yC(e,n).format(t)}const vC={values(t){return kt(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let s,i=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),i=bC(t,n)}const o=Pv(Math.abs(i)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),cf(t,r,l)}};function bC(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var Mv={formatters:vC};function _C(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Mv.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const zs=Object.create(null),hd=Object.create(null);function To(t,e){if(!e)return t;const n=e.split(".");for(let r=0,s=n.length;r<s;++r){const i=n[r];t=t[i]||(t[i]=Object.create(null))}return t}function yu(t,e,n){return typeof e=="string"?Vo(To(t,e),n):Vo(To(t,""),e)}class wC{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,s)=>mu(s.backgroundColor),this.hoverBorderColor=(r,s)=>mu(s.borderColor),this.hoverColor=(r,s)=>mu(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return yu(this,e,n)}get(e){return To(this,e)}describe(e,n){return yu(hd,e,n)}override(e,n){return yu(zs,e,n)}route(e,n,r,s){const i=To(this,e),o=To(this,r),a="_"+n;Object.defineProperties(i,{[a]:{value:i[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[s];return Je(l)?Object.assign({},c,l):Qe(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var Mt=new wC({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[gC,mC,_C]);function xC(t){return!t||_t(t.size)||_t(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Rp(t,e,n,r,s){let i=e[s];return i||(i=e[s]=t.measureText(s).width,n.push(s)),i>r&&(r=i),r}function vs(t,e,n){const r=t.currentDevicePixelRatio,s=n!==0?Math.max(n/2,.5):0;return Math.round((e-s)*r)/r+s}function $p(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function pd(t,e,n,r){Tv(t,e,n,r,null)}function Tv(t,e,n,r,s){let i,o,a,l,c,u,f,p;const g=e.pointStyle,v=e.rotation,_=e.radius;let x=(v||0)*sf;if(g&&typeof g=="object"&&(i=g.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(x),t.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),t.restore();return}if(!(isNaN(_)||_<=0)){switch(t.beginPath(),g){default:s?t.ellipse(n,r,s/2,_,0,0,Ut):t.arc(n,r,_,0,Ut),t.closePath();break;case"triangle":u=s?s/2:_,t.moveTo(n+Math.sin(x)*u,r-Math.cos(x)*_),x+=Ll,t.lineTo(n+Math.sin(x)*u,r-Math.cos(x)*_),x+=Ll,t.lineTo(n+Math.sin(x)*u,r-Math.cos(x)*_),t.closePath();break;case"rectRounded":c=_*.516,l=_-c,o=Math.cos(x+Fn)*l,f=Math.cos(x+Fn)*(s?s/2-c:l),a=Math.sin(x+Fn)*l,p=Math.sin(x+Fn)*(s?s/2-c:l),t.arc(n-f,r-a,c,x-ut,x-Qt),t.arc(n+p,r-o,c,x-Qt,x),t.arc(n+f,r+a,c,x,x+Qt),t.arc(n-p,r+o,c,x+Qt,x+ut),t.closePath();break;case"rect":if(!v){l=Math.SQRT1_2*_,u=s?s/2:l,t.rect(n-u,r-l,2*u,2*l);break}x+=Fn;case"rectRot":f=Math.cos(x)*(s?s/2:_),o=Math.cos(x)*_,a=Math.sin(x)*_,p=Math.sin(x)*(s?s/2:_),t.moveTo(n-f,r-a),t.lineTo(n+p,r-o),t.lineTo(n+f,r+a),t.lineTo(n-p,r+o),t.closePath();break;case"crossRot":x+=Fn;case"cross":f=Math.cos(x)*(s?s/2:_),o=Math.cos(x)*_,a=Math.sin(x)*_,p=Math.sin(x)*(s?s/2:_),t.moveTo(n-f,r-a),t.lineTo(n+f,r+a),t.moveTo(n+p,r-o),t.lineTo(n-p,r+o);break;case"star":f=Math.cos(x)*(s?s/2:_),o=Math.cos(x)*_,a=Math.sin(x)*_,p=Math.sin(x)*(s?s/2:_),t.moveTo(n-f,r-a),t.lineTo(n+f,r+a),t.moveTo(n+p,r-o),t.lineTo(n-p,r+o),x+=Fn,f=Math.cos(x)*(s?s/2:_),o=Math.cos(x)*_,a=Math.sin(x)*_,p=Math.sin(x)*(s?s/2:_),t.moveTo(n-f,r-a),t.lineTo(n+f,r+a),t.moveTo(n+p,r-o),t.lineTo(n-p,r+o);break;case"line":o=s?s/2:Math.cos(x)*_,a=Math.sin(x)*_,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(x)*(s?s/2:_),r+Math.sin(x)*_);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Ko(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function na(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function ra(t){t.restore()}function kC(t,e,n,r,s){if(!e)return t.lineTo(n.x,n.y);if(s==="middle"){const i=(e.x+n.x)/2;t.lineTo(i,e.y),t.lineTo(i,n.y)}else s==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function CC(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function SC(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),_t(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function PC(t,e,n,r,s){if(s.strikethrough||s.underline){const i=t.measureText(r),o=e-i.actualBoundingBoxLeft,a=e+i.actualBoundingBoxRight,l=n-i.actualBoundingBoxAscent,c=n+i.actualBoundingBoxDescent,u=s.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function AC(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Yo(t,e,n,r,s,i={}){const o=kt(e)?e:[e],a=i.strokeWidth>0&&i.strokeColor!=="";let l,c;for(t.save(),t.font=s.string,SC(t,i),l=0;l<o.length;++l)c=o[l],i.backdrop&&AC(t,i.backdrop),a&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),_t(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(c,n,r,i.maxWidth)),t.fillText(c,n,r,i.maxWidth),PC(t,n,r,c,i),r+=Number(s.lineHeight);t.restore()}function jl(t,e){const{x:n,y:r,w:s,h:i,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*ut,ut,!0),t.lineTo(n,r+i-o.bottomLeft),t.arc(n+o.bottomLeft,r+i-o.bottomLeft,o.bottomLeft,ut,Qt,!0),t.lineTo(n+s-o.bottomRight,r+i),t.arc(n+s-o.bottomRight,r+i-o.bottomRight,o.bottomRight,Qt,0,!0),t.lineTo(n+s,r+o.topRight),t.arc(n+s-o.topRight,r+o.topRight,o.topRight,0,-Qt,!0),t.lineTo(n+o.topLeft,r)}const IC=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,EC=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function OC(t,e){const n=(""+t).match(IC);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const MC=t=>+t||0;function Dv(t,e){const n={},r=Je(e),s=r?Object.keys(e):e,i=Je(t)?r?o=>Qe(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of s)n[o]=MC(i(o));return n}function TC(t){return Dv(t,{top:"y",right:"x",bottom:"y",left:"x"})}function wi(t){return Dv(t,["topLeft","topRight","bottomLeft","bottomRight"])}function cn(t){const e=TC(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Lt(t,e){t=t||{},e=e||Mt.font;let n=Qe(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=Qe(t.style,e.style);r&&!(""+r).match(EC)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const s={family:Qe(t.family,e.family),lineHeight:OC(Qe(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:Qe(t.weight,e.weight),string:""};return s.string=xC(s),s}function Wa(t,e,n,r){let s,i,o;for(s=0,i=t.length;s<i;++s)if(o=t[s],o!==void 0&&o!==void 0)return o}function DC(t,e,n){const{min:r,max:s}=t,i=Cv(e,(s-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(i)),max:o(s,i)}}function Ws(t,e){return Object.assign(Object.create(t),e)}function uf(t,e=[""],n,r,s=()=>t[0]){const i=n||t;typeof r>"u"&&(r=Lv("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:r,_getTarget:s,override:a=>uf([a,...t],e,i,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return $v(a,l,()=>zC(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return Lp(a).includes(l)},ownKeys(a){return Lp(a)},set(a,l,c){const u=a._storage||(a._storage=s());return a[l]=u[l]=c,delete a._keys,!0}})}function Mi(t,e,n,r){const s={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:Rv(t,r),setContext:i=>Mi(t,i,n,r),override:i=>Mi(t.override(i),e,n,r)};return new Proxy(s,{deleteProperty(i,o){return delete i[o],delete t[o],!0},get(i,o,a){return $v(i,o,()=>$C(i,o,a))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(i,o,a){return t[o]=a,delete i[o],!0}})}function Rv(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:s=e.allKeys}=t;return{allKeys:s,scriptable:n,indexable:r,isScriptable:bn(n)?n:()=>n,isIndexable:bn(r)?r:()=>r}}const RC=(t,e)=>t?t+rf(e):e,df=(t,e)=>Je(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function $v(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function $C(t,e,n){const{_proxy:r,_context:s,_subProxy:i,_descriptors:o}=t;let a=r[e];return bn(a)&&o.isScriptable(e)&&(a=FC(e,a,t,n)),kt(a)&&a.length&&(a=LC(e,a,t,o.isIndexable)),df(e,a)&&(a=Mi(a,s,i&&i[e],o)),a}function FC(t,e,n,r){const{_proxy:s,_context:i,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(i,o||r);return a.delete(t),df(t,l)&&(l=ff(s._scopes,s,t,l)),l}function LC(t,e,n,r){const{_proxy:s,_context:i,_subProxy:o,_descriptors:a}=n;if(typeof i.index<"u"&&r(t))return e[i.index%e.length];if(Je(e[0])){const l=e,c=s._scopes.filter(u=>u!==l);e=[];for(const u of l){const f=ff(c,s,t,u);e.push(Mi(f,i,o&&o[t],a))}}return e}function Fv(t,e,n){return bn(t)?t(e,n):t}const BC=(t,e)=>t===!0?e:typeof t=="string"?Ho(e,t):void 0;function jC(t,e,n,r,s){for(const i of e){const o=BC(n,i);if(o){t.add(o);const a=Fv(o._fallback,n,s);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function ff(t,e,n,r){const s=e._rootScopes,i=Fv(e._fallback,n,r),o=[...t,...s],a=new Set;a.add(r);let l=Fp(a,o,n,i||n,r);return l===null||typeof i<"u"&&i!==n&&(l=Fp(a,o,i,l,r),l===null)?!1:uf(Array.from(a),[""],s,i,()=>NC(e,n,r))}function Fp(t,e,n,r,s){for(;n;)n=jC(t,e,n,r,s);return n}function NC(t,e,n){const r=t._getTarget();e in r||(r[e]={});const s=r[e];return kt(s)&&Je(n)?n:s||{}}function zC(t,e,n,r){let s;for(const i of e)if(s=Lv(RC(i,t),n),typeof s<"u")return df(t,s)?ff(n,r,t,s):s}function Lv(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function Lp(t){let e=t._keys;return e||(e=t._keys=qC(t._scopes)),e}function qC(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(s=>!s.startsWith("_")))e.add(r);return Array.from(e)}const UC=Number.EPSILON||1e-14,Ti=(t,e)=>e<t.length&&!t[e].skip&&t[e],Bv=t=>t==="x"?"y":"x";function WC(t,e,n,r){const s=t.skip?e:t,i=e,o=n.skip?e:n,a=Oi(i,s),l=Oi(o,i);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const f=r*c,p=r*u;return{previous:{x:i.x-f*(o.x-s.x),y:i.y-f*(o.y-s.y)},next:{x:i.x+p*(o.x-s.x),y:i.y+p*(o.y-s.y)}}}function VC(t,e,n){const r=t.length;let s,i,o,a,l,c=Ti(t,0);for(let u=0;u<r-1;++u)if(l=c,c=Ti(t,u+1),!(!l||!c)){if(Oo(e[u],0,UC)){n[u]=n[u+1]=0;continue}s=n[u]/e[u],i=n[u+1]/e[u],a=Math.pow(s,2)+Math.pow(i,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=s*o*e[u],n[u+1]=i*o*e[u])}}function HC(t,e,n="x"){const r=Bv(n),s=t.length;let i,o,a,l=Ti(t,0);for(let c=0;c<s;++c){if(o=a,a=l,l=Ti(t,c+1),!a)continue;const u=a[n],f=a[r];o&&(i=(u-o[n])/3,a[`cp1${n}`]=u-i,a[`cp1${r}`]=f-i*e[c]),l&&(i=(l[n]-u)/3,a[`cp2${n}`]=u+i,a[`cp2${r}`]=f+i*e[c])}}function KC(t,e="x"){const n=Bv(e),r=t.length,s=Array(r).fill(0),i=Array(r);let o,a,l,c=Ti(t,0);for(o=0;o<r;++o)if(a=l,l=c,c=Ti(t,o+1),!!l){if(c){const u=c[e]-l[e];s[o]=u!==0?(c[n]-l[n])/u:0}i[o]=a?c?Ei(s[o-1])!==Ei(s[o])?0:(s[o-1]+s[o])/2:s[o-1]:s[o]}VC(t,s,i),HC(t,i,e)}function Va(t,e,n){return Math.max(Math.min(t,n),e)}function YC(t,e){let n,r,s,i,o,a=Ko(t[0],e);for(n=0,r=t.length;n<r;++n)o=i,i=a,a=n<r-1&&Ko(t[n+1],e),i&&(s=t[n],o&&(s.cp1x=Va(s.cp1x,e.left,e.right),s.cp1y=Va(s.cp1y,e.top,e.bottom)),a&&(s.cp2x=Va(s.cp2x,e.left,e.right),s.cp2y=Va(s.cp2y,e.top,e.bottom)))}function GC(t,e,n,r,s){let i,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")KC(t,s);else{let c=r?t[t.length-1]:t[0];for(i=0,o=t.length;i<o;++i)a=t[i],l=WC(c,a,t[Math.min(i+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&YC(t,n)}function hf(){return typeof window<"u"&&typeof document<"u"}function pf(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Nl(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const dc=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function XC(t,e){return dc(t).getPropertyValue(e)}const QC=["top","right","bottom","left"];function js(t,e,n){const r={};n=n?"-"+n:"";for(let s=0;s<4;s++){const i=QC[s];r[i]=parseFloat(t[e+"-"+i+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const JC=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function ZC(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:s,offsetY:i}=r;let o=!1,a,l;if(JC(s,i,t.target))a=s,l=i;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Os(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,s=dc(n),i=s.boxSizing==="border-box",o=js(s,"padding"),a=js(s,"border","width"),{x:l,y:c,box:u}=ZC(t,n),f=o.left+(u&&a.left),p=o.top+(u&&a.top);let{width:g,height:v}=e;return i&&(g-=o.width+a.width,v-=o.height+a.height),{x:Math.round((l-f)/g*n.width/r),y:Math.round((c-p)/v*n.height/r)}}function eS(t,e,n){let r,s;if(e===void 0||n===void 0){const i=t&&pf(t);if(!i)e=t.clientWidth,n=t.clientHeight;else{const o=i.getBoundingClientRect(),a=dc(i),l=js(a,"border","width"),c=js(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,r=Nl(a.maxWidth,i,"clientWidth"),s=Nl(a.maxHeight,i,"clientHeight")}}return{width:e,height:n,maxWidth:r||Fl,maxHeight:s||Fl}}const Ha=t=>Math.round(t*10)/10;function tS(t,e,n,r){const s=dc(t),i=js(s,"margin"),o=Nl(s.maxWidth,t,"clientWidth")||Fl,a=Nl(s.maxHeight,t,"clientHeight")||Fl,l=eS(t,e,n);let{width:c,height:u}=l;if(s.boxSizing==="content-box"){const p=js(s,"border","width"),g=js(s,"padding");c-=g.width+p.width,u-=g.height+p.height}return c=Math.max(0,c-i.width),u=Math.max(0,r?c/r:u-i.height),c=Ha(Math.min(c,o,l.maxWidth)),u=Ha(Math.min(u,a,l.maxHeight)),c&&!u&&(u=Ha(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&u>l.height&&(u=l.height,c=Ha(Math.floor(u*r))),{width:c,height:u}}function Bp(t,e,n){const r=e||1,s=Math.floor(t.height*r),i=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==s||o.width!==i?(t.currentDevicePixelRatio=r,o.height=s,o.width=i,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const nS=(function(){let t=!1;try{const e={get passive(){return t=!0,!1}};hf()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t})();function jp(t,e){const n=XC(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Ms(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function rS(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function sS(t,e,n,r){const s={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},o=Ms(t,s,n),a=Ms(s,i,n),l=Ms(i,e,n),c=Ms(o,a,n),u=Ms(a,l,n);return Ms(c,u,n)}const iS=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},oS=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function xi(t,e,n){return t?iS(e,n):oS()}function jv(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function Nv(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function zv(t){return t==="angle"?{between:Bl,compare:rC,normalize:sr}:{between:hi,compare:(e,n)=>e-n,normalize:e=>e}}function Np({start:t,end:e,count:n,loop:r,style:s}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:s}}function aS(t,e,n){const{property:r,start:s,end:i}=n,{between:o,normalize:a}=zv(r),l=e.length;let{start:c,end:u,loop:f}=t,p,g;if(f){for(c+=l,u+=l,p=0,g=l;p<g&&o(a(e[c%l][r]),s,i);++p)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:f,style:t.style}}function qv(t,e,n){if(!n)return[t];const{property:r,start:s,end:i}=n,o=e.length,{compare:a,between:l,normalize:c}=zv(r),{start:u,end:f,loop:p,style:g}=aS(t,e,n),v=[];let _=!1,x=null,C,S,A;const O=()=>l(s,A,C)&&a(s,A)!==0,F=()=>a(i,C)===0||l(i,A,C),M=()=>_||O(),D=()=>!_||F();for(let B=u,P=u;B<=f;++B)S=e[B%o],!S.skip&&(C=c(S[r]),C!==A&&(_=l(C,s,i),x===null&&M()&&(x=a(C,s)===0?B:P),x!==null&&D()&&(v.push(Np({start:x,end:B,loop:p,count:o,style:g})),x=null),P=B,A=C));return x!==null&&v.push(Np({start:x,end:f,loop:p,count:o,style:g})),v}function Uv(t,e){const n=[],r=t.segments;for(let s=0;s<r.length;s++){const i=qv(r[s],t.points,e);i.length&&n.push(...i)}return n}function lS(t,e,n,r){let s=0,i=e-1;if(n&&!r)for(;s<e&&!t[s].skip;)s++;for(;s<e&&t[s].skip;)s++;for(s%=e,n&&(i+=s);i>s&&t[i%e].skip;)i--;return i%=e,{start:s,end:i}}function cS(t,e,n,r){const s=t.length,i=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%s];c.skip||c.stop?a.skip||(r=!1,i.push({start:e%s,end:(l-1)%s,loop:r}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&i.push({start:e%s,end:o%s,loop:r}),i}function uS(t,e){const n=t.points,r=t.options.spanGaps,s=n.length;if(!s)return[];const i=!!t._loop,{start:o,end:a}=lS(n,s,i,r);if(r===!0)return zp(t,[{start:o,end:a,loop:i}],n,e);const l=a<o?a+s:a,c=!!t._fullLoop&&o===0&&a===s-1;return zp(t,cS(n,o,l,c),n,e)}function zp(t,e,n,r){return!r||!r.setContext||!n?e:dS(t,e,n,r)}function dS(t,e,n,r){const s=t._chart.getContext(),i=qp(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let u=i,f=e[0].start,p=f;function g(v,_,x,C){const S=a?-1:1;if(v!==_){for(v+=l;n[v%l].skip;)v-=S;for(;n[_%l].skip;)_+=S;v%l!==_%l&&(c.push({start:v%l,end:_%l,loop:x,style:C}),u=C,f=_%l)}}for(const v of e){f=a?f:v.start;let _=n[f%l],x;for(p=f+1;p<=v.end;p++){const C=n[p%l];x=qp(r.setContext(Ws(s,{type:"segment",p0:_,p1:C,p0DataIndex:(p-1)%l,p1DataIndex:p%l,datasetIndex:o}))),fS(x,u)&&g(f,p-1,v.loop,u),_=C,u=x}f<p-1&&g(f,p-1,v.loop,u)}return c}function qp(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function fS(t,e){if(!e)return!1;const n=[],r=function(s,i){return lf(i)?(n.includes(i)||n.push(i),n.indexOf(i)):i};return JSON.stringify(t,r)!==JSON.stringify(e,r)}function Ka(t,e,n){return t.options.clip?t[n]:e[n]}function hS(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:Ka(n,e,"left"),right:Ka(n,e,"right"),top:Ka(r,e,"top"),bottom:Ka(r,e,"bottom")}:e}function Wv(t,e){const n=e._clip;if(n.disabled)return!1;const r=hS(e,t.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class pS{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,s){const i=n.listeners[s],o=n.duration;i.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=Ev.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,s)=>{if(!r.running||!r.items.length)return;const i=r.items;let o=i.length-1,a=!1,l;for(;o>=0;--o)l=i[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(i[o]=i[i.length-1],i.pop());a&&(s.draw(),this._notify(s,r,e,"progress")),i.length||(r.running=!1,this._notify(s,r,e,"complete"),r.initial=!1),n+=i.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,s)=>Math.max(r,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let s=r.length-1;for(;s>=0;--s)r[s].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var wr=new pS;const Up="transparent",gS={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=Tp(t||Up),s=r.valid&&Tp(e||Up);return s&&s.valid?s.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class mS{constructor(e,n,r,s){const i=n[r];s=Wa([e.to,s,i,e.from]);const o=Wa([e.from,i,s]);this._active=!0,this._fn=e.fn||gS[e.type||typeof o],this._easing=Mo[e.easing]||Mo.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const s=this._target[this._prop],i=r-this._start,o=this._duration-i;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=Wa([e.to,n,s,e.from]),this._from=Wa([e.from,s,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,s=this._prop,i=this._from,o=this._loop,a=this._to;let l;if(this._active=i!==a&&(o||n<r),!this._active){this._target[s]=a,this._notify(!0);return}if(n<0){this._target[s]=i;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(i,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let s=0;s<r.length;s++)r[s][n]()}}class gf{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Je(e))return;const n=Object.keys(Mt.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const i=e[s];if(!Je(i))return;const o={};for(const a of n)o[a]=i[a];(kt(i.properties)&&i.properties||[s]).forEach(a=>{(a===s||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,s=vS(e,r);if(!s)return[];const i=this._createAnimations(s,r);return r.$shared&&yS(e.options.$animations,r).then(()=>{e.options=r},()=>{}),i}_createAnimations(e,n){const r=this._properties,s=[],i=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(e,n));continue}const u=n[c];let f=i[c];const p=r.get(c);if(f)if(p&&f.active()){f.update(p,u,a);continue}else f.cancel();if(!p||!p.duration){e[c]=u;continue}i[c]=f=new mS(p,e,c,u),s.push(f)}return s}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return wr.add(this._chart,r),!0}}function yS(t,e){const n=[],r=Object.keys(e);for(let s=0;s<r.length;s++){const i=t[r[s]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}function vS(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function Wp(t,e){const n=t&&t.options||{},r=n.reverse,s=n.min===void 0?e:0,i=n.max===void 0?e:0;return{start:r?i:s,end:r?s:i}}function bS(t,e,n){if(n===!1)return!1;const r=Wp(t,n),s=Wp(e,n);return{top:s.end,right:r.end,bottom:s.start,left:r.start}}function _S(t){let e,n,r,s;return Je(t)?(e=t.top,n=t.right,r=t.bottom,s=t.left):e=n=r=s=t,{top:e,right:n,bottom:r,left:s,disabled:t===!1}}function Vv(t,e){const n=[],r=t._getSortedDatasetMetas(e);let s,i;for(s=0,i=r.length;s<i;++s)n.push(r[s].index);return n}function Vp(t,e,n,r={}){const s=t.keys,i=r.mode==="single";let o,a,l,c;if(e===null)return;let u=!1;for(o=0,a=s.length;o<a;++o){if(l=+s[o],l===n){if(u=!0,r.all)continue;break}c=t.values[l],Kt(c)&&(i||e===0||Ei(e)===Ei(c))&&(e+=c)}return!u&&!r.all?0:e}function wS(t,e){const{iScale:n,vScale:r}=e,s=n.axis==="x"?"x":"y",i=r.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[s]:u,[i]:t[u]};return a}function vu(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function xS(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function kS(t){const{min:e,max:n,minDefined:r,maxDefined:s}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:s?n:Number.POSITIVE_INFINITY}}function CS(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function Hp(t,e,n,r){for(const s of e.getMatchingVisibleMetas(r).reverse()){const i=t[s.index];if(n&&i>0||!n&&i<0)return s.index}return null}function Kp(t,e){const{chart:n,_cachedMeta:r}=t,s=n._stacks||(n._stacks={}),{iScale:i,vScale:o,index:a}=r,l=i.axis,c=o.axis,u=xS(i,o,r),f=e.length;let p;for(let g=0;g<f;++g){const v=e[g],{[l]:_,[c]:x}=v,C=v._stacks||(v._stacks={});p=C[c]=CS(s,u,_),p[a]=x,p._top=Hp(p,o,!0,r.type),p._bottom=Hp(p,o,!1,r.type);const S=p._visualValues||(p._visualValues={});S[a]=x}}function bu(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function SS(t,e){return Ws(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function PS(t,e,n){return Ws(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Zi(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const s of e){const i=s._stacks;if(!i||i[r]===void 0||i[r][n]===void 0)return;delete i[r][n],i[r]._visualValues!==void 0&&i[r]._visualValues[n]!==void 0&&delete i[r]._visualValues[n]}}}const _u=t=>t==="reset"||t==="none",Yp=(t,e)=>e?t:Object.assign({},t),AS=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:Vv(n,!0),values:null};class mf{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=vu(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Zi(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),s=(f,p,g,v)=>f==="x"?p:f==="r"?v:g,i=n.xAxisID=Qe(r.xAxisID,bu(e,"x")),o=n.yAxisID=Qe(r.yAxisID,bu(e,"y")),a=n.rAxisID=Qe(r.rAxisID,bu(e,"r")),l=n.indexAxis,c=n.iAxisID=s(l,i,o,a),u=n.vAxisID=s(l,o,i,a);n.xScale=this.getScaleForId(i),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Ep(this._data,this),e._stacked&&Zi(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(Je(n)){const s=this._cachedMeta;this._data=wS(n,s)}else if(r!==n){if(r){Ep(r,this);const s=this._cachedMeta;Zi(s),s._parsed=[]}n&&Object.isExtensible(n)&&aC(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let s=!1;this._dataCheck();const i=n._stacked;n._stacked=vu(n.vScale,n),n.stack!==r.stack&&(s=!0,Zi(n),n.stack=r.stack),this._resyncElements(e),(s||i!==n._stacked)&&(Kp(this,n._parsed),n._stacked=vu(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:s}=this,{iScale:i,_stacked:o}=r,a=i.axis;let l=e===0&&n===s.length?!0:r._sorted,c=e>0&&r._parsed[e-1],u,f,p;if(this._parsing===!1)r._parsed=s,r._sorted=!0,p=s;else{kt(s[e])?p=this.parseArrayData(r,s,e,n):Je(s[e])?p=this.parseObjectData(r,s,e,n):p=this.parsePrimitiveData(r,s,e,n);const g=()=>f[a]===null||c&&f[a]<c[a];for(u=0;u<n;++u)r._parsed[u+e]=f=p[u],l&&(g()&&(l=!1),c=f);r._sorted=l}o&&Kp(this,p)}parsePrimitiveData(e,n,r,s){const{iScale:i,vScale:o}=e,a=i.axis,l=o.axis,c=i.getLabels(),u=i===o,f=new Array(s);let p,g,v;for(p=0,g=s;p<g;++p)v=p+r,f[p]={[a]:u||i.parse(c[v],v),[l]:o.parse(n[v],v)};return f}parseArrayData(e,n,r,s){const{xScale:i,yScale:o}=e,a=new Array(s);let l,c,u,f;for(l=0,c=s;l<c;++l)u=l+r,f=n[u],a[l]={x:i.parse(f[0],u),y:o.parse(f[1],u)};return a}parseObjectData(e,n,r,s){const{xScale:i,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(s);let u,f,p,g;for(u=0,f=s;u<f;++u)p=u+r,g=n[p],c[u]={x:i.parse(Ho(g,a),p),y:o.parse(Ho(g,l),p)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const s=this.chart,i=this._cachedMeta,o=n[e.axis],a={keys:Vv(s,!0),values:n._stacks[e.axis]._visualValues};return Vp(a,o,i.index,{mode:r})}updateRangeFromParsed(e,n,r,s){const i=r[n.axis];let o=i===null?NaN:i;const a=s&&r._stacks[n.axis];s&&a&&(s.values=a,o=Vp(s,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,s=r._parsed,i=r._sorted&&e===r.iScale,o=s.length,a=this._getOtherScale(e),l=AS(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:f}=kS(a);let p,g;function v(){g=s[p];const _=g[a.axis];return!Kt(g[e.axis])||u>_||f<_}for(p=0;p<o&&!(!v()&&(this.updateRangeFromParsed(c,e,g,l),i));++p);if(i){for(p=o-1;p>=0;--p)if(!v()){this.updateRangeFromParsed(c,e,g,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let s,i,o;for(s=0,i=n.length;s<i;++s)o=n[s][e.axis],Kt(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,s=n.vScale,i=this.getParsed(e);return{label:r?""+r.getLabelForValue(i[r.axis]):"",value:s?""+s.getLabelForValue(i[s.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=_S(Qe(this.options.clip,bS(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,s=r.data||[],i=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||s.length-a,c=this.options.drawActiveElementsOnTop;let u;for(r.dataset&&r.dataset.draw(e,i,a,l),u=a;u<a+l;++u){const f=s[u];f.hidden||(f.active&&c?o.push(f):f.draw(e,i))}for(u=0;u<o.length;++u)o[u].draw(e,i)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const s=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];i=o.$context||(o.$context=PS(this.getContext(),e,o)),i.parsed=this.getParsed(e),i.raw=s.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=SS(this.chart.getContext(),this.index)),i.dataset=s,i.index=i.datasetIndex=this.index;return i.active=!!n,i.mode=r,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const s=n==="active",i=this._cachedDataOpts,o=e+"-"+n,a=i[o],l=this.enableOptionSharing&&On(r);if(a)return Yp(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),f=s?[`${e}Hover`,"hover",e,""]:[e,""],p=c.getOptionScopes(this.getDataset(),u),g=Object.keys(Mt.elements[e]),v=()=>this.getContext(r,s,n),_=c.resolveNamedOptions(p,g,v,f);return _.$shared&&(_.$shared=l,i[o]=Object.freeze(Yp(_,l))),_}_resolveAnimations(e,n,r){const s=this.chart,i=this._cachedDataOpts,o=`animation-${n}`,a=i[o];if(a)return a;let l;if(s.options.animation!==!1){const u=this.chart.config,f=u.datasetAnimationScopeKeys(this._type,n),p=u.getOptionScopes(this.getDataset(),f);l=u.createResolver(p,this.getContext(e,r,n))}const c=new gf(s,l&&l.animations);return l&&l._cacheable&&(i[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||_u(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),s=this._sharedOptions,i=this.getSharedOptions(r),o=this.includeOptions(n,i)||i!==s;return this.updateSharedOptions(i,n,r),{sharedOptions:i,includeOptions:o}}updateElement(e,n,r,s){_u(s)?Object.assign(e,r):this._resolveAnimations(n,s).update(e,r)}updateSharedOptions(e,n,r){e&&!_u(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,s){e.active=s;const i=this.getStyle(n,s);this._resolveAnimations(n,r,s).update(e,{options:!s&&this.getSharedOptions(i)||i})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const s=r.length,i=n.length,o=Math.min(i,s);o&&this.parse(0,o),i>s?this._insertElements(s,i-s,e):i<s&&this._removeElements(i,s-i)}_insertElements(e,n,r=!0){const s=this._cachedMeta,i=s.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(i),a=e;a<o;++a)i[a]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(e,n),r&&this.updateElements(i,e,n,"reset")}updateElements(e,n,r,s){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const s=r._parsed.splice(e,n);r._stacked&&Zi(r,s)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,s]=e;this[n](r,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function IS(t,e,n){let r=1,s=1,i=0,o=0;if(e<Ut){const a=t,l=a+e,c=Math.cos(a),u=Math.sin(a),f=Math.cos(l),p=Math.sin(l),g=(A,O,F)=>Bl(A,a,l,!0)?1:Math.max(O,O*n,F,F*n),v=(A,O,F)=>Bl(A,a,l,!0)?-1:Math.min(O,O*n,F,F*n),_=g(0,c,f),x=g(Qt,u,p),C=v(ut,c,f),S=v(ut+Qt,u,p);r=(_-C)/2,s=(x-S)/2,i=-(_+C)/2,o=-(x+S)/2}return{ratioX:r,ratioY:s,offsetX:i,offsetY:o}}class ES extends mf{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:s}}=e.legend.options;return n.labels.map((i,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:i,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}}};constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const r=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=r;else{let i=l=>+r[l];if(Je(r[e])){const{key:l="value"}=this._parsing;i=c=>+Ho(r[c],l)}let o,a;for(o=e,a=e+n;o<a;++o)s._parsed[o]=i(o)}}_getRotation(){return Wt(this.options.rotation-90)}_getCircumference(){return Wt(this.options.circumference)}_getRotationExtents(){let e=Ut,n=-Ut;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const s=this.chart.getDatasetMeta(r).controller,i=s._getRotation(),o=s._getCircumference();e=Math.min(e,i),n=Math.max(n,i+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:r}=n,s=this._cachedMeta,i=s.data,o=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,a=Math.max((Math.min(r.width,r.height)-o)/2,0),l=Math.min(Hk(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:u,rotation:f}=this._getRotationExtents(),{ratioX:p,ratioY:g,offsetX:v,offsetY:_}=IS(f,u,l),x=(r.width-o)/p,C=(r.height-o)/g,S=Math.max(Math.min(x,C)/2,0),A=Cv(this.options.radius,S),O=Math.max(A*l,0),F=(A-O)/this._getVisibleDatasetWeightTotal();this.offsetX=v*A,this.offsetY=_*A,s.total=this.calculateTotal(),this.outerRadius=A-F*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-F*c,0),this.updateElements(i,0,i.length,e)}_circumference(e,n){const r=this.options,s=this._cachedMeta,i=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||s._parsed[e]===null||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*i/Ut)}updateElements(e,n,r,s){const i=s==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,u=(a.left+a.right)/2,f=(a.top+a.bottom)/2,p=i&&c.animateScale,g=p?0:this.innerRadius,v=p?0:this.outerRadius,{sharedOptions:_,includeOptions:x}=this._getSharedOptions(n,s);let C=this._getRotation(),S;for(S=0;S<n;++S)C+=this._circumference(S,i);for(S=n;S<n+r;++S){const A=this._circumference(S,i),O=e[S],F={x:u+this.offsetX,y:f+this.offsetY,startAngle:C,endAngle:C+A,circumference:A,outerRadius:v,innerRadius:g};x&&(F.options=_||this.resolveDataElementOptions(S,O.active?"active":s)),C+=A,this.updateElement(O,S,F,s)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let r=0,s;for(s=0;s<n.length;s++){const i=e._parsed[s];i!==null&&!isNaN(i)&&this.chart.getDataVisibility(s)&&!n[s].hidden&&(r+=Math.abs(i))}return r}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?Ut*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,s=r.data.labels||[],i=cf(n._parsed[e],r.options.locale);return{label:s[e]||"",value:i}}getMaxBorderWidth(e){let n=0;const r=this.chart;let s,i,o,a,l;if(!e){for(s=0,i=r.data.datasets.length;s<i;++s)if(r.isDatasetVisible(s)){o=r.getDatasetMeta(s),e=o.data,a=o.controller;break}}if(!e)return 0;for(s=0,i=e.length;s<i;++s)l=a.resolveDataElementOptions(s),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let r=0,s=e.length;r<s;++r){const i=this.resolveDataElementOptions(r);n=Math.max(n,i.offset||0,i.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(e){return Math.max(Qe(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class OS extends mf{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:s=[],_dataset:i}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=dC(n,s,o);this._drawStart=a,this._drawCount=l,fC(n)&&(a=0,l=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!i._decimated,r.points=s;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:c},e),this.updateElements(s,a,l,e)}updateElements(e,n,r,s){const i=s==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:f}=this._getSharedOptions(n,s),p=o.axis,g=a.axis,{spanGaps:v,segment:_}=this.options,x=Ns(v)?v:Number.POSITIVE_INFINITY,C=this.chart._animationsDisabled||i||s==="none",S=n+r,A=e.length;let O=n>0&&this.getParsed(n-1);for(let F=0;F<A;++F){const M=e[F],D=C?M:{};if(F<n||F>=S){D.skip=!0;continue}const B=this.getParsed(F),P=_t(B[g]),Z=D[p]=o.getPixelForValue(B[p],F),Y=D[g]=i||P?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,B,l):B[g],F);D.skip=isNaN(Z)||isNaN(Y)||P,D.stop=F>0&&Math.abs(B[p]-O[p])>x,_&&(D.parsed=B,D.raw=c.data[F]),f&&(D.options=u||this.resolveDataElementOptions(F,M.active?"active":s)),C||this.updateElement(M,F,D,s),O=B}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,s=e.data||[];if(!s.length)return r;const i=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,i,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}function bs(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class yf{static override(e){Object.assign(yf.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return bs()}parse(){return bs()}format(){return bs()}add(){return bs()}diff(){return bs()}startOf(){return bs()}endOf(){return bs()}}var MS={_date:yf};function TS(t,e,n,r){const{controller:s,data:i,_sorted:o}=t,a=s._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&i.length){const c=a._reversePixels?iC:Ds;if(r){if(s._sharedOptions){const u=i[0],f=typeof u.getRange=="function"&&u.getRange(e);if(f){const p=c(i,e,n-f),g=c(i,e,n+f);return{lo:p.lo,hi:g.hi}}}}else{const u=c(i,e,n);if(l){const{vScale:f}=s._cachedMeta,{_parsed:p}=t,g=p.slice(0,u.lo+1).reverse().findIndex(_=>!_t(_[f.axis]));u.lo-=Math.max(0,g);const v=p.slice(u.hi).findIndex(_=>!_t(_[f.axis]));u.hi+=Math.max(0,v)}return u}}return{lo:0,hi:i.length-1}}function fc(t,e,n,r,s){const i=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=i.length;a<l;++a){const{index:c,data:u}=i[a],{lo:f,hi:p}=TS(i[a],e,o,s);for(let g=f;g<=p;++g){const v=u[g];v.skip||r(v,c,g)}}}function DS(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,s){const i=e?Math.abs(r.x-s.x):0,o=n?Math.abs(r.y-s.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function wu(t,e,n,r,s){const i=[];return!s&&!t.isPointInArea(e)||fc(t,n,e,function(a,l,c){!s&&!Ko(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&i.push({element:a,datasetIndex:l,index:c})},!0),i}function RS(t,e,n,r){let s=[];function i(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],r),{angle:f}=fd(o,{x:e.x,y:e.y});Bl(f,c,u)&&s.push({element:o,datasetIndex:a,index:l})}return fc(t,n,e,i),s}function $S(t,e,n,r,s,i){let o=[];const a=DS(n);let l=Number.POSITIVE_INFINITY;function c(u,f,p){const g=u.inRange(e.x,e.y,s);if(r&&!g)return;const v=u.getCenterPoint(s);if(!(!!i||t.isPointInArea(v))&&!g)return;const x=a(e,v);x<l?(o=[{element:u,datasetIndex:f,index:p}],l=x):x===l&&o.push({element:u,datasetIndex:f,index:p})}return fc(t,n,e,c),o}function xu(t,e,n,r,s,i){return!i&&!t.isPointInArea(e)?[]:n==="r"&&!r?RS(t,e,n,s):$S(t,e,n,r,s,i)}function Gp(t,e,n,r,s){const i=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return fc(t,n,e,(l,c,u)=>{l[o]&&l[o](e[n],s)&&(i.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,s))}),r&&!a?[]:i}var FS={modes:{index(t,e,n,r){const s=Os(e,t),i=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?wu(t,s,i,r,o):xu(t,s,i,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,f=c.data[u];f&&!f.skip&&l.push({element:f,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,r){const s=Os(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?wu(t,s,i,r,o):xu(t,s,i,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,r){const s=Os(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return wu(t,s,i,r,o)},nearest(t,e,n,r){const s=Os(e,t),i=n.axis||"xy",o=n.includeInvisible||!1;return xu(t,s,i,n.intersect,r,o)},x(t,e,n,r){const s=Os(e,t);return Gp(t,s,"x",n.intersect,r)},y(t,e,n,r){const s=Os(e,t);return Gp(t,s,"y",n.intersect,r)}}};const Hv=["left","top","right","bottom"];function eo(t,e){return t.filter(n=>n.pos===e)}function Xp(t,e){return t.filter(n=>Hv.indexOf(n.pos)===-1&&n.box.axis===e)}function to(t,e){return t.sort((n,r)=>{const s=e?r:n,i=e?n:r;return s.weight===i.weight?s.index-i.index:s.weight-i.weight})}function LS(t){const e=[];let n,r,s,i,o,a;for(n=0,r=(t||[]).length;n<r;++n)s=t[n],{position:i,options:{stack:o,stackWeight:a=1}}=s,e.push({index:n,box:s,pos:i,horizontal:s.isHorizontal(),weight:s.weight,stack:o&&i+o,stackWeight:a});return e}function BS(t){const e={};for(const n of t){const{stack:r,pos:s,stackWeight:i}=n;if(!r||!Hv.includes(s))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}function jS(t,e){const n=BS(t),{vBoxMaxWidth:r,hBoxMaxHeight:s}=e;let i,o,a;for(i=0,o=t.length;i<o;++i){a=t[i];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*r:l&&e.availableWidth,a.height=s):(a.width=r,a.height=u?u*s:l&&e.availableHeight)}return n}function NS(t){const e=LS(t),n=to(e.filter(c=>c.box.fullSize),!0),r=to(eo(e,"left"),!0),s=to(eo(e,"right")),i=to(eo(e,"top"),!0),o=to(eo(e,"bottom")),a=Xp(e,"x"),l=Xp(e,"y");return{fullSize:n,leftAndTop:r.concat(i),rightAndBottom:s.concat(l).concat(o).concat(a),chartArea:eo(e,"chartArea"),vertical:r.concat(s).concat(l),horizontal:i.concat(o).concat(a)}}function Qp(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function Kv(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function zS(t,e,n,r){const{pos:s,box:i}=n,o=t.maxPadding;if(!Je(s)){n.size&&(t[s]-=n.size);const f=r[n.stack]||{size:0,count:1};f.size=Math.max(f.size,n.horizontal?i.height:i.width),n.size=f.size/f.count,t[s]+=n.size}i.getPadding&&Kv(o,i.getPadding());const a=Math.max(0,e.outerWidth-Qp(o,t,"left","right")),l=Math.max(0,e.outerHeight-Qp(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function qS(t){const e=t.maxPadding;function n(r){const s=Math.max(e[r]-t[r],0);return t[r]+=s,s}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function US(t,e){const n=e.maxPadding;function r(s){const i={left:0,top:0,right:0,bottom:0};return s.forEach(o=>{i[o]=Math.max(e[o],n[o])}),i}return r(t?["left","right"]:["top","bottom"])}function go(t,e,n,r){const s=[];let i,o,a,l,c,u;for(i=0,o=t.length,c=0;i<o;++i){a=t[i],l=a.box,l.update(a.width||e.w,a.height||e.h,US(a.horizontal,e));const{same:f,other:p}=zS(e,n,a,r);c|=f&&s.length,u=u||p,l.fullSize||s.push(a)}return c&&go(s,e,n,r)||u}function Ya(t,e,n,r,s){t.top=n,t.left=e,t.right=e+r,t.bottom=n+s,t.width=r,t.height=s}function Jp(t,e,n,r){const s=n.padding;let{x:i,y:o}=e;for(const a of t){const l=a.box,c=r[a.stack]||{placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const f=e.w*u,p=c.size||l.height;On(c.start)&&(o=c.start),l.fullSize?Ya(l,s.left,o,n.outerWidth-s.right-s.left,p):Ya(l,e.left+c.placed,o,f,p),c.start=o,c.placed+=f,o=l.bottom}else{const f=e.h*u,p=c.size||l.width;On(c.start)&&(i=c.start),l.fullSize?Ya(l,i,s.top,p,n.outerHeight-s.bottom-s.top):Ya(l,i,e.top+c.placed,p,f),c.start=i,c.placed+=f,i=l.right}}e.x=i,e.y=o}var Nn={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const s=cn(t.options.layout.padding),i=Math.max(e-s.width,0),o=Math.max(n-s.height,0),a=NS(t.boxes),l=a.vertical,c=a.horizontal;ht(t.boxes,_=>{typeof _.beforeLayout=="function"&&_.beforeLayout()});const u=l.reduce((_,x)=>x.box.options&&x.box.options.display===!1?_:_+1,0)||1,f=Object.freeze({outerWidth:e,outerHeight:n,padding:s,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/u,hBoxMaxHeight:o/2}),p=Object.assign({},s);Kv(p,cn(r));const g=Object.assign({maxPadding:p,w:i,h:o,x:s.left,y:s.top},s),v=jS(l.concat(c),f);go(a.fullSize,g,f,v),go(l,g,f,v),go(c,g,f,v)&&go(l,g,f,v),qS(g),Jp(a.leftAndTop,g,f,v),g.x+=g.w,g.y+=g.h,Jp(a.rightAndBottom,g,f,v),t.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},ht(a.chartArea,_=>{const x=_.box;Object.assign(x,t.chartArea),x.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}};class Yv{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,s){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,s?Math.floor(n/s):r)}}isAttached(e){return!0}updateConfig(e){}}class WS extends Yv{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const pl="$chartjs",VS={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Zp=t=>t===null||t==="";function HS(t,e){const n=t.style,r=t.getAttribute("height"),s=t.getAttribute("width");if(t[pl]={initial:{height:r,width:s,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Zp(s)){const i=jp(t,"width");i!==void 0&&(t.width=i)}if(Zp(r))if(t.style.height==="")t.height=t.width/(e||2);else{const i=jp(t,"height");i!==void 0&&(t.height=i)}return t}const Gv=nS?{passive:!0}:!1;function KS(t,e,n){t&&t.addEventListener(e,n,Gv)}function YS(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,Gv)}function GS(t,e){const n=VS[t.type]||t.type,{x:r,y:s}=Os(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:s!==void 0?s:null}}function zl(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function XS(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||zl(a.addedNodes,r),o=o&&!zl(a.removedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}function QS(t,e,n){const r=t.canvas,s=new MutationObserver(i=>{let o=!1;for(const a of i)o=o||zl(a.removedNodes,r),o=o&&!zl(a.addedNodes,r);o&&n()});return s.observe(document,{childList:!0,subtree:!0}),s}const Go=new Map;let eg=0;function Xv(){const t=window.devicePixelRatio;t!==eg&&(eg=t,Go.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function JS(t,e){Go.size||window.addEventListener("resize",Xv),Go.set(t,e)}function ZS(t){Go.delete(t),Go.size||window.removeEventListener("resize",Xv)}function eP(t,e,n){const r=t.canvas,s=r&&pf(r);if(!s)return;const i=Ov((a,l)=>{const c=s.clientWidth;n(a,l),c<s.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||i(c,u)});return o.observe(s),JS(t,i),o}function ku(t,e,n){n&&n.disconnect(),e==="resize"&&ZS(t)}function tP(t,e,n){const r=t.canvas,s=Ov(i=>{t.ctx!==null&&n(GS(i,t))},t);return KS(r,e,s),s}class nP extends Yv{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(HS(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[pl])return!1;const r=n[pl].initial;["height","width"].forEach(i=>{const o=r[i];_t(o)?n.removeAttribute(i):n.setAttribute(i,o)});const s=r.style||{};return Object.keys(s).forEach(i=>{n.style[i]=s[i]}),n.width=n.width,delete n[pl],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const s=e.$proxies||(e.$proxies={}),o={attach:XS,detach:QS,resize:eP}[n]||tP;s[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),s=r[n];if(!s)return;({attach:ku,detach:ku,resize:ku}[n]||YS)(e,n,s),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,s){return tS(e,n,r,s)}isAttached(e){const n=e&&pf(e);return!!(n&&n.isConnected)}}function rP(t){return!hf()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?WS:nP}let wn=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return Ns(this.x)&&Ns(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const s={};return e.forEach(i=>{s[i]=r[i]&&r[i].active()?r[i]._to:this[i]}),s}};function sP(t,e){const n=t.options.ticks,r=iP(t),s=Math.min(n.maxTicksLimit||r,r),i=n.major.enabled?aP(e):[],o=i.length,a=i[0],l=i[o-1],c=[];if(o>s)return lP(e,c,i,o/s),c;const u=oP(i,e,s);if(o>0){let f,p;const g=o>1?Math.round((l-a)/(o-1)):null;for(Ga(e,c,u,_t(g)?0:a-g,a),f=0,p=o-1;f<p;f++)Ga(e,c,u,i[f],i[f+1]);return Ga(e,c,u,l,_t(g)?e.length:l+g),c}return Ga(e,c,u),c}function iP(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),s=t._maxLength/n;return Math.floor(Math.min(r,s))}function oP(t,e,n){const r=cP(t),s=e.length/n;if(!r)return Math.max(s,1);const i=Zk(r);for(let o=0,a=i.length-1;o<a;o++){const l=i[o];if(l>s)return l}return Math.max(s,1)}function aP(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function lP(t,e,n,r){let s=0,i=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===i&&(e.push(t[o]),s++,i=n[s*r])}function Ga(t,e,n,r,s){const i=Qe(r,0),o=Math.min(Qe(s,t.length),t.length);let a=0,l,c,u;for(n=Math.ceil(n),s&&(l=s-r,n=l/Math.floor(l/n)),u=i;u<0;)a++,u=Math.round(i+a*n);for(c=Math.max(i,0);c<o;c++)c===u&&(e.push(t[c]),a++,u=Math.round(i+a*n))}function cP(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const uP=t=>t==="left"?"right":t==="right"?"left":t,tg=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,ng=(t,e)=>Math.min(e||t,t);function rg(t,e){const n=[],r=t.length/e,s=t.length;let i=0;for(;i<s;i+=r)n.push(t[Math.floor(i)]);return n}function dP(t,e,n){const r=t.ticks.length,s=Math.min(e,r-1),i=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(s),c;if(!(n&&(r===1?c=Math.max(l-i,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(s-1))/2,l+=s<e?c:-c,l<i-a||l>o+a)))return l}function fP(t,e){ht(t,n=>{const r=n.gc,s=r.length/2;let i;if(s>e){for(i=0;i<s;++i)delete n.data[r[i]];r.splice(0,s)}})}function no(t){return t.drawTicks?t.tickLength:0}function sg(t,e){if(!t.display)return 0;const n=Lt(t.font,e),r=cn(t.padding);return(kt(t.text)?t.text.length:1)*n.lineHeight+r.height}function hP(t,e){return Ws(t,{scale:e,type:"scale"})}function pP(t,e,n){return Ws(t,{tick:n,index:e,type:"tick"})}function gP(t,e,n){let r=af(t);return(n&&e!=="right"||!n&&e==="right")&&(r=uP(r)),r}function mP(t,e,n,r){const{top:s,left:i,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let f=0,p,g,v;const _=o-s,x=a-i;if(t.isHorizontal()){if(g=nn(r,i,a),Je(n)){const C=Object.keys(n)[0],S=n[C];v=u[C].getPixelForValue(S)+_-e}else n==="center"?v=(c.bottom+c.top)/2+_-e:v=tg(t,n,e);p=a-i}else{if(Je(n)){const C=Object.keys(n)[0],S=n[C];g=u[C].getPixelForValue(S)-x+e}else n==="center"?g=(c.left+c.right)/2-x+e:g=tg(t,n,e);v=nn(r,o,s),f=n==="left"?-Qt:Qt}return{titleX:g,titleY:v,maxWidth:p,rotation:f}}class Fi extends wn{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:s}=this;return e=Zn(e,Number.POSITIVE_INFINITY),n=Zn(n,Number.NEGATIVE_INFINITY),r=Zn(r,Number.POSITIVE_INFINITY),s=Zn(s,Number.NEGATIVE_INFINITY),{min:Zn(e,r),max:Zn(n,s),minDefined:Kt(e),maxDefined:Kt(n)}}getMinMax(e){let{min:n,max:r,minDefined:s,maxDefined:i}=this.getUserBounds(),o;if(s&&i)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),s||(n=Math.min(n,o.min)),i||(r=Math.max(r,o.max));return n=i&&n>r?r:n,r=s&&n>r?n:r,{min:Zn(n,Zn(r,n)),max:Zn(r,Zn(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){pt(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:s,grace:i,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=DC(this,i,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?rg(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=sP(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){pt(this.options.afterUpdate,[this])}beforeSetDimensions(){pt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){pt(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),pt(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){pt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,s,i;for(r=0,s=e.length;r<s;r++)i=e[r],i.label=pt(n.callback,[i.value,r,e],this)}afterTickToLabelConversion(){pt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){pt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=ng(this.ticks.length,e.ticks.maxTicksLimit),s=n.minRotation||0,i=n.maxRotation;let o=s,a,l,c;if(!this._isVisible()||!n.display||s>=i||r<=1||!this.isHorizontal()){this.labelRotation=s;return}const u=this._getLabelSizes(),f=u.widest.width,p=u.highest.height,g=jn(this.chart.width-f,0,this.maxWidth);a=e.offset?this.maxWidth/r:g/(r-1),f+6>a&&(a=g/(r-(e.offset?.5:1)),l=this.maxHeight-no(e.grid)-n.padding-sg(e.title,this.chart.options.font),c=Math.sqrt(f*f+p*p),o=Av(Math.min(Math.asin(jn((u.highest.height+6)/a,-1,1)),Math.asin(jn(l/c,-1,1))-Math.asin(jn(p/c,-1,1)))),o=Math.max(s,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){pt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){pt(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:s,grid:i}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=sg(s,n.options.font);if(a?(e.width=this.maxWidth,e.height=no(i)+l):(e.height=this.maxHeight,e.width=no(i)+l),r.display&&this.ticks.length){const{first:c,last:u,widest:f,highest:p}=this._getLabelSizes(),g=r.padding*2,v=Wt(this.labelRotation),_=Math.cos(v),x=Math.sin(v);if(a){const C=r.mirror?0:x*f.width+_*p.height;e.height=Math.min(this.maxHeight,e.height+C+g)}else{const C=r.mirror?0:_*f.width+x*p.height;e.width=Math.min(this.maxWidth,e.width+C+g)}this._calculatePadding(c,u,x,_)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,s){const{ticks:{align:i,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let p=0,g=0;l?c?(p=s*e.width,g=r*n.height):(p=r*e.height,g=s*n.width):i==="start"?g=n.width:i==="end"?p=e.width:i!=="inner"&&(p=e.width/2,g=n.width/2),this.paddingLeft=Math.max((p-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((g-f+o)*this.width/(this.width-f),0)}else{let u=n.height/2,f=e.height/2;i==="start"?(u=0,f=e.height):i==="end"&&(u=n.height,f=0),this.paddingTop=u+o,this.paddingBottom=f+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){pt(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)_t(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=rg(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:s,_longestTextCache:i}=this,o=[],a=[],l=Math.floor(n/ng(n,r));let c=0,u=0,f,p,g,v,_,x,C,S,A,O,F;for(f=0;f<n;f+=l){if(v=e[f].label,_=this._resolveTickFontOptions(f),s.font=x=_.string,C=i[x]=i[x]||{data:{},gc:[]},S=_.lineHeight,A=O=0,!_t(v)&&!kt(v))A=Rp(s,C.data,C.gc,A,v),O=S;else if(kt(v))for(p=0,g=v.length;p<g;++p)F=v[p],!_t(F)&&!kt(F)&&(A=Rp(s,C.data,C.gc,A,F),O+=S);o.push(A),a.push(O),c=Math.max(A,c),u=Math.max(O,u)}fP(i,n);const M=o.indexOf(c),D=a.indexOf(u),B=P=>({width:o[P]||0,height:a[P]||0});return{first:B(0),last:B(n-1),widest:B(M),highest:B(D),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return sC(this._alignToPixels?vs(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=pP(this.getContext(),e,r))}return this.$context||(this.$context=hP(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Wt(this.labelRotation),r=Math.abs(Math.cos(n)),s=Math.abs(Math.sin(n)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,a=i?i.widest.width+o:0,l=i?i.highest.height+o:0;return this.isHorizontal()?l*r>a*s?a/r:l/s:l*s<a*r?l/r:a/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,s=this.options,{grid:i,position:o,border:a}=s,l=i.offset,c=this.isHorizontal(),f=this.ticks.length+(l?1:0),p=no(i),g=[],v=a.setContext(this.getContext()),_=v.display?v.width:0,x=_/2,C=function(Ce){return vs(r,Ce,_)};let S,A,O,F,M,D,B,P,Z,Y,z,fe;if(o==="top")S=C(this.bottom),D=this.bottom-p,P=S-x,Y=C(e.top)+x,fe=e.bottom;else if(o==="bottom")S=C(this.top),Y=e.top,fe=C(e.bottom)-x,D=S+x,P=this.top+p;else if(o==="left")S=C(this.right),M=this.right-p,B=S-x,Z=C(e.left)+x,z=e.right;else if(o==="right")S=C(this.left),Z=e.left,z=C(e.right)-x,M=S+x,B=this.left+p;else if(n==="x"){if(o==="center")S=C((e.top+e.bottom)/2+.5);else if(Je(o)){const Ce=Object.keys(o)[0],Pe=o[Ce];S=C(this.chart.scales[Ce].getPixelForValue(Pe))}Y=e.top,fe=e.bottom,D=S+x,P=D+p}else if(n==="y"){if(o==="center")S=C((e.left+e.right)/2);else if(Je(o)){const Ce=Object.keys(o)[0],Pe=o[Ce];S=C(this.chart.scales[Ce].getPixelForValue(Pe))}M=S-x,B=M-p,Z=e.left,z=e.right}const me=Qe(s.ticks.maxTicksLimit,f),Ae=Math.max(1,Math.ceil(f/me));for(A=0;A<f;A+=Ae){const Ce=this.getContext(A),Pe=i.setContext(Ce),te=a.setContext(Ce),ee=Pe.lineWidth,G=Pe.color,Le=te.dash||[],we=te.dashOffset,We=Pe.tickWidth,wt=Pe.tickColor,gt=Pe.tickBorderDash||[],st=Pe.tickBorderDashOffset;O=dP(this,A,l),O!==void 0&&(F=vs(r,O,ee),c?M=B=Z=z=F:D=P=Y=fe=F,g.push({tx1:M,ty1:D,tx2:B,ty2:P,x1:Z,y1:Y,x2:z,y2:fe,width:ee,color:G,borderDash:Le,borderDashOffset:we,tickWidth:We,tickColor:wt,tickBorderDash:gt,tickBorderDashOffset:st}))}return this._ticksLength=f,this._borderValue=S,g}_computeLabelItems(e){const n=this.axis,r=this.options,{position:s,ticks:i}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:f}=i,p=no(r.grid),g=p+u,v=f?-u:g,_=-Wt(this.labelRotation),x=[];let C,S,A,O,F,M,D,B,P,Z,Y,z,fe="middle";if(s==="top")M=this.bottom-v,D=this._getXAxisLabelAlignment();else if(s==="bottom")M=this.top+v,D=this._getXAxisLabelAlignment();else if(s==="left"){const Ae=this._getYAxisLabelAlignment(p);D=Ae.textAlign,F=Ae.x}else if(s==="right"){const Ae=this._getYAxisLabelAlignment(p);D=Ae.textAlign,F=Ae.x}else if(n==="x"){if(s==="center")M=(e.top+e.bottom)/2+g;else if(Je(s)){const Ae=Object.keys(s)[0],Ce=s[Ae];M=this.chart.scales[Ae].getPixelForValue(Ce)+g}D=this._getXAxisLabelAlignment()}else if(n==="y"){if(s==="center")F=(e.left+e.right)/2-g;else if(Je(s)){const Ae=Object.keys(s)[0],Ce=s[Ae];F=this.chart.scales[Ae].getPixelForValue(Ce)}D=this._getYAxisLabelAlignment(p).textAlign}n==="y"&&(l==="start"?fe="top":l==="end"&&(fe="bottom"));const me=this._getLabelSizes();for(C=0,S=a.length;C<S;++C){A=a[C],O=A.label;const Ae=i.setContext(this.getContext(C));B=this.getPixelForTick(C)+i.labelOffset,P=this._resolveTickFontOptions(C),Z=P.lineHeight,Y=kt(O)?O.length:1;const Ce=Y/2,Pe=Ae.color,te=Ae.textStrokeColor,ee=Ae.textStrokeWidth;let G=D;o?(F=B,D==="inner"&&(C===S-1?G=this.options.reverse?"left":"right":C===0?G=this.options.reverse?"right":"left":G="center"),s==="top"?c==="near"||_!==0?z=-Y*Z+Z/2:c==="center"?z=-me.highest.height/2-Ce*Z+Z:z=-me.highest.height+Z/2:c==="near"||_!==0?z=Z/2:c==="center"?z=me.highest.height/2-Ce*Z:z=me.highest.height-Y*Z,f&&(z*=-1),_!==0&&!Ae.showLabelBackdrop&&(F+=Z/2*Math.sin(_))):(M=B,z=(1-Y)*Z/2);let Le;if(Ae.showLabelBackdrop){const we=cn(Ae.backdropPadding),We=me.heights[C],wt=me.widths[C];let gt=z-we.top,st=0-we.left;switch(fe){case"middle":gt-=We/2;break;case"bottom":gt-=We;break}switch(D){case"center":st-=wt/2;break;case"right":st-=wt;break;case"inner":C===S-1?st-=wt:C>0&&(st-=wt/2);break}Le={left:st,top:gt,width:wt+we.width,height:We+we.height,color:Ae.backdropColor}}x.push({label:O,font:P,textOffset:z,options:{rotation:_,color:Pe,strokeColor:te,strokeWidth:ee,textAlign:G,textBaseline:fe,translation:[F,M],backdrop:Le}})}return x}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Wt(this.labelRotation))return e==="top"?"left":"right";let s="center";return n.align==="start"?s="left":n.align==="end"?s="right":n.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:s,padding:i}}=this.options,o=this._getLabelSizes(),a=e+i,l=o.widest.width;let c,u;return n==="left"?s?(u=this.right+i,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?s?(u=this.left+i,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:s,width:i,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,s,i,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const s=this.ticks.findIndex(i=>i.value===e);return s>=0?n.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const a=(l,c,u)=>{!u.width||!u.color||(r.save(),r.lineWidth=u.width,r.strokeStyle=u.color,r.setLineDash(u.borderDash||[]),r.lineDashOffset=u.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(i=0,o=s.length;i<o;++i){const l=s[i];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:s}}=this,i=r.setContext(this.getContext()),o=r.display?i.width:0;if(!o)return;const a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,f,p;this.isHorizontal()?(c=vs(e,this.left,o)-o/2,u=vs(e,this.right,a)+a/2,f=p=l):(f=vs(e,this.top,o)-o/2,p=vs(e,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.beginPath(),n.moveTo(c,f),n.lineTo(u,p),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,s=this._computeLabelArea();s&&na(r,s);const i=this.getLabelItems(e);for(const o of i){const a=o.options,l=o.font,c=o.label,u=o.textOffset;Yo(r,c,0,u,l,a)}s&&ra(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:s}}=this;if(!r.display)return;const i=Lt(r.font),o=cn(r.padding),a=r.align;let l=i.lineHeight/2;n==="bottom"||n==="center"||Je(n)?(l+=o.bottom,kt(r.text)&&(l+=i.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:f,rotation:p}=mP(this,l,n,a);Yo(e,r.text,0,0,i,{color:r.color,maxWidth:f,rotation:p,textAlign:gP(a,n,s),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=Qe(e.grid&&e.grid.z,-1),s=Qe(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Fi.prototype.draw?[{z:n,draw:i=>{this.draw(i)}}]:[{z:r,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:n,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",s=[];let i,o;for(i=0,o=n.length;i<o;++i){const a=n[i];a[r]===this.id&&(!e||a.type===e)&&s.push(a)}return s}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Lt(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Xa{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;bP(n)&&(r=this.register(n));const s=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in s||(s[i]=e,yP(e,o,r),this.override&&Mt.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,s=this.scope;r in n&&delete n[r],s&&r in Mt[s]&&(delete Mt[s][r],this.override&&delete zs[r])}}function yP(t,e,n){const r=Vo(Object.create(null),[n?Mt.get(n):{},Mt.get(e),t.defaults]);Mt.set(e,r),t.defaultRoutes&&vP(e,t.defaultRoutes),t.descriptors&&Mt.describe(e,t.descriptors)}function vP(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),s=r.pop(),i=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");Mt.route(i,s,l,a)})}function bP(t){return"id"in t&&"defaults"in t}class _P{constructor(){this.controllers=new Xa(mf,"datasets",!0),this.elements=new Xa(wn,"elements"),this.plugins=new Xa(Object,"plugins"),this.scales=new Xa(Fi,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(s=>{const i=r||this._getRegistryForType(s);r||i.isForType(s)||i===this.plugins&&s.id?this._exec(e,i,s):ht(s,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const s=rf(e);pt(r["before"+s],[],r),n[e](r),pt(r["after"+s],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const s=n.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return s}}var rr=new _P;class wP{constructor(){this._init=[]}notify(e,n,r,s){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=s?this._descriptors(e).filter(s):this._descriptors(e),o=this._notify(i,e,n,r);return n==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,r,s){s=s||{};for(const i of e){const o=i.plugin,a=o[r],l=[n,s,i.options];if(pt(a,l,o)===!1&&s.cancelable)return!1}return!0}invalidate(){_t(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,s=Qe(r.options&&r.options.plugins,{}),i=xP(r);return s===!1&&!n?[]:CP(e,i,s,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,s=(i,o)=>i.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(s(n,r),e,"stop"),this._notify(s(r,n),e,"start")}}function xP(t){const e={},n=[],r=Object.keys(rr.plugins.items);for(let i=0;i<r.length;i++)n.push(rr.getPlugin(r[i]));const s=t.plugins||[];for(let i=0;i<s.length;i++){const o=s[i];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function kP(t,e){return!e&&t===!1?null:t===!0?{}:t}function CP(t,{plugins:e,localIds:n},r,s){const i=[],o=t.getContext();for(const a of e){const l=a.id,c=kP(r[l],s);c!==null&&i.push({plugin:a,options:SP(t.config,{plugin:a,local:n[l]},c,o)})}return i}function SP(t,{plugin:e,local:n},r,s){const i=t.pluginScopeKeys(e),o=t.getOptionScopes(r,i);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function gd(t,e){const n=Mt.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function PP(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function AP(t,e){return t===e?"_index_":"_value_"}function ig(t){if(t==="x"||t==="y"||t==="r")return t}function IP(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function md(t,...e){if(ig(t))return t;for(const n of e){const r=n.axis||IP(n.position)||t.length>1&&ig(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function og(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function EP(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return og(t,"x",n[0])||og(t,"y",n[0])}return{}}function OP(t,e){const n=zs[t.type]||{scales:{}},r=e.scales||{},s=gd(t.type,e),i=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!Je(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=md(o,a,EP(o,t),Mt.scales[a.type]),c=AP(l,s),u=n.scales||{};i[o]=Eo(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||gd(a,e),u=(zs[a]||{}).scales||{};Object.keys(u).forEach(f=>{const p=PP(f,l),g=o[p+"AxisID"]||p;i[g]=i[g]||Object.create(null),Eo(i[g],[{axis:p},r[g],u[f]])})}),Object.keys(i).forEach(o=>{const a=i[o];Eo(a,[Mt.scales[a.type],Mt.scale])}),i}function Qv(t){const e=t.options||(t.options={});e.plugins=Qe(e.plugins,{}),e.scales=OP(t,e)}function Jv(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function MP(t){return t=t||{},t.data=Jv(t.data),Qv(t),t}const ag=new Map,Zv=new Set;function Qa(t,e){let n=ag.get(t);return n||(n=e(),ag.set(t,n),Zv.add(n)),n}const ro=(t,e,n)=>{const r=Ho(e,n);r!==void 0&&t.add(r)};class TP{constructor(e){this._config=MP(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Jv(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Qv(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Qa(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Qa(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Qa(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return Qa(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let s=r.get(e);return(!s||n)&&(s=new Map,r.set(e,s)),s}getOptionScopes(e,n,r){const{options:s,type:i}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(f=>ro(l,e,f))),u.forEach(f=>ro(l,s,f)),u.forEach(f=>ro(l,zs[i]||{},f)),u.forEach(f=>ro(l,Mt,f)),u.forEach(f=>ro(l,hd,f))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),Zv.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,zs[n]||{},Mt.datasets[n]||{},{type:n},Mt,hd]}resolveNamedOptions(e,n,r,s=[""]){const i={$shared:!0},{resolver:o,subPrefixes:a}=lg(this._resolverCache,e,s);let l=o;if(RP(o,n)){i.$shared=!1,r=bn(r)?r():r;const c=this.createResolver(e,r,a);l=Mi(o,r,c)}for(const c of n)i[c]=l[c];return i}createResolver(e,n,r=[""],s){const{resolver:i}=lg(this._resolverCache,e,r);return Je(n)?Mi(i,n,void 0,s):i}}function lg(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const s=n.join();let i=r.get(s);return i||(i={resolver:uf(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(s,i)),i}const DP=t=>Je(t)&&Object.getOwnPropertyNames(t).some(e=>bn(t[e]));function RP(t,e){const{isScriptable:n,isIndexable:r}=Rv(t);for(const s of e){const i=n(s),o=r(s),a=(o||i)&&t[s];if(i&&(bn(a)||DP(a))||o&&kt(a))return!0}return!1}var $P="4.5.0";const FP=["top","bottom","left","right","chartArea"];function cg(t,e){return t==="top"||t==="bottom"||FP.indexOf(t)===-1&&e==="x"}function ug(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function dg(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),pt(n&&n.onComplete,[t],e)}function LP(t){const e=t.chart,n=e.options.animation;pt(n&&n.onProgress,[t],e)}function eb(t){return hf()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const gl={},fg=t=>{const e=eb(t);return Object.values(gl).filter(n=>n.canvas===e).pop()};function BP(t,e,n){const r=Object.keys(t);for(const s of r){const i=+s;if(i>=e){const o=t[s];delete t[s],(n>0||i>e)&&(t[i+n]=o)}}}function jP(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}let es=class{static defaults=Mt;static instances=gl;static overrides=zs;static registry=rr;static version=$P;static getChart=fg;static register(...e){rr.add(...e),hg()}static unregister(...e){rr.remove(...e),hg()}constructor(e,n){const r=this.config=new TP(n),s=eb(e),i=fg(s);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||rP(s)),this.platform.updateConfig(r);const a=this.platform.acquireContext(s,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=Vk(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new wP,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=cC(f=>this.update(f),o.resizeDelay||0),this._dataChanges=[],gl[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}wr.listen(this,"complete",dg),wr.listen(this,"progress",LP),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:s,_aspectRatio:i}=this;return _t(e)?n&&i?i:s?r/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return rr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Bp(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return $p(this.canvas,this.ctx),this}stop(){return wr.stop(this),this}resize(e,n){wr.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,s=this.canvas,i=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,e,n,i),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Bp(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),pt(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};ht(n,(r,s)=>{r.id=s})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,s=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let i=[];n&&(i=i.concat(Object.keys(n).map(o=>{const a=n[o],l=md(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),ht(i,o=>{const a=o.options,l=a.id,c=md(l,a),u=Qe(a.type,o.dtype);(a.position===void 0||cg(a.position,c)!==cg(o.dposition))&&(a.position=o.dposition),s[l]=!0;let f=null;if(l in r&&r[l].type===u)f=r[l];else{const p=rr.getScale(u);f=new p({id:l,type:u,ctx:this.ctx,chart:this}),r[f.id]=f}f.init(a,e)}),ht(s,(o,a)=>{o||delete r[a]}),ht(r,o=>{Nn.configure(this,o,o.options),Nn.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((s,i)=>s.index-i.index),r>n){for(let s=n;s<r;++s)this._destroyDatasetMeta(s);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(ug("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,s)=>{n.filter(i=>i===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,s;for(this._removeUnreferencedMetasets(),r=0,s=n.length;r<s;r++){const i=n[r];let o=this.getDatasetMeta(r);const a=i.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=i.indexAxis||gd(a,this.options),o.order=i.order||0,o.index=r,o.label=""+i.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=rr.getController(a),{datasetElementType:c,dataElementType:u}=Mt.datasets[a];Object.assign(l,{dataElementType:rr.getElement(u),datasetElementType:c&&rr.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){ht(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:f}=this.getDatasetMeta(c),p=!s&&i.indexOf(f)===-1;f.buildOrUpdateElements(p),o=Math.max(+f.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),s||ht(i,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(ug("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){ht(this.scales,e=>{Nn.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!Pp(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:s,count:i}of n){const o=r==="_removeElements"?-i:i;BP(e,s,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=i=>new Set(e.filter(o=>o[0]===i).map((o,a)=>a+","+o.splice(1).join(","))),s=r(0);for(let i=1;i<n;i++)if(!Pp(s,r(i)))return;return Array.from(s).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Nn.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],ht(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,i)=>{s._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,bn(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),s={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(wr.has(this)?this.attached&&!wr.running(this)&&wr.start(this):(this.draw(),dg({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let s,i;for(s=0,i=n.length;s<i;++s){const o=n[s];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r={meta:e,index:e.index,cancelable:!0},s=Wv(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(s&&na(n,s),e.controller.draw(),s&&ra(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return Ko(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,s){const i=FS.modes[n];return typeof i=="function"?i(this,e,r,s):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let s=r.filter(i=>i&&i._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=Ws(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const s=r?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,s);On(n)?(i.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(i,{visible:r}),this.update(a=>a.datasetIndex===e?s:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),wr.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),$p(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete gl[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(i,o)=>{n.addEventListener(this,i,o),e[i]=o},s=(i,o,a)=>{i.offsetX=o,i.offsetY=a,this._eventHandler(i)};ht(this.options.events,i=>r(i,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},s=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},i=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{s("attach",a),this.attached=!0,this.resize(),r("resize",i),r("detach",o)};o=()=>{this.attached=!1,s("resize",i),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){ht(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},ht(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const s=r?"set":"remove";let i,o,a,l;for(n==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+s+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:i,index:o})=>{const a=this.getDatasetMeta(i);if(!a)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:a.data[o],index:o}});!Rl(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const s=this.options.hover,i=(l,c)=>l.filter(u=>!c.some(f=>u.datasetIndex===f.datasetIndex&&u.index===f.index)),o=i(n,e),a=r?e:i(e,n);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},s=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;const i=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(i||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:s=[],options:i}=this,o=n,a=this._getActiveElements(e,s,r,o),l=Qk(e),c=jP(e,this._lastEvent,r,l);r&&(this._lastEvent=null,pt(i.onHover,[e,a,this],this),l&&pt(i.onClick,[e,a,this],this));const u=!Rl(a,s);return(u||n)&&(this._active=a,this._updateHoverStyles(a,s,n)),this._lastEvent=c,u}_getActiveElements(e,n,r,s){if(e.type==="mouseout")return[];if(!r)return n;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,s)}};function hg(){return ht(es.instances,t=>t._plugins.invalidate())}function tb(t,e,n=e){t.lineCap=Qe(n.borderCapStyle,e.borderCapStyle),t.setLineDash(Qe(n.borderDash,e.borderDash)),t.lineDashOffset=Qe(n.borderDashOffset,e.borderDashOffset),t.lineJoin=Qe(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Qe(n.borderWidth,e.borderWidth),t.strokeStyle=Qe(n.borderColor,e.borderColor)}function NP(t,e,n){t.lineTo(n.x,n.y)}function zP(t){return t.stepped?kC:t.tension||t.cubicInterpolationMode==="monotone"?CC:NP}function nb(t,e,n={}){const r=t.length,{start:s=0,end:i=r-1}=n,{start:o,end:a}=e,l=Math.max(s,o),c=Math.min(i,a),u=s<o&&i<o||s>a&&i>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!u?r+c-l:c-l}}function qP(t,e,n,r){const{points:s,options:i}=e,{count:o,start:a,loop:l,ilen:c}=nb(s,n,r),u=zP(i);let{move:f=!0,reverse:p}=r||{},g,v,_;for(g=0;g<=c;++g)v=s[(a+(p?c-g:g))%o],!v.skip&&(f?(t.moveTo(v.x,v.y),f=!1):u(t,_,v,p,i.stepped),_=v);return l&&(v=s[(a+(p?c:0))%o],u(t,_,v,p,i.stepped)),!!l}function UP(t,e,n,r){const s=e.points,{count:i,start:o,ilen:a}=nb(s,n,r),{move:l=!0,reverse:c}=r||{};let u=0,f=0,p,g,v,_,x,C;const S=O=>(o+(c?a-O:O))%i,A=()=>{_!==x&&(t.lineTo(u,x),t.lineTo(u,_),t.lineTo(u,C))};for(l&&(g=s[S(0)],t.moveTo(g.x,g.y)),p=0;p<=a;++p){if(g=s[S(p)],g.skip)continue;const O=g.x,F=g.y,M=O|0;M===v?(F<_?_=F:F>x&&(x=F),u=(f*u+O)/++f):(A(),t.lineTo(O,F),v=M,f=0,_=x=F),C=F}A()}function yd(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?UP:qP}function WP(t){return t.stepped?rS:t.tension||t.cubicInterpolationMode==="monotone"?sS:Ms}function VP(t,e,n,r){let s=e._path;s||(s=e._path=new Path2D,e.path(s,n,r)&&s.closePath()),tb(t,e.options),t.stroke(s)}function HP(t,e,n,r){const{segments:s,options:i}=e,o=yd(e);for(const a of s)tb(t,i,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const KP=typeof Path2D=="function";function YP(t,e,n,r){KP&&!e.options.segment?VP(t,e,n,r):HP(t,e,n,r)}class sa extends wn{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const s=r.spanGaps?this._loop:this._fullLoop;GC(this._points,r,e,s,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=uS(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,s=e[n],i=this.points,o=Uv(this,{property:n,start:s,end:s});if(!o.length)return;const a=[],l=WP(r);let c,u;for(c=0,u=o.length;c<u;++c){const{start:f,end:p}=o[c],g=i[f],v=i[p];if(g===v){a.push(g);continue}const _=Math.abs((s-g[n])/(v[n]-g[n])),x=l(g,v,_,r.stepped);x[n]=e[n],a.push(x)}return a.length===1?a[0]:a}pathSegment(e,n,r){return yd(this)(e,this,n,r)}path(e,n,r){const s=this.segments,i=yd(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of s)o&=i(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,s){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),YP(e,this,r,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function pg(t,e,n,r){const s=t.options,{[n]:i}=t.getProps([n],r);return Math.abs(e-i)<s.radius+s.hitRadius}class rb extends wn{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,n,r){const s=this.options,{x:i,y:o}=this.getProps(["x","y"],r);return Math.pow(e-i,2)+Math.pow(n-o,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(e,n){return pg(this,e,"x",n)}inYRange(e,n){return pg(this,e,"y",n)}getCenterPoint(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}size(e){e=e||this.options||{};let n=e.radius||0;n=Math.max(n,n&&e.hoverRadius||0);const r=n&&e.borderWidth||0;return(n+r)*2}draw(e,n){const r=this.options;this.skip||r.radius<.1||!Ko(this,n,this.size(r)/2)||(e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.fillStyle=r.backgroundColor,pd(e,r,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function GP(t,e,n){const r=t.segments,s=t.points,i=e.points,o=[];for(const a of r){let{start:l,end:c}=a;c=hc(l,c,s);const u=vd(n,s[l],s[c],a.loop);if(!e.segments){o.push({source:a,target:u,start:s[l],end:s[c]});continue}const f=Uv(e,u);for(const p of f){const g=vd(n,i[p.start],i[p.end],p.loop),v=qv(a,s,g);for(const _ of v)o.push({source:_,target:p,start:{[n]:gg(u,g,"start",Math.max)},end:{[n]:gg(u,g,"end",Math.min)}})}}return o}function vd(t,e,n,r){if(r)return;let s=e[t],i=n[t];return t==="angle"&&(s=sr(s),i=sr(i)),{property:t,start:s,end:i}}function XP(t,e){const{x:n=null,y:r=null}=t||{},s=e.points,i=[];return e.segments.forEach(({start:o,end:a})=>{a=hc(o,a,s);const l=s[o],c=s[a];r!==null?(i.push({x:l.x,y:r}),i.push({x:c.x,y:r})):n!==null&&(i.push({x:n,y:l.y}),i.push({x:n,y:c.y}))}),i}function hc(t,e,n){for(;e>t;e--){const r=n[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function gg(t,e,n,r){return t&&e?r(t[n],e[n]):t?t[n]:e?e[n]:0}function sb(t,e){let n=[],r=!1;return kt(t)?(r=!0,n=t):n=XP(t,e),n.length?new sa({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function mg(t){return t&&t.fill!==!1}function QP(t,e,n){let s=t[e].fill;const i=[e];let o;if(!n)return s;for(;s!==!1&&i.indexOf(s)===-1;){if(!Kt(s))return s;if(o=t[s],!o)return!1;if(o.visible)return s;i.push(s),s=o.fill}return!1}function JP(t,e,n){const r=nA(t);if(Je(r))return isNaN(r.value)?!1:r;let s=parseFloat(r);return Kt(s)&&Math.floor(s)===s?ZP(r[0],e,s,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function ZP(t,e,n,r){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=r?!1:n}function eA(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:Je(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function tA(t,e,n){let r;return t==="start"?r=n:t==="end"?r=e.options.reverse?e.min:e.max:Je(t)?r=t.value:r=e.getBaseValue(),r}function nA(t){const e=t.options,n=e.fill;let r=Qe(n&&n.target,n);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function rA(t){const{scale:e,index:n,line:r}=t,s=[],i=r.segments,o=r.points,a=sA(e,n);a.push(sb({x:null,y:e.bottom},r));for(let l=0;l<i.length;l++){const c=i[l];for(let u=c.start;u<=c.end;u++)iA(s,o[u],a)}return new sa({points:s,options:{}})}function sA(t,e){const n=[],r=t.getMatchingVisibleMetas("line");for(let s=0;s<r.length;s++){const i=r[s];if(i.index===e)break;i.hidden||n.unshift(i.dataset)}return n}function iA(t,e,n){const r=[];for(let s=0;s<n.length;s++){const i=n[s],{first:o,last:a,point:l}=oA(i,e,"x");if(!(!l||o&&a)){if(o)r.unshift(l);else if(t.push(l),!a)break}}t.push(...r)}function oA(t,e,n){const r=t.interpolate(e,n);if(!r)return{};const s=r[n],i=t.segments,o=t.points;let a=!1,l=!1;for(let c=0;c<i.length;c++){const u=i[c],f=o[u.start][n],p=o[u.end][n];if(hi(s,f,p)){a=s===f,l=s===p;break}}return{first:a,last:l,point:r}}class ib{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,r){const{x:s,y:i,radius:o}=this;return n=n||{start:0,end:Ut},e.arc(s,i,o,n.end,n.start,!0),!r.bounds}interpolate(e){const{x:n,y:r,radius:s}=this,i=e.angle;return{x:n+Math.cos(i)*s,y:r+Math.sin(i)*s,angle:i}}}function aA(t){const{chart:e,fill:n,line:r}=t;if(Kt(n))return lA(e,n);if(n==="stack")return rA(t);if(n==="shape")return!0;const s=cA(t);return s instanceof ib?s:sb(s,r)}function lA(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function cA(t){return(t.scale||{}).getPointPositionForValue?dA(t):uA(t)}function uA(t){const{scale:e={},fill:n}=t,r=eA(n,e);if(Kt(r)){const s=e.isHorizontal();return{x:s?r:null,y:s?null:r}}return null}function dA(t){const{scale:e,fill:n}=t,r=e.options,s=e.getLabels().length,i=r.reverse?e.max:e.min,o=tA(n,e,i),a=[];if(r.grid.circular){const l=e.getPointPositionForValue(0,i);return new ib({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<s;++l)a.push(e.getPointPositionForValue(l,o));return a}function Cu(t,e,n){const r=aA(e),{chart:s,index:i,line:o,scale:a,axis:l}=e,c=o.options,u=c.fill,f=c.backgroundColor,{above:p=f,below:g=f}=u||{},v=s.getDatasetMeta(i),_=Wv(s,v);r&&o.points.length&&(na(t,n),fA(t,{line:o,target:r,above:p,below:g,area:n,scale:a,axis:l,clip:_}),ra(t))}function fA(t,e){const{line:n,target:r,above:s,below:i,area:o,scale:a,clip:l}=e,c=n._loop?"angle":e.axis;t.save();let u=i;i!==s&&(c==="x"?(yg(t,r,o.top),Su(t,{line:n,target:r,color:s,scale:a,property:c,clip:l}),t.restore(),t.save(),yg(t,r,o.bottom)):c==="y"&&(vg(t,r,o.left),Su(t,{line:n,target:r,color:i,scale:a,property:c,clip:l}),t.restore(),t.save(),vg(t,r,o.right),u=s)),Su(t,{line:n,target:r,color:u,scale:a,property:c,clip:l}),t.restore()}function yg(t,e,n){const{segments:r,points:s}=e;let i=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,u=s[l],f=s[hc(l,c,s)];i?(t.moveTo(u.x,u.y),i=!1):(t.lineTo(u.x,n),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(f.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function vg(t,e,n){const{segments:r,points:s}=e;let i=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,u=s[l],f=s[hc(l,c,s)];i?(t.moveTo(u.x,u.y),i=!1):(t.lineTo(n,u.y),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(n,f.y)}t.lineTo(n,e.first().y),t.closePath(),t.clip()}function Su(t,e){const{line:n,target:r,property:s,color:i,scale:o,clip:a}=e,l=GP(n,r,s);for(const{source:c,target:u,start:f,end:p}of l){const{style:{backgroundColor:g=i}={}}=c,v=r!==!0;t.save(),t.fillStyle=g,hA(t,o,a,v&&vd(s,f,p)),t.beginPath();const _=!!n.pathSegment(t,c);let x;if(v){_?t.closePath():bg(t,r,p,s);const C=!!r.pathSegment(t,u,{move:_,reverse:!0});x=_&&C,x||bg(t,r,f,s)}t.closePath(),t.fill(x?"evenodd":"nonzero"),t.restore()}}function hA(t,e,n,r){const s=e.chart.chartArea,{property:i,start:o,end:a}=r||{};if(i==="x"||i==="y"){let l,c,u,f;i==="x"?(l=o,c=s.top,u=a,f=s.bottom):(l=s.left,c=o,u=s.right,f=a),t.beginPath(),n&&(l=Math.max(l,n.left),u=Math.min(u,n.right),c=Math.max(c,n.top),f=Math.min(f,n.bottom)),t.rect(l,c,u-l,f-c),t.clip()}}function bg(t,e,n,r){const s=e.interpolate(n,r);s&&t.lineTo(s.x,s.y)}var pA={id:"filler",afterDatasetsUpdate(t,e,n){const r=(t.data.datasets||[]).length,s=[];let i,o,a,l;for(o=0;o<r;++o)i=t.getDatasetMeta(o),a=i.dataset,l=null,a&&a.options&&a instanceof sa&&(l={visible:t.isDatasetVisible(o),index:o,fill:JP(a,o,r),chart:t,axis:i.controller.options.indexAxis,scale:i.vScale,line:a}),i.$filler=l,s.push(l);for(o=0;o<r;++o)l=s[o],!(!l||l.fill===!1)&&(l.fill=QP(s,o,n.propagate))},beforeDraw(t,e,n){const r=n.drawTime==="beforeDraw",s=t.getSortedVisibleDatasetMetas(),i=t.chartArea;for(let o=s.length-1;o>=0;--o){const a=s[o].$filler;a&&(a.line.updateControlPoints(i,a.axis),r&&a.fill&&Cu(t.ctx,a,i))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const r=t.getSortedVisibleDatasetMetas();for(let s=r.length-1;s>=0;--s){const i=r[s].$filler;mg(i)&&Cu(t.ctx,i,t.chartArea)}},beforeDatasetDraw(t,e,n){const r=e.meta.$filler;!mg(r)||n.drawTime!=="beforeDatasetDraw"||Cu(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const _g=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},gA=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class wg extends wn{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=pt(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,s)=>e.sort(r,s,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,s=Lt(r.font),i=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=_g(r,i);let c,u;n.font=s.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,i,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,s,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,s){const{ctx:i,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=s+a;let f=e;i.textAlign="left",i.textBaseline="middle";let p=-1,g=-u;return this.legendItems.forEach((v,_)=>{const x=r+n/2+i.measureText(v.text).width;(_===0||c[c.length-1]+x+2*a>o)&&(f+=u,c[c.length-(_>0?0:1)]=0,g+=u,p++),l[_]={left:0,top:g,row:p,width:x,height:s},c[c.length-1]+=x+a}),f}_fitCols(e,n,r,s){const{ctx:i,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let f=a,p=0,g=0,v=0,_=0;return this.legendItems.forEach((x,C)=>{const{itemWidth:S,itemHeight:A}=mA(r,n,i,x,s);C>0&&g+A+2*a>u&&(f+=p+a,c.push({width:p,height:g}),v+=p+a,_++,p=g=0),l[C]={left:v,top:g,col:_,width:S,height:A},p=Math.max(p,S),g+=A+a}),f+=p,c.push({width:p,height:g}),f}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:s},rtl:i}}=this,o=xi(i,this.left,this.width);if(this.isHorizontal()){let a=0,l=nn(r,this.left+s,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=nn(r,this.left+s,this.right-this.lineWidths[a])),c.top+=this.top+e+s,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+s}else{let a=0,l=nn(r,this.top+e+s,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=nn(r,this.top+e+s,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+s,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;na(e,this),this._draw(),ra(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:s}=this,{align:i,labels:o}=e,a=Mt.color,l=xi(e.rtl,this.left,this.width),c=Lt(o.font),{padding:u}=o,f=c.size,p=f/2;let g;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:v,boxHeight:_,itemHeight:x}=_g(o,f),C=function(M,D,B){if(isNaN(v)||v<=0||isNaN(_)||_<0)return;s.save();const P=Qe(B.lineWidth,1);if(s.fillStyle=Qe(B.fillStyle,a),s.lineCap=Qe(B.lineCap,"butt"),s.lineDashOffset=Qe(B.lineDashOffset,0),s.lineJoin=Qe(B.lineJoin,"miter"),s.lineWidth=P,s.strokeStyle=Qe(B.strokeStyle,a),s.setLineDash(Qe(B.lineDash,[])),o.usePointStyle){const Z={radius:_*Math.SQRT2/2,pointStyle:B.pointStyle,rotation:B.rotation,borderWidth:P},Y=l.xPlus(M,v/2),z=D+p;Tv(s,Z,Y,z,o.pointStyleWidth&&v)}else{const Z=D+Math.max((f-_)/2,0),Y=l.leftForLtr(M,v),z=wi(B.borderRadius);s.beginPath(),Object.values(z).some(fe=>fe!==0)?jl(s,{x:Y,y:Z,w:v,h:_,radius:z}):s.rect(Y,Z,v,_),s.fill(),P!==0&&s.stroke()}s.restore()},S=function(M,D,B){Yo(s,B.text,M,D+x/2,c,{strikethrough:B.hidden,textAlign:l.textAlign(B.textAlign)})},A=this.isHorizontal(),O=this._computeTitleHeight();A?g={x:nn(i,this.left+u,this.right-r[0]),y:this.top+u+O,line:0}:g={x:this.left+u,y:nn(i,this.top+O+u,this.bottom-n[0].height),line:0},jv(this.ctx,e.textDirection);const F=x+u;this.legendItems.forEach((M,D)=>{s.strokeStyle=M.fontColor,s.fillStyle=M.fontColor;const B=s.measureText(M.text).width,P=l.textAlign(M.textAlign||(M.textAlign=o.textAlign)),Z=v+p+B;let Y=g.x,z=g.y;l.setWidth(this.width),A?D>0&&Y+Z+u>this.right&&(z=g.y+=F,g.line++,Y=g.x=nn(i,this.left+u,this.right-r[g.line])):D>0&&z+F>this.bottom&&(Y=g.x=Y+n[g.line].width+u,g.line++,z=g.y=nn(i,this.top+O+u,this.bottom-n[g.line].height));const fe=l.x(Y);if(C(fe,z,M),Y=uC(P,Y+v+p,A?Y+Z:this.right,e.rtl),S(l.x(Y),z,M),A)g.x+=Z+u;else if(typeof M.text!="string"){const me=c.lineHeight;g.y+=ob(M,me)+u}else g.y+=F}),Nv(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=Lt(n.font),s=cn(n.padding);if(!n.display)return;const i=xi(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,c=s.top+l;let u,f=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),u=this.top+c,f=nn(e.align,f,this.right-p);else{const v=this.columnSizes.reduce((_,x)=>Math.max(_,x.height),0);u=c+nn(e.align,this.top,this.bottom-v-e.labels.padding-this._computeTitleHeight())}const g=nn(a,f,f+p);o.textAlign=i.textAlign(af(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,Yo(o,n.text,g,u,r)}_computeTitleHeight(){const e=this.options.title,n=Lt(e.font),r=cn(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,s,i;if(hi(e,this.left,this.right)&&hi(n,this.top,this.bottom)){for(i=this.legendHitBoxes,r=0;r<i.length;++r)if(s=i[r],hi(e,s.left,s.left+s.width)&&hi(n,s.top,s.top+s.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!bA(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,i=gA(s,r);s&&!i&&pt(n.onLeave,[e,s,this],this),this._hoveredItem=r,r&&!i&&pt(n.onHover,[e,r,this],this)}else r&&pt(n.onClick,[e,r,this],this)}}function mA(t,e,n,r,s){const i=yA(r,t,e,n),o=vA(s,r,e.lineHeight);return{itemWidth:i,itemHeight:o}}function yA(t,e,n,r){let s=t.text;return s&&typeof s!="string"&&(s=s.reduce((i,o)=>i.length>o.length?i:o)),e+n.size/2+r.measureText(s).width}function vA(t,e,n){let r=t;return typeof e.text!="string"&&(r=ob(e,n)),r}function ob(t,e){const n=t.text?t.text.length:0;return e*n}function bA(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var ab={id:"legend",_element:wg,start(t,e,n){const r=t.legend=new wg({ctx:t.ctx,options:n,chart:t});Nn.configure(t,r,n),Nn.addBox(t,r)},stop(t){Nn.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;Nn.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,s=n.chart;s.isDatasetVisible(r)?(s.hide(r),e.hidden=!0):(s.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:s,color:i,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=cn(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:i,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:s||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class lb extends wn{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const s=kt(r.text)?r.text.length:1;this._padding=cn(r.padding);const i=s*Lt(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:s,right:i,options:o}=this,a=o.align;let l=0,c,u,f;return this.isHorizontal()?(u=nn(a,r,i),f=n+e,c=i-r):(o.position==="left"?(u=r+e,f=nn(a,s,n),l=ut*-.5):(u=i-e,f=nn(a,n,s),l=ut*.5),c=s-n),{titleX:u,titleY:f,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=Lt(n.font),i=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(i);Yo(e,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:c,textAlign:af(n.align),textBaseline:"middle",translation:[o,a]})}}function _A(t,e){const n=new lb({ctx:t.ctx,options:e,chart:t});Nn.configure(t,n,e),Nn.addBox(t,n),t.titleBlock=n}var cb={id:"title",_element:lb,start(t,e,n){_A(t,n)},stop(t){const e=t.titleBlock;Nn.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;Nn.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const mo={average(t){if(!t.length)return!1;let e,n,r=new Set,s=0,i=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();r.add(l.x),s+=l.y,++i}}return i===0||r.size===0?!1:{x:[...r].reduce((a,l)=>a+l)/r.size,y:s/i}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,s=Number.POSITIVE_INFINITY,i,o,a;for(i=0,o=t.length;i<o;++i){const l=t[i].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=Oi(e,c);u<s&&(s=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function tr(t,e){return e&&(kt(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function xr(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function wA(t,e){const{element:n,datasetIndex:r,index:s}=e,i=t.getDatasetMeta(r).controller,{label:o,value:a}=i.getLabelAndValue(s);return{chart:t,label:o,parsed:i.getParsed(s),raw:t.data.datasets[r].data[s],formattedValue:a,dataset:i.getDataset(),dataIndex:s,datasetIndex:r,element:n}}function xg(t,e){const n=t.chart.ctx,{body:r,footer:s,title:i}=t,{boxWidth:o,boxHeight:a}=e,l=Lt(e.bodyFont),c=Lt(e.titleFont),u=Lt(e.footerFont),f=i.length,p=s.length,g=r.length,v=cn(e.padding);let _=v.height,x=0,C=r.reduce((O,F)=>O+F.before.length+F.lines.length+F.after.length,0);if(C+=t.beforeBody.length+t.afterBody.length,f&&(_+=f*c.lineHeight+(f-1)*e.titleSpacing+e.titleMarginBottom),C){const O=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;_+=g*O+(C-g)*l.lineHeight+(C-1)*e.bodySpacing}p&&(_+=e.footerMarginTop+p*u.lineHeight+(p-1)*e.footerSpacing);let S=0;const A=function(O){x=Math.max(x,n.measureText(O).width+S)};return n.save(),n.font=c.string,ht(t.title,A),n.font=l.string,ht(t.beforeBody.concat(t.afterBody),A),S=e.displayColors?o+2+e.boxPadding:0,ht(r,O=>{ht(O.before,A),ht(O.lines,A),ht(O.after,A)}),S=0,n.font=u.string,ht(t.footer,A),n.restore(),x+=v.width,{width:x,height:_}}function xA(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function kA(t,e,n,r){const{x:s,width:i}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&s+i+o>e.width||t==="right"&&s-i-o<0)return!0}function CA(t,e,n,r){const{x:s,width:i}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return r==="center"?c=s<=(a+l)/2?"left":"right":s<=i/2?c="left":s>=o-i/2&&(c="right"),kA(c,t,e,n)&&(c="center"),c}function kg(t,e,n){const r=n.yAlign||e.yAlign||xA(t,n);return{xAlign:n.xAlign||e.xAlign||CA(t,e,n,r),yAlign:r}}function SA(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function PA(t,e,n){let{y:r,height:s}=t;return e==="top"?r+=n:e==="bottom"?r-=s+n:r-=s/2,r}function Cg(t,e,n,r){const{caretSize:s,caretPadding:i,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=s+i,{topLeft:u,topRight:f,bottomLeft:p,bottomRight:g}=wi(o);let v=SA(e,a);const _=PA(e,l,c);return l==="center"?a==="left"?v+=c:a==="right"&&(v-=c):a==="left"?v-=Math.max(u,p)+s:a==="right"&&(v+=Math.max(f,g)+s),{x:jn(v,0,r.width-e.width),y:jn(_,0,r.height-e.height)}}function Ja(t,e,n){const r=cn(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function Sg(t){return tr([],xr(t))}function AA(t,e,n){return Ws(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function Pg(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const ub={beforeTitle:gr,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:gr,beforeBody:gr,beforeLabel:gr,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return _t(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:gr,afterBody:gr,beforeFooter:gr,footer:gr,afterFooter:gr};function mn(t,e,n,r){const s=t[e].call(n,r);return typeof s>"u"?ub[e].call(n,r):s}class Ag extends wn{static positioners=mo;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&n.options.animation&&r.animations,i=new gf(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=AA(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,s=mn(r,"beforeTitle",this,e),i=mn(r,"title",this,e),o=mn(r,"afterTitle",this,e);let a=[];return a=tr(a,xr(s)),a=tr(a,xr(i)),a=tr(a,xr(o)),a}getBeforeBody(e,n){return Sg(mn(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,s=[];return ht(e,i=>{const o={before:[],lines:[],after:[]},a=Pg(r,i);tr(o.before,xr(mn(a,"beforeLabel",this,i))),tr(o.lines,mn(a,"label",this,i)),tr(o.after,xr(mn(a,"afterLabel",this,i))),s.push(o)}),s}getAfterBody(e,n){return Sg(mn(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,s=mn(r,"beforeFooter",this,e),i=mn(r,"footer",this,e),o=mn(r,"afterFooter",this,e);let a=[];return a=tr(a,xr(s)),a=tr(a,xr(i)),a=tr(a,xr(o)),a}_createItems(e){const n=this._active,r=this.chart.data,s=[],i=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(wA(this.chart,n[l]));return e.filter&&(a=a.filter((u,f,p)=>e.filter(u,f,p,r))),e.itemSort&&(a=a.sort((u,f)=>e.itemSort(u,f,r))),ht(a,u=>{const f=Pg(e.callbacks,u);s.push(mn(f,"labelColor",this,u)),i.push(mn(f,"labelPointStyle",this,u)),o.push(mn(f,"labelTextColor",this,u))}),this.labelColors=s,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),s=this._active;let i,o=[];if(!s.length)this.opacity!==0&&(i={opacity:0});else{const a=mo[r.position].call(this,s,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=xg(this,r),c=Object.assign({},a,l),u=kg(this.chart,r,c),f=Cg(r,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,i={opacity:1,x:f.x,y:f.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,s){const i=this.getCaretPosition(e,r,s);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)}getCaretPosition(e,n,r){const{xAlign:s,yAlign:i}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:f}=wi(a),{x:p,y:g}=e,{width:v,height:_}=n;let x,C,S,A,O,F;return i==="center"?(O=g+_/2,s==="left"?(x=p,C=x-o,A=O+o,F=O-o):(x=p+v,C=x+o,A=O-o,F=O+o),S=x):(s==="left"?C=p+Math.max(l,u)+o:s==="right"?C=p+v-Math.max(c,f)-o:C=this.caretX,i==="top"?(A=g,O=A-o,x=C-o,S=C+o):(A=g+_,O=A+o,x=C+o,S=C-o),F=A),{x1:x,x2:C,x3:S,y1:A,y2:O,y3:F}}drawTitle(e,n,r){const s=this.title,i=s.length;let o,a,l;if(i){const c=xi(r.rtl,this.x,this.width);for(e.x=Ja(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",o=Lt(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<i;++l)n.fillText(s[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===i&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,s,i){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=i,u=Lt(i.bodyFont),f=Ja(this,"left",i),p=s.x(f),g=l<u.lineHeight?(u.lineHeight-l)/2:0,v=n.y+g;if(i.usePointStyle){const _={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},x=s.leftForLtr(p,c)+c/2,C=v+l/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,pd(e,_,x,C),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,pd(e,_,x,C)}else{e.lineWidth=Je(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const _=s.leftForLtr(p,c),x=s.leftForLtr(s.xPlus(p,1),c-2),C=wi(o.borderRadius);Object.values(C).some(S=>S!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,jl(e,{x:_,y:v,w:c,h:l,radius:C}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),jl(e,{x,y:v+1,w:c-2,h:l-2,radius:C}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(_,v,c,l),e.strokeRect(_,v,c,l),e.fillStyle=o.backgroundColor,e.fillRect(x,v+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:s}=this,{bodySpacing:i,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=r,f=Lt(r.bodyFont);let p=f.lineHeight,g=0;const v=xi(r.rtl,this.x,this.width),_=function(B){n.fillText(B,v.x(e.x+g),e.y+p/2),e.y+=p+i},x=v.textAlign(o);let C,S,A,O,F,M,D;for(n.textAlign=o,n.textBaseline="middle",n.font=f.string,e.x=Ja(this,x,r),n.fillStyle=r.bodyColor,ht(this.beforeBody,_),g=a&&x!=="right"?o==="center"?c/2+u:c+2+u:0,O=0,M=s.length;O<M;++O){for(C=s[O],S=this.labelTextColors[O],n.fillStyle=S,ht(C.before,_),A=C.lines,a&&A.length&&(this._drawColorBox(n,e,O,v,r),p=Math.max(f.lineHeight,l)),F=0,D=A.length;F<D;++F)_(A[F]),p=f.lineHeight;ht(C.after,_)}g=0,p=f.lineHeight,ht(this.afterBody,_),e.y-=i}drawFooter(e,n,r){const s=this.footer,i=s.length;let o,a;if(i){const l=xi(r.rtl,this.x,this.width);for(e.x=Ja(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=Lt(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<i;++a)n.fillText(s[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,s){const{xAlign:i,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=r,{topLeft:f,topRight:p,bottomLeft:g,bottomRight:v}=wi(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(a+f,l),o==="top"&&this.drawCaret(e,n,r,s),n.lineTo(a+c-p,l),n.quadraticCurveTo(a+c,l,a+c,l+p),o==="center"&&i==="right"&&this.drawCaret(e,n,r,s),n.lineTo(a+c,l+u-v),n.quadraticCurveTo(a+c,l+u,a+c-v,l+u),o==="bottom"&&this.drawCaret(e,n,r,s),n.lineTo(a+g,l+u),n.quadraticCurveTo(a,l+u,a,l+u-g),o==="center"&&i==="left"&&this.drawCaret(e,n,r,s),n.lineTo(a,l+f),n.quadraticCurveTo(a,l,a+f,l),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,s=r&&r.x,i=r&&r.y;if(s||i){const o=mo[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=xg(this,e),l=Object.assign({},o,this._size),c=kg(n,e,l),u=Cg(e,l,c,n);(s._to!==u.x||i._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const s={width:this.width,height:this.height},i={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=cn(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(i,e,s,n),jv(e,n.textDirection),i.y+=o.top,this.drawTitle(i,e,n),this.drawBody(i,e,n),this.drawFooter(i,e,n),Nv(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,s=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),i=!Rl(r,s),o=this._positionChanged(s,n);(i||o)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,i=this._active||[],o=this._getActiveElements(e,i,n,r),a=this._positionChanged(o,e),l=n||!Rl(o,i)||a;return l&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,s){const i=this.options;if(e.type==="mouseout")return[];if(!s)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,i.mode,i,r);return i.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:s,options:i}=this,o=mo[i.position].call(this,e,n);return o!==!1&&(r!==o.x||s!==o.y)}}var db={id:"tooltip",_element:Ag,positioners:mo,afterInit(t,e,n){n&&(t.tooltip=new Ag({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:ub},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const IA=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function EA(t,e,n,r){const s=t.indexOf(e);if(s===-1)return IA(t,e,n,r);const i=t.lastIndexOf(e);return s!==i?n:s}const OA=(t,e)=>t===null?null:jn(Math.round(t),0,e);function Ig(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class fb extends Fi{static id="category";static defaults={ticks:{callback:Ig}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:s,label:i}of n)r[s]===i&&r.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(_t(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:EA(r,e,Qe(n,e),this._addedLabels),OA(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,s=[];let i=this.getLabels();i=e===0&&n===i.length-1?i:i.slice(e,n+1),this._valueRange=Math.max(i.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)s.push({value:o});return s}getLabelForValue(e){return Ig.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function MA(t,e){const n=[],{bounds:s,step:i,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:f,includeBounds:p}=t,g=i||1,v=u-1,{min:_,max:x}=e,C=!_t(o),S=!_t(a),A=!_t(c),O=(x-_)/(f+1);let F=Ap((x-_)/v/g)*g,M,D,B,P;if(F<1e-14&&!C&&!S)return[{value:_},{value:x}];P=Math.ceil(x/F)-Math.floor(_/F),P>v&&(F=Ap(P*F/v/g)*g),_t(l)||(M=Math.pow(10,l),F=Math.ceil(F*M)/M),s==="ticks"?(D=Math.floor(_/F)*F,B=Math.ceil(x/F)*F):(D=_,B=x),C&&S&&i&&tC((a-o)/i,F/1e3)?(P=Math.round(Math.min((a-o)/F,u)),F=(a-o)/P,D=o,B=a):A?(D=C?o:D,B=S?a:B,P=c-1,F=(B-D)/P):(P=(B-D)/F,Oo(P,Math.round(P),F/1e3)?P=Math.round(P):P=Math.ceil(P));const Z=Math.max(Ip(F),Ip(D));M=Math.pow(10,_t(l)?Z:l),D=Math.round(D*M)/M,B=Math.round(B*M)/M;let Y=0;for(C&&(p&&D!==o?(n.push({value:o}),D<o&&Y++,Oo(Math.round((D+Y*F)*M)/M,o,Eg(o,O,t))&&Y++):D<o&&Y++);Y<P;++Y){const z=Math.round((D+Y*F)*M)/M;if(S&&z>a)break;n.push({value:z})}return S&&p&&B!==a?n.length&&Oo(n[n.length-1].value,a,Eg(a,O,t))?n[n.length-1].value=a:n.push({value:a}):(!S||B===a)&&n.push({value:B}),n}function Eg(t,e,{horizontal:n,minRotation:r}){const s=Wt(r),i=(n?Math.sin(s):Math.cos(s))||.001,o=.75*e*(""+t).length;return Math.min(e/i,o)}class TA extends Fi{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return _t(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:s,max:i}=this;const o=l=>s=n?s:l,a=l=>i=r?i:l;if(e){const l=Ei(s),c=Ei(i);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(s===i){let l=i===0?1:Math.abs(i*.05);a(i+l),e||o(s-l)}this.min=s,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,s;return r?(s=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),n=n||11),n&&(s=Math.min(n,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const s={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},i=this._range||this,o=MA(s,i);return e.bounds==="ticks"&&nC(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const s=(r-n)/Math.max(e.length-1,1)/2;n-=s,r+=s}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return cf(e,this.chart.options.locale,this.options.ticks.format)}}class hb extends TA{static id="linear";static defaults={ticks:{callback:Mv.formatters.numeric}};determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Kt(e)?e:0,this.max=Kt(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=Wt(this.options.ticks.minRotation),s=(e?Math.sin(r):Math.cos(r))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,i.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const pc={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},vn=Object.keys(pc);function Og(t,e){return t-e}function Mg(t,e){if(_t(e))return null;const n=t._adapter,{parser:r,round:s,isoWeekday:i}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),Kt(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(s&&(o=s==="week"&&(Ns(i)||i===!0)?n.startOf(o,"isoWeek",i):n.startOf(o,s)),+o)}function Tg(t,e,n,r){const s=vn.length;for(let i=vn.indexOf(t);i<s-1;++i){const o=pc[vn[i]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return vn[i]}return vn[s-1]}function DA(t,e,n,r,s){for(let i=vn.length-1;i>=vn.indexOf(n);i--){const o=vn[i];if(pc[o].common&&t._adapter.diff(s,r,o)>=e-1)return o}return vn[n?vn.indexOf(n):0]}function RA(t){for(let e=vn.indexOf(t)+1,n=vn.length;e<n;++e)if(pc[vn[e]].common)return vn[e]}function Dg(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:s}=of(n,e),i=n[r]>=e?n[r]:n[s];t[i]=!0}}function $A(t,e,n,r){const s=t._adapter,i=+s.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=i;a<=o;a=+s.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function Rg(t,e,n){const r=[],s={},i=e.length;let o,a;for(o=0;o<i;++o)a=e[o],s[a]=o,r.push({value:a,major:!1});return i===0||!n?r:$A(t,r,s,n)}class $g extends Fi{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),s=this._adapter=new MS._date(e.adapters.date);s.init(n),Eo(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:Mg(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:s,max:i,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(s=Math.min(s,c.min)),!a&&!isNaN(c.max)&&(i=Math.max(i,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=Kt(s)&&!isNaN(s)?s:+n.startOf(Date.now(),r),i=Kt(i)&&!isNaN(i)?i:+n.endOf(Date.now(),r)+1,this.min=Math.min(s,i-1),this.max=Math.max(s+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const i=this.min,o=this.max,a=oC(s,i,o);return this._unit=n.unit||(r.autoSkip?Tg(n.minUnit,this.min,this.max,this._getLabelCapacity(i)):DA(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:RA(this._unit),this.initOffsets(s),e.reverse&&a.reverse(),Rg(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,s,i;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?n=1-s:n=(this.getDecimalForValue(e[1])-s)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?r=i:r=(i-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=jn(n,0,o),r=jn(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,s=this.options,i=s.time,o=i.unit||Tg(i.minUnit,n,r,this._getLabelCapacity(n)),a=Qe(s.ticks.stepSize,1),l=o==="week"?i.isoWeekday:!1,c=Ns(l)||l===!0,u={};let f=n,p,g;if(c&&(f=+e.startOf(f,"isoWeek",l)),f=+e.startOf(f,c?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const v=s.ticks.source==="data"&&this.getDataTimestamps();for(p=f,g=0;p<r;p=+e.add(p,a,o),g++)Dg(u,p,v);return(p===r||s.bounds==="ticks"||g===1)&&Dg(u,p,v),Object.keys(u).sort(Og).map(_=>+_)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const s=this.options.time.displayFormats,i=this._unit,o=n||s[i];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,s){const i=this.options,o=i.ticks.callback;if(o)return pt(o,[e,n,r],this);const a=i.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],f=c&&a[c],p=r[n],g=c&&f&&p&&p.major;return this._adapter.format(e,s||(g?f:u))}generateTickLabels(e){let n,r,s;for(n=0,r=e.length;n<r;++n)s=e[n],s.label=this._tickFormatFunction(s.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,s=Wt(this.isHorizontal()?n.maxRotation:n.minRotation),i=Math.cos(s),o=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:r*i+a*o,h:r*o+a*i}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,s=r[n.unit]||r.millisecond,i=this._tickFormatFunction(e,0,Rg(this,[e],this._majorUnit),s),o=this._getLabelSize(i),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,r=s.length;n<r;++n)e=e.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const s=this.getLabels();for(n=0,r=s.length;n<r;++n)e.push(Mg(this,s[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return lC(e.sort(Og))}}function Za(t,e,n){let r=0,s=t.length-1,i,o,a,l;n?(e>=t[r].pos&&e<=t[s].pos&&({lo:r,hi:s}=Ds(t,"pos",e)),{pos:i,time:a}=t[r],{pos:o,time:l}=t[s]):(e>=t[r].time&&e<=t[s].time&&({lo:r,hi:s}=Ds(t,"time",e)),{time:i,pos:a}=t[r],{time:o,pos:l}=t[s]);const c=o-i;return c?a+(l-a)*(e-i)/c:a}class $L extends $g{static id="timeseries";static defaults=$g.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Za(n,this.min),this._tableRange=Za(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,s=[],i=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=r&&s.push(c);if(s.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=s.length;o<a;++o)u=s[o+1],l=s[o-1],c=s[o],Math.round((u+l)/2)!==c&&i.push({time:c,pos:o/(a-1)});return i}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((s,i)=>s-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(Za(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return Za(this._table,r*this._tableRange+this._minPos,!0)}}const pb={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},FA={ariaLabel:{type:String},ariaDescribedby:{type:String}},LA={type:{type:String,required:!0},destroyDelay:{type:Number,default:0},...pb,...FA},BA=Xy[0]==="2"?(t,e)=>Object.assign(t,{attrs:e}):(t,e)=>Object.assign(t,e);function ai(t){return Jo(t)?tt(t):t}function jA(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t;return Jo(e)?new Proxy(t,{}):t}function NA(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function gb(t,e){t.labels=e}function mb(t,e,n){const r=[];t.datasets=e.map(s=>{const i=t.datasets.find(o=>o[n]===s[n]);return!i||!s.data||r.includes(i)?{...s}:(r.push(i),Object.assign(i,s),i)})}function zA(t,e){const n={labels:[],datasets:[]};return gb(n,t.labels),mb(n,t.datasets,e),n}const qA=Ze({props:LA,setup(t,e){let{expose:n,slots:r}=e;const s=pe(null),i=ec(null);n({chart:i});const o=()=>{if(!s.value)return;const{type:c,data:u,options:f,plugins:p,datasetIdKey:g}=t,v=zA(u,g),_=jA(v,u);i.value=new es(s.value,{type:c,data:_,options:{...f},plugins:p})},a=()=>{const c=tt(i.value);c&&(t.destroyDelay>0?setTimeout(()=>{c.destroy(),i.value=null},t.destroyDelay):(c.destroy(),i.value=null))},l=c=>{c.update(t.updateMode)};return Mn(o),$i(a),Ht([()=>t.options,()=>t.data],(c,u)=>{let[f,p]=c,[g,v]=u;const _=tt(i.value);if(!_)return;let x=!1;if(f){const C=ai(f),S=ai(g);C&&C!==S&&(NA(_,C),x=!0)}if(p){const C=ai(p.labels),S=ai(v.labels),A=ai(p.datasets),O=ai(v.datasets);C!==S&&(gb(_.config.data,C),x=!0),A&&A!==O&&(mb(_.config.data,A,t.datasetIdKey),x=!0)}x&&ln(()=>{l(_)})},{deep:!0}),()=>Ar("canvas",{role:"img",ariaLabel:t.ariaLabel,ariaDescribedby:t.ariaDescribedby,ref:s},[Ar("p",{},[r.default?r.default():""])])}});function UA(t,e){return es.register(e),Ze({props:pb,setup(n,r){let{expose:s}=r;const i=ec(null),o=a=>{i.value=a?.chart};return s({chart:i}),()=>Ar(qA,BA({ref:o},{type:t,...n}))}})}const yb=UA("line",OS),WA={class:"chart-container"},VA=Ze({__name:"PortfolioValueChart",setup(t){es.register(fb,hb,rb,sa,cb,db,ab,pA);const e=pe([]),n=Ve(()=>{const s=[...e.value].sort((a,l)=>new Date(a.asOf).getTime()-new Date(l.asOf).getTime()),i=s.map(a=>new Date(a.asOf).toLocaleDateString()),o=s.map(a=>new Be(a.totalValue,"EUR").getDecimal());return{labels:i,datasets:[{label:"Portfolio Value",backgroundColor:"rgba(75, 192, 192, 0.2)",borderColor:"rgba(75, 192, 192, 1)",data:o,fill:!0,tension:.4}]}}),r={responsive:!0,maintainAspectRatio:!1,scales:{y:{ticks:{callback:function(s){return typeof s=="number"?new Be(s*100,"EUR").format("de-DE"):s}}}},plugins:{legend:{display:!1}}};return Mn(async()=>{try{e.value=await ud.getAll()}catch(s){console.error("Error fetching valuation data:",s)}}),(s,i)=>(U(),J("div",WA,[Ue($e(yb),{data:n.value,options:r},null,8,["data"])]))}}),HA=gn(VA,[["__scopeId","data-v-7346e7bf"]]);class Ln{static BASE_URL="https://api.scryfall.com";static lastRequestTime=0;static RATE_LIMIT_DELAY=100;static async enforceRateLimit(){const n=Date.now()-this.lastRequestTime;if(n<this.RATE_LIMIT_DELAY){const r=this.RATE_LIMIT_DELAY-n;await new Promise(s=>setTimeout(s,r))}this.lastRequestTime=Date.now()}static async getPriceById(e){try{await this.enforceRateLimit();const n=await fetch(`${this.BASE_URL}/cards/${e}`);if(!n.ok)return null;const s=(await n.json()).prices?.eur;return s?Be.parse(s,"EUR"):null}catch(n){return console.error("Error fetching price from Scryfall:",n),null}}static async getPriceBySetAndNumber(e,n){try{await this.enforceRateLimit();const r=await fetch(`${this.BASE_URL}/cards/${e}/${n}`);if(!r.ok)return null;const i=(await r.json()).prices?.eur;return i?Be.parse(i,"EUR"):null}catch(r){return console.error("Error fetching price from Scryfall:",r),null}}static async getImageUrlById(e){try{await this.enforceRateLimit();const n=await fetch(`${this.BASE_URL}/cards/${e}`);if(!n.ok)return null;const r=await n.json();return(r.layout==="transform"||r.layout==="modal_dfc"||r.layout==="reversible_card")&&r.card_faces&&r.card_faces.length===2?{front:r.card_faces[0].image_uris?.normal||r.card_faces[0].image_uris?.large||r.card_faces[0].image_uris?.small||"",back:r.card_faces[1].image_uris?.normal||r.card_faces[1].image_uris?.large||r.card_faces[1].image_uris?.small||"",layout:r.layout}:r.image_uris?{front:r.image_uris.normal||r.image_uris.large||r.image_uris.small||"",back:"",layout:r.layout||"normal"}:r.card_faces&&r.card_faces.length>0&&r.card_faces[0].image_uris?{front:r.card_faces[0].image_uris.normal||r.card_faces[0].image_uris.large||r.card_faces[0].image_uris.small||"",back:"",layout:r.layout||"normal"}:{front:r.image_uris?.normal||r.image_uris?.large||r.image_uris?.small||"",back:"",layout:r.layout||"normal"}}catch(n){return console.error("Error fetching image from Scryfall:",n),null}}static async getImageUrlBySetAndNumber(e,n){try{await this.enforceRateLimit();const r=await fetch(`${this.BASE_URL}/cards/${e}/${n}`);if(!r.ok)return null;const s=await r.json();return(s.layout==="transform"||s.layout==="modal_dfc"||s.layout==="reversible_card")&&s.card_faces&&s.card_faces.length===2?{front:s.card_faces[0].image_uris?.normal||s.card_faces[0].image_uris?.large||s.card_faces[0].image_uris?.small||"",back:s.card_faces[1].image_uris?.normal||s.card_faces[1].image_uris?.large||s.card_faces[1].image_uris?.small||"",layout:s.layout}:s.image_uris?{front:s.image_uris.normal||s.image_uris.large||s.image_uris.small||"",back:"",layout:s.layout||"normal"}:s.card_faces&&s.card_faces.length>0&&s.card_faces[0].image_uris?{front:s.card_faces[0].image_uris.normal||s.card_faces[0].image_uris.large||s.card_faces[0].image_uris.small||"",back:"",layout:s.layout||"normal"}:{front:s.image_uris?.normal||s.image_uris?.large||s.image_uris?.small||"",back:"",layout:s.layout||"normal"}}catch(r){return console.error("Error fetching image from Scryfall:",r),null}}static async getByCardmarketId(e){try{await this.enforceRateLimit();const n=await fetch(`${this.BASE_URL}/cards/cardmarket/${e}`);if(!n.ok){console.error(`Scryfall API error for cardmarket_id ${e}: ${n.status} ${n.statusText}`);try{const r=await n.text();console.error(`Scryfall API error details: ${r}`)}catch{console.error("Could not read error response body")}return null}return await n.json()}catch(n){return console.error("Error fetching card by Cardmarket ID from Scryfall:",n),null}}static async getByCardmarketIds(e){try{if(!e||e.length===0)return[];if(e.length===1){const s=await this.getByCardmarketId(e[0]);return s?[s]:[]}await this.enforceRateLimit();const n=await fetch(`${this.BASE_URL}/cards/collection`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifiers:e.map(s=>({cardmarket_id:s}))})});if(!n.ok){console.error(`Scryfall API error for batch cardmarket_ids: ${n.status} ${n.statusText}`);try{const s=await n.text();console.error(`Scryfall API error details: ${s}`)}catch{console.error("Could not read error response body")}return await this.getByCardmarketIdsIndividually(e)}return(await n.json()).data||[]}catch(n){return console.error("Error fetching cards by Cardmarket IDs from Scryfall:",n),await this.getByCardmarketIdsIndividually(e)}}static async getPricesByIds(e){try{if(!e||e.length===0)return[];if(e.length===1){const i=await this.getPriceById(e[0]);return i?[{[e[0]]:{eur:i.getCents()/100}}]:[]}await this.enforceRateLimit();const n=await fetch(`${this.BASE_URL}/cards/collection`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifiers:e.map(i=>({id:i}))})});if(!n.ok){console.error(`Scryfall API error for batch price fetching: ${n.status} ${n.statusText}`);try{const i=await n.text();console.error(`Scryfall API error details: ${i}`)}catch{console.error("Could not read error response body")}return await this.getPricesByIdsIndividually(e)}const r=await n.json(),s=[];if(r.data&&Array.isArray(r.data))for(const i of r.data)i.id&&i.prices&&s.push({[i.id]:{eur:i.prices.eur?parseFloat(i.prices.eur):void 0,eur_foil:i.prices.eur_foil?parseFloat(i.prices.eur_foil):void 0}});return s}catch(n){return console.error("Error fetching prices by Scryfall IDs from Scryfall:",n),await this.getPricesByIdsIndividually(e)}}static async getPricesByIdsIndividually(e){const n=[];for(const r of e)try{const s=await fetch(`${this.BASE_URL}/cards/${r}`);if(s.ok){const i=await s.json();i.prices&&n.push({[r]:{eur:i.prices.eur?parseFloat(i.prices.eur):void 0,eur_foil:i.prices.eur_foil?parseFloat(i.prices.eur_foil):void 0}})}}catch(s){console.error(`Error fetching price for card ${r}:`,s)}return n}static async getByCardmarketIdsIndividually(e){const n=[];for(const r of e){const s=await this.getByCardmarketId(r);s&&n.push(s)}return n}static async hydrateCard(e){try{if(e.scryfall_id){await this.enforceRateLimit();const n=await fetch(`${this.BASE_URL}/cards/${e.scryfall_id}`);if(n.ok)return await n.json()}if(e.setCode&&e.collectorNumber){await this.enforceRateLimit();const n=await fetch(`${this.BASE_URL}/cards/${e.setCode}/${e.collectorNumber}`);if(n.ok)return await n.json()}if(e.name&&e.setCode){await this.enforceRateLimit();let n=await fetch(`${this.BASE_URL}/cards/named?exact=${encodeURIComponent(e.name)}&set=${encodeURIComponent(e.setCode)}`);if(n.ok)return await n.json();if(e.version&&(await this.enforceRateLimit(),n=await fetch(`${this.BASE_URL}/cards/named?exact=${encodeURIComponent(e.name)}&set=${encodeURIComponent(e.setCode)}&include_variations=true`),n.ok))return await n.json();if(await this.enforceRateLimit(),n=await fetch(`${this.BASE_URL}/cards/named?fuzzy=${encodeURIComponent(e.name)}&set=${encodeURIComponent(e.setCode)}`),n.ok)return await n.json()}return null}catch(n){return console.error("Error hydrating card with Scryfall data:",n),null}}}class KA{static BATCH_SIZE=75;static async syncPrices(e){try{const n=new Date,r=n.toISOString().split("T")[0],s=await Bn.getAll(),i=s.length;let o=0;for(let a=0;a<s.length;a+=this.BATCH_SIZE){const l=s.slice(a,a+this.BATCH_SIZE),c=l.map(u=>u.id);try{const u=await Ln.getPricesByIds(c);for(const f of u)for(const[p,g]of Object.entries(f)){if(g.eur!==void 0){const v=Be.parse(g.eur.toString(),"EUR"),_="nonfoil",C={id:`${p}:scryfall:${_}:${r}`,cardId:p,provider:"scryfall",finish:_,date:r,currency:"EUR",priceCent:v.getCents(),asOf:n,createdAt:n};await ue.price_points.put(C)}if(g.eur_foil!==void 0){const v=Be.parse(g.eur_foil.toString(),"EUR"),x={id:`${p}:scryfall:foil:${r}`,cardId:p,provider:"scryfall",finish:"foil",date:r,currency:"EUR",priceCent:v.getCents(),asOf:n,createdAt:n};await ue.price_points.put(x)}o++,e&&e(o,i)}}catch(u){console.error(`Error syncing prices for batch starting at index ${a}:`,u);for(let f=0;f<l.length;f++)o++,e&&e(o,i)}}try{await Gr.createValuationSnapshot(),console.log("Valuation snapshot created after price update")}catch(a){console.error("Error creating valuation snapshot after price update:",a)}}catch(n){throw console.error("Error syncing prices:",n),n}}static async syncPriceForCard(e){try{const n=new Date,r=n.toISOString().split("T")[0],s=await Bn.getById(e);if(!s){console.warn(`Card with ID ${e} not found`);return}const i=await Ln.getPricesByIds([s.id]);if(i.length>0){const a=i[0][s.id];if(a.eur!==void 0){const l=Be.parse(a.eur.toString(),"EUR"),u={id:`${s.id}:scryfall:nonfoil:${r}`,cardId:s.id,provider:"scryfall",finish:"nonfoil",date:r,currency:"EUR",priceCent:l.getCents(),asOf:n,createdAt:n};await ue.price_points.put(u)}if(a.eur_foil!==void 0){const l=Be.parse(a.eur_foil.toString(),"EUR"),u={id:`${s.id}:scryfall:foil:${r}`,cardId:s.id,provider:"scryfall",finish:"foil",date:r,currency:"EUR",priceCent:l.getCents(),asOf:n,createdAt:n};await ue.price_points.put(u)}}}catch(n){throw console.error(`Error syncing price for card ${e}:`,n),n}}static async needsPriceUpdate(){try{const e=await ue.price_points.orderBy("asOf").last();if(!e)return!0;const n=new Date,r=new Date(e.asOf);return(n.getTime()-r.getTime())/(1e3*60*60)>=24}catch(e){return console.error("Error checking if price update is needed:",e),!0}}static async needsPriceUpdateForCard(e){try{const n=await Dl.getLatestPriceForCard(e);if(!n)return!0;const r=new Date,s=new Date(n.asOf);return(r.getTime()-s.getTime())/(1e3*60*60)>=24}catch(n){return console.error(`Error checking if price update is needed for card ${e}:`,n),!0}}static async getLatestPriceForCard(e){try{const n=await Dl.getLatestPriceForCard(e);return n?{price:n.price.getCents(),asOf:n.asOf,provider:n.provider}:null}catch(n){return console.error(`Error getting latest price for card ${e}:`,n),null}}}class fi{static async needsPriceUpdate(){try{const e=await Bs.get("last_price_update_timestamp");if(!e)return!0;const n=Date.now(),r=new Date(e).getTime();return(n-r)/(1e3*60*60)>=24}catch(e){return console.error("Error checking if price update is needed:",e),!0}}static async schedulePriceUpdate(){try{await this.needsPriceUpdate()&&await this.updatePrices()}catch(e){throw console.error("Error scheduling price update:",e),e}}static async updatePrices(){const e=_i(),n=e.addImport({id:`price-update-${Date.now()}`,type:"pricing",name:"Price Updates",status:"pending",progress:0,totalItems:0,processedItems:0});try{await KA.syncPrices((s,i)=>{e.updateImport(n,{status:"processing",progress:Math.round(s/i*100),totalItems:i,processedItems:s})});const r=new Date().toISOString();await Bs.set("last_price_update_timestamp",r),await Gr.createValuationSnapshot(),e.completeImport(n),console.log(`Prices updated successfully at ${r}`)}catch(r){throw console.error("Error updating prices:",r),e.completeImport(n,r instanceof Error?r.message:"Unknown error"),r}}static async getLastUpdateTime(){try{const e=await Bs.get("last_price_update_timestamp");return e?new Date(e):null}catch(e){return console.error("Error getting last update time:",e),null}}static async getNextUpdateTime(){try{const e=await this.getLastUpdateTime();return e?new Date(e.getTime()+1440*60*1e3):new Date}catch(e){return console.error("Error calculating next update time:",e),null}}}const Fg=pe(null),Lg=pe(null),_s=pe(!1);function YA(){const t=s=>s?s.toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Never",e=async()=>{try{Fg.value=await fi.getLastUpdateTime(),Lg.value=await fi.getNextUpdateTime()}catch(s){console.error("Error updating price info:",s)}};return{lastUpdate:Fg,nextUpdate:Lg,isUpdating:_s,formatDate:t,updatePriceInfo:e,checkAndScheduleUpdate:async()=>{if(!_s.value){_s.value=!0;try{await fi.needsPriceUpdate()&&(await fi.schedulePriceUpdate(),await Gr.createValuationSnapshot()),await e()}catch(s){console.error("Error scheduling price update:",s)}finally{_s.value=!1}}},forceUpdatePrices:async()=>{if(!_s.value){_s.value=!0;try{await fi.updatePrices(),await Gr.createValuationSnapshot(),await e()}catch(s){throw console.error("Error updating prices:",s),s}finally{_s.value=!1}}}}}const GA={class:"home"},XA={class:"row"},QA={class:"col-lg-9"},JA={class:"card glass-panel mb-4"},ZA={class:"card-body"},eI={class:"col-lg-3"},tI={class:"card glass-panel mb-4"},nI={class:"card-body"},rI={class:"small text-muted mb-1"},sI={class:"col-md-3"},iI={class:"d-flex justify-content-between"},oI=["disabled"],aI={class:"card glass-panel"},lI={class:"card-body"},cI={class:"small"},uI={class:"d-flex justify-content-between"},dI={class:"fw-medium"},fI={class:"d-flex justify-content-between"},hI={class:"fw-medium"},pI={class:"d-flex justify-content-between"},gI={class:"row g-4"},mI={class:"col-lg-3 col-md-6"},yI={class:"card glass-panel h-100"},vI={class:"card-body"},bI={class:"col-lg-3 col-md-6"},_I={class:"card glass-panel h-100"},wI={class:"card-body"},xI={class:"col-lg-3 col-md-6"},kI={class:"card glass-panel h-100"},CI={class:"card-body"},SI={class:"stat-value text-success"},PI={class:"col-lg-3 col-md-6"},AI={class:"card glass-panel h-100"},II={class:"card-body"},EI={class:"stat-value text-danger"},OI={class:"row mt-4"},MI={class:"col-12"},TI={class:"card glass-panel"},DI={class:"card-body"},RI={class:"row"},$I={class:"col-md-3"},FI={class:"stat-value text-success"},LI={class:"col-md-3"},BI={class:"stat-value text-danger"},jI={class:"col-md-3"},NI={class:"stat-value text-danger"},zI={class:"col-md-3"},qI={class:"stat-value text-danger"},UI=Ze({__name:"HomeView",setup(t){const e=Zd(),n=vk(),r=bk(),{formatDate:s,checkAndScheduleUpdate:i,forceUpdatePrices:o,lastUpdate:a,nextUpdate:l,isUpdating:c}=YA(),u=pe("€0.00"),f=pe("€0.00"),p=pe("€0.00"),g=pe("€0.00"),v=pe("€0.00"),_=pe("€0.00"),x=pe("€0.00"),C=pe("€0.00"),S=pe("€0.00"),A=pe("€0.00"),O=pe("€0.00"),F=B=>B.format("de-DE"),M=async()=>{try{await e.loadCards(),await n.loadHoldings(),await r.loadTransactions();const B=await Gr.calculatePortfolioValue(),P=await Gr.calculateTotalCostBasis(),Z=await Gr.calculateUnrealizedPnL(),Y=await Gr.calculateRealizedPnL();u.value=F(B),f.value=F(P),p.value=F(Z),g.value=F(Y);const z=await Es.getTotalRevenue(),fe=await Es.getTotalCosts(),me=await Es.getTotalFees(),Ae=await Es.getTotalShippingCosts("purchase"),Ce=await Es.getTotalShippingCosts("sale"),Pe=await Es.getTotalNetProfit();v.value=F(z),_.value=F(fe),C.value=F(z),S.value=F(fe),A.value=F(me),O.value=F(Ae.subtract(Ce)),x.value=F(Pe)}catch(B){console.error("Error loading dashboard data:",B)}},D=async()=>{try{await o(),await M()}catch(B){console.error("Error refreshing prices:",B)}};return Mn(async()=>{await M(),setTimeout(async()=>{await i()},0)}),(B,P)=>(U(),J("div",GA,[w("div",XA,[P[6]||(P[6]=w("div",{class:"col-12"},[w("h1",{class:"mb-4"},"MTG Collection Tracker")],-1)),w("div",QA,[w("div",JA,[w("div",ZA,[P[0]||(P[0]=w("h5",{class:"card-title"},"Portfolio Value Over Time",-1)),Ue(HA)])])]),w("div",eI,[w("div",tI,[w("div",nI,[P[1]||(P[1]=w("h5",{class:"card-title"},"Price Updates",-1)),w("div",rI," Last: "+oe($e(s)($e(a)))+" | Next: "+oe($e(s)($e(l))),1),w("div",sI,[w("div",iI,[w("button",{onClick:D,class:"btn btn-glass-panel",disabled:$e(c)},oe($e(c)?"Updating...":"Refresh Now"),9,oI)])])])]),w("div",aI,[w("div",lI,[P[5]||(P[5]=w("h5",{class:"card-title"},"Quick Stats",-1)),w("div",cI,[w("div",uI,[P[2]||(P[2]=w("span",{class:"text-muted"},"Portfolio Value:",-1)),w("span",dI,oe(u.value),1)]),w("div",fI,[P[3]||(P[3]=w("span",{class:"text-muted"},"Total Cost:",-1)),w("span",hI,oe(f.value),1)]),w("div",pI,[P[4]||(P[4]=w("span",{class:"text-muted"},"Net Profit/Loss:",-1)),w("span",{class:At(["fw-medium",parseFloat(x.value)>=0?"text-success":"text-danger"])},oe(x.value),3)])])])])])]),w("div",gI,[w("div",mI,[w("div",yI,[w("div",vI,[P[7]||(P[7]=w("h5",{class:"card-title"},"Unrealized P/L",-1)),w("p",{class:At(["stat-value",parseFloat(p.value)>=0?"positive":"negative"])},oe(p.value),3)])])]),w("div",bI,[w("div",_I,[w("div",wI,[P[8]||(P[8]=w("h5",{class:"card-title"},"Realized P/L",-1)),w("p",{class:At(["stat-value",parseFloat(g.value)>=0?"positive":"negative"])},oe(g.value),3)])])]),w("div",xI,[w("div",kI,[w("div",CI,[P[9]||(P[9]=w("h5",{class:"card-title"},"Total Revenue",-1)),w("p",SI,oe(v.value),1)])])]),w("div",PI,[w("div",AI,[w("div",II,[P[10]||(P[10]=w("h5",{class:"card-title"},"Total Costs",-1)),w("p",EI,oe(_.value),1)])])])]),w("div",OI,[w("div",MI,[w("div",TI,[w("div",DI,[P[15]||(P[15]=w("h5",{class:"card-title"},"Financial Breakdown",-1)),w("div",RI,[w("div",$I,[P[11]||(P[11]=w("h6",{class:"text-muted"},"Sales Revenue",-1)),w("p",FI,oe(C.value),1)]),w("div",LI,[P[12]||(P[12]=w("h6",{class:"text-muted"},"Purchase Costs",-1)),w("p",BI,oe(S.value),1)]),w("div",jI,[P[13]||(P[13]=w("h6",{class:"text-muted"},"Fees & Commission",-1)),w("p",NI,oe(A.value),1)]),w("div",zI,[P[14]||(P[14]=w("h6",{class:"text-muted"},"Shipping Costs",-1)),w("p",qI,oe(O.value),1)])])])])])])]))}}),WI=gn(UI,[["__scopeId","data-v-3555c87b"]]),VI={class:"data-import-view"},HI={class:"nav nav-tabs"},KI={class:"nav-item"},YI={class:"nav-item"},GI={class:"nav-item"},XI={class:"tab-content pt-3"},QI=Ze({__name:"DataImportView",setup(t){return(e,n)=>{const r=Ci("router-link"),s=Ci("router-view");return U(),J("div",VI,[n[3]||(n[3]=w("h1",null,"Data Import",-1)),n[4]||(n[4]=w("p",null,"Import your collection and price data from various sources.",-1)),w("ul",HI,[w("li",KI,[Ue(r,{to:"/import/cardmarket",class:"nav-link","active-class":"active"},{default:at(()=>[...n[0]||(n[0]=[bt(" Cardmarket CSV ",-1)])]),_:1})]),w("li",YI,[Ue(r,{to:"/import/mtgjson",class:"nav-link","active-class":"active"},{default:at(()=>[...n[1]||(n[1]=[bt(" MTGJSON Prices ",-1)])]),_:1})]),w("li",GI,[Ue(r,{to:"/import/price-guide",class:"nav-link","active-class":"active"},{default:at(()=>[...n[2]||(n[2]=[bt(" Cardmarket Price Guide ",-1)])]),_:1})])]),w("div",XI,[Ue(s)])])}}}),JI=gn(QI,[["__scopeId","data-v-fe631b93"]]);function ZI(t){return new Worker("/mtg-pwa/assets/cardmarketCsv-CzsXSO1k.js",{name:t?.name})}const Yt=[];for(let t=0;t<256;++t)Yt.push((t+256).toString(16).slice(1));function eE(t,e=0){return(Yt[t[e+0]]+Yt[t[e+1]]+Yt[t[e+2]]+Yt[t[e+3]]+"-"+Yt[t[e+4]]+Yt[t[e+5]]+"-"+Yt[t[e+6]]+Yt[t[e+7]]+"-"+Yt[t[e+8]]+Yt[t[e+9]]+"-"+Yt[t[e+10]]+Yt[t[e+11]]+Yt[t[e+12]]+Yt[t[e+13]]+Yt[t[e+14]]+Yt[t[e+15]]).toLowerCase()}let Pu;const tE=new Uint8Array(16);function nE(){if(!Pu){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Pu=crypto.getRandomValues.bind(crypto)}return Pu(tE)}const rE=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Bg={randomUUID:rE};function sE(t,e,n){t=t||{};const r=t.random??t.rng?.()??nE();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,eE(r)}function ml(t,e,n){return Bg.randomUUID&&!t?Bg.randomUUID():sE(t)}const jg={},Au={foil:"foil","non-foil":"nonfoil",nonfoil:"nonfoil",etched:"etched","etched foil":"etched"},Iu={english:"EN",german:"DE",french:"FR",italian:"IT",spanish:"ES",japanese:"JA",korean:"KO",portuguese:"PT",russian:"RU",chinese:"ZH",hebrew:"HE",latin:"LA",greek:"GR",arabic:"AR"};function vf(t){let e=t.setCode||"";e&&jg[e.toLowerCase()]&&(e=jg[e.toLowerCase()]);let n=(t.number||"").trim().toLowerCase();n=n.replace(/\/\d+$/,"");let r="EN";if(t.lang){const o=t.lang.trim().toUpperCase();Iu[o]?r=Iu[o]:Object.values(Iu).includes(o)&&(r=o)}let s="nonfoil";if(t.finish!==void 0)if(typeof t.finish=="boolean")s=t.finish?"foil":"nonfoil";else{const o=t.finish.trim().toLowerCase();Au[o]?s=Au[o]:Object.values(Au).includes(o)&&(s=o)}let i;return e&&n?i=`${e}:${n}:${r}:${s}`:t.name?i=`name:${t.name.toLowerCase().replace(/\s+/g,"-")}:${r}:${s}`:i=`unknown:${Date.now()}:${r}:${s}`,{cardId:t.cardId,setCode:e,number:n,lang:r,finish:s,fingerprint:i}}function iE(t){const e=t.toLowerCase();return e.includes("foil")&&!e.includes("etched")?"foil":e.includes("etched")?"etched":"nonfoil"}const yn=t=>t.toLowerCase().normalize("NFKD").replace(new RegExp("\\p{Diacritic}","gu"),"").replace(/[\s–—-]+/g," ").replace(/[:'"]/g,"").trim();function ki(t){const e=new Map;for(const n of t)e.set(yn(n.name),n);return{byName:e}}async function oE(t){const e=t.trim(),n=yn(e),r=await Ng(),i=(await aE()).get(n);if(i)return console.log(`Set code resolved from alias: ${e} -> ${i}`),i;const o=r.byName.get(n);if(o)return console.log(`Set code resolved from exact match: ${e} -> ${o.code}`),await kn(n,o.code),o.code;if(/^commander:\s*/i.test(e)&&/: extras$/i.test(e)){const c=e.replace(/^commander:\s*/i,"").replace(/: extras$/i,"").trim(),u=r.byName.get(yn(`${c} Commander`));if(u)return console.log(`Set code resolved from commander + extras nested: ${e} -> ${u.code}`),await kn(n,u.code),u.code;const f=r.byName.get(yn(c));if(f)return console.log(`Set code resolved from commander + extras nested (base): ${e} -> ${f.code}`),await kn(n,f.code),f.code}if(/^commander:\s*/i.test(e)){const c=e.replace(/^commander:\s*/i,"").trim(),u=r.byName.get(yn(`${c} Commander`));if(u)return console.log(`Set code resolved from commander rewrite (commander): ${e} -> ${u.code}`),await kn(n,u.code),u.code;const f=r.byName.get(yn(c));if(f)return console.log(`Set code resolved from commander rewrite (base): ${e} -> ${f.code}`),await kn(n,f.code),f.code}if(/: extras$/i.test(e)){const c=yn(e.replace(/: extras$/i,"")),u=r.byName.get(c);if(u)return console.log(`Set code resolved from extras suffix: ${e} -> ${u.code}`),await kn(n,u.code),u.code}if(/^universes beyond:\s*/i.test(e)){const c=e.replace(/^universes beyond:\s*/i,"").trim();if(/: extras$/i.test(c)){const f=yn(c.replace(/: extras$/i,"")),p=r.byName.get(f);if(p)return console.log(`Set code resolved from universes beyond + extras: ${e} -> ${p.code}`),await kn(n,p.code),p.code}const u=r.byName.get(yn(c));if(u)return console.log(`Set code resolved from universes beyond: ${e} -> ${u.code}`),await kn(n,u.code),u.code}if(/^magic: the gathering -\s*/i.test(e)){const c=e.replace(/^magic: the gathering -\s*/i,"").trim();if(/: extras$/i.test(c)){const f=yn(c.replace(/: extras$/i,"")),p=r.byName.get(f);if(p)return console.log(`Set code resolved from magic: the gathering - extras: ${e} -> ${p.code}`),await kn(n,p.code),p.code}const u=r.byName.get(yn(c));if(u)return console.log(`Set code resolved from magic: the gathering -: ${e} -> ${u.code}`),await kn(n,u.code),u.code}if(/^secret lair drop series:/i.test(e)){const c=e.replace(/^secret lair drop series:/i,"").trim();if(/: extras$/i.test(c)){const f=yn(c.replace(/: extras$/i,"")),p=r.byName.get(f);if(p)return console.log(`Set code resolved from secret lair drop series + extras: ${e} -> ${p.code}`),await kn(n,p.code),p.code}const u=r.byName.get(yn(c));if(u)return console.log(`Set code resolved from secret lair drop series: ${e} -> ${u.code}`),await kn(n,u.code),u.code}console.log(`Set code unresolved: ${e}`),await vb();const l=(await Ng()).byName.get(n);return l?(console.log(`Set code resolved from fresh exact match: ${e} -> ${l.code}`),l.code):(await kn(n,null),null)}async function Ng(){try{const t=Date.now()-6048e5,e=await ue.settings.get("scryfall_sets_cache");return e&&e.v&&e.v.fetchedAt>t?(console.log("Using cached Scryfall sets data"),ki(e.v.sets)):(console.log("Refreshing Scryfall sets cache (no cache or old cache)"),await vb())}catch(t){console.error("Error in getSetIndex:",t);try{const e=await ue.settings.get("scryfall_sets_cache");if(e&&e.v)return console.log("Using old cached Scryfall sets data due to error"),ki(e.v.sets)}catch(e){console.error("Error accessing cached Scryfall sets data:",e)}return console.log("Returning empty Scryfall sets index"),ki([])}}async function vb(){try{console.log("Fetching Scryfall sets data...");const t=await fetch("https://api.scryfall.com/sets");if(!t.ok)throw new Error(`Failed to fetch sets: ${t.status} ${t.statusText}`);const n=(await t.json()).data||[];return console.log(`Fetched ${n.length} Scryfall sets`),await ue.settings.put({k:"scryfall_sets_cache",v:{sets:n,fetchedAt:Date.now()},createdAt:new Date,updatedAt:new Date}),ki(n)}catch(t){console.error("Error refreshing Scryfall sets cache:",t);try{const e=await ue.settings.get("scryfall_sets_cache");if(e&&e.v)return console.log("Using old cached Scryfall sets data due to fetch error"),ki(e.v.sets)}catch(e){console.error("Error accessing cached Scryfall sets data:",e)}return console.log("Returning empty Scryfall sets index due to errors"),ki([])}}async function aE(){const t=new Map,e=await ue.settings.get("set_code_aliases");if(e&&e.v)for(const[n,r]of Object.entries(e.v))t.set(n,r);return t}async function kn(t,e){try{const n=yn(t),r=await ue.settings.get("set_code_aliases");let s={};r&&r.v&&(s={...r.v}),s[n]=e,await ue.settings.put({k:"set_code_aliases",v:s,createdAt:r?.createdAt||new Date,updatedAt:new Date})}catch(n){console.error("Error storing set code alias:",n)}}function lE(t){return iE(t)}function cE(t){return vf({lang:t}).lang}async function uE(t){return await oE(t)}class dE{static normalizeFingerprint=vf;static mapFinish=lE;static normalizeLang=cE;static resolveSetCode=uE}async function fE(t,e,n,r,s){try{let i=await Uo.getByExternalRef(r,s);i||(i={id:`acq-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,kind:"box",source:r,externalRef:s,currency:"EUR",happenedAt:n,totalPriceCent:e.price,totalFeesCent:e.fees,totalShippingCent:e.shipping,totalCostCent:e.price+e.fees+e.shipping,createdAt:new Date,updatedAt:new Date},await Uo.add(i));const o=i.id,a=[];for(const c of t){const u=vf({name:c.name,setCode:c.expansion,number:c.number,lang:c.language,finish:c.foil});if(await vp.getByAcquisitionAndExternalRef(o,c.externalRef))continue;const p={cardFingerprint:u.fingerprint,cardId:c.id,acquisitionId:o,source:c.source,externalRef:c.externalRef,scannedAt:c.scannedAt,quantity:c.quantity,createdAt:new Date,updatedAt:new Date};a.push(p)}const l=[];for(const c of a){const u=await vp.add(c);l.push(u)}return{acquisitionId:o,scanIds:l}}catch(i){throw console.error("Error importing Manabox scans with box cost:",i),i}}async function hE(t){try{const e=[];for(const n of t)if((await an.getBySourceRef(n.source,n.externalRef)).length===0){const s={cardId:n.cardId,lotId:n.lotId,quantity:n.quantity,unitPrice:n.unitPrice,fees:n.fees,shipping:n.shipping,currency:n.currency,source:n.source,externalRef:n.externalRef,happenedAt:n.happenedAt,notes:n.notes,relatedTransactionId:n.relatedTransactionId},i=await an.add({...s,id:`tx-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,kind:"SELL",createdAt:new Date,updatedAt:new Date});e.push(i)}return e}catch(e){throw console.error("Error importing Cardmarket SELLs:",e),e}}async function pE(t,e){try{const n=[],r=[];for(const s of t){const o=(await bp.getAll()).find(a=>a.name===s.name&&a.platform===s.platform);if(o)n.push(o.id);else{const a=`deck_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,l={...s,id:a,createdAt:s.createdAt||new Date,updatedAt:s.updatedAt||new Date};await bp.add(l),n.push(l.id)}}for(const s of e)if(!await _p.getByDeckIdAndCardId(s.deckId,s.cardId)){const o={deckId:s.deckId,cardId:s.cardId,lotId:s.lotId,quantity:s.quantity,role:s.role,addedAt:s.addedAt,removedAt:s.removedAt,createdAt:s.createdAt||new Date},a=`${s.deckId}-${s.cardId}-${s.addedAt.getTime()}`;await _p.add({...o,id:a}),r.push(a)}return{deckIds:n,deckCardIds:r}}catch(n){throw console.error("Error importing decks:",n),n}}const{resolveSetCode:zg}=dE;class el{static async importCardmarketTransactions(e){const n=_i(),r=ml();n.addImport({id:r,type:"cardmarket",name:"Cardmarket Transactions",status:"pending",progress:0,totalItems:e.length,processedItems:0});try{const s=new Date;for(let i=0;i<e.length;i++){const o=e[i];n.updateImport(r,{status:"processing",processedItems:i+1,progress:Math.round((i+1)/e.length*100)});const a=`cardmarket:${o.reference}:${o.lineNumber}`;if(await ue.transactions.where("externalRef").equals(a).first())continue;const c=Be.parse(o.amount,"EUR"),u={id:`tx-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,kind:c.isPositive()?"SELL":"BUY",quantity:1,unitPrice:c.getCents(),fees:0,shipping:0,currency:"EUR",source:"cardmarket",externalRef:a,happenedAt:new Date(o.date),createdAt:s,updatedAt:s};await an.add(u)}n.completeImport(r)}catch(s){throw console.error("Error importing Cardmarket transactions:",s),n.completeImport(r,s.message),s}}static async importCardmarketOrders(e){const n=_i(),r=ml();n.addImport({id:r,type:"cardmarket",name:"Cardmarket Orders",status:"pending",progress:0,totalItems:e.length,processedItems:0});try{const s=new Date;for(let i=0;i<e.length;i++){const o=e[i];n.updateImport(r,{status:"processing",processedItems:i+1,progress:Math.round((i+1)/e.length*100)});const a=`cardmarket:order:${o.orderId}:${o.lineNumber}`;if(await ue.transactions.where("externalRef").equals(a).first())continue;const c=Be.parse(o.merchandiseValue,"EUR"),u=Be.parse(o.shipmentCosts,"EUR"),f=Be.parse(o.commission,"EUR"),p={id:`order-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,kind:o.direction==="sale"?"SELL":"BUY",quantity:parseInt(o.articleCount)||1,unitPrice:Math.round(c.getCents()/(parseInt(o.articleCount)||1)),fees:f.getCents(),shipping:u.getCents(),currency:"EUR",source:"cardmarket",externalRef:a,happenedAt:new Date(o.dateOfPurchase),createdAt:s,updatedAt:s};if(await an.add(p),o.direction==="purchase"){const g=await ue.transactions.where("externalRef").startsWith(`cardmarket:article:${o.orderId}:`).toArray();for(const v of g)if(v.lotId){const _=await Pt.getById(v.lotId);if(_){const x=parseInt(o.articleCount)||1,C=v.quantity/x,S=Es.calculateTrueAcquisitionCost(c.getCents()/100,u.getCents()/100,f.getCents()/100,x),A=Math.round(u.getCents()*C/v.quantity),O=Math.round(f.getCents()*C/v.quantity);await Pt.update(_.id,{acquisitionPriceCent:S,acquisitionFeesCent:O,acquisitionShippingCent:A,totalAcquisitionCostCent:S+O+A,updatedAt:s})}}}if(o.direction==="sale"){const g=await ue.transactions.where("externalRef").startsWith(`cardmarket:article:${o.orderId}:`).toArray();for(const v of g)if(v.lotId){const _=await Pt.getById(v.lotId);if(_){const x=parseInt(o.articleCount)||1,C=v.quantity/x,S=Math.round(c.getCents()/x),A=Math.round(f.getCents()*C/v.quantity),O=Math.round(u.getCents()*C/v.quantity);await Pt.update(_.id,{salePriceCent:S,saleFeesCent:A,saleShippingCent:O,totalSaleRevenueCent:S-A+O,updatedAt:s})}}}}n.completeImport(r)}catch(s){throw console.error("Error importing Cardmarket orders:",s),n.completeImport(r,s.message),s}}static async importCardmarketArticles(e){const n=_i(),r=ml();n.addImport({id:r,type:"cardmarket",name:"Cardmarket Articles",status:"pending",progress:0,totalItems:e.length,processedItems:0});try{const s=new Date;for(let i=0;i<e.length;i++){const o=e[i];n.updateImport(r,{status:"processing",processedItems:i+1,progress:Math.round((i+1)/e.length*100)});const{cardId:a,cardData:l}=await this.resolveCard(o),c=Be.parse(o.price,"EUR");a&&await this.ensureCardInDb(a,l,o);let u;o.direction==="purchase"&&(u=await this.getOrCreateLotForPurchase(a,c,o)),await this.createTransactionForArticle(o,a,u,c,s)}n.completeImport(r)}catch(s){throw console.error("Error importing Cardmarket articles:",s),n.completeImport(r,s.message),s}}static async resolveCard(e){let n=null,r=null;if(e.productId){const s=e.productId.split(" | ").map(i=>i.trim());if(s.length===1)n=await Ln.getByCardmarketId(s[0]),console.log(JSON.stringify({product_ids:s,resolved_via:"cardmarket_id",cardmarket_id:s[0],final_uri:`/cards/cardmarket/${s[0]}`}));else if(s.length>1){const i=await Ln.getByCardmarketIds(s);i&&i.length>0&&(n=i[0],console.log(JSON.stringify({product_ids:s,resolved_via:"cardmarket_id",cardmarket_id:s[0],final_uri:"/cards/collection"})))}r=n?.id||null}if(!r){const s=await zg(e.expansion),i=this.extractCollectorNumber(e.name);let o=e.name,a=null;const l=e.name.match(/^(.+?)\s*\((V\.\d+)\)$/i);l&&(o=l[1].trim(),a=l[2]),console.log(JSON.stringify({product_ids:e.productId?e.productId.split(" | ").map(c=>c.trim()):[],resolved_via:"set+cn",set_code:s,collector_number:i,final_uri:s?`/cards/${s}/${i}`:""})),n=await Ln.hydrateCard({name:o,setCode:s||e.expansion,collectorNumber:i,version:a}),r=n?.id||null,r||console.log(JSON.stringify({product_ids:e.productId?e.productId.split(" | ").map(c=>c.trim()):[],resolved_via:"none",set_code:null,collector_number:"",final_uri:"",name:e.name,expansion:e.expansion}))}return{cardId:r,cardData:n}}static extractCollectorNumber(e){const n=[/-\s*(\d+[a-zA-Z★]*)\s*-/i,/-\s*([IVXLCDM]+)\s*-/i,/\s+(\d+[a-zA-Z★]*)\s*$/i,/\((\d+[a-zA-Z★]*)\)/i];for(const r of n){const s=e.match(r);if(s)return s[1]}return""}static async ensureCardInDb(e,n,r){if(await Bn.getById(e))await this.updatePriceForCard(e);else{const i=n||await Ln.hydrateCard({scryfall_id:e,name:r.name,setCode:r.expansion,collectorNumber:""}),o=await Ln.getImageUrlById(e),a={id:e,oracleId:i?.oracle_id||n?.oracle_id||"",name:r.name,set:i?.set_name||n?.set_name||r.expansion,setCode:i?.set||n?.set||await zg(r.expansion)||"",number:i?.collector_number||n?.collector_number||this.extractCollectorNumber(r.name)||"",lang:i?.lang||n?.lang||"en",finish:"nonfoil",layout:o?.layout||"normal",imageUrl:o?.front||"",imageUrlBack:o?.back||"",cardmarketId:typeof i?.cardmarket_id=="number"?i.cardmarket_id:void 0,createdAt:new Date,updatedAt:new Date};await Bn.add(a),await this.updatePriceForCard(e)}}static async updatePriceForCard(e){try{const n=new Date,r=n.toISOString().split("T")[0],s=`${e}:scryfall:${r}`;if(!await ue.price_points.get(s)){const o=await Ln.getPriceById(e);if(o){const a={id:s,cardId:e,provider:"scryfall",finish:"nonfoil",date:n.toISOString().split("T")[0],currency:"EUR",priceCent:o.getCents(),asOf:n,createdAt:n};await ue.price_points.put(a)}}}catch(n){console.error(`Error checking/updating price for existing card ${e}:`,n)}}static async getOrCreateLotForPurchase(e,n,r){const s=new Date,i=`cardmarket:lot:${r.shipmentId}:${r.lineNumber}`,o=await Pt.getByExternalRef(i);let a=null;if(o.length>0)a=o[0];else if(e){const l=await Pt.getByCardId(e);for(const c of l)if(!(await an.getByLotId(c.id)).some(p=>p.kind==="BUY")){a=c;break}}if(a)return await Pt.update(a.id,{unitCost:n.getCents(),source:"cardmarket",purchasedAt:new Date(r.dateOfPurchase),updatedAt:s,acquisitionPriceCent:n.getCents(),acquisitionFeesCent:0,acquisitionShippingCent:0,totalAcquisitionCostCent:n.getCents()}),a.id;{const l=`lot-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,c={id:l,cardId:e||"",quantity:parseInt(r.amount)||1,unitCost:n.getCents(),condition:"",language:"",foil:!1,finish:"nonfoil",source:"cardmarket",currency:"EUR",externalRef:i,purchasedAt:new Date(r.dateOfPurchase),acquisitionPriceCent:n.getCents(),acquisitionFeesCent:0,acquisitionShippingCent:0,totalAcquisitionCostCent:n.getCents(),createdAt:s,updatedAt:s};return await Pt.add(c),l}}static async createTransactionForArticle(e,n,r,s,i){const o=`cardmarket:article:${e.shipmentId}:${e.lineNumber}`;if(await ue.transactions.where("externalRef").equals(o).first())return;const l={id:`article-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,kind:e.direction==="sale"?"SELL":"BUY",cardId:n||void 0,lotId:r,quantity:parseInt(e.amount)||1,unitPrice:s.getCents(),fees:0,shipping:0,currency:"EUR",source:"cardmarket",externalRef:o,happenedAt:new Date(e.dateOfPurchase),createdAt:i,updatedAt:i};await an.add(l)}static async checkForExistingImports(e){const n=[];for(const r of e){const s=`cardmarket:article:${r.shipmentId}:${r.lineNumber}`,i=await ue.transactions.where("externalRef").equals(s).first();n.push({article:r,exists:!!i})}return n}static async importManaboxScansWithBoxCost(e,n,r,s,i){return await fE(e,n,r,s,i)}static async importCardmarketSells(e){return await hE(e)}static async importDecks(e,n){return await pE(e,n)}}const gE={class:"cardmarket-wizard"},mE={class:"wizard-progress"},yE={class:"step-number"},vE={class:"step-label"},bE={class:"card"},_E={class:"card-body"},wE={class:"wizard-content"},xE={key:0,class:"step-content"},kE={class:"file-upload-section"},CE={class:"mb-3"},SE={key:0,class:"files-info"},PE={class:"file-list"},AE={class:"file-name"},IE={class:"file-type"},EE={class:"file-size"},OE={key:0,class:"error-messages"},ME={key:1,class:"step-content"},TE={key:0,class:"preview-stats"},DE={class:"stat"},RE={class:"stat-value"},$E={class:"stat"},FE={class:"stat-value"},LE={class:"stat"},BE={class:"stat-value"},jE={key:1,class:"preview-table-container"},NE={class:"preview-table-wrapper"},zE={class:"preview-table"},qE={key:0},UE={key:1},WE={key:2},VE={key:3},HE={key:4},KE={key:5},YE={key:6},GE={key:7},XE={key:8},QE={key:9},JE={key:10},ZE={key:11},eO={key:12},tO={key:13},nO={key:14},rO={key:0},sO={key:1},iO={key:2},oO={key:3},aO={key:4},lO={key:5},cO={key:6},uO={key:7},dO={key:8},fO={key:9},hO={key:10},pO={key:11},gO={key:12},mO={key:13},yO={key:14},vO={key:0},bO=["colspan"],_O={key:2,class:"invalid-rows-section"},wO={class:"invalid-rows"},xO={class:"row-number"},kO={class:"row-errors"},CO={key:0,class:"more-rows"},SO={key:2,class:"step-content"},PO={key:0,class:"conflicts-section"},AO={class:"conflicts-list"},IO={class:"flex-grow-1"},EO={class:"fw-medium"},OO={class:"small text-muted"},MO={key:1,class:"conflicts-section"},TO={class:"conflicts-list"},DO={class:"flex-grow-1"},RO={class:"fw-medium"},$O={class:"small text-muted"},FO={key:3,class:"step-content"},LO={class:"summary-stats"},BO={class:"stat"},jO={class:"stat-value"},NO={class:"stat"},zO={class:"stat-value"},qO={key:0,class:"stat"},UO={class:"stat-value"},WO={class:"summary-details"},VO={class:"summary-grid"},HO={class:"summary-item"},KO={class:"summary-value"},YO={class:"summary-item"},GO={class:"summary-value"},XO={class:"summary-item"},QO={class:"summary-value"},JO={key:0,class:"import-status error"},ZO={class:"wizard-navigation pt-3"},eM=["disabled"],tM=["disabled"],nM=Ze({__name:"CardmarketImportWizard",setup(t){const e=[{key:"upload",title:"Upload"},{key:"preview",title:"Preview"},{key:"conflicts",title:"Conflicts"},{key:"summary",title:"Summary"}],n=pe(0),r=pe([]),s=pe({}),i=pe({}),o=pe({}),a=pe(!1),l=pe(null),c=pe({}),u=pe([]),f=te=>{if(te===0)return"0 Bytes";const ee=1024,G=["Bytes","KB","MB","GB"],Le=Math.floor(Math.log(te)/Math.log(ee));return parseFloat((te/Math.pow(ee,Le)).toFixed(2))+" "+G[Le]},p=te=>new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(te/100),g=async te=>{const G=te.target.files;if(!(!G||G.length===0)){u.value=[],r.value=Array.from(G);try{for(const Le of r.value){if(!Le.name.endsWith(".csv")){u.value.push(`File ${Le.name} is not a CSV file.`);continue}const we=await Le.text();s.value[Le.name]=we,i.value[Le.name]=Ae(Le.name)}await v()}catch(Le){u.value.push("Failed to read the files: "+Le.message)}}},v=async()=>{try{o.value={};for(const[te,ee]of Object.entries(s.value)){const G=i.value[te];if(G==="unknown"){console.warn(`Skipping unknown file type: ${te}`);continue}const Le=new ZI;let we="",We="sale";switch(G){case"transactions":we="parseTransactions";break;case"sold-orders":we="parseOrders",We="sale";break;case"purchased-orders":we="parseOrders",We="purchase";break;case"sold-articles":we="parseArticles",We="sale";break;case"purchased-articles":we="parseArticles",We="purchase";break}Le.postMessage({type:we,data:ee,direction:We});const wt=await new Promise((gt,st)=>{Le.onmessage=ae=>{const{type:Me,result:re,error:Fe}=ae.data;console.log("Worker response type:",Me),Fe?st(new Error(Fe)):gt(re)},Le.onerror=ae=>{st(ae)}});o.value[G]=wt,Le.terminate()}await Ce()}catch(te){u.value.push("Failed to parse CSV data: "+te.message)}},_=Ve(()=>n.value===0?r.value.length>0&&u.value.length===0:!0),x=async()=>{_.value&&(n.value===0&&await v(),n.value<e.length-1&&n.value++)},C=()=>{n.value>0&&n.value--},S=async()=>{if(!a.value){a.value=!0,l.value=null;try{for(const[te,ee]of Object.entries(o.value)){if(!ee||ee.length===0)continue;const G=fe(ee,te);switch(te){case"transactions":await el.importCardmarketTransactions(G);break;case"sold-orders":case"purchased-orders":await el.importCardmarketOrders(G);break;case"sold-articles":case"purchased-articles":await el.importCardmarketArticles(G);break}}l.value="Import completed successfully! Check the status indicator in the top right for details.",setTimeout(()=>{n.value=0,r.value=[],s.value={},i.value={},o.value={},u.value=[],a.value=!1,l.value=null},3e3)}catch(te){l.value="Failed to import data: "+te.message,a.value=!1}}},A=te=>fe(o.value[te]||[],te),O=te=>fe(o.value[te]||[],te).filter(G=>Pe(te,G)),F=()=>Object.values(o.value).reduce((te,ee)=>te+(ee?.length||0),0),M=()=>{let te=0;for(const[ee,G]of Object.entries(o.value))G&&(te+=fe(G,ee).length);return te},D=te=>{if(/^\d{2}\.\d{2}\.\d{4} \d{2}:\d{2}:\d{2}$/.test(te)){const Le=te.split(" ")[0].split("."),we=parseInt(Le[0],10),We=parseInt(Le[1],10)-1,wt=parseInt(Le[2],10),gt=new Date(wt,We,we);return gt.getFullYear()===wt&&gt.getMonth()===We&&gt.getDate()===we}if(/^\d{2}\.\d{2}\.\d{4}$/.test(te)){const ee=te.split("."),G=parseInt(ee[0],10),Le=parseInt(ee[1],10)-1,we=parseInt(ee[2],10),We=new Date(we,Le,G);return We.getFullYear()===we&&We.getMonth()===Le&&We.getDate()===G}if(/^\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}$/.test(te)){const ee=new Date(te);return!isNaN(ee.getTime())}if(/^\d{4}-\d{2}-\d{2}$/.test(te)){const ee=new Date(te);return!isNaN(ee.getTime())}return!1},B=te=>{if(te==null)return!1;if(typeof te=="number")return Number.isFinite(te);const ee=String(te).trim().replace(/[€$£\s]/g,"").replace(",","."),G=Number.parseFloat(ee);return Number.isFinite(G)},P=te=>{const ee=Number.parseInt(String(te??"").trim(),10);return Number.isFinite(ee)&&ee>0};function Z(te){switch(te){case"transactions":return"Transaction Summary";case"sold-orders":return"Sold Orders";case"purchased-orders":return"Purchased Orders";case"sold-articles":return"Sold Articles";case"purchased-articles":return"Purchased Articles";default:return"Unknown File Type"}}const Y=te=>{switch(te){case"transactions":return 5;case"sold-orders":case"purchased-orders":return 6;case"sold-articles":case"purchased-articles":return 8;default:return 5}},z=(te,ee)=>{const G=[];if(!te.date&&!te.dateOfPurchase)G.push("Date is required");else{const Le=te.date||te.dateOfPurchase;D(Le)||G.push("Invalid date format (expected DD.MM.YYYY or YYYY-MM-DD)")}return ee.includes("articles")?(te.name||G.push("Card name is required"),te.expansion||G.push("Expansion/Set is required"),te.price===void 0||te.price===null||String(te.price).trim()===""?G.push("Price is required"):B(te.price)||G.push("Invalid price format (expected numeric value)"),te.amount===void 0||te.amount===null||String(te.amount).trim()===""?G.push("Quantity is required"):P(te.amount)||G.push("Invalid quantity (expected positive integer)"),te.shipmentId||G.push("Order ID is required")):ee.includes("orders")?(te.dateOfPurchase?D(te.dateOfPurchase)||G.push("Invalid date format (expected DD.MM.YYYY or YYYY-MM-DD)"):G.push("Date is required"),te.orderId||G.push("Order ID is required"),te.articleCount?P(te.articleCount)||G.push("Invalid article count (expected positive integer)"):G.push("Article count is required"),te.merchandiseValue===void 0||te.merchandiseValue===null||String(te.merchandiseValue).trim()===""?G.push("Merchandise value is required"):B(te.merchandiseValue)||G.push("Invalid merchandise value format (expected numeric value)")):ee==="transactions"&&(te.reference||G.push("Reference is required"),te.amount===void 0||te.amount===null||String(te.amount).trim()===""?G.push("Amount is required"):B(te.amount)||G.push("Invalid amount format (expected numeric value)"),te.category||G.push("Category is required"),te.type||G.push("Type is required")),G},fe=(te,ee="articles")=>te.filter(G=>z(G,ee).length===0),me=(te,ee="articles")=>te.map((G,Le)=>({index:Le,row:G,errors:z(G,ee)})).filter(G=>G.errors.length>0),Ae=te=>{const ee=te.toLowerCase();return ee.includes("transaction")?"transactions":ee.includes("sold orders")?"sold-orders":ee.includes("purchased orders")?"purchased-orders":ee.includes("sold articles")?"sold-articles":ee.includes("purchased articles")?"purchased-articles":"unknown"},Ce=async()=>{try{c.value={};for(const[te,ee]of Object.entries(o.value))if(!(!ee||ee.length===0)&&te.includes("articles")){const G=await el.checkForExistingImports(ee);for(const Le of G){const we=`${te}:${Le.article.shipmentId}:${Le.article.lineNumber}`;c.value[we]=Le.exists}}}catch(te){console.error("Error checking for existing imports:",te)}},Pe=(te,ee)=>{const G=`${te}:${ee.shipmentId}:${ee.lineNumber}`;return!!c.value[G]};return(te,ee)=>(U(),J("div",gE,[ee[29]||(ee[29]=w("h1",null,"Cardmarket Import Wizard",-1)),w("div",mE,[(U(),J(et,null,Ft(e,(G,Le)=>w("div",{key:G.key,class:At(["step",{active:n.value===Le,completed:Le<n.value}])},[w("div",yE,oe(Le+1),1),w("div",vE,oe(G.title),1)],2)),64))]),w("div",bE,[w("div",_E,[w("div",wE,[n.value===0?(U(),J("div",xE,[ee[2]||(ee[2]=Ky('<h2 data-v-4f46dc4c>Upload CSV Files</h2><p data-v-4f46dc4c>Please select all Cardmarket CSV export files to import. You can select multiple files at once.</p><div class="alert alert-info mb-4" data-v-4f46dc4c><h3 class="alert-heading" data-v-4f46dc4c>Where to Get Cardmarket CSV Files</h3><p data-v-4f46dc4c>Cardmarket provides several types of CSV exports. For the best import results, we recommend downloading these files:</p><div class="row" data-v-4f46dc4c><div class="col-md-6" data-v-4f46dc4c><h4 data-v-4f46dc4c>1. Transaction Summary</h4><p data-v-4f46dc4c>Contains financial summary of all your transactions (sales, purchases, fees).</p><p data-v-4f46dc4c><strong data-v-4f46dc4c>Download from:</strong><br data-v-4f46dc4c> Cardmarket → My Account → Transactions → All Transactions → Download CSV</p><p class="mb-1" data-v-4f46dc4c><strong data-v-4f46dc4c>Direct link:</strong></p><a href="https://www.cardmarket.com/de/Magic/Account/Transactions/Details" target="_blank" rel="noopener noreferrer" class="btn btn-sm btn-glass-primary" data-v-4f46dc4c> Go to Transactions Page </a></div><div class="col-md-6" data-v-4f46dc4c><h4 data-v-4f46dc4c>2. Sold Articles</h4><p data-v-4f46dc4c>Contains detailed information about individual items you&#39;ve sold.</p><p data-v-4f46dc4c><strong data-v-4f46dc4c>Download from:</strong><br data-v-4f46dc4c> Cardmarket → My Account → Statistics → Sold Articles → CSV Export</p><p class="mb-1" data-v-4f46dc4c><strong data-v-4f46dc4c>Direct link:</strong></p><a href="https://www.cardmarket.com/de/Magic/Account/Statistics" target="_blank" rel="noopener noreferrer" class="btn btn-sm btn-glass-primary" data-v-4f46dc4c> Go to Statistics Page </a></div></div><div class="row mt-3" data-v-4f46dc4c><div class="col-md-6" data-v-4f46dc4c><h4 data-v-4f46dc4c>3. Purchased Articles</h4><p data-v-4f46dc4c>Contains detailed information about individual items you&#39;ve bought.</p><p data-v-4f46dc4c><strong data-v-4f46dc4c>Download from:</strong><br data-v-4f46dc4c> Cardmarket → My Account → Statistics → Purchased Articles → CSV Export</p><p class="mb-1" data-v-4f46dc4c><strong data-v-4f46dc4c>Direct link:</strong></p><a href="https://www.cardmarket.com/de/Magic/Account/Statistics" target="_blank" rel="noopener noreferrer" class="btn btn-sm btn-glass-primary" data-v-4f46dc4c> Go to Statistics Page </a></div><div class="col-md-6" data-v-4f46dc4c><h4 data-v-4f46dc4c>Optional: Order Details</h4><p data-v-4f46dc4c>Sold Orders and Purchased Orders contain redundant information. Only import if you specifically need order-level details.</p><p data-v-4f46dc4c><strong data-v-4f46dc4c>Download from:</strong><br data-v-4f46dc4c> Cardmarket → My Account → Statistics → Sold/Purchased Orders → CSV Export</p></div></div><div class="mt-3" data-v-4f46dc4c><small class="text-muted" data-v-4f46dc4c><strong data-v-4f46dc4c>Tip:</strong> The most important files are Transaction Summary, Sold Articles, and Purchased Articles. Order files (Sold Orders, Purchased Orders) contain redundant information but can be imported if needed. </small></div></div>',3)),w("div",kE,[w("div",CE,[ee[0]||(ee[0]=w("label",{for:"csv-files",class:"form-label"}," Choose CSV Files ",-1)),w("input",{id:"csv-files",type:"file",accept:".csv",multiple:"",onChange:g,class:"form-control"},null,32)]),r.value.length>0?(U(),J("div",SE,[ee[1]||(ee[1]=w("h3",null,"Uploaded Files",-1)),w("ul",PE,[(U(!0),J(et,null,Ft(r.value,G=>(U(),J("li",{key:G.name,class:"file-item"},[w("span",AE,oe(G.name),1),w("span",IE,"("+oe(Ae(G.name))+")",1),w("span",EE,"- "+oe(f(G.size)),1)]))),128))])])):ke("",!0)]),u.value.length>0?(U(),J("div",OE,[(U(!0),J(et,null,Ft(u.value,G=>(U(),J("div",{key:G,class:"error-message"},oe(G),1))),128))])):ke("",!0)])):n.value===1?(U(),J("div",ME,[ee[10]||(ee[10]=w("h2",null,"Preview Data",-1)),ee[11]||(ee[11]=w("p",null,"Review the data that will be imported. Check for any issues before proceeding.",-1)),(U(!0),J(et,null,Ft(i.value,(G,Le)=>(U(),J("div",{key:Le,class:"file-preview"},[w("h3",null,oe(Z(G)),1),o.value[G]&&o.value[G].length>0?(U(),J("div",TE,[w("div",DE,[w("div",RE,oe(o.value[G].length),1),ee[3]||(ee[3]=w("div",{class:"stat-label"},"Total Rows",-1))]),w("div",$E,[w("div",FE,oe(fe(o.value[G],G).length),1),ee[4]||(ee[4]=w("div",{class:"stat-label"},"Valid Rows",-1))]),w("div",LE,[w("div",BE,oe(me(o.value[G],G).length),1),ee[5]||(ee[5]=w("div",{class:"stat-label"},"Invalid Rows",-1))])])):ke("",!0),o.value[G]&&o.value[G].length>0?(U(),J("div",jE,[ee[7]||(ee[7]=w("h4",null,"Valid Data Preview",-1)),w("div",NE,[w("table",zE,[w("thead",null,[w("tr",null,[G==="transactions"?(U(),J("th",qE,"Reference")):(U(),J("th",UE,"Line")),ee[6]||(ee[6]=w("th",null,"Date",-1)),G.includes("articles")?(U(),J("th",WE,"Card Name")):ke("",!0),G.includes("articles")?(U(),J("th",VE,"Expansion")):ke("",!0),G.includes("articles")?(U(),J("th",HE,"Price")):ke("",!0),G.includes("articles")?(U(),J("th",KE,"Quantity")):ke("",!0),G.includes("articles")?(U(),J("th",YE,"Order ID")):ke("",!0),G.includes("articles")?(U(),J("th",GE,"Status")):ke("",!0),G.includes("orders")?(U(),J("th",XE,"Order ID")):ke("",!0),G.includes("orders")?(U(),J("th",QE,"Username")):ke("",!0),G.includes("orders")?(U(),J("th",JE,"Article Count")):ke("",!0),G.includes("orders")?(U(),J("th",ZE,"Merchandise Value")):ke("",!0),G==="transactions"?(U(),J("th",eO,"Category")):ke("",!0),G==="transactions"?(U(),J("th",tO,"Type")):ke("",!0),G==="transactions"?(U(),J("th",nO,"Amount")):ke("",!0)])]),w("tbody",null,[(U(!0),J(et,null,Ft(fe(o.value[G],G).slice(0,5),(we,We)=>(U(),J("tr",{key:We},[G==="transactions"?(U(),J("td",rO,oe(we.reference),1)):(U(),J("td",sO,oe(we.lineNumber),1)),w("td",null,oe(we.date||we.dateOfPurchase),1),G.includes("articles")?(U(),J("td",iO,oe(we.name),1)):ke("",!0),G.includes("articles")?(U(),J("td",oO,oe(we.expansion),1)):ke("",!0),G.includes("articles")?(U(),J("td",aO,oe(p(parseFloat(String(we.price).replace(/[€$£\s]/g,"").replace(",","."))*100)),1)):ke("",!0),G.includes("articles")?(U(),J("td",lO,oe(we.amount),1)):ke("",!0),G.includes("articles")?(U(),J("td",cO,oe(we.shipmentId),1)):ke("",!0),G.includes("articles")?(U(),J("td",uO,[w("span",{class:At(Pe(G,we)?"text-success":"text-primary")},oe(Pe(G,we)?"Already Imported":"New"),3)])):ke("",!0),G.includes("orders")?(U(),J("td",dO,oe(we.orderId),1)):ke("",!0),G.includes("orders")?(U(),J("td",fO,oe(we.username),1)):ke("",!0),G.includes("orders")?(U(),J("td",hO,oe(we.articleCount),1)):ke("",!0),G.includes("orders")?(U(),J("td",pO,oe(p(parseFloat(String(we.merchandiseValue).replace(/[€$£\s]/g,"").replace(",","."))*100)),1)):ke("",!0),G==="transactions"?(U(),J("td",gO,oe(we.category),1)):ke("",!0),G==="transactions"?(U(),J("td",mO,oe(we.type),1)):ke("",!0),G==="transactions"?(U(),J("td",yO,oe(p(parseFloat(String(we.amount).replace(/[€$£\s]/g,"").replace(",","."))*100)),1)):ke("",!0)]))),128)),fe(o.value[G],G).length>5?(U(),J("tr",vO,[w("td",{colspan:Y(G),class:"more-rows-cell"}," ... and "+oe(fe(o.value[G],G).length-5)+" more rows ",9,bO)])):ke("",!0)])])])])):ke("",!0),me(o.value[G],G).length>0?(U(),J("div",_O,[ee[8]||(ee[8]=w("h4",null,"Invalid Rows",-1)),ee[9]||(ee[9]=w("p",null,"The following rows have issues and will be skipped:",-1)),w("div",wO,[(U(!0),J(et,null,Ft(me(o.value[G],G).slice(0,3),(we,We)=>(U(),J("div",{key:We,class:"invalid-row"},[w("div",xO,"Row "+oe(we.row.lineNumber||we.row.reference),1),w("div",kO,oe(we.errors.join(", ")),1)]))),128)),me(o.value[G],G).length>3?(U(),J("div",CO," ... and "+oe(me(o.value[G],G).length-3)+" more rows ",1)):ke("",!0)])])):ke("",!0)]))),128))])):n.value===2?(U(),J("div",SO,[ee[18]||(ee[18]=w("h2",null,"Resolve Conflicts",-1)),ee[19]||(ee[19]=w("p",null,"Check for duplicate imports and resolve any conflicts.",-1)),(U(!0),J(et,null,Ft(i.value,(G,Le)=>(U(),J("div",{key:Le,class:"file-conflicts"},[w("h3",null,oe(Z(G)),1),G.includes("articles")&&O(G).length>0?(U(),J("div",PO,[ee[13]||(ee[13]=w("h4",null,"Already Imported Articles",-1)),ee[14]||(ee[14]=w("p",null,"The following articles have already been imported and will be skipped:",-1)),w("div",AO,[(U(!0),J(et,null,Ft(O(G),(we,We)=>(U(),J("div",{key:We,class:"d-flex justify-content-between align-items-center p-2 bg-light rounded"},[w("div",IO,[w("div",EO,oe(we.name),1),w("div",OO,oe(we.expansion)+" • "+oe(we.amount)+" × "+oe(p(parseFloat(String(we.price).replace(/[€$£\s]/g,"").replace(",","."))*100))+" • Order #"+oe(we.shipmentId),1)]),ee[12]||(ee[12]=w("div",{class:"ms-3"},[w("span",{class:"text-success fw-medium"},"Already Imported")],-1))]))),128))])])):ke("",!0),G.includes("articles")&&A(G).length>0?(U(),J("div",MO,[ee[16]||(ee[16]=w("h4",null,"New Articles to Import",-1)),ee[17]||(ee[17]=w("p",null,"The following articles will be imported:",-1)),w("div",TO,[(U(!0),J(et,null,Ft(A(G).filter(we=>!Pe(G,we)),(we,We)=>(U(),J("div",{key:We,class:"d-flex justify-content-between align-items-center p-2 bg-light rounded"},[w("div",DO,[w("div",RO,oe(we.name),1),w("div",$O,oe(we.expansion)+" • "+oe(we.amount)+" × "+oe(p(parseFloat(String(we.price).replace(/[€$£\s]/g,"").replace(",","."))*100))+" • Order #"+oe(we.shipmentId),1)]),ee[15]||(ee[15]=w("div",{class:"ms-3"},[w("span",{class:"text-primary fw-medium"},"New")],-1))]))),128))])])):ke("",!0)]))),128))])):n.value===3?(U(),J("div",FO,[ee[27]||(ee[27]=w("h2",null,"Import Summary",-1)),ee[28]||(ee[28]=w("p",null,"Review the import summary before finalizing.",-1)),(U(!0),J(et,null,Ft(i.value,(G,Le)=>(U(),J("div",{key:Le,class:"file-summary"},[w("h3",null,oe(Z(G)),1),w("div",LO,[w("div",BO,[w("div",jO,oe(A(G).length),1),ee[20]||(ee[20]=w("div",{class:"stat-label"},"New Records",-1))]),w("div",NO,[w("div",zO,oe(me(o.value[G]||[],G).length),1),ee[21]||(ee[21]=w("div",{class:"stat-label"},"Invalid Rows",-1))]),G.includes("articles")?(U(),J("div",qO,[w("div",UO,oe(O(G).length),1),ee[22]||(ee[22]=w("div",{class:"stat-label"},"Already Imported",-1))])):ke("",!0)])]))),128)),w("div",WO,[ee[26]||(ee[26]=w("h3",null,"Import Details",-1)),w("div",VO,[w("div",HO,[ee[23]||(ee[23]=w("div",{class:"summary-label"},"Files Uploaded",-1)),w("div",KO,oe(r.value.length),1)]),w("div",YO,[ee[24]||(ee[24]=w("div",{class:"summary-label"},"Total Rows Parsed",-1)),w("div",GO,oe(F()),1)]),w("div",XO,[ee[25]||(ee[25]=w("div",{class:"summary-label"},"Total Valid Rows",-1)),w("div",QO,oe(M()),1)])])]),l.value?(U(),J("div",JO,oe(l.value),1)):ke("",!0)])):ke("",!0)])])]),w("div",ZO,[n.value>0?(U(),J("button",{key:0,onClick:C,class:"btn btn-secondary"}," Previous ")):ke("",!0),n.value<e.length-1?(U(),J("button",{key:1,onClick:x,class:"btn btn-glass-primary",disabled:!_.value}," Next ",8,eM)):ke("",!0),n.value===e.length-1?(U(),J("button",{key:2,onClick:S,class:"btn btn-glass-primary",disabled:a.value},oe(a.value?"Importing...":"Import Data"),9,tM)):ke("",!0)])]))}}),rM=gn(nM,[["__scopeId","data-v-4f46dc4c"]]);var ws={},mr={},xs={},qg;function bb(){if(qg)return xs;qg=1,Object.defineProperty(xs,"__esModule",{value:!0}),xs.DefaultSerializer=xs.extendSerializer=void 0;function t(r,s){const i=r.deserialize.bind(r),o=r.serialize.bind(r);return{deserialize(a){return s.deserialize(a,i)},serialize(a){return s.serialize(a,o)}}}xs.extendSerializer=t;const e={deserialize(r){return Object.assign(Error(r.message),{name:r.name,stack:r.stack})},serialize(r){return{__error_marker:"$$error",message:r.message,name:r.name,stack:r.stack}}},n=r=>r&&typeof r=="object"&&"__error_marker"in r&&r.__error_marker==="$$error";return xs.DefaultSerializer={deserialize(r){return n(r)?e.deserialize(r):r},serialize(r){return r instanceof Error?e.serialize(r):r}},xs}var Ug;function Xo(){if(Ug)return mr;Ug=1,Object.defineProperty(mr,"__esModule",{value:!0}),mr.serialize=mr.deserialize=mr.registerSerializer=void 0;const t=bb();let e=t.DefaultSerializer;function n(i){e=t.extendSerializer(e,i)}mr.registerSerializer=n;function r(i){return e.deserialize(i)}mr.deserialize=r;function s(i){return e.serialize(i)}return mr.serialize=s,mr}var Eu={},yr={},ks={},Wg;function sM(){if(Wg)return ks;Wg=1,Object.defineProperty(ks,"__esModule",{value:!0}),ks.getBundleURL=ks.getBaseURL=void 0;let t;function e(){return t||(t=n()),t}ks.getBundleURL=e;function n(){try{throw new Error}catch(s){const i=(""+s.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\/\/[^)\n]+/g);if(i)return r(i[0])}return"/"}function r(s){return(""+s).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\/\/.+)?\/[^/]+(?:\?.*)?$/,"$1")+"/"}return ks.getBaseURL=r,ks}var Vg;function _b(){if(Vg)return yr;Vg=1,Object.defineProperty(yr,"__esModule",{value:!0}),yr.isWorkerRuntime=yr.getWorkerImplementation=yr.defaultPoolSize=void 0;const t=sM();yr.defaultPoolSize=typeof navigator<"u"&&navigator.hardwareConcurrency?navigator.hardwareConcurrency:4;const e=a=>/^[a-zA-Z][a-zA-Z\d+\-.]*:/.test(a);function n(a){const l=new Blob([a],{type:"application/javascript"});return URL.createObjectURL(l)}function r(){if(typeof Worker>"u")return class{constructor(){throw Error("No web worker implementation available. You might have tried to spawn a worker within a worker in a browser that doesn't support workers in workers.")}};class a extends Worker{constructor(u,f){var p,g;typeof u=="string"&&f&&f._baseURL?u=new URL(u,f._baseURL):typeof u=="string"&&!e(u)&&t.getBundleURL().match(/^file:\/\//i)&&(u=new URL(u,t.getBundleURL().replace(/\/[^\/]+$/,"/")),(!((p=f?.CORSWorkaround)!==null&&p!==void 0)||p)&&(u=n(`importScripts(${JSON.stringify(u)});`))),typeof u=="string"&&e(u)&&(!((g=f?.CORSWorkaround)!==null&&g!==void 0)||g)&&(u=n(`importScripts(${JSON.stringify(u)});`)),super(u,f)}}class l extends a{constructor(u,f){const p=window.URL.createObjectURL(u);super(p,f)}static fromText(u,f){const p=new window.Blob([u],{type:"text/javascript"});return new l(p,f)}}return{blob:l,default:a}}let s;function i(){return s||(s=r()),s}yr.getWorkerImplementation=i;function o(){const a=typeof self<"u"&&typeof Window<"u"&&self instanceof Window;return!!(typeof self<"u"&&self.postMessage&&!a)}return yr.isWorkerRuntime=o,yr}var Cs={},tl={exports:{}},Ou,Hg;function iM(){if(Hg)return Ou;Hg=1;var t=1e3,e=t*60,n=e*60,r=n*24,s=r*7,i=r*365.25;Ou=function(u,f){f=f||{};var p=typeof u;if(p==="string"&&u.length>0)return o(u);if(p==="number"&&isFinite(u))return f.long?l(u):a(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))};function o(u){if(u=String(u),!(u.length>100)){var f=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(u);if(f){var p=parseFloat(f[1]),g=(f[2]||"ms").toLowerCase();switch(g){case"years":case"year":case"yrs":case"yr":case"y":return p*i;case"weeks":case"week":case"w":return p*s;case"days":case"day":case"d":return p*r;case"hours":case"hour":case"hrs":case"hr":case"h":return p*n;case"minutes":case"minute":case"mins":case"min":case"m":return p*e;case"seconds":case"second":case"secs":case"sec":case"s":return p*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return p;default:return}}}}function a(u){var f=Math.abs(u);return f>=r?Math.round(u/r)+"d":f>=n?Math.round(u/n)+"h":f>=e?Math.round(u/e)+"m":f>=t?Math.round(u/t)+"s":u+"ms"}function l(u){var f=Math.abs(u);return f>=r?c(u,f,r,"day"):f>=n?c(u,f,n,"hour"):f>=e?c(u,f,e,"minute"):f>=t?c(u,f,t,"second"):u+" ms"}function c(u,f,p,g){var v=f>=p*1.5;return Math.round(u/p)+" "+g+(v?"s":"")}return Ou}var Mu,Kg;function oM(){if(Kg)return Mu;Kg=1;function t(e){r.debug=r,r.default=r,r.coerce=c,r.disable=a,r.enable=i,r.enabled=l,r.humanize=iM(),r.destroy=u,Object.keys(e).forEach(f=>{r[f]=e[f]}),r.names=[],r.skips=[],r.formatters={};function n(f){let p=0;for(let g=0;g<f.length;g++)p=(p<<5)-p+f.charCodeAt(g),p|=0;return r.colors[Math.abs(p)%r.colors.length]}r.selectColor=n;function r(f){let p,g=null,v,_;function x(...C){if(!x.enabled)return;const S=x,A=Number(new Date),O=A-(p||A);S.diff=O,S.prev=p,S.curr=A,p=A,C[0]=r.coerce(C[0]),typeof C[0]!="string"&&C.unshift("%O");let F=0;C[0]=C[0].replace(/%([a-zA-Z%])/g,(D,B)=>{if(D==="%%")return"%";F++;const P=r.formatters[B];if(typeof P=="function"){const Z=C[F];D=P.call(S,Z),C.splice(F,1),F--}return D}),r.formatArgs.call(S,C),(S.log||r.log).apply(S,C)}return x.namespace=f,x.useColors=r.useColors(),x.color=r.selectColor(f),x.extend=s,x.destroy=r.destroy,Object.defineProperty(x,"enabled",{enumerable:!0,configurable:!1,get:()=>g!==null?g:(v!==r.namespaces&&(v=r.namespaces,_=r.enabled(f)),_),set:C=>{g=C}}),typeof r.init=="function"&&r.init(x),x}function s(f,p){const g=r(this.namespace+(typeof p>"u"?":":p)+f);return g.log=this.log,g}function i(f){r.save(f),r.namespaces=f,r.names=[],r.skips=[];const p=(typeof f=="string"?f:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const g of p)g[0]==="-"?r.skips.push(g.slice(1)):r.names.push(g)}function o(f,p){let g=0,v=0,_=-1,x=0;for(;g<f.length;)if(v<p.length&&(p[v]===f[g]||p[v]==="*"))p[v]==="*"?(_=v,x=g,v++):(g++,v++);else if(_!==-1)v=_+1,x++,g=x;else return!1;for(;v<p.length&&p[v]==="*";)v++;return v===p.length}function a(){const f=[...r.names,...r.skips.map(p=>"-"+p)].join(",");return r.enable(""),f}function l(f){for(const p of r.skips)if(o(f,p))return!1;for(const p of r.names)if(o(f,p))return!0;return!1}function c(f){return f instanceof Error?f.stack||f.message:f}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}return Mu=t,Mu}var Yg;function bf(){return Yg||(Yg=1,(function(t,e){var n={};e.formatArgs=s,e.save=i,e.load=o,e.useColors=r,e.storage=a(),e.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let c;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(c=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(c[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function s(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const u="color: "+this.color;c.splice(1,0,u,"color: inherit");let f=0,p=0;c[0].replace(/%[a-zA-Z%]/g,g=>{g!=="%%"&&(f++,g==="%c"&&(p=f))}),c.splice(p,0,u)}e.log=console.debug||console.log||(()=>{});function i(c){try{c?e.storage.setItem("debug",c):e.storage.removeItem("debug")}catch{}}function o(){let c;try{c=e.storage.getItem("debug")||e.storage.getItem("DEBUG")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c=n.DEBUG),c}function a(){try{return localStorage}catch{}}t.exports=oM()(e);const{formatters:l}=t.exports;l.j=function(c){try{return JSON.stringify(c)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}}})(tl,tl.exports)),tl.exports}var aM=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class gc{constructor(e){this._baseObserver=e,this._pendingPromises=new Set}complete(){Promise.all(this._pendingPromises).then(()=>this._baseObserver.complete()).catch(e=>this._baseObserver.error(e))}error(e){this._baseObserver.error(e)}schedule(e){const n=Promise.all(this._pendingPromises),r=[],s=o=>r.push(o),i=Promise.resolve().then(()=>aM(this,void 0,void 0,function*(){yield n,yield e(s),this._pendingPromises.delete(i);for(const o of r)this._baseObserver.next(o)})).catch(o=>{this._pendingPromises.delete(i),this._baseObserver.error(o)});this._pendingPromises.add(i)}}const wb=()=>typeof Symbol=="function",ia=t=>wb()&&!!Symbol[t],_f=t=>ia(t)?Symbol[t]:"@@"+t;ia("asyncIterator")||(Symbol.asyncIterator=Symbol.asyncIterator||Symbol.for("Symbol.asyncIterator"));const lM=_f("iterator"),bd=_f("observable"),xb=_f("species");function ql(t,e){const n=t[e];if(n!=null){if(typeof n!="function")throw new TypeError(n+" is not a function");return n}}function so(t){let e=t.constructor;return e!==void 0&&(e=e[xb],e===null&&(e=void 0)),e!==void 0?e:Vt}function cM(t){return t instanceof Vt}function Di(t){Di.log?Di.log(t):setTimeout(()=>{throw t},0)}function yl(t){Promise.resolve().then(()=>{try{t()}catch(e){Di(e)}})}function kb(t){const e=t._cleanup;if(e!==void 0&&(t._cleanup=void 0,!!e))try{if(typeof e=="function")e();else{const n=ql(e,"unsubscribe");n&&n.call(e)}}catch(n){Di(n)}}function _d(t){t._observer=void 0,t._queue=void 0,t._state="closed"}function uM(t){const e=t._queue;if(e){t._queue=void 0,t._state="ready";for(const n of e)if(Cb(t,n.type,n.value),t._state==="closed")break}}function Cb(t,e,n){t._state="running";const r=t._observer;try{const s=r?ql(r,e):void 0;switch(e){case"next":s&&s.call(r,n);break;case"error":if(_d(t),s)s.call(r,n);else throw n;break;case"complete":_d(t),s&&s.call(r);break}}catch(s){Di(s)}t._state==="closed"?kb(t):t._state==="running"&&(t._state="ready")}function Tu(t,e,n){if(t._state!=="closed"){if(t._state==="buffering"){t._queue=t._queue||[],t._queue.push({type:e,value:n});return}if(t._state!=="ready"){t._state="buffering",t._queue=[{type:e,value:n}],yl(()=>uM(t));return}Cb(t,e,n)}}class dM{constructor(e,n){this._cleanup=void 0,this._observer=e,this._queue=void 0,this._state="initializing";const r=new fM(this);try{this._cleanup=n.call(void 0,r)}catch(s){r.error(s)}this._state==="initializing"&&(this._state="ready")}get closed(){return this._state==="closed"}unsubscribe(){this._state!=="closed"&&(_d(this),kb(this))}}class fM{constructor(e){this._subscription=e}get closed(){return this._subscription._state==="closed"}next(e){Tu(this._subscription,"next",e)}error(e){Tu(this._subscription,"error",e)}complete(){Tu(this._subscription,"complete")}}class Vt{constructor(e){if(!(this instanceof Vt))throw new TypeError("Observable cannot be called as a function");if(typeof e!="function")throw new TypeError("Observable initializer must be a function");this._subscriber=e}subscribe(e,n,r){return(typeof e!="object"||e===null)&&(e={next:e,error:n,complete:r}),new dM(e,this._subscriber)}pipe(e,...n){let r=this;for(const s of[e,...n])r=s(r);return r}tap(e,n,r){const s=typeof e!="object"||e===null?{next:e,error:n,complete:r}:e;return new Vt(i=>this.subscribe({next(o){s.next&&s.next(o),i.next(o)},error(o){s.error&&s.error(o),i.error(o)},complete(){s.complete&&s.complete(),i.complete()},start(o){s.start&&s.start(o)}}))}forEach(e){return new Promise((n,r)=>{if(typeof e!="function"){r(new TypeError(e+" is not a function"));return}function s(){i.unsubscribe(),n(void 0)}const i=this.subscribe({next(o){try{e(o,s)}catch(a){r(a),i.unsubscribe()}},error(o){r(o)},complete(){n(void 0)}})})}map(e){if(typeof e!="function")throw new TypeError(e+" is not a function");const n=so(this);return new n(r=>this.subscribe({next(s){let i=s;try{i=e(s)}catch(o){return r.error(o)}r.next(i)},error(s){r.error(s)},complete(){r.complete()}}))}filter(e){if(typeof e!="function")throw new TypeError(e+" is not a function");const n=so(this);return new n(r=>this.subscribe({next(s){try{if(!e(s))return}catch(i){return r.error(i)}r.next(s)},error(s){r.error(s)},complete(){r.complete()}}))}reduce(e,n){if(typeof e!="function")throw new TypeError(e+" is not a function");const r=so(this),s=arguments.length>1;let i=!1,o=n;return new r(a=>this.subscribe({next(l){const c=!i;if(i=!0,!c||s)try{o=e(o,l)}catch(u){return a.error(u)}else o=l},error(l){a.error(l)},complete(){if(!i&&!s)return a.error(new TypeError("Cannot reduce an empty sequence"));a.next(o),a.complete()}}))}concat(...e){const n=so(this);return new n(r=>{let s,i=0;function o(a){s=a.subscribe({next(l){r.next(l)},error(l){r.error(l)},complete(){i===e.length?(s=void 0,r.complete()):o(n.from(e[i++]))}})}return o(this),()=>{s&&(s.unsubscribe(),s=void 0)}})}flatMap(e){if(typeof e!="function")throw new TypeError(e+" is not a function");const n=so(this);return new n(r=>{const s=[],i=this.subscribe({next(a){let l;if(e)try{l=e(a)}catch(u){return r.error(u)}else l=a;const c=n.from(l).subscribe({next(u){r.next(u)},error(u){r.error(u)},complete(){const u=s.indexOf(c);u>=0&&s.splice(u,1),o()}});s.push(c)},error(a){r.error(a)},complete(){o()}});function o(){i.closed&&s.length===0&&r.complete()}return()=>{s.forEach(a=>a.unsubscribe()),i.unsubscribe()}})}[bd](){return this}static from(e){const n=typeof this=="function"?this:Vt;if(e==null)throw new TypeError(e+" is not an object");const r=ql(e,bd);if(r){const s=r.call(e);if(Object(s)!==s)throw new TypeError(s+" is not an object");return cM(s)&&s.constructor===n?s:new n(i=>s.subscribe(i))}if(ia("iterator")){const s=ql(e,lM);if(s)return new n(i=>{yl(()=>{if(!i.closed){for(const o of s.call(e))if(i.next(o),i.closed)return;i.complete()}})})}if(Array.isArray(e))return new n(s=>{yl(()=>{if(!s.closed){for(const i of e)if(s.next(i),s.closed)return;s.complete()}})});throw new TypeError(e+" is not observable")}static of(...e){const n=typeof this=="function"?this:Vt;return new n(r=>{yl(()=>{if(!r.closed){for(const s of e)if(r.next(s),r.closed)return;r.complete()}})})}static get[xb](){return this}}wb()&&Object.defineProperty(Vt,Symbol("extensions"),{value:{symbol:bd,hostReportError:Di},configurable:!0});function Vs(t){typeof t=="function"?t():t&&typeof t.unsubscribe=="function"&&t.unsubscribe()}var hM=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};function pM(t){return e=>new Vt(n=>{const r=new gc(n),s=e.subscribe({complete(){r.complete()},error(i){r.error(i)},next(i){r.schedule(o=>hM(this,void 0,void 0,function*(){(yield t(i))&&o(i)}))}});return()=>Vs(s)})}function gM(t){return t&&ia("asyncIterator")&&t[Symbol.asyncIterator]}function mM(t){return t&&ia("iterator")&&t[Symbol.iterator]}var yM=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})},vM=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof __values=="function"?__values(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,l){o=t[i](o),s(a,l,o.done,o.value)})}}function s(i,o,a,l){Promise.resolve(l).then(function(c){i({value:c,done:a})},o)}};function bM(t){return e=>new Vt(n=>{const r=new gc(n),s=e.subscribe({complete(){r.complete()},error(i){r.error(i)},next(i){r.schedule(o=>yM(this,void 0,void 0,function*(){var a,l;const c=yield t(i);if(mM(c)||gM(c))try{for(var u=vM(c),f;f=yield u.next(),!f.done;){const p=f.value;o(p)}}catch(p){a={error:p}}finally{try{f&&!f.done&&(l=u.return)&&(yield l.call(u))}finally{if(a)throw a.error}}else c.map(p=>o(p))}))}});return()=>Vs(s)})}function _M(t){return new Vt(e=>{let n=0;const r=setInterval(()=>{e.next(n++)},t);return()=>clearInterval(r)})}var wM=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};function xM(t){return e=>new Vt(n=>{const r=new gc(n),s=e.subscribe({complete(){r.complete()},error(i){r.error(i)},next(i){r.schedule(o=>wM(this,void 0,void 0,function*(){const a=yield t(i);o(a)}))}});return()=>Vs(s)})}function kM(...t){return t.length===0?Vt.from([]):new Vt(e=>{let n=0;const r=t.map(i=>i.subscribe({error(o){e.error(o),s()},next(o){e.next(o)},complete(){++n===t.length&&(e.complete(),s())}})),s=()=>{r.forEach(i=>Vs(i))};return s})}class Sb extends Vt{constructor(){super(e=>(this._observers.add(e),()=>this._observers.delete(e))),this._observers=new Set}next(e){for(const n of this._observers)n.next(e)}error(e){for(const n of this._observers)n.error(e)}complete(){for(const e of this._observers)e.complete()}}function CM(t){const e=new Sb;let n,r=0;return new Vt(s=>{n||(n=t.subscribe(e));const i=e.subscribe(s);return r++,()=>{r--,i.unsubscribe(),r===0&&(Vs(n),n=void 0)}})}var SM=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};function PM(t,e){return n=>new Vt(r=>{let s,i=0;const o=new gc(r),a=n.subscribe({complete(){o.complete()},error(l){o.error(l)},next(l){o.schedule(c=>SM(this,void 0,void 0,function*(){s=yield t(i===0?typeof e>"u"?l:e:s,l,i++),c(s)}))}});return()=>Vs(a)})}const AM=Object.freeze(Object.defineProperty({__proto__:null,Observable:Vt,Subject:Sb,filter:pM,flatMap:bM,interval:_M,map:xM,merge:kM,multicast:CM,scan:PM,unsubscribe:Vs},Symbol.toStringTag,{value:"Module"})),mc=dk(AM);var io={},Gg;function IM(){if(Gg)return io;Gg=1,Object.defineProperty(io,"__esModule",{value:!0}),io.allSettled=void 0;function t(e){return Promise.all(e.map(n=>{const r=o=>({status:"fulfilled",value:o}),s=o=>({status:"rejected",reason:o}),i=Promise.resolve(n);try{return i.then(r,s)}catch(o){return Promise.reject(o)}}))}return io.allSettled=t,io}var Du={},Xg;function EM(){return Xg||(Xg=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.PoolEventType=void 0,(function(e){e.initialized="initialized",e.taskCanceled="taskCanceled",e.taskCompleted="taskCompleted",e.taskFailed="taskFailed",e.taskQueued="taskQueued",e.taskQueueDrained="taskQueueDrained",e.taskStart="taskStart",e.terminated="terminated"})(t.PoolEventType||(t.PoolEventType={}))})(Du)),Du}var oo={},Cn={},Qg;function wf(){return Qg||(Qg=1,Object.defineProperty(Cn,"__esModule",{value:!0}),Cn.$worker=Cn.$transferable=Cn.$terminate=Cn.$events=Cn.$errors=void 0,Cn.$errors=Symbol("thread.errors"),Cn.$events=Symbol("thread.events"),Cn.$terminate=Symbol("thread.terminate"),Cn.$transferable=Symbol("thread.transferable"),Cn.$worker=Symbol("thread.worker")),Cn}var Jg;function Pb(){if(Jg)return oo;Jg=1,Object.defineProperty(oo,"__esModule",{value:!0}),oo.Thread=void 0;const t=wf();function e(n){throw Error(n)}return oo.Thread={errors(n){return n[t.$errors]||e("Error observable not found. Make sure to pass a thread instance as returned by the spawn() promise.")},events(n){return n[t.$events]||e("Events observable not found. Make sure to pass a thread instance as returned by the spawn() promise.")},terminate(n){return n[t.$terminate]()}},oo}var Zg;function OM(){return Zg||(Zg=1,(function(t){var e=Cs&&Cs.__awaiter||function(C,S,A,O){function F(M){return M instanceof A?M:new A(function(D){D(M)})}return new(A||(A=Promise))(function(M,D){function B(Y){try{Z(O.next(Y))}catch(z){D(z)}}function P(Y){try{Z(O.throw(Y))}catch(z){D(z)}}function Z(Y){Y.done?M(Y.value):F(Y.value).then(B,P)}Z((O=O.apply(C,S||[])).next())})},n=Cs&&Cs.__importDefault||function(C){return C&&C.__esModule?C:{default:C}};Object.defineProperty(t,"__esModule",{value:!0}),t.Pool=t.Thread=t.PoolEventType=void 0;const r=n(bf()),s=mc,i=IM(),o=_b(),a=EM();Object.defineProperty(t,"PoolEventType",{enumerable:!0,get:function(){return a.PoolEventType}});const l=Pb();Object.defineProperty(t,"Thread",{enumerable:!0,get:function(){return l.Thread}});let c=1;function u(C){const S=[];for(let A=0;A<C;A++)S.push(A);return S}function f(C){return new Promise(S=>setTimeout(S,C))}function p(C,S){return C.reduce((A,O)=>[...A,...S(O)],[])}function g(C){return C.replace(/\W/g," ").trim().replace(/\s+/g,"-")}function v(C,S){return u(S).map(()=>({init:C(),runningTasks:[]}))}class _{constructor(S,A){this.eventSubject=new s.Subject,this.initErrors=[],this.isClosing=!1,this.nextTaskID=1,this.taskQueue=[];const O=typeof A=="number"?{size:A}:A||{},{size:F=o.defaultPoolSize}=O;this.debug=r.default(`threads:pool:${g(O.name||String(c++))}`),this.options=O,this.workers=v(S,F),this.eventObservable=s.multicast(s.Observable.from(this.eventSubject)),Promise.all(this.workers.map(M=>M.init)).then(()=>this.eventSubject.next({type:a.PoolEventType.initialized,size:this.workers.length}),M=>{this.debug("Error while initializing pool worker:",M),this.eventSubject.error(M),this.initErrors.push(M)})}findIdlingWorker(){const{concurrency:S=1}=this.options;return this.workers.find(A=>A.runningTasks.length<S)}runPoolTask(S,A){return e(this,void 0,void 0,function*(){const O=this.workers.indexOf(S)+1;this.debug(`Running task #${A.id} on worker #${O}...`),this.eventSubject.next({type:a.PoolEventType.taskStart,taskID:A.id,workerID:O});try{const F=yield A.run(yield S.init);this.debug(`Task #${A.id} completed successfully`),this.eventSubject.next({type:a.PoolEventType.taskCompleted,returnValue:F,taskID:A.id,workerID:O})}catch(F){this.debug(`Task #${A.id} failed`),this.eventSubject.next({type:a.PoolEventType.taskFailed,taskID:A.id,error:F,workerID:O})}})}run(S,A){return e(this,void 0,void 0,function*(){const O=e(this,void 0,void 0,function*(){const F=()=>{S.runningTasks=S.runningTasks.filter(M=>M!==O)};yield f(0);try{yield this.runPoolTask(S,A)}finally{F(),this.isClosing||this.scheduleWork()}});S.runningTasks.push(O)})}scheduleWork(){this.debug("Attempt de-queueing a task in order to run it...");const S=this.findIdlingWorker();if(!S)return;const A=this.taskQueue.shift();if(!A){this.debug("Task queue is empty"),this.eventSubject.next({type:a.PoolEventType.taskQueueDrained});return}this.run(S,A)}taskCompletion(S){return new Promise((A,O)=>{const F=this.events().subscribe(M=>{M.type===a.PoolEventType.taskCompleted&&M.taskID===S?(F.unsubscribe(),A(M.returnValue)):M.type===a.PoolEventType.taskFailed&&M.taskID===S?(F.unsubscribe(),O(M.error)):M.type===a.PoolEventType.terminated&&(F.unsubscribe(),O(Error("Pool has been terminated before task was run.")))})})}settled(S=!1){return e(this,void 0,void 0,function*(){const A=()=>p(this.workers,M=>M.runningTasks),O=[],F=this.eventObservable.subscribe(M=>{M.type===a.PoolEventType.taskFailed&&O.push(M.error)});return this.initErrors.length>0?Promise.reject(this.initErrors[0]):S&&this.taskQueue.length===0?(yield i.allSettled(A()),O):(yield new Promise((M,D)=>{const B=this.eventObservable.subscribe({next(P){P.type===a.PoolEventType.taskQueueDrained&&(B.unsubscribe(),M(void 0))},error:D})}),yield i.allSettled(A()),F.unsubscribe(),O)})}completed(S=!1){return e(this,void 0,void 0,function*(){const A=this.settled(S),O=new Promise((M,D)=>{const B=this.eventObservable.subscribe({next(P){P.type===a.PoolEventType.taskQueueDrained?(B.unsubscribe(),M(A)):P.type===a.PoolEventType.taskFailed&&(B.unsubscribe(),D(P.error))},error:D})}),F=yield Promise.race([A,O]);if(F.length>0)throw F[0]})}events(){return this.eventObservable}queue(S){const{maxQueuedJobs:A=1/0}=this.options;if(this.isClosing)throw Error("Cannot schedule pool tasks after terminate() has been called.");if(this.initErrors.length>0)throw this.initErrors[0];const O=this.nextTaskID++,F=this.taskCompletion(O);F.catch(D=>{this.debug(`Task #${O} errored:`,D)});const M={id:O,run:S,cancel:()=>{this.taskQueue.indexOf(M)!==-1&&(this.taskQueue=this.taskQueue.filter(D=>D!==M),this.eventSubject.next({type:a.PoolEventType.taskCanceled,taskID:M.id}))},then:F.then.bind(F)};if(this.taskQueue.length>=A)throw Error(`Maximum number of pool tasks queued. Refusing to queue another one.
This usually happens for one of two reasons: We are either at peak workload right now or some tasks just won't finish, thus blocking the pool.`);return this.debug(`Queueing task #${M.id}...`),this.taskQueue.push(M),this.eventSubject.next({type:a.PoolEventType.taskQueued,taskID:M.id}),this.scheduleWork(),M}terminate(S){return e(this,void 0,void 0,function*(){this.isClosing=!0,S||(yield this.completed(!0)),this.eventSubject.next({type:a.PoolEventType.terminated,remainingQueue:[...this.taskQueue]}),this.eventSubject.complete(),yield Promise.all(this.workers.map(A=>e(this,void 0,void 0,function*(){return l.Thread.terminate(yield A.init)})))})}}_.EventType=a.PoolEventType;function x(C,S){return new _(C,S)}x.EventType=a.PoolEventType,t.Pool=x})(Cs)),Cs}var vr={},ao={},em;function MM(){if(em)return ao;em=1,Object.defineProperty(ao,"__esModule",{value:!0}),ao.createPromiseWithResolver=void 0;const t=()=>{};function e(){let n=!1,r,s=t;return[new Promise(a=>{n?a(r):s=a}),a=>{n=!0,r=a,s(r)}]}return ao.createPromiseWithResolver=e,ao}var Ru={},tm;function TM(){return tm||(tm=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.WorkerEventType=void 0,(function(e){e.internalError="internalError",e.message="message",e.termination="termination"})(t.WorkerEventType||(t.WorkerEventType={}))})(Ru)),Ru}var br={},lo={},nm;function DM(){if(nm)return lo;nm=1,Object.defineProperty(lo,"__esModule",{value:!0}),lo.ObservablePromise=void 0;const t=mc,e=()=>{},n=a=>a,r=a=>Promise.resolve().then(a);function s(a){throw a}function i(a){return a&&typeof a.then=="function"}class o extends t.Observable{constructor(l){super(c=>{const u=this,f=Object.assign(Object.assign({},c),{complete(){c.complete(),u.onCompletion()},error(p){c.error(p),u.onError(p)},next(p){c.next(p),u.onNext(p)}});try{return this.initHasRun=!0,l(f)}catch(p){f.error(p)}}),this.initHasRun=!1,this.fulfillmentCallbacks=[],this.rejectionCallbacks=[],this.firstValueSet=!1,this.state="pending"}onNext(l){this.firstValueSet||(this.firstValue=l,this.firstValueSet=!0)}onError(l){this.state="rejected",this.rejection=l;for(const c of this.rejectionCallbacks)r(()=>c(l))}onCompletion(){this.state="fulfilled";for(const l of this.fulfillmentCallbacks)r(()=>l(this.firstValue))}then(l,c){const u=l||n,f=c||s;let p=!1;return new Promise((g,v)=>{const _=C=>{if(!p){p=!0;try{g(f(C))}catch(S){v(S)}}},x=C=>{try{g(u(C))}catch(S){_(S)}};if(this.initHasRun||this.subscribe({error:_}),this.state==="fulfilled")return g(u(this.firstValue));if(this.state==="rejected")return p=!0,g(f(this.rejection));this.fulfillmentCallbacks.push(x),this.rejectionCallbacks.push(_)})}catch(l){return this.then(void 0,l)}finally(l){const c=l||e;return this.then(u=>(c(),u),()=>c())}static from(l){return i(l)?new o(c=>{const u=p=>{c.next(p),c.complete()},f=p=>{c.error(p)};l.then(u,f)}):super.from(l)}}return lo.ObservablePromise=o,lo}var Ss={},rm;function Ul(){if(rm)return Ss;rm=1,Object.defineProperty(Ss,"__esModule",{value:!0}),Ss.Transfer=Ss.isTransferDescriptor=void 0;const t=wf();function e(s){return!(!s||typeof s!="object")}function n(s){return s&&typeof s=="object"&&s[t.$transferable]}Ss.isTransferDescriptor=n;function r(s,i){if(!i){if(!e(s))throw Error();i=[s]}return{[t.$transferable]:!0,send:s,transferables:i}}return Ss.Transfer=r,Ss}var $u={},sm;function Ab(){return sm||(sm=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.WorkerMessageType=t.MasterMessageType=void 0,(function(e){e.cancel="cancel",e.run="run"})(t.MasterMessageType||(t.MasterMessageType={})),(function(e){e.error="error",e.init="init",e.result="result",e.running="running",e.uncaughtError="uncaughtError"})(t.WorkerMessageType||(t.WorkerMessageType={}))})($u)),$u}var im;function RM(){if(im)return br;im=1;var t=br&&br.__importDefault||function(C){return C&&C.__esModule?C:{default:C}};Object.defineProperty(br,"__esModule",{value:!0}),br.createProxyModule=br.createProxyFunction=void 0;const e=t(bf()),n=mc,r=Xo(),s=DM(),i=Ul(),o=Ab(),a=e.default("threads:master:messages");let l=1;const c=C=>Array.from(new Set(C)),u=C=>C&&C.type===o.WorkerMessageType.error,f=C=>C&&C.type===o.WorkerMessageType.result,p=C=>C&&C.type===o.WorkerMessageType.running;function g(C,S){return new n.Observable(A=>{let O;const F=(M=>{if(a("Message from worker:",M.data),!(!M.data||M.data.uid!==S)){if(p(M.data))O=M.data.resultType;else if(f(M.data))O==="promise"?(typeof M.data.payload<"u"&&A.next(r.deserialize(M.data.payload)),A.complete(),C.removeEventListener("message",F)):(M.data.payload&&A.next(r.deserialize(M.data.payload)),M.data.complete&&(A.complete(),C.removeEventListener("message",F)));else if(u(M.data)){const D=r.deserialize(M.data.error);A.error(D),C.removeEventListener("message",F)}}});return C.addEventListener("message",F),()=>{if(O==="observable"||!O){const M={type:o.MasterMessageType.cancel,uid:S};C.postMessage(M)}C.removeEventListener("message",F)}})}function v(C){if(C.length===0)return{args:[],transferables:[]};const S=[],A=[];for(const O of C)i.isTransferDescriptor(O)?(S.push(r.serialize(O.send)),A.push(...O.transferables)):S.push(r.serialize(O));return{args:S,transferables:A.length===0?A:c(A)}}function _(C,S){return((...A)=>{const O=l++,{args:F,transferables:M}=v(A),D={type:o.MasterMessageType.run,uid:O,method:S,args:F};a("Sending command to run function to worker:",D);try{C.postMessage(D,M)}catch(B){return s.ObservablePromise.from(Promise.reject(B))}return s.ObservablePromise.from(n.multicast(g(C,O)))})}br.createProxyFunction=_;function x(C,S){const A={};for(const O of S)A[O]=_(C,O);return A}return br.createProxyModule=x,br}var om;function $M(){if(om)return vr;om=1;var t={},e=vr&&vr.__awaiter||function(M,D,B,P){function Z(Y){return Y instanceof B?Y:new B(function(z){z(Y)})}return new(B||(B=Promise))(function(Y,z){function fe(Ce){try{Ae(P.next(Ce))}catch(Pe){z(Pe)}}function me(Ce){try{Ae(P.throw(Ce))}catch(Pe){z(Pe)}}function Ae(Ce){Ce.done?Y(Ce.value):Z(Ce.value).then(fe,me)}Ae((P=P.apply(M,D||[])).next())})},n=vr&&vr.__importDefault||function(M){return M&&M.__esModule?M:{default:M}};Object.defineProperty(vr,"__esModule",{value:!0}),vr.spawn=void 0;const r=n(bf()),s=mc,i=Xo(),o=MM(),a=wf(),l=TM(),c=RM(),u=r.default("threads:master:messages"),f=r.default("threads:master:spawn"),p=r.default("threads:master:thread-utils"),g=M=>M&&M.type==="init",v=M=>M&&M.type==="uncaughtError",_=typeof process<"u"&&t.THREADS_WORKER_INIT_TIMEOUT?Number.parseInt(t.THREADS_WORKER_INIT_TIMEOUT,10):1e4;function x(M,D,B){return e(this,void 0,void 0,function*(){let P;const Z=new Promise((z,fe)=>{P=setTimeout(()=>fe(Error(B)),D)}),Y=yield Promise.race([M,Z]);return clearTimeout(P),Y})}function C(M){return new Promise((D,B)=>{const P=(Z=>{u("Message from worker before finishing initialization:",Z.data),g(Z.data)?(M.removeEventListener("message",P),D(Z.data)):v(Z.data)&&(M.removeEventListener("message",P),B(i.deserialize(Z.data.error)))});M.addEventListener("message",P)})}function S(M,D){return new s.Observable(B=>{const P=(Y=>{const z={type:l.WorkerEventType.message,data:Y.data};B.next(z)}),Z=(Y=>{p("Unhandled promise rejection event in thread:",Y);const z={type:l.WorkerEventType.internalError,error:Error(Y.reason)};B.next(z)});M.addEventListener("message",P),M.addEventListener("unhandledrejection",Z),D.then(()=>{const Y={type:l.WorkerEventType.termination};M.removeEventListener("message",P),M.removeEventListener("unhandledrejection",Z),B.next(Y),B.complete()})})}function A(M){const[D,B]=o.createPromiseWithResolver();return{terminate:()=>e(this,void 0,void 0,function*(){p("Terminating worker"),yield M.terminate(),B()}),termination:D}}function O(M,D,B,P){const Z=B.filter(Y=>Y.type===l.WorkerEventType.internalError).map(Y=>Y.error);return Object.assign(M,{[a.$errors]:Z,[a.$events]:B,[a.$terminate]:P,[a.$worker]:D})}function F(M,D){return e(this,void 0,void 0,function*(){f("Initializing new thread");const B=D&&D.timeout?D.timeout:_,Z=(yield x(C(M),B,`Timeout: Did not receive an init message from worker after ${B}ms. Make sure the worker calls expose().`)).exposed,{termination:Y,terminate:z}=A(M),fe=S(M,Y);if(Z.type==="function"){const me=c.createProxyFunction(M);return O(me,M,fe,z)}else if(Z.type==="module"){const me=c.createProxyModule(M,Z.methods);return O(me,M,fe,z)}else{const me=Z.type;throw Error(`Worker init message states unexpected type of expose(): ${me}`)}})}return vr.spawn=F,vr}var am;function FM(){return am||(am=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Worker=t.BlobWorker=t.isWorkerRuntime=t.Thread=t.spawn=t.Pool=void 0;const e=_b();Object.defineProperty(t,"isWorkerRuntime",{enumerable:!0,get:function(){return e.isWorkerRuntime}});var n=OM();Object.defineProperty(t,"Pool",{enumerable:!0,get:function(){return n.Pool}});var r=$M();Object.defineProperty(t,"spawn",{enumerable:!0,get:function(){return r.spawn}});var s=Pb();Object.defineProperty(t,"Thread",{enumerable:!0,get:function(){return s.Thread}}),t.BlobWorker=e.getWorkerImplementation().blob,t.Worker=e.getWorkerImplementation().default})(Eu)),Eu}var Ps={},Fu,lm;function LM(){return lm||(lm=1,Fu=t=>t?typeof Symbol.observable=="symbol"&&typeof t[Symbol.observable]=="function"?t===t[Symbol.observable]():typeof t["@@observable"]=="function"?t===t["@@observable"]():!1:!1),Fu}var nl={},cm;function BM(){if(cm)return nl;cm=1,Object.defineProperty(nl,"__esModule",{value:!0});const t=function(){const s=typeof self<"u"&&typeof Window<"u"&&self instanceof Window;return!!(typeof self<"u"&&self.postMessage&&!s)},e=function(s,i){self.postMessage(s,i)},n=function(s){const i=a=>{s(a.data)},o=()=>{self.removeEventListener("message",i)};return self.addEventListener("message",i),o};return nl.default={isWorkerRuntime:t,postMessageToMaster:e,subscribeToMasterMessages:n},nl}var um;function jM(){return um||(um=1,(function(t){var e=Ps&&Ps.__awaiter||function(P,Z,Y,z){function fe(me){return me instanceof Y?me:new Y(function(Ae){Ae(me)})}return new(Y||(Y=Promise))(function(me,Ae){function Ce(ee){try{te(z.next(ee))}catch(G){Ae(G)}}function Pe(ee){try{te(z.throw(ee))}catch(G){Ae(G)}}function te(ee){ee.done?me(ee.value):fe(ee.value).then(Ce,Pe)}te((z=z.apply(P,Z||[])).next())})},n=Ps&&Ps.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(t,"__esModule",{value:!0}),t.expose=t.isWorkerRuntime=t.Transfer=t.registerSerializer=void 0;const r=n(LM()),s=Xo(),i=Ul(),o=Ab(),a=n(BM());var l=Xo();Object.defineProperty(t,"registerSerializer",{enumerable:!0,get:function(){return l.registerSerializer}});var c=Ul();Object.defineProperty(t,"Transfer",{enumerable:!0,get:function(){return c.Transfer}}),t.isWorkerRuntime=a.default.isWorkerRuntime;let u=!1;const f=new Map,p=P=>P&&P.type===o.MasterMessageType.cancel,g=P=>P&&P.type===o.MasterMessageType.run,v=P=>r.default(P)||_(P);function _(P){return P&&typeof P=="object"&&typeof P.subscribe=="function"}function x(P){return i.isTransferDescriptor(P)?{payload:P.send,transferables:P.transferables}:{payload:P,transferables:void 0}}function C(){const P={type:o.WorkerMessageType.init,exposed:{type:"function"}};a.default.postMessageToMaster(P)}function S(P){const Z={type:o.WorkerMessageType.init,exposed:{type:"module",methods:P}};a.default.postMessageToMaster(Z)}function A(P,Z){const{payload:Y,transferables:z}=x(Z),fe={type:o.WorkerMessageType.error,uid:P,error:s.serialize(Y)};a.default.postMessageToMaster(fe,z)}function O(P,Z,Y){const{payload:z,transferables:fe}=x(Y),me={type:o.WorkerMessageType.result,uid:P,complete:Z?!0:void 0,payload:z};a.default.postMessageToMaster(me,fe)}function F(P,Z){const Y={type:o.WorkerMessageType.running,uid:P,resultType:Z};a.default.postMessageToMaster(Y)}function M(P){try{const Z={type:o.WorkerMessageType.uncaughtError,error:s.serialize(P)};a.default.postMessageToMaster(Z)}catch(Z){console.error(`Not reporting uncaught error back to master thread as it occured while reporting an uncaught error already.
Latest error:`,Z,`
Original error:`,P)}}function D(P,Z,Y){return e(this,void 0,void 0,function*(){let z;try{z=Z(...Y)}catch(me){return A(P,me)}const fe=v(z)?"observable":"promise";if(F(P,fe),v(z)){const me=z.subscribe(Ae=>O(P,!1,s.serialize(Ae)),Ae=>{A(P,s.serialize(Ae)),f.delete(P)},()=>{O(P,!0),f.delete(P)});f.set(P,me)}else try{const me=yield z;O(P,!0,s.serialize(me))}catch(me){A(P,s.serialize(me))}})}function B(P){if(!a.default.isWorkerRuntime())throw Error("expose() called in the master thread.");if(u)throw Error("expose() called more than once. This is not possible. Pass an object to expose() if you want to expose multiple functions.");if(u=!0,typeof P=="function")a.default.subscribeToMasterMessages(Z=>{g(Z)&&!Z.method&&D(Z.uid,P,Z.args.map(s.deserialize))}),C();else if(typeof P=="object"&&P){a.default.subscribeToMasterMessages(Y=>{g(Y)&&Y.method&&D(Y.uid,P[Y.method],Y.args.map(s.deserialize))});const Z=Object.keys(P).filter(Y=>typeof P[Y]=="function");S(Z)}else throw Error(`Invalid argument passed to expose(). Expected a function or an object, got: ${P}`);a.default.subscribeToMasterMessages(Z=>{if(p(Z)){const Y=Z.uid,z=f.get(Y);z&&(z.unsubscribe(),f.delete(Y))}})}t.expose=B,typeof self<"u"&&typeof self.addEventListener=="function"&&a.default.isWorkerRuntime()&&(self.addEventListener("error",P=>{setTimeout(()=>M(P.error||P),250)}),self.addEventListener("unhandledrejection",P=>{const Z=P.reason;Z&&typeof Z.message=="string"&&setTimeout(()=>M(Z),250)})),typeof process<"u"&&typeof process.on=="function"&&a.default.isWorkerRuntime()&&(process.on("uncaughtException",P=>{setTimeout(()=>M(P),250)}),process.on("unhandledRejection",P=>{P&&typeof P.message=="string"&&setTimeout(()=>M(P),250)}))})(Ps)),Ps}var dm;function NM(){return dm||(dm=1,(function(t){var e=ws&&ws.__createBinding||(Object.create?(function(a,l,c,u){u===void 0&&(u=c),Object.defineProperty(a,u,{enumerable:!0,get:function(){return l[c]}})}):(function(a,l,c,u){u===void 0&&(u=c),a[u]=l[c]})),n=ws&&ws.__exportStar||function(a,l){for(var c in a)c!=="default"&&!Object.prototype.hasOwnProperty.call(l,c)&&e(l,a,c)};Object.defineProperty(t,"__esModule",{value:!0}),t.Transfer=t.DefaultSerializer=t.expose=t.registerSerializer=void 0;var r=Xo();Object.defineProperty(t,"registerSerializer",{enumerable:!0,get:function(){return r.registerSerializer}}),n(FM(),t);var s=jM();Object.defineProperty(t,"expose",{enumerable:!0,get:function(){return s.expose}});var i=bb();Object.defineProperty(t,"DefaultSerializer",{enumerable:!0,get:function(){return i.DefaultSerializer}});var o=Ul();Object.defineProperty(t,"Transfer",{enumerable:!0,get:function(){return o.Transfer}})})(ws)),ws}var zM=NM();const as=_v(zM);as.registerSerializer;const Ib=as.spawn;as.BlobWorker;as.DefaultSerializer;as.Pool;const Eb=as.Thread,qM=as.Transfer;as.Worker;function UM(t){return new Worker("/mtg-pwa/assets/MTGJSONUploadWorker-BitQZMlZ.js",{name:t?.name})}var Sn=Uint8Array,pi=Uint16Array,WM=Int32Array,Ob=new Sn([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Mb=new Sn([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),VM=new Sn([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Tb=function(t,e){for(var n=new pi(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var s=new WM(n[30]),r=1;r<30;++r)for(var i=n[r];i<n[r+1];++i)s[i]=i-n[r]<<5|r;return{b:n,r:s}},Db=Tb(Ob,2),Rb=Db.b,HM=Db.r;Rb[28]=258,HM[258]=28;var KM=Tb(Mb,0),YM=KM.b,wd=new pi(32768);for(var Ct=0;Ct<32768;++Ct){var zr=(Ct&43690)>>1|(Ct&21845)<<1;zr=(zr&52428)>>2|(zr&13107)<<2,zr=(zr&61680)>>4|(zr&3855)<<4,wd[Ct]=((zr&65280)>>8|(zr&255)<<8)>>1}var Do=(function(t,e,n){for(var r=t.length,s=0,i=new pi(e);s<r;++s)t[s]&&++i[t[s]-1];var o=new pi(e);for(s=1;s<e;++s)o[s]=o[s-1]+i[s-1]<<1;var a;if(n){a=new pi(1<<e);var l=15-e;for(s=0;s<r;++s)if(t[s])for(var c=s<<4|t[s],u=e-t[s],f=o[t[s]-1]++<<u,p=f|(1<<u)-1;f<=p;++f)a[wd[f]>>l]=c}else for(a=new pi(r),s=0;s<r;++s)t[s]&&(a[s]=wd[o[t[s]-1]++]>>15-t[s]);return a}),oa=new Sn(288);for(var Ct=0;Ct<144;++Ct)oa[Ct]=8;for(var Ct=144;Ct<256;++Ct)oa[Ct]=9;for(var Ct=256;Ct<280;++Ct)oa[Ct]=7;for(var Ct=280;Ct<288;++Ct)oa[Ct]=8;var $b=new Sn(32);for(var Ct=0;Ct<32;++Ct)$b[Ct]=5;var GM=Do(oa,9,1),XM=Do($b,5,1),Lu=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},qn=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},Bu=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},QM=function(t){return(t+7)/8|0},Fb=function(t,e,n){return(e==null||e<0)&&(e=0),(n==null||n>t.length)&&(n=t.length),new Sn(t.subarray(e,n))},JM=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],$n=function(t,e,n){var r=new Error(e||JM[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,$n),!n)throw r;return r},ZM=function(t,e,n,r){var s=t.length,i=0;if(!s||e.f&&!e.l)return n||new Sn(0);var o=!n,a=o||e.i!=2,l=e.i;o&&(n=new Sn(s*3));var c=function(nt){var E=n.length;if(nt>E){var $=new Sn(Math.max(E*2,nt));$.set(n),n=$}},u=e.f||0,f=e.p||0,p=e.b||0,g=e.l,v=e.d,_=e.m,x=e.n,C=s*8;do{if(!g){u=qn(t,f,1);var S=qn(t,f+1,3);if(f+=3,S)if(S==1)g=GM,v=XM,_=9,x=5;else if(S==2){var M=qn(t,f,31)+257,D=qn(t,f+10,15)+4,B=M+qn(t,f+5,31)+1;f+=14;for(var P=new Sn(B),Z=new Sn(19),Y=0;Y<D;++Y)Z[VM[Y]]=qn(t,f+Y*3,7);f+=D*3;for(var z=Lu(Z),fe=(1<<z)-1,me=Do(Z,z,1),Y=0;Y<B;){var Ae=me[qn(t,f,fe)];f+=Ae&15;var A=Ae>>4;if(A<16)P[Y++]=A;else{var Ce=0,Pe=0;for(A==16?(Pe=3+qn(t,f,3),f+=2,Ce=P[Y-1]):A==17?(Pe=3+qn(t,f,7),f+=3):A==18&&(Pe=11+qn(t,f,127),f+=7);Pe--;)P[Y++]=Ce}}var te=P.subarray(0,M),ee=P.subarray(M);_=Lu(te),x=Lu(ee),g=Do(te,_,1),v=Do(ee,x,1)}else $n(1);else{var A=QM(f)+4,O=t[A-4]|t[A-3]<<8,F=A+O;if(F>s){l&&$n(0);break}a&&c(p+O),n.set(t.subarray(A,F),p),e.b=p+=O,e.p=f=F*8,e.f=u;continue}if(f>C){l&&$n(0);break}}a&&c(p+131072);for(var G=(1<<_)-1,Le=(1<<x)-1,we=f;;we=f){var Ce=g[Bu(t,f)&G],We=Ce>>4;if(f+=Ce&15,f>C){l&&$n(0);break}if(Ce||$n(2),We<256)n[p++]=We;else if(We==256){we=f,g=null;break}else{var wt=We-254;if(We>264){var Y=We-257,gt=Ob[Y];wt=qn(t,f,(1<<gt)-1)+Rb[Y],f+=gt}var st=v[Bu(t,f)&Le],ae=st>>4;st||$n(3),f+=st&15;var ee=YM[ae];if(ae>3){var gt=Mb[ae];ee+=Bu(t,f)&(1<<gt)-1,f+=gt}if(f>C){l&&$n(0);break}a&&c(p+131072);var Me=p+wt;if(p<ee){var re=i-ee,Fe=Math.min(ee,Me);for(re+p<0&&$n(3);p<Fe;++p)n[p]=r[re+p]}for(;p<Me;++p)n[p]=n[p-ee]}}e.l=g,e.p=we,e.b=p,e.f=u,g&&(u=1,e.m=_,e.d=v,e.n=x)}while(!u);return p!=n.length&&o?Fb(n,0,p):n.subarray(0,p)},eT=new Sn(0),tT=function(t){(t[0]!=31||t[1]!=139||t[2]!=8)&&$n(6,"invalid gzip data");var e=t[3],n=10;e&4&&(n+=(t[10]|t[11]<<8)+2);for(var r=(e>>3&1)+(e>>4&1);r>0;r-=!t[n++]);return n+(e&2)},nT=function(t){var e=t.length;return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0};function fm(t,e){var n=tT(t);return n+8>t.length&&$n(6,"invalid gzip data"),ZM(t.subarray(n,-8),{i:2},new Sn(nT(t)),e)}var xd=typeof TextDecoder<"u"&&new TextDecoder,rT=0;try{xd.decode(eT,{stream:!0}),rT=1}catch{}var sT=function(t){for(var e="",n=0;;){var r=t[n++],s=(r>127)+(r>223)+(r>239);if(n+s>t.length)return{s:e,r:Fb(t,n-1)};s?s==3?(r=((r&15)<<18|(t[n++]&63)<<12|(t[n++]&63)<<6|t[n++]&63)-65536,e+=String.fromCharCode(55296|r>>10,56320|r&1023)):s&1?e+=String.fromCharCode((r&31)<<6|t[n++]&63):e+=String.fromCharCode((r&15)<<12|(t[n++]&63)<<6|t[n++]&63):e+=String.fromCharCode(r)}};function hm(t,e){var n;if(xd)return xd.decode(t);var r=sT(t),s=r.s,n=r.r;return n.length&&$n(8),s}const ju="mtgjson.idMap.v1",iT="https://mtgjson.com/api/v5/AllIdentifiers.json.gz",oT="https://mtgjson.com/api/v5/AllPrices.json.gz";function pm(t){const e={},n=t?.data??t,r=(s,i)=>{if(!s||!i)return;const o=i.identifiers??i,a=o?.scryfallId,l=o?.scryfallOracleId;a&&(e[a]=s),l&&(e[l]=s)};if(Array.isArray(n))for(const s of n){const i=s?.uuid??s?.cardId??s?.id;r(i,s)}else if(n&&typeof n=="object")for(const[s,i]of Object.entries(n))r(s,i);else throw new Error("[MTGJSONUploadService] Unrecognized AllIdentifiers format (no array/object).");if(Object.keys(e).length===0){const s=n&&typeof n=="object"?Object.keys(n).slice(0,5):[];throw console.warn("[MTGJSONUploadService] AllIdentifiers parsed but no entries found. Sample keys:",s),new Error("[MTGJSONUploadService] Parsed AllIdentifiers but produced an empty id map.")}return e}async function aT(t){try{const p=await Bs.get(ju);if(p&&typeof p=="object")return console.log("[MTGJSONUploadService] Using cached AllIdentifiers id map."),t({type:"downloading-all-identifiers",message:"Using cached AllIdentifiers mapping...",percentage:50}),t({type:"processing-all-identifiers",message:"Processing cached AllIdentifiers mapping...",percentage:75}),t({type:"processing-all-identifiers",message:"AllIdentifiers mapping processed",percentage:100}),p}catch(p){console.warn("[MTGJSONUploadService] Could not read cached id map:",p)}t({type:"downloading-all-identifiers",message:"Downloading AllIdentifiers.json.gz...",percentage:0}),console.log("[MTGJSONUploadService] Downloading AllIdentifiers.json.gz...");const e=await fetch(iT,{mode:"cors"});if(!e.ok)throw new Error(`[MTGJSONUploadService] Failed to fetch AllIdentifiers.json.gz: ${e.status} ${e.statusText}`);const n=e.headers.get("content-length"),r=parseInt(n||"0",10);let s=0;const i=e.body?.getReader(),o=[];if(i&&r)for(;;){const{done:p,value:g}=await i.read();if(p)break;o.push(g),s+=g.length;const v=Math.round(s/r*50);t({type:"downloading-all-identifiers",message:`Downloading AllIdentifiers.json.gz... (${Wl(s)} / ${Wl(r)})`,percentage:v})}else{const p=new Uint8Array(await e.arrayBuffer());t({type:"downloading-all-identifiers",message:"Downloaded AllIdentifiers.json.gz",percentage:50}),t({type:"processing-all-identifiers",message:"Processing AllIdentifiers mapping...",percentage:60});const g=hm(fm(p)),v=JSON.parse(g),_=pm(v);t({type:"processing-all-identifiers",message:"Caching AllIdentifiers mapping...",percentage:80});try{await Bs.set(ju,_)}catch(x){console.warn("[MTGJSONUploadService] Could not cache id map:",x)}return t({type:"processing-all-identifiers",message:"AllIdentifiers mapping processed",percentage:100}),console.log(`[MTGJSONUploadService] Built AllIdentifiers id map with ${Object.keys(_).length} entries.`),_}const a=new Uint8Array(s);let l=0;for(const p of o)a.set(p,l),l+=p.length;t({type:"downloading-all-identifiers",message:"Downloaded AllIdentifiers.json.gz",percentage:50});const c=hm(fm(a)),u=JSON.parse(c);t({type:"processing-all-identifiers",message:"Processing AllIdentifiers mapping...",percentage:60});const f=pm(u);t({type:"processing-all-identifiers",message:"Caching AllIdentifiers mapping...",percentage:80});try{await Bs.set(ju,f)}catch(p){console.warn("[MTGJSONUploadService] Could not cache id map:",p)}return t({type:"processing-all-identifiers",message:"AllIdentifiers mapping processed",percentage:100}),console.log(`[MTGJSONUploadService] Built AllIdentifiers id map with ${Object.keys(f).length} entries.`),f}class lT{static async upload(e,n){console.log(`[MTGJSONUploadService] Starting upload for file: ${e==="auto"?"AUTOMATIC DOWNLOAD":e.name}`);let r=null;try{console.log("[MTGJSONUploadService] Spawning worker..."),r=await Ib(new UM,{timeout:3e5}),console.log("[MTGJSONUploadService] Worker spawned."),console.log("[MTGJSONUploadService] Fetching wanted cards from DB...");const s=await Bn.getAll();console.log(`[MTGJSONUploadService] Found ${s.length} cards.`);const i=await aT(n),o=Array.from(new Set(s.map(c=>i[c.id]||(c.oracleId?i[c.oracleId]:void 0)).filter(Boolean)));console.log(`[MTGJSONUploadService] Resolved ${o.length} MTGJSON UUIDs from ${s.length} cards.`),o.length===0&&console.warn("[MTGJSONUploadService] No MTGJSON UUIDs resolved from local cards. Check that your cards contain Scryfall ids/oracleIds and that AllIdentifiers was parsed correctly.");const a={};for(const c of s){const u=i[c.id]||(c.oracleId?i[c.oracleId]:void 0);u&&(a[u]=c.id)}let l;if(e==="auto"){console.log("[MTGJSONUploadService] Downloading AllPrices.json.gz automatically..."),n({type:"downloading-all-prices",message:"Downloading AllPrices.json.gz...",percentage:0});const c=await fetch(oT,{mode:"cors"});if(!c.ok)throw new Error(`[MTGJSONUploadService] Failed to fetch AllPrices.json.gz: ${c.status} ${c.statusText}`);const u=c.headers.get("content-length"),f=parseInt(u||"0",10);let p=0;const g=c.body?.getReader(),v=[];if(g&&f)for(;;){const{done:S,value:A}=await g.read();if(S)break;v.push(A),p+=A.length;const O=Math.round(p/f*100);n({type:"downloading-all-prices",message:`Downloading AllPrices.json.gz... (${Wl(p)} / ${Wl(f)})`,percentage:O})}else{const S=await c.arrayBuffer(),A=new Blob([S],{type:"application/gzip"});l=new File([A],"AllPrices.json.gz",{type:"application/gzip"})}const _=new Uint8Array(p);let x=0;for(const S of v)_.set(S,x),x+=S.length;const C=new Blob([_],{type:"application/gzip"});l=new File([C],"AllPrices.json.gz",{type:"application/gzip"}),console.log(`[MTGJSONUploadService] Downloaded AllPrices.json.gz (${l.size} bytes)`)}else l=e;console.log("[MTGJSONUploadService] Calling worker.upload()..."),n({type:"importing-price-points",message:"Importing price points...",percentage:0});try{const c=new MessageChannel;await r.setProgressPort(qM(c.port2,[c.port2])),c.port1.onmessage=f=>{const p=f.data;n({type:"importing-price-points",message:`Processing ${p.processedCards}/${p.totalWanted} cards — ${p.writtenPricePoints.toLocaleString()} price points`,percentage:p.percentage})};const u=await r.upload(l,o,a);console.log(`[MTGJSONUploadService] Worker finished processing. ${u.processed} cards processed, ${u.written} price points written.`),n({type:"completed",message:`Import finished! ${u.processed} cards, ${u.written.toLocaleString()} price points.`,percentage:100,processedCards:u.processed,writtenPricePoints:u.written})}catch(c){throw console.error("[MTGJSONUploadService] Worker returned an error:",c),c}}catch(s){throw console.error("[MTGJSONUploadService] An error occurred in the upload service:",s),s}finally{if(r){console.log("[MTGJSONUploadService] Terminating worker.");try{await Eb.terminate(r)}catch(s){console.error("[MTGJSONUploadService] Error terminating worker:",s)}}}}}function Wl(t){if(t===0)return"0 Bytes";const e=1024,n=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(t)/Math.log(e));return parseFloat((t/Math.pow(e,r)).toFixed(2))+" "+n[r]}const cT={class:"mtgjson-wizard"},uT={class:"card"},dT={class:"card-body"},fT={key:0,class:"progress-section"},hT={class:"phase-section mb-3"},pT={class:"progress"},gT=["aria-valuenow"],mT={class:"phase-message mt-1"},yT={key:0,class:"phase-section mb-3"},vT={class:"progress"},bT=["aria-valuenow"],_T={class:"phase-message mt-1"},wT={key:1,class:"phase-section mb-3"},xT={class:"progress"},kT=["aria-valuenow"],CT={class:"phase-message mt-1"},ST={key:1,class:"alert alert-success"},PT={key:2,class:"error-messages"},AT={key:0,class:"mt-2"},IT={class:"wizard-navigation pt-3"},ET=["disabled"],OT=Ze({__name:"MtgjsonImportWizard",setup(t){const e=pe(!1),n=pe(!1),r=pe(""),s=pe(50),i=pe("Using cached AllIdentifiers mapping..."),o=pe(0),a=pe(""),l=pe(0),c=pe(""),u=pe(0),f=pe([]),p=async()=>{if(!e.value){e.value=!0,n.value=!1,f.value=[],r.value="",s.value=0,i.value="Downloading AllIdentifiers.json.gz...",o.value=0,a.value="",l.value=0,c.value="",u.value=0;try{await lT.upload("auto",g=>{switch(r.value=g.type,g.type){case"downloading-all-identifiers":s.value=g.percentage||0,i.value=g.message;break;case"processing-all-identifiers":s.value=g.percentage||0,i.value=g.message;break;case"downloading-all-prices":o.value=g.percentage||0,a.value=g.message;break;case"importing-price-points":l.value=g.percentage||0,c.value=g.message;break;case"completed":l.value=100,c.value=g.message,u.value=g.writtenPricePoints??0,e.value=!1,n.value=!0;break}})}catch(g){f.value.push("Failed to import MTGJSON data: "+g.message),e.value=!1}}};return(g,v)=>(U(),J("div",cT,[v[5]||(v[5]=w("h1",null,"MTGJSON Price Import",-1)),v[6]||(v[6]=w("p",null,"Import historical price data from MTGJSON. This will populate the price history for your cards for the last 90 days.",-1)),w("div",uT,[w("div",dT,[v[4]||(v[4]=w("div",{class:"info-section mb-4"},[w("p",null,[w("strong",null,'What happens when you click "Import Prices":')]),w("ol",null,[w("li",null,"Download AllIdentifiers.json.gz (~160MB compressed)"),w("li",null,"Download AllPrices.json.gz (~130MB compressed)"),w("li",null,"Process the files to extract price data for your cards"),w("li",null,"Store the price history in your local database")])],-1)),e.value?(U(),J("div",fT,[w("div",hT,[v[0]||(v[0]=w("div",{class:"phase-title mb-1"},"Downloading AllIdentifiers.json.gz",-1)),w("div",pT,[w("div",{class:"progress-bar",role:"progressbar",style:An({width:s.value+"%"}),"aria-valuenow":s.value,"aria-valuemin":"0","aria-valuemax":"100"},oe(s.value)+"%",13,gT)]),w("div",mT,oe(i.value),1)]),r.value==="downloading-all-prices"||r.value==="importing-price-points"||r.value==="completed"?(U(),J("div",yT,[v[1]||(v[1]=w("div",{class:"phase-title mb-1"},"Downloading AllPrices.json.gz",-1)),w("div",vT,[w("div",{class:"progress-bar",role:"progressbar",style:An({width:o.value+"%"}),"aria-valuenow":o.value,"aria-valuemin":"0","aria-valuemax":"100"},oe(o.value)+"%",13,bT)]),w("div",_T,oe(a.value),1)])):ke("",!0),r.value==="importing-price-points"||r.value==="completed"?(U(),J("div",wT,[v[2]||(v[2]=w("div",{class:"phase-title mb-1"},"Importing Price Points",-1)),w("div",xT,[w("div",{class:"progress-bar",role:"progressbar",style:An({width:l.value+"%"}),"aria-valuenow":l.value,"aria-valuemin":"0","aria-valuemax":"100"},oe(l.value)+"%",13,kT)]),w("div",CT,oe(c.value),1)])):ke("",!0)])):ke("",!0),n.value?(U(),J("div",ST," Import finished! Processed "+oe(u.value)+" price points. ",1)):ke("",!0),f.value.length>0?(U(),J("div",PT,[(U(!0),J(et,null,Ft(f.value,_=>(U(),J("div",{key:_,class:"error-message"},[bt(oe(_)+" ",1),_.includes("Out of Memory")||_.includes("too large")?(U(),J("div",AT,[...v[3]||(v[3]=[w("strong",null,"Solution:",-1),bt(' The MTGJSON file is too large to process in your browser. Please download the smaller "AllPricesToday.json" file from MTGJSON instead, which contains only the latest prices and is much smaller. ',-1)])])):ke("",!0)]))),128))])):ke("",!0),w("div",IT,[w("button",{onClick:p,class:"btn btn-glass-primary",disabled:e.value},oe(e.value?"Importing...":"Import Prices"),9,ET)])])])]))}}),MT=gn(OT,[["__scopeId","data-v-ff365479"]]);function TT(t){return new Worker("/mtg-pwa/assets/PriceGuideUploadWorker-DoZ4m9uh.js",{name:t?.name})}class DT{static async upload(e,n){const r=await Ib(new TT,{timeout:3e5});try{const s=await r.upload(e);n(s)}finally{await Eb.terminate(r)}}}const RT={class:"price-guide-wizard"},$T={class:"card"},FT={class:"card-body"},LT={class:"file-upload-section"},BT={class:"mb-3"},jT={key:0,class:"files-info"},NT={class:"file-list"},zT={class:"file-item"},qT={class:"file-name"},UT={class:"file-size"},WT={key:0,class:"progress"},VT=["aria-valuenow"],HT={key:1,class:"alert alert-success"},KT={key:2,class:"error-messages"},YT={class:"wizard-navigation pt-3"},GT=["disabled"],XT=Ze({__name:"PriceGuideUploadWizard",setup(t){const e=pe(null),n=pe(!1),r=pe(!1),s=pe(0),i=pe(0),o=pe([]),a=u=>{const p=u.target.files;!p||p.length===0||(e.value=p[0],r.value=!1,i.value=0,o.value=[])},l=async()=>{if(!(!e.value||n.value)){n.value=!0,r.value=!1,o.value=[],s.value=0;try{await DT.upload(e.value,u=>{i.value=u,s.value=100,n.value=!1,r.value=!0})}catch(u){o.value.push("Failed to import Price Guide data: "+u.message),n.value=!1}}},c=u=>{if(u===0)return"0 Bytes";const f=1024,p=["Bytes","KB","MB","GB"],g=Math.floor(Math.log(u)/Math.log(f));return parseFloat((u/Math.pow(f,g)).toFixed(2))+" "+p[g]};return(u,f)=>(U(),J("div",RT,[f[2]||(f[2]=w("h1",null,"Cardmarket Price Guide Import",-1)),f[3]||(f[3]=w("p",null,"Import historical price data from Cardmarket Price Guide.",-1)),f[4]||(f[4]=w("div",{class:"alert alert-info"},[w("h3",{class:"alert-heading"},"Where to get the file"),w("p",null,"You can download the Price Guide CSV from your Cardmarket account.")],-1)),w("div",$T,[w("div",FT,[w("div",LT,[w("div",BT,[f[0]||(f[0]=w("label",{for:"price-guide-file",class:"form-label"}," Choose Price Guide CSV File ",-1)),w("input",{id:"price-guide-file",type:"file",accept:".csv",onChange:a,class:"form-control"},null,32)]),e.value?(U(),J("div",jT,[f[1]||(f[1]=w("h3",null,"Uploaded File",-1)),w("ul",NT,[w("li",zT,[w("span",qT,oe(e.value.name),1),w("span",UT,"- "+oe(c(e.value.size)),1)])])])):ke("",!0)]),n.value?(U(),J("div",WT,[w("div",{class:"progress-bar",role:"progressbar",style:An({width:s.value+"%"}),"aria-valuenow":s.value,"aria-valuemin":"0","aria-valuemax":"100"},oe(s.value)+"%",13,VT)])):ke("",!0),r.value?(U(),J("div",HT," Import finished! Processed "+oe(i.value)+" price points. ",1)):ke("",!0),o.value.length>0?(U(),J("div",KT,[(U(!0),J(et,null,Ft(o.value,p=>(U(),J("div",{key:p,class:"error-message"},oe(p),1))),128))])):ke("",!0),w("div",YT,[w("button",{onClick:l,class:"btn btn-glass-primary",disabled:!e.value||n.value},oe(n.value?"Importing...":"Import Prices"),9,GT)])])])]))}}),QT=gn(XT,[["__scopeId","data-v-d170427f"]]);class JT{static normalizeFingerprint(e){return{name:e.name.trim().toLowerCase(),setCode:e.setCode.trim().toLowerCase(),collectorNumber:e.collectorNumber.trim().toLowerCase(),finish:e.finish.trim().toLowerCase(),language:e.language.trim().toLowerCase()}}static compareFingerprints(e,n){const r=this.normalizeFingerprint(e),s=this.normalizeFingerprint(n);return r.name===s.name&&r.setCode===s.setCode&&r.collectorNumber===s.collectorNumber&&r.finish===s.finish&&r.language===s.language}static async resolveFingerprint(e){try{const n=await Ln.hydrateCard({name:e.name,setCode:e.setCode,collectorNumber:e.collectorNumber});return n&&n.id?n.id:null}catch(n){return console.error("Error resolving fingerprint:",n),null}}}class ZT{static async importDeckFromText(e,n){let r,s;try{r=_i();const i=n.split(`
`).map(o=>o.trim()).filter(o=>o);s=ml(),r.addImport({id:s,type:"deck",name:e,status:"pending",progress:0,totalItems:i.length,processedItems:0})}catch(i){console.warn("Could not initialize import status store:",i),r=null,s=null}try{const i=new Date,o=`deck-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,a={id:o,platform:"csv",name:e,commander:"",url:"",importedAt:i,createdAt:i,updatedAt:i};await ue.decks.add(a);const l=n.split(`
`).map(u=>u.trim()).filter(u=>u);if(console.log("Processing deck import:",{deckName:e,lineCount:l.length}),r&&s)try{r.updateImport(s,{status:"processing"})}catch(u){console.warn("Could not update import status:",u)}for(let u=0;u<l.length;u++){const p=l[u].trim();if(!p)continue;if(console.log("Processing line:",p),r&&s)try{r.updateImport(s,{processedItems:u+1,progress:Math.round((u+1)/l.length*100)})}catch(v){console.warn("Could not update import progress:",v)}const g=p.match(/^(\d+)\s+(.+?)\s*\(([^)]+)\)\s*(\d+)(?:\s*\*F\*\s*)?$/i);if(g){const[,v,_,x,C]=g,S=parseInt(v)||1;if(console.log("Parsed card:",{quantity:S,cardName:_,setCode:x,collectorNumber:C}),_&&x&&C){const A={name:_.trim(),setCode:x.trim(),collectorNumber:C.trim(),finish:"nonfoil",language:"en"},O=await JT.resolveFingerprint(A);if(console.log("Resolved card ID:",O),O){const P=new Date;if(!await Bn.getById(O)){const fe=await Ln.hydrateCard({scryfall_id:O,name:_.trim(),setCode:x.trim(),collectorNumber:C.trim()}),me=await Ln.getImageUrlById(O),Ae={id:O,oracleId:fe?.oracle_id||"",name:_.trim(),set:fe?.set_name||x.trim(),setCode:fe?.set||x.trim(),number:fe?.collector_number||C.trim(),lang:fe?.lang||"en",finish:"nonfoil",layout:me?.layout||"normal",imageUrl:me?.front||"",imageUrlBack:me?.back||"",createdAt:P,updatedAt:P};await Bn.add(Ae),console.log("Added new card to database:",Ae);try{const Ce=await Ln.getPriceById(O);if(Ce){const Pe=P.toISOString().split("T")[0],ee={id:`${O}:scryfall:${Pe}`,cardId:O,provider:"scryfall",finish:"nonfoil",date:P.toISOString().split("T")[0],currency:"EUR",priceCent:Ce.getCents(),asOf:P,createdAt:P};await ue.price_points.put(ee)}}catch(Ce){console.error(`Error fetching price for new card ${O}:`,Ce)}}const z=(await Pt.getByCardId(O)).reduce((fe,me)=>{if(!me.disposedAt||me.disposedQuantity&&me.disposedQuantity<me.quantity){const Ae=me.disposedQuantity?me.quantity-me.disposedQuantity:me.quantity;return fe+Ae}return fe},0);if(z<S){const fe=S-z,Ae={id:`lot-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,cardId:O,quantity:fe,unitCost:0,condition:"unknown",language:"en",foil:!1,finish:"nonfoil",source:"deck_import",currency:"EUR",purchasedAt:P,createdAt:P,updatedAt:P};await Pt.add(Ae),console.log("Added new lot for deck import:",Ae)}}let F;const M=await Pt.getByCardId(O||"");if(M.length>0){for(const P of M)if((P.disposedQuantity?P.quantity-P.disposedQuantity:P.quantity)>=S&&!P.disposedAt){F=P.id;break}!F&&M.length>0&&(F=M[0].id)}const D=new Date,B={id:`deckcard-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,deckId:o||"unknown-deck",cardId:O||"unknown-card",lotId:F,quantity:typeof S=="number"&&S>0?S:1,role:"main",addedAt:D,createdAt:D};await ue.deck_cards.add(B),console.log("Added deck card:",B)}}else console.log("Line did not match expected format:",p)}const c=await ue.deck_cards.where("deckId").equals(o).count();if(console.log("Total cards imported:",c),r&&s)try{r.completeImport(s)}catch(u){console.warn("Could not complete import status:",u)}}catch(i){if(console.error("Error importing deck from text:",i),r&&s)try{r.completeImport(s,i.message)}catch(o){console.warn("Could not update import status to failed:",o)}throw i}}static async calculateDeckCoverage(e){try{const n=await ue.deck_cards.where("deckId").equals(e).toArray();let r=0,s=0;for(const o of n){r+=o.quantity;const l=(await Pt.getActiveLotsByCardId(o.cardId)).reduce((c,u)=>c+u.quantity,0);s+=Math.min(o.quantity,l)}const i=r>0?Math.round(s/r*100):100;return{totalCards:r,ownedCards:s,coveragePercentage:i}}catch(n){throw console.error("Error calculating deck coverage:",n),n}}}const eD={class:"deck-import"},tD={class:"import-section"},nD={class:"mb-3"},rD={class:"mb-3"},sD=["disabled"],iD={key:0,class:"status-message error"},oD=Ze({__name:"DeckImportView",setup(t){const e=pe(""),n=pe(""),r=pe(!1),s=pe(null),i=async()=>{if(!e.value.trim()){s.value="Please enter a deck name";return}if(!n.value.trim()){s.value="Please paste your decklist";return}r.value=!0,s.value=null;try{await ZT.importDeckFromText(e.value.trim(),n.value.trim()),s.value="Deck import started successfully! Check the status indicator in the top right for progress.",setTimeout(()=>{e.value="",n.value="",r.value=!1,s.value=null},3e3)}catch(o){s.value="Failed to import deck: "+o.message,r.value=!1}};return(o,a)=>(U(),J("div",eD,[a[7]||(a[7]=w("h1",null,"Import Deck",-1)),w("div",tD,[a[4]||(a[4]=w("h2",null,"Moxfield Deck Import",-1)),a[5]||(a[5]=w("p",null,"Copy and paste your decklist from Moxfield to track which cards you own and which you're missing.",-1)),w("div",nD,[a[2]||(a[2]=w("label",{for:"deck-name",class:"form-label"},"Deck Name",-1)),Fs(w("input",{id:"deck-name","onUpdate:modelValue":a[0]||(a[0]=l=>e.value=l),type:"text",placeholder:"Enter a name for your deck",class:"form-control"},null,512),[[Ol,e.value]])]),w("div",rD,[a[3]||(a[3]=w("label",{for:"decklist",class:"form-label"},"Decklist",-1)),Fs(w("textarea",{id:"decklist","onUpdate:modelValue":a[1]||(a[1]=l=>n.value=l),placeholder:`Paste your decklist here (e.g., 4 Lightning Bolt
2 Counterspell)`,rows:"10",class:"form-control"},null,512),[[Ol,n.value]])]),w("button",{onClick:i,disabled:r.value,class:"btn btn-glass-primary mb-4"},oe(r.value?"Importing...":"Import Deck"),9,sD),s.value?(U(),J("div",iD,oe(s.value),1)):ke("",!0),a[6]||(a[6]=w("div",{class:"instructions"},[w("h3",null,"How to copy from Moxfield:"),w("ol",null,[w("li",null,"Open your deck on Moxfield.com"),w("li",null,'Click the "Export" button'),w("li",null,'Select "Text" format'),w("li",null,"Copy the text and paste it here")])],-1))])]))}}),aD=gn(oD,[["__scopeId","data-v-cad749f2"]]),lD={class:"container py-4"},cD={class:"d-flex align-items-center justify-content-between mb-4"},uD={key:0,class:"text-center py-5"},dD={key:1,class:"text-center py-5"},fD={key:2,class:"row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4"},hD={class:"card h-100 shadow-sm border-0 overflow-hidden position-relative"},pD={class:"card-aspect position-relative overflow-hidden"},gD=["src","alt"],mD={class:"card-body"},yD=["title"],vD={class:"d-flex align-items-center justify-content-between mb-2"},bD={key:0,class:"badge bg-info text-dark text-uppercase"},_D={class:"text-muted"},wD={class:"fw-semibold"},xD=Ze({__name:"DecksView",setup(t){const e=pe([]),n=pe(!0),r=pe({}),s=pe({}),i=c=>c?new Date(c).toLocaleDateString():"—",o=c=>r.value[c]??0,a=c=>s.value[c];return Mn(async()=>{try{const c=await ue.decks.toArray();e.value=c;const u=c.map(async p=>{const g=await ue.deck_cards.where("deckId").equals(p.id).count();return[p.id,g]}),f=c.map(async p=>{if(!p.faceCardId)return[p.id,null];const g=await ue.cards.get(p.faceCardId);return[p.id,g?{id:g.id,name:g.name,imageUrl:g.imageUrl}:null]});(await Promise.all(u)).forEach(([p,g])=>r.value[p]=g),(await Promise.all(f)).forEach(([p,g])=>{g?s.value[p]=g:delete s.value[p]})}catch(c){console.error("Error loading decks:",c)}finally{n.value=!1}}),(c,u)=>{const f=Ci("router-link");return U(),J("div",lD,[w("div",cD,[u[1]||(u[1]=w("h1",{class:"h3 mb-0"},"Decks",-1)),Ue(f,{to:"/import/deck",class:"btn btn-glass-primary"},{default:at(()=>[...u[0]||(u[0]=[bt(" Import Deck ",-1)])]),_:1})]),n.value?(U(),J("div",uD,[...u[2]||(u[2]=[w("div",{class:"spinner-border",role:"status","aria-hidden":"true"},null,-1),w("div",{class:"mt-2"},"Loading decks…",-1)])])):e.value.length===0?(U(),J("div",dD,[u[4]||(u[4]=w("p",{class:"text-muted mb-3"},"You haven't imported any decks yet.",-1)),Ue(f,{to:"/import/deck",class:"btn btn-glass-primary"},{default:at(()=>[...u[3]||(u[3]=[bt(" Import Your First Deck ",-1)])]),_:1})])):(U(),J("div",fD,[(U(!0),J(et,null,Ft(e.value,p=>(U(),J("div",{key:p.id,class:"col"},[w("div",hD,[w("div",pD,[w("img",{src:a(p.id)?.imageUrl,alt:a(p.id)?.name||"Face card",class:"w-100 h-100 d-block img-fit-cover rounded-4"},null,8,gD)]),w("div",mD,[w("h2",{class:"h5 mb-1 text-truncate",title:p.name},oe(p.name),9,yD),w("div",vD,[p.platform?(U(),J("span",bD,oe(p.platform),1)):ke("",!0),w("small",_D,oe(i(p.importedAt)),1)]),w("div",wD,oe(o(p.id))+" cards",1),Ue(f,{class:"stretched-link",to:`/decks/${p.id}`,"aria-label":"Open deck"},null,8,["to"])])])]))),128))]))])}}}),kD=gn(xD,[["__scopeId","data-v-6b1e1265"]]);function Lb(t,e){const n=typeof t=="string"&&!e?`${t}Context`:e,r=Symbol(n);return[o=>{const a=In(r,o);if(a||a===null)return a;throw new Error(`Injection \`${r.toString()}\` not found. Component must be used within ${Array.isArray(t)?`one of the following components: ${t.join(", ")}`:`\`${t}\``}`)},o=>(Co(r,o),o)]}function ts(){let t=document.activeElement;if(t==null)return null;for(;t!=null&&t.shadowRoot!=null&&t.shadowRoot.activeElement!=null;)t=t.shadowRoot.activeElement;return t}function Bb(t,e,n){const r=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),r.dispatchEvent(s)}function xf(t){return t?t.flatMap(e=>e.type===et?xf(e.children):[e]):[]}const[CD,LL]=Lb("ConfigProvider");function jb(t){return $d()?(Xm(t),!0):!1}function SD(t){let e=!1,n;const r=Jl(!0);return(...s)=>(e||(n=r.run(()=>t(...s)),e=!0),n)}function PD(t){let e=0,n,r;const s=()=>{e-=1,r&&e<=0&&(r.stop(),n=void 0,r=void 0)};return(...i)=>(e+=1,r||(r=Jl(!0),n=r.run(()=>t(...i))),jb(s),n)}const Hs=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const AD=t=>typeof t<"u",ID=Object.prototype.toString,ED=t=>ID.call(t)==="[object Object]",gm=OD();function OD(){var t,e;return Hs&&((t=window?.navigator)==null?void 0:t.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((e=window?.navigator)==null?void 0:e.maxTouchPoints)>2&&/iPad|Macintosh/.test(window?.navigator.userAgent))}function MD(t){return cr()}function Nu(t){return Array.isArray(t)?t:[t]}function TD(t,e){MD()&&rc(t,e)}function DD(t,e,n){return Ht(t,e,{...n,immediate:!0})}const kf=Hs?window:void 0;function yc(t){var e;const n=ar(t);return(e=n?.$el)!=null?e:n}function Nb(...t){const e=[],n=()=>{e.forEach(a=>a()),e.length=0},r=(a,l,c,u)=>(a.addEventListener(l,c,u),()=>a.removeEventListener(l,c,u)),s=Ve(()=>{const a=Nu(ar(t[0])).filter(l=>l!=null);return a.every(l=>typeof l!="string")?a:void 0}),i=DD(()=>{var a,l;return[(l=(a=s.value)==null?void 0:a.map(c=>yc(c)))!=null?l:[kf].filter(c=>c!=null),Nu(ar(s.value?t[1]:t[0])),Nu($e(s.value?t[2]:t[1])),ar(s.value?t[3]:t[2])]},([a,l,c,u])=>{if(n(),!a?.length||!l?.length||!c?.length)return;const f=ED(u)?{...u}:u;e.push(...a.flatMap(p=>l.flatMap(g=>c.map(v=>r(p,g,v,f)))))},{flush:"post"}),o=()=>{i(),n()};return jb(n),o}function RD(){const t=ec(!1),e=cr();return e&&Mn(()=>{t.value=!0},e),t}function $D(t){return typeof t=="function"?t:typeof t=="string"?e=>e.key===t:Array.isArray(t)?e=>t.includes(e.key):()=>!0}function FD(...t){let e,n,r={};t.length===3?(e=t[0],n=t[1],r=t[2]):t.length===2?typeof t[1]=="object"?(e=!0,n=t[0],r=t[1]):(e=t[0],n=t[1]):(e=!0,n=t[0]);const{target:s=kf,eventName:i="keydown",passive:o=!1,dedupe:a=!1}=r,l=$D(e);return Nb(s,i,u=>{u.repeat&&ar(a)||l(u)&&n(u)},o)}function LD(t){return JSON.parse(JSON.stringify(t))}function BD(t,e,n,r={}){var s,i,o;const{clone:a=!1,passive:l=!1,eventName:c,deep:u=!1,defaultValue:f,shouldEmit:p}=r,g=cr(),v=n||g?.emit||((s=g?.$emit)==null?void 0:s.bind(g))||((o=(i=g?.proxy)==null?void 0:i.$emit)==null?void 0:o.bind(g?.proxy));let _=c;_=_||`update:${e.toString()}`;const x=A=>a?typeof a=="function"?a(A):LD(A):A,C=()=>AD(t[e])?x(t[e]):f,S=A=>{p?p(A)&&v(_,A):v(_,A)};if(l){const A=C(),O=pe(A);let F=!1;return Ht(()=>t[e],M=>{F||(F=!0,O.value=x(M),ln(()=>F=!1))}),Ht(O,M=>{!F&&(M!==t[e]||u)&&S(M)},{deep:u}),O}else return Ve({get(){return C()},set(A){S(A)}})}function zu(t){if(t===null||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e!==null&&e!==Object.prototype&&Object.getPrototypeOf(e)!==null||Symbol.iterator in t?!1:Symbol.toStringTag in t?Object.prototype.toString.call(t)==="[object Module]":!0}function kd(t,e,n=".",r){if(!zu(e))return kd(t,{},n,r);const s=Object.assign({},e);for(const i in t){if(i==="__proto__"||i==="constructor")continue;const o=t[i];o!=null&&(r&&r(s,i,o,n)||(Array.isArray(o)&&Array.isArray(s[i])?s[i]=[...o,...s[i]]:zu(o)&&zu(s[i])?s[i]=kd(o,s[i],(n?`${n}.`:"")+i.toString(),r):s[i]=o))}return s}function jD(t){return(...e)=>e.reduce((n,r)=>kd(n,r,"",t),{})}const ND=jD(),zD=PD(()=>{const t=pe(new Map),e=pe(),n=Ve(()=>{for(const o of t.value.values())if(o)return!0;return!1}),r=CD({scrollBody:pe(!0)});let s=null;const i=()=>{document.body.style.paddingRight="",document.body.style.marginRight="",document.body.style.pointerEvents="",document.documentElement.style.removeProperty("--scrollbar-width"),document.body.style.overflow=e.value??"",gm&&s?.(),e.value=void 0};return Ht(n,(o,a)=>{if(!Hs)return;if(!o){a&&i();return}e.value===void 0&&(e.value=document.body.style.overflow);const l=window.innerWidth-document.documentElement.clientWidth,c={padding:l,margin:0},u=r.scrollBody?.value?typeof r.scrollBody.value=="object"?ND({padding:r.scrollBody.value.padding===!0?l:r.scrollBody.value.padding,margin:r.scrollBody.value.margin===!0?l:r.scrollBody.value.margin},c):c:{padding:0,margin:0};l>0&&(document.body.style.paddingRight=typeof u.padding=="number"?`${u.padding}px`:String(u.padding),document.body.style.marginRight=typeof u.margin=="number"?`${u.margin}px`:String(u.margin),document.documentElement.style.setProperty("--scrollbar-width",`${l}px`),document.body.style.overflow="hidden"),gm&&(s=Nb(document,"touchmove",f=>UD(f),{passive:!1})),ln(()=>{document.body.style.pointerEvents="none",document.body.style.overflow="hidden"})},{immediate:!0,flush:"sync"}),t});function qD(t){const e=Math.random().toString(36).substring(2,7),n=zD();n.value.set(e,t);const r=Ve({get:()=>n.value.get(e)??!1,set:s=>n.value.set(e,s)});return TD(()=>{n.value.delete(e)}),r}function zb(t){const e=window.getComputedStyle(t);if(e.overflowX==="scroll"||e.overflowY==="scroll"||e.overflowX==="auto"&&t.clientWidth<t.scrollWidth||e.overflowY==="auto"&&t.clientHeight<t.scrollHeight)return!0;{const n=t.parentNode;return!(n instanceof Element)||n.tagName==="BODY"?!1:zb(n)}}function UD(t){const e=t||window.event,n=e.target;return n instanceof Element&&zb(n)?!1:e.touches.length>1?!0:(e.preventDefault&&e.cancelable&&e.preventDefault(),!1)}function Cf(t){const e=cr(),n=e?.type.emits,r={};return n?.length||console.warn(`No emitted event found. Please check component: ${e?.type.__name}`),n?.forEach(s=>{r[ol(En(s))]=(...i)=>t(s,...i)}),r}function ur(){const t=cr(),e=pe(),n=Ve(()=>["#text","#comment"].includes(e.value?.$el.nodeName)?e.value?.$el.nextElementSibling:yc(e)),r=Object.assign({},t.exposed),s={};for(const o in t.props)Object.defineProperty(s,o,{enumerable:!0,configurable:!0,get:()=>t.props[o]});if(Object.keys(r).length>0)for(const o in r)Object.defineProperty(s,o,{enumerable:!0,configurable:!0,get:()=>r[o]});Object.defineProperty(s,"$el",{enumerable:!0,configurable:!0,get:()=>t.vnode.el}),t.exposed=s;function i(o){e.value=o,o&&(Object.defineProperty(s,"$el",{enumerable:!0,configurable:!0,get:()=>o instanceof Element?o:o.$el}),t.exposed=s)}return{forwardRef:i,currentRef:e,currentElement:n}}var WD=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},li=new WeakMap,rl=new WeakMap,sl={},qu=0,qb=function(t){return t&&(t.host||qb(t.parentNode))},VD=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=qb(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},HD=function(t,e,n,r){var s=VD(e,Array.isArray(t)?t:[t]);sl[n]||(sl[n]=new WeakMap);var i=sl[n],o=[],a=new Set,l=new Set(s),c=function(f){!f||a.has(f)||(a.add(f),c(f.parentNode))};s.forEach(c);var u=function(f){!f||l.has(f)||Array.prototype.forEach.call(f.children,function(p){if(a.has(p))u(p);else try{var g=p.getAttribute(r),v=g!==null&&g!=="false",_=(li.get(p)||0)+1,x=(i.get(p)||0)+1;li.set(p,_),i.set(p,x),o.push(p),_===1&&v&&rl.set(p,!0),x===1&&p.setAttribute(n,"true"),v||p.setAttribute(r,"true")}catch(C){console.error("aria-hidden: cannot operate on ",p,C)}})};return u(e),a.clear(),qu++,function(){o.forEach(function(f){var p=li.get(f)-1,g=i.get(f)-1;li.set(f,p),i.set(f,g),p||(rl.has(f)||f.removeAttribute(r),rl.delete(f)),g||f.removeAttribute(n)}),qu--,qu||(li=new WeakMap,li=new WeakMap,rl=new WeakMap,sl={})}},KD=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=WD(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),HD(r,s,n,"aria-hidden")):function(){return null}};function YD(t){let e;Ht(()=>yc(t),n=>{n?e=KD(n):e&&e()}),$i(()=>{e&&e()})}function mm(t,e="reka"){return`${e}-${N0?.()}`}function GD(t,e){const n=pe(t);function r(i){return e[n.value][i]??n.value}return{state:n,dispatch:i=>{n.value=r(i)}}}function XD(t,e){const n=pe({}),r=pe("none"),s=pe(t),i=t.value?"mounted":"unmounted";let o;const a=e.value?.ownerDocument.defaultView??kf,{state:l,dispatch:c}=GD(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}}),u=x=>{if(Hs){const C=new CustomEvent(x,{bubbles:!1,cancelable:!1});e.value?.dispatchEvent(C)}};Ht(t,async(x,C)=>{const S=C!==x;if(await ln(),S){const A=r.value,O=il(e.value);x?(c("MOUNT"),u("enter"),O==="none"&&u("after-enter")):O==="none"||O==="undefined"||n.value?.display==="none"?(c("UNMOUNT"),u("leave"),u("after-leave")):C&&A!==O?(c("ANIMATION_OUT"),u("leave")):(c("UNMOUNT"),u("after-leave"))}},{immediate:!0});const f=x=>{const C=il(e.value),S=C.includes(x.animationName),A=l.value==="mounted"?"enter":"leave";if(x.target===e.value&&S&&(u(`after-${A}`),c("ANIMATION_END"),!s.value)){const O=e.value.style.animationFillMode;e.value.style.animationFillMode="forwards",o=a?.setTimeout(()=>{e.value?.style.animationFillMode==="forwards"&&(e.value.style.animationFillMode=O)})}x.target===e.value&&C==="none"&&c("ANIMATION_END")},p=x=>{x.target===e.value&&(r.value=il(e.value))},g=Ht(e,(x,C)=>{x?(n.value=getComputedStyle(x),x.addEventListener("animationstart",p),x.addEventListener("animationcancel",f),x.addEventListener("animationend",f)):(c("ANIMATION_END"),o!==void 0&&a?.clearTimeout(o),C?.removeEventListener("animationstart",p),C?.removeEventListener("animationcancel",f),C?.removeEventListener("animationend",f))},{immediate:!0}),v=Ht(l,()=>{const x=il(e.value);r.value=l.value==="mounted"?x:"none"});return $i(()=>{g(),v()}),{isPresent:Ve(()=>["mounted","unmountSuspended"].includes(l.value))}}function il(t){return t&&getComputedStyle(t).animationName||"none"}var Ub=Ze({name:"Presence",props:{present:{type:Boolean,required:!0},forceMount:{type:Boolean}},slots:{},setup(t,{slots:e,expose:n}){const{present:r,forceMount:s}=Ud(t),i=pe(),{isPresent:o}=XD(r,i);n({present:o});let a=e.default({present:o.value});a=xf(a||[]);const l=cr();if(a&&a?.length>1){const c=l?.parent?.type.name?`<${l.parent.type.name} />`:"component";throw new Error([`Detected an invalid children for \`${c}\` for  \`Presence\` component.`,"","Note: Presence works similarly to `v-if` directly, but it waits for animation/transition to finished before unmounting. So it expect only one direct child of valid VNode type.","You can apply a few solutions:",["Provide a single child element so that `presence` directive attach correctly.","Ensure the first child is an actual element instead of a raw text node or comment node."].map(u=>`  - ${u}`).join(`
`)].join(`
`))}return()=>s.value||r.value||o.value?Ar(e.default({present:o.value})[0],{ref:c=>{const u=yc(c);return typeof u?.hasAttribute>"u"||(u?.hasAttribute("data-reka-popper-content-wrapper")?i.value=u.firstElementChild:i.value=u),u}}):null}});const QD=Ze({name:"PrimitiveSlot",inheritAttrs:!1,setup(t,{attrs:e,slots:n}){return()=>{if(!n.default)return null;const r=xf(n.default()),s=r.findIndex(l=>l.type!==Hn);if(s===-1)return r;const i=r[s];delete i.props?.ref;const o=i.props?lr(e,i.props):e,a=ss({...i,props:{}},o);return r.length===1?a:(r[s]=a,r)}}}),JD=["area","img","input"],aa=Ze({name:"Primitive",inheritAttrs:!1,props:{asChild:{type:Boolean,default:!1},as:{type:[String,Object],default:"div"}},setup(t,{attrs:e,slots:n}){const r=t.asChild?"template":t.as;return typeof r=="string"&&JD.includes(r)?()=>Ar(r,e):r!=="template"?()=>Ar(t.as,e,{default:n.default}):()=>Ar(QD,e,{default:n.default})}}),[ls,ZD]=Lb("DialogRoot");var eR=Ze({inheritAttrs:!1,__name:"DialogRoot",props:{open:{type:Boolean,required:!1,default:void 0},defaultOpen:{type:Boolean,required:!1,default:!1},modal:{type:Boolean,required:!1,default:!0}},emits:["update:open"],setup(t,{emit:e}){const n=t,s=BD(n,"open",e,{defaultValue:n.defaultOpen,passive:n.open===void 0}),i=pe(),o=pe(),{modal:a}=Ud(n);return ZD({open:s,modal:a,openModal:()=>{s.value=!0},onOpenChange:l=>{s.value=l},onOpenToggle:()=>{s.value=!s.value},contentId:"",titleId:"",descriptionId:"",triggerElement:i,contentElement:o}),(l,c)=>_n(l.$slots,"default",{open:$e(s),close:()=>s.value=!1})}}),tR=eR,nR=Ze({__name:"DialogClose",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(t){const e=t;ur();const n=ls();return(r,s)=>(U(),Jt($e(aa),lr(e,{type:r.as==="button"?"button":void 0,onClick:s[0]||(s[0]=i=>$e(n).onOpenChange(!1))}),{default:at(()=>[_n(r.$slots,"default")]),_:3},16,["type"]))}}),rR=nR;const sR="dismissableLayer.pointerDownOutside",iR="dismissableLayer.focusOutside";function Wb(t,e){const n=e.closest("[data-dismissable-layer]"),r=t.dataset.dismissableLayer===""?t:t.querySelector("[data-dismissable-layer]"),s=Array.from(t.ownerDocument.querySelectorAll("[data-dismissable-layer]"));return!!(n&&(r===n||s.indexOf(r)<s.indexOf(n)))}function oR(t,e,n=!0){const r=e?.value?.ownerDocument??globalThis?.document,s=pe(!1),i=pe(()=>{});return Si(o=>{if(!Hs||!ar(n))return;const a=async c=>{const u=c.target;if(!(!e?.value||!u)){if(Wb(e.value,u)){s.value=!1;return}if(c.target&&!s.value){let g=function(){Bb(sR,t,p)};var f=g;const p={originalEvent:c};c.pointerType==="touch"?(r.removeEventListener("click",i.value),i.value=g,r.addEventListener("click",i.value,{once:!0})):g()}else r.removeEventListener("click",i.value);s.value=!1}},l=window.setTimeout(()=>{r.addEventListener("pointerdown",a)},0);o(()=>{window.clearTimeout(l),r.removeEventListener("pointerdown",a),r.removeEventListener("click",i.value)})}),{onPointerDownCapture:()=>{ar(n)&&(s.value=!0)}}}function aR(t,e,n=!0){const r=e?.value?.ownerDocument??globalThis?.document,s=pe(!1);return Si(i=>{if(!Hs||!ar(n))return;const o=async a=>{if(!e?.value)return;await ln(),await ln();const l=a.target;!e.value||!l||Wb(e.value,l)||a.target&&!s.value&&Bb(iR,t,{originalEvent:a})};r.addEventListener("focusin",o),i(()=>r.removeEventListener("focusin",o))}),{onFocusCapture:()=>{ar(n)&&(s.value=!0)},onBlurCapture:()=>{ar(n)&&(s.value=!1)}}}const _r=Us({layersRoot:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set});var lR=Ze({__name:"DismissableLayer",props:{disableOutsidePointerEvents:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","dismiss"],setup(t,{emit:e}){const n=t,r=e,{forwardRef:s,currentElement:i}=ur(),o=Ve(()=>i.value?.ownerDocument??globalThis.document),a=Ve(()=>_r.layersRoot),l=Ve(()=>i.value?Array.from(a.value).indexOf(i.value):-1),c=Ve(()=>_r.layersWithOutsidePointerEventsDisabled.size>0),u=Ve(()=>{const v=Array.from(a.value),[_]=[..._r.layersWithOutsidePointerEventsDisabled].slice(-1),x=v.indexOf(_);return l.value>=x}),f=oR(async v=>{const _=[..._r.branches].some(x=>x?.contains(v.target));!u.value||_||(r("pointerDownOutside",v),r("interactOutside",v),await ln(),v.defaultPrevented||r("dismiss"))},i),p=aR(v=>{[..._r.branches].some(x=>x?.contains(v.target))||(r("focusOutside",v),r("interactOutside",v),v.defaultPrevented||r("dismiss"))},i);FD("Escape",v=>{l.value===a.value.size-1&&(r("escapeKeyDown",v),v.defaultPrevented||r("dismiss"))});let g;return Si(v=>{i.value&&(n.disableOutsidePointerEvents&&(_r.layersWithOutsidePointerEventsDisabled.size===0&&(g=o.value.body.style.pointerEvents,o.value.body.style.pointerEvents="none"),_r.layersWithOutsidePointerEventsDisabled.add(i.value)),a.value.add(i.value),v(()=>{n.disableOutsidePointerEvents&&_r.layersWithOutsidePointerEventsDisabled.size===1&&(o.value.body.style.pointerEvents=g)}))}),Si(v=>{v(()=>{i.value&&(a.value.delete(i.value),_r.layersWithOutsidePointerEventsDisabled.delete(i.value))})}),(v,_)=>(U(),Jt($e(aa),{ref:$e(s),"as-child":v.asChild,as:v.as,"data-dismissable-layer":"",style:An({pointerEvents:c.value?u.value?"auto":"none":void 0}),onFocusCapture:$e(p).onFocusCapture,onBlurCapture:$e(p).onBlurCapture,onPointerdownCapture:$e(f).onPointerDownCapture},{default:at(()=>[_n(v.$slots,"default")]),_:3},8,["as-child","as","style","onFocusCapture","onBlurCapture","onPointerdownCapture"]))}}),cR=lR;const uR=SD(()=>pe([]));function dR(){const t=uR();return{add(e){const n=t.value[0];e!==n&&n?.pause(),t.value=ym(t.value,e),t.value.unshift(e)},remove(e){t.value=ym(t.value,e),t.value[0]?.resume()}}}function ym(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function fR(t){return t.filter(e=>e.tagName!=="A")}const Uu="focusScope.autoFocusOnMount",Wu="focusScope.autoFocusOnUnmount",vm={bubbles:!1,cancelable:!0};function hR(t,{select:e=!1}={}){const n=ts();for(const r of t)if(Wr(r,{select:e}),ts()!==n)return!0}function pR(t){const e=Vb(t),n=bm(e,t),r=bm(e.reverse(),t);return[n,r]}function Vb(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function bm(t,e){for(const n of t)if(!gR(n,{upTo:e}))return n}function gR(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function mR(t){return t instanceof HTMLInputElement&&"select"in t}function Wr(t,{select:e=!1}={}){if(t&&t.focus){const n=ts();t.focus({preventScroll:!0}),t!==n&&mR(t)&&e&&t.select()}}var yR=Ze({__name:"FocusScope",props:{loop:{type:Boolean,required:!1,default:!1},trapped:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["mountAutoFocus","unmountAutoFocus"],setup(t,{emit:e}){const n=t,r=e,{currentRef:s,currentElement:i}=ur(),o=pe(null),a=dR(),l=Us({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}});Si(u=>{if(!Hs)return;const f=i.value;if(!n.trapped)return;function p(x){if(l.paused||!f)return;const C=x.target;f.contains(C)?o.value=C:Wr(o.value,{select:!0})}function g(x){if(l.paused||!f)return;const C=x.relatedTarget;C!==null&&(f.contains(C)||Wr(o.value,{select:!0}))}function v(x){f.contains(o.value)||Wr(f)}document.addEventListener("focusin",p),document.addEventListener("focusout",g);const _=new MutationObserver(v);f&&_.observe(f,{childList:!0,subtree:!0}),u(()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",g),_.disconnect()})}),Si(async u=>{const f=i.value;if(await ln(),!f)return;a.add(l);const p=ts();if(!f.contains(p)){const v=new CustomEvent(Uu,vm);f.addEventListener(Uu,_=>r("mountAutoFocus",_)),f.dispatchEvent(v),v.defaultPrevented||(hR(fR(Vb(f)),{select:!0}),ts()===p&&Wr(f))}u(()=>{f.removeEventListener(Uu,x=>r("mountAutoFocus",x));const v=new CustomEvent(Wu,vm),_=x=>{r("unmountAutoFocus",x)};f.addEventListener(Wu,_),f.dispatchEvent(v),setTimeout(()=>{v.defaultPrevented||Wr(p??document.body,{select:!0}),f.removeEventListener(Wu,_),a.remove(l)},0)})});function c(u){if(!n.loop&&!n.trapped||l.paused)return;const f=u.key==="Tab"&&!u.altKey&&!u.ctrlKey&&!u.metaKey,p=ts();if(f&&p){const g=u.currentTarget,[v,_]=pR(g);v&&_?!u.shiftKey&&p===_?(u.preventDefault(),n.loop&&Wr(v,{select:!0})):u.shiftKey&&p===v&&(u.preventDefault(),n.loop&&Wr(_,{select:!0})):p===g&&u.preventDefault()}}return(u,f)=>(U(),Jt($e(aa),{ref_key:"currentRef",ref:s,tabindex:"-1","as-child":u.asChild,as:u.as,onKeydown:c},{default:at(()=>[_n(u.$slots,"default")]),_:3},8,["as-child","as"]))}}),vR=yR;function bR(t){return t?"open":"closed"}var _R=Ze({__name:"DialogContentImpl",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const n=t,r=e,s=ls(),{forwardRef:i,currentElement:o}=ur();return s.titleId||=mm(void 0,"reka-dialog-title"),s.descriptionId||=mm(void 0,"reka-dialog-description"),Mn(()=>{s.contentElement=o,ts()!==document.body&&(s.triggerElement.value=ts())}),(a,l)=>(U(),Jt($e(vR),{"as-child":"",loop:"",trapped:n.trapFocus,onMountAutoFocus:l[5]||(l[5]=c=>r("openAutoFocus",c)),onUnmountAutoFocus:l[6]||(l[6]=c=>r("closeAutoFocus",c))},{default:at(()=>[Ue($e(cR),lr({id:$e(s).contentId,ref:$e(i),as:a.as,"as-child":a.asChild,"disable-outside-pointer-events":a.disableOutsidePointerEvents,role:"dialog","aria-describedby":$e(s).descriptionId,"aria-labelledby":$e(s).titleId,"data-state":$e(bR)($e(s).open.value)},a.$attrs,{onDismiss:l[0]||(l[0]=c=>$e(s).onOpenChange(!1)),onEscapeKeyDown:l[1]||(l[1]=c=>r("escapeKeyDown",c)),onFocusOutside:l[2]||(l[2]=c=>r("focusOutside",c)),onInteractOutside:l[3]||(l[3]=c=>r("interactOutside",c)),onPointerDownOutside:l[4]||(l[4]=c=>r("pointerDownOutside",c))}),{default:at(()=>[_n(a.$slots,"default")]),_:3},16,["id","as","as-child","disable-outside-pointer-events","aria-describedby","aria-labelledby","data-state"])]),_:3},8,["trapped"]))}}),Hb=_R,wR=Ze({__name:"DialogContentModal",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const n=t,r=e,s=ls(),i=Cf(r),{forwardRef:o,currentElement:a}=ur();return YD(a),(l,c)=>(U(),Jt(Hb,lr({...n,...$e(i)},{ref:$e(o),"trap-focus":$e(s).open.value,"disable-outside-pointer-events":!0,onCloseAutoFocus:c[0]||(c[0]=u=>{u.defaultPrevented||(u.preventDefault(),$e(s).triggerElement.value?.focus())}),onPointerDownOutside:c[1]||(c[1]=u=>{const f=u.detail.originalEvent,p=f.button===0&&f.ctrlKey===!0;(f.button===2||p)&&u.preventDefault()}),onFocusOutside:c[2]||(c[2]=u=>{u.preventDefault()})}),{default:at(()=>[_n(l.$slots,"default")]),_:3},16,["trap-focus"]))}}),xR=wR,kR=Ze({__name:"DialogContentNonModal",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const n=t,s=Cf(e);ur();const i=ls(),o=pe(!1),a=pe(!1);return(l,c)=>(U(),Jt(Hb,lr({...n,...$e(s)},{"trap-focus":!1,"disable-outside-pointer-events":!1,onCloseAutoFocus:c[0]||(c[0]=u=>{u.defaultPrevented||(o.value||$e(i).triggerElement.value?.focus(),u.preventDefault()),o.value=!1,a.value=!1}),onInteractOutside:c[1]||(c[1]=u=>{u.defaultPrevented||(o.value=!0,u.detail.originalEvent.type==="pointerdown"&&(a.value=!0));const f=u.target;$e(i).triggerElement.value?.contains(f)&&u.preventDefault(),u.detail.originalEvent.type==="focusin"&&a.value&&u.preventDefault()})}),{default:at(()=>[_n(l.$slots,"default")]),_:3},16))}}),CR=kR,SR=Ze({__name:"DialogContent",props:{forceMount:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const n=t,r=e,s=ls(),i=Cf(r),{forwardRef:o}=ur();return(a,l)=>(U(),Jt($e(Ub),{present:a.forceMount||$e(s).open.value},{default:at(()=>[$e(s).modal.value?(U(),Jt(xR,lr({key:0,ref:$e(o)},{...n,...$e(i),...a.$attrs}),{default:at(()=>[_n(a.$slots,"default")]),_:3},16)):(U(),Jt(CR,lr({key:1,ref:$e(o)},{...n,...$e(i),...a.$attrs}),{default:at(()=>[_n(a.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),PR=SR,AR=Ze({__name:"DialogOverlayImpl",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const e=ls();return qD(!0),ur(),(n,r)=>(U(),Jt($e(aa),{as:n.as,"as-child":n.asChild,"data-state":$e(e).open.value?"open":"closed",style:{"pointer-events":"auto"}},{default:at(()=>[_n(n.$slots,"default")]),_:3},8,["as","as-child","data-state"]))}}),IR=AR,ER=Ze({__name:"DialogOverlay",props:{forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(t){const e=ls(),{forwardRef:n}=ur();return(r,s)=>$e(e)?.modal.value?(U(),Jt($e(Ub),{key:0,present:r.forceMount||$e(e).open.value},{default:at(()=>[Ue(IR,lr(r.$attrs,{ref:$e(n),as:r.as,"as-child":r.asChild}),{default:at(()=>[_n(r.$slots,"default")]),_:3},16,["as","as-child"])]),_:3},8,["present"])):ke("v-if",!0)}}),OR=ER,MR=Ze({__name:"Teleport",props:{to:{type:null,required:!1,default:"body"},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(t){const e=RD();return(n,r)=>$e(e)||n.forceMount?(U(),Jt(F0,{key:0,to:n.to,disabled:n.disabled,defer:n.defer},[_n(n.$slots,"default")],8,["to","disabled","defer"])):ke("v-if",!0)}}),TR=MR,DR=Ze({__name:"DialogPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(t){const e=t;return(n,r)=>(U(),Jt($e(TR),Z_(Hy(e)),{default:at(()=>[_n(n.$slots,"default")]),_:3},16))}}),RR=DR,$R=Ze({__name:"DialogTitle",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"h2"}},setup(t){const e=t,n=ls();return ur(),(r,s)=>(U(),Jt($e(aa),lr(e,{id:$e(n).titleId}),{default:at(()=>[_n(r.$slots,"default")]),_:3},16,["id"]))}}),FR=$R;/*!
* chartjs-plugin-annotation v3.1.0
* https://www.chartjs.org/chartjs-plugin-annotation/index
 * (c) 2024 chartjs-plugin-annotation Contributors
 * Released under the MIT License
 */const _m={modes:{point(t,e){return vl(t,e,{intersect:!0})},nearest(t,e,n){return jR(t,e,n)},x(t,e,n){return vl(t,e,{intersect:n.intersect,axis:"x"})},y(t,e,n){return vl(t,e,{intersect:n.intersect,axis:"y"})}}};function Sf(t,e,n){return(_m.modes[n.mode]||_m.modes.nearest)(t,e,n)}function LR(t,e,n){return n!=="x"&&n!=="y"?t.inRange(e.x,e.y,"x",!0)||t.inRange(e.x,e.y,"y",!0):t.inRange(e.x,e.y,n,!0)}function BR(t,e,n){return n==="x"?{x:t.x,y:e.y}:n==="y"?{x:e.x,y:t.y}:e}function vl(t,e,n){return t.filter(r=>n.intersect?r.inRange(e.x,e.y):LR(r,e,n.axis))}function jR(t,e,n){let r=Number.POSITIVE_INFINITY;return vl(t,e,n).reduce((s,i)=>{const o=i.getCenterPoint(),a=BR(e,o,n.axis),l=Oi(e,a);return l<r?(s=[i],r=l):l===r&&s.push(i),s},[]).sort((s,i)=>s._index-i._index).slice(0,1)}function Ks(t,e,n){const r=Math.cos(n),s=Math.sin(n),i=e.x,o=e.y;return{x:i+r*(t.x-i)-s*(t.y-o),y:o+s*(t.x-i)+r*(t.y-o)}}const NR=(t,e)=>e>t||t.length>e.length&&t.slice(0,e.length)===e,Rs=.001,vc=(t,e,n)=>Math.min(n,Math.max(e,t)),Kb=(t,e)=>t.value>=t.start-e&&t.value<=t.end+e;function zR(t,e,n){for(const r of Object.keys(t))t[r]=vc(t[r],e,n);return t}function qR(t,e,n,r){return!t||!e||n<=0?!1:Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)<=Math.pow(n+r,2)}function Yb(t,{x:e,y:n,x2:r,y2:s},i,{borderWidth:o,hitTolerance:a}){const l=(o+a)/2,c=t.x>=e-l-Rs&&t.x<=r+l+Rs,u=t.y>=n-l-Rs&&t.y<=s+l+Rs;return i==="x"?c:(i==="y"||c)&&u}function Gb(t,{rect:e,center:n},r,{rotation:s,borderWidth:i,hitTolerance:o}){const a=Ks(t,n,Wt(-s));return Yb(a,e,r,{borderWidth:i,hitTolerance:o})}function Ys(t,e){const{centerX:n,centerY:r}=t.getProps(["centerX","centerY"],e);return{x:n,y:r}}function UR(t,e,n,r=!0){const s=n.split(".");let i=0;for(const o of e.split(".")){const a=s[i++];if(parseInt(o,10)<parseInt(a,10))break;if(NR(a,o)){if(r)throw new Error(`${t} v${n} is not supported. v${e} or newer is required.`);return!1}}return!0}const Xb=t=>typeof t=="string"&&t.endsWith("%"),Qb=t=>parseFloat(t)/100,Jb=t=>vc(Qb(t),0,1),co=(t,e)=>({x:t,y:e,x2:t,y2:e,width:0,height:0}),WR={box:t=>co(t.centerX,t.centerY),doughnutLabel:t=>co(t.centerX,t.centerY),ellipse:t=>({centerX:t.centerX,centerY:t.centerX,radius:0,width:0,height:0}),label:t=>co(t.centerX,t.centerY),line:t=>co(t.x,t.y),point:t=>({centerX:t.centerX,centerY:t.centerY,radius:0,width:0,height:0}),polygon:t=>co(t.centerX,t.centerY)};function Pf(t,e){return e==="start"?0:e==="end"?t:Xb(e)?Jb(e)*t:t/2}function is(t,e,n=!0){return typeof e=="number"?e:Xb(e)?(n?Jb(e):Qb(e))*t:t}function VR(t,e){const{x:n,width:r}=t,s=e.textAlign;return s==="center"?n+r/2:s==="end"||s==="right"?n+r:n}function Zb(t,e,{borderWidth:n,position:r,xAdjust:s,yAdjust:i},o){const a=Je(o),l=e.width+(a?o.width:0)+n,c=e.height+(a?o.height:0)+n,u=Af(r),f=wm(t.x,l,s,u.x),p=wm(t.y,c,i,u.y);return{x:f,y:p,x2:f+l,y2:p+c,width:l,height:c,centerX:f+l/2,centerY:p+c/2}}function Af(t,e="center"){return Je(t)?{x:Qe(t.x,e),y:Qe(t.y,e)}:(t=Qe(t,e),{x:t,y:t})}const e_=(t,e)=>t&&t.autoFit&&e<1;function t_(t,e){const n=t.font,r=kt(n)?n:[n];return e_(t,e)?r.map(function(s){const i=Lt(s);return i.size=Math.floor(s.size*e),i.lineHeight=s.lineHeight,Lt(i)}):r.map(s=>Lt(s))}function n_(t){return t&&(On(t.xValue)||On(t.yValue))}function wm(t,e,n=0,r){return t-Pf(e,r)+n}function Li(t,e,n){const r=n.init;if(r){if(r===!0)return s_(e,n)}else return;return HR(t,e,n)}function r_(t,e,n){let r=!1;return e.forEach(s=>{bn(t[s])?(r=!0,n[s]=t[s]):On(n[s])&&delete n[s]}),r}function s_(t,e){const n=e.type||"line";return WR[n](t)}function HR(t,e,n){const r=pt(n.init,[{chart:t,properties:e,options:n}]);if(r===!0)return s_(e,n);if(Je(r))return r}const Vu=new Map,KR=t=>isNaN(t)||t<=0,YR=t=>t.reduce(function(e,n){return e+=n.string,e},"");function bc(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object HTMLImageElement]"||e==="[object HTMLCanvasElement]"}}function _c(t,{x:e,y:n},r){r&&(t.translate(e,n),t.rotate(Wt(r)),t.translate(-e,-n))}function Or(t,e){if(e&&e.borderWidth)return t.lineCap=e.borderCapStyle||"butt",t.setLineDash(e.borderDash),t.lineDashOffset=e.borderDashOffset,t.lineJoin=e.borderJoinStyle||"miter",t.lineWidth=e.borderWidth,t.strokeStyle=e.borderColor,!0}function Bi(t,e){t.shadowColor=e.backgroundShadowColor,t.shadowBlur=e.shadowBlur,t.shadowOffsetX=e.shadowOffsetX,t.shadowOffsetY=e.shadowOffsetY}function wc(t,e){const n=e.content;if(bc(n))return{width:is(n.width,e.width),height:is(n.height,e.height)};const r=t_(e),s=e.textStrokeWidth,i=kt(n)?n:[n],o=i.join()+YR(r)+s+(t._measureText?"-spriting":"");return Vu.has(o)||Vu.set(o,JR(t,i,r,s)),Vu.get(o)}function i_(t,e,n){const{x:r,y:s,width:i,height:o}=e;t.save(),Bi(t,n);const a=Or(t,n);t.fillStyle=n.backgroundColor,t.beginPath(),jl(t,{x:r,y:s,w:i,h:o,radius:zR(wi(n.borderRadius),0,Math.min(i,o)/2)}),t.closePath(),t.fill(),a&&(t.shadowColor=n.borderShadowColor,t.stroke()),t.restore()}function o_(t,e,n,r){const s=n.content;if(bc(s)){t.save(),t.globalAlpha=t2(n.opacity,s.style.opacity),t.drawImage(s,e.x,e.y,e.width,e.height),t.restore();return}const i=kt(s)?s:[s],o=t_(n,r),a=n.color,l=kt(a)?a:[a],c=VR(e,n),u=e.y+n.textStrokeWidth/2;t.save(),t.textBaseline="middle",t.textAlign=n.textAlign,GR(t,n)&&ZR(t,{x:c,y:u},i,o),e2(t,{x:c,y:u},i,{fonts:o,colors:l}),t.restore()}function GR(t,e){if(e.textStrokeWidth>0)return t.lineJoin="round",t.miterLimit=2,t.lineWidth=e.textStrokeWidth,t.strokeStyle=e.textStrokeColor,!0}function XR(t,e,n,r){const{radius:s,options:i}=e,o=i.pointStyle,a=i.rotation;let l=(a||0)*sf;if(bc(o)){t.save(),t.translate(n,r),t.rotate(l),t.drawImage(o,-o.width/2,-o.height/2,o.width,o.height),t.restore();return}KR(s)||QR(t,{x:n,y:r,radius:s,rotation:a,style:o,rad:l})}function QR(t,{x:e,y:n,radius:r,rotation:s,style:i,rad:o}){let a,l,c,u;switch(t.beginPath(),i){default:t.arc(e,n,r,0,Ut),t.closePath();break;case"triangle":t.moveTo(e+Math.sin(o)*r,n-Math.cos(o)*r),o+=Ll,t.lineTo(e+Math.sin(o)*r,n-Math.cos(o)*r),o+=Ll,t.lineTo(e+Math.sin(o)*r,n-Math.cos(o)*r),t.closePath();break;case"rectRounded":u=r*.516,c=r-u,a=Math.cos(o+Fn)*c,l=Math.sin(o+Fn)*c,t.arc(e-a,n-l,u,o-ut,o-Qt),t.arc(e+l,n-a,u,o-Qt,o),t.arc(e+a,n+l,u,o,o+Qt),t.arc(e-l,n+a,u,o+Qt,o+ut),t.closePath();break;case"rect":if(!s){c=Math.SQRT1_2*r,t.rect(e-c,n-c,2*c,2*c);break}o+=Fn;case"rectRot":a=Math.cos(o)*r,l=Math.sin(o)*r,t.moveTo(e-a,n-l),t.lineTo(e+l,n-a),t.lineTo(e+a,n+l),t.lineTo(e-l,n+a),t.closePath();break;case"crossRot":o+=Fn;case"cross":a=Math.cos(o)*r,l=Math.sin(o)*r,t.moveTo(e-a,n-l),t.lineTo(e+a,n+l),t.moveTo(e+l,n-a),t.lineTo(e-l,n+a);break;case"star":a=Math.cos(o)*r,l=Math.sin(o)*r,t.moveTo(e-a,n-l),t.lineTo(e+a,n+l),t.moveTo(e+l,n-a),t.lineTo(e-l,n+a),o+=Fn,a=Math.cos(o)*r,l=Math.sin(o)*r,t.moveTo(e-a,n-l),t.lineTo(e+a,n+l),t.moveTo(e+l,n-a),t.lineTo(e-l,n+a);break;case"line":a=Math.cos(o)*r,l=Math.sin(o)*r,t.moveTo(e-a,n-l),t.lineTo(e+a,n+l);break;case"dash":t.moveTo(e,n),t.lineTo(e+Math.cos(o)*r,n+Math.sin(o)*r);break}t.fill()}function JR(t,e,n,r){t.save();const s=e.length;let i=0,o=r;for(let a=0;a<s;a++){const l=n[Math.min(a,n.length-1)];t.font=l.string;const c=e[a];i=Math.max(i,t.measureText(c).width+r),o+=l.lineHeight}return t.restore(),{width:i,height:o}}function ZR(t,{x:e,y:n},r,s){t.beginPath();let i=0;r.forEach(function(o,a){const l=s[Math.min(a,s.length-1)],c=l.lineHeight;t.font=l.string,t.strokeText(o,e,n+c/2+i),i+=c}),t.stroke()}function e2(t,{x:e,y:n},r,{fonts:s,colors:i}){let o=0;r.forEach(function(a,l){const c=i[Math.min(l,i.length-1)],u=s[Math.min(l,s.length-1)],f=u.lineHeight;t.beginPath(),t.font=u.string,t.fillStyle=c,t.fillText(a,e,n+f/2+o),o+=f,t.fill()})}function t2(t,e){const n=Ns(t)?t:e;return Ns(n)?vc(n,0,1):1}const a_=["left","bottom","top","right"];function n2(t,e){const{pointX:n,pointY:r,options:s}=e,i=s.callout,o=i&&i.display&&a2(e,i);if(!o||c2(e,i,o))return;if(t.save(),t.beginPath(),!Or(t,i))return t.restore();const{separatorStart:l,separatorEnd:c}=r2(e,o),{sideStart:u,sideEnd:f}=i2(e,o,l);(i.margin>0||s.borderWidth===0)&&(t.moveTo(l.x,l.y),t.lineTo(c.x,c.y)),t.moveTo(u.x,u.y),t.lineTo(f.x,f.y);const p=Ks({x:n,y:r},e.getCenterPoint(),Wt(-e.rotation));t.lineTo(p.x,p.y),t.stroke(),t.restore()}function r2(t,e){const{x:n,y:r,x2:s,y2:i}=t,o=s2(t,e);let a,l;return e==="left"||e==="right"?(a={x:n+o,y:r},l={x:a.x,y:i}):(a={x:n,y:r+o},l={x:s,y:a.y}),{separatorStart:a,separatorEnd:l}}function s2(t,e){const{width:n,height:r,options:s}=t,i=s.callout.margin+s.borderWidth/2;return e==="right"?n+i:e==="bottom"?r+i:-i}function i2(t,e,n){const{y:r,width:s,height:i,options:o}=t,a=o.callout.start,l=o2(e,o.callout);let c,u;return e==="left"||e==="right"?(c={x:n.x,y:r+is(i,a)},u={x:c.x+l,y:c.y}):(c={x:n.x+is(s,a),y:n.y},u={x:c.x,y:c.y+l}),{sideStart:c,sideEnd:u}}function o2(t,e){const n=e.side;return t==="left"||t==="top"?-n:n}function a2(t,e){const n=e.position;return a_.includes(n)?n:l2(t,e)}function l2(t,e){const{x:n,y:r,x2:s,y2:i,width:o,height:a,pointX:l,pointY:c,centerX:u,centerY:f,rotation:p}=t,g={x:u,y:f},v=e.start,_=is(o,v),x=is(a,v),C=[n,n+_,n+_,s],S=[r+x,i,r,i],A=[];for(let O=0;O<4;O++){const F=Ks({x:C[O],y:S[O]},g,Wt(p));A.push({position:a_[O],distance:Oi(F,{x:l,y:c})})}return A.sort((O,F)=>O.distance-F.distance)[0].position}function c2(t,e,n){const{pointX:r,pointY:s}=t,i=e.margin;let o=r,a=s;return n==="left"?o+=i:n==="right"?o-=i:n==="top"?a+=i:n==="bottom"&&(a-=i),t.inRange(o,a)}const xm={xScaleID:{min:"xMin",max:"xMax",start:"left",end:"right",startProp:"x",endProp:"x2"},yScaleID:{min:"yMin",max:"yMax",start:"bottom",end:"top",startProp:"y",endProp:"y2"}};function Ri(t,e,n){return e=typeof e=="number"?e:t.parse(e),Kt(e)?t.getPixelForValue(e):n}function qs(t,e,n){const r=e[n];if(r||n==="scaleID")return r;const s=n.charAt(0),i=Object.values(t).filter(o=>o.axis&&o.axis===s);return i.length?i[0].id:s}function l_(t,e){if(t){const n=t.options.reverse,r=Ri(t,e.min,n?e.end:e.start),s=Ri(t,e.max,n?e.start:e.end);return{start:r,end:s}}}function c_(t,e){const{chartArea:n,scales:r}=t,s=r[qs(r,e,"xScaleID")],i=r[qs(r,e,"yScaleID")];let o=n.width/2,a=n.height/2;return s&&(o=Ri(s,e.xValue,s.left+s.width/2)),i&&(a=Ri(i,e.yValue,i.top+i.height/2)),{x:o,y:a}}function If(t,e){const n=t.scales,r=n[qs(n,e,"xScaleID")],s=n[qs(n,e,"yScaleID")];if(!r&&!s)return{};let{left:i,right:o}=r||t.chartArea,{top:a,bottom:l}=s||t.chartArea;const c=km(r,{min:e.xMin,max:e.xMax,start:i,end:o});i=c.start,o=c.end;const u=km(s,{min:e.yMin,max:e.yMax,start:l,end:a});return a=u.start,l=u.end,{x:i,y:a,x2:o,y2:l,width:o-i,height:l-a,centerX:i+(o-i)/2,centerY:a+(l-a)/2}}function u_(t,e){if(!n_(e)){const n=If(t,e);let r=e.radius;(!r||isNaN(r))&&(r=Math.min(n.width,n.height)/2,e.radius=r);const s=r*2,i=n.centerX+e.xAdjust,o=n.centerY+e.yAdjust;return{x:i-r,y:o-r,x2:i+r,y2:o+r,centerX:i,centerY:o,width:s,height:s,radius:r}}return d2(t,e)}function u2(t,e){const{scales:n,chartArea:r}=t,s=n[e.scaleID],i={x:r.left,y:r.top,x2:r.right,y2:r.bottom};return s?f2(s,i,e):h2(n,i,e),i}function d_(t,e){const n=If(t,e);return n.initProperties=Li(t,n,e),n.elements=[{type:"label",optionScope:"label",properties:m2(t,n,e),initProperties:n.initProperties}],n}function d2(t,e){const n=c_(t,e),r=e.radius*2;return{x:n.x-e.radius+e.xAdjust,y:n.y-e.radius+e.yAdjust,x2:n.x+e.radius+e.xAdjust,y2:n.y+e.radius+e.yAdjust,centerX:n.x+e.xAdjust,centerY:n.y+e.yAdjust,radius:e.radius,width:r,height:r}}function km(t,e){const n=l_(t,e)||e;return{start:Math.min(n.start,n.end),end:Math.max(n.start,n.end)}}function f2(t,e,n){const r=Ri(t,n.value,NaN),s=Ri(t,n.endValue,r);t.isHorizontal()?(e.x=r,e.x2=s):(e.y=r,e.y2=s)}function h2(t,e,n){for(const r of Object.keys(xm)){const s=t[qs(t,n,r)];if(s){const{min:i,max:o,start:a,end:l,startProp:c,endProp:u}=xm[r],f=l_(s,{min:n[i],max:n[o],start:s[a],end:s[l]});e[c]=f.start,e[u]=f.end}}}function p2({properties:t,options:e},n,r,s){const{x:i,x2:o,width:a}=t;return f_({start:i,end:o,borderWidth:e.borderWidth},{position:r.x,padding:{start:s.left,end:s.right},adjust:e.label.xAdjust,size:n.width})}function g2({properties:t,options:e},n,r,s){const{y:i,y2:o,height:a}=t;return f_({start:i,end:o,borderWidth:e.borderWidth},{position:r.y,padding:{start:s.top,end:s.bottom},adjust:e.label.yAdjust,size:n.height})}function f_(t,e){const{start:n,end:r,borderWidth:s}=t,{position:i,padding:{start:o,end:a},adjust:l}=e,c=r-s-n-o-a-e.size;return n+s/2+l+Pf(c,i)}function m2(t,e,n){const r=n.label;r.backgroundColor="transparent",r.callout.display=!1;const s=Af(r.position),i=cn(r.padding),o=wc(t.ctx,r),a=p2({properties:e,options:n},o,s,i),l=g2({properties:e,options:n},o,s,i),c=o.width+i.width,u=o.height+i.height;return{x:a,y:l,x2:a+c,y2:l+u,width:c,height:u,centerX:a+c/2,centerY:l+u/2,rotation:r.rotation}}const Cd=["enter","leave"],Ef=Cd.concat("click");function y2(t,e,n){e.listened=r_(n,Ef,e.listeners),e.moveListened=!1,Cd.forEach(r=>{bn(n[r])&&(e.moveListened=!0)}),(!e.listened||!e.moveListened)&&e.annotations.forEach(r=>{!e.listened&&bn(r.click)&&(e.listened=!0),e.moveListened||Cd.forEach(s=>{bn(r[s])&&(e.listened=!0,e.moveListened=!0)})})}function v2(t,e,n){if(t.listened)switch(e.type){case"mousemove":case"mouseout":return b2(t,e,n);case"click":return _2(t,e,n)}}function b2(t,e,n){if(!t.moveListened)return;let r;e.type==="mousemove"?r=Sf(t.visibleElements,e,n.interaction):r=[];const s=t.hovered;t.hovered=r;const i={state:t,event:e};let o=Cm(i,"leave",s,r);return Cm(i,"enter",r,s)||o}function Cm({state:t,event:e},n,r,s){let i;for(const o of r)s.indexOf(o)<0&&(i=h_(o.options[n]||t.listeners[n],o,e)||i);return i}function _2(t,e,n){const r=t.listeners,s=Sf(t.visibleElements,e,n.interaction);let i;for(const o of s)i=h_(o.options.click||r.click,o,e)||i;return i}function h_(t,e,n){return pt(t,[e.$context,n])===!0}const Vl=["afterDraw","beforeDraw"];function w2(t,e,n){const r=e.visibleElements;e.hooked=r_(n,Vl,e.hooks),e.hooked||r.forEach(s=>{e.hooked||Vl.forEach(i=>{bn(s.options[i])&&(e.hooked=!0)})})}function Sm(t,e,n){if(t.hooked){const r=e.options[n]||t.hooks[n];return pt(r,[e.$context])}}function x2(t,e,n){const r=A2(t.scales,e,n);let s=Pm(e,r,"min","suggestedMin");s=Pm(e,r,"max","suggestedMax")||s,s&&bn(e.handleTickRangeOptions)&&e.handleTickRangeOptions()}function k2(t,e){for(const n of t)S2(n,e)}function Pm(t,e,n,r){if(Kt(e[n])&&!C2(t.options,n,r)){const s=t[n]!==e[n];return t[n]=e[n],s}}function C2(t,e,n){return On(t[e])||On(t[n])}function S2(t,e){for(const n of["scaleID","xScaleID","yScaleID"]){const r=qs(e,t,n);r&&!e[r]&&P2(t,n)&&console.warn(`No scale found with id '${r}' for annotation '${t.id}'`)}}function P2(t,e){if(e==="scaleID")return!0;const n=e.charAt(0);for(const r of["Min","Max","Value"])if(On(t[n+r]))return!0;return!1}function A2(t,e,n){const r=e.axis,s=e.id,i=r+"ScaleID",o={min:Qe(e.min,Number.NEGATIVE_INFINITY),max:Qe(e.max,Number.POSITIVE_INFINITY)};for(const a of n)a.scaleID===s?Am(a,e,["value","endValue"],o):qs(t,a,i)===s&&Am(a,e,[r+"Min",r+"Max",r+"Value"],o);return o}function Am(t,e,n,r){for(const s of n){const i=t[s];if(On(i)){const o=e.parse(i);r.min=Math.min(r.min,o),r.max=Math.max(r.max,o)}}}class ji extends wn{inRange(e,n,r,s){const{x:i,y:o}=Ks({x:e,y:n},this.getCenterPoint(s),Wt(-this.options.rotation));return Yb({x:i,y:o},this.getProps(["x","y","x2","y2"],s),r,this.options)}getCenterPoint(e){return Ys(this,e)}draw(e){e.save(),_c(e,this.getCenterPoint(),this.options.rotation),i_(e,this,this.options),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){return d_(e,n)}}ji.id="boxAnnotation";ji.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,hitTolerance:0,label:{backgroundColor:"transparent",borderWidth:0,callout:{display:!1},color:"black",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:void 0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};ji.defaultRoutes={borderColor:"color",backgroundColor:"color"};ji.descriptors={label:{_fallback:!0}};class xc extends wn{inRange(e,n,r,s){return Gb({x:e,y:n},{rect:this.getProps(["x","y","x2","y2"],s),center:this.getCenterPoint(s)},r,{rotation:this.rotation,borderWidth:0,hitTolerance:this.options.hitTolerance})}getCenterPoint(e){return Ys(this,e)}draw(e){const n=this.options;!n.display||!n.content||(D2(e,this),e.save(),_c(e,this.getCenterPoint(),this.rotation),o_(e,this,n,this._fitRatio),e.restore())}resolveElementProperties(e,n){const r=I2(e,n);if(!r)return{};const{controllerMeta:s,point:i,radius:o}=O2(e,n,r);let a=wc(e.ctx,n);const l=M2(a,o);e_(n,l)&&(a={width:a.width*l,height:a.height*l});const{position:c,xAdjust:u,yAdjust:f}=n,p=Zb(i,a,{borderWidth:0,position:c,xAdjust:u,yAdjust:f});return{initProperties:Li(e,p,n),...p,...s,rotation:n.rotation,_fitRatio:l}}}xc.id="doughnutLabelAnnotation";xc.defaults={autoFit:!0,autoHide:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderColor:"transparent",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:0,color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,spacing:1,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0};xc.defaultRoutes={};function I2(t,e){return t.getSortedVisibleDatasetMetas().reduce(function(n,r){const s=r.controller;return s instanceof ES&&E2(t,e,r.data)&&(!n||s.innerRadius<n.controller.innerRadius)&&s.options.circumference>=90?r:n},void 0)}function E2(t,e,n){if(!e.autoHide)return!0;for(let r=0;r<n.length;r++)if(!n[r].hidden&&t.getDataVisibility(r))return!0}function O2({chartArea:t},e,n){const{left:r,top:s,right:i,bottom:o}=t,{innerRadius:a,offsetX:l,offsetY:c}=n.controller,u=(r+i)/2+l,f=(s+o)/2+c,p={left:Math.max(u-a,r),right:Math.min(u+a,i),top:Math.max(f-a,s),bottom:Math.min(f+a,o)},g={x:(p.left+p.right)/2,y:(p.top+p.bottom)/2},v=e.spacing+e.borderWidth/2,_=a-v,x=g.y>f,C=x?s+v:o-v,S=T2(C,u,f,_);return{controllerMeta:{_centerX:u,_centerY:f,_radius:_,_counterclockwise:x,...S},point:g,radius:Math.min(a,Math.min(p.right-p.left,p.bottom-p.top)/2)}}function M2({width:t,height:e},n){const r=Math.sqrt(Math.pow(t,2)+Math.pow(e,2));return n*2/r}function T2(t,e,n,r){const s=Math.pow(n-t,2),i=Math.pow(r,2),o=e*-2,a=Math.pow(e,2)+s-i,l=Math.pow(o,2)-4*a;if(l<=0)return{_startAngle:0,_endAngle:Ut};const c=(-o-Math.sqrt(l))/2,u=(-o+Math.sqrt(l))/2;return{_startAngle:fd({x:e,y:n},{x:c,y:t}).angle,_endAngle:fd({x:e,y:n},{x:u,y:t}).angle}}function D2(t,e){const{_centerX:n,_centerY:r,_radius:s,_startAngle:i,_endAngle:o,_counterclockwise:a,options:l}=e;t.save();const c=Or(t,l);t.fillStyle=l.backgroundColor,t.beginPath(),t.arc(n,r,s,i,o,a),t.closePath(),t.fill(),c&&t.stroke(),t.restore()}class la extends wn{inRange(e,n,r,s){return Gb({x:e,y:n},{rect:this.getProps(["x","y","x2","y2"],s),center:this.getCenterPoint(s)},r,{rotation:this.rotation,borderWidth:this.options.borderWidth,hitTolerance:this.options.hitTolerance})}getCenterPoint(e){return Ys(this,e)}draw(e){const n=this.options,r=!On(this._visible)||this._visible;!n.display||!n.content||!r||(e.save(),_c(e,this.getCenterPoint(),this.rotation),n2(e,this),i_(e,this,n),o_(e,R2(this),n),e.restore())}resolveElementProperties(e,n){let r;if(n_(n))r=c_(e,n);else{const{centerX:a,centerY:l}=If(e,n);r={x:a,y:l}}const s=cn(n.padding),i=wc(e.ctx,n),o=Zb(r,i,n,s);return{initProperties:Li(e,o,n),pointX:r.x,pointY:r.y,...o,rotation:n.rotation}}}la.id="labelAnnotation";la.defaults={adjustScaleRange:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:0,callout:{borderCapStyle:"butt",borderColor:void 0,borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:1,display:!1,margin:5,position:"auto",side:5,start:"50%"},color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};la.defaultRoutes={borderColor:"color"};function R2({x:t,y:e,width:n,height:r,options:s}){const i=s.borderWidth/2,o=cn(s.padding);return{x:t+o.left+i,y:e+o.top+i,width:n-o.left-o.right-s.borderWidth,height:r-o.top-o.bottom-s.borderWidth}}const Of=(t,e,n)=>({x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}),Sd=(t,e,n)=>Of(e,n,Math.abs((t-e.y)/(n.y-e.y))).x,Im=(t,e,n)=>Of(e,n,Math.abs((t-e.x)/(n.x-e.x))).y,yo=t=>t*t,$2=(t,e,{x:n,y:r,x2:s,y2:i},o)=>o==="y"?{start:Math.min(r,i),end:Math.max(r,i),value:e}:{start:Math.min(n,s),end:Math.max(n,s),value:t},Em=(t,e,n,r)=>(1-r)*(1-r)*t+2*(1-r)*r*e+r*r*n,Pd=(t,e,n,r)=>({x:Em(t.x,e.x,n.x,r),y:Em(t.y,e.y,n.y,r)}),Om=(t,e,n,r)=>2*(1-r)*(e-t)+2*r*(n-e),Mm=(t,e,n,r)=>-Math.atan2(Om(t.x,e.x,n.x,r),Om(t.y,e.y,n.y,r))+.5*ut;class ca extends wn{inRange(e,n,r,s){const i=(this.options.borderWidth+this.options.hitTolerance)/2;if(r!=="x"&&r!=="y"){const o={mouseX:e,mouseY:n},{path:a,ctx:l}=this;if(a){Or(l,this.options),l.lineWidth+=this.options.hitTolerance;const{chart:u}=this.$context,f=e*u.currentDevicePixelRatio,p=n*u.currentDevicePixelRatio,g=l.isPointInStroke(a,f,p)||Ad(this,o,s);return l.restore(),g}const c=yo(i);return j2(this,o,c,s)||Ad(this,o,s)}return F2(this,{mouseX:e,mouseY:n},r,{hitSize:i,useFinalPosition:s})}getCenterPoint(e){return Ys(this,e)}draw(e){const{x:n,y:r,x2:s,y2:i,cp:o,options:a}=this;if(e.save(),!Or(e,a))return e.restore();Bi(e,a);const l=Math.sqrt(Math.pow(s-n,2)+Math.pow(i-r,2));if(a.curve&&o)return K2(e,this,o,l),e.restore();const{startOpts:c,endOpts:u,startAdjust:f,endAdjust:p}=p_(this),g=Math.atan2(i-r,s-n);e.translate(n,r),e.rotate(g),e.beginPath(),e.moveTo(0+f,0),e.lineTo(l-p,0),e.shadowColor=a.borderShadowColor,e.stroke(),Id(e,0,f,c),Id(e,l,-p,u),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){const r=u2(e,n),{x:s,y:i,x2:o,y2:a}=r,l=L2(r,e.chartArea),c=l?B2({x:s,y:i},{x:o,y:a},e.chartArea):{x:s,y:i,x2:o,y2:a,width:Math.abs(o-s),height:Math.abs(a-i)};if(c.centerX=(o+s)/2,c.centerY=(a+i)/2,c.initProperties=Li(e,c,n),n.curve){const f={x:c.x,y:c.y},p={x:c.x2,y:c.y2};c.cp=H2(c,n,Oi(f,p))}const u=N2(e,c,n.label);return u._visible=l,c.elements=[{type:"label",optionScope:"label",properties:u,initProperties:c.initProperties}],c}}ca.id="lineAnnotation";const Tm={backgroundColor:void 0,backgroundShadowColor:void 0,borderColor:void 0,borderDash:void 0,borderDashOffset:void 0,borderShadowColor:void 0,borderWidth:void 0,display:void 0,fill:void 0,length:void 0,shadowBlur:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,width:void 0};ca.defaults={adjustScaleRange:!0,arrowHeads:{display:!1,end:Object.assign({},Tm),fill:!1,length:12,start:Object.assign({},Tm),width:6},borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:2,curve:!1,controlPoint:{y:"-50%"},display:!0,endValue:void 0,init:void 0,hitTolerance:0,label:{backgroundColor:"rgba(0,0,0,0.8)",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderColor:"black",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:6,borderShadowColor:"transparent",borderWidth:0,callout:Object.assign({},la.defaults.callout),color:"#fff",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},scaleID:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,value:void 0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};ca.descriptors={arrowHeads:{start:{_fallback:!0},end:{_fallback:!0},_fallback:!0}};ca.defaultRoutes={borderColor:"color"};function F2(t,{mouseX:e,mouseY:n},r,{hitSize:s,useFinalPosition:i}){const o=$2(e,n,t.getProps(["x","y","x2","y2"],i),r);return Kb(o,s)||Ad(t,{mouseX:e,mouseY:n},i,r)}function L2({x:t,y:e,x2:n,y2:r},{top:s,right:i,bottom:o,left:a}){return!(t<a&&n<a||t>i&&n>i||e<s&&r<s||e>o&&r>o)}function Dm({x:t,y:e},n,{top:r,right:s,bottom:i,left:o}){return t<o&&(e=Im(o,{x:t,y:e},n),t=o),t>s&&(e=Im(s,{x:t,y:e},n),t=s),e<r&&(t=Sd(r,{x:t,y:e},n),e=r),e>i&&(t=Sd(i,{x:t,y:e},n),e=i),{x:t,y:e}}function B2(t,e,n){const{x:r,y:s}=Dm(t,e,n),{x:i,y:o}=Dm(e,t,n);return{x:r,y:s,x2:i,y2:o,width:Math.abs(i-r),height:Math.abs(o-s)}}function j2(t,{mouseX:e,mouseY:n},r=Rs,s){const{x:i,y:o,x2:a,y2:l}=t.getProps(["x","y","x2","y2"],s),c=a-i,u=l-o,f=yo(c)+yo(u),p=f===0?-1:((e-i)*c+(n-o)*u)/f;let g,v;return p<0?(g=i,v=o):p>1?(g=a,v=l):(g=i+p*c,v=o+p*u),yo(e-g)+yo(n-v)<=r}function Ad(t,{mouseX:e,mouseY:n},r,s){const i=t.label;return i.options.display&&i.inRange(e,n,s,r)}function N2(t,e,n){const r=n.borderWidth,s=cn(n.padding),i=wc(t.ctx,n),o=i.width+s.width+r,a=i.height+s.height+r;return q2(e,n,{width:o,height:a,padding:s},t.chartArea)}function z2(t){const{x:e,y:n,x2:r,y2:s}=t,i=Math.atan2(s-n,r-e);return i>ut/2?i-ut:i<ut/-2?i+ut:i}function q2(t,e,n,r){const{width:s,height:i,padding:o}=n,{xAdjust:a,yAdjust:l}=e,c={x:t.x,y:t.y},u={x:t.x2,y:t.y2},f=e.rotation==="auto"?z2(t):Wt(e.rotation),p=U2(s,i,f),g=W2(t,e,{labelSize:p,padding:o},r),v=t.cp?Pd(c,t.cp,u,g):Of(c,u,g),_={size:p.w,min:r.left,max:r.right,padding:o.left},x={size:p.h,min:r.top,max:r.bottom,padding:o.top},C=$m(v.x,_)+a,S=$m(v.y,x)+l;return{x:C-s/2,y:S-i/2,x2:C+s/2,y2:S+i/2,centerX:C,centerY:S,pointX:v.x,pointY:v.y,width:s,height:i,rotation:Av(f)}}function U2(t,e,n){const r=Math.cos(n),s=Math.sin(n);return{w:Math.abs(t*r)+Math.abs(e*s),h:Math.abs(t*s)+Math.abs(e*r)}}function W2(t,e,n,r){let s;const i=V2(t,r);return e.position==="start"?s=Rm({w:t.x2-t.x,h:t.y2-t.y},n,e,i):e.position==="end"?s=1-Rm({w:t.x-t.x2,h:t.y-t.y2},n,e,i):s=Pf(1,e.position),s}function Rm(t,e,n,r){const{labelSize:s,padding:i}=e,o=t.w*r.dx,a=t.h*r.dy,l=o>0&&(s.w/2+i.left-r.x)/o,c=a>0&&(s.h/2+i.top-r.y)/a;return vc(Math.max(l,c),0,.25)}function V2(t,e){const{x:n,x2:r,y:s,y2:i}=t,o=Math.min(s,i)-e.top,a=Math.min(n,r)-e.left,l=e.bottom-Math.max(s,i),c=e.right-Math.max(n,r);return{x:Math.min(a,c),y:Math.min(o,l),dx:a<=c?1:-1,dy:o<=l?1:-1}}function $m(t,e){const{size:n,min:r,max:s,padding:i}=e,o=n/2;return n>s-r?(s+r)/2:(r>=t-i-o&&(t=r+i+o),s<=t+i+o&&(t=s-i-o),t)}function p_(t){const e=t.options,n=e.arrowHeads&&e.arrowHeads.start,r=e.arrowHeads&&e.arrowHeads.end;return{startOpts:n,endOpts:r,startAdjust:Fm(t,n),endAdjust:Fm(t,r)}}function Fm(t,e){if(!e||!e.display)return 0;const{length:n,width:r}=e,s=t.options.borderWidth/2,i={x:n,y:r+s};return Math.abs(Sd(0,i,{x:0,y:s}))}function Id(t,e,n,r){if(!r||!r.display)return;const{length:s,width:i,fill:o,backgroundColor:a,borderColor:l}=r,c=Math.abs(e-s)+n;t.beginPath(),Bi(t,r),Or(t,r),t.moveTo(c,-i),t.lineTo(e+n,0),t.lineTo(c,i),o===!0?(t.fillStyle=a||l,t.closePath(),t.fill(),t.shadowColor="transparent"):t.shadowColor=r.borderShadowColor,t.stroke()}function H2(t,e,n){const{x:r,y:s,x2:i,y2:o,centerX:a,centerY:l}=t,c=Math.atan2(o-s,i-r),u=Af(e.controlPoint,0),f={x:a+is(n,u.x,!1),y:l+is(n,u.y,!1)};return Ks(f,{x:a,y:l},c)}function Lm(t,{x:e,y:n},{angle:r,adjust:s},i){!i||!i.display||(t.save(),t.translate(e,n),t.rotate(r),Id(t,0,-s,i),t.restore())}function K2(t,e,n,r){const{x:s,y:i,x2:o,y2:a,options:l}=e,{startOpts:c,endOpts:u,startAdjust:f,endAdjust:p}=p_(e),g={x:s,y:i},v={x:o,y:a},_=Mm(g,n,v,0),x=Mm(g,n,v,1)-ut,C=Pd(g,n,v,f/r),S=Pd(g,n,v,1-p/r),A=new Path2D;t.beginPath(),A.moveTo(C.x,C.y),A.quadraticCurveTo(n.x,n.y,S.x,S.y),t.shadowColor=l.borderShadowColor,t.stroke(A),e.path=A,e.ctx=t,Lm(t,C,{angle:_,adjust:f},c),Lm(t,S,{angle:x,adjust:p},u)}class ua extends wn{inRange(e,n,r,s){const i=this.options.rotation,o=(this.options.borderWidth+this.options.hitTolerance)/2;if(r!=="x"&&r!=="y")return Y2({x:e,y:n},this.getProps(["width","height","centerX","centerY"],s),i,o);const{x:a,y:l,x2:c,y2:u}=this.getProps(["x","y","x2","y2"],s),f=r==="y"?{start:l,end:u}:{start:a,end:c},p=Ks({x:e,y:n},this.getCenterPoint(s),Wt(-i));return p[r]>=f.start-o-Rs&&p[r]<=f.end+o+Rs}getCenterPoint(e){return Ys(this,e)}draw(e){const{width:n,height:r,centerX:s,centerY:i,options:o}=this;e.save(),_c(e,this.getCenterPoint(),o.rotation),Bi(e,this.options),e.beginPath(),e.fillStyle=o.backgroundColor;const a=Or(e,o);e.ellipse(s,i,r/2,n/2,ut/2,0,2*ut),e.fill(),a&&(e.shadowColor=o.borderShadowColor,e.stroke()),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){return d_(e,n)}}ua.id="ellipseAnnotation";ua.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,label:Object.assign({},ji.defaults.label),rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};ua.defaultRoutes={borderColor:"color",backgroundColor:"color"};ua.descriptors={label:{_fallback:!0}};function Y2(t,e,n,r){const{width:s,height:i,centerX:o,centerY:a}=e,l=s/2,c=i/2;if(l<=0||c<=0)return!1;const u=Wt(n||0),f=Math.cos(u),p=Math.sin(u),g=Math.pow(f*(t.x-o)+p*(t.y-a),2),v=Math.pow(p*(t.x-o)-f*(t.y-a),2);return g/Math.pow(l+r,2)+v/Math.pow(c+r,2)<=1.0001}class kc extends wn{inRange(e,n,r,s){const{x:i,y:o,x2:a,y2:l,width:c}=this.getProps(["x","y","x2","y2","width"],s),u=(this.options.borderWidth+this.options.hitTolerance)/2;return r!=="x"&&r!=="y"?qR({x:e,y:n},this.getCenterPoint(s),c/2,u):Kb(r==="y"?{start:o,end:l,value:n}:{start:i,end:a,value:e},u)}getCenterPoint(e){return Ys(this,e)}draw(e){const n=this.options,r=n.borderWidth;if(n.radius<.1)return;e.save(),e.fillStyle=n.backgroundColor,Bi(e,n);const s=Or(e,n);XR(e,this,this.centerX,this.centerY),s&&!bc(n.pointStyle)&&(e.shadowColor=n.borderShadowColor,e.stroke()),e.restore(),n.borderWidth=r}resolveElementProperties(e,n){const r=u_(e,n);return r.initProperties=Li(e,r,n),r}}kc.id="pointAnnotation";kc.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,pointStyle:"circle",radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};kc.defaultRoutes={borderColor:"color",backgroundColor:"color"};class Cc extends wn{inRange(e,n,r,s){if(r!=="x"&&r!=="y")return this.options.radius>=.1&&this.elements.length>1&&X2(this.elements,e,n,s);const i=Ks({x:e,y:n},this.getCenterPoint(s),Wt(-this.options.rotation)),o=this.elements.map(c=>r==="y"?c.bY:c.bX),a=Math.min(...o),l=Math.max(...o);return i[r]>=a&&i[r]<=l}getCenterPoint(e){return Ys(this,e)}draw(e){const{elements:n,options:r}=this;e.save(),e.beginPath(),e.fillStyle=r.backgroundColor,Bi(e,r);const s=Or(e,r);let i=!0;for(const o of n)i?(e.moveTo(o.x,o.y),i=!1):e.lineTo(o.x,o.y);e.closePath(),e.fill(),s&&(e.shadowColor=r.borderShadowColor,e.stroke()),e.restore()}resolveElementProperties(e,n){const r=u_(e,n),{sides:s,rotation:i}=n,o=[],a=2*ut/s;let l=i*sf;for(let c=0;c<s;c++,l+=a){const u=G2(r,n,l);u.initProperties=Li(e,r,n),o.push(u)}return r.elements=o,r}}Cc.id="polygonAnnotation";Cc.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,point:{radius:0},radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,sides:3,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};Cc.defaultRoutes={borderColor:"color",backgroundColor:"color"};function G2({centerX:t,centerY:e},{radius:n,borderWidth:r,hitTolerance:s},i){const o=(r+s)/2,a=Math.sin(i),l=Math.cos(i),c={x:t+a*n,y:e-l*n};return{type:"point",optionScope:"point",properties:{x:c.x,y:c.y,centerX:c.x,centerY:c.y,bX:t+a*(n+o),bY:e-l*(n+o)}}}function X2(t,e,n,r){let s=!1,i=t[t.length-1].getProps(["bX","bY"],r);for(const o of t){const a=o.getProps(["bX","bY"],r);a.bY>n!=i.bY>n&&e<(i.bX-a.bX)*(n-a.bY)/(i.bY-a.bY)+a.bX&&(s=!s),i=a}return s}const ns={box:ji,doughnutLabel:xc,ellipse:ua,label:la,line:ca,point:kc,polygon:Cc};Object.keys(ns).forEach(t=>{Mt.describe(`elements.${ns[t].id}`,{_fallback:"plugins.annotation.common"})});const Q2={update:Object.assign},J2=Ef.concat(Vl),Bm=(t,e)=>Je(e)?Od(t,e):t,Ed=t=>t==="color"||t==="font";function Mf(t="line"){return ns[t]?t:(console.warn(`Unknown annotation type: '${t}', defaulting to 'line'`),"line")}function Z2(t,e,n,r){const s=t$(t,n.animations,r),i=e.annotations,o=s$(e.elements,i);for(let a=0;a<i.length;a++){const l=i[a],c=g_(o,a,l.type),u=l.setContext(r$(t,c,o,l)),f=c.resolveElementProperties(t,u);f.skip=e$(f),"elements"in f&&(n$(c,f.elements,u,s),delete f.elements),On(c.x)||Object.assign(c,f),Object.assign(c,f.initProperties),f.options=m_(u),s.update(c,f)}}function e$(t){return isNaN(t.x)||isNaN(t.y)}function t$(t,e,n){return n==="reset"||n==="none"||n==="resize"?Q2:new gf(t,e)}function n$(t,e,n,r){const s=t.elements||(t.elements=[]);s.length=e.length;for(let i=0;i<e.length;i++){const o=e[i],a=o.properties,l=g_(s,i,o.type,o.initProperties),c=n[o.optionScope].override(o);a.options=m_(c),r.update(l,a)}}function g_(t,e,n,r){const s=ns[Mf(n)];let i=t[e];return(!i||!(i instanceof s))&&(i=t[e]=new s,Object.assign(i,r)),i}function m_(t){const e=ns[Mf(t.type)],n={};n.id=t.id,n.type=t.type,n.drawTime=t.drawTime,Object.assign(n,Od(t,e.defaults),Od(t,e.defaultRoutes));for(const r of J2)n[r]=t[r];return n}function Od(t,e){const n={};for(const r of Object.keys(e)){const s=e[r],i=t[r];Ed(r)&&kt(i)?n[r]=i.map(o=>Bm(o,s)):n[r]=Bm(i,s)}return n}function r$(t,e,n,r){return e.$context||(e.$context=Object.assign(Object.create(t.getContext()),{element:e,get elements(){return n.filter(s=>s&&s.options)},id:r.id,type:"annotation"}))}function s$(t,e){const n=e.length,r=t.length;if(r<n){const s=n-r;t.splice(r,0,...new Array(s))}else r>n&&t.splice(n,r-n);return t}var i$="3.1.0";const Vr=new Map,jm=t=>t.type!=="doughnutLabel",o$=Ef.concat(Vl);var a$={id:"annotation",version:i$,beforeRegister(){UR("chart.js","4.0",es.version)},afterRegister(){es.register(ns)},afterUnregister(){es.unregister(ns)},beforeInit(t){Vr.set(t,{annotations:[],elements:[],visibleElements:[],listeners:{},listened:!1,moveListened:!1,hooks:{},hooked:!1,hovered:[]})},beforeUpdate(t,e,n){const r=Vr.get(t),s=r.annotations=[];let i=n.annotations;Je(i)?Object.keys(i).forEach(o=>{const a=i[o];Je(a)&&(a.id=o,s.push(a))}):kt(i)&&s.push(...i),k2(s.filter(jm),t.scales)},afterDataLimits(t,e){const n=Vr.get(t);x2(t,e.scale,n.annotations.filter(jm).filter(r=>r.display&&r.adjustScaleRange))},afterUpdate(t,e,n){const r=Vr.get(t);y2(t,r,n),Z2(t,r,n,e.mode),r.visibleElements=r.elements.filter(s=>!s.skip&&s.options.display),w2(t,r,n)},beforeDatasetsDraw(t,e,n){uo(t,"beforeDatasetsDraw",n.clip)},afterDatasetsDraw(t,e,n){uo(t,"afterDatasetsDraw",n.clip)},beforeDatasetDraw(t,e,n){uo(t,e.index,n.clip)},beforeDraw(t,e,n){uo(t,"beforeDraw",n.clip)},afterDraw(t,e,n){uo(t,"afterDraw",n.clip)},beforeEvent(t,e,n){const r=Vr.get(t);v2(r,e.event,n)&&(e.changed=!0)},afterDestroy(t){Vr.delete(t)},getAnnotations(t){const e=Vr.get(t);return e?e.elements:[]},_getAnnotationElementsAtEventForMode(t,e,n){return Sf(t,e,n)},defaults:{animations:{numbers:{properties:["x","y","x2","y2","width","height","centerX","centerY","pointX","pointY","radius"],type:"number"},colors:{properties:["backgroundColor","borderColor"],type:"color"}},clip:!0,interaction:{mode:void 0,axis:void 0,intersect:void 0},common:{drawTime:"afterDatasetsDraw",init:!1,label:{}}},descriptors:{_indexable:!1,_scriptable:t=>!o$.includes(t)&&t!=="init",annotations:{_allKeys:!1,_fallback:(t,e)=>`elements.${ns[Mf(e.type)].id}`},interaction:{_fallback:!0},common:{label:{_indexable:Ed,_fallback:!0},_indexable:Ed}},additionalOptionScopes:[""]};function uo(t,e,n){const{ctx:r,chartArea:s}=t,i=Vr.get(t);n&&na(r,s);const o=l$(i.visibleElements,e).sort((a,l)=>a.element.options.z-l.element.options.z);for(const a of o)c$(r,s,i,a);n&&ra(r)}function l$(t,e){const n=[];for(const r of t)if(r.options.drawTime===e&&n.push({element:r,main:!0}),r.elements&&r.elements.length)for(const s of r.elements)s.options.display&&s.options.drawTime===e&&n.push({element:s});return n}function c$(t,e,n,r){const s=r.element;r.main?(Sm(n,s,"beforeDraw"),s.draw(t,e),Sm(n,s,"afterDraw")):s.draw(t,e)}const u$={style:{height:"200px"}},d$=Ze({__name:"PriceHistoryChart",props:{pricePoints:{},transactions:{}},setup(t){es.register(fb,hb,rb,sa,cb,db,ab,a$);const e=t,n={"mtgjson.cardmarket":3,"cardmarket.priceguide":2,scryfall:1},r=Ve(()=>{const o=g=>{try{return new Date(g).toISOString().slice(0,10)}catch{return}},a={nonfoil:{},foil:{}};for(const g of e.pricePoints??[]){const v=g.finish||"nonfoil";if(v==="etched")continue;const _=g.date??(g.asOf?o(g.asOf):void 0);if(!_)continue;const x=n[g.provider??""]??0,C=g.asOf?new Date(g.asOf).getTime():0,S=(g.priceCent??0)/100,A=a[v],O=A[_];(!O||x>O.rank||x===O.rank&&C>O.asOfTs)&&(A[_]={value:S,rank:x,asOfTs:C})}const l=new Set([...Object.keys(a.nonfoil),...Object.keys(a.foil)]),c=Array.from(l).sort((g,v)=>g.localeCompare(v)),u=c.map(g=>a.nonfoil[g]?.value??null),f=c.map(g=>a.foil[g]?.value??null);return{labels:c.map(g=>new Date(g).toLocaleDateString()),nonfoil:u,foil:f}}),s=Ve(()=>({labels:r.value.labels,datasets:[{label:"Regular",backgroundColor:"rgba(13,110,253,0.15)",borderColor:"#0d6efd",pointRadius:0,data:r.value.nonfoil,fill:!1,tension:.2},{label:"Foil",backgroundColor:"rgba(32,201,151,0.15)",borderColor:"#20c997",pointRadius:0,data:r.value.foil,fill:!1,tension:.2}]})),i=Ve(()=>{const o=(e.transactions??[]).map(a=>({type:"line",yMin:new Be(a.unitPrice,a.currency).getDecimal(),yMax:new Be(a.unitPrice,a.currency).getDecimal(),borderColor:/buy/i.test(a.kind)?"green":"red",borderWidth:2,borderDash:[5,5],label:{content:`${a.kind} @ ${new Be(a.unitPrice,a.currency).format("de-DE")}`,enabled:!1}}));return{responsive:!0,maintainAspectRatio:!1,animation:{duration:0},scales:{y:{ticks:{callback(a){return typeof a=="number"?new Be(a*100,"EUR").format("de-DE"):a}}},x:{ticks:{maxRotation:0,autoSkip:!0}}},plugins:{legend:{display:!0},tooltip:{callbacks:{label(a){const l=a.parsed.y;return`${a.dataset.label}: ${new Be(Math.round((l??0)*100),"EUR").format("de-DE")}`}}},annotation:{annotations:o}},elements:{line:{spanGaps:!0}}}});return(o,a)=>(U(),J("div",null,[w("div",u$,[Ue($e(yb),{data:s.value,options:i.value},null,8,["data","options"])])]))}}),f$={class:"card-image-container position-relative overflow-hidden rounded",style:{"padding-bottom":"140%"}},h$={key:1,class:"placeholder-image card-img-top position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center"},p$={class:"card-body"},g$={class:"card-title fs-6 fw-medium mb-1"},m$={class:"card-text small text-muted mb-2"},y$={class:"ms-auto"},v$={key:0,class:"badge rounded-pill bg-primary-subtle text-primary-emphasis"},b$={key:1,class:"badge rounded-pill bg-success-subtle text-success-emphasis"},_$={key:2,class:"small text-muted fst-italic"},w$={key:3,class:"small text-muted fst-italic"},x$={class:"modal-dialog modal-dialog-centered modal-lg"},k$={class:"modal-content glass"},C$={class:"modal-header py-2"},S$={class:"modal-body py-3"},P$={class:"row g-3 align-items-start"},A$={class:"col-lg-5"},I$={class:"card-inner",style:{"padding-bottom":"140%"}},E$={class:"card-front"},O$={key:1,class:"placeholder-image w-100 h-100 rounded-4 position-relative"},M$={class:"card-back"},T$=["src"],D$={class:"row row-cols-2 g-2 small mt-3 mb-0 meta-grid"},R$={class:"col text-end fw-semibold"},$$={class:"col text-end fw-semibold"},F$={class:"col text-end fw-semibold"},L$={class:"col text-end fw-semibold"},B$={class:"col text-end"},j$=["href"],N$=["href"],z$={key:1,class:"text-muted"},q$={class:"col-lg-7"},U$={class:"d-flex justify-content-between align-items-center mb-3"},W$={class:"ms-auto d-flex gap-2 align-items-center"},V$={key:0,class:"badge rounded-pill bg-primary-subtle text-primary-emphasis"},H$={key:1,class:"badge rounded-pill bg-success-subtle text-success-emphasis"},K$={key:2,class:"small text-muted fst-italic"},Y$={key:3,class:"small text-muted fst-italic"},G$={key:0,class:"mb-3"},X$={key:1,class:"mb-3"},Q$={class:"d-flex gap-3 small"},J$={class:"mt-2 border rounded-3 p-2 small",style:{"max-height":"30vh",overflow:"auto"}},Z$={class:"row g-2 align-items-center"},eF={class:"col-6 col-md-3"},tF={class:"fw-medium"},nF={class:"col-6 col-md-3"},rF={class:"fw-medium"},sF={class:"col-6 col-md-3"},iF={class:"fw-medium"},oF={key:0,class:"col-6 col-md-3"},aF={class:"fw-medium"},lF={key:2},cF={class:"mt-2 small",style:{"max-height":"30vh",overflow:"auto"}},uF={class:"flex-grow-1"},dF={class:"fw-medium"},fF={class:"text-muted"},hF={class:"fw-semibold"},pF=Ze({inheritAttrs:!0,__name:"CardComponent",props:{card:{},disableModal:{type:Boolean}},setup(t){const e=Zd(),n=Ve(()=>e.getLatestNonfoil(s.card.id)),r=Ve(()=>e.getLatestFoil(s.card.id)),s=t,i=pe(!1),o=Ve(()=>e.loadingPrices),a=pe([]),l=pe([]),c=pe([]),u=pe(!1),f=pe(!1),p=Ve(()=>l.value?[...l.value].sort((M,D)=>new Date(D.happenedAt).getTime()-new Date(M.happenedAt).getTime()):[]),g=Ve(()=>!a.value||a.value.length===0?0:a.value.reduce((M,D)=>{if(!D.disposedAt||D.disposedQuantity&&D.disposedQuantity<D.quantity){const B=D.disposedQuantity?D.quantity-D.disposedQuantity:D.quantity;return M+B}return M},0)),v=async()=>{i.value=!0,await A(),c.value=await e.getPriceHistory(s.card.id)},_=()=>{i.value=!1},x=M=>new Date(M).toLocaleDateString(),C=(M,D)=>new Be(M,D).format("de-DE"),S=M=>{M.target===M.currentTarget&&_()},A=async()=>{try{a.value=await ue.card_lots.where("cardId").equals(s.card.id).toArray(),l.value=await ue.transactions.where("cardId").equals(s.card.id).toArray()}catch(M){console.error("Error loading card details:",M)}},O=M=>M.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-"),F=M=>M.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-");return(M,D)=>(U(),J(et,null,[w("div",{class:"card h-100 card-item",onClick:D[0]||(D[0]=B=>!s.disableModal&&v())},[w("div",f$,[M.card.imageUrl?(U(),J("div",{key:0,class:"card-img-top position-absolute top-0 start-0 w-100 h-100",style:An({backgroundImage:`url(${M.card.imageUrl})`,backgroundSize:"cover",backgroundPosition:"center"})},null,4)):(U(),J("div",h$,[...D[4]||(D[4]=[w("span",{class:"text-muted"},"Missing Image",-1)])]))]),w("div",p$,[w("h3",g$,oe(M.card.name),1),w("p",m$,oe(M.card.set)+" #"+oe(M.card.number),1),w("div",y$,[n.value?(U(),J("span",v$," Regular: "+oe(n.value.format("de-DE")),1)):ke("",!0),r.value?(U(),J("span",b$," Foil: "+oe(r.value.format("de-DE")),1)):ke("",!0),!n.value&&!r.value&&o.value?(U(),J("span",_$," Loading… ")):!n.value&&!r.value?(U(),J("span",w$," Price unavailable ")):ke("",!0)])])]),Ue($e(tR),{open:i.value,"onUpdate:open":D[3]||(D[3]=B=>i.value=B)},{default:at(()=>[Ue($e(RR),null,{default:at(()=>[Ue($e(OR),{class:"modal-backdrop fade show"}),Ue($e(PR),{class:"modal d-block compact-modal",onClick:S,onEscapeKeyDown:_},{default:at(()=>[w("div",x$,[w("div",k$,[w("div",C$,[Ue($e(FR),{class:"modal-title h5 mb-0"},{default:at(()=>[bt(oe(M.card.name),1)]),_:1}),Ue($e(rR),{"as-child":""},{default:at(()=>[...D[5]||(D[5]=[w("button",{type:"button",class:"btn-close","aria-label":"Close"},null,-1)])]),_:1})]),w("div",S$,[w("div",P$,[w("div",A$,[w("div",{class:At(["card-flipper position-relative",{"is-flipped":u.value}])},[w("div",I$,[w("div",E$,[M.card.imageUrl?(U(),J("div",{key:0,class:"w-100 h-100 rounded-4",style:An({backgroundImage:`url(${M.card.imageUrl})`,backgroundSize:"cover",backgroundPosition:"center"})},null,4)):(U(),J("div",O$,[...D[6]||(D[6]=[w("div",{class:"position-absolute top-50 start-50 translate-middle"},[w("span",{class:"text-muted"},"Missing Image")],-1)])]))]),w("div",M$,[M.card.imageUrlBack?(U(),J("div",{key:0,class:"w-100 h-100 rounded-4",style:An({backgroundImage:`url(${M.card.imageUrlBack})`,backgroundSize:"cover",backgroundPosition:"center"})},null,4)):ke("",!0)])]),M.card.layout==="transform"||M.card.layout==="modal_dfc"||M.card.layout==="reversible_card"||M.card.imageUrl&&M.card.imageUrlBack?(U(),J("button",{key:0,onClick:D[1]||(D[1]=B=>u.value=!u.value),class:"btn btn-sm btn-dark flip-button"}," Flip ")):ke("",!0)],2),w("img",{src:M.card.imageUrlBack,style:{display:"none"}},null,8,T$),w("dl",D$,[D[7]||(D[7]=w("dt",{class:"col text-muted"},"Set",-1)),w("dd",R$,oe(M.card.set)+" ("+oe(M.card.setCode)+")",1),D[8]||(D[8]=w("dt",{class:"col text-muted"},"Number",-1)),w("dd",$$,"#"+oe(M.card.number),1),D[9]||(D[9]=w("dt",{class:"col text-muted"},"Language",-1)),w("dd",F$,oe(M.card.lang),1),D[10]||(D[10]=w("dt",{class:"col text-muted"},"Finish",-1)),w("dd",L$,oe(M.card.finish),1),D[11]||(D[11]=w("dt",{class:"col text-muted"},"Links",-1)),w("dd",B$,[w("a",{href:`https://scryfall.com/card/${M.card.setCode}/${M.card.number}`,target:"_blank",rel:"noopener noreferrer",class:"link-primary text-decoration-none me-2"}," Scryfall ",8,j$),M.card.cardmarketId?(U(),J("a",{key:0,href:`https://www.cardmarket.com/en/Magic/Products/Singles/${O(M.card.set)}/${F(M.card.name)}?language=1&minCondition=4`,target:"_blank",rel:"noopener noreferrer",class:"link-warning text-decoration-none"}," Cardmarket ",8,N$)):(U(),J("span",z$,"Cardmarket ID missing"))])])]),w("div",q$,[w("div",U$,[D[12]||(D[12]=w("h3",{class:"h6 mb-0"},"Current Price",-1)),w("div",W$,[n.value?(U(),J("span",V$," Regular: "+oe(n.value.format("de-DE")),1)):ke("",!0),r.value?(U(),J("span",H$," Foil: "+oe(r.value.format("de-DE")),1)):ke("",!0),!n.value&&!r.value&&o.value?(U(),J("span",K$," Loading… ")):!n.value&&!r.value?(U(),J("span",Y$," Price unavailable ")):ke("",!0)])]),c.value&&c.value.length>0?(U(),J("div",G$,[D[13]||(D[13]=w("h3",{class:"h6 mb-2"},"Price History",-1)),Ue(d$,{"price-points":c.value,transactions:l.value},null,8,["price-points","transactions"])])):ke("",!0),a.value&&a.value.length?(U(),J("div",X$,[D[23]||(D[23]=w("h3",{class:"h6 mb-2"},"Your Collection",-1)),w("div",Q$,[w("div",null,[D[14]||(D[14]=w("span",{class:"text-muted"},"Lots:",-1)),D[15]||(D[15]=bt()),w("strong",null,oe(a.value.length),1)]),w("div",null,[D[16]||(D[16]=w("span",{class:"text-muted"},"Cards:",-1)),D[17]||(D[17]=bt()),w("strong",null,oe(g.value),1)])]),a.value.length>2?(U(),J("button",{key:0,class:"btn btn-link btn-sm p-0 mt-1",onClick:D[2]||(D[2]=B=>f.value=!f.value)},oe(f.value?"Hide details":"Show details"),1)):ke("",!0),Fs(w("div",J$,[(U(!0),J(et,null,Ft(a.value,B=>(U(),J("div",{key:B.id,class:"border rounded p-2 mb-2"},[w("div",Z$,[w("div",eF,[D[18]||(D[18]=w("span",{class:"text-muted"},"Qty:",-1)),D[19]||(D[19]=bt()),w("span",tF,oe(B.quantity),1)]),w("div",nF,[D[20]||(D[20]=w("span",{class:"text-muted"},"Unit Cost:",-1)),w("span",rF,oe(C(B.unitCost,B.currency||"EUR")),1)]),w("div",sF,[D[21]||(D[21]=w("span",{class:"text-muted"},"Purchased:",-1)),w("span",iF,oe(x(B.purchasedAt)),1)]),B.disposedQuantity?(U(),J("div",oF,[D[22]||(D[22]=w("span",{class:"text-muted"},"Disposed:",-1)),w("span",aF,oe(B.disposedQuantity),1)])):ke("",!0)])]))),128))],512),[[Kw,f.value]])])):ke("",!0),l.value&&l.value.length?(U(),J("div",lF,[D[24]||(D[24]=w("h3",{class:"h6 mb-2"},"Transaction History",-1)),w("div",cF,[(U(!0),J(et,null,Ft(p.value,B=>(U(),J("div",{key:B.id,class:At(["tx-item d-flex align-items-center gap-2 p-2 mb-2 rounded border",{buy:/buy/i.test(B.kind),sell:/sell/i.test(B.kind)}])},[w("span",{class:At(["badge me-1",/buy/i.test(B.kind)?"bg-success-subtle text-success-emphasis":"bg-danger-subtle text-danger-emphasis"])},oe(B.kind),3),w("div",uF,[w("div",dF,oe(x(B.happenedAt)),1),w("div",fF,"Qty: "+oe(B.quantity),1)]),w("div",hF,oe(C(B.unitPrice,B.currency)),1)],2))),128))])])):ke("",!0)])])])])])]),_:1})]),_:1})]),_:1},8,["open"])],64))}}),y_=gn(pF,[["__scopeId","data-v-8095b2d9"]]),gF={class:"container py-4"},mF={key:0,class:"text-center py-5"},yF={key:1,class:"text-center py-5"},vF={key:2},bF={class:"d-flex align-items-center justify-content-between mb-3"},_F={class:"d-flex gap-2"},wF={class:"card shadow-sm mb-4"},xF={class:"card-body"},kF={class:"d-flex align-items-start justify-content-between"},CF={class:"w-100"},SF={key:1,class:"d-flex align-items-center flex-nowrap gap-2"},PF={class:"input-group input-group-lg w-auto",style:{"max-width":"480px"}},AF={class:"d-flex flex-wrap align-items-center gap-2 mt-2"},IF={key:0,class:"badge text-uppercase bg-info text-dark"},EF={class:"text-muted"},OF={key:1,class:"text-success d-inline-flex align-items-center"},MF={key:0,class:"alert alert-warning mt-3 py-2 mb-0"},TF={key:0,class:"text-center py-5 text-muted"},DF={key:1,class:"row row-cols-2 row-cols-md-3 row-cols-lg-4 row-cols-xl-5 row-cols-xxl-6 g-3"},RF=["onClick"],$F={key:0,class:"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-success",title:"Face card"},FF={class:"modal-dialog"},LF={class:"modal-content"},BF={class:"modal-body"},jF={class:"mb-0"},NF={class:"modal-footer"},zF=["disabled"],qF=["disabled"],UF={key:0,class:"spinner-border spinner-border-sm me-1",role:"status","aria-hidden":"true"},WF={key:4,class:"modal-backdrop fade show"},VF="https://placehold.co/200x280?text=Card+Image",HF=Ze({__name:"DeckDetailView",setup(t){const e=Jd(),n=gv(),r=pe(null),s=pe([]),i=pe({}),o=pe(!0),a=pe(!1),l=pe(""),c=pe(null),u=pe(!1),f=pe(!1),p=pe(!1),g=Ve(()=>r.value?.faceCardId?_(r.value.faceCardId):null),v=Y=>Y?new Date(Y).toLocaleDateString():"—",_=Y=>i.value[Y]||{id:Y,name:"Unknown Card",set:"Unknown Set",setCode:"???",number:"???",lang:"en",finish:"nonfoil",imageUrl:VF},x=()=>{r.value&&(a.value=!0,l.value=r.value.name,ln(()=>{c.value?.focus(),c.value?.select()}))},C=async()=>{if(!r.value){a.value=!1;return}const Y=l.value.trim();if(!Y||Y===r.value.name){a.value=!1;return}try{await ue.decks.update(r.value.id,{name:Y}),r.value.name=Y}catch(z){console.error("Error updating deck title:",z),alert("Failed to update deck title. Please try again.")}finally{a.value=!1}},S=()=>{a.value=!1,l.value=r.value?.name??""},A=()=>{u.value=!u.value},O=async Y=>{await F(Y),u.value=!1},F=async Y=>{if(r.value)try{await ue.decks.update(r.value.id,{faceCardId:Y}),r.value.faceCardId=Y}catch(z){console.error("Error updating face card:",z),alert("Failed to update face card. Please try again.")}},M=async()=>{if(r.value)try{await ue.decks.update(r.value.id,{faceCardId:void 0}),r.value.faceCardId=void 0}catch(Y){console.error("Error clearing face card:",Y),alert("Failed to clear face card. Please try again.")}},D=()=>{f.value=!0},B=()=>{p.value||(f.value=!1)},P=async()=>{if(!(!r.value||p.value)){p.value=!0;try{await ue.deck_cards.where("deckId").equals(r.value.id).delete(),await ue.decks.delete(r.value.id),B(),n.push("/decks")}catch(Y){console.error("Error deleting deck:",Y),alert("Failed to delete deck. Please try again.")}finally{p.value=!1}}};return Mn(async()=>{try{const Y=e.params.id,z=await ue.decks.get(Y);if(!z)return;r.value=z,l.value=z.name;const fe=await ue.deck_cards.where("deckId").equals(Y).toArray();s.value=fe;const me=fe.map(Ae=>Ae.cardId).filter(Boolean);if(me.length){const Ae=await ue.cards.where("id").anyOf(me).toArray();i.value=Object.fromEntries(Ae.map(Ce=>[Ce.id,Ce]))}}catch(Y){console.error("Error loading deck:",Y)}finally{o.value=!1}}),(Y,z)=>{const fe=Ci("router-link");return U(),J("div",gF,[o.value?(U(),J("div",mF,[...z[1]||(z[1]=[w("div",{class:"spinner-border",role:"status","aria-hidden":"true"},null,-1),w("div",{class:"mt-2"},"Loading deck…",-1)])])):r.value?(U(),J("div",vF,[w("div",bF,[Ue(fe,{to:"/decks",class:"btn btn-link px-0"},{default:at(()=>[...z[4]||(z[4]=[bt(" ← Back to Decks ",-1)])]),_:1}),w("div",_F,[w("button",{onClick:A,class:At(["btn",u.value?"btn-glass-warning":"btn-glass-primary"])},oe(u.value?"Cancel Select Mode":"Select Face Card"),3),r.value.faceCardId?(U(),J("button",{key:0,onClick:M,class:"btn btn-glass-secondary"}," Remove Face Card ")):ke("",!0),w("button",{onClick:D,class:"btn btn-glass-danger"}," Delete Deck ")])]),w("div",wF,[w("div",xF,[w("div",kF,[w("div",CF,[a.value?(U(),J("div",SF,[w("div",PF,[Fs(w("input",{ref_key:"titleInput",ref:c,"onUpdate:modelValue":z[0]||(z[0]=me=>l.value=me),onKeyup:[Gh(C,["enter"]),Gh(S,["esc"])],type:"text",class:"form-control",placeholder:"Deck title"},null,544),[[Ol,l.value]]),w("button",{onClick:C,class:"btn btn-glass-primary"},"Save"),w("button",{onClick:S,class:"btn btn-outline-secondary"},"Cancel")])])):(U(),J("h1",{key:0,onClick:x,class:"h3 mb-2 editable",title:"Click to edit title"},[bt(oe(r.value.name)+" ",1),z[5]||(z[5]=w("span",{class:"ms-2 small text-muted"},"✏️",-1))])),w("div",AF,[r.value.platform?(U(),J("span",IF,oe(r.value.platform),1)):ke("",!0),w("small",EF,"Imported: "+oe(v(r.value.importedAt)),1),g.value?(U(),J("small",OF,[...z[6]||(z[6]=[w("span",{class:"me-1"},"★",-1),bt(" Face card set ",-1)])])):ke("",!0)])])]),u.value?(U(),J("div",MF," Select mode is active — click a card below to set it as the face card. ")):ke("",!0)])]),w("div",null,[z[8]||(z[8]=w("h2",{class:"h5 mb-3"},"Cards in Deck",-1)),s.value.length===0?(U(),J("div",TF," No cards found in this deck. ")):(U(),J("div",DF,[(U(!0),J(et,null,Ft(s.value,me=>(U(),J("div",{key:me.id,class:"col"},[w("div",{class:At(["position-relative h-100",{"border border-success rounded":me.cardId===r.value.faceCardId,"cursor-pointer":u.value}]),role:"button",onClick:Ae=>u.value?O(me.cardId):null},[Ue(y_,{card:_(me.cardId),"disable-modal":u.value},null,8,["card","disable-modal"]),me.cardId===r.value.faceCardId?(U(),J("span",$F,[...z[7]||(z[7]=[bt(" ★ ",-1),w("span",{class:"visually-hidden"},"Face card",-1)])])):ke("",!0)],10,RF)]))),128))]))])])):(U(),J("div",yF,[z[3]||(z[3]=w("p",{class:"mb-3"},"Deck not found.",-1)),Ue(fe,{to:"/decks",class:"btn btn-outline-secondary"},{default:at(()=>[...z[2]||(z[2]=[bt("← Back to Decks",-1)])]),_:1})])),f.value?(U(),J("div",{key:3,class:"modal fade show",tabindex:"-1",style:{display:"block"},"aria-modal":"true",role:"dialog","aria-labelledby":"deleteDeckLabel",onClick:fl(B,["self"])},[w("div",FF,[w("div",LF,[w("div",{class:"modal-header"},[z[9]||(z[9]=w("h5",{id:"deleteDeckLabel",class:"modal-title"},"Delete this deck?",-1)),w("button",{type:"button",class:"btn-close","aria-label":"Close",onClick:B})]),w("div",BF,[w("p",jF,[z[10]||(z[10]=bt(" You’re about to delete ",-1)),w("strong",null,oe(r.value?.name),1),z[11]||(z[11]=bt(". This action cannot be undone. ",-1))])]),w("div",NF,[w("button",{class:"btn btn-outline-secondary",disabled:p.value,onClick:B}," Cancel ",8,zF),w("button",{class:"btn btn-danger",disabled:p.value,onClick:P},[p.value?(U(),J("span",UF)):ke("",!0),z[12]||(z[12]=bt(" Delete ",-1))],8,qF)])])])])):ke("",!0),f.value?(U(),J("div",WF)):ke("",!0)])}}}),KF=gn(HF,[["__scopeId","data-v-c02bed36"]]),YF={key:0,class:"pagination-controls"},GF={class:"pagination justify-content-center"},XF=["onClick"],QF={class:"pagination-info text-center mt-2"},JF=Ze({__name:"PaginationComponent",props:{currentPage:{},totalItems:{},itemsPerPage:{},maxVisiblePages:{}},emits:["update:currentPage"],setup(t,{emit:e}){const n=t,r=e,s=Ve(()=>Math.ceil(n.totalItems/n.itemsPerPage)),i=Ve(()=>n.maxVisiblePages||5),o=Ve(()=>{const u=[],f=Math.floor(i.value/2);let p=Math.max(1,n.currentPage-f),g=Math.min(s.value,p+i.value-1);g-p+1<i.value&&(p=Math.max(1,g-i.value+1));for(let v=p;v<=g;v++)u.push(v);return u}),a=Ve(()=>(n.currentPage-1)*n.itemsPerPage),l=Ve(()=>n.currentPage*n.itemsPerPage),c=u=>{u>=1&&u<=s.value&&u!==n.currentPage&&r("update:currentPage",u)};return(u,f)=>s.value>1?(U(),J("nav",YF,[w("ul",GF,[w("li",{class:At(["page-item",{disabled:u.currentPage===1}])},[w("a",{class:"page-link",href:"#",onClick:f[0]||(f[0]=fl(p=>c(u.currentPage-1),["prevent"]))},"Previous")],2),(U(!0),J(et,null,Ft(o.value,p=>(U(),J("li",{key:p,class:At(["page-item",{active:p===u.currentPage}])},[w("a",{class:"page-link",href:"#",onClick:fl(g=>c(p),["prevent"])},oe(p),9,XF)],2))),128)),w("li",{class:At(["page-item",{disabled:u.currentPage===s.value}])},[w("a",{class:"page-link",href:"#",onClick:f[1]||(f[1]=fl(p=>c(u.currentPage+1),["prevent"]))},"Next")],2)]),w("div",QF," Showing "+oe(a.value+1)+"-"+oe(Math.min(l.value,u.totalItems))+" of "+oe(u.totalItems)+" items ",1)])):ke("",!0)}}),ZF=gn(JF,[["__scopeId","data-v-7b87ee6f"]]),eL={class:"cards-view"},tL={class:"header"},nL={class:"controls"},rL={class:"search-box"},sL={class:"sort-controls"},iL={class:"page-size-controls"},oL={key:0,class:"loading"},aL={key:1,class:"empty-state"},lL={key:0},cL={key:1},uL={key:2},dL={class:"row g-4"},fL=Ze({__name:"CardsView",setup(t){const e=Zd(),n=Jd(),r=gv(),s=pe(""),i=pe("name"),o=pe("asc"),a=pe(parseInt(n.query.page)||1),l=pe(parseInt(n.query.itemsPerPage)||24);Ht(()=>n.query,g=>{a.value=parseInt(g.page)||1,l.value=parseInt(g.itemsPerPage)||24}),Ht([a,l],()=>{const g={};a.value!==1&&(g.page=a.value.toString()),l.value!==24&&(g.itemsPerPage=l.value.toString()),s.value&&(g.search=s.value),i.value!=="name"&&(g.sortBy=i.value),o.value!=="asc"&&(g.sortDirection=o.value),r.replace({query:g})});const c=Ve(()=>{const g=e.getAllCards;if(!s.value)return g;const v=s.value.toLowerCase();return g.filter(_=>_.name.toLowerCase().includes(v)||_.set.toLowerCase().includes(v)||_.number.includes(v))}),u=Ve(()=>{const g=[...c.value];return g.sort((v,_)=>{let x=0;switch(i.value){case"name":x=v.name.localeCompare(_.name);break;case"set":x=v.set.localeCompare(_.set);break;case"price":{const C=e.getCardPrice(v.id)?.getCents()??0,S=e.getCardPrice(_.id)?.getCents()??0;x=C-S}break;case"owned":x=0;break;default:x=v.name.localeCompare(_.name)}return o.value==="asc"?x:-x}),g}),f=Ve(()=>{const g=(a.value-1)*l.value,v=g+l.value;return u.value.slice(g,v)}),p=g=>{a.value=g,window.scrollTo({top:0,behavior:"smooth"})};return Mn(()=>{n.query.search&&(s.value=n.query.search),n.query.sortBy&&(i.value=n.query.sortBy),n.query.sortDirection&&(o.value=n.query.sortDirection),e.loadCards(),setTimeout(()=>{e.loadCardPrices()},0)}),(g,v)=>(U(),J("div",eL,[w("div",tL,[w("div",nL,[w("div",rL,[Fs(w("input",{"onUpdate:modelValue":v[0]||(v[0]=_=>s.value=_),type:"text",placeholder:"Search cards...",class:"form-control"},null,512),[[Ol,s.value]])]),w("div",sL,[Fs(w("select",{"onUpdate:modelValue":v[1]||(v[1]=_=>i.value=_),class:"form-select"},[...v[4]||(v[4]=[w("option",{value:"name"},"Name",-1),w("option",{value:"set"},"Set",-1),w("option",{value:"price"},"Price",-1),w("option",{value:"owned"},"Owned Quantity",-1)])],512),[[Kh,i.value]]),w("button",{onClick:v[2]||(v[2]=_=>o.value=o.value==="asc"?"desc":"asc"),class:"btn btn-glass-primary"},oe(o.value==="asc"?"↑":"↓"),1)]),w("div",iL,[v[6]||(v[6]=w("label",{for:"itemsPerPage",class:"form-label me-2"},"Items per page:",-1)),Fs(w("select",{id:"itemsPerPage","onUpdate:modelValue":v[3]||(v[3]=_=>l.value=_),class:"form-select",style:{width:"auto"}},[...v[5]||(v[5]=[w("option",{value:12},"12",-1),w("option",{value:24},"24",-1),w("option",{value:48},"48",-1),w("option",{value:96},"96",-1)])],512),[[Kh,l.value]])])])]),$e(e).loading||$e(e).loadingPrices?(U(),J("div",oL," Loading cards and prices... ")):u.value.length===0?(U(),J("div",aL,[s.value?(U(),J("p",lL,"No cards match your search.")):(U(),J("p",cL,"You don't have any cards in your collection yet."))])):(U(),J("div",uL,[w("div",dL,[(U(!0),J(et,null,Ft(f.value,_=>(U(),J("div",{key:_.id,class:"col-xl-2 col-lg-3 col-md-4 col-sm-6"},[Ue(y_,{card:_},null,8,["card"])]))),128))]),Ue(ZF,{"current-page":a.value,"total-items":u.value.length,"items-per-page":l.value,"onUpdate:currentPage":p},null,8,["current-page","total-items","items-per-page"])]))]))}}),hL=gn(fL,[["__scopeId","data-v-9526db4f"]]),pL=[{path:"/",name:"home",component:WI},{path:"/import",component:JI,children:[{path:"",name:"import",redirect:"/import/cardmarket"},{path:"cardmarket",name:"import-cardmarket",component:rM},{path:"mtgjson",name:"import-mtgjson",component:MT},{path:"price-guide",name:"import-price-guide",component:QT}]},{path:"/import/deck",name:"deck-import",component:aD},{path:"/decks",name:"decks",component:kD},{path:"/decks/:id",name:"deck-detail",component:KF,props:!0},{path:"/cards",name:"cards",component:hL}],gL=S1({history:e1("/mtg-pwa/"),routes:pL}),mL="modulepreload",yL=function(t){return"/mtg-pwa/"+t},Nm={},vL=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let c=function(u){return Promise.all(u.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};var o=c;document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=a?.nonce||a?.getAttribute("nonce");s=c(n.map(u=>{if(u=yL(u),u in Nm)return;Nm[u]=!0;const f=u.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${p}`))return;const g=document.createElement("link");if(g.rel=f?"stylesheet":mL,f||(g.as="script"),g.crossOrigin="",g.href=u,l&&g.setAttribute("nonce",l),document.head.appendChild(g),f)return new Promise((v,_)=>{g.addEventListener("load",v),g.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})};function bL(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:s,onRegisteredSW:i,onRegisterError:o}=t;let a,l;const c=async(f=!0)=>{await l};async function u(){if("serviceWorker"in navigator){if(a=await vL(async()=>{const{Workbox:f}=await import("./workbox-window.prod.es5-CwtvwXb3.js");return{Workbox:f}},[]).then(({Workbox:f})=>new f("/mtg-pwa/sw.js",{scope:"/mtg-pwa/",type:"classic"})).catch(f=>{o?.(f)}),!a)return;a.addEventListener("activated",f=>{(f.isUpdate||f.isExternal)&&window.location.reload()}),a.addEventListener("installed",f=>{f.isUpdate||r?.()}),a.register({immediate:e}).then(f=>{i?i("/mtg-pwa/sw.js",f):s?.(f)}).catch(f=>{o?.(f)})}}return l=u(),c}bL({immediate:!0,onRegistered(t){console.log("SW registered",t)},onRegisterError(t){console.error("SW registration error",t)}});const v_=_x(ck),_L=T1();v_.use(_L);async function wL(){v_.use(gL).mount("#app");try{setTimeout(async()=>{await fi.schedulePriceUpdate()},1e3)}catch(t){console.error("Error initializing automatic price updates:",t)}}wL();
